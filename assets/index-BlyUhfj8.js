var R$=Object.defineProperty;var I$=(t,n,a)=>n in t?R$(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a;var BC=(t,n,a)=>I$(t,typeof n!="symbol"?n+"":n,a);function _mergeNamespaces(t,n){for(var a=0;a<n.length;a++){const s=n[a];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in t)){const u=Object.getOwnPropertyDescriptor(s,l);u&&Object.defineProperty(t,l,u.get?u:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=a(l);fetch(l.href,u)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var n=t.default;if(typeof n=="function"){var a=function s(){return this instanceof s?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var l=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(a,s,l.get?l:{enumerable:!0,get:function(){return t[s]}})}),a}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(s,l,u){var c=null;if(u!==void 0&&(c=""+u),l.key!==void 0&&(c=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:t,type:s,key:c,ref:l!==void 0?l:null,props:u}}return reactJsxRuntime_production.Fragment=n,reactJsxRuntime_production.jsx=a,reactJsxRuntime_production.jsxs=a,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.iterator;function T(ox){return ox===null||typeof ox!="object"?null:(ox=S&&ox[S]||ox["@@iterator"],typeof ox=="function"?ox:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,D={};function O(ox,hx,_x){this.props=ox,this.context=hx,this.refs=D,this.updater=_x||A}O.prototype.isReactComponent={},O.prototype.setState=function(ox,hx){if(typeof ox!="object"&&typeof ox!="function"&&ox!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ox,hx,"setState")},O.prototype.forceUpdate=function(ox){this.updater.enqueueForceUpdate(this,ox,"forceUpdate")};function F(){}F.prototype=O.prototype;function z(ox,hx,_x){this.props=ox,this.context=hx,this.refs=D,this.updater=_x||A}var j=z.prototype=new F;j.constructor=z,R(j,O.prototype),j.isPureReactComponent=!0;var Z=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function en(ox,hx,_x,ux,px,dx){return _x=dx.ref,{$$typeof:t,type:ox,key:hx,ref:_x!==void 0?_x:null,props:dx}}function tn(ox,hx){return en(ox.type,hx,void 0,void 0,void 0,ox.props)}function Ct(ox){return typeof ox=="object"&&ox!==null&&ox.$$typeof===t}function Q(ox){var hx={"=":"=0",":":"=2"};return"$"+ox.replace(/[=:]/g,function(_x){return hx[_x]})}var on=/\/+/g;function gn(ox,hx){return typeof ox=="object"&&ox!==null&&ox.key!=null?Q(""+ox.key):hx.toString(36)}function In(){}function dn(ox){switch(ox.status){case"fulfilled":return ox.value;case"rejected":throw ox.reason;default:switch(typeof ox.status=="string"?ox.then(In,In):(ox.status="pending",ox.then(function(hx){ox.status==="pending"&&(ox.status="fulfilled",ox.value=hx)},function(hx){ox.status==="pending"&&(ox.status="rejected",ox.reason=hx)})),ox.status){case"fulfilled":return ox.value;case"rejected":throw ox.reason}}throw ox}function ix(ox,hx,_x,ux,px){var dx=typeof ox;(dx==="undefined"||dx==="boolean")&&(ox=null);var mx=!1;if(ox===null)mx=!0;else switch(dx){case"bigint":case"string":case"number":mx=!0;break;case"object":switch(ox.$$typeof){case t:case n:mx=!0;break;case _:return mx=ox._init,ix(mx(ox._payload),hx,_x,ux,px)}}if(mx)return px=px(ox),mx=ux===""?"."+gn(ox,0):ux,Z(px)?(_x="",mx!=null&&(_x=mx.replace(on,"$&/")+"/"),ix(px,hx,_x,"",function(Ex){return Ex})):px!=null&&(Ct(px)&&(px=tn(px,_x+(px.key==null||ox&&ox.key===px.key?"":(""+px.key).replace(on,"$&/")+"/")+mx)),hx.push(px)),1;mx=0;var gx=ux===""?".":ux+":";if(Z(ox))for(var Sx=0;Sx<ox.length;Sx++)ux=ox[Sx],dx=gx+gn(ux,Sx),mx+=ix(ux,hx,_x,dx,px);else if(Sx=T(ox),typeof Sx=="function")for(ox=Sx.call(ox),Sx=0;!(ux=ox.next()).done;)ux=ux.value,dx=gx+gn(ux,Sx++),mx+=ix(ux,hx,_x,dx,px);else if(dx==="object"){if(typeof ox.then=="function")return ix(dn(ox),hx,_x,ux,px);throw hx=String(ox),Error("Objects are not valid as a React child (found: "+(hx==="[object Object]"?"object with keys {"+Object.keys(ox).join(", ")+"}":hx)+"). If you meant to render a collection of children, use an array instead.")}return mx}function Cn(ox,hx,_x){if(ox==null)return ox;var ux=[],px=0;return ix(ox,ux,"","",function(dx){return hx.call(_x,dx,px++)}),ux}function ax(ox){if(ox._status===-1){var hx=ox._result;hx=hx(),hx.then(function(_x){(ox._status===0||ox._status===-1)&&(ox._status=1,ox._result=_x)},function(_x){(ox._status===0||ox._status===-1)&&(ox._status=2,ox._result=_x)}),ox._status===-1&&(ox._status=0,ox._result=hx)}if(ox._status===1)return ox._result.default;throw ox._result}var sx=typeof reportError=="function"?reportError:function(ox){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var hx=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ox=="object"&&ox!==null&&typeof ox.message=="string"?String(ox.message):String(ox),error:ox});if(!window.dispatchEvent(hx))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ox);return}console.error(ox)};function lx(){}return react_production.Children={map:Cn,forEach:function(ox,hx,_x){Cn(ox,function(){hx.apply(this,arguments)},_x)},count:function(ox){var hx=0;return Cn(ox,function(){hx++}),hx},toArray:function(ox){return Cn(ox,function(hx){return hx})||[]},only:function(ox){if(!Ct(ox))throw Error("React.Children.only expected to receive a single React element child.");return ox}},react_production.Component=O,react_production.Fragment=a,react_production.Profiler=l,react_production.PureComponent=z,react_production.StrictMode=s,react_production.Suspense=d,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(ox){return W.H.useMemoCache(ox)}},react_production.cache=function(ox){return function(){return ox.apply(null,arguments)}},react_production.cloneElement=function(ox,hx,_x){if(ox==null)throw Error("The argument must be a React element, but you passed "+ox+".");var ux=R({},ox.props),px=ox.key,dx=void 0;if(hx!=null)for(mx in hx.ref!==void 0&&(dx=void 0),hx.key!==void 0&&(px=""+hx.key),hx)!J.call(hx,mx)||mx==="key"||mx==="__self"||mx==="__source"||mx==="ref"&&hx.ref===void 0||(ux[mx]=hx[mx]);var mx=arguments.length-2;if(mx===1)ux.children=_x;else if(1<mx){for(var gx=Array(mx),Sx=0;Sx<mx;Sx++)gx[Sx]=arguments[Sx+2];ux.children=gx}return en(ox.type,px,void 0,void 0,dx,ux)},react_production.createContext=function(ox){return ox={$$typeof:c,_currentValue:ox,_currentValue2:ox,_threadCount:0,Provider:null,Consumer:null},ox.Provider=ox,ox.Consumer={$$typeof:u,_context:ox},ox},react_production.createElement=function(ox,hx,_x){var ux,px={},dx=null;if(hx!=null)for(ux in hx.key!==void 0&&(dx=""+hx.key),hx)J.call(hx,ux)&&ux!=="key"&&ux!=="__self"&&ux!=="__source"&&(px[ux]=hx[ux]);var mx=arguments.length-2;if(mx===1)px.children=_x;else if(1<mx){for(var gx=Array(mx),Sx=0;Sx<mx;Sx++)gx[Sx]=arguments[Sx+2];px.children=gx}if(ox&&ox.defaultProps)for(ux in mx=ox.defaultProps,mx)px[ux]===void 0&&(px[ux]=mx[ux]);return en(ox,dx,void 0,void 0,null,px)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(ox){return{$$typeof:p,render:ox}},react_production.isValidElement=Ct,react_production.lazy=function(ox){return{$$typeof:_,_payload:{_status:-1,_result:ox},_init:ax}},react_production.memo=function(ox,hx){return{$$typeof:x,type:ox,compare:hx===void 0?null:hx}},react_production.startTransition=function(ox){var hx=W.T,_x={};W.T=_x;try{var ux=ox(),px=W.S;px!==null&&px(_x,ux),typeof ux=="object"&&ux!==null&&typeof ux.then=="function"&&ux.then(lx,sx)}catch(dx){sx(dx)}finally{W.T=hx}},react_production.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},react_production.use=function(ox){return W.H.use(ox)},react_production.useActionState=function(ox,hx,_x){return W.H.useActionState(ox,hx,_x)},react_production.useCallback=function(ox,hx){return W.H.useCallback(ox,hx)},react_production.useContext=function(ox){return W.H.useContext(ox)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(ox,hx){return W.H.useDeferredValue(ox,hx)},react_production.useEffect=function(ox,hx,_x){var ux=W.H;if(typeof _x=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ux.useEffect(ox,hx)},react_production.useId=function(){return W.H.useId()},react_production.useImperativeHandle=function(ox,hx,_x){return W.H.useImperativeHandle(ox,hx,_x)},react_production.useInsertionEffect=function(ox,hx){return W.H.useInsertionEffect(ox,hx)},react_production.useLayoutEffect=function(ox,hx){return W.H.useLayoutEffect(ox,hx)},react_production.useMemo=function(ox,hx){return W.H.useMemo(ox,hx)},react_production.useOptimistic=function(ox,hx){return W.H.useOptimistic(ox,hx)},react_production.useReducer=function(ox,hx,_x){return W.H.useReducer(ox,hx,_x)},react_production.useRef=function(ox){return W.H.useRef(ox)},react_production.useState=function(ox){return W.H.useState(ox)},react_production.useSyncExternalStore=function(ox,hx,_x){return W.H.useSyncExternalStore(ox,hx,_x)},react_production.useTransition=function(){return W.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(t){function n(Cn,ax){var sx=Cn.length;Cn.push(ax);e:for(;0<sx;){var lx=sx-1>>>1,ox=Cn[lx];if(0<l(ox,ax))Cn[lx]=ax,Cn[sx]=ox,sx=lx;else break e}}function a(Cn){return Cn.length===0?null:Cn[0]}function s(Cn){if(Cn.length===0)return null;var ax=Cn[0],sx=Cn.pop();if(sx!==ax){Cn[0]=sx;e:for(var lx=0,ox=Cn.length,hx=ox>>>1;lx<hx;){var _x=2*(lx+1)-1,ux=Cn[_x],px=_x+1,dx=Cn[px];if(0>l(ux,sx))px<ox&&0>l(dx,ux)?(Cn[lx]=dx,Cn[px]=sx,lx=px):(Cn[lx]=ux,Cn[_x]=sx,lx=_x);else if(px<ox&&0>l(dx,sx))Cn[lx]=dx,Cn[px]=sx,lx=px;else break e}}return ax}function l(Cn,ax){var sx=Cn.sortIndex-ax.sortIndex;return sx!==0?sx:Cn.id-ax.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var c=Date,p=c.now();t.unstable_now=function(){return c.now()-p}}var d=[],x=[],_=1,S=null,T=3,A=!1,R=!1,D=!1,O=!1,F=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function Z(Cn){for(var ax=a(x);ax!==null;){if(ax.callback===null)s(x);else if(ax.startTime<=Cn)s(x),ax.sortIndex=ax.expirationTime,n(d,ax);else break;ax=a(x)}}function W(Cn){if(D=!1,Z(Cn),!R)if(a(d)!==null)R=!0,J||(J=!0,gn());else{var ax=a(x);ax!==null&&ix(W,ax.startTime-Cn)}}var J=!1,en=-1,tn=5,Ct=-1;function Q(){return O?!0:!(t.unstable_now()-Ct<tn)}function on(){if(O=!1,J){var Cn=t.unstable_now();Ct=Cn;var ax=!0;try{e:{R=!1,D&&(D=!1,z(en),en=-1),A=!0;var sx=T;try{t:{for(Z(Cn),S=a(d);S!==null&&!(S.expirationTime>Cn&&Q());){var lx=S.callback;if(typeof lx=="function"){S.callback=null,T=S.priorityLevel;var ox=lx(S.expirationTime<=Cn);if(Cn=t.unstable_now(),typeof ox=="function"){S.callback=ox,Z(Cn),ax=!0;break t}S===a(d)&&s(d),Z(Cn)}else s(d);S=a(d)}if(S!==null)ax=!0;else{var hx=a(x);hx!==null&&ix(W,hx.startTime-Cn),ax=!1}}break e}finally{S=null,T=sx,A=!1}ax=void 0}}finally{ax?gn():J=!1}}}var gn;if(typeof j=="function")gn=function(){j(on)};else if(typeof MessageChannel<"u"){var In=new MessageChannel,dn=In.port2;In.port1.onmessage=on,gn=function(){dn.postMessage(null)}}else gn=function(){F(on,0)};function ix(Cn,ax){en=F(function(){Cn(t.unstable_now())},ax)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Cn){Cn.callback=null},t.unstable_forceFrameRate=function(Cn){0>Cn||125<Cn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):tn=0<Cn?Math.floor(1e3/Cn):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(Cn){switch(T){case 1:case 2:case 3:var ax=3;break;default:ax=T}var sx=T;T=ax;try{return Cn()}finally{T=sx}},t.unstable_requestPaint=function(){O=!0},t.unstable_runWithPriority=function(Cn,ax){switch(Cn){case 1:case 2:case 3:case 4:case 5:break;default:Cn=3}var sx=T;T=Cn;try{return ax()}finally{T=sx}},t.unstable_scheduleCallback=function(Cn,ax,sx){var lx=t.unstable_now();switch(typeof sx=="object"&&sx!==null?(sx=sx.delay,sx=typeof sx=="number"&&0<sx?lx+sx:lx):sx=lx,Cn){case 1:var ox=-1;break;case 2:ox=250;break;case 5:ox=1073741823;break;case 4:ox=1e4;break;default:ox=5e3}return ox=sx+ox,Cn={id:_++,callback:ax,priorityLevel:Cn,startTime:sx,expirationTime:ox,sortIndex:-1},sx>lx?(Cn.sortIndex=sx,n(x,Cn),a(d)===null&&Cn===a(x)&&(D?(z(en),en=-1):D=!0,ix(W,sx-lx))):(Cn.sortIndex=ox,n(d,Cn),R||A||(R=!0,J||(J=!0,gn()))),Cn},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(Cn){var ax=T;return function(){var sx=T;T=ax;try{return Cn.apply(this,arguments)}finally{T=sx}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function n(d){var x="https://react.dev/errors/"+d;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)x+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+d+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(d,x,_){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:S==null?null:""+S,children:d,containerInfo:x,implementation:_}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(d,x){if(d==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,reactDom_production.createPortal=function(d,x){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(n(299));return u(d,x,null,_)},reactDom_production.flushSync=function(d){var x=c.T,_=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=x,s.p=_,s.d.f()}},reactDom_production.preconnect=function(d,x){typeof d=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,s.d.C(d,x))},reactDom_production.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},reactDom_production.preinit=function(d,x){if(typeof d=="string"&&x&&typeof x.as=="string"){var _=x.as,S=p(_,x.crossOrigin),T=typeof x.integrity=="string"?x.integrity:void 0,A=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;_==="style"?s.d.S(d,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:S,integrity:T,fetchPriority:A}):_==="script"&&s.d.X(d,{crossOrigin:S,integrity:T,fetchPriority:A,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},reactDom_production.preinitModule=function(d,x){if(typeof d=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var _=p(x.as,x.crossOrigin);s.d.M(d,{crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&s.d.M(d)},reactDom_production.preload=function(d,x){if(typeof d=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var _=x.as,S=p(_,x.crossOrigin);s.d.L(d,_,{crossOrigin:S,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},reactDom_production.preloadModule=function(d,x){if(typeof d=="string")if(x){var _=p(x.as,x.crossOrigin);s.d.m(d,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else s.d.m(d)},reactDom_production.requestFormReset=function(d){s.d.r(d)},reactDom_production.unstable_batchedUpdates=function(d,x){return d(x)},reactDom_production.useFormState=function(d,x,_){return c.H.useFormState(d,x,_)},reactDom_production.useFormStatus=function(){return c.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),n=requireReact(),a=requireReactDom();function s(I){var P="https://react.dev/errors/"+I;if(1<arguments.length){P+="?args[]="+encodeURIComponent(arguments[1]);for(var Y=2;Y<arguments.length;Y++)P+="&args[]="+encodeURIComponent(arguments[Y])}return"Minified React error #"+I+"; visit "+P+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(I){return!(!I||I.nodeType!==1&&I.nodeType!==9&&I.nodeType!==11)}function u(I){var P=I,Y=I;if(I.alternate)for(;P.return;)P=P.return;else{I=P;do P=I,(P.flags&4098)!==0&&(Y=P.return),I=P.return;while(I)}return P.tag===3?Y:null}function c(I){if(I.tag===13){var P=I.memoizedState;if(P===null&&(I=I.alternate,I!==null&&(P=I.memoizedState)),P!==null)return P.dehydrated}return null}function p(I){if(u(I)!==I)throw Error(s(188))}function d(I){var P=I.alternate;if(!P){if(P=u(I),P===null)throw Error(s(188));return P!==I?null:I}for(var Y=I,ar=P;;){var cn=Y.return;if(cn===null)break;var ex=cn.alternate;if(ex===null){if(ar=cn.return,ar!==null){Y=ar;continue}break}if(cn.child===ex.child){for(ex=cn.child;ex;){if(ex===Y)return p(cn),I;if(ex===ar)return p(cn),P;ex=ex.sibling}throw Error(s(188))}if(Y.return!==ar.return)Y=cn,ar=ex;else{for(var cx=!1,bx=cn.child;bx;){if(bx===Y){cx=!0,Y=cn,ar=ex;break}if(bx===ar){cx=!0,ar=cn,Y=ex;break}bx=bx.sibling}if(!cx){for(bx=ex.child;bx;){if(bx===Y){cx=!0,Y=ex,ar=cn;break}if(bx===ar){cx=!0,ar=ex,Y=cn;break}bx=bx.sibling}if(!cx)throw Error(s(189))}}if(Y.alternate!==ar)throw Error(s(190))}if(Y.tag!==3)throw Error(s(188));return Y.stateNode.current===Y?I:P}function x(I){var P=I.tag;if(P===5||P===26||P===27||P===6)return I;for(I=I.child;I!==null;){if(P=x(I),P!==null)return P;I=I.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),j=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),en=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),Ct=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),on=Symbol.iterator;function gn(I){return I===null||typeof I!="object"?null:(I=on&&I[on]||I["@@iterator"],typeof I=="function"?I:null)}var In=Symbol.for("react.client.reference");function dn(I){if(I==null)return null;if(typeof I=="function")return I.$$typeof===In?null:I.displayName||I.name||null;if(typeof I=="string")return I;switch(I){case R:return"Fragment";case O:return"Profiler";case D:return"StrictMode";case W:return"Suspense";case J:return"SuspenseList";case Ct:return"Activity"}if(typeof I=="object")switch(I.$$typeof){case A:return"Portal";case j:return(I.displayName||"Context")+".Provider";case z:return(I._context.displayName||"Context")+".Consumer";case Z:var P=I.render;return I=I.displayName,I||(I=P.displayName||P.name||"",I=I!==""?"ForwardRef("+I+")":"ForwardRef"),I;case en:return P=I.displayName||null,P!==null?P:dn(I.type)||"Memo";case tn:P=I._payload,I=I._init;try{return dn(I(P))}catch{}}return null}var ix=Array.isArray,Cn=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ax=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,sx={pending:!1,data:null,method:null,action:null},lx=[],ox=-1;function hx(I){return{current:I}}function _x(I){0>ox||(I.current=lx[ox],lx[ox]=null,ox--)}function ux(I,P){ox++,lx[ox]=I.current,I.current=P}var px=hx(null),dx=hx(null),mx=hx(null),gx=hx(null);function Sx(I,P){switch(ux(mx,P),ux(dx,I),ux(px,null),P.nodeType){case 9:case 11:I=(I=P.documentElement)&&(I=I.namespaceURI)?eN(I):0;break;default:if(I=P.tagName,P=P.namespaceURI)P=eN(P),I=tN(P,I);else switch(I){case"svg":I=1;break;case"math":I=2;break;default:I=0}}_x(px),ux(px,I)}function Ex(){_x(px),_x(dx),_x(mx)}function Cx(I){I.memoizedState!==null&&ux(gx,I);var P=px.current,Y=tN(P,I.type);P!==Y&&(ux(dx,I),ux(px,Y))}function Ax(I){dx.current===I&&(_x(px),_x(dx)),gx.current===I&&(_x(gx),OC._currentValue=sx)}var Tx=Object.prototype.hasOwnProperty,kx=t.unstable_scheduleCallback,Rx=t.unstable_cancelCallback,$x=t.unstable_shouldYield,Gx=t.unstable_requestPaint,qx=t.unstable_now,Dx=t.unstable_getCurrentPriorityLevel,lE=t.unstable_ImmediatePriority,cE=t.unstable_UserBlockingPriority,nE=t.unstable_NormalPriority,iE=t.unstable_LowPriority,_E=t.unstable_IdlePriority,sE=t.log,ME=t.unstable_setDisableYieldValue,fx=null,yx=null;function Ix(I){if(typeof sE=="function"&&ME(I),yx&&typeof yx.setStrictMode=="function")try{yx.setStrictMode(fx,I)}catch{}}var Nx=Math.clz32?Math.clz32:Wx,Fx=Math.log,Px=Math.LN2;function Wx(I){return I>>>=0,I===0?32:31-(Fx(I)/Px|0)|0}var jx=256,Qx=4194304;function tE(I){var P=I&42;if(P!==0)return P;switch(I&-I){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return I&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return I&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return I}}function hE(I,P,Y){var ar=I.pendingLanes;if(ar===0)return 0;var cn=0,ex=I.suspendedLanes,cx=I.pingedLanes;I=I.warmLanes;var bx=ar&134217727;return bx!==0?(ar=bx&~ex,ar!==0?cn=tE(ar):(cx&=bx,cx!==0?cn=tE(cx):Y||(Y=bx&~I,Y!==0&&(cn=tE(Y))))):(bx=ar&~ex,bx!==0?cn=tE(bx):cx!==0?cn=tE(cx):Y||(Y=ar&~I,Y!==0&&(cn=tE(Y)))),cn===0?0:P!==0&&P!==cn&&(P&ex)===0&&(ex=cn&-cn,Y=P&-P,ex>=Y||ex===32&&(Y&4194048)!==0)?P:cn}function gE(I,P){return(I.pendingLanes&~(I.suspendedLanes&~I.pingedLanes)&P)===0}function zx(I,P){switch(I){case 1:case 2:case 4:case 8:case 64:return P+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return P+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xx(){var I=jx;return jx<<=1,(jx&4194048)===0&&(jx=256),I}function oE(){var I=Qx;return Qx<<=1,(Qx&62914560)===0&&(Qx=4194304),I}function Jx(I){for(var P=[],Y=0;31>Y;Y++)P.push(I);return P}function fE(I,P){I.pendingLanes|=P,P!==268435456&&(I.suspendedLanes=0,I.pingedLanes=0,I.warmLanes=0)}function pE(I,P,Y,ar,cn,ex){var cx=I.pendingLanes;I.pendingLanes=Y,I.suspendedLanes=0,I.pingedLanes=0,I.warmLanes=0,I.expiredLanes&=Y,I.entangledLanes&=Y,I.errorRecoveryDisabledLanes&=Y,I.shellSuspendCounter=0;var bx=I.entanglements,Ox=I.expirationTimes,Hx=I.hiddenUpdates;for(Y=cx&~Y;0<Y;){var eE=31-Nx(Y),aE=1<<eE;bx[eE]=0,Ox[eE]=-1;var Zx=Hx[eE];if(Zx!==null)for(Hx[eE]=null,eE=0;eE<Zx.length;eE++){var Yx=Zx[eE];Yx!==null&&(Yx.lane&=-536870913)}Y&=~aE}ar!==0&&vx(I,ar,0),ex!==0&&cn===0&&I.tag!==0&&(I.suspendedLanes|=ex&~(cx&~P))}function vx(I,P,Y){I.pendingLanes|=P,I.suspendedLanes&=~P;var ar=31-Nx(P);I.entangledLanes|=P,I.entanglements[ar]=I.entanglements[ar]|1073741824|Y&4194090}function xx(I,P){var Y=I.entangledLanes|=P;for(I=I.entanglements;Y;){var ar=31-Nx(Y),cn=1<<ar;cn&P|I[ar]&P&&(I[ar]|=P),Y&=~cn}}function Mx(I){switch(I){case 2:I=1;break;case 8:I=4;break;case 32:I=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:I=128;break;case 268435456:I=134217728;break;default:I=0}return I}function Lx(I){return I&=-I,2<I?8<I?(I&134217727)!==0?32:268435456:8:2}function Kx(){var I=ax.p;return I!==0?I:(I=window.event,I===void 0?32:_N(I.type))}function dE(I,P){var Y=ax.p;try{return ax.p=I,P()}finally{ax.p=Y}}var vE=Math.random().toString(36).slice(2),mE="__reactFiber$"+vE,yE="__reactProps$"+vE,CE="__reactContainer$"+vE,NE="__reactEvents$"+vE,RE="__reactListeners$"+vE,sS="__reactHandles$"+vE,dS="__reactResources$"+vE,YE="__reactMarker$"+vE;function xS(I){delete I[mE],delete I[yE],delete I[NE],delete I[RE],delete I[sS]}function hS(I){var P=I[mE];if(P)return P;for(var Y=I.parentNode;Y;){if(P=Y[CE]||Y[mE]){if(Y=P.alternate,P.child!==null||Y!==null&&Y.child!==null)for(I=aN(I);I!==null;){if(Y=I[mE])return Y;I=aN(I)}return P}I=Y,Y=I.parentNode}return null}function bS(I){if(I=I[mE]||I[CE]){var P=I.tag;if(P===5||P===6||P===13||P===26||P===27||P===3)return I}return null}function bE(I){var P=I.tag;if(P===5||P===26||P===27||P===6)return I.stateNode;throw Error(s(33))}function uE(I){var P=I[dS];return P||(P=I[dS]={hoistableStyles:new Map,hoistableScripts:new Map}),P}function SE(I){I[YE]=!0}var tS=new Set,WE={};function qE(I,P){$E(I,P),$E(I+"Capture",P)}function $E(I,P){for(WE[I]=P,I=0;I<P.length;I++)tS.add(P[I])}var kE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),TS={},QE={};function _S(I){return Tx.call(QE,I)?!0:Tx.call(TS,I)?!1:kE.test(I)?QE[I]=!0:(TS[I]=!0,!1)}function gS(I,P,Y){if(_S(P))if(Y===null)I.removeAttribute(P);else{switch(typeof Y){case"undefined":case"function":case"symbol":I.removeAttribute(P);return;case"boolean":var ar=P.toLowerCase().slice(0,5);if(ar!=="data-"&&ar!=="aria-"){I.removeAttribute(P);return}}I.setAttribute(P,""+Y)}}function XS(I,P,Y){if(Y===null)I.removeAttribute(P);else{switch(typeof Y){case"undefined":case"function":case"symbol":case"boolean":I.removeAttribute(P);return}I.setAttribute(P,""+Y)}}function iS(I,P,Y,ar){if(ar===null)I.removeAttribute(Y);else{switch(typeof ar){case"undefined":case"function":case"symbol":case"boolean":I.removeAttribute(Y);return}I.setAttributeNS(P,Y,""+ar)}}var US,kC;function PS(I){if(US===void 0)try{throw Error()}catch(Y){var P=Y.stack.trim().match(/\n( *(at )?)/);US=P&&P[1]||"",kC=-1<Y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<Y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+US+I+kC}var AS=!1;function KS(I,P){if(!I||AS)return"";AS=!0;var Y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var ar={DetermineComponentFrameRoot:function(){try{if(P){var aE=function(){throw Error()};if(Object.defineProperty(aE.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(aE,[])}catch(Yx){var Zx=Yx}Reflect.construct(I,[],aE)}else{try{aE.call()}catch(Yx){Zx=Yx}I.call(aE.prototype)}}else{try{throw Error()}catch(Yx){Zx=Yx}(aE=I())&&typeof aE.catch=="function"&&aE.catch(function(){})}}catch(Yx){if(Yx&&Zx&&typeof Yx.stack=="string")return[Yx.stack,Zx.stack]}return[null,null]}};ar.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var cn=Object.getOwnPropertyDescriptor(ar.DetermineComponentFrameRoot,"name");cn&&cn.configurable&&Object.defineProperty(ar.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ex=ar.DetermineComponentFrameRoot(),cx=ex[0],bx=ex[1];if(cx&&bx){var Ox=cx.split(`
`),Hx=bx.split(`
`);for(cn=ar=0;ar<Ox.length&&!Ox[ar].includes("DetermineComponentFrameRoot");)ar++;for(;cn<Hx.length&&!Hx[cn].includes("DetermineComponentFrameRoot");)cn++;if(ar===Ox.length||cn===Hx.length)for(ar=Ox.length-1,cn=Hx.length-1;1<=ar&&0<=cn&&Ox[ar]!==Hx[cn];)cn--;for(;1<=ar&&0<=cn;ar--,cn--)if(Ox[ar]!==Hx[cn]){if(ar!==1||cn!==1)do if(ar--,cn--,0>cn||Ox[ar]!==Hx[cn]){var eE=`
`+Ox[ar].replace(" at new "," at ");return I.displayName&&eE.includes("<anonymous>")&&(eE=eE.replace("<anonymous>",I.displayName)),eE}while(1<=ar&&0<=cn);break}}}finally{AS=!1,Error.prepareStackTrace=Y}return(Y=I?I.displayName||I.name:"")?PS(Y):""}function oT(I){switch(I.tag){case 26:case 27:case 5:return PS(I.type);case 16:return PS("Lazy");case 13:return PS("Suspense");case 19:return PS("SuspenseList");case 0:case 15:return KS(I.type,!1);case 11:return KS(I.type.render,!1);case 1:return KS(I.type,!0);case 31:return PS("Activity");default:return""}}function zT(I){try{var P="";do P+=oT(I),I=I.return;while(I);return P}catch(Y){return`
Error generating stack: `+Y.message+`
`+Y.stack}}function SS(I){switch(typeof I){case"bigint":case"boolean":case"number":case"string":case"undefined":return I;case"object":return I;default:return""}}function VT(I){var P=I.type;return(I=I.nodeName)&&I.toLowerCase()==="input"&&(P==="checkbox"||P==="radio")}function GA(I){var P=VT(I)?"checked":"value",Y=Object.getOwnPropertyDescriptor(I.constructor.prototype,P),ar=""+I[P];if(!I.hasOwnProperty(P)&&typeof Y<"u"&&typeof Y.get=="function"&&typeof Y.set=="function"){var cn=Y.get,ex=Y.set;return Object.defineProperty(I,P,{configurable:!0,get:function(){return cn.call(this)},set:function(cx){ar=""+cx,ex.call(this,cx)}}),Object.defineProperty(I,P,{enumerable:Y.enumerable}),{getValue:function(){return ar},setValue:function(cx){ar=""+cx},stopTracking:function(){I._valueTracker=null,delete I[P]}}}}function sA(I){I._valueTracker||(I._valueTracker=GA(I))}function FC(I){if(!I)return!1;var P=I._valueTracker;if(!P)return!0;var Y=P.getValue(),ar="";return I&&(ar=VT(I)?I.checked?"true":"false":I.value),I=ar,I!==Y?(P.setValue(I),!0):!1}function lA(I){if(I=I||(typeof document<"u"?document:void 0),typeof I>"u")return null;try{return I.activeElement||I.body}catch{return I.body}}var zA=/[\n"\\]/g;function GS(I){return I.replace(zA,function(P){return"\\"+P.charCodeAt(0).toString(16)+" "})}function jM(I,P,Y,ar,cn,ex,cx,bx){I.name="",cx!=null&&typeof cx!="function"&&typeof cx!="symbol"&&typeof cx!="boolean"?I.type=cx:I.removeAttribute("type"),P!=null?cx==="number"?(P===0&&I.value===""||I.value!=P)&&(I.value=""+SS(P)):I.value!==""+SS(P)&&(I.value=""+SS(P)):cx!=="submit"&&cx!=="reset"||I.removeAttribute("value"),P!=null?ZM(I,cx,SS(P)):Y!=null?ZM(I,cx,SS(Y)):ar!=null&&I.removeAttribute("value"),cn==null&&ex!=null&&(I.defaultChecked=!!ex),cn!=null&&(I.checked=cn&&typeof cn!="function"&&typeof cn!="symbol"),bx!=null&&typeof bx!="function"&&typeof bx!="symbol"&&typeof bx!="boolean"?I.name=""+SS(bx):I.removeAttribute("name")}function VA(I,P,Y,ar,cn,ex,cx,bx){if(ex!=null&&typeof ex!="function"&&typeof ex!="symbol"&&typeof ex!="boolean"&&(I.type=ex),P!=null||Y!=null){if(!(ex!=="submit"&&ex!=="reset"||P!=null))return;Y=Y!=null?""+SS(Y):"",P=P!=null?""+SS(P):Y,bx||P===I.value||(I.value=P),I.defaultValue=P}ar=ar??cn,ar=typeof ar!="function"&&typeof ar!="symbol"&&!!ar,I.checked=bx?I.checked:!!ar,I.defaultChecked=!!ar,cx!=null&&typeof cx!="function"&&typeof cx!="symbol"&&typeof cx!="boolean"&&(I.name=cx)}function ZM(I,P,Y){P==="number"&&lA(I.ownerDocument)===I||I.defaultValue===""+Y||(I.defaultValue=""+Y)}function uA(I,P,Y,ar){if(I=I.options,P){P={};for(var cn=0;cn<Y.length;cn++)P["$"+Y[cn]]=!0;for(Y=0;Y<I.length;Y++)cn=P.hasOwnProperty("$"+I[Y].value),I[Y].selected!==cn&&(I[Y].selected=cn),cn&&ar&&(I[Y].defaultSelected=!0)}else{for(Y=""+SS(Y),P=null,cn=0;cn<I.length;cn++){if(I[cn].value===Y){I[cn].selected=!0,ar&&(I[cn].defaultSelected=!0);return}P!==null||I[cn].disabled||(P=I[cn])}P!==null&&(P.selected=!0)}}function KI(I,P,Y){if(P!=null&&(P=""+SS(P),P!==I.value&&(I.value=P),Y==null)){I.defaultValue!==P&&(I.defaultValue=P);return}I.defaultValue=Y!=null?""+SS(Y):""}function QI(I,P,Y,ar){if(P==null){if(ar!=null){if(Y!=null)throw Error(s(92));if(ix(ar)){if(1<ar.length)throw Error(s(93));ar=ar[0]}Y=ar}Y==null&&(Y=""),P=Y}Y=SS(P),I.defaultValue=Y,ar=I.textContent,ar===Y&&ar!==""&&ar!==null&&(I.value=ar)}function cA(I,P){if(P){var Y=I.firstChild;if(Y&&Y===I.lastChild&&Y.nodeType===3){Y.nodeValue=P;return}}I.textContent=P}var AN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function JI(I,P,Y){var ar=P.indexOf("--")===0;Y==null||typeof Y=="boolean"||Y===""?ar?I.setProperty(P,""):P==="float"?I.cssFloat="":I[P]="":ar?I.setProperty(P,Y):typeof Y!="number"||Y===0||AN.has(P)?P==="float"?I.cssFloat=Y:I[P]=(""+Y).trim():I[P]=Y+"px"}function eD(I,P,Y){if(P!=null&&typeof P!="object")throw Error(s(62));if(I=I.style,Y!=null){for(var ar in Y)!Y.hasOwnProperty(ar)||P!=null&&P.hasOwnProperty(ar)||(ar.indexOf("--")===0?I.setProperty(ar,""):ar==="float"?I.cssFloat="":I[ar]="");for(var cn in P)ar=P[cn],P.hasOwnProperty(cn)&&Y[cn]!==ar&&JI(I,cn,ar)}else for(var ex in P)P.hasOwnProperty(ex)&&JI(I,ex,P[ex])}function YM(I){if(I.indexOf("-")===-1)return!1;switch(I){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),MN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qC(I){return MN.test(""+I)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":I}var WM=null;function XM(I){return I=I.target||I.srcElement||window,I.correspondingUseElement&&(I=I.correspondingUseElement),I.nodeType===3?I.parentNode:I}var fA=null,pA=null;function tD(I){var P=bS(I);if(P&&(I=P.stateNode)){var Y=I[yE]||null;e:switch(I=P.stateNode,P.type){case"input":if(jM(I,Y.value,Y.defaultValue,Y.defaultValue,Y.checked,Y.defaultChecked,Y.type,Y.name),P=Y.name,Y.type==="radio"&&P!=null){for(Y=I;Y.parentNode;)Y=Y.parentNode;for(Y=Y.querySelectorAll('input[name="'+GS(""+P)+'"][type="radio"]'),P=0;P<Y.length;P++){var ar=Y[P];if(ar!==I&&ar.form===I.form){var cn=ar[yE]||null;if(!cn)throw Error(s(90));jM(ar,cn.value,cn.defaultValue,cn.defaultValue,cn.checked,cn.defaultChecked,cn.type,cn.name)}}for(P=0;P<Y.length;P++)ar=Y[P],ar.form===I.form&&FC(ar)}break e;case"textarea":KI(I,Y.value,Y.defaultValue);break e;case"select":P=Y.value,P!=null&&uA(I,!!Y.multiple,P,!1)}}}var KM=!1;function rD(I,P,Y){if(KM)return I(P,Y);KM=!0;try{var ar=I(P);return ar}finally{if(KM=!1,(fA!==null||pA!==null)&&(TM(),fA&&(P=fA,I=pA,pA=fA=null,tD(P),I)))for(P=0;P<I.length;P++)tD(I[P])}}function HA(I,P){var Y=I.stateNode;if(Y===null)return null;var ar=Y[yE]||null;if(ar===null)return null;Y=ar[P];e:switch(P){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ar=!ar.disabled)||(I=I.type,ar=!(I==="button"||I==="input"||I==="select"||I==="textarea")),I=!ar;break e;default:I=!1}if(I)return null;if(Y&&typeof Y!="function")throw Error(s(231,P,typeof Y));return Y}var sT=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),QM=!1;if(sT)try{var jA={};Object.defineProperty(jA,"passive",{get:function(){QM=!0}}),window.addEventListener("test",jA,jA),window.removeEventListener("test",jA,jA)}catch{QM=!1}var ET=null,JM=null,UC=null;function nD(){if(UC)return UC;var I,P=JM,Y=P.length,ar,cn="value"in ET?ET.value:ET.textContent,ex=cn.length;for(I=0;I<Y&&P[I]===cn[I];I++);var cx=Y-I;for(ar=1;ar<=cx&&P[Y-ar]===cn[ex-ar];ar++);return UC=cn.slice(I,1<ar?1-ar:void 0)}function GC(I){var P=I.keyCode;return"charCode"in I?(I=I.charCode,I===0&&P===13&&(I=13)):I=P,I===10&&(I=13),32<=I||I===13?I:0}function zC(){return!0}function iD(){return!1}function CS(I){function P(Y,ar,cn,ex,cx){this._reactName=Y,this._targetInst=cn,this.type=ar,this.nativeEvent=ex,this.target=cx,this.currentTarget=null;for(var bx in I)I.hasOwnProperty(bx)&&(Y=I[bx],this[bx]=Y?Y(ex):ex[bx]);return this.isDefaultPrevented=(ex.defaultPrevented!=null?ex.defaultPrevented:ex.returnValue===!1)?zC:iD,this.isPropagationStopped=iD,this}return _(P.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Y=this.nativeEvent;Y&&(Y.preventDefault?Y.preventDefault():typeof Y.returnValue!="unknown"&&(Y.returnValue=!1),this.isDefaultPrevented=zC)},stopPropagation:function(){var Y=this.nativeEvent;Y&&(Y.stopPropagation?Y.stopPropagation():typeof Y.cancelBubble!="unknown"&&(Y.cancelBubble=!0),this.isPropagationStopped=zC)},persist:function(){},isPersistent:zC}),P}var HT={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(I){return I.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},VC=CS(HT),ZA=_({},HT,{view:0,detail:0}),RN=CS(ZA),eR,tR,YA,HC=_({},ZA,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nR,button:0,buttons:0,relatedTarget:function(I){return I.relatedTarget===void 0?I.fromElement===I.srcElement?I.toElement:I.fromElement:I.relatedTarget},movementX:function(I){return"movementX"in I?I.movementX:(I!==YA&&(YA&&I.type==="mousemove"?(eR=I.screenX-YA.screenX,tR=I.screenY-YA.screenY):tR=eR=0,YA=I),eR)},movementY:function(I){return"movementY"in I?I.movementY:tR}}),aD=CS(HC),IN=_({},HC,{dataTransfer:0}),DN=CS(IN),ON=_({},ZA,{relatedTarget:0}),rR=CS(ON),PN=_({},HT,{animationName:0,elapsedTime:0,pseudoElement:0}),NN=CS(PN),LN=_({},HT,{clipboardData:function(I){return"clipboardData"in I?I.clipboardData:window.clipboardData}}),$N=CS(LN),BN=_({},HT,{data:0}),oD=CS(BN),kN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UN(I){var P=this.nativeEvent;return P.getModifierState?P.getModifierState(I):(I=qN[I])?!!P[I]:!1}function nR(){return UN}var GN=_({},ZA,{key:function(I){if(I.key){var P=kN[I.key]||I.key;if(P!=="Unidentified")return P}return I.type==="keypress"?(I=GC(I),I===13?"Enter":String.fromCharCode(I)):I.type==="keydown"||I.type==="keyup"?FN[I.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nR,charCode:function(I){return I.type==="keypress"?GC(I):0},keyCode:function(I){return I.type==="keydown"||I.type==="keyup"?I.keyCode:0},which:function(I){return I.type==="keypress"?GC(I):I.type==="keydown"||I.type==="keyup"?I.keyCode:0}}),zN=CS(GN),VN=_({},HC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sD=CS(VN),HN=_({},ZA,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nR}),jN=CS(HN),ZN=_({},HT,{propertyName:0,elapsedTime:0,pseudoElement:0}),YN=CS(ZN),WN=_({},HC,{deltaX:function(I){return"deltaX"in I?I.deltaX:"wheelDeltaX"in I?-I.wheelDeltaX:0},deltaY:function(I){return"deltaY"in I?I.deltaY:"wheelDeltaY"in I?-I.wheelDeltaY:"wheelDelta"in I?-I.wheelDelta:0},deltaZ:0,deltaMode:0}),XN=CS(WN),KN=_({},HT,{newState:0,oldState:0}),QN=CS(KN),JN=[9,13,27,32],iR=sT&&"CompositionEvent"in window,WA=null;sT&&"documentMode"in document&&(WA=document.documentMode);var eL=sT&&"TextEvent"in window&&!WA,lD=sT&&(!iR||WA&&8<WA&&11>=WA),uD=" ",cD=!1;function fD(I,P){switch(I){case"keyup":return JN.indexOf(P.keyCode)!==-1;case"keydown":return P.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pD(I){return I=I.detail,typeof I=="object"&&"data"in I?I.data:null}var dA=!1;function tL(I,P){switch(I){case"compositionend":return pD(P);case"keypress":return P.which!==32?null:(cD=!0,uD);case"textInput":return I=P.data,I===uD&&cD?null:I;default:return null}}function rL(I,P){if(dA)return I==="compositionend"||!iR&&fD(I,P)?(I=nD(),UC=JM=ET=null,dA=!1,I):null;switch(I){case"paste":return null;case"keypress":if(!(P.ctrlKey||P.altKey||P.metaKey)||P.ctrlKey&&P.altKey){if(P.char&&1<P.char.length)return P.char;if(P.which)return String.fromCharCode(P.which)}return null;case"compositionend":return lD&&P.locale!=="ko"?null:P.data;default:return null}}var nL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dD(I){var P=I&&I.nodeName&&I.nodeName.toLowerCase();return P==="input"?!!nL[I.type]:P==="textarea"}function hD(I,P,Y,ar){fA?pA?pA.push(ar):pA=[ar]:fA=ar,P=DM(P,"onChange"),0<P.length&&(Y=new VC("onChange","change",null,Y,ar),I.push({event:Y,listeners:P}))}var XA=null,KA=null;function iL(I){WP(I,0)}function jC(I){var P=bE(I);if(FC(P))return I}function gD(I,P){if(I==="change")return P}var mD=!1;if(sT){var aR;if(sT){var oR="oninput"in document;if(!oR){var vD=document.createElement("div");vD.setAttribute("oninput","return;"),oR=typeof vD.oninput=="function"}aR=oR}else aR=!1;mD=aR&&(!document.documentMode||9<document.documentMode)}function yD(){XA&&(XA.detachEvent("onpropertychange",xD),KA=XA=null)}function xD(I){if(I.propertyName==="value"&&jC(KA)){var P=[];hD(P,KA,I,XM(I)),rD(iL,P)}}function aL(I,P,Y){I==="focusin"?(yD(),XA=P,KA=Y,XA.attachEvent("onpropertychange",xD)):I==="focusout"&&yD()}function oL(I){if(I==="selectionchange"||I==="keyup"||I==="keydown")return jC(KA)}function sL(I,P){if(I==="click")return jC(P)}function lL(I,P){if(I==="input"||I==="change")return jC(P)}function uL(I,P){return I===P&&(I!==0||1/I===1/P)||I!==I&&P!==P}var NS=typeof Object.is=="function"?Object.is:uL;function QA(I,P){if(NS(I,P))return!0;if(typeof I!="object"||I===null||typeof P!="object"||P===null)return!1;var Y=Object.keys(I),ar=Object.keys(P);if(Y.length!==ar.length)return!1;for(ar=0;ar<Y.length;ar++){var cn=Y[ar];if(!Tx.call(P,cn)||!NS(I[cn],P[cn]))return!1}return!0}function _D(I){for(;I&&I.firstChild;)I=I.firstChild;return I}function ED(I,P){var Y=_D(I);I=0;for(var ar;Y;){if(Y.nodeType===3){if(ar=I+Y.textContent.length,I<=P&&ar>=P)return{node:Y,offset:P-I};I=ar}e:{for(;Y;){if(Y.nextSibling){Y=Y.nextSibling;break e}Y=Y.parentNode}Y=void 0}Y=_D(Y)}}function bD(I,P){return I&&P?I===P?!0:I&&I.nodeType===3?!1:P&&P.nodeType===3?bD(I,P.parentNode):"contains"in I?I.contains(P):I.compareDocumentPosition?!!(I.compareDocumentPosition(P)&16):!1:!1}function SD(I){I=I!=null&&I.ownerDocument!=null&&I.ownerDocument.defaultView!=null?I.ownerDocument.defaultView:window;for(var P=lA(I.document);P instanceof I.HTMLIFrameElement;){try{var Y=typeof P.contentWindow.location.href=="string"}catch{Y=!1}if(Y)I=P.contentWindow;else break;P=lA(I.document)}return P}function sR(I){var P=I&&I.nodeName&&I.nodeName.toLowerCase();return P&&(P==="input"&&(I.type==="text"||I.type==="search"||I.type==="tel"||I.type==="url"||I.type==="password")||P==="textarea"||I.contentEditable==="true")}var cL=sT&&"documentMode"in document&&11>=document.documentMode,hA=null,lR=null,JA=null,uR=!1;function wD(I,P,Y){var ar=Y.window===Y?Y.document:Y.nodeType===9?Y:Y.ownerDocument;uR||hA==null||hA!==lA(ar)||(ar=hA,"selectionStart"in ar&&sR(ar)?ar={start:ar.selectionStart,end:ar.selectionEnd}:(ar=(ar.ownerDocument&&ar.ownerDocument.defaultView||window).getSelection(),ar={anchorNode:ar.anchorNode,anchorOffset:ar.anchorOffset,focusNode:ar.focusNode,focusOffset:ar.focusOffset}),JA&&QA(JA,ar)||(JA=ar,ar=DM(lR,"onSelect"),0<ar.length&&(P=new VC("onSelect","select",null,P,Y),I.push({event:P,listeners:ar}),P.target=hA)))}function jT(I,P){var Y={};return Y[I.toLowerCase()]=P.toLowerCase(),Y["Webkit"+I]="webkit"+P,Y["Moz"+I]="moz"+P,Y}var gA={animationend:jT("Animation","AnimationEnd"),animationiteration:jT("Animation","AnimationIteration"),animationstart:jT("Animation","AnimationStart"),transitionrun:jT("Transition","TransitionRun"),transitionstart:jT("Transition","TransitionStart"),transitioncancel:jT("Transition","TransitionCancel"),transitionend:jT("Transition","TransitionEnd")},cR={},TD={};sT&&(TD=document.createElement("div").style,"AnimationEvent"in window||(delete gA.animationend.animation,delete gA.animationiteration.animation,delete gA.animationstart.animation),"TransitionEvent"in window||delete gA.transitionend.transition);function ZT(I){if(cR[I])return cR[I];if(!gA[I])return I;var P=gA[I],Y;for(Y in P)if(P.hasOwnProperty(Y)&&Y in TD)return cR[I]=P[Y];return I}var AD=ZT("animationend"),CD=ZT("animationiteration"),MD=ZT("animationstart"),fL=ZT("transitionrun"),pL=ZT("transitionstart"),dL=ZT("transitioncancel"),RD=ZT("transitionend"),ID=new Map,fR="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fR.push("scrollEnd");function QS(I,P){ID.set(I,P),qE(P,[I])}var DD=new WeakMap;function zS(I,P){if(typeof I=="object"&&I!==null){var Y=DD.get(I);return Y!==void 0?Y:(P={value:I,source:P,stack:zT(P)},DD.set(I,P),P)}return{value:I,source:P,stack:zT(P)}}var VS=[],mA=0,pR=0;function ZC(){for(var I=mA,P=pR=mA=0;P<I;){var Y=VS[P];VS[P++]=null;var ar=VS[P];VS[P++]=null;var cn=VS[P];VS[P++]=null;var ex=VS[P];if(VS[P++]=null,ar!==null&&cn!==null){var cx=ar.pending;cx===null?cn.next=cn:(cn.next=cx.next,cx.next=cn),ar.pending=cn}ex!==0&&OD(Y,cn,ex)}}function YC(I,P,Y,ar){VS[mA++]=I,VS[mA++]=P,VS[mA++]=Y,VS[mA++]=ar,pR|=ar,I.lanes|=ar,I=I.alternate,I!==null&&(I.lanes|=ar)}function dR(I,P,Y,ar){return YC(I,P,Y,ar),WC(I)}function vA(I,P){return YC(I,null,null,P),WC(I)}function OD(I,P,Y){I.lanes|=Y;var ar=I.alternate;ar!==null&&(ar.lanes|=Y);for(var cn=!1,ex=I.return;ex!==null;)ex.childLanes|=Y,ar=ex.alternate,ar!==null&&(ar.childLanes|=Y),ex.tag===22&&(I=ex.stateNode,I===null||I._visibility&1||(cn=!0)),I=ex,ex=ex.return;return I.tag===3?(ex=I.stateNode,cn&&P!==null&&(cn=31-Nx(Y),I=ex.hiddenUpdates,ar=I[cn],ar===null?I[cn]=[P]:ar.push(P),P.lane=Y|536870912),ex):null}function WC(I){if(50<wC)throw wC=0,_I=null,Error(s(185));for(var P=I.return;P!==null;)I=P,P=I.return;return I.tag===3?I.stateNode:null}var yA={};function hL(I,P,Y,ar){this.tag=I,this.key=Y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=P,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ar,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function LS(I,P,Y,ar){return new hL(I,P,Y,ar)}function hR(I){return I=I.prototype,!(!I||!I.isReactComponent)}function lT(I,P){var Y=I.alternate;return Y===null?(Y=LS(I.tag,P,I.key,I.mode),Y.elementType=I.elementType,Y.type=I.type,Y.stateNode=I.stateNode,Y.alternate=I,I.alternate=Y):(Y.pendingProps=P,Y.type=I.type,Y.flags=0,Y.subtreeFlags=0,Y.deletions=null),Y.flags=I.flags&65011712,Y.childLanes=I.childLanes,Y.lanes=I.lanes,Y.child=I.child,Y.memoizedProps=I.memoizedProps,Y.memoizedState=I.memoizedState,Y.updateQueue=I.updateQueue,P=I.dependencies,Y.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext},Y.sibling=I.sibling,Y.index=I.index,Y.ref=I.ref,Y.refCleanup=I.refCleanup,Y}function PD(I,P){I.flags&=65011714;var Y=I.alternate;return Y===null?(I.childLanes=0,I.lanes=P,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=Y.childLanes,I.lanes=Y.lanes,I.child=Y.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=Y.memoizedProps,I.memoizedState=Y.memoizedState,I.updateQueue=Y.updateQueue,I.type=Y.type,P=Y.dependencies,I.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),I}function XC(I,P,Y,ar,cn,ex){var cx=0;if(ar=I,typeof I=="function")hR(I)&&(cx=1);else if(typeof I=="string")cx=m$(I,Y,px.current)?26:I==="html"||I==="head"||I==="body"?27:5;else e:switch(I){case Ct:return I=LS(31,Y,P,cn),I.elementType=Ct,I.lanes=ex,I;case R:return YT(Y.children,cn,ex,P);case D:cx=8,cn|=24;break;case O:return I=LS(12,Y,P,cn|2),I.elementType=O,I.lanes=ex,I;case W:return I=LS(13,Y,P,cn),I.elementType=W,I.lanes=ex,I;case J:return I=LS(19,Y,P,cn),I.elementType=J,I.lanes=ex,I;default:if(typeof I=="object"&&I!==null)switch(I.$$typeof){case F:case j:cx=10;break e;case z:cx=9;break e;case Z:cx=11;break e;case en:cx=14;break e;case tn:cx=16,ar=null;break e}cx=29,Y=Error(s(130,I===null?"null":typeof I,"")),ar=null}return P=LS(cx,Y,P,cn),P.elementType=I,P.type=ar,P.lanes=ex,P}function YT(I,P,Y,ar){return I=LS(7,I,ar,P),I.lanes=Y,I}function gR(I,P,Y){return I=LS(6,I,null,P),I.lanes=Y,I}function mR(I,P,Y){return P=LS(4,I.children!==null?I.children:[],I.key,P),P.lanes=Y,P.stateNode={containerInfo:I.containerInfo,pendingChildren:null,implementation:I.implementation},P}var xA=[],_A=0,KC=null,QC=0,HS=[],jS=0,WT=null,uT=1,cT="";function XT(I,P){xA[_A++]=QC,xA[_A++]=KC,KC=I,QC=P}function ND(I,P,Y){HS[jS++]=uT,HS[jS++]=cT,HS[jS++]=WT,WT=I;var ar=uT;I=cT;var cn=32-Nx(ar)-1;ar&=~(1<<cn),Y+=1;var ex=32-Nx(P)+cn;if(30<ex){var cx=cn-cn%5;ex=(ar&(1<<cx)-1).toString(32),ar>>=cx,cn-=cx,uT=1<<32-Nx(P)+cn|Y<<cn|ar,cT=ex+I}else uT=1<<ex|Y<<cn|ar,cT=I}function vR(I){I.return!==null&&(XT(I,1),ND(I,1,0))}function yR(I){for(;I===KC;)KC=xA[--_A],xA[_A]=null,QC=xA[--_A],xA[_A]=null;for(;I===WT;)WT=HS[--jS],HS[jS]=null,cT=HS[--jS],HS[jS]=null,uT=HS[--jS],HS[jS]=null}var wS=null,JE=null,FE=!1,KT=null,tT=!1,xR=Error(s(519));function QT(I){var P=Error(s(418,""));throw rC(zS(P,I)),xR}function LD(I){var P=I.stateNode,Y=I.type,ar=I.memoizedProps;switch(P[mE]=I,P[yE]=ar,Y){case"dialog":PE("cancel",P),PE("close",P);break;case"iframe":case"object":case"embed":PE("load",P);break;case"video":case"audio":for(Y=0;Y<AC.length;Y++)PE(AC[Y],P);break;case"source":PE("error",P);break;case"img":case"image":case"link":PE("error",P),PE("load",P);break;case"details":PE("toggle",P);break;case"input":PE("invalid",P),VA(P,ar.value,ar.defaultValue,ar.checked,ar.defaultChecked,ar.type,ar.name,!0),sA(P);break;case"select":PE("invalid",P);break;case"textarea":PE("invalid",P),QI(P,ar.value,ar.defaultValue,ar.children),sA(P)}Y=ar.children,typeof Y!="string"&&typeof Y!="number"&&typeof Y!="bigint"||P.textContent===""+Y||ar.suppressHydrationWarning===!0||JP(P.textContent,Y)?(ar.popover!=null&&(PE("beforetoggle",P),PE("toggle",P)),ar.onScroll!=null&&PE("scroll",P),ar.onScrollEnd!=null&&PE("scrollend",P),ar.onClick!=null&&(P.onclick=OM),P=!0):P=!1,P||QT(I)}function $D(I){for(wS=I.return;wS;)switch(wS.tag){case 5:case 13:tT=!1;return;case 27:case 3:tT=!0;return;default:wS=wS.return}}function eC(I){if(I!==wS)return!1;if(!FE)return $D(I),FE=!0,!1;var P=I.tag,Y;if((Y=P!==3&&P!==27)&&((Y=P===5)&&(Y=I.type,Y=!(Y!=="form"&&Y!=="button")||BI(I.type,I.memoizedProps)),Y=!Y),Y&&JE&&QT(I),$D(I),P===13){if(I=I.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(s(317));e:{for(I=I.nextSibling,P=0;I;){if(I.nodeType===8)if(Y=I.data,Y==="/$"){if(P===0){JE=eT(I.nextSibling);break e}P--}else Y!=="$"&&Y!=="$!"&&Y!=="$?"||P++;I=I.nextSibling}JE=null}}else P===27?(P=JE,BT(I.type)?(I=UI,UI=null,JE=I):JE=P):JE=wS?eT(I.stateNode.nextSibling):null;return!0}function tC(){JE=wS=null,FE=!1}function BD(){var I=KT;return I!==null&&(DS===null?DS=I:DS.push.apply(DS,I),KT=null),I}function rC(I){KT===null?KT=[I]:KT.push(I)}var _R=hx(null),JT=null,fT=null;function bT(I,P,Y){ux(_R,P._currentValue),P._currentValue=Y}function pT(I){I._currentValue=_R.current,_x(_R)}function ER(I,P,Y){for(;I!==null;){var ar=I.alternate;if((I.childLanes&P)!==P?(I.childLanes|=P,ar!==null&&(ar.childLanes|=P)):ar!==null&&(ar.childLanes&P)!==P&&(ar.childLanes|=P),I===Y)break;I=I.return}}function bR(I,P,Y,ar){var cn=I.child;for(cn!==null&&(cn.return=I);cn!==null;){var ex=cn.dependencies;if(ex!==null){var cx=cn.child;ex=ex.firstContext;e:for(;ex!==null;){var bx=ex;ex=cn;for(var Ox=0;Ox<P.length;Ox++)if(bx.context===P[Ox]){ex.lanes|=Y,bx=ex.alternate,bx!==null&&(bx.lanes|=Y),ER(ex.return,Y,I),ar||(cx=null);break e}ex=bx.next}}else if(cn.tag===18){if(cx=cn.return,cx===null)throw Error(s(341));cx.lanes|=Y,ex=cx.alternate,ex!==null&&(ex.lanes|=Y),ER(cx,Y,I),cx=null}else cx=cn.child;if(cx!==null)cx.return=cn;else for(cx=cn;cx!==null;){if(cx===I){cx=null;break}if(cn=cx.sibling,cn!==null){cn.return=cx.return,cx=cn;break}cx=cx.return}cn=cx}}function nC(I,P,Y,ar){I=null;for(var cn=P,ex=!1;cn!==null;){if(!ex){if((cn.flags&524288)!==0)ex=!0;else if((cn.flags&262144)!==0)break}if(cn.tag===10){var cx=cn.alternate;if(cx===null)throw Error(s(387));if(cx=cx.memoizedProps,cx!==null){var bx=cn.type;NS(cn.pendingProps.value,cx.value)||(I!==null?I.push(bx):I=[bx])}}else if(cn===gx.current){if(cx=cn.alternate,cx===null)throw Error(s(387));cx.memoizedState.memoizedState!==cn.memoizedState.memoizedState&&(I!==null?I.push(OC):I=[OC])}cn=cn.return}I!==null&&bR(P,I,Y,ar),P.flags|=262144}function JC(I){for(I=I.firstContext;I!==null;){if(!NS(I.context._currentValue,I.memoizedValue))return!0;I=I.next}return!1}function eA(I){JT=I,fT=null,I=I.dependencies,I!==null&&(I.firstContext=null)}function ES(I){return kD(JT,I)}function eM(I,P){return JT===null&&eA(I),kD(I,P)}function kD(I,P){var Y=P._currentValue;if(P={context:P,memoizedValue:Y,next:null},fT===null){if(I===null)throw Error(s(308));fT=P,I.dependencies={lanes:0,firstContext:P},I.flags|=524288}else fT=fT.next=P;return Y}var gL=typeof AbortController<"u"?AbortController:function(){var I=[],P=this.signal={aborted:!1,addEventListener:function(Y,ar){I.push(ar)}};this.abort=function(){P.aborted=!0,I.forEach(function(Y){return Y()})}},mL=t.unstable_scheduleCallback,vL=t.unstable_NormalPriority,lS={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function SR(){return{controller:new gL,data:new Map,refCount:0}}function iC(I){I.refCount--,I.refCount===0&&mL(vL,function(){I.controller.abort()})}var aC=null,wR=0,EA=0,bA=null;function yL(I,P){if(aC===null){var Y=aC=[];wR=0,EA=CI(),bA={status:"pending",value:void 0,then:function(ar){Y.push(ar)}}}return wR++,P.then(FD,FD),P}function FD(){if(--wR===0&&aC!==null){bA!==null&&(bA.status="fulfilled");var I=aC;aC=null,EA=0,bA=null;for(var P=0;P<I.length;P++)(0,I[P])()}}function xL(I,P){var Y=[],ar={status:"pending",value:null,reason:null,then:function(cn){Y.push(cn)}};return I.then(function(){ar.status="fulfilled",ar.value=P;for(var cn=0;cn<Y.length;cn++)(0,Y[cn])(P)},function(cn){for(ar.status="rejected",ar.reason=cn,cn=0;cn<Y.length;cn++)(0,Y[cn])(void 0)}),ar}var qD=Cn.S;Cn.S=function(I,P){typeof P=="object"&&P!==null&&typeof P.then=="function"&&yL(I,P),qD!==null&&qD(I,P)};var tA=hx(null);function TR(){var I=tA.current;return I!==null?I:ZE.pooledCache}function tM(I,P){P===null?ux(tA,tA.current):ux(tA,P.pool)}function UD(){var I=TR();return I===null?null:{parent:lS._currentValue,pool:I}}var oC=Error(s(460)),GD=Error(s(474)),rM=Error(s(542)),AR={then:function(){}};function zD(I){return I=I.status,I==="fulfilled"||I==="rejected"}function nM(){}function VD(I,P,Y){switch(Y=I[Y],Y===void 0?I.push(P):Y!==P&&(P.then(nM,nM),P=Y),P.status){case"fulfilled":return P.value;case"rejected":throw I=P.reason,jD(I),I;default:if(typeof P.status=="string")P.then(nM,nM);else{if(I=ZE,I!==null&&100<I.shellSuspendCounter)throw Error(s(482));I=P,I.status="pending",I.then(function(ar){if(P.status==="pending"){var cn=P;cn.status="fulfilled",cn.value=ar}},function(ar){if(P.status==="pending"){var cn=P;cn.status="rejected",cn.reason=ar}})}switch(P.status){case"fulfilled":return P.value;case"rejected":throw I=P.reason,jD(I),I}throw sC=P,oC}}var sC=null;function HD(){if(sC===null)throw Error(s(459));var I=sC;return sC=null,I}function jD(I){if(I===oC||I===rM)throw Error(s(483))}var ST=!1;function CR(I){I.updateQueue={baseState:I.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function MR(I,P){I=I.updateQueue,P.updateQueue===I&&(P.updateQueue={baseState:I.baseState,firstBaseUpdate:I.firstBaseUpdate,lastBaseUpdate:I.lastBaseUpdate,shared:I.shared,callbacks:null})}function wT(I){return{lane:I,tag:0,payload:null,callback:null,next:null}}function TT(I,P,Y){var ar=I.updateQueue;if(ar===null)return null;if(ar=ar.shared,(UE&2)!==0){var cn=ar.pending;return cn===null?P.next=P:(P.next=cn.next,cn.next=P),ar.pending=P,P=WC(I),OD(I,null,Y),P}return YC(I,ar,P,Y),WC(I)}function lC(I,P,Y){if(P=P.updateQueue,P!==null&&(P=P.shared,(Y&4194048)!==0)){var ar=P.lanes;ar&=I.pendingLanes,Y|=ar,P.lanes=Y,xx(I,Y)}}function RR(I,P){var Y=I.updateQueue,ar=I.alternate;if(ar!==null&&(ar=ar.updateQueue,Y===ar)){var cn=null,ex=null;if(Y=Y.firstBaseUpdate,Y!==null){do{var cx={lane:Y.lane,tag:Y.tag,payload:Y.payload,callback:null,next:null};ex===null?cn=ex=cx:ex=ex.next=cx,Y=Y.next}while(Y!==null);ex===null?cn=ex=P:ex=ex.next=P}else cn=ex=P;Y={baseState:ar.baseState,firstBaseUpdate:cn,lastBaseUpdate:ex,shared:ar.shared,callbacks:ar.callbacks},I.updateQueue=Y;return}I=Y.lastBaseUpdate,I===null?Y.firstBaseUpdate=P:I.next=P,Y.lastBaseUpdate=P}var IR=!1;function uC(){if(IR){var I=bA;if(I!==null)throw I}}function cC(I,P,Y,ar){IR=!1;var cn=I.updateQueue;ST=!1;var ex=cn.firstBaseUpdate,cx=cn.lastBaseUpdate,bx=cn.shared.pending;if(bx!==null){cn.shared.pending=null;var Ox=bx,Hx=Ox.next;Ox.next=null,cx===null?ex=Hx:cx.next=Hx,cx=Ox;var eE=I.alternate;eE!==null&&(eE=eE.updateQueue,bx=eE.lastBaseUpdate,bx!==cx&&(bx===null?eE.firstBaseUpdate=Hx:bx.next=Hx,eE.lastBaseUpdate=Ox))}if(ex!==null){var aE=cn.baseState;cx=0,eE=Hx=Ox=null,bx=ex;do{var Zx=bx.lane&-536870913,Yx=Zx!==bx.lane;if(Yx?(LE&Zx)===Zx:(ar&Zx)===Zx){Zx!==0&&Zx===EA&&(IR=!0),eE!==null&&(eE=eE.next={lane:0,tag:bx.tag,payload:bx.payload,callback:null,next:null});e:{var AE=I,wE=bx;Zx=P;var HE=Y;switch(wE.tag){case 1:if(AE=wE.payload,typeof AE=="function"){aE=AE.call(HE,aE,Zx);break e}aE=AE;break e;case 3:AE.flags=AE.flags&-65537|128;case 0:if(AE=wE.payload,Zx=typeof AE=="function"?AE.call(HE,aE,Zx):AE,Zx==null)break e;aE=_({},aE,Zx);break e;case 2:ST=!0}}Zx=bx.callback,Zx!==null&&(I.flags|=64,Yx&&(I.flags|=8192),Yx=cn.callbacks,Yx===null?cn.callbacks=[Zx]:Yx.push(Zx))}else Yx={lane:Zx,tag:bx.tag,payload:bx.payload,callback:bx.callback,next:null},eE===null?(Hx=eE=Yx,Ox=aE):eE=eE.next=Yx,cx|=Zx;if(bx=bx.next,bx===null){if(bx=cn.shared.pending,bx===null)break;Yx=bx,bx=Yx.next,Yx.next=null,cn.lastBaseUpdate=Yx,cn.shared.pending=null}}while(!0);eE===null&&(Ox=aE),cn.baseState=Ox,cn.firstBaseUpdate=Hx,cn.lastBaseUpdate=eE,ex===null&&(cn.shared.lanes=0),PT|=cx,I.lanes=cx,I.memoizedState=aE}}function ZD(I,P){if(typeof I!="function")throw Error(s(191,I));I.call(P)}function YD(I,P){var Y=I.callbacks;if(Y!==null)for(I.callbacks=null,I=0;I<Y.length;I++)ZD(Y[I],P)}var SA=hx(null),iM=hx(0);function WD(I,P){I=xT,ux(iM,I),ux(SA,P),xT=I|P.baseLanes}function DR(){ux(iM,xT),ux(SA,SA.current)}function PR(){xT=iM.current,_x(SA),_x(iM)}var AT=0,IE=null,zE=null,aS=null,aM=!1,wA=!1,rA=!1,oM=0,fC=0,TA=null,_L=0;function rS(){throw Error(s(321))}function NR(I,P){if(P===null)return!1;for(var Y=0;Y<P.length&&Y<I.length;Y++)if(!NS(I[Y],P[Y]))return!1;return!0}function LR(I,P,Y,ar,cn,ex){return AT=ex,IE=P,P.memoizedState=null,P.updateQueue=null,P.lanes=0,Cn.H=I===null||I.memoizedState===null?PO:NO,rA=!1,ex=Y(ar,cn),rA=!1,wA&&(ex=KD(P,Y,ar,cn)),XD(I),ex}function XD(I){Cn.H=pM;var P=zE!==null&&zE.next!==null;if(AT=0,aS=zE=IE=null,aM=!1,fC=0,TA=null,P)throw Error(s(300));I===null||cS||(I=I.dependencies,I!==null&&JC(I)&&(cS=!0))}function KD(I,P,Y,ar){IE=I;var cn=0;do{if(wA&&(TA=null),fC=0,wA=!1,25<=cn)throw Error(s(301));if(cn+=1,aS=zE=null,I.updateQueue!=null){var ex=I.updateQueue;ex.lastEffect=null,ex.events=null,ex.stores=null,ex.memoCache!=null&&(ex.memoCache.index=0)}Cn.H=CL,ex=P(Y,ar)}while(wA);return ex}function EL(){var I=Cn.H,P=I.useState()[0];return P=typeof P.then=="function"?pC(P):P,I=I.useState()[0],(zE!==null?zE.memoizedState:null)!==I&&(IE.flags|=1024),P}function $R(){var I=oM!==0;return oM=0,I}function BR(I,P,Y){P.updateQueue=I.updateQueue,P.flags&=-2053,I.lanes&=~Y}function kR(I){if(aM){for(I=I.memoizedState;I!==null;){var P=I.queue;P!==null&&(P.pending=null),I=I.next}aM=!1}AT=0,aS=zE=IE=null,wA=!1,fC=oM=0,TA=null}function RS(){var I={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return aS===null?IE.memoizedState=aS=I:aS=aS.next=I,aS}function oS(){if(zE===null){var I=IE.alternate;I=I!==null?I.memoizedState:null}else I=zE.next;var P=aS===null?IE.memoizedState:aS.next;if(P!==null)aS=P,zE=I;else{if(I===null)throw IE.alternate===null?Error(s(467)):Error(s(310));zE=I,I={memoizedState:zE.memoizedState,baseState:zE.baseState,baseQueue:zE.baseQueue,queue:zE.queue,next:null},aS===null?IE.memoizedState=aS=I:aS=aS.next=I}return aS}function FR(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pC(I){var P=fC;return fC+=1,TA===null&&(TA=[]),I=VD(TA,I,P),P=IE,(aS===null?P.memoizedState:aS.next)===null&&(P=P.alternate,Cn.H=P===null||P.memoizedState===null?PO:NO),I}function sM(I){if(I!==null&&typeof I=="object"){if(typeof I.then=="function")return pC(I);if(I.$$typeof===j)return ES(I)}throw Error(s(438,String(I)))}function qR(I){var P=null,Y=IE.updateQueue;if(Y!==null&&(P=Y.memoCache),P==null){var ar=IE.alternate;ar!==null&&(ar=ar.updateQueue,ar!==null&&(ar=ar.memoCache,ar!=null&&(P={data:ar.data.map(function(cn){return cn.slice()}),index:0})))}if(P==null&&(P={data:[],index:0}),Y===null&&(Y=FR(),IE.updateQueue=Y),Y.memoCache=P,Y=P.data[P.index],Y===void 0)for(Y=P.data[P.index]=Array(I),ar=0;ar<I;ar++)Y[ar]=Q;return P.index++,Y}function dT(I,P){return typeof P=="function"?P(I):P}function lM(I){var P=oS();return UR(P,zE,I)}function UR(I,P,Y){var ar=I.queue;if(ar===null)throw Error(s(311));ar.lastRenderedReducer=Y;var cn=I.baseQueue,ex=ar.pending;if(ex!==null){if(cn!==null){var cx=cn.next;cn.next=ex.next,ex.next=cx}P.baseQueue=cn=ex,ar.pending=null}if(ex=I.baseState,cn===null)I.memoizedState=ex;else{P=cn.next;var bx=cx=null,Ox=null,Hx=P,eE=!1;do{var aE=Hx.lane&-536870913;if(aE!==Hx.lane?(LE&aE)===aE:(AT&aE)===aE){var Zx=Hx.revertLane;if(Zx===0)Ox!==null&&(Ox=Ox.next={lane:0,revertLane:0,action:Hx.action,hasEagerState:Hx.hasEagerState,eagerState:Hx.eagerState,next:null}),aE===EA&&(eE=!0);else if((AT&Zx)===Zx){Hx=Hx.next,Zx===EA&&(eE=!0);continue}else aE={lane:0,revertLane:Hx.revertLane,action:Hx.action,hasEagerState:Hx.hasEagerState,eagerState:Hx.eagerState,next:null},Ox===null?(bx=Ox=aE,cx=ex):Ox=Ox.next=aE,IE.lanes|=Zx,PT|=Zx;aE=Hx.action,rA&&Y(ex,aE),ex=Hx.hasEagerState?Hx.eagerState:Y(ex,aE)}else Zx={lane:aE,revertLane:Hx.revertLane,action:Hx.action,hasEagerState:Hx.hasEagerState,eagerState:Hx.eagerState,next:null},Ox===null?(bx=Ox=Zx,cx=ex):Ox=Ox.next=Zx,IE.lanes|=aE,PT|=aE;Hx=Hx.next}while(Hx!==null&&Hx!==P);if(Ox===null?cx=ex:Ox.next=bx,!NS(ex,I.memoizedState)&&(cS=!0,eE&&(Y=bA,Y!==null)))throw Y;I.memoizedState=ex,I.baseState=cx,I.baseQueue=Ox,ar.lastRenderedState=ex}return cn===null&&(ar.lanes=0),[I.memoizedState,ar.dispatch]}function GR(I){var P=oS(),Y=P.queue;if(Y===null)throw Error(s(311));Y.lastRenderedReducer=I;var ar=Y.dispatch,cn=Y.pending,ex=P.memoizedState;if(cn!==null){Y.pending=null;var cx=cn=cn.next;do ex=I(ex,cx.action),cx=cx.next;while(cx!==cn);NS(ex,P.memoizedState)||(cS=!0),P.memoizedState=ex,P.baseQueue===null&&(P.baseState=ex),Y.lastRenderedState=ex}return[ex,ar]}function QD(I,P,Y){var ar=IE,cn=oS(),ex=FE;if(ex){if(Y===void 0)throw Error(s(407));Y=Y()}else Y=P();var cx=!NS((zE||cn).memoizedState,Y);cx&&(cn.memoizedState=Y,cS=!0),cn=cn.queue;var bx=tO.bind(null,ar,cn,I);if(dC(2048,8,bx,[I]),cn.getSnapshot!==P||cx||aS!==null&&aS.memoizedState.tag&1){if(ar.flags|=2048,AA(9,uM(),eO.bind(null,ar,cn,Y,P),null),ZE===null)throw Error(s(349));ex||(AT&124)!==0||JD(ar,P,Y)}return Y}function JD(I,P,Y){I.flags|=16384,I={getSnapshot:P,value:Y},P=IE.updateQueue,P===null?(P=FR(),IE.updateQueue=P,P.stores=[I]):(Y=P.stores,Y===null?P.stores=[I]:Y.push(I))}function eO(I,P,Y,ar){P.value=Y,P.getSnapshot=ar,rO(P)&&nO(I)}function tO(I,P,Y){return Y(function(){rO(P)&&nO(I)})}function rO(I){var P=I.getSnapshot;I=I.value;try{var Y=P();return!NS(I,Y)}catch{return!0}}function nO(I){var P=vA(I,2);P!==null&&qS(P,I,2)}function zR(I){var P=RS();if(typeof I=="function"){var Y=I;if(I=Y(),rA){Ix(!0);try{Y()}finally{Ix(!1)}}}return P.memoizedState=P.baseState=I,P.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dT,lastRenderedState:I},P}function iO(I,P,Y,ar){return I.baseState=Y,UR(I,zE,typeof ar=="function"?ar:dT)}function bL(I,P,Y,ar,cn){if(fM(I))throw Error(s(485));if(I=P.action,I!==null){var ex={payload:cn,action:I,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(cx){ex.listeners.push(cx)}};Cn.T!==null?Y(!0):ex.isTransition=!1,ar(ex),Y=P.pending,Y===null?(ex.next=P.pending=ex,aO(P,ex)):(ex.next=Y.next,P.pending=Y.next=ex)}}function aO(I,P){var Y=P.action,ar=P.payload,cn=I.state;if(P.isTransition){var ex=Cn.T,cx={};Cn.T=cx;try{var bx=Y(cn,ar),Ox=Cn.S;Ox!==null&&Ox(cx,bx),oO(I,P,bx)}catch(Hx){VR(I,P,Hx)}finally{Cn.T=ex}}else try{ex=Y(cn,ar),oO(I,P,ex)}catch(Hx){VR(I,P,Hx)}}function oO(I,P,Y){Y!==null&&typeof Y=="object"&&typeof Y.then=="function"?Y.then(function(ar){sO(I,P,ar)},function(ar){return VR(I,P,ar)}):sO(I,P,Y)}function sO(I,P,Y){P.status="fulfilled",P.value=Y,lO(P),I.state=Y,P=I.pending,P!==null&&(Y=P.next,Y===P?I.pending=null:(Y=Y.next,P.next=Y,aO(I,Y)))}function VR(I,P,Y){var ar=I.pending;if(I.pending=null,ar!==null){ar=ar.next;do P.status="rejected",P.reason=Y,lO(P),P=P.next;while(P!==ar)}I.action=null}function lO(I){I=I.listeners;for(var P=0;P<I.length;P++)(0,I[P])()}function uO(I,P){return P}function cO(I,P){if(FE){var Y=ZE.formState;if(Y!==null){e:{var ar=IE;if(FE){if(JE){t:{for(var cn=JE,ex=tT;cn.nodeType!==8;){if(!ex){cn=null;break t}if(cn=eT(cn.nextSibling),cn===null){cn=null;break t}}ex=cn.data,cn=ex==="F!"||ex==="F"?cn:null}if(cn){JE=eT(cn.nextSibling),ar=cn.data==="F!";break e}}QT(ar)}ar=!1}ar&&(P=Y[0])}}return Y=RS(),Y.memoizedState=Y.baseState=P,ar={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uO,lastRenderedState:P},Y.queue=ar,Y=RO.bind(null,IE,ar),ar.dispatch=Y,ar=zR(!1),ex=WR.bind(null,IE,!1,ar.queue),ar=RS(),cn={state:P,dispatch:null,action:I,pending:null},ar.queue=cn,Y=bL.bind(null,IE,cn,ex,Y),cn.dispatch=Y,ar.memoizedState=I,[P,Y,!1]}function fO(I){var P=oS();return pO(P,zE,I)}function pO(I,P,Y){if(P=UR(I,P,uO)[0],I=lM(dT)[0],typeof P=="object"&&P!==null&&typeof P.then=="function")try{var ar=pC(P)}catch(cx){throw cx===oC?rM:cx}else ar=P;P=oS();var cn=P.queue,ex=cn.dispatch;return Y!==P.memoizedState&&(IE.flags|=2048,AA(9,uM(),SL.bind(null,cn,Y),null)),[ar,ex,I]}function SL(I,P){I.action=P}function dO(I){var P=oS(),Y=zE;if(Y!==null)return pO(P,Y,I);oS(),P=P.memoizedState,Y=oS();var ar=Y.queue.dispatch;return Y.memoizedState=I,[P,ar,!1]}function AA(I,P,Y,ar){return I={tag:I,create:Y,deps:ar,inst:P,next:null},P=IE.updateQueue,P===null&&(P=FR(),IE.updateQueue=P),Y=P.lastEffect,Y===null?P.lastEffect=I.next=I:(ar=Y.next,Y.next=I,I.next=ar,P.lastEffect=I),I}function uM(){return{destroy:void 0,resource:void 0}}function hO(){return oS().memoizedState}function cM(I,P,Y,ar){var cn=RS();ar=ar===void 0?null:ar,IE.flags|=I,cn.memoizedState=AA(1|P,uM(),Y,ar)}function dC(I,P,Y,ar){var cn=oS();ar=ar===void 0?null:ar;var ex=cn.memoizedState.inst;zE!==null&&ar!==null&&NR(ar,zE.memoizedState.deps)?cn.memoizedState=AA(P,ex,Y,ar):(IE.flags|=I,cn.memoizedState=AA(1|P,ex,Y,ar))}function gO(I,P){cM(8390656,8,I,P)}function mO(I,P){dC(2048,8,I,P)}function vO(I,P){return dC(4,2,I,P)}function yO(I,P){return dC(4,4,I,P)}function xO(I,P){if(typeof P=="function"){I=I();var Y=P(I);return function(){typeof Y=="function"?Y():P(null)}}if(P!=null)return I=I(),P.current=I,function(){P.current=null}}function _O(I,P,Y){Y=Y!=null?Y.concat([I]):null,dC(4,4,xO.bind(null,P,I),Y)}function HR(){}function EO(I,P){var Y=oS();P=P===void 0?null:P;var ar=Y.memoizedState;return P!==null&&NR(P,ar[1])?ar[0]:(Y.memoizedState=[I,P],I)}function bO(I,P){var Y=oS();P=P===void 0?null:P;var ar=Y.memoizedState;if(P!==null&&NR(P,ar[1]))return ar[0];if(ar=I(),rA){Ix(!0);try{I()}finally{Ix(!1)}}return Y.memoizedState=[ar,P],ar}function jR(I,P,Y){return Y===void 0||(AT&1073741824)!==0?I.memoizedState=P:(I.memoizedState=Y,I=AP(),IE.lanes|=I,PT|=I,Y)}function SO(I,P,Y,ar){return NS(Y,P)?Y:SA.current!==null?(I=jR(I,Y,ar),NS(I,P)||(cS=!0),I):(AT&42)===0?(cS=!0,I.memoizedState=Y):(I=AP(),IE.lanes|=I,PT|=I,P)}function wO(I,P,Y,ar,cn){var ex=ax.p;ax.p=ex!==0&&8>ex?ex:8;var cx=Cn.T,bx={};Cn.T=bx,WR(I,!1,P,Y);try{var Ox=cn(),Hx=Cn.S;if(Hx!==null&&Hx(bx,Ox),Ox!==null&&typeof Ox=="object"&&typeof Ox.then=="function"){var eE=xL(Ox,ar);hC(I,P,eE,FS(I))}else hC(I,P,ar,FS(I))}catch(aE){hC(I,P,{then:function(){},status:"rejected",reason:aE},FS())}finally{ax.p=ex,Cn.T=cx}}function wL(){}function ZR(I,P,Y,ar){if(I.tag!==5)throw Error(s(476));var cn=TO(I).queue;wO(I,cn,P,sx,Y===null?wL:function(){return AO(I),Y(ar)})}function TO(I){var P=I.memoizedState;if(P!==null)return P;P={memoizedState:sx,baseState:sx,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dT,lastRenderedState:sx},next:null};var Y={};return P.next={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dT,lastRenderedState:Y},next:null},I.memoizedState=P,I=I.alternate,I!==null&&(I.memoizedState=P),P}function AO(I){var P=TO(I).next.queue;hC(I,P,{},FS())}function YR(){return ES(OC)}function CO(){return oS().memoizedState}function MO(){return oS().memoizedState}function TL(I){for(var P=I.return;P!==null;){switch(P.tag){case 24:case 3:var Y=FS();I=wT(Y);var ar=TT(P,I,Y);ar!==null&&(qS(ar,P,Y),lC(ar,P,Y)),P={cache:SR()},I.payload=P;return}P=P.return}}function AL(I,P,Y){var ar=FS();Y={lane:ar,revertLane:0,action:Y,hasEagerState:!1,eagerState:null,next:null},fM(I)?IO(P,Y):(Y=dR(I,P,Y,ar),Y!==null&&(qS(Y,I,ar),OO(Y,P,ar)))}function RO(I,P,Y){var ar=FS();hC(I,P,Y,ar)}function hC(I,P,Y,ar){var cn={lane:ar,revertLane:0,action:Y,hasEagerState:!1,eagerState:null,next:null};if(fM(I))IO(P,cn);else{var ex=I.alternate;if(I.lanes===0&&(ex===null||ex.lanes===0)&&(ex=P.lastRenderedReducer,ex!==null))try{var cx=P.lastRenderedState,bx=ex(cx,Y);if(cn.hasEagerState=!0,cn.eagerState=bx,NS(bx,cx))return YC(I,P,cn,0),ZE===null&&ZC(),!1}catch{}finally{}if(Y=dR(I,P,cn,ar),Y!==null)return qS(Y,I,ar),OO(Y,P,ar),!0}return!1}function WR(I,P,Y,ar){if(ar={lane:2,revertLane:CI(),action:ar,hasEagerState:!1,eagerState:null,next:null},fM(I)){if(P)throw Error(s(479))}else P=dR(I,Y,ar,2),P!==null&&qS(P,I,2)}function fM(I){var P=I.alternate;return I===IE||P!==null&&P===IE}function IO(I,P){wA=aM=!0;var Y=I.pending;Y===null?P.next=P:(P.next=Y.next,Y.next=P),I.pending=P}function OO(I,P,Y){if((Y&4194048)!==0){var ar=P.lanes;ar&=I.pendingLanes,Y|=ar,P.lanes=Y,xx(I,Y)}}var pM={readContext:ES,use:sM,useCallback:rS,useContext:rS,useEffect:rS,useImperativeHandle:rS,useLayoutEffect:rS,useInsertionEffect:rS,useMemo:rS,useReducer:rS,useRef:rS,useState:rS,useDebugValue:rS,useDeferredValue:rS,useTransition:rS,useSyncExternalStore:rS,useId:rS,useHostTransitionStatus:rS,useFormState:rS,useActionState:rS,useOptimistic:rS,useMemoCache:rS,useCacheRefresh:rS},PO={readContext:ES,use:sM,useCallback:function(I,P){return RS().memoizedState=[I,P===void 0?null:P],I},useContext:ES,useEffect:gO,useImperativeHandle:function(I,P,Y){Y=Y!=null?Y.concat([I]):null,cM(4194308,4,xO.bind(null,P,I),Y)},useLayoutEffect:function(I,P){return cM(4194308,4,I,P)},useInsertionEffect:function(I,P){cM(4,2,I,P)},useMemo:function(I,P){var Y=RS();P=P===void 0?null:P;var ar=I();if(rA){Ix(!0);try{I()}finally{Ix(!1)}}return Y.memoizedState=[ar,P],ar},useReducer:function(I,P,Y){var ar=RS();if(Y!==void 0){var cn=Y(P);if(rA){Ix(!0);try{Y(P)}finally{Ix(!1)}}}else cn=P;return ar.memoizedState=ar.baseState=cn,I={pending:null,lanes:0,dispatch:null,lastRenderedReducer:I,lastRenderedState:cn},ar.queue=I,I=I.dispatch=AL.bind(null,IE,I),[ar.memoizedState,I]},useRef:function(I){var P=RS();return I={current:I},P.memoizedState=I},useState:function(I){I=zR(I);var P=I.queue,Y=RO.bind(null,IE,P);return P.dispatch=Y,[I.memoizedState,Y]},useDebugValue:HR,useDeferredValue:function(I,P){var Y=RS();return jR(Y,I,P)},useTransition:function(){var I=zR(!1);return I=wO.bind(null,IE,I.queue,!0,!1),RS().memoizedState=I,[!1,I]},useSyncExternalStore:function(I,P,Y){var ar=IE,cn=RS();if(FE){if(Y===void 0)throw Error(s(407));Y=Y()}else{if(Y=P(),ZE===null)throw Error(s(349));(LE&124)!==0||JD(ar,P,Y)}cn.memoizedState=Y;var ex={value:Y,getSnapshot:P};return cn.queue=ex,gO(tO.bind(null,ar,ex,I),[I]),ar.flags|=2048,AA(9,uM(),eO.bind(null,ar,ex,Y,P),null),Y},useId:function(){var I=RS(),P=ZE.identifierPrefix;if(FE){var Y=cT,ar=uT;Y=(ar&~(1<<32-Nx(ar)-1)).toString(32)+Y,P=""+P+"R"+Y,Y=oM++,0<Y&&(P+="H"+Y.toString(32)),P+=""}else Y=_L++,P=""+P+"r"+Y.toString(32)+"";return I.memoizedState=P},useHostTransitionStatus:YR,useFormState:cO,useActionState:cO,useOptimistic:function(I){var P=RS();P.memoizedState=P.baseState=I;var Y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return P.queue=Y,P=WR.bind(null,IE,!0,Y),Y.dispatch=P,[I,P]},useMemoCache:qR,useCacheRefresh:function(){return RS().memoizedState=TL.bind(null,IE)}},NO={readContext:ES,use:sM,useCallback:EO,useContext:ES,useEffect:mO,useImperativeHandle:_O,useInsertionEffect:vO,useLayoutEffect:yO,useMemo:bO,useReducer:lM,useRef:hO,useState:function(){return lM(dT)},useDebugValue:HR,useDeferredValue:function(I,P){var Y=oS();return SO(Y,zE.memoizedState,I,P)},useTransition:function(){var I=lM(dT)[0],P=oS().memoizedState;return[typeof I=="boolean"?I:pC(I),P]},useSyncExternalStore:QD,useId:CO,useHostTransitionStatus:YR,useFormState:fO,useActionState:fO,useOptimistic:function(I,P){var Y=oS();return iO(Y,zE,I,P)},useMemoCache:qR,useCacheRefresh:MO},CL={readContext:ES,use:sM,useCallback:EO,useContext:ES,useEffect:mO,useImperativeHandle:_O,useInsertionEffect:vO,useLayoutEffect:yO,useMemo:bO,useReducer:GR,useRef:hO,useState:function(){return GR(dT)},useDebugValue:HR,useDeferredValue:function(I,P){var Y=oS();return zE===null?jR(Y,I,P):SO(Y,zE.memoizedState,I,P)},useTransition:function(){var I=GR(dT)[0],P=oS().memoizedState;return[typeof I=="boolean"?I:pC(I),P]},useSyncExternalStore:QD,useId:CO,useHostTransitionStatus:YR,useFormState:dO,useActionState:dO,useOptimistic:function(I,P){var Y=oS();return zE!==null?iO(Y,zE,I,P):(Y.baseState=I,[I,Y.queue.dispatch])},useMemoCache:qR,useCacheRefresh:MO},CA=null,gC=0;function dM(I){var P=gC;return gC+=1,CA===null&&(CA=[]),VD(CA,I,P)}function mC(I,P){P=P.props.ref,I.ref=P!==void 0?P:null}function hM(I,P){throw P.$$typeof===S?Error(s(525)):(I=Object.prototype.toString.call(P),Error(s(31,I==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":I)))}function LO(I){var P=I._init;return P(I._payload)}function $O(I){function P(Ux,Bx){if(I){var Vx=Ux.deletions;Vx===null?(Ux.deletions=[Bx],Ux.flags|=16):Vx.push(Bx)}}function Y(Ux,Bx){if(!I)return null;for(;Bx!==null;)P(Ux,Bx),Bx=Bx.sibling;return null}function ar(Ux){for(var Bx=new Map;Ux!==null;)Ux.key!==null?Bx.set(Ux.key,Ux):Bx.set(Ux.index,Ux),Ux=Ux.sibling;return Bx}function cn(Ux,Bx){return Ux=lT(Ux,Bx),Ux.index=0,Ux.sibling=null,Ux}function ex(Ux,Bx,Vx){return Ux.index=Vx,I?(Vx=Ux.alternate,Vx!==null?(Vx=Vx.index,Vx<Bx?(Ux.flags|=67108866,Bx):Vx):(Ux.flags|=67108866,Bx)):(Ux.flags|=1048576,Bx)}function cx(Ux){return I&&Ux.alternate===null&&(Ux.flags|=67108866),Ux}function bx(Ux,Bx,Vx,rE){return Bx===null||Bx.tag!==6?(Bx=gR(Vx,Ux.mode,rE),Bx.return=Ux,Bx):(Bx=cn(Bx,Vx),Bx.return=Ux,Bx)}function Ox(Ux,Bx,Vx,rE){var xE=Vx.type;return xE===R?eE(Ux,Bx,Vx.props.children,rE,Vx.key):Bx!==null&&(Bx.elementType===xE||typeof xE=="object"&&xE!==null&&xE.$$typeof===tn&&LO(xE)===Bx.type)?(Bx=cn(Bx,Vx.props),mC(Bx,Vx),Bx.return=Ux,Bx):(Bx=XC(Vx.type,Vx.key,Vx.props,null,Ux.mode,rE),mC(Bx,Vx),Bx.return=Ux,Bx)}function Hx(Ux,Bx,Vx,rE){return Bx===null||Bx.tag!==4||Bx.stateNode.containerInfo!==Vx.containerInfo||Bx.stateNode.implementation!==Vx.implementation?(Bx=mR(Vx,Ux.mode,rE),Bx.return=Ux,Bx):(Bx=cn(Bx,Vx.children||[]),Bx.return=Ux,Bx)}function eE(Ux,Bx,Vx,rE,xE){return Bx===null||Bx.tag!==7?(Bx=YT(Vx,Ux.mode,rE,xE),Bx.return=Ux,Bx):(Bx=cn(Bx,Vx),Bx.return=Ux,Bx)}function aE(Ux,Bx,Vx){if(typeof Bx=="string"&&Bx!==""||typeof Bx=="number"||typeof Bx=="bigint")return Bx=gR(""+Bx,Ux.mode,Vx),Bx.return=Ux,Bx;if(typeof Bx=="object"&&Bx!==null){switch(Bx.$$typeof){case T:return Vx=XC(Bx.type,Bx.key,Bx.props,null,Ux.mode,Vx),mC(Vx,Bx),Vx.return=Ux,Vx;case A:return Bx=mR(Bx,Ux.mode,Vx),Bx.return=Ux,Bx;case tn:var rE=Bx._init;return Bx=rE(Bx._payload),aE(Ux,Bx,Vx)}if(ix(Bx)||gn(Bx))return Bx=YT(Bx,Ux.mode,Vx,null),Bx.return=Ux,Bx;if(typeof Bx.then=="function")return aE(Ux,dM(Bx),Vx);if(Bx.$$typeof===j)return aE(Ux,eM(Ux,Bx),Vx);hM(Ux,Bx)}return null}function Zx(Ux,Bx,Vx,rE){var xE=Bx!==null?Bx.key:null;if(typeof Vx=="string"&&Vx!==""||typeof Vx=="number"||typeof Vx=="bigint")return xE!==null?null:bx(Ux,Bx,""+Vx,rE);if(typeof Vx=="object"&&Vx!==null){switch(Vx.$$typeof){case T:return Vx.key===xE?Ox(Ux,Bx,Vx,rE):null;case A:return Vx.key===xE?Hx(Ux,Bx,Vx,rE):null;case tn:return xE=Vx._init,Vx=xE(Vx._payload),Zx(Ux,Bx,Vx,rE)}if(ix(Vx)||gn(Vx))return xE!==null?null:eE(Ux,Bx,Vx,rE,null);if(typeof Vx.then=="function")return Zx(Ux,Bx,dM(Vx),rE);if(Vx.$$typeof===j)return Zx(Ux,Bx,eM(Ux,Vx),rE);hM(Ux,Vx)}return null}function Yx(Ux,Bx,Vx,rE,xE){if(typeof rE=="string"&&rE!==""||typeof rE=="number"||typeof rE=="bigint")return Ux=Ux.get(Vx)||null,bx(Bx,Ux,""+rE,xE);if(typeof rE=="object"&&rE!==null){switch(rE.$$typeof){case T:return Ux=Ux.get(rE.key===null?Vx:rE.key)||null,Ox(Bx,Ux,rE,xE);case A:return Ux=Ux.get(rE.key===null?Vx:rE.key)||null,Hx(Bx,Ux,rE,xE);case tn:var DE=rE._init;return rE=DE(rE._payload),Yx(Ux,Bx,Vx,rE,xE)}if(ix(rE)||gn(rE))return Ux=Ux.get(Vx)||null,eE(Bx,Ux,rE,xE,null);if(typeof rE.then=="function")return Yx(Ux,Bx,Vx,dM(rE),xE);if(rE.$$typeof===j)return Yx(Ux,Bx,Vx,eM(Bx,rE),xE);hM(Bx,rE)}return null}function AE(Ux,Bx,Vx,rE){for(var xE=null,DE=null,EE=Bx,TE=Bx=0,pS=null;EE!==null&&TE<Vx.length;TE++){EE.index>TE?(pS=EE,EE=null):pS=EE.sibling;var BE=Zx(Ux,EE,Vx[TE],rE);if(BE===null){EE===null&&(EE=pS);break}I&&EE&&BE.alternate===null&&P(Ux,EE),Bx=ex(BE,Bx,TE),DE===null?xE=BE:DE.sibling=BE,DE=BE,EE=pS}if(TE===Vx.length)return Y(Ux,EE),FE&&XT(Ux,TE),xE;if(EE===null){for(;TE<Vx.length;TE++)EE=aE(Ux,Vx[TE],rE),EE!==null&&(Bx=ex(EE,Bx,TE),DE===null?xE=EE:DE.sibling=EE,DE=EE);return FE&&XT(Ux,TE),xE}for(EE=ar(EE);TE<Vx.length;TE++)pS=Yx(EE,Ux,TE,Vx[TE],rE),pS!==null&&(I&&pS.alternate!==null&&EE.delete(pS.key===null?TE:pS.key),Bx=ex(pS,Bx,TE),DE===null?xE=pS:DE.sibling=pS,DE=pS);return I&&EE.forEach(function(GT){return P(Ux,GT)}),FE&&XT(Ux,TE),xE}function wE(Ux,Bx,Vx,rE){if(Vx==null)throw Error(s(151));for(var xE=null,DE=null,EE=Bx,TE=Bx=0,pS=null,BE=Vx.next();EE!==null&&!BE.done;TE++,BE=Vx.next()){EE.index>TE?(pS=EE,EE=null):pS=EE.sibling;var GT=Zx(Ux,EE,BE.value,rE);if(GT===null){EE===null&&(EE=pS);break}I&&EE&&GT.alternate===null&&P(Ux,EE),Bx=ex(GT,Bx,TE),DE===null?xE=GT:DE.sibling=GT,DE=GT,EE=pS}if(BE.done)return Y(Ux,EE),FE&&XT(Ux,TE),xE;if(EE===null){for(;!BE.done;TE++,BE=Vx.next())BE=aE(Ux,BE.value,rE),BE!==null&&(Bx=ex(BE,Bx,TE),DE===null?xE=BE:DE.sibling=BE,DE=BE);return FE&&XT(Ux,TE),xE}for(EE=ar(EE);!BE.done;TE++,BE=Vx.next())BE=Yx(EE,Ux,TE,BE.value,rE),BE!==null&&(I&&BE.alternate!==null&&EE.delete(BE.key===null?TE:BE.key),Bx=ex(BE,Bx,TE),DE===null?xE=BE:DE.sibling=BE,DE=BE);return I&&EE.forEach(function(M$){return P(Ux,M$)}),FE&&XT(Ux,TE),xE}function HE(Ux,Bx,Vx,rE){if(typeof Vx=="object"&&Vx!==null&&Vx.type===R&&Vx.key===null&&(Vx=Vx.props.children),typeof Vx=="object"&&Vx!==null){switch(Vx.$$typeof){case T:e:{for(var xE=Vx.key;Bx!==null;){if(Bx.key===xE){if(xE=Vx.type,xE===R){if(Bx.tag===7){Y(Ux,Bx.sibling),rE=cn(Bx,Vx.props.children),rE.return=Ux,Ux=rE;break e}}else if(Bx.elementType===xE||typeof xE=="object"&&xE!==null&&xE.$$typeof===tn&&LO(xE)===Bx.type){Y(Ux,Bx.sibling),rE=cn(Bx,Vx.props),mC(rE,Vx),rE.return=Ux,Ux=rE;break e}Y(Ux,Bx);break}else P(Ux,Bx);Bx=Bx.sibling}Vx.type===R?(rE=YT(Vx.props.children,Ux.mode,rE,Vx.key),rE.return=Ux,Ux=rE):(rE=XC(Vx.type,Vx.key,Vx.props,null,Ux.mode,rE),mC(rE,Vx),rE.return=Ux,Ux=rE)}return cx(Ux);case A:e:{for(xE=Vx.key;Bx!==null;){if(Bx.key===xE)if(Bx.tag===4&&Bx.stateNode.containerInfo===Vx.containerInfo&&Bx.stateNode.implementation===Vx.implementation){Y(Ux,Bx.sibling),rE=cn(Bx,Vx.children||[]),rE.return=Ux,Ux=rE;break e}else{Y(Ux,Bx);break}else P(Ux,Bx);Bx=Bx.sibling}rE=mR(Vx,Ux.mode,rE),rE.return=Ux,Ux=rE}return cx(Ux);case tn:return xE=Vx._init,Vx=xE(Vx._payload),HE(Ux,Bx,Vx,rE)}if(ix(Vx))return AE(Ux,Bx,Vx,rE);if(gn(Vx)){if(xE=gn(Vx),typeof xE!="function")throw Error(s(150));return Vx=xE.call(Vx),wE(Ux,Bx,Vx,rE)}if(typeof Vx.then=="function")return HE(Ux,Bx,dM(Vx),rE);if(Vx.$$typeof===j)return HE(Ux,Bx,eM(Ux,Vx),rE);hM(Ux,Vx)}return typeof Vx=="string"&&Vx!==""||typeof Vx=="number"||typeof Vx=="bigint"?(Vx=""+Vx,Bx!==null&&Bx.tag===6?(Y(Ux,Bx.sibling),rE=cn(Bx,Vx),rE.return=Ux,Ux=rE):(Y(Ux,Bx),rE=gR(Vx,Ux.mode,rE),rE.return=Ux,Ux=rE),cx(Ux)):Y(Ux,Bx)}return function(Ux,Bx,Vx,rE){try{gC=0;var xE=HE(Ux,Bx,Vx,rE);return CA=null,xE}catch(EE){if(EE===oC||EE===rM)throw EE;var DE=LS(29,EE,null,Ux.mode);return DE.lanes=rE,DE.return=Ux,DE}finally{}}}var MA=$O(!0),BO=$O(!1),ZS=hx(null),rT=null;function CT(I){var P=I.alternate;ux(uS,uS.current&1),ux(ZS,I),rT===null&&(P===null||SA.current!==null||P.memoizedState!==null)&&(rT=I)}function kO(I){if(I.tag===22){if(ux(uS,uS.current),ux(ZS,I),rT===null){var P=I.alternate;P!==null&&P.memoizedState!==null&&(rT=I)}}else MT()}function MT(){ux(uS,uS.current),ux(ZS,ZS.current)}function hT(I){_x(ZS),rT===I&&(rT=null),_x(uS)}var uS=hx(0);function gM(I){for(var P=I;P!==null;){if(P.tag===13){var Y=P.memoizedState;if(Y!==null&&(Y=Y.dehydrated,Y===null||Y.data==="$?"||qI(Y)))return P}else if(P.tag===19&&P.memoizedProps.revealOrder!==void 0){if((P.flags&128)!==0)return P}else if(P.child!==null){P.child.return=P,P=P.child;continue}if(P===I)break;for(;P.sibling===null;){if(P.return===null||P.return===I)return null;P=P.return}P.sibling.return=P.return,P=P.sibling}return null}function XR(I,P,Y,ar){P=I.memoizedState,Y=Y(ar,P),Y=Y==null?P:_({},P,Y),I.memoizedState=Y,I.lanes===0&&(I.updateQueue.baseState=Y)}var KR={enqueueSetState:function(I,P,Y){I=I._reactInternals;var ar=FS(),cn=wT(ar);cn.payload=P,Y!=null&&(cn.callback=Y),P=TT(I,cn,ar),P!==null&&(qS(P,I,ar),lC(P,I,ar))},enqueueReplaceState:function(I,P,Y){I=I._reactInternals;var ar=FS(),cn=wT(ar);cn.tag=1,cn.payload=P,Y!=null&&(cn.callback=Y),P=TT(I,cn,ar),P!==null&&(qS(P,I,ar),lC(P,I,ar))},enqueueForceUpdate:function(I,P){I=I._reactInternals;var Y=FS(),ar=wT(Y);ar.tag=2,P!=null&&(ar.callback=P),P=TT(I,ar,Y),P!==null&&(qS(P,I,Y),lC(P,I,Y))}};function FO(I,P,Y,ar,cn,ex,cx){return I=I.stateNode,typeof I.shouldComponentUpdate=="function"?I.shouldComponentUpdate(ar,ex,cx):P.prototype&&P.prototype.isPureReactComponent?!QA(Y,ar)||!QA(cn,ex):!0}function qO(I,P,Y,ar){I=P.state,typeof P.componentWillReceiveProps=="function"&&P.componentWillReceiveProps(Y,ar),typeof P.UNSAFE_componentWillReceiveProps=="function"&&P.UNSAFE_componentWillReceiveProps(Y,ar),P.state!==I&&KR.enqueueReplaceState(P,P.state,null)}function nA(I,P){var Y=P;if("ref"in P){Y={};for(var ar in P)ar!=="ref"&&(Y[ar]=P[ar])}if(I=I.defaultProps){Y===P&&(Y=_({},Y));for(var cn in I)Y[cn]===void 0&&(Y[cn]=I[cn])}return Y}var mM=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function UO(I){mM(I)}function GO(I){console.error(I)}function zO(I){mM(I)}function vM(I,P){try{var Y=I.onUncaughtError;Y(P.value,{componentStack:P.stack})}catch(ar){setTimeout(function(){throw ar})}}function VO(I,P,Y){try{var ar=I.onCaughtError;ar(Y.value,{componentStack:Y.stack,errorBoundary:P.tag===1?P.stateNode:null})}catch(cn){setTimeout(function(){throw cn})}}function QR(I,P,Y){return Y=wT(Y),Y.tag=3,Y.payload={element:null},Y.callback=function(){vM(I,P)},Y}function HO(I){return I=wT(I),I.tag=3,I}function jO(I,P,Y,ar){var cn=Y.type.getDerivedStateFromError;if(typeof cn=="function"){var ex=ar.value;I.payload=function(){return cn(ex)},I.callback=function(){VO(P,Y,ar)}}var cx=Y.stateNode;cx!==null&&typeof cx.componentDidCatch=="function"&&(I.callback=function(){VO(P,Y,ar),typeof cn!="function"&&(NT===null?NT=new Set([this]):NT.add(this));var bx=ar.stack;this.componentDidCatch(ar.value,{componentStack:bx!==null?bx:""})})}function ML(I,P,Y,ar,cn){if(Y.flags|=32768,ar!==null&&typeof ar=="object"&&typeof ar.then=="function"){if(P=Y.alternate,P!==null&&nC(P,Y,cn,!0),Y=ZS.current,Y!==null){switch(Y.tag){case 13:return rT===null?bI():Y.alternate===null&&eS===0&&(eS=3),Y.flags&=-257,Y.flags|=65536,Y.lanes=cn,ar===AR?Y.flags|=16384:(P=Y.updateQueue,P===null?Y.updateQueue=new Set([ar]):P.add(ar),wI(I,ar,cn)),!1;case 22:return Y.flags|=65536,ar===AR?Y.flags|=16384:(P=Y.updateQueue,P===null?(P={transitions:null,markerInstances:null,retryQueue:new Set([ar])},Y.updateQueue=P):(Y=P.retryQueue,Y===null?P.retryQueue=new Set([ar]):Y.add(ar)),wI(I,ar,cn)),!1}throw Error(s(435,Y.tag))}return wI(I,ar,cn),bI(),!1}if(FE)return P=ZS.current,P!==null?((P.flags&65536)===0&&(P.flags|=256),P.flags|=65536,P.lanes=cn,ar!==xR&&(I=Error(s(422),{cause:ar}),rC(zS(I,Y)))):(ar!==xR&&(P=Error(s(423),{cause:ar}),rC(zS(P,Y))),I=I.current.alternate,I.flags|=65536,cn&=-cn,I.lanes|=cn,ar=zS(ar,Y),cn=QR(I.stateNode,ar,cn),RR(I,cn),eS!==4&&(eS=2)),!1;var ex=Error(s(520),{cause:ar});if(ex=zS(ex,Y),SC===null?SC=[ex]:SC.push(ex),eS!==4&&(eS=2),P===null)return!0;ar=zS(ar,Y),Y=P;do{switch(Y.tag){case 3:return Y.flags|=65536,I=cn&-cn,Y.lanes|=I,I=QR(Y.stateNode,ar,I),RR(Y,I),!1;case 1:if(P=Y.type,ex=Y.stateNode,(Y.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||ex!==null&&typeof ex.componentDidCatch=="function"&&(NT===null||!NT.has(ex))))return Y.flags|=65536,cn&=-cn,Y.lanes|=cn,cn=HO(cn),jO(cn,I,Y,ar),RR(Y,cn),!1}Y=Y.return}while(Y!==null);return!1}var ZO=Error(s(461)),cS=!1;function mS(I,P,Y,ar){P.child=I===null?BO(P,null,Y,ar):MA(P,I.child,Y,ar)}function YO(I,P,Y,ar,cn){Y=Y.render;var ex=P.ref;if("ref"in ar){var cx={};for(var bx in ar)bx!=="ref"&&(cx[bx]=ar[bx])}else cx=ar;return eA(P),ar=LR(I,P,Y,cx,ex,cn),bx=$R(),I!==null&&!cS?(BR(I,P,cn),gT(I,P,cn)):(FE&&bx&&vR(P),P.flags|=1,mS(I,P,ar,cn),P.child)}function WO(I,P,Y,ar,cn){if(I===null){var ex=Y.type;return typeof ex=="function"&&!hR(ex)&&ex.defaultProps===void 0&&Y.compare===null?(P.tag=15,P.type=ex,XO(I,P,ex,ar,cn)):(I=XC(Y.type,null,ar,P,P.mode,cn),I.ref=P.ref,I.return=P,P.child=I)}if(ex=I.child,!oI(I,cn)){var cx=ex.memoizedProps;if(Y=Y.compare,Y=Y!==null?Y:QA,Y(cx,ar)&&I.ref===P.ref)return gT(I,P,cn)}return P.flags|=1,I=lT(ex,ar),I.ref=P.ref,I.return=P,P.child=I}function XO(I,P,Y,ar,cn){if(I!==null){var ex=I.memoizedProps;if(QA(ex,ar)&&I.ref===P.ref)if(cS=!1,P.pendingProps=ar=ex,oI(I,cn))(I.flags&131072)!==0&&(cS=!0);else return P.lanes=I.lanes,gT(I,P,cn)}return JR(I,P,Y,ar,cn)}function KO(I,P,Y){var ar=P.pendingProps,cn=ar.children,ex=I!==null?I.memoizedState:null;if(ar.mode==="hidden"){if((P.flags&128)!==0){if(ar=ex!==null?ex.baseLanes|Y:Y,I!==null){for(cn=P.child=I.child,ex=0;cn!==null;)ex=ex|cn.lanes|cn.childLanes,cn=cn.sibling;P.childLanes=ex&~ar}else P.childLanes=0,P.child=null;return QO(I,P,ar,Y)}if((Y&536870912)!==0)P.memoizedState={baseLanes:0,cachePool:null},I!==null&&tM(P,ex!==null?ex.cachePool:null),ex!==null?WD(P,ex):DR(),kO(P);else return P.lanes=P.childLanes=536870912,QO(I,P,ex!==null?ex.baseLanes|Y:Y,Y)}else ex!==null?(tM(P,ex.cachePool),WD(P,ex),MT(),P.memoizedState=null):(I!==null&&tM(P,null),DR(),MT());return mS(I,P,cn,Y),P.child}function QO(I,P,Y,ar){var cn=TR();return cn=cn===null?null:{parent:lS._currentValue,pool:cn},P.memoizedState={baseLanes:Y,cachePool:cn},I!==null&&tM(P,null),DR(),kO(P),I!==null&&nC(I,P,ar,!0),null}function yM(I,P){var Y=P.ref;if(Y===null)I!==null&&I.ref!==null&&(P.flags|=4194816);else{if(typeof Y!="function"&&typeof Y!="object")throw Error(s(284));(I===null||I.ref!==Y)&&(P.flags|=4194816)}}function JR(I,P,Y,ar,cn){return eA(P),Y=LR(I,P,Y,ar,void 0,cn),ar=$R(),I!==null&&!cS?(BR(I,P,cn),gT(I,P,cn)):(FE&&ar&&vR(P),P.flags|=1,mS(I,P,Y,cn),P.child)}function JO(I,P,Y,ar,cn,ex){return eA(P),P.updateQueue=null,Y=KD(P,ar,Y,cn),XD(I),ar=$R(),I!==null&&!cS?(BR(I,P,ex),gT(I,P,ex)):(FE&&ar&&vR(P),P.flags|=1,mS(I,P,Y,ex),P.child)}function eP(I,P,Y,ar,cn){if(eA(P),P.stateNode===null){var ex=yA,cx=Y.contextType;typeof cx=="object"&&cx!==null&&(ex=ES(cx)),ex=new Y(ar,ex),P.memoizedState=ex.state!==null&&ex.state!==void 0?ex.state:null,ex.updater=KR,P.stateNode=ex,ex._reactInternals=P,ex=P.stateNode,ex.props=ar,ex.state=P.memoizedState,ex.refs={},CR(P),cx=Y.contextType,ex.context=typeof cx=="object"&&cx!==null?ES(cx):yA,ex.state=P.memoizedState,cx=Y.getDerivedStateFromProps,typeof cx=="function"&&(XR(P,Y,cx,ar),ex.state=P.memoizedState),typeof Y.getDerivedStateFromProps=="function"||typeof ex.getSnapshotBeforeUpdate=="function"||typeof ex.UNSAFE_componentWillMount!="function"&&typeof ex.componentWillMount!="function"||(cx=ex.state,typeof ex.componentWillMount=="function"&&ex.componentWillMount(),typeof ex.UNSAFE_componentWillMount=="function"&&ex.UNSAFE_componentWillMount(),cx!==ex.state&&KR.enqueueReplaceState(ex,ex.state,null),cC(P,ar,ex,cn),uC(),ex.state=P.memoizedState),typeof ex.componentDidMount=="function"&&(P.flags|=4194308),ar=!0}else if(I===null){ex=P.stateNode;var bx=P.memoizedProps,Ox=nA(Y,bx);ex.props=Ox;var Hx=ex.context,eE=Y.contextType;cx=yA,typeof eE=="object"&&eE!==null&&(cx=ES(eE));var aE=Y.getDerivedStateFromProps;eE=typeof aE=="function"||typeof ex.getSnapshotBeforeUpdate=="function",bx=P.pendingProps!==bx,eE||typeof ex.UNSAFE_componentWillReceiveProps!="function"&&typeof ex.componentWillReceiveProps!="function"||(bx||Hx!==cx)&&qO(P,ex,ar,cx),ST=!1;var Zx=P.memoizedState;ex.state=Zx,cC(P,ar,ex,cn),uC(),Hx=P.memoizedState,bx||Zx!==Hx||ST?(typeof aE=="function"&&(XR(P,Y,aE,ar),Hx=P.memoizedState),(Ox=ST||FO(P,Y,Ox,ar,Zx,Hx,cx))?(eE||typeof ex.UNSAFE_componentWillMount!="function"&&typeof ex.componentWillMount!="function"||(typeof ex.componentWillMount=="function"&&ex.componentWillMount(),typeof ex.UNSAFE_componentWillMount=="function"&&ex.UNSAFE_componentWillMount()),typeof ex.componentDidMount=="function"&&(P.flags|=4194308)):(typeof ex.componentDidMount=="function"&&(P.flags|=4194308),P.memoizedProps=ar,P.memoizedState=Hx),ex.props=ar,ex.state=Hx,ex.context=cx,ar=Ox):(typeof ex.componentDidMount=="function"&&(P.flags|=4194308),ar=!1)}else{ex=P.stateNode,MR(I,P),cx=P.memoizedProps,eE=nA(Y,cx),ex.props=eE,aE=P.pendingProps,Zx=ex.context,Hx=Y.contextType,Ox=yA,typeof Hx=="object"&&Hx!==null&&(Ox=ES(Hx)),bx=Y.getDerivedStateFromProps,(Hx=typeof bx=="function"||typeof ex.getSnapshotBeforeUpdate=="function")||typeof ex.UNSAFE_componentWillReceiveProps!="function"&&typeof ex.componentWillReceiveProps!="function"||(cx!==aE||Zx!==Ox)&&qO(P,ex,ar,Ox),ST=!1,Zx=P.memoizedState,ex.state=Zx,cC(P,ar,ex,cn),uC();var Yx=P.memoizedState;cx!==aE||Zx!==Yx||ST||I!==null&&I.dependencies!==null&&JC(I.dependencies)?(typeof bx=="function"&&(XR(P,Y,bx,ar),Yx=P.memoizedState),(eE=ST||FO(P,Y,eE,ar,Zx,Yx,Ox)||I!==null&&I.dependencies!==null&&JC(I.dependencies))?(Hx||typeof ex.UNSAFE_componentWillUpdate!="function"&&typeof ex.componentWillUpdate!="function"||(typeof ex.componentWillUpdate=="function"&&ex.componentWillUpdate(ar,Yx,Ox),typeof ex.UNSAFE_componentWillUpdate=="function"&&ex.UNSAFE_componentWillUpdate(ar,Yx,Ox)),typeof ex.componentDidUpdate=="function"&&(P.flags|=4),typeof ex.getSnapshotBeforeUpdate=="function"&&(P.flags|=1024)):(typeof ex.componentDidUpdate!="function"||cx===I.memoizedProps&&Zx===I.memoizedState||(P.flags|=4),typeof ex.getSnapshotBeforeUpdate!="function"||cx===I.memoizedProps&&Zx===I.memoizedState||(P.flags|=1024),P.memoizedProps=ar,P.memoizedState=Yx),ex.props=ar,ex.state=Yx,ex.context=Ox,ar=eE):(typeof ex.componentDidUpdate!="function"||cx===I.memoizedProps&&Zx===I.memoizedState||(P.flags|=4),typeof ex.getSnapshotBeforeUpdate!="function"||cx===I.memoizedProps&&Zx===I.memoizedState||(P.flags|=1024),ar=!1)}return ex=ar,yM(I,P),ar=(P.flags&128)!==0,ex||ar?(ex=P.stateNode,Y=ar&&typeof Y.getDerivedStateFromError!="function"?null:ex.render(),P.flags|=1,I!==null&&ar?(P.child=MA(P,I.child,null,cn),P.child=MA(P,null,Y,cn)):mS(I,P,Y,cn),P.memoizedState=ex.state,I=P.child):I=gT(I,P,cn),I}function tP(I,P,Y,ar){return tC(),P.flags|=256,mS(I,P,Y,ar),P.child}var eI={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tI(I){return{baseLanes:I,cachePool:UD()}}function rI(I,P,Y){return I=I!==null?I.childLanes&~Y:0,P&&(I|=YS),I}function rP(I,P,Y){var ar=P.pendingProps,cn=!1,ex=(P.flags&128)!==0,cx;if((cx=ex)||(cx=I!==null&&I.memoizedState===null?!1:(uS.current&2)!==0),cx&&(cn=!0,P.flags&=-129),cx=(P.flags&32)!==0,P.flags&=-33,I===null){if(FE){if(cn?CT(P):MT(),FE){var bx=JE,Ox;if(Ox=bx){e:{for(Ox=bx,bx=tT;Ox.nodeType!==8;){if(!bx){bx=null;break e}if(Ox=eT(Ox.nextSibling),Ox===null){bx=null;break e}}bx=Ox}bx!==null?(P.memoizedState={dehydrated:bx,treeContext:WT!==null?{id:uT,overflow:cT}:null,retryLane:536870912,hydrationErrors:null},Ox=LS(18,null,null,0),Ox.stateNode=bx,Ox.return=P,P.child=Ox,wS=P,JE=null,Ox=!0):Ox=!1}Ox||QT(P)}if(bx=P.memoizedState,bx!==null&&(bx=bx.dehydrated,bx!==null))return qI(bx)?P.lanes=32:P.lanes=536870912,null;hT(P)}return bx=ar.children,ar=ar.fallback,cn?(MT(),cn=P.mode,bx=xM({mode:"hidden",children:bx},cn),ar=YT(ar,cn,Y,null),bx.return=P,ar.return=P,bx.sibling=ar,P.child=bx,cn=P.child,cn.memoizedState=tI(Y),cn.childLanes=rI(I,cx,Y),P.memoizedState=eI,ar):(CT(P),nI(P,bx))}if(Ox=I.memoizedState,Ox!==null&&(bx=Ox.dehydrated,bx!==null)){if(ex)P.flags&256?(CT(P),P.flags&=-257,P=iI(I,P,Y)):P.memoizedState!==null?(MT(),P.child=I.child,P.flags|=128,P=null):(MT(),cn=ar.fallback,bx=P.mode,ar=xM({mode:"visible",children:ar.children},bx),cn=YT(cn,bx,Y,null),cn.flags|=2,ar.return=P,cn.return=P,ar.sibling=cn,P.child=ar,MA(P,I.child,null,Y),ar=P.child,ar.memoizedState=tI(Y),ar.childLanes=rI(I,cx,Y),P.memoizedState=eI,P=cn);else if(CT(P),qI(bx)){if(cx=bx.nextSibling&&bx.nextSibling.dataset,cx)var Hx=cx.dgst;cx=Hx,ar=Error(s(419)),ar.stack="",ar.digest=cx,rC({value:ar,source:null,stack:null}),P=iI(I,P,Y)}else if(cS||nC(I,P,Y,!1),cx=(Y&I.childLanes)!==0,cS||cx){if(cx=ZE,cx!==null&&(ar=Y&-Y,ar=(ar&42)!==0?1:Mx(ar),ar=(ar&(cx.suspendedLanes|Y))!==0?0:ar,ar!==0&&ar!==Ox.retryLane))throw Ox.retryLane=ar,vA(I,ar),qS(cx,I,ar),ZO;bx.data==="$?"||bI(),P=iI(I,P,Y)}else bx.data==="$?"?(P.flags|=192,P.child=I.child,P=null):(I=Ox.treeContext,JE=eT(bx.nextSibling),wS=P,FE=!0,KT=null,tT=!1,I!==null&&(HS[jS++]=uT,HS[jS++]=cT,HS[jS++]=WT,uT=I.id,cT=I.overflow,WT=P),P=nI(P,ar.children),P.flags|=4096);return P}return cn?(MT(),cn=ar.fallback,bx=P.mode,Ox=I.child,Hx=Ox.sibling,ar=lT(Ox,{mode:"hidden",children:ar.children}),ar.subtreeFlags=Ox.subtreeFlags&65011712,Hx!==null?cn=lT(Hx,cn):(cn=YT(cn,bx,Y,null),cn.flags|=2),cn.return=P,ar.return=P,ar.sibling=cn,P.child=ar,ar=cn,cn=P.child,bx=I.child.memoizedState,bx===null?bx=tI(Y):(Ox=bx.cachePool,Ox!==null?(Hx=lS._currentValue,Ox=Ox.parent!==Hx?{parent:Hx,pool:Hx}:Ox):Ox=UD(),bx={baseLanes:bx.baseLanes|Y,cachePool:Ox}),cn.memoizedState=bx,cn.childLanes=rI(I,cx,Y),P.memoizedState=eI,ar):(CT(P),Y=I.child,I=Y.sibling,Y=lT(Y,{mode:"visible",children:ar.children}),Y.return=P,Y.sibling=null,I!==null&&(cx=P.deletions,cx===null?(P.deletions=[I],P.flags|=16):cx.push(I)),P.child=Y,P.memoizedState=null,Y)}function nI(I,P){return P=xM({mode:"visible",children:P},I.mode),P.return=I,I.child=P}function xM(I,P){return I=LS(22,I,null,P),I.lanes=0,I.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},I}function iI(I,P,Y){return MA(P,I.child,null,Y),I=nI(P,P.pendingProps.children),I.flags|=2,P.memoizedState=null,I}function nP(I,P,Y){I.lanes|=P;var ar=I.alternate;ar!==null&&(ar.lanes|=P),ER(I.return,P,Y)}function aI(I,P,Y,ar,cn){var ex=I.memoizedState;ex===null?I.memoizedState={isBackwards:P,rendering:null,renderingStartTime:0,last:ar,tail:Y,tailMode:cn}:(ex.isBackwards=P,ex.rendering=null,ex.renderingStartTime=0,ex.last=ar,ex.tail=Y,ex.tailMode=cn)}function iP(I,P,Y){var ar=P.pendingProps,cn=ar.revealOrder,ex=ar.tail;if(mS(I,P,ar.children,Y),ar=uS.current,(ar&2)!==0)ar=ar&1|2,P.flags|=128;else{if(I!==null&&(I.flags&128)!==0)e:for(I=P.child;I!==null;){if(I.tag===13)I.memoizedState!==null&&nP(I,Y,P);else if(I.tag===19)nP(I,Y,P);else if(I.child!==null){I.child.return=I,I=I.child;continue}if(I===P)break e;for(;I.sibling===null;){if(I.return===null||I.return===P)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}ar&=1}switch(ux(uS,ar),cn){case"forwards":for(Y=P.child,cn=null;Y!==null;)I=Y.alternate,I!==null&&gM(I)===null&&(cn=Y),Y=Y.sibling;Y=cn,Y===null?(cn=P.child,P.child=null):(cn=Y.sibling,Y.sibling=null),aI(P,!1,cn,Y,ex);break;case"backwards":for(Y=null,cn=P.child,P.child=null;cn!==null;){if(I=cn.alternate,I!==null&&gM(I)===null){P.child=cn;break}I=cn.sibling,cn.sibling=Y,Y=cn,cn=I}aI(P,!0,Y,null,ex);break;case"together":aI(P,!1,null,null,void 0);break;default:P.memoizedState=null}return P.child}function gT(I,P,Y){if(I!==null&&(P.dependencies=I.dependencies),PT|=P.lanes,(Y&P.childLanes)===0)if(I!==null){if(nC(I,P,Y,!1),(Y&P.childLanes)===0)return null}else return null;if(I!==null&&P.child!==I.child)throw Error(s(153));if(P.child!==null){for(I=P.child,Y=lT(I,I.pendingProps),P.child=Y,Y.return=P;I.sibling!==null;)I=I.sibling,Y=Y.sibling=lT(I,I.pendingProps),Y.return=P;Y.sibling=null}return P.child}function oI(I,P){return(I.lanes&P)!==0?!0:(I=I.dependencies,!!(I!==null&&JC(I)))}function RL(I,P,Y){switch(P.tag){case 3:Sx(P,P.stateNode.containerInfo),bT(P,lS,I.memoizedState.cache),tC();break;case 27:case 5:Cx(P);break;case 4:Sx(P,P.stateNode.containerInfo);break;case 10:bT(P,P.type,P.memoizedProps.value);break;case 13:var ar=P.memoizedState;if(ar!==null)return ar.dehydrated!==null?(CT(P),P.flags|=128,null):(Y&P.child.childLanes)!==0?rP(I,P,Y):(CT(P),I=gT(I,P,Y),I!==null?I.sibling:null);CT(P);break;case 19:var cn=(I.flags&128)!==0;if(ar=(Y&P.childLanes)!==0,ar||(nC(I,P,Y,!1),ar=(Y&P.childLanes)!==0),cn){if(ar)return iP(I,P,Y);P.flags|=128}if(cn=P.memoizedState,cn!==null&&(cn.rendering=null,cn.tail=null,cn.lastEffect=null),ux(uS,uS.current),ar)break;return null;case 22:case 23:return P.lanes=0,KO(I,P,Y);case 24:bT(P,lS,I.memoizedState.cache)}return gT(I,P,Y)}function aP(I,P,Y){if(I!==null)if(I.memoizedProps!==P.pendingProps)cS=!0;else{if(!oI(I,Y)&&(P.flags&128)===0)return cS=!1,RL(I,P,Y);cS=(I.flags&131072)!==0}else cS=!1,FE&&(P.flags&1048576)!==0&&ND(P,QC,P.index);switch(P.lanes=0,P.tag){case 16:e:{I=P.pendingProps;var ar=P.elementType,cn=ar._init;if(ar=cn(ar._payload),P.type=ar,typeof ar=="function")hR(ar)?(I=nA(ar,I),P.tag=1,P=eP(null,P,ar,I,Y)):(P.tag=0,P=JR(null,P,ar,I,Y));else{if(ar!=null){if(cn=ar.$$typeof,cn===Z){P.tag=11,P=YO(null,P,ar,I,Y);break e}else if(cn===en){P.tag=14,P=WO(null,P,ar,I,Y);break e}}throw P=dn(ar)||ar,Error(s(306,P,""))}}return P;case 0:return JR(I,P,P.type,P.pendingProps,Y);case 1:return ar=P.type,cn=nA(ar,P.pendingProps),eP(I,P,ar,cn,Y);case 3:e:{if(Sx(P,P.stateNode.containerInfo),I===null)throw Error(s(387));ar=P.pendingProps;var ex=P.memoizedState;cn=ex.element,MR(I,P),cC(P,ar,null,Y);var cx=P.memoizedState;if(ar=cx.cache,bT(P,lS,ar),ar!==ex.cache&&bR(P,[lS],Y,!0),uC(),ar=cx.element,ex.isDehydrated)if(ex={element:ar,isDehydrated:!1,cache:cx.cache},P.updateQueue.baseState=ex,P.memoizedState=ex,P.flags&256){P=tP(I,P,ar,Y);break e}else if(ar!==cn){cn=zS(Error(s(424)),P),rC(cn),P=tP(I,P,ar,Y);break e}else{switch(I=P.stateNode.containerInfo,I.nodeType){case 9:I=I.body;break;default:I=I.nodeName==="HTML"?I.ownerDocument.body:I}for(JE=eT(I.firstChild),wS=P,FE=!0,KT=null,tT=!0,Y=BO(P,null,ar,Y),P.child=Y;Y;)Y.flags=Y.flags&-3|4096,Y=Y.sibling}else{if(tC(),ar===cn){P=gT(I,P,Y);break e}mS(I,P,ar,Y)}P=P.child}return P;case 26:return yM(I,P),I===null?(Y=uN(P.type,null,P.pendingProps,null))?P.memoizedState=Y:FE||(Y=P.type,I=P.pendingProps,ar=PM(mx.current).createElement(Y),ar[mE]=P,ar[yE]=I,yS(ar,Y,I),SE(ar),P.stateNode=ar):P.memoizedState=uN(P.type,I.memoizedProps,P.pendingProps,I.memoizedState),null;case 27:return Cx(P),I===null&&FE&&(ar=P.stateNode=oN(P.type,P.pendingProps,mx.current),wS=P,tT=!0,cn=JE,BT(P.type)?(UI=cn,JE=eT(ar.firstChild)):JE=cn),mS(I,P,P.pendingProps.children,Y),yM(I,P),I===null&&(P.flags|=4194304),P.child;case 5:return I===null&&FE&&((cn=ar=JE)&&(ar=n$(ar,P.type,P.pendingProps,tT),ar!==null?(P.stateNode=ar,wS=P,JE=eT(ar.firstChild),tT=!1,cn=!0):cn=!1),cn||QT(P)),Cx(P),cn=P.type,ex=P.pendingProps,cx=I!==null?I.memoizedProps:null,ar=ex.children,BI(cn,ex)?ar=null:cx!==null&&BI(cn,cx)&&(P.flags|=32),P.memoizedState!==null&&(cn=LR(I,P,EL,null,null,Y),OC._currentValue=cn),yM(I,P),mS(I,P,ar,Y),P.child;case 6:return I===null&&FE&&((I=Y=JE)&&(Y=i$(Y,P.pendingProps,tT),Y!==null?(P.stateNode=Y,wS=P,JE=null,I=!0):I=!1),I||QT(P)),null;case 13:return rP(I,P,Y);case 4:return Sx(P,P.stateNode.containerInfo),ar=P.pendingProps,I===null?P.child=MA(P,null,ar,Y):mS(I,P,ar,Y),P.child;case 11:return YO(I,P,P.type,P.pendingProps,Y);case 7:return mS(I,P,P.pendingProps,Y),P.child;case 8:return mS(I,P,P.pendingProps.children,Y),P.child;case 12:return mS(I,P,P.pendingProps.children,Y),P.child;case 10:return ar=P.pendingProps,bT(P,P.type,ar.value),mS(I,P,ar.children,Y),P.child;case 9:return cn=P.type._context,ar=P.pendingProps.children,eA(P),cn=ES(cn),ar=ar(cn),P.flags|=1,mS(I,P,ar,Y),P.child;case 14:return WO(I,P,P.type,P.pendingProps,Y);case 15:return XO(I,P,P.type,P.pendingProps,Y);case 19:return iP(I,P,Y);case 31:return ar=P.pendingProps,Y=P.mode,ar={mode:ar.mode,children:ar.children},I===null?(Y=xM(ar,Y),Y.ref=P.ref,P.child=Y,Y.return=P,P=Y):(Y=lT(I.child,ar),Y.ref=P.ref,P.child=Y,Y.return=P,P=Y),P;case 22:return KO(I,P,Y);case 24:return eA(P),ar=ES(lS),I===null?(cn=TR(),cn===null&&(cn=ZE,ex=SR(),cn.pooledCache=ex,ex.refCount++,ex!==null&&(cn.pooledCacheLanes|=Y),cn=ex),P.memoizedState={parent:ar,cache:cn},CR(P),bT(P,lS,cn)):((I.lanes&Y)!==0&&(MR(I,P),cC(P,null,null,Y),uC()),cn=I.memoizedState,ex=P.memoizedState,cn.parent!==ar?(cn={parent:ar,cache:ar},P.memoizedState=cn,P.lanes===0&&(P.memoizedState=P.updateQueue.baseState=cn),bT(P,lS,ar)):(ar=ex.cache,bT(P,lS,ar),ar!==cn.cache&&bR(P,[lS],Y,!0))),mS(I,P,P.pendingProps.children,Y),P.child;case 29:throw P.pendingProps}throw Error(s(156,P.tag))}function mT(I){I.flags|=4}function oP(I,P){if(P.type!=="stylesheet"||(P.state.loading&4)!==0)I.flags&=-16777217;else if(I.flags|=16777216,!hN(P)){if(P=ZS.current,P!==null&&((LE&4194048)===LE?rT!==null:(LE&62914560)!==LE&&(LE&536870912)===0||P!==rT))throw sC=AR,GD;I.flags|=8192}}function _M(I,P){P!==null&&(I.flags|=4),I.flags&16384&&(P=I.tag!==22?oE():536870912,I.lanes|=P,OA|=P)}function vC(I,P){if(!FE)switch(I.tailMode){case"hidden":P=I.tail;for(var Y=null;P!==null;)P.alternate!==null&&(Y=P),P=P.sibling;Y===null?I.tail=null:Y.sibling=null;break;case"collapsed":Y=I.tail;for(var ar=null;Y!==null;)Y.alternate!==null&&(ar=Y),Y=Y.sibling;ar===null?P||I.tail===null?I.tail=null:I.tail.sibling=null:ar.sibling=null}}function KE(I){var P=I.alternate!==null&&I.alternate.child===I.child,Y=0,ar=0;if(P)for(var cn=I.child;cn!==null;)Y|=cn.lanes|cn.childLanes,ar|=cn.subtreeFlags&65011712,ar|=cn.flags&65011712,cn.return=I,cn=cn.sibling;else for(cn=I.child;cn!==null;)Y|=cn.lanes|cn.childLanes,ar|=cn.subtreeFlags,ar|=cn.flags,cn.return=I,cn=cn.sibling;return I.subtreeFlags|=ar,I.childLanes=Y,P}function IL(I,P,Y){var ar=P.pendingProps;switch(yR(P),P.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return KE(P),null;case 1:return KE(P),null;case 3:return Y=P.stateNode,ar=null,I!==null&&(ar=I.memoizedState.cache),P.memoizedState.cache!==ar&&(P.flags|=2048),pT(lS),Ex(),Y.pendingContext&&(Y.context=Y.pendingContext,Y.pendingContext=null),(I===null||I.child===null)&&(eC(P)?mT(P):I===null||I.memoizedState.isDehydrated&&(P.flags&256)===0||(P.flags|=1024,BD())),KE(P),null;case 26:return Y=P.memoizedState,I===null?(mT(P),Y!==null?(KE(P),oP(P,Y)):(KE(P),P.flags&=-16777217)):Y?Y!==I.memoizedState?(mT(P),KE(P),oP(P,Y)):(KE(P),P.flags&=-16777217):(I.memoizedProps!==ar&&mT(P),KE(P),P.flags&=-16777217),null;case 27:Ax(P),Y=mx.current;var cn=P.type;if(I!==null&&P.stateNode!=null)I.memoizedProps!==ar&&mT(P);else{if(!ar){if(P.stateNode===null)throw Error(s(166));return KE(P),null}I=px.current,eC(P)?LD(P):(I=oN(cn,ar,Y),P.stateNode=I,mT(P))}return KE(P),null;case 5:if(Ax(P),Y=P.type,I!==null&&P.stateNode!=null)I.memoizedProps!==ar&&mT(P);else{if(!ar){if(P.stateNode===null)throw Error(s(166));return KE(P),null}if(I=px.current,eC(P))LD(P);else{switch(cn=PM(mx.current),I){case 1:I=cn.createElementNS("http://www.w3.org/2000/svg",Y);break;case 2:I=cn.createElementNS("http://www.w3.org/1998/Math/MathML",Y);break;default:switch(Y){case"svg":I=cn.createElementNS("http://www.w3.org/2000/svg",Y);break;case"math":I=cn.createElementNS("http://www.w3.org/1998/Math/MathML",Y);break;case"script":I=cn.createElement("div"),I.innerHTML="<script><\/script>",I=I.removeChild(I.firstChild);break;case"select":I=typeof ar.is=="string"?cn.createElement("select",{is:ar.is}):cn.createElement("select"),ar.multiple?I.multiple=!0:ar.size&&(I.size=ar.size);break;default:I=typeof ar.is=="string"?cn.createElement(Y,{is:ar.is}):cn.createElement(Y)}}I[mE]=P,I[yE]=ar;e:for(cn=P.child;cn!==null;){if(cn.tag===5||cn.tag===6)I.appendChild(cn.stateNode);else if(cn.tag!==4&&cn.tag!==27&&cn.child!==null){cn.child.return=cn,cn=cn.child;continue}if(cn===P)break e;for(;cn.sibling===null;){if(cn.return===null||cn.return===P)break e;cn=cn.return}cn.sibling.return=cn.return,cn=cn.sibling}P.stateNode=I;e:switch(yS(I,Y,ar),Y){case"button":case"input":case"select":case"textarea":I=!!ar.autoFocus;break e;case"img":I=!0;break e;default:I=!1}I&&mT(P)}}return KE(P),P.flags&=-16777217,null;case 6:if(I&&P.stateNode!=null)I.memoizedProps!==ar&&mT(P);else{if(typeof ar!="string"&&P.stateNode===null)throw Error(s(166));if(I=mx.current,eC(P)){if(I=P.stateNode,Y=P.memoizedProps,ar=null,cn=wS,cn!==null)switch(cn.tag){case 27:case 5:ar=cn.memoizedProps}I[mE]=P,I=!!(I.nodeValue===Y||ar!==null&&ar.suppressHydrationWarning===!0||JP(I.nodeValue,Y)),I||QT(P)}else I=PM(I).createTextNode(ar),I[mE]=P,P.stateNode=I}return KE(P),null;case 13:if(ar=P.memoizedState,I===null||I.memoizedState!==null&&I.memoizedState.dehydrated!==null){if(cn=eC(P),ar!==null&&ar.dehydrated!==null){if(I===null){if(!cn)throw Error(s(318));if(cn=P.memoizedState,cn=cn!==null?cn.dehydrated:null,!cn)throw Error(s(317));cn[mE]=P}else tC(),(P.flags&128)===0&&(P.memoizedState=null),P.flags|=4;KE(P),cn=!1}else cn=BD(),I!==null&&I.memoizedState!==null&&(I.memoizedState.hydrationErrors=cn),cn=!0;if(!cn)return P.flags&256?(hT(P),P):(hT(P),null)}if(hT(P),(P.flags&128)!==0)return P.lanes=Y,P;if(Y=ar!==null,I=I!==null&&I.memoizedState!==null,Y){ar=P.child,cn=null,ar.alternate!==null&&ar.alternate.memoizedState!==null&&ar.alternate.memoizedState.cachePool!==null&&(cn=ar.alternate.memoizedState.cachePool.pool);var ex=null;ar.memoizedState!==null&&ar.memoizedState.cachePool!==null&&(ex=ar.memoizedState.cachePool.pool),ex!==cn&&(ar.flags|=2048)}return Y!==I&&Y&&(P.child.flags|=8192),_M(P,P.updateQueue),KE(P),null;case 4:return Ex(),I===null&&DI(P.stateNode.containerInfo),KE(P),null;case 10:return pT(P.type),KE(P),null;case 19:if(_x(uS),cn=P.memoizedState,cn===null)return KE(P),null;if(ar=(P.flags&128)!==0,ex=cn.rendering,ex===null)if(ar)vC(cn,!1);else{if(eS!==0||I!==null&&(I.flags&128)!==0)for(I=P.child;I!==null;){if(ex=gM(I),ex!==null){for(P.flags|=128,vC(cn,!1),I=ex.updateQueue,P.updateQueue=I,_M(P,I),P.subtreeFlags=0,I=Y,Y=P.child;Y!==null;)PD(Y,I),Y=Y.sibling;return ux(uS,uS.current&1|2),P.child}I=I.sibling}cn.tail!==null&&qx()>SM&&(P.flags|=128,ar=!0,vC(cn,!1),P.lanes=4194304)}else{if(!ar)if(I=gM(ex),I!==null){if(P.flags|=128,ar=!0,I=I.updateQueue,P.updateQueue=I,_M(P,I),vC(cn,!0),cn.tail===null&&cn.tailMode==="hidden"&&!ex.alternate&&!FE)return KE(P),null}else 2*qx()-cn.renderingStartTime>SM&&Y!==536870912&&(P.flags|=128,ar=!0,vC(cn,!1),P.lanes=4194304);cn.isBackwards?(ex.sibling=P.child,P.child=ex):(I=cn.last,I!==null?I.sibling=ex:P.child=ex,cn.last=ex)}return cn.tail!==null?(P=cn.tail,cn.rendering=P,cn.tail=P.sibling,cn.renderingStartTime=qx(),P.sibling=null,I=uS.current,ux(uS,ar?I&1|2:I&1),P):(KE(P),null);case 22:case 23:return hT(P),PR(),ar=P.memoizedState!==null,I!==null?I.memoizedState!==null!==ar&&(P.flags|=8192):ar&&(P.flags|=8192),ar?(Y&536870912)!==0&&(P.flags&128)===0&&(KE(P),P.subtreeFlags&6&&(P.flags|=8192)):KE(P),Y=P.updateQueue,Y!==null&&_M(P,Y.retryQueue),Y=null,I!==null&&I.memoizedState!==null&&I.memoizedState.cachePool!==null&&(Y=I.memoizedState.cachePool.pool),ar=null,P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(ar=P.memoizedState.cachePool.pool),ar!==Y&&(P.flags|=2048),I!==null&&_x(tA),null;case 24:return Y=null,I!==null&&(Y=I.memoizedState.cache),P.memoizedState.cache!==Y&&(P.flags|=2048),pT(lS),KE(P),null;case 25:return null;case 30:return null}throw Error(s(156,P.tag))}function DL(I,P){switch(yR(P),P.tag){case 1:return I=P.flags,I&65536?(P.flags=I&-65537|128,P):null;case 3:return pT(lS),Ex(),I=P.flags,(I&65536)!==0&&(I&128)===0?(P.flags=I&-65537|128,P):null;case 26:case 27:case 5:return Ax(P),null;case 13:if(hT(P),I=P.memoizedState,I!==null&&I.dehydrated!==null){if(P.alternate===null)throw Error(s(340));tC()}return I=P.flags,I&65536?(P.flags=I&-65537|128,P):null;case 19:return _x(uS),null;case 4:return Ex(),null;case 10:return pT(P.type),null;case 22:case 23:return hT(P),PR(),I!==null&&_x(tA),I=P.flags,I&65536?(P.flags=I&-65537|128,P):null;case 24:return pT(lS),null;case 25:return null;default:return null}}function sP(I,P){switch(yR(P),P.tag){case 3:pT(lS),Ex();break;case 26:case 27:case 5:Ax(P);break;case 4:Ex();break;case 13:hT(P);break;case 19:_x(uS);break;case 10:pT(P.type);break;case 22:case 23:hT(P),PR(),I!==null&&_x(tA);break;case 24:pT(lS)}}function yC(I,P){try{var Y=P.updateQueue,ar=Y!==null?Y.lastEffect:null;if(ar!==null){var cn=ar.next;Y=cn;do{if((Y.tag&I)===I){ar=void 0;var ex=Y.create,cx=Y.inst;ar=ex(),cx.destroy=ar}Y=Y.next}while(Y!==cn)}}catch(bx){jE(P,P.return,bx)}}function RT(I,P,Y){try{var ar=P.updateQueue,cn=ar!==null?ar.lastEffect:null;if(cn!==null){var ex=cn.next;ar=ex;do{if((ar.tag&I)===I){var cx=ar.inst,bx=cx.destroy;if(bx!==void 0){cx.destroy=void 0,cn=P;var Ox=Y,Hx=bx;try{Hx()}catch(eE){jE(cn,Ox,eE)}}}ar=ar.next}while(ar!==ex)}}catch(eE){jE(P,P.return,eE)}}function lP(I){var P=I.updateQueue;if(P!==null){var Y=I.stateNode;try{YD(P,Y)}catch(ar){jE(I,I.return,ar)}}}function uP(I,P,Y){Y.props=nA(I.type,I.memoizedProps),Y.state=I.memoizedState;try{Y.componentWillUnmount()}catch(ar){jE(I,P,ar)}}function xC(I,P){try{var Y=I.ref;if(Y!==null){switch(I.tag){case 26:case 27:case 5:var ar=I.stateNode;break;case 30:ar=I.stateNode;break;default:ar=I.stateNode}typeof Y=="function"?I.refCleanup=Y(ar):Y.current=ar}}catch(cn){jE(I,P,cn)}}function nT(I,P){var Y=I.ref,ar=I.refCleanup;if(Y!==null)if(typeof ar=="function")try{ar()}catch(cn){jE(I,P,cn)}finally{I.refCleanup=null,I=I.alternate,I!=null&&(I.refCleanup=null)}else if(typeof Y=="function")try{Y(null)}catch(cn){jE(I,P,cn)}else Y.current=null}function cP(I){var P=I.type,Y=I.memoizedProps,ar=I.stateNode;try{e:switch(P){case"button":case"input":case"select":case"textarea":Y.autoFocus&&ar.focus();break e;case"img":Y.src?ar.src=Y.src:Y.srcSet&&(ar.srcset=Y.srcSet)}}catch(cn){jE(I,I.return,cn)}}function sI(I,P,Y){try{var ar=I.stateNode;QL(ar,I.type,Y,P),ar[yE]=P}catch(cn){jE(I,I.return,cn)}}function fP(I){return I.tag===5||I.tag===3||I.tag===26||I.tag===27&&BT(I.type)||I.tag===4}function lI(I){e:for(;;){for(;I.sibling===null;){if(I.return===null||fP(I.return))return null;I=I.return}for(I.sibling.return=I.return,I=I.sibling;I.tag!==5&&I.tag!==6&&I.tag!==18;){if(I.tag===27&&BT(I.type)||I.flags&2||I.child===null||I.tag===4)continue e;I.child.return=I,I=I.child}if(!(I.flags&2))return I.stateNode}}function uI(I,P,Y){var ar=I.tag;if(ar===5||ar===6)I=I.stateNode,P?(Y.nodeType===9?Y.body:Y.nodeName==="HTML"?Y.ownerDocument.body:Y).insertBefore(I,P):(P=Y.nodeType===9?Y.body:Y.nodeName==="HTML"?Y.ownerDocument.body:Y,P.appendChild(I),Y=Y._reactRootContainer,Y!=null||P.onclick!==null||(P.onclick=OM));else if(ar!==4&&(ar===27&&BT(I.type)&&(Y=I.stateNode,P=null),I=I.child,I!==null))for(uI(I,P,Y),I=I.sibling;I!==null;)uI(I,P,Y),I=I.sibling}function EM(I,P,Y){var ar=I.tag;if(ar===5||ar===6)I=I.stateNode,P?Y.insertBefore(I,P):Y.appendChild(I);else if(ar!==4&&(ar===27&&BT(I.type)&&(Y=I.stateNode),I=I.child,I!==null))for(EM(I,P,Y),I=I.sibling;I!==null;)EM(I,P,Y),I=I.sibling}function pP(I){var P=I.stateNode,Y=I.memoizedProps;try{for(var ar=I.type,cn=P.attributes;cn.length;)P.removeAttributeNode(cn[0]);yS(P,ar,Y),P[mE]=I,P[yE]=Y}catch(ex){jE(I,I.return,ex)}}var vT=!1,nS=!1,cI=!1,dP=typeof WeakSet=="function"?WeakSet:Set,fS=null;function OL(I,P){if(I=I.containerInfo,LI=FM,I=SD(I),sR(I)){if("selectionStart"in I)var Y={start:I.selectionStart,end:I.selectionEnd};else e:{Y=(Y=I.ownerDocument)&&Y.defaultView||window;var ar=Y.getSelection&&Y.getSelection();if(ar&&ar.rangeCount!==0){Y=ar.anchorNode;var cn=ar.anchorOffset,ex=ar.focusNode;ar=ar.focusOffset;try{Y.nodeType,ex.nodeType}catch{Y=null;break e}var cx=0,bx=-1,Ox=-1,Hx=0,eE=0,aE=I,Zx=null;t:for(;;){for(var Yx;aE!==Y||cn!==0&&aE.nodeType!==3||(bx=cx+cn),aE!==ex||ar!==0&&aE.nodeType!==3||(Ox=cx+ar),aE.nodeType===3&&(cx+=aE.nodeValue.length),(Yx=aE.firstChild)!==null;)Zx=aE,aE=Yx;for(;;){if(aE===I)break t;if(Zx===Y&&++Hx===cn&&(bx=cx),Zx===ex&&++eE===ar&&(Ox=cx),(Yx=aE.nextSibling)!==null)break;aE=Zx,Zx=aE.parentNode}aE=Yx}Y=bx===-1||Ox===-1?null:{start:bx,end:Ox}}else Y=null}Y=Y||{start:0,end:0}}else Y=null;for($I={focusedElem:I,selectionRange:Y},FM=!1,fS=P;fS!==null;)if(P=fS,I=P.child,(P.subtreeFlags&1024)!==0&&I!==null)I.return=P,fS=I;else for(;fS!==null;){switch(P=fS,ex=P.alternate,I=P.flags,P.tag){case 0:break;case 11:case 15:break;case 1:if((I&1024)!==0&&ex!==null){I=void 0,Y=P,cn=ex.memoizedProps,ex=ex.memoizedState,ar=Y.stateNode;try{var AE=nA(Y.type,cn,Y.elementType===Y.type);I=ar.getSnapshotBeforeUpdate(AE,ex),ar.__reactInternalSnapshotBeforeUpdate=I}catch(wE){jE(Y,Y.return,wE)}}break;case 3:if((I&1024)!==0){if(I=P.stateNode.containerInfo,Y=I.nodeType,Y===9)FI(I);else if(Y===1)switch(I.nodeName){case"HEAD":case"HTML":case"BODY":FI(I);break;default:I.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((I&1024)!==0)throw Error(s(163))}if(I=P.sibling,I!==null){I.return=P.return,fS=I;break}fS=P.return}}function hP(I,P,Y){var ar=Y.flags;switch(Y.tag){case 0:case 11:case 15:IT(I,Y),ar&4&&yC(5,Y);break;case 1:if(IT(I,Y),ar&4)if(I=Y.stateNode,P===null)try{I.componentDidMount()}catch(cx){jE(Y,Y.return,cx)}else{var cn=nA(Y.type,P.memoizedProps);P=P.memoizedState;try{I.componentDidUpdate(cn,P,I.__reactInternalSnapshotBeforeUpdate)}catch(cx){jE(Y,Y.return,cx)}}ar&64&&lP(Y),ar&512&&xC(Y,Y.return);break;case 3:if(IT(I,Y),ar&64&&(I=Y.updateQueue,I!==null)){if(P=null,Y.child!==null)switch(Y.child.tag){case 27:case 5:P=Y.child.stateNode;break;case 1:P=Y.child.stateNode}try{YD(I,P)}catch(cx){jE(Y,Y.return,cx)}}break;case 27:P===null&&ar&4&&pP(Y);case 26:case 5:IT(I,Y),P===null&&ar&4&&cP(Y),ar&512&&xC(Y,Y.return);break;case 12:IT(I,Y);break;case 13:IT(I,Y),ar&4&&vP(I,Y),ar&64&&(I=Y.memoizedState,I!==null&&(I=I.dehydrated,I!==null&&(Y=UL.bind(null,Y),a$(I,Y))));break;case 22:if(ar=Y.memoizedState!==null||vT,!ar){P=P!==null&&P.memoizedState!==null||nS,cn=vT;var ex=nS;vT=ar,(nS=P)&&!ex?DT(I,Y,(Y.subtreeFlags&8772)!==0):IT(I,Y),vT=cn,nS=ex}break;case 30:break;default:IT(I,Y)}}function gP(I){var P=I.alternate;P!==null&&(I.alternate=null,gP(P)),I.child=null,I.deletions=null,I.sibling=null,I.tag===5&&(P=I.stateNode,P!==null&&xS(P)),I.stateNode=null,I.return=null,I.dependencies=null,I.memoizedProps=null,I.memoizedState=null,I.pendingProps=null,I.stateNode=null,I.updateQueue=null}var XE=null,IS=!1;function yT(I,P,Y){for(Y=Y.child;Y!==null;)mP(I,P,Y),Y=Y.sibling}function mP(I,P,Y){if(yx&&typeof yx.onCommitFiberUnmount=="function")try{yx.onCommitFiberUnmount(fx,Y)}catch{}switch(Y.tag){case 26:nS||nT(Y,P),yT(I,P,Y),Y.memoizedState?Y.memoizedState.count--:Y.stateNode&&(Y=Y.stateNode,Y.parentNode.removeChild(Y));break;case 27:nS||nT(Y,P);var ar=XE,cn=IS;BT(Y.type)&&(XE=Y.stateNode,IS=!1),yT(I,P,Y),MC(Y.stateNode),XE=ar,IS=cn;break;case 5:nS||nT(Y,P);case 6:if(ar=XE,cn=IS,XE=null,yT(I,P,Y),XE=ar,IS=cn,XE!==null)if(IS)try{(XE.nodeType===9?XE.body:XE.nodeName==="HTML"?XE.ownerDocument.body:XE).removeChild(Y.stateNode)}catch(ex){jE(Y,P,ex)}else try{XE.removeChild(Y.stateNode)}catch(ex){jE(Y,P,ex)}break;case 18:XE!==null&&(IS?(I=XE,iN(I.nodeType===9?I.body:I.nodeName==="HTML"?I.ownerDocument.body:I,Y.stateNode),$C(I)):iN(XE,Y.stateNode));break;case 4:ar=XE,cn=IS,XE=Y.stateNode.containerInfo,IS=!0,yT(I,P,Y),XE=ar,IS=cn;break;case 0:case 11:case 14:case 15:nS||RT(2,Y,P),nS||RT(4,Y,P),yT(I,P,Y);break;case 1:nS||(nT(Y,P),ar=Y.stateNode,typeof ar.componentWillUnmount=="function"&&uP(Y,P,ar)),yT(I,P,Y);break;case 21:yT(I,P,Y);break;case 22:nS=(ar=nS)||Y.memoizedState!==null,yT(I,P,Y),nS=ar;break;default:yT(I,P,Y)}}function vP(I,P){if(P.memoizedState===null&&(I=P.alternate,I!==null&&(I=I.memoizedState,I!==null&&(I=I.dehydrated,I!==null))))try{$C(I)}catch(Y){jE(P,P.return,Y)}}function PL(I){switch(I.tag){case 13:case 19:var P=I.stateNode;return P===null&&(P=I.stateNode=new dP),P;case 22:return I=I.stateNode,P=I._retryCache,P===null&&(P=I._retryCache=new dP),P;default:throw Error(s(435,I.tag))}}function fI(I,P){var Y=PL(I);P.forEach(function(ar){var cn=GL.bind(null,I,ar);Y.has(ar)||(Y.add(ar),ar.then(cn,cn))})}function $S(I,P){var Y=P.deletions;if(Y!==null)for(var ar=0;ar<Y.length;ar++){var cn=Y[ar],ex=I,cx=P,bx=cx;e:for(;bx!==null;){switch(bx.tag){case 27:if(BT(bx.type)){XE=bx.stateNode,IS=!1;break e}break;case 5:XE=bx.stateNode,IS=!1;break e;case 3:case 4:XE=bx.stateNode.containerInfo,IS=!0;break e}bx=bx.return}if(XE===null)throw Error(s(160));mP(ex,cx,cn),XE=null,IS=!1,ex=cn.alternate,ex!==null&&(ex.return=null),cn.return=null}if(P.subtreeFlags&13878)for(P=P.child;P!==null;)yP(P,I),P=P.sibling}var JS=null;function yP(I,P){var Y=I.alternate,ar=I.flags;switch(I.tag){case 0:case 11:case 14:case 15:$S(P,I),BS(I),ar&4&&(RT(3,I,I.return),yC(3,I),RT(5,I,I.return));break;case 1:$S(P,I),BS(I),ar&512&&(nS||Y===null||nT(Y,Y.return)),ar&64&&vT&&(I=I.updateQueue,I!==null&&(ar=I.callbacks,ar!==null&&(Y=I.shared.hiddenCallbacks,I.shared.hiddenCallbacks=Y===null?ar:Y.concat(ar))));break;case 26:var cn=JS;if($S(P,I),BS(I),ar&512&&(nS||Y===null||nT(Y,Y.return)),ar&4){var ex=Y!==null?Y.memoizedState:null;if(ar=I.memoizedState,Y===null)if(ar===null)if(I.stateNode===null){e:{ar=I.type,Y=I.memoizedProps,cn=cn.ownerDocument||cn;t:switch(ar){case"title":ex=cn.getElementsByTagName("title")[0],(!ex||ex[YE]||ex[mE]||ex.namespaceURI==="http://www.w3.org/2000/svg"||ex.hasAttribute("itemprop"))&&(ex=cn.createElement(ar),cn.head.insertBefore(ex,cn.querySelector("head > title"))),yS(ex,ar,Y),ex[mE]=I,SE(ex),ar=ex;break e;case"link":var cx=pN("link","href",cn).get(ar+(Y.href||""));if(cx){for(var bx=0;bx<cx.length;bx++)if(ex=cx[bx],ex.getAttribute("href")===(Y.href==null||Y.href===""?null:Y.href)&&ex.getAttribute("rel")===(Y.rel==null?null:Y.rel)&&ex.getAttribute("title")===(Y.title==null?null:Y.title)&&ex.getAttribute("crossorigin")===(Y.crossOrigin==null?null:Y.crossOrigin)){cx.splice(bx,1);break t}}ex=cn.createElement(ar),yS(ex,ar,Y),cn.head.appendChild(ex);break;case"meta":if(cx=pN("meta","content",cn).get(ar+(Y.content||""))){for(bx=0;bx<cx.length;bx++)if(ex=cx[bx],ex.getAttribute("content")===(Y.content==null?null:""+Y.content)&&ex.getAttribute("name")===(Y.name==null?null:Y.name)&&ex.getAttribute("property")===(Y.property==null?null:Y.property)&&ex.getAttribute("http-equiv")===(Y.httpEquiv==null?null:Y.httpEquiv)&&ex.getAttribute("charset")===(Y.charSet==null?null:Y.charSet)){cx.splice(bx,1);break t}}ex=cn.createElement(ar),yS(ex,ar,Y),cn.head.appendChild(ex);break;default:throw Error(s(468,ar))}ex[mE]=I,SE(ex),ar=ex}I.stateNode=ar}else dN(cn,I.type,I.stateNode);else I.stateNode=fN(cn,ar,I.memoizedProps);else ex!==ar?(ex===null?Y.stateNode!==null&&(Y=Y.stateNode,Y.parentNode.removeChild(Y)):ex.count--,ar===null?dN(cn,I.type,I.stateNode):fN(cn,ar,I.memoizedProps)):ar===null&&I.stateNode!==null&&sI(I,I.memoizedProps,Y.memoizedProps)}break;case 27:$S(P,I),BS(I),ar&512&&(nS||Y===null||nT(Y,Y.return)),Y!==null&&ar&4&&sI(I,I.memoizedProps,Y.memoizedProps);break;case 5:if($S(P,I),BS(I),ar&512&&(nS||Y===null||nT(Y,Y.return)),I.flags&32){cn=I.stateNode;try{cA(cn,"")}catch(Yx){jE(I,I.return,Yx)}}ar&4&&I.stateNode!=null&&(cn=I.memoizedProps,sI(I,cn,Y!==null?Y.memoizedProps:cn)),ar&1024&&(cI=!0);break;case 6:if($S(P,I),BS(I),ar&4){if(I.stateNode===null)throw Error(s(162));ar=I.memoizedProps,Y=I.stateNode;try{Y.nodeValue=ar}catch(Yx){jE(I,I.return,Yx)}}break;case 3:if($M=null,cn=JS,JS=NM(P.containerInfo),$S(P,I),JS=cn,BS(I),ar&4&&Y!==null&&Y.memoizedState.isDehydrated)try{$C(P.containerInfo)}catch(Yx){jE(I,I.return,Yx)}cI&&(cI=!1,xP(I));break;case 4:ar=JS,JS=NM(I.stateNode.containerInfo),$S(P,I),BS(I),JS=ar;break;case 12:$S(P,I),BS(I);break;case 13:$S(P,I),BS(I),I.child.flags&8192&&I.memoizedState!==null!=(Y!==null&&Y.memoizedState!==null)&&(vI=qx()),ar&4&&(ar=I.updateQueue,ar!==null&&(I.updateQueue=null,fI(I,ar)));break;case 22:cn=I.memoizedState!==null;var Ox=Y!==null&&Y.memoizedState!==null,Hx=vT,eE=nS;if(vT=Hx||cn,nS=eE||Ox,$S(P,I),nS=eE,vT=Hx,BS(I),ar&8192)e:for(P=I.stateNode,P._visibility=cn?P._visibility&-2:P._visibility|1,cn&&(Y===null||Ox||vT||nS||iA(I)),Y=null,P=I;;){if(P.tag===5||P.tag===26){if(Y===null){Ox=Y=P;try{if(ex=Ox.stateNode,cn)cx=ex.style,typeof cx.setProperty=="function"?cx.setProperty("display","none","important"):cx.display="none";else{bx=Ox.stateNode;var aE=Ox.memoizedProps.style,Zx=aE!=null&&aE.hasOwnProperty("display")?aE.display:null;bx.style.display=Zx==null||typeof Zx=="boolean"?"":(""+Zx).trim()}}catch(Yx){jE(Ox,Ox.return,Yx)}}}else if(P.tag===6){if(Y===null){Ox=P;try{Ox.stateNode.nodeValue=cn?"":Ox.memoizedProps}catch(Yx){jE(Ox,Ox.return,Yx)}}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===I)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===I)break e;for(;P.sibling===null;){if(P.return===null||P.return===I)break e;Y===P&&(Y=null),P=P.return}Y===P&&(Y=null),P.sibling.return=P.return,P=P.sibling}ar&4&&(ar=I.updateQueue,ar!==null&&(Y=ar.retryQueue,Y!==null&&(ar.retryQueue=null,fI(I,Y))));break;case 19:$S(P,I),BS(I),ar&4&&(ar=I.updateQueue,ar!==null&&(I.updateQueue=null,fI(I,ar)));break;case 30:break;case 21:break;default:$S(P,I),BS(I)}}function BS(I){var P=I.flags;if(P&2){try{for(var Y,ar=I.return;ar!==null;){if(fP(ar)){Y=ar;break}ar=ar.return}if(Y==null)throw Error(s(160));switch(Y.tag){case 27:var cn=Y.stateNode,ex=lI(I);EM(I,ex,cn);break;case 5:var cx=Y.stateNode;Y.flags&32&&(cA(cx,""),Y.flags&=-33);var bx=lI(I);EM(I,bx,cx);break;case 3:case 4:var Ox=Y.stateNode.containerInfo,Hx=lI(I);uI(I,Hx,Ox);break;default:throw Error(s(161))}}catch(eE){jE(I,I.return,eE)}I.flags&=-3}P&4096&&(I.flags&=-4097)}function xP(I){if(I.subtreeFlags&1024)for(I=I.child;I!==null;){var P=I;xP(P),P.tag===5&&P.flags&1024&&P.stateNode.reset(),I=I.sibling}}function IT(I,P){if(P.subtreeFlags&8772)for(P=P.child;P!==null;)hP(I,P.alternate,P),P=P.sibling}function iA(I){for(I=I.child;I!==null;){var P=I;switch(P.tag){case 0:case 11:case 14:case 15:RT(4,P,P.return),iA(P);break;case 1:nT(P,P.return);var Y=P.stateNode;typeof Y.componentWillUnmount=="function"&&uP(P,P.return,Y),iA(P);break;case 27:MC(P.stateNode);case 26:case 5:nT(P,P.return),iA(P);break;case 22:P.memoizedState===null&&iA(P);break;case 30:iA(P);break;default:iA(P)}I=I.sibling}}function DT(I,P,Y){for(Y=Y&&(P.subtreeFlags&8772)!==0,P=P.child;P!==null;){var ar=P.alternate,cn=I,ex=P,cx=ex.flags;switch(ex.tag){case 0:case 11:case 15:DT(cn,ex,Y),yC(4,ex);break;case 1:if(DT(cn,ex,Y),ar=ex,cn=ar.stateNode,typeof cn.componentDidMount=="function")try{cn.componentDidMount()}catch(Hx){jE(ar,ar.return,Hx)}if(ar=ex,cn=ar.updateQueue,cn!==null){var bx=ar.stateNode;try{var Ox=cn.shared.hiddenCallbacks;if(Ox!==null)for(cn.shared.hiddenCallbacks=null,cn=0;cn<Ox.length;cn++)ZD(Ox[cn],bx)}catch(Hx){jE(ar,ar.return,Hx)}}Y&&cx&64&&lP(ex),xC(ex,ex.return);break;case 27:pP(ex);case 26:case 5:DT(cn,ex,Y),Y&&ar===null&&cx&4&&cP(ex),xC(ex,ex.return);break;case 12:DT(cn,ex,Y);break;case 13:DT(cn,ex,Y),Y&&cx&4&&vP(cn,ex);break;case 22:ex.memoizedState===null&&DT(cn,ex,Y),xC(ex,ex.return);break;case 30:break;default:DT(cn,ex,Y)}P=P.sibling}}function pI(I,P){var Y=null;I!==null&&I.memoizedState!==null&&I.memoizedState.cachePool!==null&&(Y=I.memoizedState.cachePool.pool),I=null,P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(I=P.memoizedState.cachePool.pool),I!==Y&&(I!=null&&I.refCount++,Y!=null&&iC(Y))}function dI(I,P){I=null,P.alternate!==null&&(I=P.alternate.memoizedState.cache),P=P.memoizedState.cache,P!==I&&(P.refCount++,I!=null&&iC(I))}function iT(I,P,Y,ar){if(P.subtreeFlags&10256)for(P=P.child;P!==null;)_P(I,P,Y,ar),P=P.sibling}function _P(I,P,Y,ar){var cn=P.flags;switch(P.tag){case 0:case 11:case 15:iT(I,P,Y,ar),cn&2048&&yC(9,P);break;case 1:iT(I,P,Y,ar);break;case 3:iT(I,P,Y,ar),cn&2048&&(I=null,P.alternate!==null&&(I=P.alternate.memoizedState.cache),P=P.memoizedState.cache,P!==I&&(P.refCount++,I!=null&&iC(I)));break;case 12:if(cn&2048){iT(I,P,Y,ar),I=P.stateNode;try{var ex=P.memoizedProps,cx=ex.id,bx=ex.onPostCommit;typeof bx=="function"&&bx(cx,P.alternate===null?"mount":"update",I.passiveEffectDuration,-0)}catch(Ox){jE(P,P.return,Ox)}}else iT(I,P,Y,ar);break;case 13:iT(I,P,Y,ar);break;case 23:break;case 22:ex=P.stateNode,cx=P.alternate,P.memoizedState!==null?ex._visibility&2?iT(I,P,Y,ar):_C(I,P):ex._visibility&2?iT(I,P,Y,ar):(ex._visibility|=2,RA(I,P,Y,ar,(P.subtreeFlags&10256)!==0)),cn&2048&&pI(cx,P);break;case 24:iT(I,P,Y,ar),cn&2048&&dI(P.alternate,P);break;default:iT(I,P,Y,ar)}}function RA(I,P,Y,ar,cn){for(cn=cn&&(P.subtreeFlags&10256)!==0,P=P.child;P!==null;){var ex=I,cx=P,bx=Y,Ox=ar,Hx=cx.flags;switch(cx.tag){case 0:case 11:case 15:RA(ex,cx,bx,Ox,cn),yC(8,cx);break;case 23:break;case 22:var eE=cx.stateNode;cx.memoizedState!==null?eE._visibility&2?RA(ex,cx,bx,Ox,cn):_C(ex,cx):(eE._visibility|=2,RA(ex,cx,bx,Ox,cn)),cn&&Hx&2048&&pI(cx.alternate,cx);break;case 24:RA(ex,cx,bx,Ox,cn),cn&&Hx&2048&&dI(cx.alternate,cx);break;default:RA(ex,cx,bx,Ox,cn)}P=P.sibling}}function _C(I,P){if(P.subtreeFlags&10256)for(P=P.child;P!==null;){var Y=I,ar=P,cn=ar.flags;switch(ar.tag){case 22:_C(Y,ar),cn&2048&&pI(ar.alternate,ar);break;case 24:_C(Y,ar),cn&2048&&dI(ar.alternate,ar);break;default:_C(Y,ar)}P=P.sibling}}var EC=8192;function IA(I){if(I.subtreeFlags&EC)for(I=I.child;I!==null;)EP(I),I=I.sibling}function EP(I){switch(I.tag){case 26:IA(I),I.flags&EC&&I.memoizedState!==null&&y$(JS,I.memoizedState,I.memoizedProps);break;case 5:IA(I);break;case 3:case 4:var P=JS;JS=NM(I.stateNode.containerInfo),IA(I),JS=P;break;case 22:I.memoizedState===null&&(P=I.alternate,P!==null&&P.memoizedState!==null?(P=EC,EC=16777216,IA(I),EC=P):IA(I));break;default:IA(I)}}function bP(I){var P=I.alternate;if(P!==null&&(I=P.child,I!==null)){P.child=null;do P=I.sibling,I.sibling=null,I=P;while(I!==null)}}function bC(I){var P=I.deletions;if((I.flags&16)!==0){if(P!==null)for(var Y=0;Y<P.length;Y++){var ar=P[Y];fS=ar,wP(ar,I)}bP(I)}if(I.subtreeFlags&10256)for(I=I.child;I!==null;)SP(I),I=I.sibling}function SP(I){switch(I.tag){case 0:case 11:case 15:bC(I),I.flags&2048&&RT(9,I,I.return);break;case 3:bC(I);break;case 12:bC(I);break;case 22:var P=I.stateNode;I.memoizedState!==null&&P._visibility&2&&(I.return===null||I.return.tag!==13)?(P._visibility&=-3,bM(I)):bC(I);break;default:bC(I)}}function bM(I){var P=I.deletions;if((I.flags&16)!==0){if(P!==null)for(var Y=0;Y<P.length;Y++){var ar=P[Y];fS=ar,wP(ar,I)}bP(I)}for(I=I.child;I!==null;){switch(P=I,P.tag){case 0:case 11:case 15:RT(8,P,P.return),bM(P);break;case 22:Y=P.stateNode,Y._visibility&2&&(Y._visibility&=-3,bM(P));break;default:bM(P)}I=I.sibling}}function wP(I,P){for(;fS!==null;){var Y=fS;switch(Y.tag){case 0:case 11:case 15:RT(8,Y,P);break;case 23:case 22:if(Y.memoizedState!==null&&Y.memoizedState.cachePool!==null){var ar=Y.memoizedState.cachePool.pool;ar!=null&&ar.refCount++}break;case 24:iC(Y.memoizedState.cache)}if(ar=Y.child,ar!==null)ar.return=Y,fS=ar;else e:for(Y=I;fS!==null;){ar=fS;var cn=ar.sibling,ex=ar.return;if(gP(ar),ar===Y){fS=null;break e}if(cn!==null){cn.return=ex,fS=cn;break e}fS=ex}}}var NL={getCacheForType:function(I){var P=ES(lS),Y=P.data.get(I);return Y===void 0&&(Y=I(),P.data.set(I,Y)),Y}},LL=typeof WeakMap=="function"?WeakMap:Map,UE=0,ZE=null,OE=null,LE=0,GE=0,kS=null,OT=!1,DA=!1,hI=!1,xT=0,eS=0,PT=0,aA=0,gI=0,YS=0,OA=0,SC=null,DS=null,mI=!1,vI=0,SM=1/0,wM=null,NT=null,vS=0,LT=null,PA=null,NA=0,yI=0,xI=null,TP=null,wC=0,_I=null;function FS(){if((UE&2)!==0&&LE!==0)return LE&-LE;if(Cn.T!==null){var I=EA;return I!==0?I:CI()}return Kx()}function AP(){YS===0&&(YS=(LE&536870912)===0||FE?Xx():536870912);var I=ZS.current;return I!==null&&(I.flags|=32),YS}function qS(I,P,Y){(I===ZE&&(GE===2||GE===9)||I.cancelPendingCommit!==null)&&(LA(I,0),$T(I,LE,YS,!1)),fE(I,Y),((UE&2)===0||I!==ZE)&&(I===ZE&&((UE&2)===0&&(aA|=Y),eS===4&&$T(I,LE,YS,!1)),aT(I))}function CP(I,P,Y){if((UE&6)!==0)throw Error(s(327));var ar=!Y&&(P&124)===0&&(P&I.expiredLanes)===0||gE(I,P),cn=ar?kL(I,P):SI(I,P,!0),ex=ar;do{if(cn===0){DA&&!ar&&$T(I,P,0,!1);break}else{if(Y=I.current.alternate,ex&&!$L(Y)){cn=SI(I,P,!1),ex=!1;continue}if(cn===2){if(ex=P,I.errorRecoveryDisabledLanes&ex)var cx=0;else cx=I.pendingLanes&-536870913,cx=cx!==0?cx:cx&536870912?536870912:0;if(cx!==0){P=cx;e:{var bx=I;cn=SC;var Ox=bx.current.memoizedState.isDehydrated;if(Ox&&(LA(bx,cx).flags|=256),cx=SI(bx,cx,!1),cx!==2){if(hI&&!Ox){bx.errorRecoveryDisabledLanes|=ex,aA|=ex,cn=4;break e}ex=DS,DS=cn,ex!==null&&(DS===null?DS=ex:DS.push.apply(DS,ex))}cn=cx}if(ex=!1,cn!==2)continue}}if(cn===1){LA(I,0),$T(I,P,0,!0);break}e:{switch(ar=I,ex=cn,ex){case 0:case 1:throw Error(s(345));case 4:if((P&4194048)!==P)break;case 6:$T(ar,P,YS,!OT);break e;case 2:DS=null;break;case 3:case 5:break;default:throw Error(s(329))}if((P&62914560)===P&&(cn=vI+300-qx(),10<cn)){if($T(ar,P,YS,!OT),hE(ar,0,!0)!==0)break e;ar.timeoutHandle=rN(MP.bind(null,ar,Y,DS,wM,mI,P,YS,aA,OA,OT,ex,2,-0,0),cn);break e}MP(ar,Y,DS,wM,mI,P,YS,aA,OA,OT,ex,0,-0,0)}}break}while(!0);aT(I)}function MP(I,P,Y,ar,cn,ex,cx,bx,Ox,Hx,eE,aE,Zx,Yx){if(I.timeoutHandle=-1,aE=P.subtreeFlags,(aE&8192||(aE&16785408)===16785408)&&(DC={stylesheets:null,count:0,unsuspend:v$},EP(P),aE=x$(),aE!==null)){I.cancelPendingCommit=aE(LP.bind(null,I,P,ex,Y,ar,cn,cx,bx,Ox,eE,1,Zx,Yx)),$T(I,ex,cx,!Hx);return}LP(I,P,ex,Y,ar,cn,cx,bx,Ox)}function $L(I){for(var P=I;;){var Y=P.tag;if((Y===0||Y===11||Y===15)&&P.flags&16384&&(Y=P.updateQueue,Y!==null&&(Y=Y.stores,Y!==null)))for(var ar=0;ar<Y.length;ar++){var cn=Y[ar],ex=cn.getSnapshot;cn=cn.value;try{if(!NS(ex(),cn))return!1}catch{return!1}}if(Y=P.child,P.subtreeFlags&16384&&Y!==null)Y.return=P,P=Y;else{if(P===I)break;for(;P.sibling===null;){if(P.return===null||P.return===I)return!0;P=P.return}P.sibling.return=P.return,P=P.sibling}}return!0}function $T(I,P,Y,ar){P&=~gI,P&=~aA,I.suspendedLanes|=P,I.pingedLanes&=~P,ar&&(I.warmLanes|=P),ar=I.expirationTimes;for(var cn=P;0<cn;){var ex=31-Nx(cn),cx=1<<ex;ar[ex]=-1,cn&=~cx}Y!==0&&vx(I,Y,P)}function TM(){return(UE&6)===0?(TC(0),!1):!0}function EI(){if(OE!==null){if(GE===0)var I=OE.return;else I=OE,fT=JT=null,kR(I),CA=null,gC=0,I=OE;for(;I!==null;)sP(I.alternate,I),I=I.return;OE=null}}function LA(I,P){var Y=I.timeoutHandle;Y!==-1&&(I.timeoutHandle=-1,e$(Y)),Y=I.cancelPendingCommit,Y!==null&&(I.cancelPendingCommit=null,Y()),EI(),ZE=I,OE=Y=lT(I.current,null),LE=P,GE=0,kS=null,OT=!1,DA=gE(I,P),hI=!1,OA=YS=gI=aA=PT=eS=0,DS=SC=null,mI=!1,(P&8)!==0&&(P|=P&32);var ar=I.entangledLanes;if(ar!==0)for(I=I.entanglements,ar&=P;0<ar;){var cn=31-Nx(ar),ex=1<<cn;P|=I[cn],ar&=~ex}return xT=P,ZC(),Y}function RP(I,P){IE=null,Cn.H=pM,P===oC||P===rM?(P=HD(),GE=3):P===GD?(P=HD(),GE=4):GE=P===ZO?8:P!==null&&typeof P=="object"&&typeof P.then=="function"?6:1,kS=P,OE===null&&(eS=1,vM(I,zS(P,I.current)))}function IP(){var I=Cn.H;return Cn.H=pM,I===null?pM:I}function DP(){var I=Cn.A;return Cn.A=NL,I}function bI(){eS=4,OT||(LE&4194048)!==LE&&ZS.current!==null||(DA=!0),(PT&134217727)===0&&(aA&134217727)===0||ZE===null||$T(ZE,LE,YS,!1)}function SI(I,P,Y){var ar=UE;UE|=2;var cn=IP(),ex=DP();(ZE!==I||LE!==P)&&(wM=null,LA(I,P)),P=!1;var cx=eS;e:do try{if(GE!==0&&OE!==null){var bx=OE,Ox=kS;switch(GE){case 8:EI(),cx=6;break e;case 3:case 2:case 9:case 6:ZS.current===null&&(P=!0);var Hx=GE;if(GE=0,kS=null,$A(I,bx,Ox,Hx),Y&&DA){cx=0;break e}break;default:Hx=GE,GE=0,kS=null,$A(I,bx,Ox,Hx)}}BL(),cx=eS;break}catch(eE){RP(I,eE)}while(!0);return P&&I.shellSuspendCounter++,fT=JT=null,UE=ar,Cn.H=cn,Cn.A=ex,OE===null&&(ZE=null,LE=0,ZC()),cx}function BL(){for(;OE!==null;)OP(OE)}function kL(I,P){var Y=UE;UE|=2;var ar=IP(),cn=DP();ZE!==I||LE!==P?(wM=null,SM=qx()+500,LA(I,P)):DA=gE(I,P);e:do try{if(GE!==0&&OE!==null){P=OE;var ex=kS;t:switch(GE){case 1:GE=0,kS=null,$A(I,P,ex,1);break;case 2:case 9:if(zD(ex)){GE=0,kS=null,PP(P);break}P=function(){GE!==2&&GE!==9||ZE!==I||(GE=7),aT(I)},ex.then(P,P);break e;case 3:GE=7;break e;case 4:GE=5;break e;case 7:zD(ex)?(GE=0,kS=null,PP(P)):(GE=0,kS=null,$A(I,P,ex,7));break;case 5:var cx=null;switch(OE.tag){case 26:cx=OE.memoizedState;case 5:case 27:var bx=OE;if(!cx||hN(cx)){GE=0,kS=null;var Ox=bx.sibling;if(Ox!==null)OE=Ox;else{var Hx=bx.return;Hx!==null?(OE=Hx,AM(Hx)):OE=null}break t}}GE=0,kS=null,$A(I,P,ex,5);break;case 6:GE=0,kS=null,$A(I,P,ex,6);break;case 8:EI(),eS=6;break e;default:throw Error(s(462))}}FL();break}catch(eE){RP(I,eE)}while(!0);return fT=JT=null,Cn.H=ar,Cn.A=cn,UE=Y,OE!==null?0:(ZE=null,LE=0,ZC(),eS)}function FL(){for(;OE!==null&&!$x();)OP(OE)}function OP(I){var P=aP(I.alternate,I,xT);I.memoizedProps=I.pendingProps,P===null?AM(I):OE=P}function PP(I){var P=I,Y=P.alternate;switch(P.tag){case 15:case 0:P=JO(Y,P,P.pendingProps,P.type,void 0,LE);break;case 11:P=JO(Y,P,P.pendingProps,P.type.render,P.ref,LE);break;case 5:kR(P);default:sP(Y,P),P=OE=PD(P,xT),P=aP(Y,P,xT)}I.memoizedProps=I.pendingProps,P===null?AM(I):OE=P}function $A(I,P,Y,ar){fT=JT=null,kR(P),CA=null,gC=0;var cn=P.return;try{if(ML(I,cn,P,Y,LE)){eS=1,vM(I,zS(Y,I.current)),OE=null;return}}catch(ex){if(cn!==null)throw OE=cn,ex;eS=1,vM(I,zS(Y,I.current)),OE=null;return}P.flags&32768?(FE||ar===1?I=!0:DA||(LE&536870912)!==0?I=!1:(OT=I=!0,(ar===2||ar===9||ar===3||ar===6)&&(ar=ZS.current,ar!==null&&ar.tag===13&&(ar.flags|=16384))),NP(P,I)):AM(P)}function AM(I){var P=I;do{if((P.flags&32768)!==0){NP(P,OT);return}I=P.return;var Y=IL(P.alternate,P,xT);if(Y!==null){OE=Y;return}if(P=P.sibling,P!==null){OE=P;return}OE=P=I}while(P!==null);eS===0&&(eS=5)}function NP(I,P){do{var Y=DL(I.alternate,I);if(Y!==null){Y.flags&=32767,OE=Y;return}if(Y=I.return,Y!==null&&(Y.flags|=32768,Y.subtreeFlags=0,Y.deletions=null),!P&&(I=I.sibling,I!==null)){OE=I;return}OE=I=Y}while(I!==null);eS=6,OE=null}function LP(I,P,Y,ar,cn,ex,cx,bx,Ox){I.cancelPendingCommit=null;do CM();while(vS!==0);if((UE&6)!==0)throw Error(s(327));if(P!==null){if(P===I.current)throw Error(s(177));if(ex=P.lanes|P.childLanes,ex|=pR,pE(I,Y,ex,cx,bx,Ox),I===ZE&&(OE=ZE=null,LE=0),PA=P,LT=I,NA=Y,yI=ex,xI=cn,TP=ar,(P.subtreeFlags&10256)!==0||(P.flags&10256)!==0?(I.callbackNode=null,I.callbackPriority=0,zL(nE,function(){return qP(),null})):(I.callbackNode=null,I.callbackPriority=0),ar=(P.flags&13878)!==0,(P.subtreeFlags&13878)!==0||ar){ar=Cn.T,Cn.T=null,cn=ax.p,ax.p=2,cx=UE,UE|=4;try{OL(I,P,Y)}finally{UE=cx,ax.p=cn,Cn.T=ar}}vS=1,$P(),BP(),kP()}}function $P(){if(vS===1){vS=0;var I=LT,P=PA,Y=(P.flags&13878)!==0;if((P.subtreeFlags&13878)!==0||Y){Y=Cn.T,Cn.T=null;var ar=ax.p;ax.p=2;var cn=UE;UE|=4;try{yP(P,I);var ex=$I,cx=SD(I.containerInfo),bx=ex.focusedElem,Ox=ex.selectionRange;if(cx!==bx&&bx&&bx.ownerDocument&&bD(bx.ownerDocument.documentElement,bx)){if(Ox!==null&&sR(bx)){var Hx=Ox.start,eE=Ox.end;if(eE===void 0&&(eE=Hx),"selectionStart"in bx)bx.selectionStart=Hx,bx.selectionEnd=Math.min(eE,bx.value.length);else{var aE=bx.ownerDocument||document,Zx=aE&&aE.defaultView||window;if(Zx.getSelection){var Yx=Zx.getSelection(),AE=bx.textContent.length,wE=Math.min(Ox.start,AE),HE=Ox.end===void 0?wE:Math.min(Ox.end,AE);!Yx.extend&&wE>HE&&(cx=HE,HE=wE,wE=cx);var Ux=ED(bx,wE),Bx=ED(bx,HE);if(Ux&&Bx&&(Yx.rangeCount!==1||Yx.anchorNode!==Ux.node||Yx.anchorOffset!==Ux.offset||Yx.focusNode!==Bx.node||Yx.focusOffset!==Bx.offset)){var Vx=aE.createRange();Vx.setStart(Ux.node,Ux.offset),Yx.removeAllRanges(),wE>HE?(Yx.addRange(Vx),Yx.extend(Bx.node,Bx.offset)):(Vx.setEnd(Bx.node,Bx.offset),Yx.addRange(Vx))}}}}for(aE=[],Yx=bx;Yx=Yx.parentNode;)Yx.nodeType===1&&aE.push({element:Yx,left:Yx.scrollLeft,top:Yx.scrollTop});for(typeof bx.focus=="function"&&bx.focus(),bx=0;bx<aE.length;bx++){var rE=aE[bx];rE.element.scrollLeft=rE.left,rE.element.scrollTop=rE.top}}FM=!!LI,$I=LI=null}finally{UE=cn,ax.p=ar,Cn.T=Y}}I.current=P,vS=2}}function BP(){if(vS===2){vS=0;var I=LT,P=PA,Y=(P.flags&8772)!==0;if((P.subtreeFlags&8772)!==0||Y){Y=Cn.T,Cn.T=null;var ar=ax.p;ax.p=2;var cn=UE;UE|=4;try{hP(I,P.alternate,P)}finally{UE=cn,ax.p=ar,Cn.T=Y}}vS=3}}function kP(){if(vS===4||vS===3){vS=0,Gx();var I=LT,P=PA,Y=NA,ar=TP;(P.subtreeFlags&10256)!==0||(P.flags&10256)!==0?vS=5:(vS=0,PA=LT=null,FP(I,I.pendingLanes));var cn=I.pendingLanes;if(cn===0&&(NT=null),Lx(Y),P=P.stateNode,yx&&typeof yx.onCommitFiberRoot=="function")try{yx.onCommitFiberRoot(fx,P,void 0,(P.current.flags&128)===128)}catch{}if(ar!==null){P=Cn.T,cn=ax.p,ax.p=2,Cn.T=null;try{for(var ex=I.onRecoverableError,cx=0;cx<ar.length;cx++){var bx=ar[cx];ex(bx.value,{componentStack:bx.stack})}}finally{Cn.T=P,ax.p=cn}}(NA&3)!==0&&CM(),aT(I),cn=I.pendingLanes,(Y&4194090)!==0&&(cn&42)!==0?I===_I?wC++:(wC=0,_I=I):wC=0,TC(0)}}function FP(I,P){(I.pooledCacheLanes&=P)===0&&(P=I.pooledCache,P!=null&&(I.pooledCache=null,iC(P)))}function CM(I){return $P(),BP(),kP(),qP()}function qP(){if(vS!==5)return!1;var I=LT,P=yI;yI=0;var Y=Lx(NA),ar=Cn.T,cn=ax.p;try{ax.p=32>Y?32:Y,Cn.T=null,Y=xI,xI=null;var ex=LT,cx=NA;if(vS=0,PA=LT=null,NA=0,(UE&6)!==0)throw Error(s(331));var bx=UE;if(UE|=4,SP(ex.current),_P(ex,ex.current,cx,Y),UE=bx,TC(0,!1),yx&&typeof yx.onPostCommitFiberRoot=="function")try{yx.onPostCommitFiberRoot(fx,ex)}catch{}return!0}finally{ax.p=cn,Cn.T=ar,FP(I,P)}}function UP(I,P,Y){P=zS(Y,P),P=QR(I.stateNode,P,2),I=TT(I,P,2),I!==null&&(fE(I,2),aT(I))}function jE(I,P,Y){if(I.tag===3)UP(I,I,Y);else for(;P!==null;){if(P.tag===3){UP(P,I,Y);break}else if(P.tag===1){var ar=P.stateNode;if(typeof P.type.getDerivedStateFromError=="function"||typeof ar.componentDidCatch=="function"&&(NT===null||!NT.has(ar))){I=zS(Y,I),Y=HO(2),ar=TT(P,Y,2),ar!==null&&(jO(Y,ar,P,I),fE(ar,2),aT(ar));break}}P=P.return}}function wI(I,P,Y){var ar=I.pingCache;if(ar===null){ar=I.pingCache=new LL;var cn=new Set;ar.set(P,cn)}else cn=ar.get(P),cn===void 0&&(cn=new Set,ar.set(P,cn));cn.has(Y)||(hI=!0,cn.add(Y),I=qL.bind(null,I,P,Y),P.then(I,I))}function qL(I,P,Y){var ar=I.pingCache;ar!==null&&ar.delete(P),I.pingedLanes|=I.suspendedLanes&Y,I.warmLanes&=~Y,ZE===I&&(LE&Y)===Y&&(eS===4||eS===3&&(LE&62914560)===LE&&300>qx()-vI?(UE&2)===0&&LA(I,0):gI|=Y,OA===LE&&(OA=0)),aT(I)}function GP(I,P){P===0&&(P=oE()),I=vA(I,P),I!==null&&(fE(I,P),aT(I))}function UL(I){var P=I.memoizedState,Y=0;P!==null&&(Y=P.retryLane),GP(I,Y)}function GL(I,P){var Y=0;switch(I.tag){case 13:var ar=I.stateNode,cn=I.memoizedState;cn!==null&&(Y=cn.retryLane);break;case 19:ar=I.stateNode;break;case 22:ar=I.stateNode._retryCache;break;default:throw Error(s(314))}ar!==null&&ar.delete(P),GP(I,Y)}function zL(I,P){return kx(I,P)}var MM=null,BA=null,TI=!1,RM=!1,AI=!1,oA=0;function aT(I){I!==BA&&I.next===null&&(BA===null?MM=BA=I:BA=BA.next=I),RM=!0,TI||(TI=!0,HL())}function TC(I,P){if(!AI&&RM){AI=!0;do for(var Y=!1,ar=MM;ar!==null;){if(I!==0){var cn=ar.pendingLanes;if(cn===0)var ex=0;else{var cx=ar.suspendedLanes,bx=ar.pingedLanes;ex=(1<<31-Nx(42|I)+1)-1,ex&=cn&~(cx&~bx),ex=ex&201326741?ex&201326741|1:ex?ex|2:0}ex!==0&&(Y=!0,jP(ar,ex))}else ex=LE,ex=hE(ar,ar===ZE?ex:0,ar.cancelPendingCommit!==null||ar.timeoutHandle!==-1),(ex&3)===0||gE(ar,ex)||(Y=!0,jP(ar,ex));ar=ar.next}while(Y);AI=!1}}function VL(){zP()}function zP(){RM=TI=!1;var I=0;oA!==0&&(JL()&&(I=oA),oA=0);for(var P=qx(),Y=null,ar=MM;ar!==null;){var cn=ar.next,ex=VP(ar,P);ex===0?(ar.next=null,Y===null?MM=cn:Y.next=cn,cn===null&&(BA=Y)):(Y=ar,(I!==0||(ex&3)!==0)&&(RM=!0)),ar=cn}TC(I)}function VP(I,P){for(var Y=I.suspendedLanes,ar=I.pingedLanes,cn=I.expirationTimes,ex=I.pendingLanes&-62914561;0<ex;){var cx=31-Nx(ex),bx=1<<cx,Ox=cn[cx];Ox===-1?((bx&Y)===0||(bx&ar)!==0)&&(cn[cx]=zx(bx,P)):Ox<=P&&(I.expiredLanes|=bx),ex&=~bx}if(P=ZE,Y=LE,Y=hE(I,I===P?Y:0,I.cancelPendingCommit!==null||I.timeoutHandle!==-1),ar=I.callbackNode,Y===0||I===P&&(GE===2||GE===9)||I.cancelPendingCommit!==null)return ar!==null&&ar!==null&&Rx(ar),I.callbackNode=null,I.callbackPriority=0;if((Y&3)===0||gE(I,Y)){if(P=Y&-Y,P===I.callbackPriority)return P;switch(ar!==null&&Rx(ar),Lx(Y)){case 2:case 8:Y=cE;break;case 32:Y=nE;break;case 268435456:Y=_E;break;default:Y=nE}return ar=HP.bind(null,I),Y=kx(Y,ar),I.callbackPriority=P,I.callbackNode=Y,P}return ar!==null&&ar!==null&&Rx(ar),I.callbackPriority=2,I.callbackNode=null,2}function HP(I,P){if(vS!==0&&vS!==5)return I.callbackNode=null,I.callbackPriority=0,null;var Y=I.callbackNode;if(CM()&&I.callbackNode!==Y)return null;var ar=LE;return ar=hE(I,I===ZE?ar:0,I.cancelPendingCommit!==null||I.timeoutHandle!==-1),ar===0?null:(CP(I,ar,P),VP(I,qx()),I.callbackNode!=null&&I.callbackNode===Y?HP.bind(null,I):null)}function jP(I,P){if(CM())return null;CP(I,P,!0)}function HL(){t$(function(){(UE&6)!==0?kx(lE,VL):zP()})}function CI(){return oA===0&&(oA=Xx()),oA}function ZP(I){return I==null||typeof I=="symbol"||typeof I=="boolean"?null:typeof I=="function"?I:qC(""+I)}function YP(I,P){var Y=P.ownerDocument.createElement("input");return Y.name=P.name,Y.value=P.value,I.id&&Y.setAttribute("form",I.id),P.parentNode.insertBefore(Y,P),I=new FormData(I),Y.parentNode.removeChild(Y),I}function jL(I,P,Y,ar,cn){if(P==="submit"&&Y&&Y.stateNode===cn){var ex=ZP((cn[yE]||null).action),cx=ar.submitter;cx&&(P=(P=cx[yE]||null)?ZP(P.formAction):cx.getAttribute("formAction"),P!==null&&(ex=P,cx=null));var bx=new VC("action","action",null,ar,cn);I.push({event:bx,listeners:[{instance:null,listener:function(){if(ar.defaultPrevented){if(oA!==0){var Ox=cx?YP(cn,cx):new FormData(cn);ZR(Y,{pending:!0,data:Ox,method:cn.method,action:ex},null,Ox)}}else typeof ex=="function"&&(bx.preventDefault(),Ox=cx?YP(cn,cx):new FormData(cn),ZR(Y,{pending:!0,data:Ox,method:cn.method,action:ex},ex,Ox))},currentTarget:cn}]})}}for(var MI=0;MI<fR.length;MI++){var RI=fR[MI],ZL=RI.toLowerCase(),YL=RI[0].toUpperCase()+RI.slice(1);QS(ZL,"on"+YL)}QS(AD,"onAnimationEnd"),QS(CD,"onAnimationIteration"),QS(MD,"onAnimationStart"),QS("dblclick","onDoubleClick"),QS("focusin","onFocus"),QS("focusout","onBlur"),QS(fL,"onTransitionRun"),QS(pL,"onTransitionStart"),QS(dL,"onTransitionCancel"),QS(RD,"onTransitionEnd"),$E("onMouseEnter",["mouseout","mouseover"]),$E("onMouseLeave",["mouseout","mouseover"]),$E("onPointerEnter",["pointerout","pointerover"]),$E("onPointerLeave",["pointerout","pointerover"]),qE("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qE("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qE("onBeforeInput",["compositionend","keypress","textInput","paste"]),qE("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qE("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qE("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var AC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(AC));function WP(I,P){P=(P&4)!==0;for(var Y=0;Y<I.length;Y++){var ar=I[Y],cn=ar.event;ar=ar.listeners;e:{var ex=void 0;if(P)for(var cx=ar.length-1;0<=cx;cx--){var bx=ar[cx],Ox=bx.instance,Hx=bx.currentTarget;if(bx=bx.listener,Ox!==ex&&cn.isPropagationStopped())break e;ex=bx,cn.currentTarget=Hx;try{ex(cn)}catch(eE){mM(eE)}cn.currentTarget=null,ex=Ox}else for(cx=0;cx<ar.length;cx++){if(bx=ar[cx],Ox=bx.instance,Hx=bx.currentTarget,bx=bx.listener,Ox!==ex&&cn.isPropagationStopped())break e;ex=bx,cn.currentTarget=Hx;try{ex(cn)}catch(eE){mM(eE)}cn.currentTarget=null,ex=Ox}}}}function PE(I,P){var Y=P[NE];Y===void 0&&(Y=P[NE]=new Set);var ar=I+"__bubble";Y.has(ar)||(XP(P,I,2,!1),Y.add(ar))}function II(I,P,Y){var ar=0;P&&(ar|=4),XP(Y,I,ar,P)}var IM="_reactListening"+Math.random().toString(36).slice(2);function DI(I){if(!I[IM]){I[IM]=!0,tS.forEach(function(Y){Y!=="selectionchange"&&(WL.has(Y)||II(Y,!1,I),II(Y,!0,I))});var P=I.nodeType===9?I:I.ownerDocument;P===null||P[IM]||(P[IM]=!0,II("selectionchange",!1,P))}}function XP(I,P,Y,ar){switch(_N(P)){case 2:var cn=b$;break;case 8:cn=S$;break;default:cn=jI}Y=cn.bind(null,P,Y,I),cn=void 0,!QM||P!=="touchstart"&&P!=="touchmove"&&P!=="wheel"||(cn=!0),ar?cn!==void 0?I.addEventListener(P,Y,{capture:!0,passive:cn}):I.addEventListener(P,Y,!0):cn!==void 0?I.addEventListener(P,Y,{passive:cn}):I.addEventListener(P,Y,!1)}function OI(I,P,Y,ar,cn){var ex=ar;if((P&1)===0&&(P&2)===0&&ar!==null)e:for(;;){if(ar===null)return;var cx=ar.tag;if(cx===3||cx===4){var bx=ar.stateNode.containerInfo;if(bx===cn)break;if(cx===4)for(cx=ar.return;cx!==null;){var Ox=cx.tag;if((Ox===3||Ox===4)&&cx.stateNode.containerInfo===cn)return;cx=cx.return}for(;bx!==null;){if(cx=hS(bx),cx===null)return;if(Ox=cx.tag,Ox===5||Ox===6||Ox===26||Ox===27){ar=ex=cx;continue e}bx=bx.parentNode}}ar=ar.return}rD(function(){var Hx=ex,eE=XM(Y),aE=[];e:{var Zx=ID.get(I);if(Zx!==void 0){var Yx=VC,AE=I;switch(I){case"keypress":if(GC(Y)===0)break e;case"keydown":case"keyup":Yx=zN;break;case"focusin":AE="focus",Yx=rR;break;case"focusout":AE="blur",Yx=rR;break;case"beforeblur":case"afterblur":Yx=rR;break;case"click":if(Y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Yx=aD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Yx=DN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Yx=jN;break;case AD:case CD:case MD:Yx=NN;break;case RD:Yx=YN;break;case"scroll":case"scrollend":Yx=RN;break;case"wheel":Yx=XN;break;case"copy":case"cut":case"paste":Yx=$N;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Yx=sD;break;case"toggle":case"beforetoggle":Yx=QN}var wE=(P&4)!==0,HE=!wE&&(I==="scroll"||I==="scrollend"),Ux=wE?Zx!==null?Zx+"Capture":null:Zx;wE=[];for(var Bx=Hx,Vx;Bx!==null;){var rE=Bx;if(Vx=rE.stateNode,rE=rE.tag,rE!==5&&rE!==26&&rE!==27||Vx===null||Ux===null||(rE=HA(Bx,Ux),rE!=null&&wE.push(CC(Bx,rE,Vx))),HE)break;Bx=Bx.return}0<wE.length&&(Zx=new Yx(Zx,AE,null,Y,eE),aE.push({event:Zx,listeners:wE}))}}if((P&7)===0){e:{if(Zx=I==="mouseover"||I==="pointerover",Yx=I==="mouseout"||I==="pointerout",Zx&&Y!==WM&&(AE=Y.relatedTarget||Y.fromElement)&&(hS(AE)||AE[CE]))break e;if((Yx||Zx)&&(Zx=eE.window===eE?eE:(Zx=eE.ownerDocument)?Zx.defaultView||Zx.parentWindow:window,Yx?(AE=Y.relatedTarget||Y.toElement,Yx=Hx,AE=AE?hS(AE):null,AE!==null&&(HE=u(AE),wE=AE.tag,AE!==HE||wE!==5&&wE!==27&&wE!==6)&&(AE=null)):(Yx=null,AE=Hx),Yx!==AE)){if(wE=aD,rE="onMouseLeave",Ux="onMouseEnter",Bx="mouse",(I==="pointerout"||I==="pointerover")&&(wE=sD,rE="onPointerLeave",Ux="onPointerEnter",Bx="pointer"),HE=Yx==null?Zx:bE(Yx),Vx=AE==null?Zx:bE(AE),Zx=new wE(rE,Bx+"leave",Yx,Y,eE),Zx.target=HE,Zx.relatedTarget=Vx,rE=null,hS(eE)===Hx&&(wE=new wE(Ux,Bx+"enter",AE,Y,eE),wE.target=Vx,wE.relatedTarget=HE,rE=wE),HE=rE,Yx&&AE)t:{for(wE=Yx,Ux=AE,Bx=0,Vx=wE;Vx;Vx=kA(Vx))Bx++;for(Vx=0,rE=Ux;rE;rE=kA(rE))Vx++;for(;0<Bx-Vx;)wE=kA(wE),Bx--;for(;0<Vx-Bx;)Ux=kA(Ux),Vx--;for(;Bx--;){if(wE===Ux||Ux!==null&&wE===Ux.alternate)break t;wE=kA(wE),Ux=kA(Ux)}wE=null}else wE=null;Yx!==null&&KP(aE,Zx,Yx,wE,!1),AE!==null&&HE!==null&&KP(aE,HE,AE,wE,!0)}}e:{if(Zx=Hx?bE(Hx):window,Yx=Zx.nodeName&&Zx.nodeName.toLowerCase(),Yx==="select"||Yx==="input"&&Zx.type==="file")var xE=gD;else if(dD(Zx))if(mD)xE=lL;else{xE=oL;var DE=aL}else Yx=Zx.nodeName,!Yx||Yx.toLowerCase()!=="input"||Zx.type!=="checkbox"&&Zx.type!=="radio"?Hx&&YM(Hx.elementType)&&(xE=gD):xE=sL;if(xE&&(xE=xE(I,Hx))){hD(aE,xE,Y,eE);break e}DE&&DE(I,Zx,Hx),I==="focusout"&&Hx&&Zx.type==="number"&&Hx.memoizedProps.value!=null&&ZM(Zx,"number",Zx.value)}switch(DE=Hx?bE(Hx):window,I){case"focusin":(dD(DE)||DE.contentEditable==="true")&&(hA=DE,lR=Hx,JA=null);break;case"focusout":JA=lR=hA=null;break;case"mousedown":uR=!0;break;case"contextmenu":case"mouseup":case"dragend":uR=!1,wD(aE,Y,eE);break;case"selectionchange":if(cL)break;case"keydown":case"keyup":wD(aE,Y,eE)}var EE;if(iR)e:{switch(I){case"compositionstart":var TE="onCompositionStart";break e;case"compositionend":TE="onCompositionEnd";break e;case"compositionupdate":TE="onCompositionUpdate";break e}TE=void 0}else dA?fD(I,Y)&&(TE="onCompositionEnd"):I==="keydown"&&Y.keyCode===229&&(TE="onCompositionStart");TE&&(lD&&Y.locale!=="ko"&&(dA||TE!=="onCompositionStart"?TE==="onCompositionEnd"&&dA&&(EE=nD()):(ET=eE,JM="value"in ET?ET.value:ET.textContent,dA=!0)),DE=DM(Hx,TE),0<DE.length&&(TE=new oD(TE,I,null,Y,eE),aE.push({event:TE,listeners:DE}),EE?TE.data=EE:(EE=pD(Y),EE!==null&&(TE.data=EE)))),(EE=eL?tL(I,Y):rL(I,Y))&&(TE=DM(Hx,"onBeforeInput"),0<TE.length&&(DE=new oD("onBeforeInput","beforeinput",null,Y,eE),aE.push({event:DE,listeners:TE}),DE.data=EE)),jL(aE,I,Hx,Y,eE)}WP(aE,P)})}function CC(I,P,Y){return{instance:I,listener:P,currentTarget:Y}}function DM(I,P){for(var Y=P+"Capture",ar=[];I!==null;){var cn=I,ex=cn.stateNode;if(cn=cn.tag,cn!==5&&cn!==26&&cn!==27||ex===null||(cn=HA(I,Y),cn!=null&&ar.unshift(CC(I,cn,ex)),cn=HA(I,P),cn!=null&&ar.push(CC(I,cn,ex))),I.tag===3)return ar;I=I.return}return[]}function kA(I){if(I===null)return null;do I=I.return;while(I&&I.tag!==5&&I.tag!==27);return I||null}function KP(I,P,Y,ar,cn){for(var ex=P._reactName,cx=[];Y!==null&&Y!==ar;){var bx=Y,Ox=bx.alternate,Hx=bx.stateNode;if(bx=bx.tag,Ox!==null&&Ox===ar)break;bx!==5&&bx!==26&&bx!==27||Hx===null||(Ox=Hx,cn?(Hx=HA(Y,ex),Hx!=null&&cx.unshift(CC(Y,Hx,Ox))):cn||(Hx=HA(Y,ex),Hx!=null&&cx.push(CC(Y,Hx,Ox)))),Y=Y.return}cx.length!==0&&I.push({event:P,listeners:cx})}var XL=/\r\n?/g,KL=/\u0000|\uFFFD/g;function QP(I){return(typeof I=="string"?I:""+I).replace(XL,`
`).replace(KL,"")}function JP(I,P){return P=QP(P),QP(I)===P}function OM(){}function VE(I,P,Y,ar,cn,ex){switch(Y){case"children":typeof ar=="string"?P==="body"||P==="textarea"&&ar===""||cA(I,ar):(typeof ar=="number"||typeof ar=="bigint")&&P!=="body"&&cA(I,""+ar);break;case"className":XS(I,"class",ar);break;case"tabIndex":XS(I,"tabindex",ar);break;case"dir":case"role":case"viewBox":case"width":case"height":XS(I,Y,ar);break;case"style":eD(I,ar,ex);break;case"data":if(P!=="object"){XS(I,"data",ar);break}case"src":case"href":if(ar===""&&(P!=="a"||Y!=="href")){I.removeAttribute(Y);break}if(ar==null||typeof ar=="function"||typeof ar=="symbol"||typeof ar=="boolean"){I.removeAttribute(Y);break}ar=qC(""+ar),I.setAttribute(Y,ar);break;case"action":case"formAction":if(typeof ar=="function"){I.setAttribute(Y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ex=="function"&&(Y==="formAction"?(P!=="input"&&VE(I,P,"name",cn.name,cn,null),VE(I,P,"formEncType",cn.formEncType,cn,null),VE(I,P,"formMethod",cn.formMethod,cn,null),VE(I,P,"formTarget",cn.formTarget,cn,null)):(VE(I,P,"encType",cn.encType,cn,null),VE(I,P,"method",cn.method,cn,null),VE(I,P,"target",cn.target,cn,null)));if(ar==null||typeof ar=="symbol"||typeof ar=="boolean"){I.removeAttribute(Y);break}ar=qC(""+ar),I.setAttribute(Y,ar);break;case"onClick":ar!=null&&(I.onclick=OM);break;case"onScroll":ar!=null&&PE("scroll",I);break;case"onScrollEnd":ar!=null&&PE("scrollend",I);break;case"dangerouslySetInnerHTML":if(ar!=null){if(typeof ar!="object"||!("__html"in ar))throw Error(s(61));if(Y=ar.__html,Y!=null){if(cn.children!=null)throw Error(s(60));I.innerHTML=Y}}break;case"multiple":I.multiple=ar&&typeof ar!="function"&&typeof ar!="symbol";break;case"muted":I.muted=ar&&typeof ar!="function"&&typeof ar!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(ar==null||typeof ar=="function"||typeof ar=="boolean"||typeof ar=="symbol"){I.removeAttribute("xlink:href");break}Y=qC(""+ar),I.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":ar!=null&&typeof ar!="function"&&typeof ar!="symbol"?I.setAttribute(Y,""+ar):I.removeAttribute(Y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":ar&&typeof ar!="function"&&typeof ar!="symbol"?I.setAttribute(Y,""):I.removeAttribute(Y);break;case"capture":case"download":ar===!0?I.setAttribute(Y,""):ar!==!1&&ar!=null&&typeof ar!="function"&&typeof ar!="symbol"?I.setAttribute(Y,ar):I.removeAttribute(Y);break;case"cols":case"rows":case"size":case"span":ar!=null&&typeof ar!="function"&&typeof ar!="symbol"&&!isNaN(ar)&&1<=ar?I.setAttribute(Y,ar):I.removeAttribute(Y);break;case"rowSpan":case"start":ar==null||typeof ar=="function"||typeof ar=="symbol"||isNaN(ar)?I.removeAttribute(Y):I.setAttribute(Y,ar);break;case"popover":PE("beforetoggle",I),PE("toggle",I),gS(I,"popover",ar);break;case"xlinkActuate":iS(I,"http://www.w3.org/1999/xlink","xlink:actuate",ar);break;case"xlinkArcrole":iS(I,"http://www.w3.org/1999/xlink","xlink:arcrole",ar);break;case"xlinkRole":iS(I,"http://www.w3.org/1999/xlink","xlink:role",ar);break;case"xlinkShow":iS(I,"http://www.w3.org/1999/xlink","xlink:show",ar);break;case"xlinkTitle":iS(I,"http://www.w3.org/1999/xlink","xlink:title",ar);break;case"xlinkType":iS(I,"http://www.w3.org/1999/xlink","xlink:type",ar);break;case"xmlBase":iS(I,"http://www.w3.org/XML/1998/namespace","xml:base",ar);break;case"xmlLang":iS(I,"http://www.w3.org/XML/1998/namespace","xml:lang",ar);break;case"xmlSpace":iS(I,"http://www.w3.org/XML/1998/namespace","xml:space",ar);break;case"is":gS(I,"is",ar);break;case"innerText":case"textContent":break;default:(!(2<Y.length)||Y[0]!=="o"&&Y[0]!=="O"||Y[1]!=="n"&&Y[1]!=="N")&&(Y=CN.get(Y)||Y,gS(I,Y,ar))}}function NI(I,P,Y,ar,cn,ex){switch(Y){case"style":eD(I,ar,ex);break;case"dangerouslySetInnerHTML":if(ar!=null){if(typeof ar!="object"||!("__html"in ar))throw Error(s(61));if(Y=ar.__html,Y!=null){if(cn.children!=null)throw Error(s(60));I.innerHTML=Y}}break;case"children":typeof ar=="string"?cA(I,ar):(typeof ar=="number"||typeof ar=="bigint")&&cA(I,""+ar);break;case"onScroll":ar!=null&&PE("scroll",I);break;case"onScrollEnd":ar!=null&&PE("scrollend",I);break;case"onClick":ar!=null&&(I.onclick=OM);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!WE.hasOwnProperty(Y))e:{if(Y[0]==="o"&&Y[1]==="n"&&(cn=Y.endsWith("Capture"),P=Y.slice(2,cn?Y.length-7:void 0),ex=I[yE]||null,ex=ex!=null?ex[Y]:null,typeof ex=="function"&&I.removeEventListener(P,ex,cn),typeof ar=="function")){typeof ex!="function"&&ex!==null&&(Y in I?I[Y]=null:I.hasAttribute(Y)&&I.removeAttribute(Y)),I.addEventListener(P,ar,cn);break e}Y in I?I[Y]=ar:ar===!0?I.setAttribute(Y,""):gS(I,Y,ar)}}}function yS(I,P,Y){switch(P){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":PE("error",I),PE("load",I);var ar=!1,cn=!1,ex;for(ex in Y)if(Y.hasOwnProperty(ex)){var cx=Y[ex];if(cx!=null)switch(ex){case"src":ar=!0;break;case"srcSet":cn=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,P));default:VE(I,P,ex,cx,Y,null)}}cn&&VE(I,P,"srcSet",Y.srcSet,Y,null),ar&&VE(I,P,"src",Y.src,Y,null);return;case"input":PE("invalid",I);var bx=ex=cx=cn=null,Ox=null,Hx=null;for(ar in Y)if(Y.hasOwnProperty(ar)){var eE=Y[ar];if(eE!=null)switch(ar){case"name":cn=eE;break;case"type":cx=eE;break;case"checked":Ox=eE;break;case"defaultChecked":Hx=eE;break;case"value":ex=eE;break;case"defaultValue":bx=eE;break;case"children":case"dangerouslySetInnerHTML":if(eE!=null)throw Error(s(137,P));break;default:VE(I,P,ar,eE,Y,null)}}VA(I,ex,bx,Ox,Hx,cx,cn,!1),sA(I);return;case"select":PE("invalid",I),ar=cx=ex=null;for(cn in Y)if(Y.hasOwnProperty(cn)&&(bx=Y[cn],bx!=null))switch(cn){case"value":ex=bx;break;case"defaultValue":cx=bx;break;case"multiple":ar=bx;default:VE(I,P,cn,bx,Y,null)}P=ex,Y=cx,I.multiple=!!ar,P!=null?uA(I,!!ar,P,!1):Y!=null&&uA(I,!!ar,Y,!0);return;case"textarea":PE("invalid",I),ex=cn=ar=null;for(cx in Y)if(Y.hasOwnProperty(cx)&&(bx=Y[cx],bx!=null))switch(cx){case"value":ar=bx;break;case"defaultValue":cn=bx;break;case"children":ex=bx;break;case"dangerouslySetInnerHTML":if(bx!=null)throw Error(s(91));break;default:VE(I,P,cx,bx,Y,null)}QI(I,ar,cn,ex),sA(I);return;case"option":for(Ox in Y)if(Y.hasOwnProperty(Ox)&&(ar=Y[Ox],ar!=null))switch(Ox){case"selected":I.selected=ar&&typeof ar!="function"&&typeof ar!="symbol";break;default:VE(I,P,Ox,ar,Y,null)}return;case"dialog":PE("beforetoggle",I),PE("toggle",I),PE("cancel",I),PE("close",I);break;case"iframe":case"object":PE("load",I);break;case"video":case"audio":for(ar=0;ar<AC.length;ar++)PE(AC[ar],I);break;case"image":PE("error",I),PE("load",I);break;case"details":PE("toggle",I);break;case"embed":case"source":case"link":PE("error",I),PE("load",I);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Hx in Y)if(Y.hasOwnProperty(Hx)&&(ar=Y[Hx],ar!=null))switch(Hx){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,P));default:VE(I,P,Hx,ar,Y,null)}return;default:if(YM(P)){for(eE in Y)Y.hasOwnProperty(eE)&&(ar=Y[eE],ar!==void 0&&NI(I,P,eE,ar,Y,void 0));return}}for(bx in Y)Y.hasOwnProperty(bx)&&(ar=Y[bx],ar!=null&&VE(I,P,bx,ar,Y,null))}function QL(I,P,Y,ar){switch(P){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var cn=null,ex=null,cx=null,bx=null,Ox=null,Hx=null,eE=null;for(Yx in Y){var aE=Y[Yx];if(Y.hasOwnProperty(Yx)&&aE!=null)switch(Yx){case"checked":break;case"value":break;case"defaultValue":Ox=aE;default:ar.hasOwnProperty(Yx)||VE(I,P,Yx,null,ar,aE)}}for(var Zx in ar){var Yx=ar[Zx];if(aE=Y[Zx],ar.hasOwnProperty(Zx)&&(Yx!=null||aE!=null))switch(Zx){case"type":ex=Yx;break;case"name":cn=Yx;break;case"checked":Hx=Yx;break;case"defaultChecked":eE=Yx;break;case"value":cx=Yx;break;case"defaultValue":bx=Yx;break;case"children":case"dangerouslySetInnerHTML":if(Yx!=null)throw Error(s(137,P));break;default:Yx!==aE&&VE(I,P,Zx,Yx,ar,aE)}}jM(I,cx,bx,Ox,Hx,eE,ex,cn);return;case"select":Yx=cx=bx=Zx=null;for(ex in Y)if(Ox=Y[ex],Y.hasOwnProperty(ex)&&Ox!=null)switch(ex){case"value":break;case"multiple":Yx=Ox;default:ar.hasOwnProperty(ex)||VE(I,P,ex,null,ar,Ox)}for(cn in ar)if(ex=ar[cn],Ox=Y[cn],ar.hasOwnProperty(cn)&&(ex!=null||Ox!=null))switch(cn){case"value":Zx=ex;break;case"defaultValue":bx=ex;break;case"multiple":cx=ex;default:ex!==Ox&&VE(I,P,cn,ex,ar,Ox)}P=bx,Y=cx,ar=Yx,Zx!=null?uA(I,!!Y,Zx,!1):!!ar!=!!Y&&(P!=null?uA(I,!!Y,P,!0):uA(I,!!Y,Y?[]:"",!1));return;case"textarea":Yx=Zx=null;for(bx in Y)if(cn=Y[bx],Y.hasOwnProperty(bx)&&cn!=null&&!ar.hasOwnProperty(bx))switch(bx){case"value":break;case"children":break;default:VE(I,P,bx,null,ar,cn)}for(cx in ar)if(cn=ar[cx],ex=Y[cx],ar.hasOwnProperty(cx)&&(cn!=null||ex!=null))switch(cx){case"value":Zx=cn;break;case"defaultValue":Yx=cn;break;case"children":break;case"dangerouslySetInnerHTML":if(cn!=null)throw Error(s(91));break;default:cn!==ex&&VE(I,P,cx,cn,ar,ex)}KI(I,Zx,Yx);return;case"option":for(var AE in Y)if(Zx=Y[AE],Y.hasOwnProperty(AE)&&Zx!=null&&!ar.hasOwnProperty(AE))switch(AE){case"selected":I.selected=!1;break;default:VE(I,P,AE,null,ar,Zx)}for(Ox in ar)if(Zx=ar[Ox],Yx=Y[Ox],ar.hasOwnProperty(Ox)&&Zx!==Yx&&(Zx!=null||Yx!=null))switch(Ox){case"selected":I.selected=Zx&&typeof Zx!="function"&&typeof Zx!="symbol";break;default:VE(I,P,Ox,Zx,ar,Yx)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wE in Y)Zx=Y[wE],Y.hasOwnProperty(wE)&&Zx!=null&&!ar.hasOwnProperty(wE)&&VE(I,P,wE,null,ar,Zx);for(Hx in ar)if(Zx=ar[Hx],Yx=Y[Hx],ar.hasOwnProperty(Hx)&&Zx!==Yx&&(Zx!=null||Yx!=null))switch(Hx){case"children":case"dangerouslySetInnerHTML":if(Zx!=null)throw Error(s(137,P));break;default:VE(I,P,Hx,Zx,ar,Yx)}return;default:if(YM(P)){for(var HE in Y)Zx=Y[HE],Y.hasOwnProperty(HE)&&Zx!==void 0&&!ar.hasOwnProperty(HE)&&NI(I,P,HE,void 0,ar,Zx);for(eE in ar)Zx=ar[eE],Yx=Y[eE],!ar.hasOwnProperty(eE)||Zx===Yx||Zx===void 0&&Yx===void 0||NI(I,P,eE,Zx,ar,Yx);return}}for(var Ux in Y)Zx=Y[Ux],Y.hasOwnProperty(Ux)&&Zx!=null&&!ar.hasOwnProperty(Ux)&&VE(I,P,Ux,null,ar,Zx);for(aE in ar)Zx=ar[aE],Yx=Y[aE],!ar.hasOwnProperty(aE)||Zx===Yx||Zx==null&&Yx==null||VE(I,P,aE,Zx,ar,Yx)}var LI=null,$I=null;function PM(I){return I.nodeType===9?I:I.ownerDocument}function eN(I){switch(I){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tN(I,P){if(I===0)switch(P){case"svg":return 1;case"math":return 2;default:return 0}return I===1&&P==="foreignObject"?0:I}function BI(I,P){return I==="textarea"||I==="noscript"||typeof P.children=="string"||typeof P.children=="number"||typeof P.children=="bigint"||typeof P.dangerouslySetInnerHTML=="object"&&P.dangerouslySetInnerHTML!==null&&P.dangerouslySetInnerHTML.__html!=null}var kI=null;function JL(){var I=window.event;return I&&I.type==="popstate"?I===kI?!1:(kI=I,!0):(kI=null,!1)}var rN=typeof setTimeout=="function"?setTimeout:void 0,e$=typeof clearTimeout=="function"?clearTimeout:void 0,nN=typeof Promise=="function"?Promise:void 0,t$=typeof queueMicrotask=="function"?queueMicrotask:typeof nN<"u"?function(I){return nN.resolve(null).then(I).catch(r$)}:rN;function r$(I){setTimeout(function(){throw I})}function BT(I){return I==="head"}function iN(I,P){var Y=P,ar=0,cn=0;do{var ex=Y.nextSibling;if(I.removeChild(Y),ex&&ex.nodeType===8)if(Y=ex.data,Y==="/$"){if(0<ar&&8>ar){Y=ar;var cx=I.ownerDocument;if(Y&1&&MC(cx.documentElement),Y&2&&MC(cx.body),Y&4)for(Y=cx.head,MC(Y),cx=Y.firstChild;cx;){var bx=cx.nextSibling,Ox=cx.nodeName;cx[YE]||Ox==="SCRIPT"||Ox==="STYLE"||Ox==="LINK"&&cx.rel.toLowerCase()==="stylesheet"||Y.removeChild(cx),cx=bx}}if(cn===0){I.removeChild(ex),$C(P);return}cn--}else Y==="$"||Y==="$?"||Y==="$!"?cn++:ar=Y.charCodeAt(0)-48;else ar=0;Y=ex}while(Y);$C(P)}function FI(I){var P=I.firstChild;for(P&&P.nodeType===10&&(P=P.nextSibling);P;){var Y=P;switch(P=P.nextSibling,Y.nodeName){case"HTML":case"HEAD":case"BODY":FI(Y),xS(Y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(Y.rel.toLowerCase()==="stylesheet")continue}I.removeChild(Y)}}function n$(I,P,Y,ar){for(;I.nodeType===1;){var cn=Y;if(I.nodeName.toLowerCase()!==P.toLowerCase()){if(!ar&&(I.nodeName!=="INPUT"||I.type!=="hidden"))break}else if(ar){if(!I[YE])switch(P){case"meta":if(!I.hasAttribute("itemprop"))break;return I;case"link":if(ex=I.getAttribute("rel"),ex==="stylesheet"&&I.hasAttribute("data-precedence"))break;if(ex!==cn.rel||I.getAttribute("href")!==(cn.href==null||cn.href===""?null:cn.href)||I.getAttribute("crossorigin")!==(cn.crossOrigin==null?null:cn.crossOrigin)||I.getAttribute("title")!==(cn.title==null?null:cn.title))break;return I;case"style":if(I.hasAttribute("data-precedence"))break;return I;case"script":if(ex=I.getAttribute("src"),(ex!==(cn.src==null?null:cn.src)||I.getAttribute("type")!==(cn.type==null?null:cn.type)||I.getAttribute("crossorigin")!==(cn.crossOrigin==null?null:cn.crossOrigin))&&ex&&I.hasAttribute("async")&&!I.hasAttribute("itemprop"))break;return I;default:return I}}else if(P==="input"&&I.type==="hidden"){var ex=cn.name==null?null:""+cn.name;if(cn.type==="hidden"&&I.getAttribute("name")===ex)return I}else return I;if(I=eT(I.nextSibling),I===null)break}return null}function i$(I,P,Y){if(P==="")return null;for(;I.nodeType!==3;)if((I.nodeType!==1||I.nodeName!=="INPUT"||I.type!=="hidden")&&!Y||(I=eT(I.nextSibling),I===null))return null;return I}function qI(I){return I.data==="$!"||I.data==="$?"&&I.ownerDocument.readyState==="complete"}function a$(I,P){var Y=I.ownerDocument;if(I.data!=="$?"||Y.readyState==="complete")P();else{var ar=function(){P(),Y.removeEventListener("DOMContentLoaded",ar)};Y.addEventListener("DOMContentLoaded",ar),I._reactRetry=ar}}function eT(I){for(;I!=null;I=I.nextSibling){var P=I.nodeType;if(P===1||P===3)break;if(P===8){if(P=I.data,P==="$"||P==="$!"||P==="$?"||P==="F!"||P==="F")break;if(P==="/$")return null}}return I}var UI=null;function aN(I){I=I.previousSibling;for(var P=0;I;){if(I.nodeType===8){var Y=I.data;if(Y==="$"||Y==="$!"||Y==="$?"){if(P===0)return I;P--}else Y==="/$"&&P++}I=I.previousSibling}return null}function oN(I,P,Y){switch(P=PM(Y),I){case"html":if(I=P.documentElement,!I)throw Error(s(452));return I;case"head":if(I=P.head,!I)throw Error(s(453));return I;case"body":if(I=P.body,!I)throw Error(s(454));return I;default:throw Error(s(451))}}function MC(I){for(var P=I.attributes;P.length;)I.removeAttributeNode(P[0]);xS(I)}var WS=new Map,sN=new Set;function NM(I){return typeof I.getRootNode=="function"?I.getRootNode():I.nodeType===9?I:I.ownerDocument}var _T=ax.d;ax.d={f:o$,r:s$,D:l$,C:u$,L:c$,m:f$,X:d$,S:p$,M:h$};function o$(){var I=_T.f(),P=TM();return I||P}function s$(I){var P=bS(I);P!==null&&P.tag===5&&P.type==="form"?AO(P):_T.r(I)}var FA=typeof document>"u"?null:document;function lN(I,P,Y){var ar=FA;if(ar&&typeof P=="string"&&P){var cn=GS(P);cn='link[rel="'+I+'"][href="'+cn+'"]',typeof Y=="string"&&(cn+='[crossorigin="'+Y+'"]'),sN.has(cn)||(sN.add(cn),I={rel:I,crossOrigin:Y,href:P},ar.querySelector(cn)===null&&(P=ar.createElement("link"),yS(P,"link",I),SE(P),ar.head.appendChild(P)))}}function l$(I){_T.D(I),lN("dns-prefetch",I,null)}function u$(I,P){_T.C(I,P),lN("preconnect",I,P)}function c$(I,P,Y){_T.L(I,P,Y);var ar=FA;if(ar&&I&&P){var cn='link[rel="preload"][as="'+GS(P)+'"]';P==="image"&&Y&&Y.imageSrcSet?(cn+='[imagesrcset="'+GS(Y.imageSrcSet)+'"]',typeof Y.imageSizes=="string"&&(cn+='[imagesizes="'+GS(Y.imageSizes)+'"]')):cn+='[href="'+GS(I)+'"]';var ex=cn;switch(P){case"style":ex=qA(I);break;case"script":ex=UA(I)}WS.has(ex)||(I=_({rel:"preload",href:P==="image"&&Y&&Y.imageSrcSet?void 0:I,as:P},Y),WS.set(ex,I),ar.querySelector(cn)!==null||P==="style"&&ar.querySelector(RC(ex))||P==="script"&&ar.querySelector(IC(ex))||(P=ar.createElement("link"),yS(P,"link",I),SE(P),ar.head.appendChild(P)))}}function f$(I,P){_T.m(I,P);var Y=FA;if(Y&&I){var ar=P&&typeof P.as=="string"?P.as:"script",cn='link[rel="modulepreload"][as="'+GS(ar)+'"][href="'+GS(I)+'"]',ex=cn;switch(ar){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ex=UA(I)}if(!WS.has(ex)&&(I=_({rel:"modulepreload",href:I},P),WS.set(ex,I),Y.querySelector(cn)===null)){switch(ar){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(Y.querySelector(IC(ex)))return}ar=Y.createElement("link"),yS(ar,"link",I),SE(ar),Y.head.appendChild(ar)}}}function p$(I,P,Y){_T.S(I,P,Y);var ar=FA;if(ar&&I){var cn=uE(ar).hoistableStyles,ex=qA(I);P=P||"default";var cx=cn.get(ex);if(!cx){var bx={loading:0,preload:null};if(cx=ar.querySelector(RC(ex)))bx.loading=5;else{I=_({rel:"stylesheet",href:I,"data-precedence":P},Y),(Y=WS.get(ex))&&GI(I,Y);var Ox=cx=ar.createElement("link");SE(Ox),yS(Ox,"link",I),Ox._p=new Promise(function(Hx,eE){Ox.onload=Hx,Ox.onerror=eE}),Ox.addEventListener("load",function(){bx.loading|=1}),Ox.addEventListener("error",function(){bx.loading|=2}),bx.loading|=4,LM(cx,P,ar)}cx={type:"stylesheet",instance:cx,count:1,state:bx},cn.set(ex,cx)}}}function d$(I,P){_T.X(I,P);var Y=FA;if(Y&&I){var ar=uE(Y).hoistableScripts,cn=UA(I),ex=ar.get(cn);ex||(ex=Y.querySelector(IC(cn)),ex||(I=_({src:I,async:!0},P),(P=WS.get(cn))&&zI(I,P),ex=Y.createElement("script"),SE(ex),yS(ex,"link",I),Y.head.appendChild(ex)),ex={type:"script",instance:ex,count:1,state:null},ar.set(cn,ex))}}function h$(I,P){_T.M(I,P);var Y=FA;if(Y&&I){var ar=uE(Y).hoistableScripts,cn=UA(I),ex=ar.get(cn);ex||(ex=Y.querySelector(IC(cn)),ex||(I=_({src:I,async:!0,type:"module"},P),(P=WS.get(cn))&&zI(I,P),ex=Y.createElement("script"),SE(ex),yS(ex,"link",I),Y.head.appendChild(ex)),ex={type:"script",instance:ex,count:1,state:null},ar.set(cn,ex))}}function uN(I,P,Y,ar){var cn=(cn=mx.current)?NM(cn):null;if(!cn)throw Error(s(446));switch(I){case"meta":case"title":return null;case"style":return typeof Y.precedence=="string"&&typeof Y.href=="string"?(P=qA(Y.href),Y=uE(cn).hoistableStyles,ar=Y.get(P),ar||(ar={type:"style",instance:null,count:0,state:null},Y.set(P,ar)),ar):{type:"void",instance:null,count:0,state:null};case"link":if(Y.rel==="stylesheet"&&typeof Y.href=="string"&&typeof Y.precedence=="string"){I=qA(Y.href);var ex=uE(cn).hoistableStyles,cx=ex.get(I);if(cx||(cn=cn.ownerDocument||cn,cx={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ex.set(I,cx),(ex=cn.querySelector(RC(I)))&&!ex._p&&(cx.instance=ex,cx.state.loading=5),WS.has(I)||(Y={rel:"preload",as:"style",href:Y.href,crossOrigin:Y.crossOrigin,integrity:Y.integrity,media:Y.media,hrefLang:Y.hrefLang,referrerPolicy:Y.referrerPolicy},WS.set(I,Y),ex||g$(cn,I,Y,cx.state))),P&&ar===null)throw Error(s(528,""));return cx}if(P&&ar!==null)throw Error(s(529,""));return null;case"script":return P=Y.async,Y=Y.src,typeof Y=="string"&&P&&typeof P!="function"&&typeof P!="symbol"?(P=UA(Y),Y=uE(cn).hoistableScripts,ar=Y.get(P),ar||(ar={type:"script",instance:null,count:0,state:null},Y.set(P,ar)),ar):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,I))}}function qA(I){return'href="'+GS(I)+'"'}function RC(I){return'link[rel="stylesheet"]['+I+"]"}function cN(I){return _({},I,{"data-precedence":I.precedence,precedence:null})}function g$(I,P,Y,ar){I.querySelector('link[rel="preload"][as="style"]['+P+"]")?ar.loading=1:(P=I.createElement("link"),ar.preload=P,P.addEventListener("load",function(){return ar.loading|=1}),P.addEventListener("error",function(){return ar.loading|=2}),yS(P,"link",Y),SE(P),I.head.appendChild(P))}function UA(I){return'[src="'+GS(I)+'"]'}function IC(I){return"script[async]"+I}function fN(I,P,Y){if(P.count++,P.instance===null)switch(P.type){case"style":var ar=I.querySelector('style[data-href~="'+GS(Y.href)+'"]');if(ar)return P.instance=ar,SE(ar),ar;var cn=_({},Y,{"data-href":Y.href,"data-precedence":Y.precedence,href:null,precedence:null});return ar=(I.ownerDocument||I).createElement("style"),SE(ar),yS(ar,"style",cn),LM(ar,Y.precedence,I),P.instance=ar;case"stylesheet":cn=qA(Y.href);var ex=I.querySelector(RC(cn));if(ex)return P.state.loading|=4,P.instance=ex,SE(ex),ex;ar=cN(Y),(cn=WS.get(cn))&&GI(ar,cn),ex=(I.ownerDocument||I).createElement("link"),SE(ex);var cx=ex;return cx._p=new Promise(function(bx,Ox){cx.onload=bx,cx.onerror=Ox}),yS(ex,"link",ar),P.state.loading|=4,LM(ex,Y.precedence,I),P.instance=ex;case"script":return ex=UA(Y.src),(cn=I.querySelector(IC(ex)))?(P.instance=cn,SE(cn),cn):(ar=Y,(cn=WS.get(ex))&&(ar=_({},Y),zI(ar,cn)),I=I.ownerDocument||I,cn=I.createElement("script"),SE(cn),yS(cn,"link",ar),I.head.appendChild(cn),P.instance=cn);case"void":return null;default:throw Error(s(443,P.type))}else P.type==="stylesheet"&&(P.state.loading&4)===0&&(ar=P.instance,P.state.loading|=4,LM(ar,Y.precedence,I));return P.instance}function LM(I,P,Y){for(var ar=Y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),cn=ar.length?ar[ar.length-1]:null,ex=cn,cx=0;cx<ar.length;cx++){var bx=ar[cx];if(bx.dataset.precedence===P)ex=bx;else if(ex!==cn)break}ex?ex.parentNode.insertBefore(I,ex.nextSibling):(P=Y.nodeType===9?Y.head:Y,P.insertBefore(I,P.firstChild))}function GI(I,P){I.crossOrigin==null&&(I.crossOrigin=P.crossOrigin),I.referrerPolicy==null&&(I.referrerPolicy=P.referrerPolicy),I.title==null&&(I.title=P.title)}function zI(I,P){I.crossOrigin==null&&(I.crossOrigin=P.crossOrigin),I.referrerPolicy==null&&(I.referrerPolicy=P.referrerPolicy),I.integrity==null&&(I.integrity=P.integrity)}var $M=null;function pN(I,P,Y){if($M===null){var ar=new Map,cn=$M=new Map;cn.set(Y,ar)}else cn=$M,ar=cn.get(Y),ar||(ar=new Map,cn.set(Y,ar));if(ar.has(I))return ar;for(ar.set(I,null),Y=Y.getElementsByTagName(I),cn=0;cn<Y.length;cn++){var ex=Y[cn];if(!(ex[YE]||ex[mE]||I==="link"&&ex.getAttribute("rel")==="stylesheet")&&ex.namespaceURI!=="http://www.w3.org/2000/svg"){var cx=ex.getAttribute(P)||"";cx=I+cx;var bx=ar.get(cx);bx?bx.push(ex):ar.set(cx,[ex])}}return ar}function dN(I,P,Y){I=I.ownerDocument||I,I.head.insertBefore(Y,P==="title"?I.querySelector("head > title"):null)}function m$(I,P,Y){if(Y===1||P.itemProp!=null)return!1;switch(I){case"meta":case"title":return!0;case"style":if(typeof P.precedence!="string"||typeof P.href!="string"||P.href==="")break;return!0;case"link":if(typeof P.rel!="string"||typeof P.href!="string"||P.href===""||P.onLoad||P.onError)break;switch(P.rel){case"stylesheet":return I=P.disabled,typeof P.precedence=="string"&&I==null;default:return!0}case"script":if(P.async&&typeof P.async!="function"&&typeof P.async!="symbol"&&!P.onLoad&&!P.onError&&P.src&&typeof P.src=="string")return!0}return!1}function hN(I){return!(I.type==="stylesheet"&&(I.state.loading&3)===0)}var DC=null;function v$(){}function y$(I,P,Y){if(DC===null)throw Error(s(475));var ar=DC;if(P.type==="stylesheet"&&(typeof Y.media!="string"||matchMedia(Y.media).matches!==!1)&&(P.state.loading&4)===0){if(P.instance===null){var cn=qA(Y.href),ex=I.querySelector(RC(cn));if(ex){I=ex._p,I!==null&&typeof I=="object"&&typeof I.then=="function"&&(ar.count++,ar=BM.bind(ar),I.then(ar,ar)),P.state.loading|=4,P.instance=ex,SE(ex);return}ex=I.ownerDocument||I,Y=cN(Y),(cn=WS.get(cn))&&GI(Y,cn),ex=ex.createElement("link"),SE(ex);var cx=ex;cx._p=new Promise(function(bx,Ox){cx.onload=bx,cx.onerror=Ox}),yS(ex,"link",Y),P.instance=ex}ar.stylesheets===null&&(ar.stylesheets=new Map),ar.stylesheets.set(P,I),(I=P.state.preload)&&(P.state.loading&3)===0&&(ar.count++,P=BM.bind(ar),I.addEventListener("load",P),I.addEventListener("error",P))}}function x$(){if(DC===null)throw Error(s(475));var I=DC;return I.stylesheets&&I.count===0&&VI(I,I.stylesheets),0<I.count?function(P){var Y=setTimeout(function(){if(I.stylesheets&&VI(I,I.stylesheets),I.unsuspend){var ar=I.unsuspend;I.unsuspend=null,ar()}},6e4);return I.unsuspend=P,function(){I.unsuspend=null,clearTimeout(Y)}}:null}function BM(){if(this.count--,this.count===0){if(this.stylesheets)VI(this,this.stylesheets);else if(this.unsuspend){var I=this.unsuspend;this.unsuspend=null,I()}}}var kM=null;function VI(I,P){I.stylesheets=null,I.unsuspend!==null&&(I.count++,kM=new Map,P.forEach(_$,I),kM=null,BM.call(I))}function _$(I,P){if(!(P.state.loading&4)){var Y=kM.get(I);if(Y)var ar=Y.get(null);else{Y=new Map,kM.set(I,Y);for(var cn=I.querySelectorAll("link[data-precedence],style[data-precedence]"),ex=0;ex<cn.length;ex++){var cx=cn[ex];(cx.nodeName==="LINK"||cx.getAttribute("media")!=="not all")&&(Y.set(cx.dataset.precedence,cx),ar=cx)}ar&&Y.set(null,ar)}cn=P.instance,cx=cn.getAttribute("data-precedence"),ex=Y.get(cx)||ar,ex===ar&&Y.set(null,cn),Y.set(cx,cn),this.count++,ar=BM.bind(this),cn.addEventListener("load",ar),cn.addEventListener("error",ar),ex?ex.parentNode.insertBefore(cn,ex.nextSibling):(I=I.nodeType===9?I.head:I,I.insertBefore(cn,I.firstChild)),P.state.loading|=4}}var OC={$$typeof:j,Provider:null,Consumer:null,_currentValue:sx,_currentValue2:sx,_threadCount:0};function E$(I,P,Y,ar,cn,ex,cx,bx){this.tag=1,this.containerInfo=I,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jx(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jx(0),this.hiddenUpdates=Jx(null),this.identifierPrefix=ar,this.onUncaughtError=cn,this.onCaughtError=ex,this.onRecoverableError=cx,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=bx,this.incompleteTransitions=new Map}function gN(I,P,Y,ar,cn,ex,cx,bx,Ox,Hx,eE,aE){return I=new E$(I,P,Y,cx,bx,Ox,Hx,aE),P=1,ex===!0&&(P|=24),ex=LS(3,null,null,P),I.current=ex,ex.stateNode=I,P=SR(),P.refCount++,I.pooledCache=P,P.refCount++,ex.memoizedState={element:ar,isDehydrated:Y,cache:P},CR(ex),I}function mN(I){return I?(I=yA,I):yA}function vN(I,P,Y,ar,cn,ex){cn=mN(cn),ar.context===null?ar.context=cn:ar.pendingContext=cn,ar=wT(P),ar.payload={element:Y},ex=ex===void 0?null:ex,ex!==null&&(ar.callback=ex),Y=TT(I,ar,P),Y!==null&&(qS(Y,I,P),lC(Y,I,P))}function yN(I,P){if(I=I.memoizedState,I!==null&&I.dehydrated!==null){var Y=I.retryLane;I.retryLane=Y!==0&&Y<P?Y:P}}function HI(I,P){yN(I,P),(I=I.alternate)&&yN(I,P)}function xN(I){if(I.tag===13){var P=vA(I,67108864);P!==null&&qS(P,I,67108864),HI(I,67108864)}}var FM=!0;function b$(I,P,Y,ar){var cn=Cn.T;Cn.T=null;var ex=ax.p;try{ax.p=2,jI(I,P,Y,ar)}finally{ax.p=ex,Cn.T=cn}}function S$(I,P,Y,ar){var cn=Cn.T;Cn.T=null;var ex=ax.p;try{ax.p=8,jI(I,P,Y,ar)}finally{ax.p=ex,Cn.T=cn}}function jI(I,P,Y,ar){if(FM){var cn=ZI(ar);if(cn===null)OI(I,P,ar,qM,Y),EN(I,ar);else if(T$(cn,I,P,Y,ar))ar.stopPropagation();else if(EN(I,ar),P&4&&-1<w$.indexOf(I)){for(;cn!==null;){var ex=bS(cn);if(ex!==null)switch(ex.tag){case 3:if(ex=ex.stateNode,ex.current.memoizedState.isDehydrated){var cx=tE(ex.pendingLanes);if(cx!==0){var bx=ex;for(bx.pendingLanes|=2,bx.entangledLanes|=2;cx;){var Ox=1<<31-Nx(cx);bx.entanglements[1]|=Ox,cx&=~Ox}aT(ex),(UE&6)===0&&(SM=qx()+500,TC(0))}}break;case 13:bx=vA(ex,2),bx!==null&&qS(bx,ex,2),TM(),HI(ex,2)}if(ex=ZI(ar),ex===null&&OI(I,P,ar,qM,Y),ex===cn)break;cn=ex}cn!==null&&ar.stopPropagation()}else OI(I,P,ar,null,Y)}}function ZI(I){return I=XM(I),YI(I)}var qM=null;function YI(I){if(qM=null,I=hS(I),I!==null){var P=u(I);if(P===null)I=null;else{var Y=P.tag;if(Y===13){if(I=c(P),I!==null)return I;I=null}else if(Y===3){if(P.stateNode.current.memoizedState.isDehydrated)return P.tag===3?P.stateNode.containerInfo:null;I=null}else P!==I&&(I=null)}}return qM=I,null}function _N(I){switch(I){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dx()){case lE:return 2;case cE:return 8;case nE:case iE:return 32;case _E:return 268435456;default:return 32}default:return 32}}var WI=!1,kT=null,FT=null,qT=null,PC=new Map,NC=new Map,UT=[],w$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function EN(I,P){switch(I){case"focusin":case"focusout":kT=null;break;case"dragenter":case"dragleave":FT=null;break;case"mouseover":case"mouseout":qT=null;break;case"pointerover":case"pointerout":PC.delete(P.pointerId);break;case"gotpointercapture":case"lostpointercapture":NC.delete(P.pointerId)}}function LC(I,P,Y,ar,cn,ex){return I===null||I.nativeEvent!==ex?(I={blockedOn:P,domEventName:Y,eventSystemFlags:ar,nativeEvent:ex,targetContainers:[cn]},P!==null&&(P=bS(P),P!==null&&xN(P)),I):(I.eventSystemFlags|=ar,P=I.targetContainers,cn!==null&&P.indexOf(cn)===-1&&P.push(cn),I)}function T$(I,P,Y,ar,cn){switch(P){case"focusin":return kT=LC(kT,I,P,Y,ar,cn),!0;case"dragenter":return FT=LC(FT,I,P,Y,ar,cn),!0;case"mouseover":return qT=LC(qT,I,P,Y,ar,cn),!0;case"pointerover":var ex=cn.pointerId;return PC.set(ex,LC(PC.get(ex)||null,I,P,Y,ar,cn)),!0;case"gotpointercapture":return ex=cn.pointerId,NC.set(ex,LC(NC.get(ex)||null,I,P,Y,ar,cn)),!0}return!1}function bN(I){var P=hS(I.target);if(P!==null){var Y=u(P);if(Y!==null){if(P=Y.tag,P===13){if(P=c(Y),P!==null){I.blockedOn=P,dE(I.priority,function(){if(Y.tag===13){var ar=FS();ar=Mx(ar);var cn=vA(Y,ar);cn!==null&&qS(cn,Y,ar),HI(Y,ar)}});return}}else if(P===3&&Y.stateNode.current.memoizedState.isDehydrated){I.blockedOn=Y.tag===3?Y.stateNode.containerInfo:null;return}}}I.blockedOn=null}function UM(I){if(I.blockedOn!==null)return!1;for(var P=I.targetContainers;0<P.length;){var Y=ZI(I.nativeEvent);if(Y===null){Y=I.nativeEvent;var ar=new Y.constructor(Y.type,Y);WM=ar,Y.target.dispatchEvent(ar),WM=null}else return P=bS(Y),P!==null&&xN(P),I.blockedOn=Y,!1;P.shift()}return!0}function SN(I,P,Y){UM(I)&&Y.delete(P)}function A$(){WI=!1,kT!==null&&UM(kT)&&(kT=null),FT!==null&&UM(FT)&&(FT=null),qT!==null&&UM(qT)&&(qT=null),PC.forEach(SN),NC.forEach(SN)}function GM(I,P){I.blockedOn===P&&(I.blockedOn=null,WI||(WI=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,A$)))}var zM=null;function wN(I){zM!==I&&(zM=I,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){zM===I&&(zM=null);for(var P=0;P<I.length;P+=3){var Y=I[P],ar=I[P+1],cn=I[P+2];if(typeof ar!="function"){if(YI(ar||Y)===null)continue;break}var ex=bS(Y);ex!==null&&(I.splice(P,3),P-=3,ZR(ex,{pending:!0,data:cn,method:Y.method,action:ar},ar,cn))}}))}function $C(I){function P(Ox){return GM(Ox,I)}kT!==null&&GM(kT,I),FT!==null&&GM(FT,I),qT!==null&&GM(qT,I),PC.forEach(P),NC.forEach(P);for(var Y=0;Y<UT.length;Y++){var ar=UT[Y];ar.blockedOn===I&&(ar.blockedOn=null)}for(;0<UT.length&&(Y=UT[0],Y.blockedOn===null);)bN(Y),Y.blockedOn===null&&UT.shift();if(Y=(I.ownerDocument||I).$$reactFormReplay,Y!=null)for(ar=0;ar<Y.length;ar+=3){var cn=Y[ar],ex=Y[ar+1],cx=cn[yE]||null;if(typeof ex=="function")cx||wN(Y);else if(cx){var bx=null;if(ex&&ex.hasAttribute("formAction")){if(cn=ex,cx=ex[yE]||null)bx=cx.formAction;else if(YI(cn)!==null)continue}else bx=cx.action;typeof bx=="function"?Y[ar+1]=bx:(Y.splice(ar,3),ar-=3),wN(Y)}}}function XI(I){this._internalRoot=I}VM.prototype.render=XI.prototype.render=function(I){var P=this._internalRoot;if(P===null)throw Error(s(409));var Y=P.current,ar=FS();vN(Y,ar,I,P,null,null)},VM.prototype.unmount=XI.prototype.unmount=function(){var I=this._internalRoot;if(I!==null){this._internalRoot=null;var P=I.containerInfo;vN(I.current,2,null,I,null,null),TM(),P[CE]=null}};function VM(I){this._internalRoot=I}VM.prototype.unstable_scheduleHydration=function(I){if(I){var P=Kx();I={blockedOn:null,target:I,priority:P};for(var Y=0;Y<UT.length&&P!==0&&P<UT[Y].priority;Y++);UT.splice(Y,0,I),Y===0&&bN(I)}};var TN=n.version;if(TN!=="19.1.0")throw Error(s(527,TN,"19.1.0"));ax.findDOMNode=function(I){var P=I._reactInternals;if(P===void 0)throw typeof I.render=="function"?Error(s(188)):(I=Object.keys(I).join(","),Error(s(268,I)));return I=d(P),I=I!==null?x(I):null,I=I===null?null:I.stateNode,I};var C$={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Cn,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var HM=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!HM.isDisabled&&HM.supportsFiber)try{fx=HM.inject(C$),yx=HM}catch{}}return reactDomClient_production.createRoot=function(I,P){if(!l(I))throw Error(s(299));var Y=!1,ar="",cn=UO,ex=GO,cx=zO,bx=null;return P!=null&&(P.unstable_strictMode===!0&&(Y=!0),P.identifierPrefix!==void 0&&(ar=P.identifierPrefix),P.onUncaughtError!==void 0&&(cn=P.onUncaughtError),P.onCaughtError!==void 0&&(ex=P.onCaughtError),P.onRecoverableError!==void 0&&(cx=P.onRecoverableError),P.unstable_transitionCallbacks!==void 0&&(bx=P.unstable_transitionCallbacks)),P=gN(I,1,!1,null,null,Y,ar,cn,ex,cx,bx,null),I[CE]=P.current,DI(I),new XI(P)},reactDomClient_production.hydrateRoot=function(I,P,Y){if(!l(I))throw Error(s(299));var ar=!1,cn="",ex=UO,cx=GO,bx=zO,Ox=null,Hx=null;return Y!=null&&(Y.unstable_strictMode===!0&&(ar=!0),Y.identifierPrefix!==void 0&&(cn=Y.identifierPrefix),Y.onUncaughtError!==void 0&&(ex=Y.onUncaughtError),Y.onCaughtError!==void 0&&(cx=Y.onCaughtError),Y.onRecoverableError!==void 0&&(bx=Y.onRecoverableError),Y.unstable_transitionCallbacks!==void 0&&(Ox=Y.unstable_transitionCallbacks),Y.formState!==void 0&&(Hx=Y.formState)),P=gN(I,1,!0,P,Y??null,ar,cn,ex,cx,bx,Ox,Hx),P.context=mN(null),Y=P.current,ar=FS(),ar=Mx(ar),cn=wT(ar),cn.callback=null,TT(Y,cn,ar),Y=ar,P.current.lanes=Y,fE(P,Y),aT(P),I[CE]=P.current,DI(I),new VM(P)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(t){let n=t.length;for(;--n>=0;)t[n]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(t,n,a,s,l){this.static_tree=t,this.extra_bits=n,this.extra_base=a,this.elems=s,this.max_length=l,this.has_stree=t&&t.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}const d_code=t=>t<256?_dist_code[t]:_dist_code[256+(t>>>7)],put_short=(t,n)=>{t.pending_buf[t.pending++]=n&255,t.pending_buf[t.pending++]=n>>>8&255},send_bits=(t,n,a)=>{t.bi_valid>Buf_size-a?(t.bi_buf|=n<<t.bi_valid&65535,put_short(t,t.bi_buf),t.bi_buf=n>>Buf_size-t.bi_valid,t.bi_valid+=a-Buf_size):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=a)},send_code=(t,n,a)=>{send_bits(t,a[n*2],a[n*2+1])},bi_reverse=(t,n)=>{let a=0;do a|=t&1,t>>>=1,a<<=1;while(--n>0);return a>>>1},bi_flush=t=>{t.bi_valid===16?(put_short(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},gen_bitlen=(t,n)=>{const a=n.dyn_tree,s=n.max_code,l=n.stat_desc.static_tree,u=n.stat_desc.has_stree,c=n.stat_desc.extra_bits,p=n.stat_desc.extra_base,d=n.stat_desc.max_length;let x,_,S,T,A,R,D=0;for(T=0;T<=MAX_BITS$1;T++)t.bl_count[T]=0;for(a[t.heap[t.heap_max]*2+1]=0,x=t.heap_max+1;x<HEAP_SIZE$1;x++)_=t.heap[x],T=a[a[_*2+1]*2+1]+1,T>d&&(T=d,D++),a[_*2+1]=T,!(_>s)&&(t.bl_count[T]++,A=0,_>=p&&(A=c[_-p]),R=a[_*2],t.opt_len+=R*(T+A),u&&(t.static_len+=R*(l[_*2+1]+A)));if(D!==0){do{for(T=d-1;t.bl_count[T]===0;)T--;t.bl_count[T]--,t.bl_count[T+1]+=2,t.bl_count[d]--,D-=2}while(D>0);for(T=d;T!==0;T--)for(_=t.bl_count[T];_!==0;)S=t.heap[--x],!(S>s)&&(a[S*2+1]!==T&&(t.opt_len+=(T-a[S*2+1])*a[S*2],a[S*2+1]=T),_--)}},gen_codes=(t,n,a)=>{const s=new Array(MAX_BITS$1+1);let l=0,u,c;for(u=1;u<=MAX_BITS$1;u++)l=l+a[u-1]<<1,s[u]=l;for(c=0;c<=n;c++){let p=t[c*2+1];p!==0&&(t[c*2]=bi_reverse(s[p]++,p))}},tr_static_init=()=>{let t,n,a,s,l;const u=new Array(MAX_BITS$1+1);for(a=0,s=0;s<LENGTH_CODES$1-1;s++)for(base_length[s]=a,t=0;t<1<<extra_lbits[s];t++)_length_code[a++]=s;for(_length_code[a-1]=s,l=0,s=0;s<16;s++)for(base_dist[s]=l,t=0;t<1<<extra_dbits[s];t++)_dist_code[l++]=s;for(l>>=7;s<D_CODES$1;s++)for(base_dist[s]=l<<7,t=0;t<1<<extra_dbits[s]-7;t++)_dist_code[256+l++]=s;for(n=0;n<=MAX_BITS$1;n++)u[n]=0;for(t=0;t<=143;)static_ltree[t*2+1]=8,t++,u[8]++;for(;t<=255;)static_ltree[t*2+1]=9,t++,u[9]++;for(;t<=279;)static_ltree[t*2+1]=7,t++,u[7]++;for(;t<=287;)static_ltree[t*2+1]=8,t++,u[8]++;for(gen_codes(static_ltree,L_CODES$1+1,u),t=0;t<D_CODES$1;t++)static_dtree[t*2+1]=5,static_dtree[t*2]=bi_reverse(t,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=t=>{let n;for(n=0;n<L_CODES$1;n++)t.dyn_ltree[n*2]=0;for(n=0;n<D_CODES$1;n++)t.dyn_dtree[n*2]=0;for(n=0;n<BL_CODES$1;n++)t.bl_tree[n*2]=0;t.dyn_ltree[END_BLOCK*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},bi_windup=t=>{t.bi_valid>8?put_short(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},smaller=(t,n,a,s)=>{const l=n*2,u=a*2;return t[l]<t[u]||t[l]===t[u]&&s[n]<=s[a]},pqdownheap=(t,n,a)=>{const s=t.heap[a];let l=a<<1;for(;l<=t.heap_len&&(l<t.heap_len&&smaller(n,t.heap[l+1],t.heap[l],t.depth)&&l++,!smaller(n,s,t.heap[l],t.depth));)t.heap[a]=t.heap[l],a=l,l<<=1;t.heap[a]=s},compress_block=(t,n,a)=>{let s,l,u=0,c,p;if(t.sym_next!==0)do s=t.pending_buf[t.sym_buf+u++]&255,s+=(t.pending_buf[t.sym_buf+u++]&255)<<8,l=t.pending_buf[t.sym_buf+u++],s===0?send_code(t,l,n):(c=_length_code[l],send_code(t,c+LITERALS$1+1,n),p=extra_lbits[c],p!==0&&(l-=base_length[c],send_bits(t,l,p)),s--,c=d_code(s),send_code(t,c,a),p=extra_dbits[c],p!==0&&(s-=base_dist[c],send_bits(t,s,p)));while(u<t.sym_next);send_code(t,END_BLOCK,n)},build_tree=(t,n)=>{const a=n.dyn_tree,s=n.stat_desc.static_tree,l=n.stat_desc.has_stree,u=n.stat_desc.elems;let c,p,d=-1,x;for(t.heap_len=0,t.heap_max=HEAP_SIZE$1,c=0;c<u;c++)a[c*2]!==0?(t.heap[++t.heap_len]=d=c,t.depth[c]=0):a[c*2+1]=0;for(;t.heap_len<2;)x=t.heap[++t.heap_len]=d<2?++d:0,a[x*2]=1,t.depth[x]=0,t.opt_len--,l&&(t.static_len-=s[x*2+1]);for(n.max_code=d,c=t.heap_len>>1;c>=1;c--)pqdownheap(t,a,c);x=u;do c=t.heap[1],t.heap[1]=t.heap[t.heap_len--],pqdownheap(t,a,1),p=t.heap[1],t.heap[--t.heap_max]=c,t.heap[--t.heap_max]=p,a[x*2]=a[c*2]+a[p*2],t.depth[x]=(t.depth[c]>=t.depth[p]?t.depth[c]:t.depth[p])+1,a[c*2+1]=a[p*2+1]=x,t.heap[1]=x++,pqdownheap(t,a,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],gen_bitlen(t,n),gen_codes(a,d,t.bl_count)},scan_tree=(t,n,a)=>{let s,l=-1,u,c=n[0*2+1],p=0,d=7,x=4;for(c===0&&(d=138,x=3),n[(a+1)*2+1]=65535,s=0;s<=a;s++)u=c,c=n[(s+1)*2+1],!(++p<d&&u===c)&&(p<x?t.bl_tree[u*2]+=p:u!==0?(u!==l&&t.bl_tree[u*2]++,t.bl_tree[REP_3_6*2]++):p<=10?t.bl_tree[REPZ_3_10*2]++:t.bl_tree[REPZ_11_138*2]++,p=0,l=u,c===0?(d=138,x=3):u===c?(d=6,x=3):(d=7,x=4))},send_tree=(t,n,a)=>{let s,l=-1,u,c=n[0*2+1],p=0,d=7,x=4;for(c===0&&(d=138,x=3),s=0;s<=a;s++)if(u=c,c=n[(s+1)*2+1],!(++p<d&&u===c)){if(p<x)do send_code(t,u,t.bl_tree);while(--p!==0);else u!==0?(u!==l&&(send_code(t,u,t.bl_tree),p--),send_code(t,REP_3_6,t.bl_tree),send_bits(t,p-3,2)):p<=10?(send_code(t,REPZ_3_10,t.bl_tree),send_bits(t,p-3,3)):(send_code(t,REPZ_11_138,t.bl_tree),send_bits(t,p-11,7));p=0,l=u,c===0?(d=138,x=3):u===c?(d=6,x=3):(d=7,x=4)}},build_bl_tree=t=>{let n;for(scan_tree(t,t.dyn_ltree,t.l_desc.max_code),scan_tree(t,t.dyn_dtree,t.d_desc.max_code),build_tree(t,t.bl_desc),n=BL_CODES$1-1;n>=3&&t.bl_tree[bl_order[n]*2+1]===0;n--);return t.opt_len+=3*(n+1)+5+5+4,n},send_all_trees=(t,n,a,s)=>{let l;for(send_bits(t,n-257,5),send_bits(t,a-1,5),send_bits(t,s-4,4),l=0;l<s;l++)send_bits(t,t.bl_tree[bl_order[l]*2+1],3);send_tree(t,t.dyn_ltree,n-1),send_tree(t,t.dyn_dtree,a-1)},detect_data_type=t=>{let n=4093624447,a;for(a=0;a<=31;a++,n>>>=1)if(n&1&&t.dyn_ltree[a*2]!==0)return Z_BINARY;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return Z_TEXT;for(a=32;a<LITERALS$1;a++)if(t.dyn_ltree[a*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=t=>{static_init_done||(tr_static_init(),static_init_done=!0),t.l_desc=new TreeDesc(t.dyn_ltree,static_l_desc),t.d_desc=new TreeDesc(t.dyn_dtree,static_d_desc),t.bl_desc=new TreeDesc(t.bl_tree,static_bl_desc),t.bi_buf=0,t.bi_valid=0,init_block(t)},_tr_stored_block$1=(t,n,a,s)=>{send_bits(t,(STORED_BLOCK<<1)+(s?1:0),3),bi_windup(t),put_short(t,a),put_short(t,~a),a&&t.pending_buf.set(t.window.subarray(n,n+a),t.pending),t.pending+=a},_tr_align$1=t=>{send_bits(t,STATIC_TREES<<1,3),send_code(t,END_BLOCK,static_ltree),bi_flush(t)},_tr_flush_block$1=(t,n,a,s)=>{let l,u,c=0;t.level>0?(t.strm.data_type===Z_UNKNOWN$1&&(t.strm.data_type=detect_data_type(t)),build_tree(t,t.l_desc),build_tree(t,t.d_desc),c=build_bl_tree(t),l=t.opt_len+3+7>>>3,u=t.static_len+3+7>>>3,u<=l&&(l=u)):l=u=a+5,a+4<=l&&n!==-1?_tr_stored_block$1(t,n,a,s):t.strategy===Z_FIXED$1||u===l?(send_bits(t,(STATIC_TREES<<1)+(s?1:0),3),compress_block(t,static_ltree,static_dtree)):(send_bits(t,(DYN_TREES<<1)+(s?1:0),3),send_all_trees(t,t.l_desc.max_code+1,t.d_desc.max_code+1,c+1),compress_block(t,t.dyn_ltree,t.dyn_dtree)),init_block(t),s&&bi_windup(t)},_tr_tally$1=(t,n,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=n,t.pending_buf[t.sym_buf+t.sym_next++]=n>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,n===0?t.dyn_ltree[a*2]++:(t.matches++,n--,t.dyn_ltree[(_length_code[a]+LITERALS$1+1)*2]++,t.dyn_dtree[d_code(n)*2]++),t.sym_next===t.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(t,n,a,s)=>{let l=t&65535|0,u=t>>>16&65535|0,c=0;for(;a!==0;){c=a>2e3?2e3:a,a-=c;do l=l+n[s++]|0,u=u+l|0;while(--c);l%=65521,u%=65521}return l|u<<16|0};var adler32_1=adler32;const makeTable=()=>{let t,n=[];for(var a=0;a<256;a++){t=a;for(var s=0;s<8;s++)t=t&1?3988292384^t>>>1:t>>>1;n[a]=t}return n},crcTable=new Uint32Array(makeTable()),crc32=(t,n,a,s)=>{const l=crcTable,u=s+a;t^=-1;for(let c=s;c<u;c++)t=t>>>8^l[(t^n[c])&255];return t^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(t,n)=>(t.msg=messages[n],n),rank=t=>t*2-(t>4?9:0),zero=t=>{let n=t.length;for(;--n>=0;)t[n]=0},slide_hash=t=>{let n,a,s,l=t.w_size;n=t.hash_size,s=n;do a=t.head[--s],t.head[s]=a>=l?a-l:0;while(--n);n=l,s=n;do a=t.prev[--s],t.prev[s]=a>=l?a-l:0;while(--n)};let HASH_ZLIB=(t,n,a)=>(n<<t.hash_shift^a)&t.hash_mask,HASH=HASH_ZLIB;const flush_pending=t=>{const n=t.state;let a=n.pending;a>t.avail_out&&(a=t.avail_out),a!==0&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+a),t.next_out),t.next_out+=a,n.pending_out+=a,t.total_out+=a,t.avail_out-=a,n.pending-=a,n.pending===0&&(n.pending_out=0))},flush_block_only=(t,n)=>{_tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,flush_pending(t.strm)},put_byte=(t,n)=>{t.pending_buf[t.pending++]=n},putShortMSB=(t,n)=>{t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=n&255},read_buf=(t,n,a,s)=>{let l=t.avail_in;return l>s&&(l=s),l===0?0:(t.avail_in-=l,n.set(t.input.subarray(t.next_in,t.next_in+l),a),t.state.wrap===1?t.adler=adler32_1(t.adler,n,l,a):t.state.wrap===2&&(t.adler=crc32_1(t.adler,n,l,a)),t.next_in+=l,t.total_in+=l,l)},longest_match=(t,n)=>{let a=t.max_chain_length,s=t.strstart,l,u,c=t.prev_length,p=t.nice_match;const d=t.strstart>t.w_size-MIN_LOOKAHEAD?t.strstart-(t.w_size-MIN_LOOKAHEAD):0,x=t.window,_=t.w_mask,S=t.prev,T=t.strstart+MAX_MATCH;let A=x[s+c-1],R=x[s+c];t.prev_length>=t.good_match&&(a>>=2),p>t.lookahead&&(p=t.lookahead);do if(l=n,!(x[l+c]!==R||x[l+c-1]!==A||x[l]!==x[s]||x[++l]!==x[s+1])){s+=2,l++;do;while(x[++s]===x[++l]&&x[++s]===x[++l]&&x[++s]===x[++l]&&x[++s]===x[++l]&&x[++s]===x[++l]&&x[++s]===x[++l]&&x[++s]===x[++l]&&x[++s]===x[++l]&&s<T);if(u=MAX_MATCH-(T-s),s=T-MAX_MATCH,u>c){if(t.match_start=n,c=u,u>=p)break;A=x[s+c-1],R=x[s+c]}}while((n=S[n&_])>d&&--a!==0);return c<=t.lookahead?c:t.lookahead},fill_window=t=>{const n=t.w_size;let a,s,l;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=n+(n-MIN_LOOKAHEAD)&&(t.window.set(t.window.subarray(n,n+n-s),0),t.match_start-=n,t.strstart-=n,t.block_start-=n,t.insert>t.strstart&&(t.insert=t.strstart),slide_hash(t),s+=n),t.strm.avail_in===0)break;if(a=read_buf(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=a,t.lookahead+t.insert>=MIN_MATCH)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=HASH(t,t.ins_h,t.window[l+1]);t.insert&&(t.ins_h=HASH(t,t.ins_h,t.window[l+MIN_MATCH-1]),t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<MIN_MATCH)););}while(t.lookahead<MIN_LOOKAHEAD&&t.strm.avail_in!==0)},deflate_stored=(t,n)=>{let a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,s,l,u,c=0,p=t.strm.avail_in;do{if(s=65535,u=t.bi_valid+42>>3,t.strm.avail_out<u||(u=t.strm.avail_out-u,l=t.strstart-t.block_start,s>l+t.strm.avail_in&&(s=l+t.strm.avail_in),s>u&&(s=u),s<a&&(s===0&&n!==Z_FINISH$3||n===Z_NO_FLUSH$2||s!==l+t.strm.avail_in)))break;c=n===Z_FINISH$3&&s===l+t.strm.avail_in?1:0,_tr_stored_block(t,0,0,c),t.pending_buf[t.pending-4]=s,t.pending_buf[t.pending-3]=s>>8,t.pending_buf[t.pending-2]=~s,t.pending_buf[t.pending-1]=~s>>8,flush_pending(t.strm),l&&(l>s&&(l=s),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+l),t.strm.next_out),t.strm.next_out+=l,t.strm.avail_out-=l,t.strm.total_out+=l,t.block_start+=l,s-=l),s&&(read_buf(t.strm,t.strm.output,t.strm.next_out,s),t.strm.next_out+=s,t.strm.avail_out-=s,t.strm.total_out+=s)}while(c===0);return p-=t.strm.avail_in,p&&(p>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=p&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-p,t.strm.next_in),t.strstart),t.strstart+=p,t.insert+=p>t.w_size-t.insert?t.w_size-t.insert:p),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),c?BS_FINISH_DONE:n!==Z_NO_FLUSH$2&&n!==Z_FINISH$3&&t.strm.avail_in===0&&t.strstart===t.block_start?BS_BLOCK_DONE:(u=t.window_size-t.strstart,t.strm.avail_in>u&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,u+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),u>t.strm.avail_in&&(u=t.strm.avail_in),u&&(read_buf(t.strm,t.window,t.strstart,u),t.strstart+=u,t.insert+=u>t.w_size-t.insert?t.w_size-t.insert:u),t.high_water<t.strstart&&(t.high_water=t.strstart),u=t.bi_valid+42>>3,u=t.pending_buf_size-u>65535?65535:t.pending_buf_size-u,a=u>t.w_size?t.w_size:u,l=t.strstart-t.block_start,(l>=a||(l||n===Z_FINISH$3)&&n!==Z_NO_FLUSH$2&&t.strm.avail_in===0&&l<=u)&&(s=l>u?u:l,c=n===Z_FINISH$3&&t.strm.avail_in===0&&s===l?1:0,_tr_stored_block(t,t.block_start,s,c),t.block_start+=s,flush_pending(t.strm)),c?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(t,n)=>{let a,s;for(;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(a=0,t.lookahead>=MIN_MATCH&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),a!==0&&t.strstart-a<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,a)),t.match_length>=MIN_MATCH)if(s=_tr_tally(t,t.strstart-t.match_start,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=MIN_MATCH){t.match_length--;do t.strstart++,t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+1]);else s=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(s&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(t,n)=>{let a,s,l;for(;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(a=0,t.lookahead>=MIN_MATCH&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=MIN_MATCH-1,a!==0&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,a),t.match_length<=5&&(t.strategy===Z_FILTERED||t.match_length===MIN_MATCH&&t.strstart-t.match_start>4096)&&(t.match_length=MIN_MATCH-1)),t.prev_length>=MIN_MATCH&&t.match_length<=t.prev_length){l=t.strstart+t.lookahead-MIN_MATCH,s=_tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-MIN_MATCH),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=l&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=MIN_MATCH-1,t.strstart++,s&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}else if(t.match_available){if(s=_tr_tally(t,0,t.window[t.strstart-1]),s&&flush_block_only(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return BS_NEED_MORE}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(s=_tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(t,n)=>{let a,s,l,u;const c=t.window;for(;;){if(t.lookahead<=MAX_MATCH){if(fill_window(t),t.lookahead<=MAX_MATCH&&n===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=MIN_MATCH&&t.strstart>0&&(l=t.strstart-1,s=c[l],s===c[++l]&&s===c[++l]&&s===c[++l])){u=t.strstart+MAX_MATCH;do;while(s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&s===c[++l]&&l<u);t.match_length=MAX_MATCH-(u-l),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=MIN_MATCH?(a=_tr_tally(t,1,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=0,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(t,n)=>{let a;for(;;){if(t.lookahead===0&&(fill_window(t),t.lookahead===0)){if(n===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(t.match_length=0,a=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=0,n===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(t,n,a,s,l){this.good_length=t,this.max_lazy=n,this.nice_length=a,this.max_chain=s,this.func=l}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=t=>{t.window_size=2*t.w_size,zero(t.head),t.max_lazy_match=configuration_table[t.level].max_lazy,t.good_match=configuration_table[t.level].good_length,t.nice_match=configuration_table[t.level].nice_length,t.max_chain_length=configuration_table[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=MIN_MATCH-1,t.match_available=0,t.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.status!==INIT_STATE&&n.status!==GZIP_STATE&&n.status!==EXTRA_STATE&&n.status!==NAME_STATE&&n.status!==COMMENT_STATE&&n.status!==HCRC_STATE&&n.status!==BUSY_STATE&&n.status!==FINISH_STATE?1:0},deflateResetKeep=t=>{if(deflateStateCheck(t))return err(t,Z_STREAM_ERROR$2);t.total_in=t.total_out=0,t.data_type=Z_UNKNOWN;const n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?GZIP_STATE:n.wrap?INIT_STATE:BUSY_STATE,t.adler=n.wrap===2?0:1,n.last_flush=-2,_tr_init(n),Z_OK$3},deflateReset=t=>{const n=deflateResetKeep(t);return n===Z_OK$3&&lm_init(t.state),n},deflateSetHeader=(t,n)=>deflateStateCheck(t)||t.state.wrap!==2?Z_STREAM_ERROR$2:(t.state.gzhead=n,Z_OK$3),deflateInit2=(t,n,a,s,l,u)=>{if(!t)return Z_STREAM_ERROR$2;let c=1;if(n===Z_DEFAULT_COMPRESSION$1&&(n=6),s<0?(c=0,s=-s):s>15&&(c=2,s-=16),l<1||l>MAX_MEM_LEVEL||a!==Z_DEFLATED$2||s<8||s>15||n<0||n>9||u<0||u>Z_FIXED||s===8&&c!==1)return err(t,Z_STREAM_ERROR$2);s===8&&(s=9);const p=new DeflateState;return t.state=p,p.strm=t,p.status=INIT_STATE,p.wrap=c,p.gzhead=null,p.w_bits=s,p.w_size=1<<p.w_bits,p.w_mask=p.w_size-1,p.hash_bits=l+7,p.hash_size=1<<p.hash_bits,p.hash_mask=p.hash_size-1,p.hash_shift=~~((p.hash_bits+MIN_MATCH-1)/MIN_MATCH),p.window=new Uint8Array(p.w_size*2),p.head=new Uint16Array(p.hash_size),p.prev=new Uint16Array(p.w_size),p.lit_bufsize=1<<l+6,p.pending_buf_size=p.lit_bufsize*4,p.pending_buf=new Uint8Array(p.pending_buf_size),p.sym_buf=p.lit_bufsize,p.sym_end=(p.lit_bufsize-1)*3,p.level=n,p.strategy=u,p.method=a,deflateReset(t)},deflateInit=(t,n)=>deflateInit2(t,n,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(t,n)=>{if(deflateStateCheck(t)||n>Z_BLOCK$1||n<0)return t?err(t,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const a=t.state;if(!t.output||t.avail_in!==0&&!t.input||a.status===FINISH_STATE&&n!==Z_FINISH$3)return err(t,t.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const s=a.last_flush;if(a.last_flush=n,a.pending!==0){if(flush_pending(t),t.avail_out===0)return a.last_flush=-1,Z_OK$3}else if(t.avail_in===0&&rank(n)<=rank(s)&&n!==Z_FINISH$3)return err(t,Z_BUF_ERROR$1);if(a.status===FINISH_STATE&&t.avail_in!==0)return err(t,Z_BUF_ERROR$1);if(a.status===INIT_STATE&&a.wrap===0&&(a.status=BUSY_STATE),a.status===INIT_STATE){let l=Z_DEFLATED$2+(a.w_bits-8<<4)<<8,u=-1;if(a.strategy>=Z_HUFFMAN_ONLY||a.level<2?u=0:a.level<6?u=1:a.level===6?u=2:u=3,l|=u<<6,a.strstart!==0&&(l|=PRESET_DICT),l+=31-l%31,putShortMSB(a,l),a.strstart!==0&&(putShortMSB(a,t.adler>>>16),putShortMSB(a,t.adler&65535)),t.adler=1,a.status=BUSY_STATE,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3}if(a.status===GZIP_STATE){if(t.adler=0,put_byte(a,31),put_byte(a,139),put_byte(a,8),a.gzhead)put_byte(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),put_byte(a,a.gzhead.time&255),put_byte(a,a.gzhead.time>>8&255),put_byte(a,a.gzhead.time>>16&255),put_byte(a,a.gzhead.time>>24&255),put_byte(a,a.level===9?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,a.gzhead.os&255),a.gzhead.extra&&a.gzhead.extra.length&&(put_byte(a,a.gzhead.extra.length&255),put_byte(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=EXTRA_STATE;else if(put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,a.level===9?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,OS_CODE),a.status=BUSY_STATE,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3}if(a.status===EXTRA_STATE){if(a.gzhead.extra){let l=a.pending,u=(a.gzhead.extra.length&65535)-a.gzindex;for(;a.pending+u>a.pending_buf_size;){let p=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+p),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),a.gzindex+=p,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3;l=0,u-=p}let c=new Uint8Array(a.gzhead.extra);a.pending_buf.set(c.subarray(a.gzindex,a.gzindex+u),a.pending),a.pending+=u,a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),a.gzindex=0}a.status=NAME_STATE}if(a.status===NAME_STATE){if(a.gzhead.name){let l=a.pending,u;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3;l=0}a.gzindex<a.gzhead.name.length?u=a.gzhead.name.charCodeAt(a.gzindex++)&255:u=0,put_byte(a,u)}while(u!==0);a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),a.gzindex=0}a.status=COMMENT_STATE}if(a.status===COMMENT_STATE){if(a.gzhead.comment){let l=a.pending,u;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l)),flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3;l=0}a.gzindex<a.gzhead.comment.length?u=a.gzhead.comment.charCodeAt(a.gzindex++)&255:u=0,put_byte(a,u)}while(u!==0);a.gzhead.hcrc&&a.pending>l&&(t.adler=crc32_1(t.adler,a.pending_buf,a.pending-l,l))}a.status=HCRC_STATE}if(a.status===HCRC_STATE){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(flush_pending(t),a.pending!==0))return a.last_flush=-1,Z_OK$3;put_byte(a,t.adler&255),put_byte(a,t.adler>>8&255),t.adler=0}if(a.status=BUSY_STATE,flush_pending(t),a.pending!==0)return a.last_flush=-1,Z_OK$3}if(t.avail_in!==0||a.lookahead!==0||n!==Z_NO_FLUSH$2&&a.status!==FINISH_STATE){let l=a.level===0?deflate_stored(a,n):a.strategy===Z_HUFFMAN_ONLY?deflate_huff(a,n):a.strategy===Z_RLE?deflate_rle(a,n):configuration_table[a.level].func(a,n);if((l===BS_FINISH_STARTED||l===BS_FINISH_DONE)&&(a.status=FINISH_STATE),l===BS_NEED_MORE||l===BS_FINISH_STARTED)return t.avail_out===0&&(a.last_flush=-1),Z_OK$3;if(l===BS_BLOCK_DONE&&(n===Z_PARTIAL_FLUSH?_tr_align(a):n!==Z_BLOCK$1&&(_tr_stored_block(a,0,0,!1),n===Z_FULL_FLUSH$1&&(zero(a.head),a.lookahead===0&&(a.strstart=0,a.block_start=0,a.insert=0))),flush_pending(t),t.avail_out===0))return a.last_flush=-1,Z_OK$3}return n!==Z_FINISH$3?Z_OK$3:a.wrap<=0?Z_STREAM_END$3:(a.wrap===2?(put_byte(a,t.adler&255),put_byte(a,t.adler>>8&255),put_byte(a,t.adler>>16&255),put_byte(a,t.adler>>24&255),put_byte(a,t.total_in&255),put_byte(a,t.total_in>>8&255),put_byte(a,t.total_in>>16&255),put_byte(a,t.total_in>>24&255)):(putShortMSB(a,t.adler>>>16),putShortMSB(a,t.adler&65535)),flush_pending(t),a.wrap>0&&(a.wrap=-a.wrap),a.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=t=>{if(deflateStateCheck(t))return Z_STREAM_ERROR$2;const n=t.state.status;return t.state=null,n===BUSY_STATE?err(t,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(t,n)=>{let a=n.length;if(deflateStateCheck(t))return Z_STREAM_ERROR$2;const s=t.state,l=s.wrap;if(l===2||l===1&&s.status!==INIT_STATE||s.lookahead)return Z_STREAM_ERROR$2;if(l===1&&(t.adler=adler32_1(t.adler,n,a,0)),s.wrap=0,a>=s.w_size){l===0&&(zero(s.head),s.strstart=0,s.block_start=0,s.insert=0);let d=new Uint8Array(s.w_size);d.set(n.subarray(a-s.w_size,a),0),n=d,a=s.w_size}const u=t.avail_in,c=t.next_in,p=t.input;for(t.avail_in=a,t.next_in=0,t.input=n,fill_window(s);s.lookahead>=MIN_MATCH;){let d=s.strstart,x=s.lookahead-(MIN_MATCH-1);do s.ins_h=HASH(s,s.ins_h,s.window[d+MIN_MATCH-1]),s.prev[d&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=d,d++;while(--x);s.strstart=d,s.lookahead=MIN_MATCH-1,fill_window(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=MIN_MATCH-1,s.match_available=0,t.next_in=c,t.input=p,t.avail_in=u,s.wrap=l,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);var assign$1=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const a=n.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const s in a)_has(a,s)&&(t[s]=a[s])}}return t},flattenChunks=t=>{let n=0;for(let s=0,l=t.length;s<l;s++)n+=t[s].length;const a=new Uint8Array(n);for(let s=0,l=0,u=t.length;s<u;s++){let c=t[s];a.set(c,l),l+=c.length}return a},common$1={assign:assign$1,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let t=0;t<256;t++)_utf8len[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let n,a,s,l,u,c=t.length,p=0;for(l=0;l<c;l++)a=t.charCodeAt(l),(a&64512)===55296&&l+1<c&&(s=t.charCodeAt(l+1),(s&64512)===56320&&(a=65536+(a-55296<<10)+(s-56320),l++)),p+=a<128?1:a<2048?2:a<65536?3:4;for(n=new Uint8Array(p),u=0,l=0;u<p;l++)a=t.charCodeAt(l),(a&64512)===55296&&l+1<c&&(s=t.charCodeAt(l+1),(s&64512)===56320&&(a=65536+(a-55296<<10)+(s-56320),l++)),a<128?n[u++]=a:a<2048?(n[u++]=192|a>>>6,n[u++]=128|a&63):a<65536?(n[u++]=224|a>>>12,n[u++]=128|a>>>6&63,n[u++]=128|a&63):(n[u++]=240|a>>>18,n[u++]=128|a>>>12&63,n[u++]=128|a>>>6&63,n[u++]=128|a&63);return n};const buf2binstring=(t,n)=>{if(n<65534&&t.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));let a="";for(let s=0;s<n;s++)a+=String.fromCharCode(t[s]);return a};var buf2string=(t,n)=>{const a=n||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,n));let s,l;const u=new Array(a*2);for(l=0,s=0;s<a;){let c=t[s++];if(c<128){u[l++]=c;continue}let p=_utf8len[c];if(p>4){u[l++]=65533,s+=p-1;continue}for(c&=p===2?31:p===3?15:7;p>1&&s<a;)c=c<<6|t[s++]&63,p--;if(p>1){u[l++]=65533;continue}c<65536?u[l++]=c:(c-=65536,u[l++]=55296|c>>10&1023,u[l++]=56320|c&1023)}return buf2binstring(u,l)},utf8border=(t,n)=>{n=n||t.length,n>t.length&&(n=t.length);let a=n-1;for(;a>=0&&(t[a]&192)===128;)a--;return a<0||a===0?n:a+_utf8len[t[a]]>n?a:n},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(t){this.options=common$1.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},t||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let a=deflate_1$2.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(a!==Z_OK$2)throw new Error(messages[a]);if(n.header&&deflate_1$2.deflateSetHeader(this.strm,n.header),n.dictionary){let s;if(typeof n.dictionary=="string"?s=strings.string2buf(n.dictionary):toString$1.call(n.dictionary)==="[object ArrayBuffer]"?s=new Uint8Array(n.dictionary):s=n.dictionary,a=deflate_1$2.deflateSetDictionary(this.strm,s),a!==Z_OK$2)throw new Error(messages[a]);this._dict_set=!0}}Deflate$1.prototype.push=function(t,n){const a=this.strm,s=this.options.chunkSize;let l,u;if(this.ended)return!1;for(n===~~n?u=n:u=n===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof t=="string"?a.input=strings.string2buf(t):toString$1.call(t)==="[object ArrayBuffer]"?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){if(a.avail_out===0&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),(u===Z_SYNC_FLUSH||u===Z_FULL_FLUSH)&&a.avail_out<=6){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(l=deflate_1$2.deflate(a,u),l===Z_STREAM_END$2)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),l=deflate_1$2.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===Z_OK$2;if(a.avail_out===0){this.onData(a.output);continue}if(u>0&&a.next_out>0){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(a.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(t){this.chunks.push(t)};Deflate$1.prototype.onEnd=function(t){t===Z_OK$2&&(this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function deflate$1(t,n){const a=new Deflate$1(n);if(a.push(t,!0),a.err)throw a.msg||messages[a.err];return a.result}function deflateRaw$1(t,n){return n=n||{},n.raw=!0,deflate$1(t,n)}function gzip$1(t,n){return n=n||{},n.gzip=!0,deflate$1(t,n)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1};const BAD$1=16209,TYPE$1=16191;var inffast=function(n,a){let s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j,Z,W,J,en,tn,Ct,Q;const on=n.state;s=n.next_in,Ct=n.input,l=s+(n.avail_in-5),u=n.next_out,Q=n.output,c=u-(a-n.avail_out),p=u+(n.avail_out-257),d=on.dmax,x=on.wsize,_=on.whave,S=on.wnext,T=on.window,A=on.hold,R=on.bits,D=on.lencode,O=on.distcode,F=(1<<on.lenbits)-1,z=(1<<on.distbits)-1;e:do{R<15&&(A+=Ct[s++]<<R,R+=8,A+=Ct[s++]<<R,R+=8),j=D[A&F];t:for(;;){if(Z=j>>>24,A>>>=Z,R-=Z,Z=j>>>16&255,Z===0)Q[u++]=j&65535;else if(Z&16){W=j&65535,Z&=15,Z&&(R<Z&&(A+=Ct[s++]<<R,R+=8),W+=A&(1<<Z)-1,A>>>=Z,R-=Z),R<15&&(A+=Ct[s++]<<R,R+=8,A+=Ct[s++]<<R,R+=8),j=O[A&z];r:for(;;){if(Z=j>>>24,A>>>=Z,R-=Z,Z=j>>>16&255,Z&16){if(J=j&65535,Z&=15,R<Z&&(A+=Ct[s++]<<R,R+=8,R<Z&&(A+=Ct[s++]<<R,R+=8)),J+=A&(1<<Z)-1,J>d){n.msg="invalid distance too far back",on.mode=BAD$1;break e}if(A>>>=Z,R-=Z,Z=u-c,J>Z){if(Z=J-Z,Z>_&&on.sane){n.msg="invalid distance too far back",on.mode=BAD$1;break e}if(en=0,tn=T,S===0){if(en+=x-Z,Z<W){W-=Z;do Q[u++]=T[en++];while(--Z);en=u-J,tn=Q}}else if(S<Z){if(en+=x+S-Z,Z-=S,Z<W){W-=Z;do Q[u++]=T[en++];while(--Z);if(en=0,S<W){Z=S,W-=Z;do Q[u++]=T[en++];while(--Z);en=u-J,tn=Q}}}else if(en+=S-Z,Z<W){W-=Z;do Q[u++]=T[en++];while(--Z);en=u-J,tn=Q}for(;W>2;)Q[u++]=tn[en++],Q[u++]=tn[en++],Q[u++]=tn[en++],W-=3;W&&(Q[u++]=tn[en++],W>1&&(Q[u++]=tn[en++]))}else{en=u-J;do Q[u++]=Q[en++],Q[u++]=Q[en++],Q[u++]=Q[en++],W-=3;while(W>2);W&&(Q[u++]=Q[en++],W>1&&(Q[u++]=Q[en++]))}}else if((Z&64)===0){j=O[(j&65535)+(A&(1<<Z)-1)];continue r}else{n.msg="invalid distance code",on.mode=BAD$1;break e}break}}else if((Z&64)===0){j=D[(j&65535)+(A&(1<<Z)-1)];continue t}else if(Z&32){on.mode=TYPE$1;break e}else{n.msg="invalid literal/length code",on.mode=BAD$1;break e}break}}while(s<l&&u<p);W=R>>3,s-=W,R-=W<<3,A&=(1<<R)-1,n.next_in=s,n.next_out=u,n.avail_in=s<l?5+(l-s):5-(s-l),n.avail_out=u<p?257+(p-u):257-(u-p),on.hold=A,on.bits=R};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(t,n,a,s,l,u,c,p)=>{const d=p.bits;let x=0,_=0,S=0,T=0,A=0,R=0,D=0,O=0,F=0,z=0,j,Z,W,J,en,tn=null,Ct;const Q=new Uint16Array(MAXBITS+1),on=new Uint16Array(MAXBITS+1);let gn=null,In,dn,ix;for(x=0;x<=MAXBITS;x++)Q[x]=0;for(_=0;_<s;_++)Q[n[a+_]]++;for(A=d,T=MAXBITS;T>=1&&Q[T]===0;T--);if(A>T&&(A=T),T===0)return l[u++]=1<<24|64<<16|0,l[u++]=1<<24|64<<16|0,p.bits=1,0;for(S=1;S<T&&Q[S]===0;S++);for(A<S&&(A=S),O=1,x=1;x<=MAXBITS;x++)if(O<<=1,O-=Q[x],O<0)return-1;if(O>0&&(t===CODES$1||T!==1))return-1;for(on[1]=0,x=1;x<MAXBITS;x++)on[x+1]=on[x]+Q[x];for(_=0;_<s;_++)n[a+_]!==0&&(c[on[n[a+_]]++]=_);if(t===CODES$1?(tn=gn=c,Ct=20):t===LENS$1?(tn=lbase,gn=lext,Ct=257):(tn=dbase,gn=dext,Ct=0),z=0,_=0,x=S,en=u,R=A,D=0,W=-1,F=1<<A,J=F-1,t===LENS$1&&F>ENOUGH_LENS$1||t===DISTS$1&&F>ENOUGH_DISTS$1)return 1;for(;;){In=x-D,c[_]+1<Ct?(dn=0,ix=c[_]):c[_]>=Ct?(dn=gn[c[_]-Ct],ix=tn[c[_]-Ct]):(dn=96,ix=0),j=1<<x-D,Z=1<<R,S=Z;do Z-=j,l[en+(z>>D)+Z]=In<<24|dn<<16|ix|0;while(Z!==0);for(j=1<<x-1;z&j;)j>>=1;if(j!==0?(z&=j-1,z+=j):z=0,_++,--Q[x]===0){if(x===T)break;x=n[a+c[_]]}if(x>A&&(z&J)!==W){for(D===0&&(D=A),en+=S,R=x-D,O=1<<R;R+D<T&&(O-=Q[R+D],!(O<=0));)R++,O<<=1;if(F+=1<<R,t===LENS$1&&F>ENOUGH_LENS$1||t===DISTS$1&&F>ENOUGH_DISTS$1)return 1;W=z&J,l[W]=A<<24|R<<16|en-u|0}}return z!==0&&(l[en+z]=x-D<<24|64<<16|0),p.bits=A,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT$1=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.mode<HEAD||n.mode>SYNC?1:0},inflateResetKeep=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const n=t.state;return t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=n.wrap&1),n.mode=HEAD,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(ENOUGH_LENS),n.distcode=n.distdyn=new Int32Array(ENOUGH_DISTS),n.sane=1,n.back=-1,Z_OK$1},inflateReset=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const n=t.state;return n.wsize=0,n.whave=0,n.wnext=0,inflateResetKeep(t)},inflateReset2=(t,n)=>{let a;if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const s=t.state;return n<0?(a=0,n=-n):(a=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?Z_STREAM_ERROR$1:(s.window!==null&&s.wbits!==n&&(s.window=null),s.wrap=a,s.wbits=n,inflateReset(t))},inflateInit2=(t,n)=>{if(!t)return Z_STREAM_ERROR$1;const a=new InflateState;t.state=a,a.strm=t,a.window=null,a.mode=HEAD;const s=inflateReset2(t,n);return s!==Z_OK$1&&(t.state=null),s},inflateInit=t=>inflateInit2(t,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=t=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let n=0;for(;n<144;)t.lens[n++]=8;for(;n<256;)t.lens[n++]=9;for(;n<280;)t.lens[n++]=7;for(;n<288;)t.lens[n++]=8;for(inftrees(LENS,t.lens,0,288,lenfix,0,t.work,{bits:9}),n=0;n<32;)t.lens[n++]=5;inftrees(DISTS,t.lens,0,32,distfix,0,t.work,{bits:5}),virgin=!1}t.lencode=lenfix,t.lenbits=9,t.distcode=distfix,t.distbits=5},updatewindow=(t,n,a,s)=>{let l;const u=t.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Uint8Array(u.wsize)),s>=u.wsize?(u.window.set(n.subarray(a-u.wsize,a),0),u.wnext=0,u.whave=u.wsize):(l=u.wsize-u.wnext,l>s&&(l=s),u.window.set(n.subarray(a-s,a-s+l),u.wnext),s-=l,s?(u.window.set(n.subarray(a-s,a),0),u.wnext=s,u.whave=u.wsize):(u.wnext+=l,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=l))),0},inflate$2=(t,n)=>{let a,s,l,u,c,p,d,x,_,S,T,A,R,D,O=0,F,z,j,Z,W,J,en,tn;const Ct=new Uint8Array(4);let Q,on;const gn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(t)||!t.output||!t.input&&t.avail_in!==0)return Z_STREAM_ERROR$1;a=t.state,a.mode===TYPE&&(a.mode=TYPEDO),c=t.next_out,l=t.output,d=t.avail_out,u=t.next_in,s=t.input,p=t.avail_in,x=a.hold,_=a.bits,S=p,T=d,tn=Z_OK$1;e:for(;;)switch(a.mode){case HEAD:if(a.wrap===0){a.mode=TYPEDO;break}for(;_<16;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}if(a.wrap&2&&x===35615){a.wbits===0&&(a.wbits=15),a.check=0,Ct[0]=x&255,Ct[1]=x>>>8&255,a.check=crc32_1(a.check,Ct,2,0),x=0,_=0,a.mode=FLAGS;break}if(a.head&&(a.head.done=!1),!(a.wrap&1)||(((x&255)<<8)+(x>>8))%31){t.msg="incorrect header check",a.mode=BAD;break}if((x&15)!==Z_DEFLATED){t.msg="unknown compression method",a.mode=BAD;break}if(x>>>=4,_-=4,en=(x&15)+8,a.wbits===0&&(a.wbits=en),en>15||en>a.wbits){t.msg="invalid window size",a.mode=BAD;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=x&512?DICTID:TYPE,x=0,_=0;break;case FLAGS:for(;_<16;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}if(a.flags=x,(a.flags&255)!==Z_DEFLATED){t.msg="unknown compression method",a.mode=BAD;break}if(a.flags&57344){t.msg="unknown header flags set",a.mode=BAD;break}a.head&&(a.head.text=x>>8&1),a.flags&512&&a.wrap&4&&(Ct[0]=x&255,Ct[1]=x>>>8&255,a.check=crc32_1(a.check,Ct,2,0)),x=0,_=0,a.mode=TIME;case TIME:for(;_<32;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}a.head&&(a.head.time=x),a.flags&512&&a.wrap&4&&(Ct[0]=x&255,Ct[1]=x>>>8&255,Ct[2]=x>>>16&255,Ct[3]=x>>>24&255,a.check=crc32_1(a.check,Ct,4,0)),x=0,_=0,a.mode=OS;case OS:for(;_<16;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}a.head&&(a.head.xflags=x&255,a.head.os=x>>8),a.flags&512&&a.wrap&4&&(Ct[0]=x&255,Ct[1]=x>>>8&255,a.check=crc32_1(a.check,Ct,2,0)),x=0,_=0,a.mode=EXLEN;case EXLEN:if(a.flags&1024){for(;_<16;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}a.length=x,a.head&&(a.head.extra_len=x),a.flags&512&&a.wrap&4&&(Ct[0]=x&255,Ct[1]=x>>>8&255,a.check=crc32_1(a.check,Ct,2,0)),x=0,_=0}else a.head&&(a.head.extra=null);a.mode=EXTRA;case EXTRA:if(a.flags&1024&&(A=a.length,A>p&&(A=p),A&&(a.head&&(en=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(s.subarray(u,u+A),en)),a.flags&512&&a.wrap&4&&(a.check=crc32_1(a.check,s,A,u)),p-=A,u+=A,a.length-=A),a.length))break e;a.length=0,a.mode=NAME;case NAME:if(a.flags&2048){if(p===0)break e;A=0;do en=s[u+A++],a.head&&en&&a.length<65536&&(a.head.name+=String.fromCharCode(en));while(en&&A<p);if(a.flags&512&&a.wrap&4&&(a.check=crc32_1(a.check,s,A,u)),p-=A,u+=A,en)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=COMMENT$1;case COMMENT$1:if(a.flags&4096){if(p===0)break e;A=0;do en=s[u+A++],a.head&&en&&a.length<65536&&(a.head.comment+=String.fromCharCode(en));while(en&&A<p);if(a.flags&512&&a.wrap&4&&(a.check=crc32_1(a.check,s,A,u)),p-=A,u+=A,en)break e}else a.head&&(a.head.comment=null);a.mode=HCRC;case HCRC:if(a.flags&512){for(;_<16;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}if(a.wrap&4&&x!==(a.check&65535)){t.msg="header crc mismatch",a.mode=BAD;break}x=0,_=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=TYPE;break;case DICTID:for(;_<32;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}t.adler=a.check=zswap32(x),x=0,_=0,a.mode=DICT;case DICT:if(a.havedict===0)return t.next_out=c,t.avail_out=d,t.next_in=u,t.avail_in=p,a.hold=x,a.bits=_,Z_NEED_DICT$1;t.adler=a.check=1,a.mode=TYPE;case TYPE:if(n===Z_BLOCK||n===Z_TREES)break e;case TYPEDO:if(a.last){x>>>=_&7,_-=_&7,a.mode=CHECK;break}for(;_<3;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}switch(a.last=x&1,x>>>=1,_-=1,x&3){case 0:a.mode=STORED;break;case 1:if(fixedtables(a),a.mode=LEN_,n===Z_TREES){x>>>=2,_-=2;break e}break;case 2:a.mode=TABLE;break;case 3:t.msg="invalid block type",a.mode=BAD}x>>>=2,_-=2;break;case STORED:for(x>>>=_&7,_-=_&7;_<32;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}if((x&65535)!==(x>>>16^65535)){t.msg="invalid stored block lengths",a.mode=BAD;break}if(a.length=x&65535,x=0,_=0,a.mode=COPY_,n===Z_TREES)break e;case COPY_:a.mode=COPY;case COPY:if(A=a.length,A){if(A>p&&(A=p),A>d&&(A=d),A===0)break e;l.set(s.subarray(u,u+A),c),p-=A,u+=A,d-=A,c+=A,a.length-=A;break}a.mode=TYPE;break;case TABLE:for(;_<14;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}if(a.nlen=(x&31)+257,x>>>=5,_-=5,a.ndist=(x&31)+1,x>>>=5,_-=5,a.ncode=(x&15)+4,x>>>=4,_-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=BAD;break}a.have=0,a.mode=LENLENS;case LENLENS:for(;a.have<a.ncode;){for(;_<3;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}a.lens[gn[a.have++]]=x&7,x>>>=3,_-=3}for(;a.have<19;)a.lens[gn[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,Q={bits:a.lenbits},tn=inftrees(CODES,a.lens,0,19,a.lencode,0,a.work,Q),a.lenbits=Q.bits,tn){t.msg="invalid code lengths set",a.mode=BAD;break}a.have=0,a.mode=CODELENS;case CODELENS:for(;a.have<a.nlen+a.ndist;){for(;O=a.lencode[x&(1<<a.lenbits)-1],F=O>>>24,z=O>>>16&255,j=O&65535,!(F<=_);){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}if(j<16)x>>>=F,_-=F,a.lens[a.have++]=j;else{if(j===16){for(on=F+2;_<on;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}if(x>>>=F,_-=F,a.have===0){t.msg="invalid bit length repeat",a.mode=BAD;break}en=a.lens[a.have-1],A=3+(x&3),x>>>=2,_-=2}else if(j===17){for(on=F+3;_<on;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}x>>>=F,_-=F,en=0,A=3+(x&7),x>>>=3,_-=3}else{for(on=F+7;_<on;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}x>>>=F,_-=F,en=0,A=11+(x&127),x>>>=7,_-=7}if(a.have+A>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=BAD;break}for(;A--;)a.lens[a.have++]=en}}if(a.mode===BAD)break;if(a.lens[256]===0){t.msg="invalid code -- missing end-of-block",a.mode=BAD;break}if(a.lenbits=9,Q={bits:a.lenbits},tn=inftrees(LENS,a.lens,0,a.nlen,a.lencode,0,a.work,Q),a.lenbits=Q.bits,tn){t.msg="invalid literal/lengths set",a.mode=BAD;break}if(a.distbits=6,a.distcode=a.distdyn,Q={bits:a.distbits},tn=inftrees(DISTS,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,Q),a.distbits=Q.bits,tn){t.msg="invalid distances set",a.mode=BAD;break}if(a.mode=LEN_,n===Z_TREES)break e;case LEN_:a.mode=LEN;case LEN:if(p>=6&&d>=258){t.next_out=c,t.avail_out=d,t.next_in=u,t.avail_in=p,a.hold=x,a.bits=_,inffast(t,T),c=t.next_out,l=t.output,d=t.avail_out,u=t.next_in,s=t.input,p=t.avail_in,x=a.hold,_=a.bits,a.mode===TYPE&&(a.back=-1);break}for(a.back=0;O=a.lencode[x&(1<<a.lenbits)-1],F=O>>>24,z=O>>>16&255,j=O&65535,!(F<=_);){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}if(z&&(z&240)===0){for(Z=F,W=z,J=j;O=a.lencode[J+((x&(1<<Z+W)-1)>>Z)],F=O>>>24,z=O>>>16&255,j=O&65535,!(Z+F<=_);){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}x>>>=Z,_-=Z,a.back+=Z}if(x>>>=F,_-=F,a.back+=F,a.length=j,z===0){a.mode=LIT;break}if(z&32){a.back=-1,a.mode=TYPE;break}if(z&64){t.msg="invalid literal/length code",a.mode=BAD;break}a.extra=z&15,a.mode=LENEXT;case LENEXT:if(a.extra){for(on=a.extra;_<on;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}a.length+=x&(1<<a.extra)-1,x>>>=a.extra,_-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=DIST;case DIST:for(;O=a.distcode[x&(1<<a.distbits)-1],F=O>>>24,z=O>>>16&255,j=O&65535,!(F<=_);){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}if((z&240)===0){for(Z=F,W=z,J=j;O=a.distcode[J+((x&(1<<Z+W)-1)>>Z)],F=O>>>24,z=O>>>16&255,j=O&65535,!(Z+F<=_);){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}x>>>=Z,_-=Z,a.back+=Z}if(x>>>=F,_-=F,a.back+=F,z&64){t.msg="invalid distance code",a.mode=BAD;break}a.offset=j,a.extra=z&15,a.mode=DISTEXT;case DISTEXT:if(a.extra){for(on=a.extra;_<on;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}a.offset+=x&(1<<a.extra)-1,x>>>=a.extra,_-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=BAD;break}a.mode=MATCH;case MATCH:if(d===0)break e;if(A=T-d,a.offset>A){if(A=a.offset-A,A>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=BAD;break}A>a.wnext?(A-=a.wnext,R=a.wsize-A):R=a.wnext-A,A>a.length&&(A=a.length),D=a.window}else D=l,R=c-a.offset,A=a.length;A>d&&(A=d),d-=A,a.length-=A;do l[c++]=D[R++];while(--A);a.length===0&&(a.mode=LEN);break;case LIT:if(d===0)break e;l[c++]=a.length,d--,a.mode=LEN;break;case CHECK:if(a.wrap){for(;_<32;){if(p===0)break e;p--,x|=s[u++]<<_,_+=8}if(T-=d,t.total_out+=T,a.total+=T,a.wrap&4&&T&&(t.adler=a.check=a.flags?crc32_1(a.check,l,T,c-T):adler32_1(a.check,l,T,c-T)),T=d,a.wrap&4&&(a.flags?x:zswap32(x))!==a.check){t.msg="incorrect data check",a.mode=BAD;break}x=0,_=0}a.mode=LENGTH;case LENGTH:if(a.wrap&&a.flags){for(;_<32;){if(p===0)break e;p--,x+=s[u++]<<_,_+=8}if(a.wrap&4&&x!==(a.total&4294967295)){t.msg="incorrect length check",a.mode=BAD;break}x=0,_=0}a.mode=DONE;case DONE:tn=Z_STREAM_END$1;break e;case BAD:tn=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return t.next_out=c,t.avail_out=d,t.next_in=u,t.avail_in=p,a.hold=x,a.bits=_,(a.wsize||T!==t.avail_out&&a.mode<BAD&&(a.mode<CHECK||n!==Z_FINISH$1))&&updatewindow(t,t.output,t.next_out,T-t.avail_out),S-=t.avail_in,T-=t.avail_out,t.total_in+=S,t.total_out+=T,a.total+=T,a.wrap&4&&T&&(t.adler=a.check=a.flags?crc32_1(a.check,l,T,t.next_out-T):adler32_1(a.check,l,T,t.next_out-T)),t.data_type=a.bits+(a.last?64:0)+(a.mode===TYPE?128:0)+(a.mode===LEN_||a.mode===COPY_?256:0),(S===0&&T===0||n===Z_FINISH$1)&&tn===Z_OK$1&&(tn=Z_BUF_ERROR),tn},inflateEnd=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;let n=t.state;return n.window&&(n.window=null),t.state=null,Z_OK$1},inflateGetHeader=(t,n)=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const a=t.state;return(a.wrap&2)===0?Z_STREAM_ERROR$1:(a.head=n,n.done=!1,Z_OK$1)},inflateSetDictionary=(t,n)=>{const a=n.length;let s,l,u;return inflateStateCheck(t)||(s=t.state,s.wrap!==0&&s.mode!==DICT)?Z_STREAM_ERROR$1:s.mode===DICT&&(l=1,l=adler32_1(l,n,a,0),l!==s.check)?Z_DATA_ERROR$1:(u=updatewindow(t,n,a,a),u?(s.mode=MEM,Z_MEM_ERROR$1):(s.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(t){this.options=common$1.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(t&&t.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let a=inflate_1$2.inflateInit2(this.strm,n.windowBits);if(a!==Z_OK)throw new Error(messages[a]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=strings.string2buf(n.dictionary):toString.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(a=inflate_1$2.inflateSetDictionary(this.strm,n.dictionary),a!==Z_OK)))throw new Error(messages[a])}Inflate$1.prototype.push=function(t,n){const a=this.strm,s=this.options.chunkSize,l=this.options.dictionary;let u,c,p;if(this.ended)return!1;for(n===~~n?c=n:c=n===!0?Z_FINISH:Z_NO_FLUSH,toString.call(t)==="[object ArrayBuffer]"?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),u=inflate_1$2.inflate(a,c),u===Z_NEED_DICT&&l&&(u=inflate_1$2.inflateSetDictionary(a,l),u===Z_OK?u=inflate_1$2.inflate(a,c):u===Z_DATA_ERROR&&(u=Z_NEED_DICT));a.avail_in>0&&u===Z_STREAM_END&&a.state.wrap>0&&t[a.next_in]!==0;)inflate_1$2.inflateReset(a),u=inflate_1$2.inflate(a,c);switch(u){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(u),this.ended=!0,!1}if(p=a.avail_out,a.next_out&&(a.avail_out===0||u===Z_STREAM_END))if(this.options.to==="string"){let d=strings.utf8border(a.output,a.next_out),x=a.next_out-d,_=strings.buf2string(a.output,d);a.next_out=x,a.avail_out=s-x,x&&a.output.set(a.output.subarray(d,d+x),0),this.onData(_)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(!(u===Z_OK&&p===0)){if(u===Z_STREAM_END)return u=inflate_1$2.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,!0;if(a.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(t){this.chunks.push(t)};Inflate$1.prototype.onEnd=function(t){t===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function inflate$1(t,n){const a=new Inflate$1(n);if(a.push(t),a.err)throw a.msg||messages[a.err];return a.result}function inflateRaw$1(t,n){return n=n||{},n.raw=!0,inflate$1(t,n)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var Deflate_1=Deflate,deflate_1=deflate,deflateRaw_1=deflateRaw,gzip_1=gzip,Inflate_1=Inflate,inflate_1=inflate,inflateRaw_1=inflateRaw,ungzip_1=ungzip,constants_1=constants$2,pako={Deflate:Deflate_1,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,Inflate:Inflate_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1,constants:constants_1};function hn(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Vl(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Oo(t){let n,a,s;t.length!==2?(n=hn,a=(p,d)=>hn(t(p),d),s=(p,d)=>t(p)-d):(n=t===hn||t===Vl?t:$g,a=t,s=t);function l(p,d,x=0,_=p.length){if(x<_){if(n(d,d)!==0)return _;do{const S=x+_>>>1;a(p[S],d)<0?x=S+1:_=S}while(x<_)}return x}function u(p,d,x=0,_=p.length){if(x<_){if(n(d,d)!==0)return _;do{const S=x+_>>>1;a(p[S],d)<=0?x=S+1:_=S}while(x<_)}return x}function c(p,d,x=0,_=p.length){const S=l(p,d,x,_-1);return S>x&&s(p[S-1],d)>-s(p[S],d)?S-1:S}return{left:l,center:c,right:u}}function $g(){return 0}function Hi(t){return t===null?NaN:+t}function*Tg(t,n){if(n===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(yield a);else{let a=-1;for(let s of t)(s=n(s,++a,t))!=null&&(s=+s)>=s&&(yield s)}}const Gl=Oo(hn),Ft=Gl.right,Ag=Gl.left,Sg=Oo(Hi).center;function Eg(t,n){if(!((n=+n)>=0))throw new RangeError("invalid r");let a=t.length;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid length");if(!a||!n)return t;const s=lf(n),l=t.slice();return s(t,l,0,a,1),s(l,t,0,a,1),s(t,l,0,a,1),t}const Zl=Ql(lf),kg=Ql(Ng);function Ql(t){return function(n,a,s=a){if(!((a=+a)>=0))throw new RangeError("invalid rx");if(!((s=+s)>=0))throw new RangeError("invalid ry");let{data:l,width:u,height:c}=n;if(!((u=Math.floor(u))>=0))throw new RangeError("invalid width");if(!((c=Math.floor(c!==void 0?c:l.length/u))>=0))throw new RangeError("invalid height");if(!u||!c||!a&&!s)return n;const p=a&&t(a),d=s&&t(s),x=l.slice();return p&&d?(we(p,x,l,u,c),we(p,l,x,u,c),we(p,x,l,u,c),xe(d,l,x,u,c),xe(d,x,l,u,c),xe(d,l,x,u,c)):p?(we(p,l,x,u,c),we(p,x,l,u,c),we(p,l,x,u,c)):d&&(xe(d,l,x,u,c),xe(d,x,l,u,c),xe(d,l,x,u,c)),n}}function we(t,n,a,s,l){for(let u=0,c=s*l;u<c;)t(n,a,u,u+=s,1)}function xe(t,n,a,s,l){for(let u=0,c=s*l;u<s;++u)t(n,a,u,u+c,s)}function Ng(t){const n=lf(t);return(a,s,l,u,c)=>{l<<=2,u<<=2,c<<=2,n(a,s,l+0,u+0,c),n(a,s,l+1,u+1,c),n(a,s,l+2,u+2,c),n(a,s,l+3,u+3,c)}}function lf(t){const n=Math.floor(t);if(n===t)return Rg(t);const a=t-n,s=2*t+1;return(l,u,c,p,d)=>{if(!((p-=d)>=c))return;let x=n*u[c];const _=d*n,S=_+d;for(let T=c,A=c+_;T<A;T+=d)x+=u[Math.min(p,T)];for(let T=c,A=p;T<=A;T+=d)x+=u[Math.min(p,T+_)],l[T]=(x+a*(u[Math.max(c,T-S)]+u[Math.min(p,T+S)]))/s,x-=u[Math.max(c,T-_)]}}function Rg(t){const n=2*t+1;return(a,s,l,u,c)=>{if(!((u-=c)>=l))return;let p=t*s[l];const d=c*t;for(let x=l,_=l+d;x<_;x+=c)p+=s[Math.min(u,x)];for(let x=l,_=u;x<=_;x+=c)p+=s[Math.min(u,x+d)],a[x]=p/n,p-=s[Math.max(l,x-d)]}}function Yo(t,n){let a=0;if(n===void 0)for(let s of t)s!=null&&(s=+s)>=s&&++a;else{let s=-1;for(let l of t)(l=n(l,++s,t))!=null&&(l=+l)>=l&&++a}return a}function Ig(t){return t.length|0}function Cg(t){return!(t>0)}function Pg(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function Dg(t){return n=>t(...n)}function zg(...t){const n=typeof t[t.length-1]=="function"&&Dg(t.pop());t=t.map(Pg);const a=t.map(Ig),s=t.length-1,l=new Array(s+1).fill(0),u=[];if(s<0||a.some(Cg))return u;for(;;){u.push(l.map((p,d)=>t[d][p]));let c=s;for(;++l[c]===a[c];){if(c===0)return n?u.map(n):u;l[c--]=0}}}function Og(t,n){var a=0,s=0;return Float64Array.from(t,n===void 0?l=>a+=+l||0:l=>a+=+n(l,s++,t)||0)}function Kl(t,n){let a=0,s,l=0,u=0;if(n===void 0)for(let c of t)c!=null&&(c=+c)>=c&&(s=c-l,l+=s/++a,u+=s*(c-l));else{let c=-1;for(let p of t)(p=n(p,++c,t))!=null&&(p=+p)>=p&&(s=p-l,l+=s/++a,u+=s*(p-l))}if(a>1)return u/(a-1)}function Jl(t,n){const a=Kl(t,n);return a&&Math.sqrt(a)}function Sr(t,n){let a,s;if(n===void 0)for(const l of t)l!=null&&(a===void 0?l>=l&&(a=s=l):(a>l&&(a=l),s<l&&(s=l)));else{let l=-1;for(let u of t)(u=n(u,++l,t))!=null&&(a===void 0?u>=u&&(a=s=u):(a>u&&(a=u),s<u&&(s=u)))}return[a,s]}class bn{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const a=this._partials;let s=0;for(let l=0;l<this._n&&l<32;l++){const u=a[l],c=n+u,p=Math.abs(n)<Math.abs(u)?n-(c-u):u-(c-n);p&&(a[s++]=p),n=c}return a[s]=n,this._n=s+1,this}valueOf(){const n=this._partials;let a=this._n,s,l,u,c=0;if(a>0){for(c=n[--a];a>0&&(s=c,l=n[--a],c=s+l,u=l-(c-s),!u););a>0&&(u<0&&n[a-1]<0||u>0&&n[a-1]>0)&&(l=u*2,s=c+l,l==s-c&&(c=s))}return c}}function Yg(t,n){const a=new bn;if(n===void 0)for(let s of t)(s=+s)&&a.add(s);else{let s=-1;for(let l of t)(l=+n(l,++s,t))&&a.add(l)}return+a}function Fg(t,n){const a=new bn;let s=-1;return Float64Array.from(t,n===void 0?l=>a.add(+l||0):l=>a.add(+n(l,++s,t)||0))}class Cr extends Map{constructor(n,a=eh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),n!=null)for(const[s,l]of n)this.set(s,l)}get(n){return super.get(hu(this,n))}has(n){return super.has(hu(this,n))}set(n,a){return super.set(nh(this,n),a)}delete(n){return super.delete(th(this,n))}}class ie extends Set{constructor(n,a=eh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),n!=null)for(const s of n)this.add(s)}has(n){return super.has(hu(this,n))}add(n){return super.add(nh(this,n))}delete(n){return super.delete(th(this,n))}}function hu({_intern:t,_key:n},a){const s=n(a);return t.has(s)?t.get(s):a}function nh({_intern:t,_key:n},a){const s=n(a);return t.has(s)?t.get(s):(t.set(s,a),a)}function th({_intern:t,_key:n},a){const s=n(a);return t.has(s)&&(a=t.get(s),t.delete(s)),a}function eh(t){return t!==null&&typeof t=="object"?t.valueOf():t}function qe(t){return t}function rh(t,...n){return er(t,qe,qe,n)}function ih(t,...n){return er(t,Array.from,qe,n)}function oh(t,n){for(let a=1,s=n.length;a<s;++a)t=t.flatMap(l=>l.pop().map(([u,c])=>[...l,u,c]));return t}function qg(t,...n){return oh(ih(t,...n),n)}function Lg(t,n,...a){return oh(uh(t,n,...a),a)}function ah(t,n,...a){return er(t,qe,n,a)}function uh(t,n,...a){return er(t,Array.from,n,a)}function Bg(t,...n){return er(t,qe,fh,n)}function Ug(t,...n){return er(t,Array.from,fh,n)}function fh(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function er(t,n,a,s){return function l(u,c){if(c>=s.length)return a(u);const p=new Cr,d=s[c++];let x=-1;for(const _ of u){const S=d(_,++x,u),T=p.get(S);T?T.push(_):p.set(S,[_])}for(const[_,S]of p)p.set(_,l(S,c));return n(p)}(t,0)}function ch(t,n){return Array.from(n,a=>t[a])}function du(t,...n){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[a]=n;if(a&&a.length!==2||n.length>1){const s=Uint32Array.from(t,(l,u)=>u);return n.length>1?(n=n.map(l=>t.map(l)),s.sort((l,u)=>{for(const c of n){const p=Le(c[l],c[u]);if(p)return p}})):(a=t.map(a),s.sort((l,u)=>Le(a[l],a[u]))),ch(t,s)}return t.sort(hf(a))}function hf(t=hn){if(t===hn)return Le;if(typeof t!="function")throw new TypeError("compare is not a function");return(n,a)=>{const s=t(n,a);return s||s===0?s:(t(a,a)===0)-(t(n,n)===0)}}function Le(t,n){return(t==null||!(t>=t))-(n==null||!(n>=n))||(t<n?-1:t>n?1:0)}function Xg(t,n,a){return(n.length!==2?du(ah(t,n,a),([s,l],[u,c])=>hn(l,c)||hn(s,u)):du(rh(t,a),([s,l],[u,c])=>n(l,c)||hn(s,u))).map(([s])=>s)}var Hg=Array.prototype,jg=Hg.slice;function Aa(t){return()=>t}const Wg=Math.sqrt(50),Vg=Math.sqrt(10),Gg=Math.sqrt(2);function ji(t,n,a){const s=(n-t)/Math.max(0,a),l=Math.floor(Math.log10(s)),u=s/Math.pow(10,l),c=u>=Wg?10:u>=Vg?5:u>=Gg?2:1;let p,d,x;return l<0?(x=Math.pow(10,-l)/c,p=Math.round(t*x),d=Math.round(n*x),p/x<t&&++p,d/x>n&&--d,x=-x):(x=Math.pow(10,l)*c,p=Math.round(t/x),d=Math.round(n/x),p*x<t&&++p,d*x>n&&--d),d<p&&.5<=a&&a<2?ji(t,n,a*2):[p,d,x]}function oe(t,n,a){if(n=+n,t=+t,a=+a,!(a>0))return[];if(t===n)return[t];const s=n<t,[l,u,c]=s?ji(n,t,a):ji(t,n,a);if(!(u>=l))return[];const p=u-l+1,d=new Array(p);if(s)if(c<0)for(let x=0;x<p;++x)d[x]=(u-x)/-c;else for(let x=0;x<p;++x)d[x]=(u-x)*c;else if(c<0)for(let x=0;x<p;++x)d[x]=(l+x)/-c;else for(let x=0;x<p;++x)d[x]=(l+x)*c;return d}function ae(t,n,a){return n=+n,t=+t,a=+a,ji(t,n,a)[2]}function Wi(t,n,a){n=+n,t=+t,a=+a;const s=n<t,l=s?ae(n,t,a):ae(t,n,a);return(s?-1:1)*(l<0?1/-l:l)}function df(t,n,a){let s;for(;;){const l=ae(t,n,a);if(l===s||l===0||!isFinite(l))return[t,n];l>0?(t=Math.floor(t/l)*l,n=Math.ceil(n/l)*l):l<0&&(t=Math.ceil(t*l)/l,n=Math.floor(n*l)/l),s=l}}function gf(t){return Math.max(1,Math.ceil(Math.log(Yo(t))/Math.LN2)+1)}function Nc(){var t=qe,n=Sr,a=gf;function s(l){Array.isArray(l)||(l=Array.from(l));var u,c=l.length,p,d,x=new Array(c);for(u=0;u<c;++u)x[u]=t(l[u],u,l);var _=n(x),S=_[0],T=_[1],A=a(x,S,T);if(!Array.isArray(A)){const j=T,Z=+A;if(n===Sr&&([S,T]=df(S,T,Z)),A=oe(S,T,Z),A[0]<=S&&(d=ae(S,T,Z)),A[A.length-1]>=T)if(j>=T&&n===Sr){const W=ae(S,T,Z);isFinite(W)&&(W>0?T=(Math.floor(T/W)+1)*W:W<0&&(T=(Math.ceil(T*-W)+1)/-W))}else A.pop()}for(var R=A.length,D=0,O=R;A[D]<=S;)++D;for(;A[O-1]>T;)--O;(D||O<R)&&(A=A.slice(D,O),R=O-D);var F=new Array(R+1),z;for(u=0;u<=R;++u)z=F[u]=[],z.x0=u>0?A[u-1]:S,z.x1=u<R?A[u]:T;if(isFinite(d)){if(d>0)for(u=0;u<c;++u)(p=x[u])!=null&&S<=p&&p<=T&&F[Math.min(R,Math.floor((p-S)/d))].push(l[u]);else if(d<0){for(u=0;u<c;++u)if((p=x[u])!=null&&S<=p&&p<=T){const j=Math.floor((S-p)*d);F[Math.min(R,j+(A[j]<=p))].push(l[u])}}}else for(u=0;u<c;++u)(p=x[u])!=null&&S<=p&&p<=T&&F[Ft(A,p,0,R)].push(l[u]);return F}return s.value=function(l){return arguments.length?(t=typeof l=="function"?l:Aa(l),s):t},s.domain=function(l){return arguments.length?(n=typeof l=="function"?l:Aa([l[0],l[1]]),s):n},s.thresholds=function(l){return arguments.length?(a=typeof l=="function"?l:Aa(Array.isArray(l)?jg.call(l):l),s):a},s}function Pr(t,n){let a;if(n===void 0)for(const s of t)s!=null&&(a<s||a===void 0&&s>=s)&&(a=s);else{let s=-1;for(let l of t)(l=n(l,++s,t))!=null&&(a<l||a===void 0&&l>=l)&&(a=l)}return a}function pf(t,n){let a,s=-1,l=-1;if(n===void 0)for(const u of t)++l,u!=null&&(a<u||a===void 0&&u>=u)&&(a=u,s=l);else for(let u of t)(u=n(u,++l,t))!=null&&(a<u||a===void 0&&u>=u)&&(a=u,s=l);return s}function Vi(t,n){let a;if(n===void 0)for(const s of t)s!=null&&(a>s||a===void 0&&s>=s)&&(a=s);else{let s=-1;for(let l of t)(l=n(l,++s,t))!=null&&(a>l||a===void 0&&l>=l)&&(a=l)}return a}function mf(t,n){let a,s=-1,l=-1;if(n===void 0)for(const u of t)++l,u!=null&&(a>u||a===void 0&&u>=u)&&(a=u,s=l);else for(let u of t)(u=n(u,++l,t))!=null&&(a>u||a===void 0&&u>=u)&&(a=u,s=l);return s}function Fo(t,n,a=0,s=1/0,l){if(n=Math.floor(n),a=Math.floor(Math.max(0,a)),s=Math.floor(Math.min(t.length-1,s)),!(a<=n&&n<=s))return t;for(l=l===void 0?Le:hf(l);s>a;){if(s-a>600){const d=s-a+1,x=n-a+1,_=Math.log(d),S=.5*Math.exp(2*_/3),T=.5*Math.sqrt(_*S*(d-S)/d)*(x-d/2<0?-1:1),A=Math.max(a,Math.floor(n-x*S/d+T)),R=Math.min(s,Math.floor(n+(d-x)*S/d+T));Fo(t,n,A,R,l)}const u=t[n];let c=a,p=s;for(ur(t,a,n),l(t[s],u)>0&&ur(t,a,s);c<p;){for(ur(t,c,p),++c,--p;l(t[c],u)<0;)++c;for(;l(t[p],u)>0;)--p}l(t[a],u)===0?ur(t,a,p):(++p,ur(t,p,s)),p<=n&&(a=p+1),n<=p&&(s=p-1)}return t}function ur(t,n,a){const s=t[n];t[n]=t[a],t[a]=s}function sh(t,n=hn){let a,s=!1;if(n.length===1){let l;for(const u of t){const c=n(u);(s?hn(c,l)>0:hn(c,c)===0)&&(a=u,l=c,s=!0)}}else for(const l of t)(s?n(l,a)>0:n(l,l)===0)&&(a=l,s=!0);return a}function Dr(t,n,a){if(t=Float64Array.from(Tg(t,a)),!(!(s=t.length)||isNaN(n=+n))){if(n<=0||s<2)return Vi(t);if(n>=1)return Pr(t);var s,l=(s-1)*n,u=Math.floor(l),c=Pr(Fo(t,u).subarray(0,u+1)),p=Vi(t.subarray(u+1));return c+(p-c)*(l-u)}}function lh(t,n,a=Hi){if(!(!(s=t.length)||isNaN(n=+n))){if(n<=0||s<2)return+a(t[0],0,t);if(n>=1)return+a(t[s-1],s-1,t);var s,l=(s-1)*n,u=Math.floor(l),c=+a(t[u],u,t),p=+a(t[u+1],u+1,t);return c+(p-c)*(l-u)}}function hh(t,n,a=Hi){if(!isNaN(n=+n)){if(s=Float64Array.from(t,(p,d)=>Hi(a(t[d],d,t))),n<=0)return mf(s);if(n>=1)return pf(s);var s,l=Uint32Array.from(t,(p,d)=>d),u=s.length-1,c=Math.floor(u*n);return Fo(l,c,0,u,(p,d)=>Le(s[p],s[d])),c=sh(l.subarray(0,c+1),p=>s[p]),c>=0?c:-1}}function Zg(t,n,a){const s=Yo(t),l=Dr(t,.75)-Dr(t,.25);return s&&l?Math.ceil((a-n)/(2*l*Math.pow(s,-1/3))):1}function Qg(t,n,a){const s=Yo(t),l=Jl(t);return s&&l?Math.ceil((a-n)*Math.cbrt(s)/(3.49*l)):1}function Kg(t,n){let a=0,s=0;if(n===void 0)for(let l of t)l!=null&&(l=+l)>=l&&(++a,s+=l);else{let l=-1;for(let u of t)(u=n(u,++l,t))!=null&&(u=+u)>=u&&(++a,s+=u)}if(a)return s/a}function Jg(t,n){return Dr(t,.5,n)}function np(t,n){return hh(t,.5,n)}function*tp(t){for(const n of t)yield*n}function yf(t){return Array.from(tp(t))}function ep(t,n){const a=new Cr;if(n===void 0)for(let u of t)u!=null&&u>=u&&a.set(u,(a.get(u)||0)+1);else{let u=-1;for(let c of t)(c=n(c,++u,t))!=null&&c>=c&&a.set(c,(a.get(c)||0)+1)}let s,l=0;for(const[u,c]of a)c>l&&(l=c,s=u);return s}function rp(t,n=ip){const a=[];let s,l=!1;for(const u of t)l&&a.push(n(s,u)),s=u,l=!0;return a}function ip(t,n){return[t,n]}function zt(t,n,a){t=+t,n=+n,a=(l=arguments.length)<2?(n=t,t=0,1):l<3?1:+a;for(var s=-1,l=Math.max(0,Math.ceil((n-t)/a))|0,u=new Array(l);++s<l;)u[s]=t+s*a;return u}function op(t,n=hn){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let a=Array.from(t);const s=new Float64Array(a.length);n.length!==2&&(a=a.map(n),n=hn);const l=(p,d)=>n(a[p],a[d]);let u,c;return t=Uint32Array.from(a,(p,d)=>d),t.sort(n===hn?(p,d)=>Le(a[p],a[d]):hf(l)),t.forEach((p,d)=>{const x=l(p,u===void 0?p:u);x>=0?((u===void 0||x>0)&&(u=p,c=d),s[p]=c):s[p]=NaN}),s}function ap(t,n=hn){let a,s=!1;if(n.length===1){let l;for(const u of t){const c=n(u);(s?hn(c,l)<0:hn(c,c)===0)&&(a=u,l=c,s=!0)}}else for(const l of t)(s?n(l,a)<0:n(l,l)===0)&&(a=l,s=!0);return a}function dh(t,n=hn){if(n.length===1)return mf(t,n);let a,s=-1,l=-1;for(const u of t)++l,(s<0?n(u,u)===0:n(u,a)<0)&&(a=u,s=l);return s}function up(t,n=hn){if(n.length===1)return pf(t,n);let a,s=-1,l=-1;for(const u of t)++l,(s<0?n(u,u)===0:n(u,a)>0)&&(a=u,s=l);return s}function fp(t,n){const a=dh(t,n);return a<0?void 0:a}const cp=gh(Math.random);function gh(t){return function(n,a=0,s=n.length){let l=s-(a=+a);for(;l;){const u=t()*l--|0,c=n[l+a];n[l+a]=n[u+a],n[u+a]=c}return n}}function sp(t,n){let a=0;if(n===void 0)for(let s of t)(s=+s)&&(a+=s);else{let s=-1;for(let l of t)(l=+n(l,++s,t))&&(a+=l)}return a}function ph(t){if(!(u=t.length))return[];for(var n=-1,a=Vi(t,lp),s=new Array(a);++n<a;)for(var l=-1,u,c=s[n]=new Array(u);++l<u;)c[l]=t[l][n];return s}function lp(t){return t.length}function hp(){return ph(arguments)}function dp(t,n){if(typeof n!="function")throw new TypeError("test is not a function");let a=-1;for(const s of t)if(!n(s,++a,t))return!1;return!0}function gp(t,n){if(typeof n!="function")throw new TypeError("test is not a function");let a=-1;for(const s of t)if(n(s,++a,t))return!0;return!1}function pp(t,n){if(typeof n!="function")throw new TypeError("test is not a function");const a=[];let s=-1;for(const l of t)n(l,++s,t)&&a.push(l);return a}function mp(t,n){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof n!="function")throw new TypeError("mapper is not a function");return Array.from(t,(a,s)=>n(a,s,t))}function yp(t,n,a){if(typeof n!="function")throw new TypeError("reducer is not a function");const s=t[Symbol.iterator]();let l,u,c=-1;if(arguments.length<3){if({done:l,value:a}=s.next(),l)return;++c}for(;{done:l,value:u}=s.next(),!l;)a=n(a,u,++c,t);return a}function _p(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function vp(t,...n){t=new ie(t);for(const a of n)for(const s of a)t.delete(s);return t}function bp(t,n){const a=n[Symbol.iterator](),s=new ie;for(const l of t){if(s.has(l))return!1;let u,c;for(;({value:u,done:c}=a.next())&&!c;){if(Object.is(l,u))return!1;s.add(u)}}return!0}function wp(t,...n){t=new ie(t),n=n.map(xp);e:for(const a of t)for(const s of n)if(!s.has(a)){t.delete(a);continue e}return t}function xp(t){return t instanceof ie?t:new ie(t)}function mh(t,n){const a=t[Symbol.iterator](),s=new Set;for(const l of n){const u=Rc(l);if(s.has(u))continue;let c,p;for(;{value:c,done:p}=a.next();){if(p)return!1;const d=Rc(c);if(s.add(d),Object.is(u,d))break}}return!0}function Rc(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Mp(t,n){return mh(n,t)}function $p(...t){const n=new ie;for(const a of t)for(const s of a)n.add(s);return n}function Tp(t){return t}var Ci=1,Pi=2,gu=3,mr=4,Ic=1e-6;function Ap(t){return"translate("+t+",0)"}function Sp(t){return"translate(0,"+t+")"}function Ep(t){return n=>+t(n)}function kp(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),a=>+t(a)+n}function Np(){return!this.__axis}function qo(t,n){var a=[],s=null,l=null,u=6,c=6,p=3,d=typeof window<"u"&&window.devicePixelRatio>1?0:.5,x=t===Ci||t===mr?-1:1,_=t===mr||t===Pi?"x":"y",S=t===Ci||t===gu?Ap:Sp;function T(A){var R=s??(n.ticks?n.ticks.apply(n,a):n.domain()),D=l??(n.tickFormat?n.tickFormat.apply(n,a):Tp),O=Math.max(u,0)+p,F=n.range(),z=+F[0]+d,j=+F[F.length-1]+d,Z=(n.bandwidth?kp:Ep)(n.copy(),d),W=A.selection?A.selection():A,J=W.selectAll(".domain").data([null]),en=W.selectAll(".tick").data(R,n).order(),tn=en.exit(),Ct=en.enter().append("g").attr("class","tick"),Q=en.select("line"),on=en.select("text");J=J.merge(J.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),en=en.merge(Ct),Q=Q.merge(Ct.append("line").attr("stroke","currentColor").attr(_+"2",x*u)),on=on.merge(Ct.append("text").attr("fill","currentColor").attr(_,x*O).attr("dy",t===Ci?"0em":t===gu?"0.71em":"0.32em")),A!==W&&(J=J.transition(A),en=en.transition(A),Q=Q.transition(A),on=on.transition(A),tn=tn.transition(A).attr("opacity",Ic).attr("transform",function(gn){return isFinite(gn=Z(gn))?S(gn+d):this.getAttribute("transform")}),Ct.attr("opacity",Ic).attr("transform",function(gn){var In=this.parentNode.__axis;return S((In&&isFinite(In=In(gn))?In:Z(gn))+d)})),tn.remove(),J.attr("d",t===mr||t===Pi?c?"M"+x*c+","+z+"H"+d+"V"+j+"H"+x*c:"M"+d+","+z+"V"+j:c?"M"+z+","+x*c+"V"+d+"H"+j+"V"+x*c:"M"+z+","+d+"H"+j),en.attr("opacity",1).attr("transform",function(gn){return S(Z(gn)+d)}),Q.attr(_+"2",x*u),on.attr(_,x*O).text(D),W.filter(Np).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Pi?"start":t===mr?"end":"middle"),W.each(function(){this.__axis=Z})}return T.scale=function(A){return arguments.length?(n=A,T):n},T.ticks=function(){return a=Array.from(arguments),T},T.tickArguments=function(A){return arguments.length?(a=A==null?[]:Array.from(A),T):a.slice()},T.tickValues=function(A){return arguments.length?(s=A==null?null:Array.from(A),T):s&&s.slice()},T.tickFormat=function(A){return arguments.length?(l=A,T):l},T.tickSize=function(A){return arguments.length?(u=c=+A,T):u},T.tickSizeInner=function(A){return arguments.length?(u=+A,T):u},T.tickSizeOuter=function(A){return arguments.length?(c=+A,T):c},T.tickPadding=function(A){return arguments.length?(p=+A,T):p},T.offset=function(A){return arguments.length?(d=+A,T):d},T}function Rp(t){return qo(Ci,t)}function Ip(t){return qo(Pi,t)}function Cp(t){return qo(gu,t)}function Pp(t){return qo(mr,t)}var Dp={value:()=>{}};function pe(){for(var t=0,n=arguments.length,a={},s;t<n;++t){if(!(s=arguments[t]+"")||s in a||/[\s.]/.test(s))throw new Error("illegal type: "+s);a[s]=[]}return new Di(a)}function Di(t){this._=t}function zp(t,n){return t.trim().split(/^|\s+/).map(function(a){var s="",l=a.indexOf(".");if(l>=0&&(s=a.slice(l+1),a=a.slice(0,l)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:s}})}Di.prototype=pe.prototype={constructor:Di,on:function(t,n){var a=this._,s=zp(t+"",a),l,u=-1,c=s.length;if(arguments.length<2){for(;++u<c;)if((l=(t=s[u]).type)&&(l=Op(a[l],t.name)))return l;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++u<c;)if(l=(t=s[u]).type)a[l]=Cc(a[l],t.name,n);else if(n==null)for(l in a)a[l]=Cc(a[l],t.name,null);return this},copy:function(){var t={},n=this._;for(var a in n)t[a]=n[a].slice();return new Di(t)},call:function(t,n){if((l=arguments.length-2)>0)for(var a=new Array(l),s=0,l,u;s<l;++s)a[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],s=0,l=u.length;s<l;++s)u[s].value.apply(n,a)},apply:function(t,n,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],l=0,u=s.length;l<u;++l)s[l].value.apply(n,a)}};function Op(t,n){for(var a=0,s=t.length,l;a<s;++a)if((l=t[a]).name===n)return l.value}function Cc(t,n,a){for(var s=0,l=t.length;s<l;++s)if(t[s].name===n){t[s]=Dp,t=t.slice(0,s).concat(t.slice(s+1));break}return a!=null&&t.push({name:n,value:a}),t}var pu="http://www.w3.org/1999/xhtml";const mu={svg:"http://www.w3.org/2000/svg",xhtml:pu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zr(t){var n=t+="",a=n.indexOf(":");return a>=0&&(n=t.slice(0,a))!=="xmlns"&&(t=t.slice(a+1)),mu.hasOwnProperty(n)?{space:mu[n],local:t}:t}function Yp(t){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===pu&&n.documentElement.namespaceURI===pu?n.createElement(t):n.createElementNS(a,t)}}function Fp(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Lo(t){var n=Zr(t);return(n.local?Fp:Yp)(n)}function qp(){}function Bo(t){return t==null?qp:function(){return this.querySelector(t)}}function Lp(t){typeof t!="function"&&(t=Bo(t));for(var n=this._groups,a=n.length,s=new Array(a),l=0;l<a;++l)for(var u=n[l],c=u.length,p=s[l]=new Array(c),d,x,_=0;_<c;++_)(d=u[_])&&(x=t.call(d,d.__data__,_,u))&&("__data__"in d&&(x.__data__=d.__data__),p[_]=x);return new qn(s,this._parents)}function yh(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Bp(){return[]}function _f(t){return t==null?Bp:function(){return this.querySelectorAll(t)}}function Up(t){return function(){return yh(t.apply(this,arguments))}}function Xp(t){typeof t=="function"?t=Up(t):t=_f(t);for(var n=this._groups,a=n.length,s=[],l=[],u=0;u<a;++u)for(var c=n[u],p=c.length,d,x=0;x<p;++x)(d=c[x])&&(s.push(t.call(d,d.__data__,x,c)),l.push(d));return new qn(s,l)}function vf(t){return function(){return this.matches(t)}}function _h(t){return function(n){return n.matches(t)}}var Hp=Array.prototype.find;function jp(t){return function(){return Hp.call(this.children,t)}}function Wp(){return this.firstElementChild}function Vp(t){return this.select(t==null?Wp:jp(typeof t=="function"?t:_h(t)))}var Gp=Array.prototype.filter;function Zp(){return Array.from(this.children)}function Qp(t){return function(){return Gp.call(this.children,t)}}function Kp(t){return this.selectAll(t==null?Zp:Qp(typeof t=="function"?t:_h(t)))}function Jp(t){typeof t!="function"&&(t=vf(t));for(var n=this._groups,a=n.length,s=new Array(a),l=0;l<a;++l)for(var u=n[l],c=u.length,p=s[l]=[],d,x=0;x<c;++x)(d=u[x])&&t.call(d,d.__data__,x,u)&&p.push(d);return new qn(s,this._parents)}function vh(t){return new Array(t.length)}function n2(){return new qn(this._enter||this._groups.map(vh),this._parents)}function Gi(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Gi.prototype={constructor:Gi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function t2(t){return function(){return t}}function e2(t,n,a,s,l,u){for(var c=0,p,d=n.length,x=u.length;c<x;++c)(p=n[c])?(p.__data__=u[c],s[c]=p):a[c]=new Gi(t,u[c]);for(;c<d;++c)(p=n[c])&&(l[c]=p)}function r2(t,n,a,s,l,u,c){var p,d,x=new Map,_=n.length,S=u.length,T=new Array(_),A;for(p=0;p<_;++p)(d=n[p])&&(T[p]=A=c.call(d,d.__data__,p,n)+"",x.has(A)?l[p]=d:x.set(A,d));for(p=0;p<S;++p)A=c.call(t,u[p],p,u)+"",(d=x.get(A))?(s[p]=d,d.__data__=u[p],x.delete(A)):a[p]=new Gi(t,u[p]);for(p=0;p<_;++p)(d=n[p])&&x.get(T[p])===d&&(l[p]=d)}function i2(t){return t.__data__}function o2(t,n){if(!arguments.length)return Array.from(this,i2);var a=n?r2:e2,s=this._parents,l=this._groups;typeof t!="function"&&(t=t2(t));for(var u=l.length,c=new Array(u),p=new Array(u),d=new Array(u),x=0;x<u;++x){var _=s[x],S=l[x],T=S.length,A=a2(t.call(_,_&&_.__data__,x,s)),R=A.length,D=p[x]=new Array(R),O=c[x]=new Array(R),F=d[x]=new Array(T);a(_,S,D,O,F,A,n);for(var z=0,j=0,Z,W;z<R;++z)if(Z=D[z]){for(z>=j&&(j=z+1);!(W=O[j])&&++j<R;);Z._next=W||null}}return c=new qn(c,s),c._enter=p,c._exit=d,c}function a2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function u2(){return new qn(this._exit||this._groups.map(vh),this._parents)}function f2(t,n,a){var s=this.enter(),l=this,u=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),n!=null&&(l=n(l),l&&(l=l.selection())),a==null?u.remove():a(u),s&&l?s.merge(l).order():l}function c2(t){for(var n=t.selection?t.selection():t,a=this._groups,s=n._groups,l=a.length,u=s.length,c=Math.min(l,u),p=new Array(l),d=0;d<c;++d)for(var x=a[d],_=s[d],S=x.length,T=p[d]=new Array(S),A,R=0;R<S;++R)(A=x[R]||_[R])&&(T[R]=A);for(;d<l;++d)p[d]=a[d];return new qn(p,this._parents)}function s2(){for(var t=this._groups,n=-1,a=t.length;++n<a;)for(var s=t[n],l=s.length-1,u=s[l],c;--l>=0;)(c=s[l])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function l2(t){t||(t=h2);function n(S,T){return S&&T?t(S.__data__,T.__data__):!S-!T}for(var a=this._groups,s=a.length,l=new Array(s),u=0;u<s;++u){for(var c=a[u],p=c.length,d=l[u]=new Array(p),x,_=0;_<p;++_)(x=c[_])&&(d[_]=x);d.sort(n)}return new qn(l,this._parents).order()}function h2(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function d2(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function g2(){return Array.from(this)}function p2(){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var s=t[n],l=0,u=s.length;l<u;++l){var c=s[l];if(c)return c}return null}function m2(){let t=0;for(const n of this)++t;return t}function y2(){return!this.node()}function _2(t){for(var n=this._groups,a=0,s=n.length;a<s;++a)for(var l=n[a],u=0,c=l.length,p;u<c;++u)(p=l[u])&&t.call(p,p.__data__,u,l);return this}function v2$1(t){return function(){this.removeAttribute(t)}}function b2(t){return function(){this.removeAttributeNS(t.space,t.local)}}function w2(t,n){return function(){this.setAttribute(t,n)}}function x2(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function M2(t,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(t):this.setAttribute(t,a)}}function $2(t,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function T2(t,n){var a=Zr(t);if(arguments.length<2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((n==null?a.local?b2:v2$1:typeof n=="function"?a.local?$2:M2:a.local?x2:w2)(a,n))}function bf(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function A2(t){return function(){this.style.removeProperty(t)}}function S2(t,n,a){return function(){this.style.setProperty(t,n,a)}}function E2(t,n,a){return function(){var s=n.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,a)}}function k2(t,n,a){return arguments.length>1?this.each((n==null?A2:typeof n=="function"?E2:S2)(t,n,a??"")):ue(this.node(),t)}function ue(t,n){return t.style.getPropertyValue(n)||bf(t).getComputedStyle(t,null).getPropertyValue(n)}function N2(t){return function(){delete this[t]}}function R2(t,n){return function(){this[t]=n}}function I2(t,n){return function(){var a=n.apply(this,arguments);a==null?delete this[t]:this[t]=a}}function C2(t,n){return arguments.length>1?this.each((n==null?N2:typeof n=="function"?I2:R2)(t,n)):this.node()[t]}function bh(t){return t.trim().split(/^|\s+/)}function wf(t){return t.classList||new wh(t)}function wh(t){this._node=t,this._names=bh(t.getAttribute("class")||"")}wh.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xh(t,n){for(var a=wf(t),s=-1,l=n.length;++s<l;)a.add(n[s])}function Mh(t,n){for(var a=wf(t),s=-1,l=n.length;++s<l;)a.remove(n[s])}function P2(t){return function(){xh(this,t)}}function D2(t){return function(){Mh(this,t)}}function z2(t,n){return function(){(n.apply(this,arguments)?xh:Mh)(this,t)}}function O2(t,n){var a=bh(t+"");if(arguments.length<2){for(var s=wf(this.node()),l=-1,u=a.length;++l<u;)if(!s.contains(a[l]))return!1;return!0}return this.each((typeof n=="function"?z2:n?P2:D2)(a,n))}function Y2(){this.textContent=""}function F2(t){return function(){this.textContent=t}}function q2(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function L2(t){return arguments.length?this.each(t==null?Y2:(typeof t=="function"?q2:F2)(t)):this.node().textContent}function B2(){this.innerHTML=""}function U2(t){return function(){this.innerHTML=t}}function X2(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function H2(t){return arguments.length?this.each(t==null?B2:(typeof t=="function"?X2:U2)(t)):this.node().innerHTML}function j2(){this.nextSibling&&this.parentNode.appendChild(this)}function W2(){return this.each(j2)}function V2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function G2(){return this.each(V2)}function Z2(t){var n=typeof t=="function"?t:Lo(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Q2(){return null}function K2(t,n){var a=typeof t=="function"?t:Lo(t),s=n==null?Q2:typeof n=="function"?n:Bo(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),s.apply(this,arguments)||null)})}function J2(){var t=this.parentNode;t&&t.removeChild(this)}function nm(){return this.each(J2)}function tm(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function em(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function rm(t){return this.select(t?em:tm)}function im(t){return arguments.length?this.property("__data__",t):this.node().__data__}function om(t){return function(n){t.call(this,n,this.__data__)}}function am(t){return t.trim().split(/^|\s+/).map(function(n){var a="",s=n.indexOf(".");return s>=0&&(a=n.slice(s+1),n=n.slice(0,s)),{type:n,name:a}})}function um(t){return function(){var n=this.__on;if(n){for(var a=0,s=-1,l=n.length,u;a<l;++a)u=n[a],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):n[++s]=u;++s?n.length=s:delete this.__on}}}function fm(t,n,a){return function(){var s=this.__on,l,u=om(n);if(s){for(var c=0,p=s.length;c<p;++c)if((l=s[c]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=u,l.options=a),l.value=n;return}}this.addEventListener(t.type,u,a),l={type:t.type,name:t.name,value:n,listener:u,options:a},s?s.push(l):this.__on=[l]}}function cm(t,n,a){var s=am(t+""),l,u=s.length,c;if(arguments.length<2){var p=this.node().__on;if(p){for(var d=0,x=p.length,_;d<x;++d)for(l=0,_=p[d];l<u;++l)if((c=s[l]).type===_.type&&c.name===_.name)return _.value}return}for(p=n?fm:um,l=0;l<u;++l)this.each(p(s[l],n,a));return this}function $h(t,n,a){var s=bf(t),l=s.CustomEvent;typeof l=="function"?l=new l(n,a):(l=s.document.createEvent("Event"),a?(l.initEvent(n,a.bubbles,a.cancelable),l.detail=a.detail):l.initEvent(n,!1,!1)),t.dispatchEvent(l)}function sm(t,n){return function(){return $h(this,t,n)}}function lm(t,n){return function(){return $h(this,t,n.apply(this,arguments))}}function hm(t,n){return this.each((typeof n=="function"?lm:sm)(t,n))}function*dm(){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var s=t[n],l=0,u=s.length,c;l<u;++l)(c=s[l])&&(yield c)}var xf=[null];function qn(t,n){this._groups=t,this._parents=n}function me(){return new qn([[document.documentElement]],xf)}function gm(){return this}qn.prototype=me.prototype={constructor:qn,select:Lp,selectAll:Xp,selectChild:Vp,selectChildren:Kp,filter:Jp,data:o2,enter:n2,exit:u2,join:f2,merge:c2,selection:gm,order:s2,sort:l2,call:d2,nodes:g2,node:p2,size:m2,empty:y2,each:_2,attr:T2,style:k2,property:C2,classed:O2,text:L2,html:H2,raise:W2,lower:G2,append:Z2,insert:K2,remove:nm,clone:rm,datum:im,on:cm,dispatch:hm,[Symbol.iterator]:dm};function X(t){return typeof t=="string"?new qn([[document.querySelector(t)]],[document.documentElement]):new qn([[t]],xf)}function pm(t){return X(Lo(t).call(document.documentElement))}var mm=0;function Th(){return new yu}function yu(){this._="@"+(++mm).toString(36)}yu.prototype=Th.prototype={constructor:yu,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function Ah(t){let n;for(;n=t.sourceEvent;)t=n;return t}function wn(t,n){if(t=Ah(t),n===void 0&&(n=t.currentTarget),n){var a=n.ownerSVGElement||n;if(a.createSVGPoint){var s=a.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(n.getScreenCTM().inverse()),[s.x,s.y]}if(n.getBoundingClientRect){var l=n.getBoundingClientRect();return[t.clientX-l.left-n.clientLeft,t.clientY-l.top-n.clientTop]}}return[t.pageX,t.pageY]}function ym(t,n){return t.target&&(t=Ah(t),n===void 0&&(n=t.currentTarget),t=t.touches||[t]),Array.from(t,a=>wn(a,n))}function _m(t){return typeof t=="string"?new qn([document.querySelectorAll(t)],[document.documentElement]):new qn([yh(t)],xf)}const vm={passive:!1},zr={capture:!0,passive:!1};function Sa(t){t.stopImmediatePropagation()}function De(t){t.preventDefault(),t.stopImmediatePropagation()}function Uo(t){var n=t.document.documentElement,a=X(t).on("dragstart.drag",De,zr);"onselectstart"in n?a.on("selectstart.drag",De,zr):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Xo(t,n){var a=t.document.documentElement,s=X(t).on("dragstart.drag",null);n&&(s.on("click.drag",De,zr),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in a?s.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}const si=t=>()=>t;function _u(t,{sourceEvent:n,subject:a,target:s,identifier:l,active:u,x:c,y:p,dx:d,dy:x,dispatch:_}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:p,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:x,enumerable:!0,configurable:!0},_:{value:_}})}_u.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function bm(t){return!t.ctrlKey&&!t.button}function wm(){return this.parentNode}function xm(t,n){return n??{x:t.x,y:t.y}}function Mm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sh(){var t=bm,n=wm,a=xm,s=Mm,l={},u=pe("start","drag","end"),c=0,p,d,x,_,S=0;function T(Z){Z.on("mousedown.drag",A).filter(s).on("touchstart.drag",O).on("touchmove.drag",F,vm).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function A(Z,W){if(!(_||!t.call(this,Z,W))){var J=j(this,n.call(this,Z,W),Z,W,"mouse");J&&(X(Z.view).on("mousemove.drag",R,zr).on("mouseup.drag",D,zr),Uo(Z.view),Sa(Z),x=!1,p=Z.clientX,d=Z.clientY,J("start",Z))}}function R(Z){if(De(Z),!x){var W=Z.clientX-p,J=Z.clientY-d;x=W*W+J*J>S}l.mouse("drag",Z)}function D(Z){X(Z.view).on("mousemove.drag mouseup.drag",null),Xo(Z.view,x),De(Z),l.mouse("end",Z)}function O(Z,W){if(t.call(this,Z,W)){var J=Z.changedTouches,en=n.call(this,Z,W),tn=J.length,Ct,Q;for(Ct=0;Ct<tn;++Ct)(Q=j(this,en,Z,W,J[Ct].identifier,J[Ct]))&&(Sa(Z),Q("start",Z,J[Ct]))}}function F(Z){var W=Z.changedTouches,J=W.length,en,tn;for(en=0;en<J;++en)(tn=l[W[en].identifier])&&(De(Z),tn("drag",Z,W[en]))}function z(Z){var W=Z.changedTouches,J=W.length,en,tn;for(_&&clearTimeout(_),_=setTimeout(function(){_=null},500),en=0;en<J;++en)(tn=l[W[en].identifier])&&(Sa(Z),tn("end",Z,W[en]))}function j(Z,W,J,en,tn,Ct){var Q=u.copy(),on=wn(Ct||J,W),gn,In,dn;if((dn=a.call(Z,new _u("beforestart",{sourceEvent:J,target:T,identifier:tn,active:c,x:on[0],y:on[1],dx:0,dy:0,dispatch:Q}),en))!=null)return gn=dn.x-on[0]||0,In=dn.y-on[1]||0,function ix(Cn,ax,sx){var lx=on,ox;switch(Cn){case"start":l[tn]=ix,ox=c++;break;case"end":delete l[tn],--c;case"drag":on=wn(sx||ax,W),ox=c;break}Q.call(Cn,Z,new _u(Cn,{sourceEvent:ax,subject:dn,target:T,identifier:tn,active:ox,x:on[0]+gn,y:on[1]+In,dx:on[0]-lx[0],dy:on[1]-lx[1],dispatch:Q}),en)}}return T.filter=function(Z){return arguments.length?(t=typeof Z=="function"?Z:si(!!Z),T):t},T.container=function(Z){return arguments.length?(n=typeof Z=="function"?Z:si(Z),T):n},T.subject=function(Z){return arguments.length?(a=typeof Z=="function"?Z:si(Z),T):a},T.touchable=function(Z){return arguments.length?(s=typeof Z=="function"?Z:si(!!Z),T):s},T.on=function(){var Z=u.on.apply(u,arguments);return Z===u?T:Z},T.clickDistance=function(Z){return arguments.length?(S=(Z=+Z)*Z,T):Math.sqrt(S)},T}function rr(t,n,a){t.prototype=n.prototype=a,a.constructor=t}function Qr(t,n){var a=Object.create(t.prototype);for(var s in n)a[s]=n[s];return a}function Xt(){}var fe=.7,Be=1/fe,ze="\\s*([+-]?\\d+)\\s*",Or="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$m=/^#([0-9a-f]{3,8})$/,Tm=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),Am=new RegExp(`^rgb\\(${dt},${dt},${dt}\\)$`),Sm=new RegExp(`^rgba\\(${ze},${ze},${ze},${Or}\\)$`),Em=new RegExp(`^rgba\\(${dt},${dt},${dt},${Or}\\)$`),km=new RegExp(`^hsl\\(${Or},${dt},${dt}\\)$`),Nm=new RegExp(`^hsla\\(${Or},${dt},${dt},${Or}\\)$`),Pc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rr(Xt,qt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Dc,formatHex:Dc,formatHex8:Rm,formatHsl:Im,formatRgb:zc,toString:zc});function Dc(){return this.rgb().formatHex()}function Rm(){return this.rgb().formatHex8()}function Im(){return Eh(this).formatHsl()}function zc(){return this.rgb().formatRgb()}function qt(t){var n,a;return t=(t+"").trim().toLowerCase(),(n=$m.exec(t))?(a=n[1].length,n=parseInt(n[1],16),a===6?Oc(n):a===3?new xn(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?li(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?li(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Tm.exec(t))?new xn(n[1],n[2],n[3],1):(n=Am.exec(t))?new xn(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Sm.exec(t))?li(n[1],n[2],n[3],n[4]):(n=Em.exec(t))?li(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=km.exec(t))?qc(n[1],n[2]/100,n[3]/100,1):(n=Nm.exec(t))?qc(n[1],n[2]/100,n[3]/100,n[4]):Pc.hasOwnProperty(t)?Oc(Pc[t]):t==="transparent"?new xn(NaN,NaN,NaN,0):null}function Oc(t){return new xn(t>>16&255,t>>8&255,t&255,1)}function li(t,n,a,s){return s<=0&&(t=n=a=NaN),new xn(t,n,a,s)}function Mf(t){return t instanceof Xt||(t=qt(t)),t?(t=t.rgb(),new xn(t.r,t.g,t.b,t.opacity)):new xn}function Ue(t,n,a,s){return arguments.length===1?Mf(t):new xn(t,n,a,s??1)}function xn(t,n,a,s){this.r=+t,this.g=+n,this.b=+a,this.opacity=+s}rr(xn,Ue,Qr(Xt,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new xn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?fe:Math.pow(fe,t),new xn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new xn(te(this.r),te(this.g),te(this.b),Zi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yc,formatHex:Yc,formatHex8:Cm,formatRgb:Fc,toString:Fc}));function Yc(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}`}function Cm(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}${Jt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fc(){const t=Zi(this.opacity);return`${t===1?"rgb(":"rgba("}${te(this.r)}, ${te(this.g)}, ${te(this.b)}${t===1?")":`, ${t})`}`}function Zi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function te(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Jt(t){return t=te(t),(t<16?"0":"")+t.toString(16)}function qc(t,n,a,s){return s<=0?t=n=a=NaN:a<=0||a>=1?t=n=NaN:n<=0&&(t=NaN),new rt$1(t,n,a,s)}function Eh(t){if(t instanceof rt$1)return new rt$1(t.h,t.s,t.l,t.opacity);if(t instanceof Xt||(t=qt(t)),!t)return new rt$1;if(t instanceof rt$1)return t;t=t.rgb();var n=t.r/255,a=t.g/255,s=t.b/255,l=Math.min(n,a,s),u=Math.max(n,a,s),c=NaN,p=u-l,d=(u+l)/2;return p?(n===u?c=(a-s)/p+(a<s)*6:a===u?c=(s-n)/p+2:c=(n-a)/p+4,p/=d<.5?u+l:2-u-l,c*=60):p=d>0&&d<1?0:c,new rt$1(c,p,d,t.opacity)}function Qi(t,n,a,s){return arguments.length===1?Eh(t):new rt$1(t,n,a,s??1)}function rt$1(t,n,a,s){this.h=+t,this.s=+n,this.l=+a,this.opacity=+s}rr(rt$1,Qi,Qr(Xt,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new rt$1(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?fe:Math.pow(fe,t),new rt$1(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*n,l=2*a-s;return new xn(Ea(t>=240?t-240:t+120,l,s),Ea(t,l,s),Ea(t<120?t+240:t-120,l,s),this.opacity)},clamp(){return new rt$1(Lc(this.h),hi(this.s),hi(this.l),Zi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Zi(this.opacity);return`${t===1?"hsl(":"hsla("}${Lc(this.h)}, ${hi(this.s)*100}%, ${hi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Lc(t){return t=(t||0)%360,t<0?t+360:t}function hi(t){return Math.max(0,Math.min(1,t||0))}function Ea(t,n,a){return(t<60?n+(a-n)*t/60:t<180?a:t<240?n+(a-n)*(240-t)/60:n)*255}const kh=Math.PI/180,Nh=180/Math.PI,Ki=18,Rh=.96422,Ih=1,Ch=.82521,Ph=4/29,Oe=6/29,Dh=3*Oe*Oe,Pm=Oe*Oe*Oe;function zh(t){if(t instanceof at)return new at(t.l,t.a,t.b,t.opacity);if(t instanceof lt$1)return Yh(t);t instanceof xn||(t=Mf(t));var n=Ia(t.r),a=Ia(t.g),s=Ia(t.b),l=ka((.2225045*n+.7168786*a+.0606169*s)/Ih),u,c;return n===a&&a===s?u=c=l:(u=ka((.4360747*n+.3850649*a+.1430804*s)/Rh),c=ka((.0139322*n+.0971045*a+.7141733*s)/Ch)),new at(116*l-16,500*(u-l),200*(l-c),t.opacity)}function Dm(t,n){return new at(t,0,0,n??1)}function Ji(t,n,a,s){return arguments.length===1?zh(t):new at(t,n,a,s??1)}function at(t,n,a,s){this.l=+t,this.a=+n,this.b=+a,this.opacity=+s}rr(at,Ji,Qr(Xt,{brighter(t){return new at(this.l+Ki*(t??1),this.a,this.b,this.opacity)},darker(t){return new at(this.l-Ki*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,a=isNaN(this.b)?t:t-this.b/200;return n=Rh*Na(n),t=Ih*Na(t),a=Ch*Na(a),new xn(Ra(3.1338561*n-1.6168667*t-.4906146*a),Ra(-.9787684*n+1.9161415*t+.033454*a),Ra(.0719453*n-.2289914*t+1.4052427*a),this.opacity)}}));function ka(t){return t>Pm?Math.pow(t,1/3):t/Dh+Ph}function Na(t){return t>Oe?t*t*t:Dh*(t-Ph)}function Ra(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ia(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Oh(t){if(t instanceof lt$1)return new lt$1(t.h,t.c,t.l,t.opacity);if(t instanceof at||(t=zh(t)),t.a===0&&t.b===0)return new lt$1(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Nh;return new lt$1(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function zm(t,n,a,s){return arguments.length===1?Oh(t):new lt$1(a,n,t,s??1)}function no(t,n,a,s){return arguments.length===1?Oh(t):new lt$1(t,n,a,s??1)}function lt$1(t,n,a,s){this.h=+t,this.c=+n,this.l=+a,this.opacity=+s}function Yh(t){if(isNaN(t.h))return new at(t.l,0,0,t.opacity);var n=t.h*kh;return new at(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}rr(lt$1,no,Qr(Xt,{brighter(t){return new lt$1(this.h,this.c,this.l+Ki*(t??1),this.opacity)},darker(t){return new lt$1(this.h,this.c,this.l-Ki*(t??1),this.opacity)},rgb(){return Yh(this).rgb()}}));var Fh=-.14861,$f=1.78277,Tf=-.29227,Ho=-.90649,Yr=1.97294,Bc=Yr*Ho,Uc=Yr*$f,Xc=$f*Tf-Ho*Fh;function Om(t){if(t instanceof ee)return new ee(t.h,t.s,t.l,t.opacity);t instanceof xn||(t=Mf(t));var n=t.r/255,a=t.g/255,s=t.b/255,l=(Xc*s+Bc*n-Uc*a)/(Xc+Bc-Uc),u=s-l,c=(Yr*(a-l)-Tf*u)/Ho,p=Math.sqrt(c*c+u*u)/(Yr*l*(1-l)),d=p?Math.atan2(c,u)*Nh-120:NaN;return new ee(d<0?d+360:d,p,l,t.opacity)}function ut(t,n,a,s){return arguments.length===1?Om(t):new ee(t,n,a,s??1)}function ee(t,n,a,s){this.h=+t,this.s=+n,this.l=+a,this.opacity=+s}rr(ee,ut,Qr(Xt,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new ee(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?fe:Math.pow(fe,t),new ee(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*kh,n=+this.l,a=isNaN(this.s)?0:this.s*n*(1-n),s=Math.cos(t),l=Math.sin(t);return new xn(255*(n+a*(Fh*s+$f*l)),255*(n+a*(Tf*s+Ho*l)),255*(n+a*(Yr*s)),this.opacity)}}));function qh(t,n,a,s,l){var u=t*t,c=u*t;return((1-3*t+3*u-c)*n+(4-6*u+3*c)*a+(1+3*t+3*u-3*c)*s+c*l)/6}function Lh(t){var n=t.length-1;return function(a){var s=a<=0?a=0:a>=1?(a=1,n-1):Math.floor(a*n),l=t[s],u=t[s+1],c=s>0?t[s-1]:2*l-u,p=s<n-1?t[s+2]:2*u-l;return qh((a-s/n)*n,c,l,u,p)}}function Bh(t){var n=t.length;return function(a){var s=Math.floor(((a%=1)<0?++a:a)*n),l=t[(s+n-1)%n],u=t[s%n],c=t[(s+1)%n],p=t[(s+2)%n];return qh((a-s/n)*n,l,u,c,p)}}const jo=t=>()=>t;function Uh(t,n){return function(a){return t+a*n}}function Ym(t,n,a){return t=Math.pow(t,a),n=Math.pow(n,a)-t,a=1/a,function(s){return Math.pow(t+s*n,a)}}function Wo(t,n){var a=n-t;return a?Uh(t,a>180||a<-180?a-360*Math.round(a/360):a):jo(isNaN(t)?n:t)}function Fm(t){return(t=+t)==1?Mn:function(n,a){return a-n?Ym(n,a,t):jo(isNaN(n)?a:n)}}function Mn(t,n){var a=n-t;return a?Uh(t,a):jo(isNaN(t)?n:t)}const Fr=function t(n){var a=Fm(n);function s(l,u){var c=a((l=Ue(l)).r,(u=Ue(u)).r),p=a(l.g,u.g),d=a(l.b,u.b),x=Mn(l.opacity,u.opacity);return function(_){return l.r=c(_),l.g=p(_),l.b=d(_),l.opacity=x(_),l+""}}return s.gamma=t,s}(1);function Xh(t){return function(n){var a=n.length,s=new Array(a),l=new Array(a),u=new Array(a),c,p;for(c=0;c<a;++c)p=Ue(n[c]),s[c]=p.r||0,l[c]=p.g||0,u[c]=p.b||0;return s=t(s),l=t(l),u=t(u),p.opacity=1,function(d){return p.r=s(d),p.g=l(d),p.b=u(d),p+""}}}var Hh=Xh(Lh),qm=Xh(Bh);function Af(t,n){n||(n=[]);var a=t?Math.min(n.length,t.length):0,s=n.slice(),l;return function(u){for(l=0;l<a;++l)s[l]=t[l]*(1-u)+n[l]*u;return s}}function jh(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Lm(t,n){return(jh(n)?Af:Wh)(t,n)}function Wh(t,n){var a=n?n.length:0,s=t?Math.min(a,t.length):0,l=new Array(s),u=new Array(a),c;for(c=0;c<s;++c)l[c]=Ht(t[c],n[c]);for(;c<a;++c)u[c]=n[c];return function(p){for(c=0;c<s;++c)u[c]=l[c](p);return u}}function Vh(t,n){var a=new Date;return t=+t,n=+n,function(s){return a.setTime(t*(1-s)+n*s),a}}function Kn(t,n){return t=+t,n=+n,function(a){return t*(1-a)+n*a}}function Gh(t,n){var a={},s={},l;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(l in n)l in t?a[l]=Ht(t[l],n[l]):s[l]=n[l];return function(u){for(l in a)s[l]=a[l](u);return s}}var vu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ca=new RegExp(vu.source,"g");function Bm(t){return function(){return t}}function Um(t){return function(n){return t(n)+""}}function Sf(t,n){var a=vu.lastIndex=Ca.lastIndex=0,s,l,u,c=-1,p=[],d=[];for(t=t+"",n=n+"";(s=vu.exec(t))&&(l=Ca.exec(n));)(u=l.index)>a&&(u=n.slice(a,u),p[c]?p[c]+=u:p[++c]=u),(s=s[0])===(l=l[0])?p[c]?p[c]+=l:p[++c]=l:(p[++c]=null,d.push({i:c,x:Kn(s,l)})),a=Ca.lastIndex;return a<n.length&&(u=n.slice(a),p[c]?p[c]+=u:p[++c]=u),p.length<2?d[0]?Um(d[0].x):Bm(n):(n=d.length,function(x){for(var _=0,S;_<n;++_)p[(S=d[_]).i]=S.x(x);return p.join("")})}function Ht(t,n){var a=typeof n,s;return n==null||a==="boolean"?jo(n):(a==="number"?Kn:a==="string"?(s=qt(n))?(n=s,Fr):Sf:n instanceof qt?Fr:n instanceof Date?Vh:jh(n)?Af:Array.isArray(n)?Wh:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Gh:Kn)(t,n)}function Xm(t){var n=t.length;return function(a){return t[Math.max(0,Math.min(n-1,Math.floor(a*n)))]}}function Hm(t,n){var a=Wo(+t,+n);return function(s){var l=a(s);return l-360*Math.floor(l/360)}}function Vo(t,n){return t=+t,n=+n,function(a){return Math.round(t*(1-a)+n*a)}}var Hc=180/Math.PI,bu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zh(t,n,a,s,l,u){var c,p,d;return(c=Math.sqrt(t*t+n*n))&&(t/=c,n/=c),(d=t*a+n*s)&&(a-=t*d,s-=n*d),(p=Math.sqrt(a*a+s*s))&&(a/=p,s/=p,d/=p),t*s<n*a&&(t=-t,n=-n,d=-d,c=-c),{translateX:l,translateY:u,rotate:Math.atan2(n,t)*Hc,skewX:Math.atan(d)*Hc,scaleX:c,scaleY:p}}var di;function jm(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?bu:Zh(n.a,n.b,n.c,n.d,n.e,n.f)}function Wm(t){return t==null||(di||(di=document.createElementNS("http://www.w3.org/2000/svg","g")),di.setAttribute("transform",t),!(t=di.transform.baseVal.consolidate()))?bu:(t=t.matrix,Zh(t.a,t.b,t.c,t.d,t.e,t.f))}function Qh(t,n,a,s){function l(x){return x.length?x.pop()+" ":""}function u(x,_,S,T,A,R){if(x!==S||_!==T){var D=A.push("translate(",null,n,null,a);R.push({i:D-4,x:Kn(x,S)},{i:D-2,x:Kn(_,T)})}else(S||T)&&A.push("translate("+S+n+T+a)}function c(x,_,S,T){x!==_?(x-_>180?_+=360:_-x>180&&(x+=360),T.push({i:S.push(l(S)+"rotate(",null,s)-2,x:Kn(x,_)})):_&&S.push(l(S)+"rotate("+_+s)}function p(x,_,S,T){x!==_?T.push({i:S.push(l(S)+"skewX(",null,s)-2,x:Kn(x,_)}):_&&S.push(l(S)+"skewX("+_+s)}function d(x,_,S,T,A,R){if(x!==S||_!==T){var D=A.push(l(A)+"scale(",null,",",null,")");R.push({i:D-4,x:Kn(x,S)},{i:D-2,x:Kn(_,T)})}else(S!==1||T!==1)&&A.push(l(A)+"scale("+S+","+T+")")}return function(x,_){var S=[],T=[];return x=t(x),_=t(_),u(x.translateX,x.translateY,_.translateX,_.translateY,S,T),c(x.rotate,_.rotate,S,T),p(x.skewX,_.skewX,S,T),d(x.scaleX,x.scaleY,_.scaleX,_.scaleY,S,T),x=_=null,function(A){for(var R=-1,D=T.length,O;++R<D;)S[(O=T[R]).i]=O.x(A);return S.join("")}}}var Kh=Qh(jm,"px, ","px)","deg)"),Jh=Qh(Wm,", ",")",")"),Vm=1e-12;function jc(t){return((t=Math.exp(t))+1/t)/2}function Gm(t){return((t=Math.exp(t))-1/t)/2}function Zm(t){return((t=Math.exp(2*t))-1)/(t+1)}const n0=function t(n,a,s){function l(u,c){var p=u[0],d=u[1],x=u[2],_=c[0],S=c[1],T=c[2],A=_-p,R=S-d,D=A*A+R*R,O,F;if(D<Vm)F=Math.log(T/x)/n,O=function(en){return[p+en*A,d+en*R,x*Math.exp(n*en*F)]};else{var z=Math.sqrt(D),j=(T*T-x*x+s*D)/(2*x*a*z),Z=(T*T-x*x-s*D)/(2*T*a*z),W=Math.log(Math.sqrt(j*j+1)-j),J=Math.log(Math.sqrt(Z*Z+1)-Z);F=(J-W)/n,O=function(en){var tn=en*F,Ct=jc(W),Q=x/(a*z)*(Ct*Zm(n*tn+W)-Gm(W));return[p+Q*A,d+Q*R,x*Ct/jc(n*tn+W)]}}return O.duration=F*1e3*n/Math.SQRT2,O}return l.rho=function(u){var c=Math.max(.001,+u),p=c*c,d=p*p;return t(c,p,d)},l}(Math.SQRT2,2,4);function t0(t){return function(n,a){var s=t((n=Qi(n)).h,(a=Qi(a)).h),l=Mn(n.s,a.s),u=Mn(n.l,a.l),c=Mn(n.opacity,a.opacity);return function(p){return n.h=s(p),n.s=l(p),n.l=u(p),n.opacity=c(p),n+""}}}const Qm=t0(Wo);var Km=t0(Mn);function Jm(t,n){var a=Mn((t=Ji(t)).l,(n=Ji(n)).l),s=Mn(t.a,n.a),l=Mn(t.b,n.b),u=Mn(t.opacity,n.opacity);return function(c){return t.l=a(c),t.a=s(c),t.b=l(c),t.opacity=u(c),t+""}}function e0(t){return function(n,a){var s=t((n=no(n)).h,(a=no(a)).h),l=Mn(n.c,a.c),u=Mn(n.l,a.l),c=Mn(n.opacity,a.opacity);return function(p){return n.h=s(p),n.c=l(p),n.l=u(p),n.opacity=c(p),n+""}}}const ny=e0(Wo);var ty=e0(Mn);function r0(t){return function n(a){a=+a;function s(l,u){var c=t((l=ut(l)).h,(u=ut(u)).h),p=Mn(l.s,u.s),d=Mn(l.l,u.l),x=Mn(l.opacity,u.opacity);return function(_){return l.h=c(_),l.s=p(_),l.l=d(Math.pow(_,a)),l.opacity=x(_),l+""}}return s.gamma=n,s}(1)}const ey=r0(Wo);var Go=r0(Mn);function i0(t,n){n===void 0&&(n=t,t=Ht);for(var a=0,s=n.length-1,l=n[0],u=new Array(s<0?0:s);a<s;)u[a]=t(l,l=n[++a]);return function(c){var p=Math.max(0,Math.min(s-1,Math.floor(c*=s)));return u[p](c-p)}}function ry(t,n){for(var a=new Array(n),s=0;s<n;++s)a[s]=t(s/(n-1));return a}var Xe=0,yr=0,fr=0,o0=1e3,to,_r,eo=0,ce=0,Zo=0,qr=typeof performance=="object"&&performance.now?performance:Date,a0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Kr(){return ce||(a0(iy),ce=qr.now()+Zo)}function iy(){ce=0}function Lr(){this._call=this._time=this._next=null}Lr.prototype=Qo.prototype={constructor:Lr,restart:function(t,n,a){if(typeof t!="function")throw new TypeError("callback is not a function");a=(a==null?Kr():+a)+(n==null?0:+n),!this._next&&_r!==this&&(_r?_r._next=this:to=this,_r=this),this._call=t,this._time=a,wu()},stop:function(){this._call&&(this._call=null,this._time=1/0,wu())}};function Qo(t,n,a){var s=new Lr;return s.restart(t,n,a),s}function u0(){Kr(),++Xe;for(var t=to,n;t;)(n=ce-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Xe}function Wc(){ce=(eo=qr.now())+Zo,Xe=yr=0;try{u0()}finally{Xe=0,ay(),ce=0}}function oy(){var t=qr.now(),n=t-eo;n>o0&&(Zo-=n,eo=t)}function ay(){for(var t,n=to,a,s=1/0;n;)n._call?(s>n._time&&(s=n._time),t=n,n=n._next):(a=n._next,n._next=null,n=t?t._next=a:to=a);_r=t,wu(s)}function wu(t){if(!Xe){yr&&(yr=clearTimeout(yr));var n=t-ce;n>24?(t<1/0&&(yr=setTimeout(Wc,t-qr.now()-Zo)),fr&&(fr=clearInterval(fr))):(fr||(eo=qr.now(),fr=setInterval(oy,o0)),Xe=1,a0(Wc))}}function xu(t,n,a){var s=new Lr;return n=n==null?0:+n,s.restart(l=>{s.stop(),t(l+n)},n,a),s}function uy(t,n,a){var s=new Lr,l=n;return n==null?(s.restart(t,n,a),s):(s._restart=s.restart,s.restart=function(u,c,p){c=+c,p=p==null?Kr():+p,s._restart(function d(x){x+=l,s._restart(d,l+=c,p),u(x)},c,p)},s.restart(t,n,a),s)}var fy=pe("start","end","cancel","interrupt"),cy=[],f0=0,Mu=1,$u=2,zi=3,Vc=4,Tu=5,Oi=6;function Ko(t,n,a,s,l,u){var c=t.__transition;if(!c)t.__transition={};else if(a in c)return;sy(t,a,{name:n,index:s,group:l,on:fy,tween:cy,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:f0})}function Ef(t,n){var a=ft(t,n);if(a.state>f0)throw new Error("too late; already scheduled");return a}function _t(t,n){var a=ft(t,n);if(a.state>zi)throw new Error("too late; already running");return a}function ft(t,n){var a=t.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function sy(t,n,a){var s=t.__transition,l;s[n]=a,a.timer=Qo(u,0,a.time);function u(x){a.state=Mu,a.timer.restart(c,a.delay,a.time),a.delay<=x&&c(x-a.delay)}function c(x){var _,S,T,A;if(a.state!==Mu)return d();for(_ in s)if(A=s[_],A.name===a.name){if(A.state===zi)return xu(c);A.state===Vc?(A.state=Oi,A.timer.stop(),A.on.call("interrupt",t,t.__data__,A.index,A.group),delete s[_]):+_<n&&(A.state=Oi,A.timer.stop(),A.on.call("cancel",t,t.__data__,A.index,A.group),delete s[_])}if(xu(function(){a.state===zi&&(a.state=Vc,a.timer.restart(p,a.delay,a.time),p(x))}),a.state=$u,a.on.call("start",t,t.__data__,a.index,a.group),a.state===$u){for(a.state=zi,l=new Array(T=a.tween.length),_=0,S=-1;_<T;++_)(A=a.tween[_].value.call(t,t.__data__,a.index,a.group))&&(l[++S]=A);l.length=S+1}}function p(x){for(var _=x<a.duration?a.ease.call(null,x/a.duration):(a.timer.restart(d),a.state=Tu,1),S=-1,T=l.length;++S<T;)l[S].call(t,_);a.state===Tu&&(a.on.call("end",t,t.__data__,a.index,a.group),d())}function d(){a.state=Oi,a.timer.stop(),delete s[n];for(var x in s)return;delete t.__transition}}function re(t,n){var a=t.__transition,s,l,u=!0,c;if(a){n=n==null?null:n+"";for(c in a){if((s=a[c]).name!==n){u=!1;continue}l=s.state>$u&&s.state<Tu,s.state=Oi,s.timer.stop(),s.on.call(l?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete a[c]}u&&delete t.__transition}}function ly(t){return this.each(function(){re(this,t)})}function hy(t,n){var a,s;return function(){var l=_t(this,t),u=l.tween;if(u!==a){s=a=u;for(var c=0,p=s.length;c<p;++c)if(s[c].name===n){s=s.slice(),s.splice(c,1);break}}l.tween=s}}function dy(t,n,a){var s,l;if(typeof a!="function")throw new Error;return function(){var u=_t(this,t),c=u.tween;if(c!==s){l=(s=c).slice();for(var p={name:n,value:a},d=0,x=l.length;d<x;++d)if(l[d].name===n){l[d]=p;break}d===x&&l.push(p)}u.tween=l}}function gy(t,n){var a=this._id;if(t+="",arguments.length<2){for(var s=ft(this.node(),a).tween,l=0,u=s.length,c;l<u;++l)if((c=s[l]).name===t)return c.value;return null}return this.each((n==null?hy:dy)(a,t,n))}function kf(t,n,a){var s=t._id;return t.each(function(){var l=_t(this,s);(l.value||(l.value={}))[n]=a.apply(this,arguments)}),function(l){return ft(l,s).value[n]}}function c0(t,n){var a;return(typeof n=="number"?Kn:n instanceof qt?Fr:(a=qt(n))?(n=a,Fr):Sf)(t,n)}function py(t){return function(){this.removeAttribute(t)}}function my(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yy(t,n,a){var s,l=a+"",u;return function(){var c=this.getAttribute(t);return c===l?null:c===s?u:u=n(s=c,a)}}function _y(t,n,a){var s,l=a+"",u;return function(){var c=this.getAttributeNS(t.space,t.local);return c===l?null:c===s?u:u=n(s=c,a)}}function vy(t,n,a){var s,l,u;return function(){var c,p=a(this),d;return p==null?void this.removeAttribute(t):(c=this.getAttribute(t),d=p+"",c===d?null:c===s&&d===l?u:(l=d,u=n(s=c,p)))}}function by(t,n,a){var s,l,u;return function(){var c,p=a(this),d;return p==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),d=p+"",c===d?null:c===s&&d===l?u:(l=d,u=n(s=c,p)))}}function wy(t,n){var a=Zr(t),s=a==="transform"?Jh:c0;return this.attrTween(t,typeof n=="function"?(a.local?by:vy)(a,s,kf(this,"attr."+t,n)):n==null?(a.local?my:py)(a):(a.local?_y:yy)(a,s,n))}function xy(t,n){return function(a){this.setAttribute(t,n.call(this,a))}}function My(t,n){return function(a){this.setAttributeNS(t.space,t.local,n.call(this,a))}}function $y(t,n){var a,s;function l(){var u=n.apply(this,arguments);return u!==s&&(a=(s=u)&&My(t,u)),a}return l._value=n,l}function Ty(t,n){var a,s;function l(){var u=n.apply(this,arguments);return u!==s&&(a=(s=u)&&xy(t,u)),a}return l._value=n,l}function Ay(t,n){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var s=Zr(t);return this.tween(a,(s.local?$y:Ty)(s,n))}function Sy(t,n){return function(){Ef(this,t).delay=+n.apply(this,arguments)}}function Ey(t,n){return n=+n,function(){Ef(this,t).delay=n}}function ky(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Sy:Ey)(n,t)):ft(this.node(),n).delay}function Ny(t,n){return function(){_t(this,t).duration=+n.apply(this,arguments)}}function Ry(t,n){return n=+n,function(){_t(this,t).duration=n}}function Iy(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Ny:Ry)(n,t)):ft(this.node(),n).duration}function Cy(t,n){if(typeof n!="function")throw new Error;return function(){_t(this,t).ease=n}}function Py(t){var n=this._id;return arguments.length?this.each(Cy(n,t)):ft(this.node(),n).ease}function Dy(t,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;_t(this,t).ease=a}}function zy(t){if(typeof t!="function")throw new Error;return this.each(Dy(this._id,t))}function Oy(t){typeof t!="function"&&(t=vf(t));for(var n=this._groups,a=n.length,s=new Array(a),l=0;l<a;++l)for(var u=n[l],c=u.length,p=s[l]=[],d,x=0;x<c;++x)(d=u[x])&&t.call(d,d.__data__,x,u)&&p.push(d);return new gt(s,this._parents,this._name,this._id)}function Yy(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,a=t._groups,s=n.length,l=a.length,u=Math.min(s,l),c=new Array(s),p=0;p<u;++p)for(var d=n[p],x=a[p],_=d.length,S=c[p]=new Array(_),T,A=0;A<_;++A)(T=d[A]||x[A])&&(S[A]=T);for(;p<s;++p)c[p]=n[p];return new gt(c,this._parents,this._name,this._id)}function Fy(t){return(t+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function qy(t,n,a){var s,l,u=Fy(n)?Ef:_t;return function(){var c=u(this,t),p=c.on;p!==s&&(l=(s=p).copy()).on(n,a),c.on=l}}function Ly(t,n){var a=this._id;return arguments.length<2?ft(this.node(),a).on.on(t):this.each(qy(a,t,n))}function By(t){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==t)return;n&&n.removeChild(this)}}function Uy(){return this.on("end.remove",By(this._id))}function Xy(t){var n=this._name,a=this._id;typeof t!="function"&&(t=Bo(t));for(var s=this._groups,l=s.length,u=new Array(l),c=0;c<l;++c)for(var p=s[c],d=p.length,x=u[c]=new Array(d),_,S,T=0;T<d;++T)(_=p[T])&&(S=t.call(_,_.__data__,T,p))&&("__data__"in _&&(S.__data__=_.__data__),x[T]=S,Ko(x[T],n,a,T,x,ft(_,a)));return new gt(u,this._parents,n,a)}function Hy(t){var n=this._name,a=this._id;typeof t!="function"&&(t=_f(t));for(var s=this._groups,l=s.length,u=[],c=[],p=0;p<l;++p)for(var d=s[p],x=d.length,_,S=0;S<x;++S)if(_=d[S]){for(var T=t.call(_,_.__data__,S,d),A,R=ft(_,a),D=0,O=T.length;D<O;++D)(A=T[D])&&Ko(A,n,a,D,T,R);u.push(T),c.push(_)}return new gt(u,c,n,a)}var jy=me.prototype.constructor;function Wy(){return new jy(this._groups,this._parents)}function Vy(t,n){var a,s,l;return function(){var u=ue(this,t),c=(this.style.removeProperty(t),ue(this,t));return u===c?null:u===a&&c===s?l:l=n(a=u,s=c)}}function s0(t){return function(){this.style.removeProperty(t)}}function Gy(t,n,a){var s,l=a+"",u;return function(){var c=ue(this,t);return c===l?null:c===s?u:u=n(s=c,a)}}function Zy(t,n,a){var s,l,u;return function(){var c=ue(this,t),p=a(this),d=p+"";return p==null&&(d=p=(this.style.removeProperty(t),ue(this,t))),c===d?null:c===s&&d===l?u:(l=d,u=n(s=c,p))}}function Qy(t,n){var a,s,l,u="style."+n,c="end."+u,p;return function(){var d=_t(this,t),x=d.on,_=d.value[u]==null?p||(p=s0(n)):void 0;(x!==a||l!==_)&&(s=(a=x).copy()).on(c,l=_),d.on=s}}function Ky(t,n,a){var s=(t+="")=="transform"?Kh:c0;return n==null?this.styleTween(t,Vy(t,s)).on("end.style."+t,s0(t)):typeof n=="function"?this.styleTween(t,Zy(t,s,kf(this,"style."+t,n))).each(Qy(this._id,t)):this.styleTween(t,Gy(t,s,n),a).on("end.style."+t,null)}function Jy(t,n,a){return function(s){this.style.setProperty(t,n.call(this,s),a)}}function n_(t,n,a){var s,l;function u(){var c=n.apply(this,arguments);return c!==l&&(s=(l=c)&&Jy(t,c,a)),s}return u._value=n,u}function t_(t,n,a){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(n==null)return this.tween(s,null);if(typeof n!="function")throw new Error;return this.tween(s,n_(t,n,a??""))}function e_(t){return function(){this.textContent=t}}function r_(t){return function(){var n=t(this);this.textContent=n??""}}function i_(t){return this.tween("text",typeof t=="function"?r_(kf(this,"text",t)):e_(t==null?"":t+""))}function o_(t){return function(n){this.textContent=t.call(this,n)}}function a_(t){var n,a;function s(){var l=t.apply(this,arguments);return l!==a&&(n=(a=l)&&o_(l)),n}return s._value=t,s}function u_(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,a_(t))}function f_(){for(var t=this._name,n=this._id,a=h0(),s=this._groups,l=s.length,u=0;u<l;++u)for(var c=s[u],p=c.length,d,x=0;x<p;++x)if(d=c[x]){var _=ft(d,n);Ko(d,t,a,x,c,{time:_.time+_.delay+_.duration,delay:0,duration:_.duration,ease:_.ease})}return new gt(s,this._parents,t,a)}function c_(){var t,n,a=this,s=a._id,l=a.size();return new Promise(function(u,c){var p={value:c},d={value:function(){--l===0&&u()}};a.each(function(){var x=_t(this,s),_=x.on;_!==t&&(n=(t=_).copy(),n._.cancel.push(p),n._.interrupt.push(p),n._.end.push(d)),x.on=n}),l===0&&u()})}var s_=0;function gt(t,n,a,s){this._groups=t,this._parents=n,this._name=a,this._id=s}function l0(t){return me().transition(t)}function h0(){return++s_}var bt=me.prototype;gt.prototype=l0.prototype={constructor:gt,select:Xy,selectAll:Hy,selectChild:bt.selectChild,selectChildren:bt.selectChildren,filter:Oy,merge:Yy,selection:Wy,transition:f_,call:bt.call,nodes:bt.nodes,node:bt.node,size:bt.size,empty:bt.empty,each:bt.each,on:Ly,attr:wy,attrTween:Ay,style:Ky,styleTween:t_,text:i_,textTween:u_,remove:Uy,tween:gy,delay:ky,duration:Iy,ease:Py,easeVarying:zy,end:c_,[Symbol.iterator]:bt[Symbol.iterator]};const l_=t=>+t;function h_(t){return t*t}function d_(t){return t*(2-t)}function Gc(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function g_(t){return t*t*t}function p_(t){return--t*t*t+1}function Au(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Nf=3,m_=function t(n){n=+n;function a(s){return Math.pow(s,n)}return a.exponent=t,a}(Nf),y_=function t(n){n=+n;function a(s){return 1-Math.pow(1-s,n)}return a.exponent=t,a}(Nf),Zc=function t(n){n=+n;function a(s){return((s*=2)<=1?Math.pow(s,n):2-Math.pow(2-s,n))/2}return a.exponent=t,a}(Nf),d0=Math.PI,g0=d0/2;function __(t){return+t==1?1:1-Math.cos(t*g0)}function v_(t){return Math.sin(t*g0)}function Qc(t){return(1-Math.cos(d0*t))/2}function Lt(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function b_(t){return Lt(1-+t)}function w_(t){return 1-Lt(t)}function Kc(t){return((t*=2)<=1?Lt(1-t):2-Lt(t-1))/2}function x_(t){return 1-Math.sqrt(1-t*t)}function M_(t){return Math.sqrt(1- --t*t)}function Jc(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Su=4/11,$_=6/11,T_=8/11,A_=3/4,S_=9/11,E_=10/11,k_=15/16,N_=21/22,R_=63/64,gi=1/Su/Su;function I_(t){return 1-Br(1-t)}function Br(t){return(t=+t)<Su?gi*t*t:t<T_?gi*(t-=$_)*t+A_:t<E_?gi*(t-=S_)*t+k_:gi*(t-=N_)*t+R_}function C_(t){return((t*=2)<=1?1-Br(1-t):Br(t-1)+1)/2}var Rf=1.70158,P_=function t(n){n=+n;function a(s){return(s=+s)*s*(n*(s-1)+s)}return a.overshoot=t,a}(Rf),D_=function t(n){n=+n;function a(s){return--s*s*((s+1)*n+s)+1}return a.overshoot=t,a}(Rf),ns=function t(n){n=+n;function a(s){return((s*=2)<1?s*s*((n+1)*s-n):(s-=2)*s*((n+1)*s+n)+2)/2}return a.overshoot=t,a}(Rf),He=2*Math.PI,If=1,Cf=.3,z_=function t(n,a){var s=Math.asin(1/(n=Math.max(1,n)))*(a/=He);function l(u){return n*Lt(- --u)*Math.sin((s-u)/a)}return l.amplitude=function(u){return t(u,a*He)},l.period=function(u){return t(n,u)},l}(If,Cf),ts=function t(n,a){var s=Math.asin(1/(n=Math.max(1,n)))*(a/=He);function l(u){return 1-n*Lt(u=+u)*Math.sin((u+s)/a)}return l.amplitude=function(u){return t(u,a*He)},l.period=function(u){return t(n,u)},l}(If,Cf),O_=function t(n,a){var s=Math.asin(1/(n=Math.max(1,n)))*(a/=He);function l(u){return((u=u*2-1)<0?n*Lt(-u)*Math.sin((s-u)/a):2-n*Lt(u)*Math.sin((s+u)/a))/2}return l.amplitude=function(u){return t(u,a*He)},l.period=function(u){return t(n,u)},l}(If,Cf),Y_={time:null,delay:0,duration:250,ease:Au};function F_(t,n){for(var a;!(a=t.__transition)||!(a=a[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return a}function q_(t){var n,a;t instanceof gt?(n=t._id,t=t._name):(n=h0(),(a=Y_).time=Kr(),t=t==null?null:t+"");for(var s=this._groups,l=s.length,u=0;u<l;++u)for(var c=s[u],p=c.length,d,x=0;x<p;++x)(d=c[x])&&Ko(d,t,n,x,c,a||F_(d,n));return new gt(s,this._parents,t,n)}me.prototype.interrupt=ly;me.prototype.transition=q_;var L_=[null];function B_(t,n){var a=t.__transition,s,l;if(a){n=n==null?null:n+"";for(l in a)if((s=a[l]).state>Mu&&s.name===n)return new gt([[t]],L_,n,+l)}return null}const Pa=t=>()=>t;function U_(t,{sourceEvent:n,target:a,selection:s,mode:l,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},selection:{value:s,enumerable:!0,configurable:!0},mode:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}function X_(t){t.stopImmediatePropagation()}function Da(t){t.preventDefault(),t.stopImmediatePropagation()}var es={name:"drag"},za={name:"space"},Me={name:"handle"},$e={name:"center"};const{abs:rs,max:Sn,min:En}=Math;function is(t){return[+t[0],+t[1]]}function Eu(t){return[is(t[0]),is(t[1])]}var Yi={name:"x",handles:["w","e"].map(Ur),input:function(t,n){return t==null?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Fi={name:"y",handles:["n","s"].map(Ur),input:function(t,n){return t==null?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},H_={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Ur),input:function(t){return t==null?null:Eu(t)},output:function(t){return t}},wt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},os={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},as={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},j_={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},W_={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ur(t){return{type:t}}function V_(t){return!t.ctrlKey&&!t.button}function G_(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Z_(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oa(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Q_(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function K_(t){var n=t.__brush;return n?n.dim.output(n.selection):null}function J_(){return Pf(Yi)}function nv(){return Pf(Fi)}function tv(){return Pf(H_)}function Pf(t){var n=G_,a=V_,s=Z_,l=!0,u=pe("start","brush","end"),c=6,p;function d(O){var F=O.property("__brush",D).selectAll(".overlay").data([Ur("overlay")]);F.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",wt.overlay).merge(F).each(function(){var j=Oa(this).extent;X(this).attr("x",j[0][0]).attr("y",j[0][1]).attr("width",j[1][0]-j[0][0]).attr("height",j[1][1]-j[0][1])}),O.selectAll(".selection").data([Ur("selection")]).enter().append("rect").attr("class","selection").attr("cursor",wt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var z=O.selectAll(".handle").data(t.handles,function(j){return j.type});z.exit().remove(),z.enter().append("rect").attr("class",function(j){return"handle handle--"+j.type}).attr("cursor",function(j){return wt[j.type]}),O.each(x).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",T).filter(s).on("touchstart.brush",T).on("touchmove.brush",A).on("touchend.brush touchcancel.brush",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}d.move=function(O,F,z){O.tween?O.on("start.brush",function(j){_(this,arguments).beforestart().start(j)}).on("interrupt.brush end.brush",function(j){_(this,arguments).end(j)}).tween("brush",function(){var j=this,Z=j.__brush,W=_(j,arguments),J=Z.selection,en=t.input(typeof F=="function"?F.apply(this,arguments):F,Z.extent),tn=Ht(J,en);function Ct(Q){Z.selection=Q===1&&en===null?null:tn(Q),x.call(j),W.brush()}return J!==null&&en!==null?Ct:Ct(1)}):O.each(function(){var j=this,Z=arguments,W=j.__brush,J=t.input(typeof F=="function"?F.apply(j,Z):F,W.extent),en=_(j,Z).beforestart();re(j),W.selection=J===null?null:J,x.call(j),en.start(z).brush(z).end(z)})},d.clear=function(O,F){d.move(O,null,F)};function x(){var O=X(this),F=Oa(this).selection;F?(O.selectAll(".selection").style("display",null).attr("x",F[0][0]).attr("y",F[0][1]).attr("width",F[1][0]-F[0][0]).attr("height",F[1][1]-F[0][1]),O.selectAll(".handle").style("display",null).attr("x",function(z){return z.type[z.type.length-1]==="e"?F[1][0]-c/2:F[0][0]-c/2}).attr("y",function(z){return z.type[0]==="s"?F[1][1]-c/2:F[0][1]-c/2}).attr("width",function(z){return z.type==="n"||z.type==="s"?F[1][0]-F[0][0]+c:c}).attr("height",function(z){return z.type==="e"||z.type==="w"?F[1][1]-F[0][1]+c:c})):O.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function _(O,F,z){var j=O.__brush.emitter;return j&&(!z||!j.clean)?j:new S(O,F,z)}function S(O,F,z){this.that=O,this.args=F,this.state=O.__brush,this.active=0,this.clean=z}S.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(O,F){return this.starting?(this.starting=!1,this.emit("start",O,F)):this.emit("brush",O),this},brush:function(O,F){return this.emit("brush",O,F),this},end:function(O,F){return--this.active===0&&(delete this.state.emitter,this.emit("end",O,F)),this},emit:function(O,F,z){var j=X(this.that).datum();u.call(O,this.that,new U_(O,{sourceEvent:F,target:d,selection:t.output(this.state.selection),mode:z,dispatch:u}),j)}};function T(O){if(p&&!O.touches||!a.apply(this,arguments))return;var F=this,z=O.target.__data__.type,j=(l&&O.metaKey?z="overlay":z)==="selection"?es:l&&O.altKey?$e:Me,Z=t===Fi?null:j_[z],W=t===Yi?null:W_[z],J=Oa(F),en=J.extent,tn=J.selection,Ct=en[0][0],Q,on,gn=en[0][1],In,dn,ix=en[1][0],Cn,ax,sx=en[1][1],lx,ox,hx=0,_x=0,ux,px=Z&&W&&l&&O.shiftKey,dx,mx,gx=Array.from(O.touches||[O],qx=>{const Dx=qx.identifier;return qx=wn(qx,F),qx.point0=qx.slice(),qx.identifier=Dx,qx});re(F);var Sx=_(F,arguments,!0).beforestart();if(z==="overlay"){tn&&(ux=!0);const qx=[gx[0],gx[1]||gx[0]];J.selection=tn=[[Q=t===Fi?Ct:En(qx[0][0],qx[1][0]),In=t===Yi?gn:En(qx[0][1],qx[1][1])],[Cn=t===Fi?ix:Sn(qx[0][0],qx[1][0]),lx=t===Yi?sx:Sn(qx[0][1],qx[1][1])]],gx.length>1&&kx(O)}else Q=tn[0][0],In=tn[0][1],Cn=tn[1][0],lx=tn[1][1];on=Q,dn=In,ax=Cn,ox=lx;var Ex=X(F).attr("pointer-events","none"),Cx=Ex.selectAll(".overlay").attr("cursor",wt[z]);if(O.touches)Sx.moved=Tx,Sx.ended=Rx;else{var Ax=X(O.view).on("mousemove.brush",Tx,!0).on("mouseup.brush",Rx,!0);l&&Ax.on("keydown.brush",$x,!0).on("keyup.brush",Gx,!0),Uo(O.view)}x.call(F),Sx.start(O,j.name);function Tx(qx){for(const Dx of qx.changedTouches||[qx])for(const lE of gx)lE.identifier===Dx.identifier&&(lE.cur=wn(Dx,F));if(px&&!dx&&!mx&&gx.length===1){const Dx=gx[0];rs(Dx.cur[0]-Dx[0])>rs(Dx.cur[1]-Dx[1])?mx=!0:dx=!0}for(const Dx of gx)Dx.cur&&(Dx[0]=Dx.cur[0],Dx[1]=Dx.cur[1]);ux=!0,Da(qx),kx(qx)}function kx(qx){const Dx=gx[0],lE=Dx.point0;var cE;switch(hx=Dx[0]-lE[0],_x=Dx[1]-lE[1],j){case za:case es:{Z&&(hx=Sn(Ct-Q,En(ix-Cn,hx)),on=Q+hx,ax=Cn+hx),W&&(_x=Sn(gn-In,En(sx-lx,_x)),dn=In+_x,ox=lx+_x);break}case Me:{gx[1]?(Z&&(on=Sn(Ct,En(ix,gx[0][0])),ax=Sn(Ct,En(ix,gx[1][0])),Z=1),W&&(dn=Sn(gn,En(sx,gx[0][1])),ox=Sn(gn,En(sx,gx[1][1])),W=1)):(Z<0?(hx=Sn(Ct-Q,En(ix-Q,hx)),on=Q+hx,ax=Cn):Z>0&&(hx=Sn(Ct-Cn,En(ix-Cn,hx)),on=Q,ax=Cn+hx),W<0?(_x=Sn(gn-In,En(sx-In,_x)),dn=In+_x,ox=lx):W>0&&(_x=Sn(gn-lx,En(sx-lx,_x)),dn=In,ox=lx+_x));break}case $e:{Z&&(on=Sn(Ct,En(ix,Q-hx*Z)),ax=Sn(Ct,En(ix,Cn+hx*Z))),W&&(dn=Sn(gn,En(sx,In-_x*W)),ox=Sn(gn,En(sx,lx+_x*W)));break}}ax<on&&(Z*=-1,cE=Q,Q=Cn,Cn=cE,cE=on,on=ax,ax=cE,z in os&&Cx.attr("cursor",wt[z=os[z]])),ox<dn&&(W*=-1,cE=In,In=lx,lx=cE,cE=dn,dn=ox,ox=cE,z in as&&Cx.attr("cursor",wt[z=as[z]])),J.selection&&(tn=J.selection),dx&&(on=tn[0][0],ax=tn[1][0]),mx&&(dn=tn[0][1],ox=tn[1][1]),(tn[0][0]!==on||tn[0][1]!==dn||tn[1][0]!==ax||tn[1][1]!==ox)&&(J.selection=[[on,dn],[ax,ox]],x.call(F),Sx.brush(qx,j.name))}function Rx(qx){if(X_(qx),qx.touches){if(qx.touches.length)return;p&&clearTimeout(p),p=setTimeout(function(){p=null},500)}else Xo(qx.view,ux),Ax.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Ex.attr("pointer-events","all"),Cx.attr("cursor",wt.overlay),J.selection&&(tn=J.selection),Q_(tn)&&(J.selection=null,x.call(F)),Sx.end(qx,j.name)}function $x(qx){switch(qx.keyCode){case 16:{px=Z&&W;break}case 18:{j===Me&&(Z&&(Cn=ax-hx*Z,Q=on+hx*Z),W&&(lx=ox-_x*W,In=dn+_x*W),j=$e,kx(qx));break}case 32:{(j===Me||j===$e)&&(Z<0?Cn=ax-hx:Z>0&&(Q=on-hx),W<0?lx=ox-_x:W>0&&(In=dn-_x),j=za,Cx.attr("cursor",wt.selection),kx(qx));break}default:return}Da(qx)}function Gx(qx){switch(qx.keyCode){case 16:{px&&(dx=mx=px=!1,kx(qx));break}case 18:{j===$e&&(Z<0?Cn=ax:Z>0&&(Q=on),W<0?lx=ox:W>0&&(In=dn),j=Me,kx(qx));break}case 32:{j===za&&(qx.altKey?(Z&&(Cn=ax-hx*Z,Q=on+hx*Z),W&&(lx=ox-_x*W,In=dn+_x*W),j=$e):(Z<0?Cn=ax:Z>0&&(Q=on),W<0?lx=ox:W>0&&(In=dn),j=Me),Cx.attr("cursor",wt[z]),kx(qx));break}default:return}Da(qx)}}function A(O){_(this,arguments).moved(O)}function R(O){_(this,arguments).ended(O)}function D(){var O=this.__brush||{selection:null};return O.extent=Eu(n.apply(this,arguments)),O.dim=t,O}return d.extent=function(O){return arguments.length?(n=typeof O=="function"?O:Pa(Eu(O)),d):n},d.filter=function(O){return arguments.length?(a=typeof O=="function"?O:Pa(!!O),d):a},d.touchable=function(O){return arguments.length?(s=typeof O=="function"?O:Pa(!!O),d):s},d.handleSize=function(O){return arguments.length?(c=+O,d):c},d.keyModifiers=function(O){return arguments.length?(l=!!O,d):l},d.on=function(){var O=u.on.apply(u,arguments);return O===u?d:O},d}var us=Math.abs,Te=Math.cos,Ae=Math.sin,p0=Math.PI,pi=p0/2,fs$1=p0*2,cs=Math.max,Ya=1e-12;function Fa(t,n){return Array.from({length:n-t},(a,s)=>t+s)}function ev(t){return function(n,a){return t(n.source.value+n.target.value,a.source.value+a.target.value)}}function rv(){return Df(!1,!1)}function iv(){return Df(!1,!0)}function ov(){return Df(!0,!1)}function Df(t,n){var a=0,s=null,l=null,u=null;function c(p){var d=p.length,x=new Array(d),_=Fa(0,d),S=new Array(d*d),T=new Array(d),A=0,R;p=Float64Array.from({length:d*d},n?(D,O)=>p[O%d][O/d|0]:(D,O)=>p[O/d|0][O%d]);for(let D=0;D<d;++D){let O=0;for(let F=0;F<d;++F)O+=p[D*d+F]+t*p[F*d+D];A+=x[D]=O}A=cs(0,fs$1-a*d)/A,R=A?a:fs$1/d;{let D=0;s&&_.sort((O,F)=>s(x[O],x[F]));for(const O of _){const F=D;if(t){const z=Fa(~d+1,d).filter(j=>j<0?p[~j*d+O]:p[O*d+j]);l&&z.sort((j,Z)=>l(j<0?-p[~j*d+O]:p[O*d+j],Z<0?-p[~Z*d+O]:p[O*d+Z]));for(const j of z)if(j<0){const Z=S[~j*d+O]||(S[~j*d+O]={source:null,target:null});Z.target={index:O,startAngle:D,endAngle:D+=p[~j*d+O]*A,value:p[~j*d+O]}}else{const Z=S[O*d+j]||(S[O*d+j]={source:null,target:null});Z.source={index:O,startAngle:D,endAngle:D+=p[O*d+j]*A,value:p[O*d+j]}}T[O]={index:O,startAngle:F,endAngle:D,value:x[O]}}else{const z=Fa(0,d).filter(j=>p[O*d+j]||p[j*d+O]);l&&z.sort((j,Z)=>l(p[O*d+j],p[O*d+Z]));for(const j of z){let Z;if(O<j?(Z=S[O*d+j]||(S[O*d+j]={source:null,target:null}),Z.source={index:O,startAngle:D,endAngle:D+=p[O*d+j]*A,value:p[O*d+j]}):(Z=S[j*d+O]||(S[j*d+O]={source:null,target:null}),Z.target={index:O,startAngle:D,endAngle:D+=p[O*d+j]*A,value:p[O*d+j]},O===j&&(Z.source=Z.target)),Z.source&&Z.target&&Z.source.value<Z.target.value){const W=Z.source;Z.source=Z.target,Z.target=W}}T[O]={index:O,startAngle:F,endAngle:D,value:x[O]}}D+=R}}return S=Object.values(S),S.groups=T,u?S.sort(u):S}return c.padAngle=function(p){return arguments.length?(a=cs(0,p),c):a},c.sortGroups=function(p){return arguments.length?(s=p,c):s},c.sortSubgroups=function(p){return arguments.length?(l=p,c):l},c.sortChords=function(p){return arguments.length?(p==null?u=null:(u=ev(p))._=p,c):u&&u._},c}const ku=Math.PI,Nu=2*ku,Zt=1e-6,av=Nu-Zt;function m0(t){this._+=t[0];for(let n=1,a=t.length;n<a;++n)this._+=arguments[n]+t[n]}function uv(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return m0;const a=10**n;return function(s){this._+=s[0];for(let l=1,u=s.length;l<u;++l)this._+=Math.round(arguments[l]*a)/a+s[l]}}let Jr=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?m0:uv(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,s){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,n,a,s,l,u){this._append`C${+t},${+n},${+a},${+s},${this._x1=+l},${this._y1=+u}`}arcTo(t,n,a,s,l){if(t=+t,n=+n,a=+a,s=+s,l=+l,l<0)throw new Error(`negative radius: ${l}`);let u=this._x1,c=this._y1,p=a-t,d=s-n,x=u-t,_=c-n,S=x*x+_*_;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(S>Zt)if(!(Math.abs(_*p-d*x)>Zt)||!l)this._append`L${this._x1=t},${this._y1=n}`;else{let T=a-u,A=s-c,R=p*p+d*d,D=T*T+A*A,O=Math.sqrt(R),F=Math.sqrt(S),z=l*Math.tan((ku-Math.acos((R+S-D)/(2*O*F)))/2),j=z/F,Z=z/O;Math.abs(j-1)>Zt&&this._append`L${t+j*x},${n+j*_}`,this._append`A${l},${l},0,0,${+(_*T>x*A)},${this._x1=t+Z*p},${this._y1=n+Z*d}`}}arc(t,n,a,s,l,u){if(t=+t,n=+n,a=+a,u=!!u,a<0)throw new Error(`negative radius: ${a}`);let c=a*Math.cos(s),p=a*Math.sin(s),d=t+c,x=n+p,_=1^u,S=u?s-l:l-s;this._x1===null?this._append`M${d},${x}`:(Math.abs(this._x1-d)>Zt||Math.abs(this._y1-x)>Zt)&&this._append`L${d},${x}`,a&&(S<0&&(S=S%Nu+Nu),S>av?this._append`A${a},${a},0,1,${_},${t-c},${n-p}A${a},${a},0,1,${_},${this._x1=d},${this._y1=x}`:S>Zt&&this._append`A${a},${a},0,${+(S>=ku)},${_},${this._x1=t+a*Math.cos(l)},${this._y1=n+a*Math.sin(l)}`)}rect(t,n,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}};function Jo(){return new Jr}Jo.prototype=Jr.prototype;function fv(t=3){return new Jr(+t)}var cv=Array.prototype.slice;function Vt(t){return function(){return t}}function sv(t){return t.source}function lv(t){return t.target}function ss(t){return t.radius}function hv(t){return t.startAngle}function dv(t){return t.endAngle}function gv(){return 0}function pv(){return 10}function y0(t){var n=sv,a=lv,s=ss,l=ss,u=hv,c=dv,p=gv,d=null;function x(){var _,S=n.apply(this,arguments),T=a.apply(this,arguments),A=p.apply(this,arguments)/2,R=cv.call(arguments),D=+s.apply(this,(R[0]=S,R)),O=u.apply(this,R)-pi,F=c.apply(this,R)-pi,z=+l.apply(this,(R[0]=T,R)),j=u.apply(this,R)-pi,Z=c.apply(this,R)-pi;if(d||(d=_=Jo()),A>Ya&&(us(F-O)>A*2+Ya?F>O?(O+=A,F-=A):(O-=A,F+=A):O=F=(O+F)/2,us(Z-j)>A*2+Ya?Z>j?(j+=A,Z-=A):(j-=A,Z+=A):j=Z=(j+Z)/2),d.moveTo(D*Te(O),D*Ae(O)),d.arc(0,0,D,O,F),O!==j||F!==Z)if(t){var W=+t.apply(this,arguments),J=z-W,en=(j+Z)/2;d.quadraticCurveTo(0,0,J*Te(j),J*Ae(j)),d.lineTo(z*Te(en),z*Ae(en)),d.lineTo(J*Te(Z),J*Ae(Z))}else d.quadraticCurveTo(0,0,z*Te(j),z*Ae(j)),d.arc(0,0,z,j,Z);if(d.quadraticCurveTo(0,0,D*Te(O),D*Ae(O)),d.closePath(),_)return d=null,_+""||null}return t&&(x.headRadius=function(_){return arguments.length?(t=typeof _=="function"?_:Vt(+_),x):t}),x.radius=function(_){return arguments.length?(s=l=typeof _=="function"?_:Vt(+_),x):s},x.sourceRadius=function(_){return arguments.length?(s=typeof _=="function"?_:Vt(+_),x):s},x.targetRadius=function(_){return arguments.length?(l=typeof _=="function"?_:Vt(+_),x):l},x.startAngle=function(_){return arguments.length?(u=typeof _=="function"?_:Vt(+_),x):u},x.endAngle=function(_){return arguments.length?(c=typeof _=="function"?_:Vt(+_),x):c},x.padAngle=function(_){return arguments.length?(p=typeof _=="function"?_:Vt(+_),x):p},x.source=function(_){return arguments.length?(n=_,x):n},x.target=function(_){return arguments.length?(a=_,x):a},x.context=function(_){return arguments.length?(d=_??null,x):d},x}function mv(){return y0()}function yv(){return y0(pv)}var _v=Array.prototype,_0=_v.slice;function vv(t,n){return t-n}function bv(t){for(var n=0,a=t.length,s=t[a-1][1]*t[0][0]-t[a-1][0]*t[0][1];++n<a;)s+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return s}const Pt=t=>()=>t;function wv(t,n){for(var a=-1,s=n.length,l;++a<s;)if(l=xv(t,n[a]))return l;return 0}function xv(t,n){for(var a=n[0],s=n[1],l=-1,u=0,c=t.length,p=c-1;u<c;p=u++){var d=t[u],x=d[0],_=d[1],S=t[p],T=S[0],A=S[1];if(Mv(d,S,n))return 0;_>s!=A>s&&a<(T-x)*(s-_)/(A-_)+x&&(l=-l)}return l}function Mv(t,n,a){var s;return $v(t,n,a)&&Tv(t[s=+(t[0]===n[0])],a[s],n[s])}function $v(t,n,a){return(n[0]-t[0])*(a[1]-t[1])===(a[0]-t[0])*(n[1]-t[1])}function Tv(t,n,a){return t<=n&&n<=a||a<=n&&n<=t}function Av(){}var xt=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Ru(){var t=1,n=1,a=gf,s=d;function l(x){var _=a(x);if(Array.isArray(_))_=_.slice().sort(vv);else{const S=Sr(x,Sv);for(_=oe(...df(S[0],S[1],_),_);_[_.length-1]>=S[1];)_.pop();for(;_[1]<S[0];)_.shift()}return _.map(S=>u(x,S))}function u(x,_){const S=_==null?NaN:+_;if(isNaN(S))throw new Error(`invalid value: ${_}`);var T=[],A=[];return c(x,S,function(R){s(R,x,S),bv(R)>0?T.push([R]):A.push(R)}),A.forEach(function(R){for(var D=0,O=T.length,F;D<O;++D)if(wv((F=T[D])[0],R)!==-1){F.push(R);return}}),{type:"MultiPolygon",value:_,coordinates:T}}function c(x,_,S){var T=new Array,A=new Array,R,D,O,F,z,j;for(R=D=-1,F=Gt(x[0],_),xt[F<<1].forEach(Z);++R<t-1;)O=F,F=Gt(x[R+1],_),xt[O|F<<1].forEach(Z);for(xt[F<<0].forEach(Z);++D<n-1;){for(R=-1,F=Gt(x[D*t+t],_),z=Gt(x[D*t],_),xt[F<<1|z<<2].forEach(Z);++R<t-1;)O=F,F=Gt(x[D*t+t+R+1],_),j=z,z=Gt(x[D*t+R+1],_),xt[O|F<<1|z<<2|j<<3].forEach(Z);xt[F|z<<3].forEach(Z)}for(R=-1,z=x[D*t]>=_,xt[z<<2].forEach(Z);++R<t-1;)j=z,z=Gt(x[D*t+R+1],_),xt[z<<2|j<<3].forEach(Z);xt[z<<3].forEach(Z);function Z(W){var J=[W[0][0]+R,W[0][1]+D],en=[W[1][0]+R,W[1][1]+D],tn=p(J),Ct=p(en),Q,on;(Q=A[tn])?(on=T[Ct])?(delete A[Q.end],delete T[on.start],Q===on?(Q.ring.push(en),S(Q.ring)):T[Q.start]=A[on.end]={start:Q.start,end:on.end,ring:Q.ring.concat(on.ring)}):(delete A[Q.end],Q.ring.push(en),A[Q.end=Ct]=Q):(Q=T[Ct])?(on=A[tn])?(delete T[Q.start],delete A[on.end],Q===on?(Q.ring.push(en),S(Q.ring)):T[on.start]=A[Q.end]={start:on.start,end:Q.end,ring:on.ring.concat(Q.ring)}):(delete T[Q.start],Q.ring.unshift(J),T[Q.start=tn]=Q):T[tn]=A[Ct]={start:tn,end:Ct,ring:[J,en]}}}function p(x){return x[0]*2+x[1]*(t+1)*4}function d(x,_,S){x.forEach(function(T){var A=T[0],R=T[1],D=A|0,O=R|0,F=qa(_[O*t+D]);A>0&&A<t&&D===A&&(T[0]=ls(A,qa(_[O*t+D-1]),F,S)),R>0&&R<n&&O===R&&(T[1]=ls(R,qa(_[(O-1)*t+D]),F,S))})}return l.contour=u,l.size=function(x){if(!arguments.length)return[t,n];var _=Math.floor(x[0]),S=Math.floor(x[1]);if(!(_>=0&&S>=0))throw new Error("invalid size");return t=_,n=S,l},l.thresholds=function(x){return arguments.length?(a=typeof x=="function"?x:Array.isArray(x)?Pt(_0.call(x)):Pt(x),l):a},l.smooth=function(x){return arguments.length?(s=x?d:Av,l):s===d},l}function Sv(t){return isFinite(t)?t:NaN}function Gt(t,n){return t==null?!1:+t>=n}function qa(t){return t==null||isNaN(t=+t)?-1/0:t}function ls(t,n,a,s){const l=s-n,u=a-n,c=isFinite(l)||isFinite(u)?l/u:Math.sign(l)/Math.sign(u);return isNaN(c)?t:t+c-.5}function Ev(t){return t[0]}function kv(t){return t[1]}function Nv(){return 1}function Rv(){var t=Ev,n=kv,a=Nv,s=960,l=500,u=20,c=2,p=u*3,d=s+p*2>>c,x=l+p*2>>c,_=Pt(20);function S(z){var j=new Float32Array(d*x),Z=Math.pow(2,-c),W=-1;for(const In of z){var J=(t(In,++W,z)+p)*Z,en=(n(In,W,z)+p)*Z,tn=+a(In,W,z);if(tn&&J>=0&&J<d&&en>=0&&en<x){var Ct=Math.floor(J),Q=Math.floor(en),on=J-Ct-.5,gn=en-Q-.5;j[Ct+Q*d]+=(1-on)*(1-gn)*tn,j[Ct+1+Q*d]+=on*(1-gn)*tn,j[Ct+1+(Q+1)*d]+=on*gn*tn,j[Ct+(Q+1)*d]+=(1-on)*gn*tn}}return Zl({data:j,width:d,height:x},u*Z),j}function T(z){var j=S(z),Z=_(j),W=Math.pow(2,2*c);return Array.isArray(Z)||(Z=oe(Number.MIN_VALUE,Pr(j)/W,Z)),Ru().size([d,x]).thresholds(Z.map(J=>J*W))(j).map((J,en)=>(J.value=+Z[en],A(J)))}T.contours=function(z){var j=S(z),Z=Ru().size([d,x]),W=Math.pow(2,2*c),J=en=>{en=+en;var tn=A(Z.contour(j,en*W));return tn.value=en,tn};return Object.defineProperty(J,"max",{get:()=>Pr(j)/W}),J};function A(z){return z.coordinates.forEach(R),z}function R(z){z.forEach(D)}function D(z){z.forEach(O)}function O(z){z[0]=z[0]*Math.pow(2,c)-p,z[1]=z[1]*Math.pow(2,c)-p}function F(){return p=u*3,d=s+p*2>>c,x=l+p*2>>c,T}return T.x=function(z){return arguments.length?(t=typeof z=="function"?z:Pt(+z),T):t},T.y=function(z){return arguments.length?(n=typeof z=="function"?z:Pt(+z),T):n},T.weight=function(z){return arguments.length?(a=typeof z=="function"?z:Pt(+z),T):a},T.size=function(z){if(!arguments.length)return[s,l];var j=+z[0],Z=+z[1];if(!(j>=0&&Z>=0))throw new Error("invalid size");return s=j,l=Z,F()},T.cellSize=function(z){if(!arguments.length)return 1<<c;if(!((z=+z)>=1))throw new Error("invalid cell size");return c=Math.floor(Math.log(z)/Math.LN2),F()},T.thresholds=function(z){return arguments.length?(_=typeof z=="function"?z:Array.isArray(z)?Pt(_0.call(z)):Pt(z),T):_},T.bandwidth=function(z){if(!arguments.length)return Math.sqrt(u*(u+1));if(!((z=+z)>=0))throw new Error("invalid bandwidth");return u=(Math.sqrt(4*z*z+1)-1)/2,F()},T}const kt=11102230246251565e-32,kn=134217729,Iv=(3+8*kt)*kt;function La(t,n,a,s,l){let u,c,p,d,x=n[0],_=s[0],S=0,T=0;_>x==_>-x?(u=x,x=n[++S]):(u=_,_=s[++T]);let A=0;if(S<t&&T<a)for(_>x==_>-x?(c=x+u,p=u-(c-x),x=n[++S]):(c=_+u,p=u-(c-_),_=s[++T]),u=c,p!==0&&(l[A++]=p);S<t&&T<a;)_>x==_>-x?(c=u+x,d=c-u,p=u-(c-d)+(x-d),x=n[++S]):(c=u+_,d=c-u,p=u-(c-d)+(_-d),_=s[++T]),u=c,p!==0&&(l[A++]=p);for(;S<t;)c=u+x,d=c-u,p=u-(c-d)+(x-d),x=n[++S],u=c,p!==0&&(l[A++]=p);for(;T<a;)c=u+_,d=c-u,p=u-(c-d)+(_-d),_=s[++T],u=c,p!==0&&(l[A++]=p);return(u!==0||A===0)&&(l[A++]=u),A}function Cv(t,n){let a=n[0];for(let s=1;s<t;s++)a+=n[s];return a}function ni(t){return new Float64Array(t)}const Pv=(3+16*kt)*kt,Dv=(2+12*kt)*kt,zv=(9+64*kt)*kt*kt,Se=ni(4),hs=ni(8),ds=ni(12),gs=ni(16),Pn=ni(4);function Ov(t,n,a,s,l,u,c){let p,d,x,_,S,T,A,R,D,O,F,z,j,Z,W,J,en,tn;const Ct=t-l,Q=a-l,on=n-u,gn=s-u;Z=Ct*gn,T=kn*Ct,A=T-(T-Ct),R=Ct-A,T=kn*gn,D=T-(T-gn),O=gn-D,W=R*O-(Z-A*D-R*D-A*O),J=on*Q,T=kn*on,A=T-(T-on),R=on-A,T=kn*Q,D=T-(T-Q),O=Q-D,en=R*O-(J-A*D-R*D-A*O),F=W-en,S=W-F,Se[0]=W-(F+S)+(S-en),z=Z+F,S=z-Z,j=Z-(z-S)+(F-S),F=j-J,S=j-F,Se[1]=j-(F+S)+(S-J),tn=z+F,S=tn-z,Se[2]=z-(tn-S)+(F-S),Se[3]=tn;let In=Cv(4,Se),dn=Dv*c;if(In>=dn||-In>=dn||(S=t-Ct,p=t-(Ct+S)+(S-l),S=a-Q,x=a-(Q+S)+(S-l),S=n-on,d=n-(on+S)+(S-u),S=s-gn,_=s-(gn+S)+(S-u),p===0&&d===0&&x===0&&_===0)||(dn=zv*c+Iv*Math.abs(In),In+=Ct*_+gn*p-(on*x+Q*d),In>=dn||-In>=dn))return In;Z=p*gn,T=kn*p,A=T-(T-p),R=p-A,T=kn*gn,D=T-(T-gn),O=gn-D,W=R*O-(Z-A*D-R*D-A*O),J=d*Q,T=kn*d,A=T-(T-d),R=d-A,T=kn*Q,D=T-(T-Q),O=Q-D,en=R*O-(J-A*D-R*D-A*O),F=W-en,S=W-F,Pn[0]=W-(F+S)+(S-en),z=Z+F,S=z-Z,j=Z-(z-S)+(F-S),F=j-J,S=j-F,Pn[1]=j-(F+S)+(S-J),tn=z+F,S=tn-z,Pn[2]=z-(tn-S)+(F-S),Pn[3]=tn;const ix=La(4,Se,4,Pn,hs);Z=Ct*_,T=kn*Ct,A=T-(T-Ct),R=Ct-A,T=kn*_,D=T-(T-_),O=_-D,W=R*O-(Z-A*D-R*D-A*O),J=on*x,T=kn*on,A=T-(T-on),R=on-A,T=kn*x,D=T-(T-x),O=x-D,en=R*O-(J-A*D-R*D-A*O),F=W-en,S=W-F,Pn[0]=W-(F+S)+(S-en),z=Z+F,S=z-Z,j=Z-(z-S)+(F-S),F=j-J,S=j-F,Pn[1]=j-(F+S)+(S-J),tn=z+F,S=tn-z,Pn[2]=z-(tn-S)+(F-S),Pn[3]=tn;const Cn=La(ix,hs,4,Pn,ds);Z=p*_,T=kn*p,A=T-(T-p),R=p-A,T=kn*_,D=T-(T-_),O=_-D,W=R*O-(Z-A*D-R*D-A*O),J=d*x,T=kn*d,A=T-(T-d),R=d-A,T=kn*x,D=T-(T-x),O=x-D,en=R*O-(J-A*D-R*D-A*O),F=W-en,S=W-F,Pn[0]=W-(F+S)+(S-en),z=Z+F,S=z-Z,j=Z-(z-S)+(F-S),F=j-J,S=j-F,Pn[1]=j-(F+S)+(S-J),tn=z+F,S=tn-z,Pn[2]=z-(tn-S)+(F-S),Pn[3]=tn;const ax=La(Cn,ds,4,Pn,gs);return gs[ax-1]}function mi(t,n,a,s,l,u){const c=(n-u)*(a-l),p=(t-l)*(s-u),d=c-p,x=Math.abs(c+p);return Math.abs(d)>=Pv*x?d:-Ov(t,n,a,s,l,u,x)}const ps=Math.pow(2,-52),yi=new Uint32Array(512);class ro{static from(n,a=Bv,s=Uv){const l=n.length,u=new Float64Array(l*2);for(let c=0;c<l;c++){const p=n[c];u[2*c]=a(p),u[2*c+1]=s(p)}return new ro(u)}constructor(n){const a=n.length>>1;if(a>0&&typeof n[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=n;const s=Math.max(2*a-5,0);this._triangles=new Uint32Array(s*3),this._halfedges=new Int32Array(s*3),this._hashSize=Math.ceil(Math.sqrt(a)),this._hullPrev=new Uint32Array(a),this._hullNext=new Uint32Array(a),this._hullTri=new Uint32Array(a),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(a),this._dists=new Float64Array(a),this.update()}update(){const{coords:n,_hullPrev:a,_hullNext:s,_hullTri:l,_hullHash:u}=this,c=n.length>>1;let p=1/0,d=1/0,x=-1/0,_=-1/0;for(let Ct=0;Ct<c;Ct++){const Q=n[2*Ct],on=n[2*Ct+1];Q<p&&(p=Q),on<d&&(d=on),Q>x&&(x=Q),on>_&&(_=on),this._ids[Ct]=Ct}const S=(p+x)/2,T=(d+_)/2;let A,R,D;for(let Ct=0,Q=1/0;Ct<c;Ct++){const on=Ba(S,T,n[2*Ct],n[2*Ct+1]);on<Q&&(A=Ct,Q=on)}const O=n[2*A],F=n[2*A+1];for(let Ct=0,Q=1/0;Ct<c;Ct++){if(Ct===A)continue;const on=Ba(O,F,n[2*Ct],n[2*Ct+1]);on<Q&&on>0&&(R=Ct,Q=on)}let z=n[2*R],j=n[2*R+1],Z=1/0;for(let Ct=0;Ct<c;Ct++){if(Ct===A||Ct===R)continue;const Q=qv(O,F,z,j,n[2*Ct],n[2*Ct+1]);Q<Z&&(D=Ct,Z=Q)}let W=n[2*D],J=n[2*D+1];if(Z===1/0){for(let on=0;on<c;on++)this._dists[on]=n[2*on]-n[0]||n[2*on+1]-n[1];Ie(this._ids,this._dists,0,c-1);const Ct=new Uint32Array(c);let Q=0;for(let on=0,gn=-1/0;on<c;on++){const In=this._ids[on],dn=this._dists[In];dn>gn&&(Ct[Q++]=In,gn=dn)}this.hull=Ct.subarray(0,Q),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(mi(O,F,z,j,W,J)<0){const Ct=R,Q=z,on=j;R=D,z=W,j=J,D=Ct,W=Q,J=on}const en=Lv(O,F,z,j,W,J);this._cx=en.x,this._cy=en.y;for(let Ct=0;Ct<c;Ct++)this._dists[Ct]=Ba(n[2*Ct],n[2*Ct+1],en.x,en.y);Ie(this._ids,this._dists,0,c-1),this._hullStart=A;let tn=3;s[A]=a[D]=R,s[R]=a[A]=D,s[D]=a[R]=A,l[A]=0,l[R]=1,l[D]=2,u.fill(-1),u[this._hashKey(O,F)]=A,u[this._hashKey(z,j)]=R,u[this._hashKey(W,J)]=D,this.trianglesLen=0,this._addTriangle(A,R,D,-1,-1,-1);for(let Ct=0,Q,on;Ct<this._ids.length;Ct++){const gn=this._ids[Ct],In=n[2*gn],dn=n[2*gn+1];if(Ct>0&&Math.abs(In-Q)<=ps&&Math.abs(dn-on)<=ps||(Q=In,on=dn,gn===A||gn===R||gn===D))continue;let ix=0;for(let ox=0,hx=this._hashKey(In,dn);ox<this._hashSize&&(ix=u[(hx+ox)%this._hashSize],!(ix!==-1&&ix!==s[ix]));ox++);ix=a[ix];let Cn=ix,ax;for(;ax=s[Cn],mi(In,dn,n[2*Cn],n[2*Cn+1],n[2*ax],n[2*ax+1])>=0;)if(Cn=ax,Cn===ix){Cn=-1;break}if(Cn===-1)continue;let sx=this._addTriangle(Cn,gn,s[Cn],-1,-1,l[Cn]);l[gn]=this._legalize(sx+2),l[Cn]=sx,tn++;let lx=s[Cn];for(;ax=s[lx],mi(In,dn,n[2*lx],n[2*lx+1],n[2*ax],n[2*ax+1])<0;)sx=this._addTriangle(lx,gn,ax,l[gn],-1,l[lx]),l[gn]=this._legalize(sx+2),s[lx]=lx,tn--,lx=ax;if(Cn===ix)for(;ax=a[Cn],mi(In,dn,n[2*ax],n[2*ax+1],n[2*Cn],n[2*Cn+1])<0;)sx=this._addTriangle(ax,gn,Cn,-1,l[Cn],l[ax]),this._legalize(sx+2),l[ax]=sx,s[Cn]=Cn,tn--,Cn=ax;this._hullStart=a[gn]=Cn,s[Cn]=a[lx]=gn,s[gn]=lx,u[this._hashKey(In,dn)]=gn,u[this._hashKey(n[2*Cn],n[2*Cn+1])]=Cn}this.hull=new Uint32Array(tn);for(let Ct=0,Q=this._hullStart;Ct<tn;Ct++)this.hull[Ct]=Q,Q=s[Q];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(n,a){return Math.floor(Yv(n-this._cx,a-this._cy)*this._hashSize)%this._hashSize}_legalize(n){const{_triangles:a,_halfedges:s,coords:l}=this;let u=0,c=0;for(;;){const p=s[n],d=n-n%3;if(c=d+(n+2)%3,p===-1){if(u===0)break;n=yi[--u];continue}const x=p-p%3,_=d+(n+1)%3,S=x+(p+2)%3,T=a[c],A=a[n],R=a[_],D=a[S];if(Fv(l[2*T],l[2*T+1],l[2*A],l[2*A+1],l[2*R],l[2*R+1],l[2*D],l[2*D+1])){a[n]=D,a[p]=T;const O=s[S];if(O===-1){let z=this._hullStart;do{if(this._hullTri[z]===S){this._hullTri[z]=n;break}z=this._hullPrev[z]}while(z!==this._hullStart)}this._link(n,O),this._link(p,s[c]),this._link(c,S);const F=x+(p+1)%3;u<yi.length&&(yi[u++]=F)}else{if(u===0)break;n=yi[--u]}}return c}_link(n,a){this._halfedges[n]=a,a!==-1&&(this._halfedges[a]=n)}_addTriangle(n,a,s,l,u,c){const p=this.trianglesLen;return this._triangles[p]=n,this._triangles[p+1]=a,this._triangles[p+2]=s,this._link(p,l),this._link(p+1,u),this._link(p+2,c),this.trianglesLen+=3,p}}function Yv(t,n){const a=t/(Math.abs(t)+Math.abs(n));return(n>0?3-a:1+a)/4}function Ba(t,n,a,s){const l=t-a,u=n-s;return l*l+u*u}function Fv(t,n,a,s,l,u,c,p){const d=t-c,x=n-p,_=a-c,S=s-p,T=l-c,A=u-p,R=d*d+x*x,D=_*_+S*S,O=T*T+A*A;return d*(S*O-D*A)-x*(_*O-D*T)+R*(_*A-S*T)<0}function qv(t,n,a,s,l,u){const c=a-t,p=s-n,d=l-t,x=u-n,_=c*c+p*p,S=d*d+x*x,T=.5/(c*x-p*d),A=(x*_-p*S)*T,R=(c*S-d*_)*T;return A*A+R*R}function Lv(t,n,a,s,l,u){const c=a-t,p=s-n,d=l-t,x=u-n,_=c*c+p*p,S=d*d+x*x,T=.5/(c*x-p*d),A=t+(x*_-p*S)*T,R=n+(c*S-d*_)*T;return{x:A,y:R}}function Ie(t,n,a,s){if(s-a<=20)for(let l=a+1;l<=s;l++){const u=t[l],c=n[u];let p=l-1;for(;p>=a&&n[t[p]]>c;)t[p+1]=t[p--];t[p+1]=u}else{const l=a+s>>1;let u=a+1,c=s;cr(t,l,u),n[t[a]]>n[t[s]]&&cr(t,a,s),n[t[u]]>n[t[s]]&&cr(t,u,s),n[t[a]]>n[t[u]]&&cr(t,a,u);const p=t[u],d=n[p];for(;;){do u++;while(n[t[u]]<d);do c--;while(n[t[c]]>d);if(c<u)break;cr(t,u,c)}t[a+1]=t[c],t[c]=p,s-u+1>=c-a?(Ie(t,n,u,s),Ie(t,n,a,c-1)):(Ie(t,n,a,c-1),Ie(t,n,u,s))}}function cr(t,n,a){const s=t[n];t[n]=t[a],t[a]=s}function Bv(t){return t[0]}function Uv(t){return t[1]}const ms=1e-6;class ne{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(n,a){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(n,a){this._+=`L${this._x1=+n},${this._y1=+a}`}arc(n,a,s){n=+n,a=+a,s=+s;const l=n+s,u=a;if(s<0)throw new Error("negative radius");this._x1===null?this._+=`M${l},${u}`:(Math.abs(this._x1-l)>ms||Math.abs(this._y1-u)>ms)&&(this._+="L"+l+","+u),s&&(this._+=`A${s},${s},0,1,1,${n-s},${a}A${s},${s},0,1,1,${this._x1=l},${this._y1=u}`)}rect(n,a,s,l){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}h${+s}v${+l}h${-s}Z`}value(){return this._||null}}class Iu{constructor(){this._=[]}moveTo(n,a){this._.push([n,a])}closePath(){this._.push(this._[0].slice())}lineTo(n,a){this._.push([n,a])}value(){return this._.length?this._:null}}class v0{constructor(n,[a,s,l,u]=[0,0,960,500]){if(!((l=+l)>=(a=+a))||!((u=+u)>=(s=+s)))throw new Error("invalid bounds");this.delaunay=n,this._circumcenters=new Float64Array(n.points.length*2),this.vectors=new Float64Array(n.points.length*2),this.xmax=l,this.xmin=a,this.ymax=u,this.ymin=s,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:n,hull:a,triangles:s},vectors:l}=this;let u,c;const p=this.circumcenters=this._circumcenters.subarray(0,s.length/3*2);for(let D=0,O=0,F=s.length,z,j;D<F;D+=3,O+=2){const Z=s[D]*2,W=s[D+1]*2,J=s[D+2]*2,en=n[Z],tn=n[Z+1],Ct=n[W],Q=n[W+1],on=n[J],gn=n[J+1],In=Ct-en,dn=Q-tn,ix=on-en,Cn=gn-tn,ax=(In*Cn-dn*ix)*2;if(Math.abs(ax)<1e-9){if(u===void 0){u=c=0;for(const lx of a)u+=n[lx*2],c+=n[lx*2+1];u/=a.length,c/=a.length}const sx=1e9*Math.sign((u-en)*Cn-(c-tn)*ix);z=(en+on)/2-sx*Cn,j=(tn+gn)/2+sx*ix}else{const sx=1/ax,lx=In*In+dn*dn,ox=ix*ix+Cn*Cn;z=en+(Cn*lx-dn*ox)*sx,j=tn+(In*ox-ix*lx)*sx}p[O]=z,p[O+1]=j}let d=a[a.length-1],x,_=d*4,S,T=n[2*d],A,R=n[2*d+1];l.fill(0);for(let D=0;D<a.length;++D)d=a[D],x=_,S=T,A=R,_=d*4,T=n[2*d],R=n[2*d+1],l[x+2]=l[_]=A-R,l[x+3]=l[_+1]=T-S}render(n){const a=n==null?n=new ne:void 0,{delaunay:{halfedges:s,inedges:l,hull:u},circumcenters:c,vectors:p}=this;if(u.length<=1)return null;for(let _=0,S=s.length;_<S;++_){const T=s[_];if(T<_)continue;const A=Math.floor(_/3)*2,R=Math.floor(T/3)*2,D=c[A],O=c[A+1],F=c[R],z=c[R+1];this._renderSegment(D,O,F,z,n)}let d,x=u[u.length-1];for(let _=0;_<u.length;++_){d=x,x=u[_];const S=Math.floor(l[x]/3)*2,T=c[S],A=c[S+1],R=d*4,D=this._project(T,A,p[R+2],p[R+3]);D&&this._renderSegment(T,A,D[0],D[1],n)}return a&&a.value()}renderBounds(n){const a=n==null?n=new ne:void 0;return n.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),a&&a.value()}renderCell(n,a){const s=a==null?a=new ne:void 0,l=this._clip(n);if(l===null||!l.length)return;a.moveTo(l[0],l[1]);let u=l.length;for(;l[0]===l[u-2]&&l[1]===l[u-1]&&u>1;)u-=2;for(let c=2;c<u;c+=2)(l[c]!==l[c-2]||l[c+1]!==l[c-1])&&a.lineTo(l[c],l[c+1]);return a.closePath(),s&&s.value()}*cellPolygons(){const{delaunay:{points:n}}=this;for(let a=0,s=n.length/2;a<s;++a){const l=this.cellPolygon(a);l&&(l.index=a,yield l)}}cellPolygon(n){const a=new Iu;return this.renderCell(n,a),a.value()}_renderSegment(n,a,s,l,u){let c;const p=this._regioncode(n,a),d=this._regioncode(s,l);p===0&&d===0?(u.moveTo(n,a),u.lineTo(s,l)):(c=this._clipSegment(n,a,s,l,p,d))&&(u.moveTo(c[0],c[1]),u.lineTo(c[2],c[3]))}contains(n,a,s){return a=+a,a!==a||(s=+s,s!==s)?!1:this.delaunay._step(n,a,s)===n}*neighbors(n){const a=this._clip(n);if(a)for(const s of this.delaunay.neighbors(n)){const l=this._clip(s);if(l){e:for(let u=0,c=a.length;u<c;u+=2)for(let p=0,d=l.length;p<d;p+=2)if(a[u]===l[p]&&a[u+1]===l[p+1]&&a[(u+2)%c]===l[(p+d-2)%d]&&a[(u+3)%c]===l[(p+d-1)%d]){yield s;break e}}}}_cell(n){const{circumcenters:a,delaunay:{inedges:s,halfedges:l,triangles:u}}=this,c=s[n];if(c===-1)return null;const p=[];let d=c;do{const x=Math.floor(d/3);if(p.push(a[x*2],a[x*2+1]),d=d%3===2?d-2:d+1,u[d]!==n)break;d=l[d]}while(d!==c&&d!==-1);return p}_clip(n){if(n===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const a=this._cell(n);if(a===null)return null;const{vectors:s}=this,l=n*4;return this._simplify(s[l]||s[l+1]?this._clipInfinite(n,a,s[l],s[l+1],s[l+2],s[l+3]):this._clipFinite(n,a))}_clipFinite(n,a){const s=a.length;let l=null,u,c,p=a[s-2],d=a[s-1],x,_=this._regioncode(p,d),S,T=0;for(let A=0;A<s;A+=2)if(u=p,c=d,p=a[A],d=a[A+1],x=_,_=this._regioncode(p,d),x===0&&_===0)S=T,T=0,l?l.push(p,d):l=[p,d];else{let R,D,O,F,z;if(x===0){if((R=this._clipSegment(u,c,p,d,x,_))===null)continue;[D,O,F,z]=R}else{if((R=this._clipSegment(p,d,u,c,_,x))===null)continue;[F,z,D,O]=R,S=T,T=this._edgecode(D,O),S&&T&&this._edge(n,S,T,l,l.length),l?l.push(D,O):l=[D,O]}S=T,T=this._edgecode(F,z),S&&T&&this._edge(n,S,T,l,l.length),l?l.push(F,z):l=[F,z]}if(l)S=T,T=this._edgecode(l[0],l[1]),S&&T&&this._edge(n,S,T,l,l.length);else if(this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return l}_clipSegment(n,a,s,l,u,c){const p=u<c;for(p&&([n,a,s,l,u,c]=[s,l,n,a,c,u]);;){if(u===0&&c===0)return p?[s,l,n,a]:[n,a,s,l];if(u&c)return null;let d,x,_=u||c;_&8?(d=n+(s-n)*(this.ymax-a)/(l-a),x=this.ymax):_&4?(d=n+(s-n)*(this.ymin-a)/(l-a),x=this.ymin):_&2?(x=a+(l-a)*(this.xmax-n)/(s-n),d=this.xmax):(x=a+(l-a)*(this.xmin-n)/(s-n),d=this.xmin),u?(n=d,a=x,u=this._regioncode(n,a)):(s=d,l=x,c=this._regioncode(s,l))}}_clipInfinite(n,a,s,l,u,c){let p=Array.from(a),d;if((d=this._project(p[0],p[1],s,l))&&p.unshift(d[0],d[1]),(d=this._project(p[p.length-2],p[p.length-1],u,c))&&p.push(d[0],d[1]),p=this._clipFinite(n,p))for(let x=0,_=p.length,S,T=this._edgecode(p[_-2],p[_-1]);x<_;x+=2)S=T,T=this._edgecode(p[x],p[x+1]),S&&T&&(x=this._edge(n,S,T,p,x),_=p.length);else this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(p=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return p}_edge(n,a,s,l,u){for(;a!==s;){let c,p;switch(a){case 5:a=4;continue;case 4:a=6,c=this.xmax,p=this.ymin;break;case 6:a=2;continue;case 2:a=10,c=this.xmax,p=this.ymax;break;case 10:a=8;continue;case 8:a=9,c=this.xmin,p=this.ymax;break;case 9:a=1;continue;case 1:a=5,c=this.xmin,p=this.ymin;break}(l[u]!==c||l[u+1]!==p)&&this.contains(n,c,p)&&(l.splice(u,0,c,p),u+=2)}return u}_project(n,a,s,l){let u=1/0,c,p,d;if(l<0){if(a<=this.ymin)return null;(c=(this.ymin-a)/l)<u&&(d=this.ymin,p=n+(u=c)*s)}else if(l>0){if(a>=this.ymax)return null;(c=(this.ymax-a)/l)<u&&(d=this.ymax,p=n+(u=c)*s)}if(s>0){if(n>=this.xmax)return null;(c=(this.xmax-n)/s)<u&&(p=this.xmax,d=a+(u=c)*l)}else if(s<0){if(n<=this.xmin)return null;(c=(this.xmin-n)/s)<u&&(p=this.xmin,d=a+(u=c)*l)}return[p,d]}_edgecode(n,a){return(n===this.xmin?1:n===this.xmax?2:0)|(a===this.ymin?4:a===this.ymax?8:0)}_regioncode(n,a){return(n<this.xmin?1:n>this.xmax?2:0)|(a<this.ymin?4:a>this.ymax?8:0)}_simplify(n){if(n&&n.length>4){for(let a=0;a<n.length;a+=2){const s=(a+2)%n.length,l=(a+4)%n.length;(n[a]===n[s]&&n[s]===n[l]||n[a+1]===n[s+1]&&n[s+1]===n[l+1])&&(n.splice(s,2),a-=2)}n.length||(n=null)}return n}}const Xv=2*Math.PI,Ee=Math.pow;function Hv(t){return t[0]}function jv(t){return t[1]}function Wv(t){const{triangles:n,coords:a}=t;for(let s=0;s<n.length;s+=3){const l=2*n[s],u=2*n[s+1],c=2*n[s+2];if((a[c]-a[l])*(a[u+1]-a[l+1])-(a[u]-a[l])*(a[c+1]-a[l+1])>1e-10)return!1}return!0}function Vv(t,n,a){return[t+Math.sin(t+n)*a,n+Math.cos(t-n)*a]}class zf{static from(n,a=Hv,s=jv,l){return new zf("length"in n?Gv(n,a,s,l):Float64Array.from(Zv(n,a,s,l)))}constructor(n){this._delaunator=new ro(n),this.inedges=new Int32Array(n.length/2),this._hullIndex=new Int32Array(n.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const n=this._delaunator,a=this.points;if(n.hull&&n.hull.length>2&&Wv(n)){this.collinear=Int32Array.from({length:a.length/2},(T,A)=>A).sort((T,A)=>a[2*T]-a[2*A]||a[2*T+1]-a[2*A+1]);const d=this.collinear[0],x=this.collinear[this.collinear.length-1],_=[a[2*d],a[2*d+1],a[2*x],a[2*x+1]],S=1e-8*Math.hypot(_[3]-_[1],_[2]-_[0]);for(let T=0,A=a.length/2;T<A;++T){const R=Vv(a[2*T],a[2*T+1],S);a[2*T]=R[0],a[2*T+1]=R[1]}this._delaunator=new ro(a)}else delete this.collinear;const s=this.halfedges=this._delaunator.halfedges,l=this.hull=this._delaunator.hull,u=this.triangles=this._delaunator.triangles,c=this.inedges.fill(-1),p=this._hullIndex.fill(-1);for(let d=0,x=s.length;d<x;++d){const _=u[d%3===2?d-2:d+1];(s[d]===-1||c[_]===-1)&&(c[_]=d)}for(let d=0,x=l.length;d<x;++d)p[l[d]]=d;l.length<=2&&l.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=l[0],c[l[0]]=1,l.length===2&&(c[l[1]]=0,this.triangles[1]=l[1],this.triangles[2]=l[1]))}voronoi(n){return new v0(this,n)}*neighbors(n){const{inedges:a,hull:s,_hullIndex:l,halfedges:u,triangles:c,collinear:p}=this;if(p){const S=p.indexOf(n);S>0&&(yield p[S-1]),S<p.length-1&&(yield p[S+1]);return}const d=a[n];if(d===-1)return;let x=d,_=-1;do{if(yield _=c[x],x=x%3===2?x-2:x+1,c[x]!==n)return;if(x=u[x],x===-1){const S=s[(l[n]+1)%s.length];S!==_&&(yield S);return}}while(x!==d)}find(n,a,s=0){if(n=+n,n!==n||(a=+a,a!==a))return-1;const l=s;let u;for(;(u=this._step(s,n,a))>=0&&u!==s&&u!==l;)s=u;return u}_step(n,a,s){const{inedges:l,hull:u,_hullIndex:c,halfedges:p,triangles:d,points:x}=this;if(l[n]===-1||!x.length)return(n+1)%(x.length>>1);let _=n,S=Ee(a-x[n*2],2)+Ee(s-x[n*2+1],2);const T=l[n];let A=T;do{let R=d[A];const D=Ee(a-x[R*2],2)+Ee(s-x[R*2+1],2);if(D<S&&(S=D,_=R),A=A%3===2?A-2:A+1,d[A]!==n)break;if(A=p[A],A===-1){if(A=u[(c[n]+1)%u.length],A!==R&&Ee(a-x[A*2],2)+Ee(s-x[A*2+1],2)<S)return A;break}}while(A!==T);return _}render(n){const a=n==null?n=new ne:void 0,{points:s,halfedges:l,triangles:u}=this;for(let c=0,p=l.length;c<p;++c){const d=l[c];if(d<c)continue;const x=u[c]*2,_=u[d]*2;n.moveTo(s[x],s[x+1]),n.lineTo(s[_],s[_+1])}return this.renderHull(n),a&&a.value()}renderPoints(n,a){a===void 0&&(!n||typeof n.moveTo!="function")&&(a=n,n=null),a=a==null?2:+a;const s=n==null?n=new ne:void 0,{points:l}=this;for(let u=0,c=l.length;u<c;u+=2){const p=l[u],d=l[u+1];n.moveTo(p+a,d),n.arc(p,d,a,0,Xv)}return s&&s.value()}renderHull(n){const a=n==null?n=new ne:void 0,{hull:s,points:l}=this,u=s[0]*2,c=s.length;n.moveTo(l[u],l[u+1]);for(let p=1;p<c;++p){const d=2*s[p];n.lineTo(l[d],l[d+1])}return n.closePath(),a&&a.value()}hullPolygon(){const n=new Iu;return this.renderHull(n),n.value()}renderTriangle(n,a){const s=a==null?a=new ne:void 0,{points:l,triangles:u}=this,c=u[n*=3]*2,p=u[n+1]*2,d=u[n+2]*2;return a.moveTo(l[c],l[c+1]),a.lineTo(l[p],l[p+1]),a.lineTo(l[d],l[d+1]),a.closePath(),s&&s.value()}*trianglePolygons(){const{triangles:n}=this;for(let a=0,s=n.length/3;a<s;++a)yield this.trianglePolygon(a)}trianglePolygon(n){const a=new Iu;return this.renderTriangle(n,a),a.value()}}function Gv(t,n,a,s){const l=t.length,u=new Float64Array(l*2);for(let c=0;c<l;++c){const p=t[c];u[c*2]=n.call(s,p,c,t),u[c*2+1]=a.call(s,p,c,t)}return u}function*Zv(t,n,a,s){let l=0;for(const u of t)yield n.call(s,u,l,t),yield a.call(s,u,l,t),++l}var ys={},Ua={},Xa=34,sr=10,Ha=13;function b0(t){return new Function("d","return {"+t.map(function(n,a){return JSON.stringify(n)+": d["+a+'] || ""'}).join(",")+"}")}function Qv(t,n){var a=b0(t);return function(s,l){return n(a(s),l,t)}}function _s(t){var n=Object.create(null),a=[];return t.forEach(function(s){for(var l in s)l in n||a.push(n[l]=l)}),a}function Hn(t,n){var a=t+"",s=a.length;return s<n?new Array(n-s+1).join(0)+a:a}function Kv(t){return t<0?"-"+Hn(-t,6):t>9999?"+"+Hn(t,6):Hn(t,4)}function Jv(t){var n=t.getUTCHours(),a=t.getUTCMinutes(),s=t.getUTCSeconds(),l=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Kv(t.getUTCFullYear())+"-"+Hn(t.getUTCMonth()+1,2)+"-"+Hn(t.getUTCDate(),2)+(l?"T"+Hn(n,2)+":"+Hn(a,2)+":"+Hn(s,2)+"."+Hn(l,3)+"Z":s?"T"+Hn(n,2)+":"+Hn(a,2)+":"+Hn(s,2)+"Z":a||n?"T"+Hn(n,2)+":"+Hn(a,2)+"Z":"")}function na(t){var n=new RegExp('["'+t+`
\r]`),a=t.charCodeAt(0);function s(S,T){var A,R,D=l(S,function(O,F){if(A)return A(O,F-1);R=O,A=T?Qv(O,T):b0(O)});return D.columns=R||[],D}function l(S,T){var A=[],R=S.length,D=0,O=0,F,z=R<=0,j=!1;S.charCodeAt(R-1)===sr&&--R,S.charCodeAt(R-1)===Ha&&--R;function Z(){if(z)return Ua;if(j)return j=!1,ys;var J,en=D,tn;if(S.charCodeAt(en)===Xa){for(;D++<R&&S.charCodeAt(D)!==Xa||S.charCodeAt(++D)===Xa;);return(J=D)>=R?z=!0:(tn=S.charCodeAt(D++))===sr?j=!0:tn===Ha&&(j=!0,S.charCodeAt(D)===sr&&++D),S.slice(en+1,J-1).replace(/""/g,'"')}for(;D<R;){if((tn=S.charCodeAt(J=D++))===sr)j=!0;else if(tn===Ha)j=!0,S.charCodeAt(D)===sr&&++D;else if(tn!==a)continue;return S.slice(en,J)}return z=!0,S.slice(en,R)}for(;(F=Z())!==Ua;){for(var W=[];F!==ys&&F!==Ua;)W.push(F),F=Z();T&&(W=T(W,O++))==null||A.push(W)}return A}function u(S,T){return S.map(function(A){return T.map(function(R){return _(A[R])}).join(t)})}function c(S,T){return T==null&&(T=_s(S)),[T.map(_).join(t)].concat(u(S,T)).join(`
`)}function p(S,T){return T==null&&(T=_s(S)),u(S,T).join(`
`)}function d(S){return S.map(x).join(`
`)}function x(S){return S.map(_).join(t)}function _(S){return S==null?"":S instanceof Date?Jv(S):n.test(S+="")?'"'+S.replace(/"/g,'""')+'"':S}return{parse:s,parseRows:l,format:c,formatBody:p,formatRows:d,formatRow:x,formatValue:_}}var ye=na(","),w0=ye.parse,nb=ye.parseRows,tb=ye.format,eb=ye.formatBody,rb$1=ye.formatRows,ib=ye.formatRow,ob=ye.formatValue,_e=na("	"),x0=_e.parse,ab=_e.parseRows,ub=_e.format,fb=_e.formatBody,cb=_e.formatRows,sb=_e.formatRow,lb$1=_e.formatValue;function hb(t){for(var n in t){var a=t[n].trim(),s,l;if(!a)a=null;else if(a==="true")a=!0;else if(a==="false")a=!1;else if(a==="NaN")a=NaN;else if(!isNaN(s=+a))a=s;else if(l=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))db&&l[4]&&!l[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a);else continue;t[n]=a}return t}const db=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function gb(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function pb(t,n){return fetch(t,n).then(gb)}function mb(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function yb(t,n){return fetch(t,n).then(mb)}function _b$1(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function ta(t,n){return fetch(t,n).then(_b$1)}function M0(t){return function(n,a,s){return arguments.length===2&&typeof a=="function"&&(s=a,a=void 0),ta(n,a).then(function(l){return t(l,s)})}}function vb(t,n,a,s){arguments.length===3&&typeof a=="function"&&(s=a,a=void 0);var l=na(t);return ta(n,a).then(function(u){return l.parse(u,s)})}var bb=M0(w0),wb=M0(x0);function xb(t,n){return new Promise(function(a,s){var l=new Image;for(var u in n)l[u]=n[u];l.onerror=s,l.onload=function(){a(l)},l.src=t})}function Mb(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function $b(t,n){return fetch(t,n).then(Mb)}function Of(t){return(n,a)=>ta(n,a).then(s=>new DOMParser().parseFromString(s,t))}const $0=Of("application/xml");var Tb=Of("text/html"),Ab=Of("image/svg+xml");function Sb(t,n){var a,s=1;t==null&&(t=0),n==null&&(n=0);function l(){var u,c=a.length,p,d=0,x=0;for(u=0;u<c;++u)p=a[u],d+=p.x,x+=p.y;for(d=(d/c-t)*s,x=(x/c-n)*s,u=0;u<c;++u)p=a[u],p.x-=d,p.y-=x}return l.initialize=function(u){a=u},l.x=function(u){return arguments.length?(t=+u,l):t},l.y=function(u){return arguments.length?(n=+u,l):n},l.strength=function(u){return arguments.length?(s=+u,l):s},l}function Eb(t){const n=+this._x.call(null,t),a=+this._y.call(null,t);return T0(this.cover(n,a),n,a,t)}function T0(t,n,a,s){if(isNaN(n)||isNaN(a))return t;var l,u=t._root,c={data:s},p=t._x0,d=t._y0,x=t._x1,_=t._y1,S,T,A,R,D,O,F,z;if(!u)return t._root=c,t;for(;u.length;)if((D=n>=(S=(p+x)/2))?p=S:x=S,(O=a>=(T=(d+_)/2))?d=T:_=T,l=u,!(u=u[F=O<<1|D]))return l[F]=c,t;if(A=+t._x.call(null,u.data),R=+t._y.call(null,u.data),n===A&&a===R)return c.next=u,l?l[F]=c:t._root=c,t;do l=l?l[F]=new Array(4):t._root=new Array(4),(D=n>=(S=(p+x)/2))?p=S:x=S,(O=a>=(T=(d+_)/2))?d=T:_=T;while((F=O<<1|D)===(z=(R>=T)<<1|A>=S));return l[z]=u,l[F]=c,t}function kb(t){var n,a,s=t.length,l,u,c=new Array(s),p=new Array(s),d=1/0,x=1/0,_=-1/0,S=-1/0;for(a=0;a<s;++a)isNaN(l=+this._x.call(null,n=t[a]))||isNaN(u=+this._y.call(null,n))||(c[a]=l,p[a]=u,l<d&&(d=l),l>_&&(_=l),u<x&&(x=u),u>S&&(S=u));if(d>_||x>S)return this;for(this.cover(d,x).cover(_,S),a=0;a<s;++a)T0(this,c[a],p[a],t[a]);return this}function Nb(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var a=this._x0,s=this._y0,l=this._x1,u=this._y1;if(isNaN(a))l=(a=Math.floor(t))+1,u=(s=Math.floor(n))+1;else{for(var c=l-a||1,p=this._root,d,x;a>t||t>=l||s>n||n>=u;)switch(x=(n<s)<<1|t<a,d=new Array(4),d[x]=p,p=d,c*=2,x){case 0:l=a+c,u=s+c;break;case 1:a=l-c,u=s+c;break;case 2:l=a+c,s=u-c;break;case 3:a=l-c,s=u-c;break}this._root&&this._root.length&&(this._root=p)}return this._x0=a,this._y0=s,this._x1=l,this._y1=u,this}function Rb(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function Ib(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Yn(t,n,a,s,l){this.node=t,this.x0=n,this.y0=a,this.x1=s,this.y1=l}function Cb(t,n,a){var s,l=this._x0,u=this._y0,c,p,d,x,_=this._x1,S=this._y1,T=[],A=this._root,R,D;for(A&&T.push(new Yn(A,l,u,_,S)),a==null?a=1/0:(l=t-a,u=n-a,_=t+a,S=n+a,a*=a);R=T.pop();)if(!(!(A=R.node)||(c=R.x0)>_||(p=R.y0)>S||(d=R.x1)<l||(x=R.y1)<u))if(A.length){var O=(c+d)/2,F=(p+x)/2;T.push(new Yn(A[3],O,F,d,x),new Yn(A[2],c,F,O,x),new Yn(A[1],O,p,d,F),new Yn(A[0],c,p,O,F)),(D=(n>=F)<<1|t>=O)&&(R=T[T.length-1],T[T.length-1]=T[T.length-1-D],T[T.length-1-D]=R)}else{var z=t-+this._x.call(null,A.data),j=n-+this._y.call(null,A.data),Z=z*z+j*j;if(Z<a){var W=Math.sqrt(a=Z);l=t-W,u=n-W,_=t+W,S=n+W,s=A.data}}return s}function Pb(t){if(isNaN(_=+this._x.call(null,t))||isNaN(S=+this._y.call(null,t)))return this;var n,a=this._root,s,l,u,c=this._x0,p=this._y0,d=this._x1,x=this._y1,_,S,T,A,R,D,O,F;if(!a)return this;if(a.length)for(;;){if((R=_>=(T=(c+d)/2))?c=T:d=T,(D=S>=(A=(p+x)/2))?p=A:x=A,n=a,!(a=a[O=D<<1|R]))return this;if(!a.length)break;(n[O+1&3]||n[O+2&3]||n[O+3&3])&&(s=n,F=O)}for(;a.data!==t;)if(l=a,!(a=a.next))return this;return(u=a.next)&&delete a.next,l?(u?l.next=u:delete l.next,this):n?(u?n[O]=u:delete n[O],(a=n[0]||n[1]||n[2]||n[3])&&a===(n[3]||n[2]||n[1]||n[0])&&!a.length&&(s?s[F]=a:this._root=a),this):(this._root=u,this)}function Db(t){for(var n=0,a=t.length;n<a;++n)this.remove(t[n]);return this}function zb(){return this._root}function Ob(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function Yb(t){var n=[],a,s=this._root,l,u,c,p,d;for(s&&n.push(new Yn(s,this._x0,this._y0,this._x1,this._y1));a=n.pop();)if(!t(s=a.node,u=a.x0,c=a.y0,p=a.x1,d=a.y1)&&s.length){var x=(u+p)/2,_=(c+d)/2;(l=s[3])&&n.push(new Yn(l,x,_,p,d)),(l=s[2])&&n.push(new Yn(l,u,_,x,d)),(l=s[1])&&n.push(new Yn(l,x,c,p,_)),(l=s[0])&&n.push(new Yn(l,u,c,x,_))}return this}function Fb(t){var n=[],a=[],s;for(this._root&&n.push(new Yn(this._root,this._x0,this._y0,this._x1,this._y1));s=n.pop();){var l=s.node;if(l.length){var u,c=s.x0,p=s.y0,d=s.x1,x=s.y1,_=(c+d)/2,S=(p+x)/2;(u=l[0])&&n.push(new Yn(u,c,p,_,S)),(u=l[1])&&n.push(new Yn(u,_,p,d,S)),(u=l[2])&&n.push(new Yn(u,c,S,_,x)),(u=l[3])&&n.push(new Yn(u,_,S,d,x))}a.push(s)}for(;s=a.pop();)t(s.node,s.x0,s.y0,s.x1,s.y1);return this}function qb(t){return t[0]}function Lb(t){return arguments.length?(this._x=t,this):this._x}function Bb(t){return t[1]}function Ub(t){return arguments.length?(this._y=t,this):this._y}function ea(t,n,a){var s=new Yf(n??qb,a??Bb,NaN,NaN,NaN,NaN);return t==null?s:s.addAll(t)}function Yf(t,n,a,s,l,u){this._x=t,this._y=n,this._x0=a,this._y0=s,this._x1=l,this._y1=u,this._root=void 0}function vs(t){for(var n={data:t.data},a=n;t=t.next;)a=a.next={data:t.data};return n}var Xn=ea.prototype=Yf.prototype;Xn.copy=function(){var t=new Yf(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,a,s;if(!n)return t;if(!n.length)return t._root=vs(n),t;for(a=[{source:n,target:t._root=new Array(4)}];n=a.pop();)for(var l=0;l<4;++l)(s=n.source[l])&&(s.length?a.push({source:s,target:n.target[l]=new Array(4)}):n.target[l]=vs(s));return t};Xn.add=Eb;Xn.addAll=kb;Xn.cover=Nb;Xn.data=Rb;Xn.extent=Ib;Xn.find=Cb;Xn.remove=Pb;Xn.removeAll=Db;Xn.root=zb;Xn.size=Ob;Xn.visit=Yb;Xn.visitAfter=Fb;Xn.x=Lb;Xn.y=Ub;function vn(t){return function(){return t}}function Ot(t){return(t()-.5)*1e-6}function Xb(t){return t.x+t.vx}function Hb(t){return t.y+t.vy}function jb(t){var n,a,s,l=1,u=1;typeof t!="function"&&(t=vn(t==null?1:+t));function c(){for(var x,_=n.length,S,T,A,R,D,O,F=0;F<u;++F)for(S=ea(n,Xb,Hb).visitAfter(p),x=0;x<_;++x)T=n[x],D=a[T.index],O=D*D,A=T.x+T.vx,R=T.y+T.vy,S.visit(z);function z(j,Z,W,J,en){var tn=j.data,Ct=j.r,Q=D+Ct;if(tn){if(tn.index>T.index){var on=A-tn.x-tn.vx,gn=R-tn.y-tn.vy,In=on*on+gn*gn;In<Q*Q&&(on===0&&(on=Ot(s),In+=on*on),gn===0&&(gn=Ot(s),In+=gn*gn),In=(Q-(In=Math.sqrt(In)))/In*l,T.vx+=(on*=In)*(Q=(Ct*=Ct)/(O+Ct)),T.vy+=(gn*=In)*Q,tn.vx-=on*(Q=1-Q),tn.vy-=gn*Q)}return}return Z>A+Q||J<A-Q||W>R+Q||en<R-Q}}function p(x){if(x.data)return x.r=a[x.data.index];for(var _=x.r=0;_<4;++_)x[_]&&x[_].r>x.r&&(x.r=x[_].r)}function d(){if(n){var x,_=n.length,S;for(a=new Array(_),x=0;x<_;++x)S=n[x],a[S.index]=+t(S,x,n)}}return c.initialize=function(x,_){n=x,s=_,d()},c.iterations=function(x){return arguments.length?(u=+x,c):u},c.strength=function(x){return arguments.length?(l=+x,c):l},c.radius=function(x){return arguments.length?(t=typeof x=="function"?x:vn(+x),d(),c):t},c}function Wb(t){return t.index}function bs(t,n){var a=t.get(n);if(!a)throw new Error("node not found: "+n);return a}function Vb(t){var n=Wb,a=S,s,l=vn(30),u,c,p,d,x,_=1;t==null&&(t=[]);function S(O){return 1/Math.min(p[O.source.index],p[O.target.index])}function T(O){for(var F=0,z=t.length;F<_;++F)for(var j=0,Z,W,J,en,tn,Ct,Q;j<z;++j)Z=t[j],W=Z.source,J=Z.target,en=J.x+J.vx-W.x-W.vx||Ot(x),tn=J.y+J.vy-W.y-W.vy||Ot(x),Ct=Math.sqrt(en*en+tn*tn),Ct=(Ct-u[j])/Ct*O*s[j],en*=Ct,tn*=Ct,J.vx-=en*(Q=d[j]),J.vy-=tn*Q,W.vx+=en*(Q=1-Q),W.vy+=tn*Q}function A(){if(c){var O,F=c.length,z=t.length,j=new Map(c.map((W,J)=>[n(W,J,c),W])),Z;for(O=0,p=new Array(F);O<z;++O)Z=t[O],Z.index=O,typeof Z.source!="object"&&(Z.source=bs(j,Z.source)),typeof Z.target!="object"&&(Z.target=bs(j,Z.target)),p[Z.source.index]=(p[Z.source.index]||0)+1,p[Z.target.index]=(p[Z.target.index]||0)+1;for(O=0,d=new Array(z);O<z;++O)Z=t[O],d[O]=p[Z.source.index]/(p[Z.source.index]+p[Z.target.index]);s=new Array(z),R(),u=new Array(z),D()}}function R(){if(c)for(var O=0,F=t.length;O<F;++O)s[O]=+a(t[O],O,t)}function D(){if(c)for(var O=0,F=t.length;O<F;++O)u[O]=+l(t[O],O,t)}return T.initialize=function(O,F){c=O,x=F,A()},T.links=function(O){return arguments.length?(t=O,A(),T):t},T.id=function(O){return arguments.length?(n=O,T):n},T.iterations=function(O){return arguments.length?(_=+O,T):_},T.strength=function(O){return arguments.length?(a=typeof O=="function"?O:vn(+O),R(),T):a},T.distance=function(O){return arguments.length?(l=typeof O=="function"?O:vn(+O),D(),T):l},T}const Gb=1664525,Zb=1013904223,ws=4294967296;function Qb(){let t=1;return()=>(t=(Gb*t+Zb)%ws)/ws}function Kb(t){return t.x}function Jb(t){return t.y}var nw=10,tw=Math.PI*(3-Math.sqrt(5));function ew(t){var n,a=1,s=.001,l=1-Math.pow(s,1/300),u=0,c=.6,p=new Map,d=Qo(S),x=pe("tick","end"),_=Qb();t==null&&(t=[]);function S(){T(),x.call("tick",n),a<s&&(d.stop(),x.call("end",n))}function T(D){var O,F=t.length,z;D===void 0&&(D=1);for(var j=0;j<D;++j)for(a+=(u-a)*l,p.forEach(function(Z){Z(a)}),O=0;O<F;++O)z=t[O],z.fx==null?z.x+=z.vx*=c:(z.x=z.fx,z.vx=0),z.fy==null?z.y+=z.vy*=c:(z.y=z.fy,z.vy=0);return n}function A(){for(var D=0,O=t.length,F;D<O;++D){if(F=t[D],F.index=D,F.fx!=null&&(F.x=F.fx),F.fy!=null&&(F.y=F.fy),isNaN(F.x)||isNaN(F.y)){var z=nw*Math.sqrt(.5+D),j=D*tw;F.x=z*Math.cos(j),F.y=z*Math.sin(j)}(isNaN(F.vx)||isNaN(F.vy))&&(F.vx=F.vy=0)}}function R(D){return D.initialize&&D.initialize(t,_),D}return A(),n={tick:T,restart:function(){return d.restart(S),n},stop:function(){return d.stop(),n},nodes:function(D){return arguments.length?(t=D,A(),p.forEach(R),n):t},alpha:function(D){return arguments.length?(a=+D,n):a},alphaMin:function(D){return arguments.length?(s=+D,n):s},alphaDecay:function(D){return arguments.length?(l=+D,n):+l},alphaTarget:function(D){return arguments.length?(u=+D,n):u},velocityDecay:function(D){return arguments.length?(c=1-D,n):1-c},randomSource:function(D){return arguments.length?(_=D,p.forEach(R),n):_},force:function(D,O){return arguments.length>1?(O==null?p.delete(D):p.set(D,R(O)),n):p.get(D)},find:function(D,O,F){var z=0,j=t.length,Z,W,J,en,tn;for(F==null?F=1/0:F*=F,z=0;z<j;++z)en=t[z],Z=D-en.x,W=O-en.y,J=Z*Z+W*W,J<F&&(tn=en,F=J);return tn},on:function(D,O){return arguments.length>1?(x.on(D,O),n):x.on(D)}}}function rw(){var t,n,a,s,l=vn(-30),u,c=1,p=1/0,d=.81;function x(A){var R,D=t.length,O=ea(t,Kb,Jb).visitAfter(S);for(s=A,R=0;R<D;++R)n=t[R],O.visit(T)}function _(){if(t){var A,R=t.length,D;for(u=new Array(R),A=0;A<R;++A)D=t[A],u[D.index]=+l(D,A,t)}}function S(A){var R=0,D,O,F=0,z,j,Z;if(A.length){for(z=j=Z=0;Z<4;++Z)(D=A[Z])&&(O=Math.abs(D.value))&&(R+=D.value,F+=O,z+=O*D.x,j+=O*D.y);A.x=z/F,A.y=j/F}else{D=A,D.x=D.data.x,D.y=D.data.y;do R+=u[D.data.index];while(D=D.next)}A.value=R}function T(A,R,D,O){if(!A.value)return!0;var F=A.x-n.x,z=A.y-n.y,j=O-R,Z=F*F+z*z;if(j*j/d<Z)return Z<p&&(F===0&&(F=Ot(a),Z+=F*F),z===0&&(z=Ot(a),Z+=z*z),Z<c&&(Z=Math.sqrt(c*Z)),n.vx+=F*A.value*s/Z,n.vy+=z*A.value*s/Z),!0;if(!(A.length||Z>=p)){(A.data!==n||A.next)&&(F===0&&(F=Ot(a),Z+=F*F),z===0&&(z=Ot(a),Z+=z*z),Z<c&&(Z=Math.sqrt(c*Z)));do A.data!==n&&(j=u[A.data.index]*s/Z,n.vx+=F*j,n.vy+=z*j);while(A=A.next)}}return x.initialize=function(A,R){t=A,a=R,_()},x.strength=function(A){return arguments.length?(l=typeof A=="function"?A:vn(+A),_(),x):l},x.distanceMin=function(A){return arguments.length?(c=A*A,x):Math.sqrt(c)},x.distanceMax=function(A){return arguments.length?(p=A*A,x):Math.sqrt(p)},x.theta=function(A){return arguments.length?(d=A*A,x):Math.sqrt(d)},x}function iw(t,n,a){var s,l=vn(.1),u,c;typeof t!="function"&&(t=vn(+t)),n==null&&(n=0),a==null&&(a=0);function p(x){for(var _=0,S=s.length;_<S;++_){var T=s[_],A=T.x-n||1e-6,R=T.y-a||1e-6,D=Math.sqrt(A*A+R*R),O=(c[_]-D)*u[_]*x/D;T.vx+=A*O,T.vy+=R*O}}function d(){if(s){var x,_=s.length;for(u=new Array(_),c=new Array(_),x=0;x<_;++x)c[x]=+t(s[x],x,s),u[x]=isNaN(c[x])?0:+l(s[x],x,s)}}return p.initialize=function(x){s=x,d()},p.strength=function(x){return arguments.length?(l=typeof x=="function"?x:vn(+x),d(),p):l},p.radius=function(x){return arguments.length?(t=typeof x=="function"?x:vn(+x),d(),p):t},p.x=function(x){return arguments.length?(n=+x,p):n},p.y=function(x){return arguments.length?(a=+x,p):a},p}function ow(t){var n=vn(.1),a,s,l;typeof t!="function"&&(t=vn(t==null?0:+t));function u(p){for(var d=0,x=a.length,_;d<x;++d)_=a[d],_.vx+=(l[d]-_.x)*s[d]*p}function c(){if(a){var p,d=a.length;for(s=new Array(d),l=new Array(d),p=0;p<d;++p)s[p]=isNaN(l[p]=+t(a[p],p,a))?0:+n(a[p],p,a)}}return u.initialize=function(p){a=p,c()},u.strength=function(p){return arguments.length?(n=typeof p=="function"?p:vn(+p),c(),u):n},u.x=function(p){return arguments.length?(t=typeof p=="function"?p:vn(+p),c(),u):t},u}function aw(t){var n=vn(.1),a,s,l;typeof t!="function"&&(t=vn(t==null?0:+t));function u(p){for(var d=0,x=a.length,_;d<x;++d)_=a[d],_.vy+=(l[d]-_.y)*s[d]*p}function c(){if(a){var p,d=a.length;for(s=new Array(d),l=new Array(d),p=0;p<d;++p)s[p]=isNaN(l[p]=+t(a[p],p,a))?0:+n(a[p],p,a)}}return u.initialize=function(p){a=p,c()},u.strength=function(p){return arguments.length?(n=typeof p=="function"?p:vn(+p),c(),u):n},u.y=function(p){return arguments.length?(t=typeof p=="function"?p:vn(+p),c(),u):t},u}function uw(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function io(t,n){if((a=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var a,s=t.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+t.slice(a+1)]}function je(t){return t=io(Math.abs(t)),t?t[1]:NaN}function fw(t,n){return function(a,s){for(var l=a.length,u=[],c=0,p=t[0],d=0;l>0&&p>0&&(d+p+1>s&&(p=Math.max(1,s-d)),u.push(a.substring(l-=p,l+p)),!((d+=p+1)>s));)p=t[c=(c+1)%t.length];return u.reverse().join(n)}}function cw(t){return function(n){return n.replace(/[0-9]/g,function(a){return t[+a]})}}var sw=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function We(t){if(!(n=sw.exec(t)))throw new Error("invalid format: "+t);var n;return new ra({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}We.prototype=ra.prototype;function ra(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ra.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lw(t){e:for(var n=t.length,a=1,s=-1,l;a<n;++a)switch(t[a]){case".":s=l=a;break;case"0":s===0&&(s=a),l=a;break;default:if(!+t[a])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(l+1):t}var A0;function hw(t,n){var a=io(t,n);if(!a)return t+"";var s=a[0],l=a[1],u=l-(A0=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,c=s.length;return u===c?s:u>c?s+new Array(u-c+1).join("0"):u>0?s.slice(0,u)+"."+s.slice(u):"0."+new Array(1-u).join("0")+io(t,Math.max(0,n+u-1))[0]}function xs(t,n){var a=io(t,n);if(!a)return t+"";var s=a[0],l=a[1];return l<0?"0."+new Array(-l).join("0")+s:s.length>l+1?s.slice(0,l+1)+"."+s.slice(l+1):s+new Array(l-s.length+2).join("0")}const Ms={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:uw,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>xs(t*100,n),r:xs,s:hw,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $s(t){return t}var Ts=Array.prototype.map,As=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function S0(t){var n=t.grouping===void 0||t.thousands===void 0?$s:fw(Ts.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",l=t.decimal===void 0?".":t.decimal+"",u=t.numerals===void 0?$s:cw(Ts.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",p=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function x(S){S=We(S);var T=S.fill,A=S.align,R=S.sign,D=S.symbol,O=S.zero,F=S.width,z=S.comma,j=S.precision,Z=S.trim,W=S.type;W==="n"?(z=!0,W="g"):Ms[W]||(j===void 0&&(j=12),Z=!0,W="g"),(O||T==="0"&&A==="=")&&(O=!0,T="0",A="=");var J=D==="$"?a:D==="#"&&/[boxX]/.test(W)?"0"+W.toLowerCase():"",en=D==="$"?s:/[%p]/.test(W)?c:"",tn=Ms[W],Ct=/[defgprs%]/.test(W);j=j===void 0?6:/[gprs]/.test(W)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function Q(on){var gn=J,In=en,dn,ix,Cn;if(W==="c")In=tn(on)+In,on="";else{on=+on;var ax=on<0||1/on<0;if(on=isNaN(on)?d:tn(Math.abs(on),j),Z&&(on=lw(on)),ax&&+on==0&&R!=="+"&&(ax=!1),gn=(ax?R==="("?R:p:R==="-"||R==="("?"":R)+gn,In=(W==="s"?As[8+A0/3]:"")+In+(ax&&R==="("?")":""),Ct){for(dn=-1,ix=on.length;++dn<ix;)if(Cn=on.charCodeAt(dn),48>Cn||Cn>57){In=(Cn===46?l+on.slice(dn+1):on.slice(dn))+In,on=on.slice(0,dn);break}}}z&&!O&&(on=n(on,1/0));var sx=gn.length+on.length+In.length,lx=sx<F?new Array(F-sx+1).join(T):"";switch(z&&O&&(on=n(lx+on,lx.length?F-In.length:1/0),lx=""),A){case"<":on=gn+on+In+lx;break;case"=":on=gn+lx+on+In;break;case"^":on=lx.slice(0,sx=lx.length>>1)+gn+on+In+lx.slice(sx);break;default:on=lx+gn+on+In;break}return u(on)}return Q.toString=function(){return S+""},Q}function _(S,T){var A=x((S=We(S),S.type="f",S)),R=Math.max(-8,Math.min(8,Math.floor(je(T)/3)))*3,D=Math.pow(10,-R),O=As[8+R/3];return function(F){return A(D*F)+O}}return{format:x,formatPrefix:_}}var _i,ia,Ff;E0({thousands:",",grouping:[3],currency:["$",""]});function E0(t){return _i=S0(t),ia=_i.format,Ff=_i.formatPrefix,_i}function k0(t){return Math.max(0,-je(Math.abs(t)))}function N0(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(je(n)/3)))*3-je(Math.abs(t)))}function R0(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,je(n)-je(t))+1}var H=1e-6,oo=1e-12,K=Math.PI,mn=K/2,ao=K/4,Ln=K*2,an=180/K,U=K/180,nn=Math.abs,ir=Math.atan,Bn=Math.atan2,B=Math.cos,vi=Math.ceil,I0=Math.exp,Cu=Math.hypot,uo=Math.log,ja=Math.pow,q=Math.sin,nt=Math.sign||function(t){return t>0?1:t<0?-1:0},$n=Math.sqrt,qf=Math.tan;function C0(t){return t>1?0:t<-1?K:Math.acos(t)}function Un(t){return t>1?mn:t<-1?-mn:Math.asin(t)}function Ss(t){return(t=q(t/2))*t}function ln(){}function fo(t,n){t&&ks.hasOwnProperty(t.type)&&ks[t.type](t,n)}var Es={Feature:function(t,n){fo(t.geometry,n)},FeatureCollection:function(t,n){for(var a=t.features,s=-1,l=a.length;++s<l;)fo(a[s].geometry,n)}},ks={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)t=a[s],n.point(t[0],t[1],t[2])},LineString:function(t,n){Pu(t.coordinates,n,0)},MultiLineString:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)Pu(a[s],n,0)},Polygon:function(t,n){Ns(t.coordinates,n)},MultiPolygon:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)Ns(a[s],n)},GeometryCollection:function(t,n){for(var a=t.geometries,s=-1,l=a.length;++s<l;)fo(a[s],n)}};function Pu(t,n,a){var s=-1,l=t.length-a,u;for(n.lineStart();++s<l;)u=t[s],n.point(u[0],u[1],u[2]);n.lineEnd()}function Ns(t,n){var a=-1,s=t.length;for(n.polygonStart();++a<s;)Pu(t[a],n,1);n.polygonEnd()}function it(t,n){t&&Es.hasOwnProperty(t.type)?Es[t.type](t,n):fo(t,n)}var co=new bn,so=new bn,P0,D0,Du,zu,Ou,pt={point:ln,lineStart:ln,lineEnd:ln,polygonStart:function(){co=new bn,pt.lineStart=dw,pt.lineEnd=gw},polygonEnd:function(){var t=+co;so.add(t<0?Ln+t:t),this.lineStart=this.lineEnd=this.point=ln},sphere:function(){so.add(Ln)}};function dw(){pt.point=pw}function gw(){z0(P0,D0)}function pw(t,n){pt.point=z0,P0=t,D0=n,t*=U,n*=U,Du=t,zu=B(n=n/2+ao),Ou=q(n)}function z0(t,n){t*=U,n*=U,n=n/2+ao;var a=t-Du,s=a>=0?1:-1,l=s*a,u=B(n),c=q(n),p=Ou*c,d=zu*u+p*B(l),x=p*s*q(l);co.add(Bn(x,d)),Du=t,zu=u,Ou=c}function mw(t){return so=new bn,it(t,pt),so*2}function lo(t){return[Bn(t[1],t[0]),Un(t[2])]}function se(t){var n=t[0],a=t[1],s=B(a);return[s*B(n),s*q(n),q(a)]}function bi(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Ve(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Wa(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function wi(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function ho(t){var n=$n(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var sn,Wn,pn,Gn,Qt,O0,Y0,Ye,Er,Dt,Nt,$t={point:Yu,lineStart:Rs,lineEnd:Is,polygonStart:function(){$t.point=q0,$t.lineStart=yw,$t.lineEnd=_w,Er=new bn,pt.polygonStart()},polygonEnd:function(){pt.polygonEnd(),$t.point=Yu,$t.lineStart=Rs,$t.lineEnd=Is,co<0?(sn=-(pn=180),Wn=-(Gn=90)):Er>H?Gn=90:Er<-1e-6&&(Wn=-90),Nt[0]=sn,Nt[1]=pn},sphere:function(){sn=-(pn=180),Wn=-(Gn=90)}};function Yu(t,n){Dt.push(Nt=[sn=t,pn=t]),n<Wn&&(Wn=n),n>Gn&&(Gn=n)}function F0(t,n){var a=se([t*U,n*U]);if(Ye){var s=Ve(Ye,a),l=[s[1],-s[0],0],u=Ve(l,s);ho(u),u=lo(u);var c=t-Qt,p=c>0?1:-1,d=u[0]*an*p,x,_=nn(c)>180;_^(p*Qt<d&&d<p*t)?(x=u[1]*an,x>Gn&&(Gn=x)):(d=(d+360)%360-180,_^(p*Qt<d&&d<p*t)?(x=-u[1]*an,x<Wn&&(Wn=x)):(n<Wn&&(Wn=n),n>Gn&&(Gn=n))),_?t<Qt?Vn(sn,t)>Vn(sn,pn)&&(pn=t):Vn(t,pn)>Vn(sn,pn)&&(sn=t):pn>=sn?(t<sn&&(sn=t),t>pn&&(pn=t)):t>Qt?Vn(sn,t)>Vn(sn,pn)&&(pn=t):Vn(t,pn)>Vn(sn,pn)&&(sn=t)}else Dt.push(Nt=[sn=t,pn=t]);n<Wn&&(Wn=n),n>Gn&&(Gn=n),Ye=a,Qt=t}function Rs(){$t.point=F0}function Is(){Nt[0]=sn,Nt[1]=pn,$t.point=Yu,Ye=null}function q0(t,n){if(Ye){var a=t-Qt;Er.add(nn(a)>180?a+(a>0?360:-360):a)}else O0=t,Y0=n;pt.point(t,n),F0(t,n)}function yw(){pt.lineStart()}function _w(){q0(O0,Y0),pt.lineEnd(),nn(Er)>H&&(sn=-(pn=180)),Nt[0]=sn,Nt[1]=pn,Ye=null}function Vn(t,n){return(n-=t)<0?n+360:n}function vw(t,n){return t[0]-n[0]}function Cs(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function bw(t){var n,a,s,l,u,c,p;if(Gn=pn=-(sn=Wn=1/0),Dt=[],it(t,$t),a=Dt.length){for(Dt.sort(vw),n=1,s=Dt[0],u=[s];n<a;++n)l=Dt[n],Cs(s,l[0])||Cs(s,l[1])?(Vn(s[0],l[1])>Vn(s[0],s[1])&&(s[1]=l[1]),Vn(l[0],s[1])>Vn(s[0],s[1])&&(s[0]=l[0])):u.push(s=l);for(c=-1/0,a=u.length-1,n=0,s=u[a];n<=a;s=l,++n)l=u[n],(p=Vn(s[1],l[0]))>c&&(c=p,sn=l[0],pn=s[1])}return Dt=Nt=null,sn===1/0||Wn===1/0?[[NaN,NaN],[NaN,NaN]]:[[sn,Wn],[pn,Gn]]}var vr,go,po,mo,yo,_o,vo,bo,Fu,qu,Lu,L0,B0,Dn,zn,On,ot={sphere:ln,point:Lf,lineStart:Ps,lineEnd:Ds,polygonStart:function(){ot.lineStart=Mw,ot.lineEnd=$w},polygonEnd:function(){ot.lineStart=Ps,ot.lineEnd=Ds}};function Lf(t,n){t*=U,n*=U;var a=B(n);ti(a*B(t),a*q(t),q(n))}function ti(t,n,a){++vr,po+=(t-po)/vr,mo+=(n-mo)/vr,yo+=(a-yo)/vr}function Ps(){ot.point=ww}function ww(t,n){t*=U,n*=U;var a=B(n);Dn=a*B(t),zn=a*q(t),On=q(n),ot.point=xw,ti(Dn,zn,On)}function xw(t,n){t*=U,n*=U;var a=B(n),s=a*B(t),l=a*q(t),u=q(n),c=Bn($n((c=zn*u-On*l)*c+(c=On*s-Dn*u)*c+(c=Dn*l-zn*s)*c),Dn*s+zn*l+On*u);go+=c,_o+=c*(Dn+(Dn=s)),vo+=c*(zn+(zn=l)),bo+=c*(On+(On=u)),ti(Dn,zn,On)}function Ds(){ot.point=Lf}function Mw(){ot.point=Tw}function $w(){U0(L0,B0),ot.point=Lf}function Tw(t,n){L0=t,B0=n,t*=U,n*=U,ot.point=U0;var a=B(n);Dn=a*B(t),zn=a*q(t),On=q(n),ti(Dn,zn,On)}function U0(t,n){t*=U,n*=U;var a=B(n),s=a*B(t),l=a*q(t),u=q(n),c=zn*u-On*l,p=On*s-Dn*u,d=Dn*l-zn*s,x=Cu(c,p,d),_=Un(x),S=x&&-_/x;Fu.add(S*c),qu.add(S*p),Lu.add(S*d),go+=_,_o+=_*(Dn+(Dn=s)),vo+=_*(zn+(zn=l)),bo+=_*(On+(On=u)),ti(Dn,zn,On)}function Aw(t){vr=go=po=mo=yo=_o=vo=bo=0,Fu=new bn,qu=new bn,Lu=new bn,it(t,ot);var n=+Fu,a=+qu,s=+Lu,l=Cu(n,a,s);return l<oo&&(n=_o,a=vo,s=bo,go<H&&(n=po,a=mo,s=yo),l=Cu(n,a,s),l<oo)?[NaN,NaN]:[Bn(a,n)*an,Un(s/l)*an]}function ke(t){return function(){return t}}function Bu(t,n){function a(s,l){return s=t(s,l),n(s[0],s[1])}return t.invert&&n.invert&&(a.invert=function(s,l){return s=n.invert(s,l),s&&t.invert(s[0],s[1])}),a}function Uu(t,n){return nn(t)>K&&(t-=Math.round(t/Ln)*Ln),[t,n]}Uu.invert=Uu;function Bf(t,n,a){return(t%=Ln)?n||a?Bu(Os(t),Ys(n,a)):Os(t):n||a?Ys(n,a):Uu}function zs(t){return function(n,a){return n+=t,nn(n)>K&&(n-=Math.round(n/Ln)*Ln),[n,a]}}function Os(t){var n=zs(t);return n.invert=zs(-t),n}function Ys(t,n){var a=B(t),s=q(t),l=B(n),u=q(n);function c(p,d){var x=B(d),_=B(p)*x,S=q(p)*x,T=q(d),A=T*a+_*s;return[Bn(S*l-A*u,_*a-T*s),Un(A*l+S*u)]}return c.invert=function(p,d){var x=B(d),_=B(p)*x,S=q(p)*x,T=q(d),A=T*l-S*u;return[Bn(S*l+T*u,_*a+A*s),Un(A*a-_*s)]},c}function X0(t){t=Bf(t[0]*U,t[1]*U,t.length>2?t[2]*U:0);function n(a){return a=t(a[0]*U,a[1]*U),a[0]*=an,a[1]*=an,a}return n.invert=function(a){return a=t.invert(a[0]*U,a[1]*U),a[0]*=an,a[1]*=an,a},n}function H0(t,n,a,s,l,u){if(a){var c=B(n),p=q(n),d=s*a;l==null?(l=n+s*Ln,u=n-d/2):(l=Fs(c,l),u=Fs(c,u),(s>0?l<u:l>u)&&(l+=s*Ln));for(var x,_=l;s>0?_>u:_<u;_-=d)x=lo([c,-p*B(_),-p*q(_)]),t.point(x[0],x[1])}}function Fs(t,n){n=se(n),n[0]-=t,ho(n);var a=C0(-n[1]);return((-n[2]<0?-a:a)+Ln-H)%Ln}function Sw(){var t=ke([0,0]),n=ke(90),a=ke(2),s,l,u={point:c};function c(d,x){s.push(d=l(d,x)),d[0]*=an,d[1]*=an}function p(){var d=t.apply(this,arguments),x=n.apply(this,arguments)*U,_=a.apply(this,arguments)*U;return s=[],l=Bf(-d[0]*U,-d[1]*U,0).invert,H0(u,x,_,1),d={type:"Polygon",coordinates:[s]},s=l=null,d}return p.center=function(d){return arguments.length?(t=typeof d=="function"?d:ke([+d[0],+d[1]]),p):t},p.radius=function(d){return arguments.length?(n=typeof d=="function"?d:ke(+d),p):n},p.precision=function(d){return arguments.length?(a=typeof d=="function"?d:ke(+d),p):a},p}function j0(){var t=[],n;return{point:function(a,s,l){n.push([a,s,l])},lineStart:function(){t.push(n=[])},lineEnd:ln,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var a=t;return t=[],n=null,a}}}function qi(t,n){return nn(t[0]-n[0])<H&&nn(t[1]-n[1])<H}function xi(t,n,a,s){this.x=t,this.z=n,this.o=a,this.e=s,this.v=!1,this.n=this.p=null}function W0(t,n,a,s,l){var u=[],c=[],p,d;if(t.forEach(function(R){if(!((D=R.length-1)<=0)){var D,O=R[0],F=R[D],z;if(qi(O,F)){if(!O[2]&&!F[2]){for(l.lineStart(),p=0;p<D;++p)l.point((O=R[p])[0],O[1]);l.lineEnd();return}F[0]+=2*H}u.push(z=new xi(O,R,null,!0)),c.push(z.o=new xi(O,null,z,!1)),u.push(z=new xi(F,R,null,!1)),c.push(z.o=new xi(F,null,z,!0))}}),!!u.length){for(c.sort(n),qs(u),qs(c),p=0,d=c.length;p<d;++p)c[p].e=a=!a;for(var x=u[0],_,S;;){for(var T=x,A=!0;T.v;)if((T=T.n)===x)return;_=T.z,l.lineStart();do{if(T.v=T.o.v=!0,T.e){if(A)for(p=0,d=_.length;p<d;++p)l.point((S=_[p])[0],S[1]);else s(T.x,T.n.x,1,l);T=T.n}else{if(A)for(_=T.p.z,p=_.length-1;p>=0;--p)l.point((S=_[p])[0],S[1]);else s(T.x,T.p.x,-1,l);T=T.p}T=T.o,_=T.z,A=!A}while(!T.v);l.lineEnd()}}}function qs(t){if(n=t.length){for(var n,a=0,s=t[0],l;++a<n;)s.n=l=t[a],l.p=s,s=l;s.n=l=t[0],l.p=s}}function Va(t){return nn(t[0])<=K?t[0]:nt(t[0])*((nn(t[0])+K)%Ln-K)}function V0(t,n){var a=Va(n),s=n[1],l=q(s),u=[q(a),-B(a),0],c=0,p=0,d=new bn;l===1?s=mn+H:l===-1&&(s=-mn-H);for(var x=0,_=t.length;x<_;++x)if(T=(S=t[x]).length)for(var S,T,A=S[T-1],R=Va(A),D=A[1]/2+ao,O=q(D),F=B(D),z=0;z<T;++z,R=Z,O=J,F=en,A=j){var j=S[z],Z=Va(j),W=j[1]/2+ao,J=q(W),en=B(W),tn=Z-R,Ct=tn>=0?1:-1,Q=Ct*tn,on=Q>K,gn=O*J;if(d.add(Bn(gn*Ct*q(Q),F*en+gn*B(Q))),c+=on?tn+Ct*Ln:tn,on^R>=a^Z>=a){var In=Ve(se(A),se(j));ho(In);var dn=Ve(u,In);ho(dn);var ix=(on^tn>=0?-1:1)*Un(dn[2]);(s>ix||s===ix&&(In[0]||In[1]))&&(p+=on^tn>=0?1:-1)}}return(c<-1e-6||c<H&&d<-1e-12)^p&1}function G0(t,n,a,s){return function(l){var u=n(l),c=j0(),p=n(c),d=!1,x,_,S,T={point:A,lineStart:D,lineEnd:O,polygonStart:function(){T.point=F,T.lineStart=z,T.lineEnd=j,_=[],x=[]},polygonEnd:function(){T.point=A,T.lineStart=D,T.lineEnd=O,_=yf(_);var Z=V0(x,s);_.length?(d||(l.polygonStart(),d=!0),W0(_,kw,Z,a,l)):Z&&(d||(l.polygonStart(),d=!0),l.lineStart(),a(null,null,1,l),l.lineEnd()),d&&(l.polygonEnd(),d=!1),_=x=null},sphere:function(){l.polygonStart(),l.lineStart(),a(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function A(Z,W){t(Z,W)&&l.point(Z,W)}function R(Z,W){u.point(Z,W)}function D(){T.point=R,u.lineStart()}function O(){T.point=A,u.lineEnd()}function F(Z,W){S.push([Z,W]),p.point(Z,W)}function z(){p.lineStart(),S=[]}function j(){F(S[0][0],S[0][1]),p.lineEnd();var Z=p.clean(),W=c.result(),J,en=W.length,tn,Ct,Q;if(S.pop(),x.push(S),S=null,!!en){if(Z&1){if(Ct=W[0],(tn=Ct.length-1)>0){for(d||(l.polygonStart(),d=!0),l.lineStart(),J=0;J<tn;++J)l.point((Q=Ct[J])[0],Q[1]);l.lineEnd()}return}en>1&&Z&2&&W.push(W.pop().concat(W.shift())),_.push(W.filter(Ew))}}return T}}function Ew(t){return t.length>1}function kw(t,n){return((t=t.x)[0]<0?t[1]-mn-H:mn-t[1])-((n=n.x)[0]<0?n[1]-mn-H:mn-n[1])}const Xu=G0(function(){return!0},Nw,Iw,[-K,-mn]);function Nw(t){var n=NaN,a=NaN,s=NaN,l;return{lineStart:function(){t.lineStart(),l=1},point:function(u,c){var p=u>0?K:-K,d=nn(u-n);nn(d-K)<H?(t.point(n,a=(a+c)/2>0?mn:-mn),t.point(s,a),t.lineEnd(),t.lineStart(),t.point(p,a),t.point(u,a),l=0):s!==p&&d>=K&&(nn(n-s)<H&&(n-=s*H),nn(u-p)<H&&(u-=p*H),a=Rw(n,a,u,c),t.point(s,a),t.lineEnd(),t.lineStart(),t.point(p,a),l=0),t.point(n=u,a=c),s=p},lineEnd:function(){t.lineEnd(),n=a=NaN},clean:function(){return 2-l}}}function Rw(t,n,a,s){var l,u,c=q(t-a);return nn(c)>H?ir((q(n)*(u=B(s))*q(a)-q(s)*(l=B(n))*q(t))/(l*u*c)):(n+s)/2}function Iw(t,n,a,s){var l;if(t==null)l=a*mn,s.point(-K,l),s.point(0,l),s.point(K,l),s.point(K,0),s.point(K,-l),s.point(0,-l),s.point(-K,-l),s.point(-K,0),s.point(-K,l);else if(nn(t[0]-n[0])>H){var u=t[0]<n[0]?K:-K;l=a*u/2,s.point(-u,l),s.point(0,l),s.point(u,l)}else s.point(n[0],n[1])}function Z0(t){var n=B(t),a=2*U,s=n>0,l=nn(n)>H;function u(_,S,T,A){H0(A,t,a,T,_,S)}function c(_,S){return B(_)*B(S)>n}function p(_){var S,T,A,R,D;return{lineStart:function(){R=A=!1,D=1},point:function(O,F){var z=[O,F],j,Z=c(O,F),W=s?Z?0:x(O,F):Z?x(O+(O<0?K:-K),F):0;if(!S&&(R=A=Z)&&_.lineStart(),Z!==A&&(j=d(S,z),(!j||qi(S,j)||qi(z,j))&&(z[2]=1)),Z!==A)D=0,Z?(_.lineStart(),j=d(z,S),_.point(j[0],j[1])):(j=d(S,z),_.point(j[0],j[1],2),_.lineEnd()),S=j;else if(l&&S&&s^Z){var J;!(W&T)&&(J=d(z,S,!0))&&(D=0,s?(_.lineStart(),_.point(J[0][0],J[0][1]),_.point(J[1][0],J[1][1]),_.lineEnd()):(_.point(J[1][0],J[1][1]),_.lineEnd(),_.lineStart(),_.point(J[0][0],J[0][1],3)))}Z&&(!S||!qi(S,z))&&_.point(z[0],z[1]),S=z,A=Z,T=W},lineEnd:function(){A&&_.lineEnd(),S=null},clean:function(){return D|(R&&A)<<1}}}function d(_,S,T){var A=se(_),R=se(S),D=[1,0,0],O=Ve(A,R),F=bi(O,O),z=O[0],j=F-z*z;if(!j)return!T&&_;var Z=n*F/j,W=-n*z/j,J=Ve(D,O),en=wi(D,Z),tn=wi(O,W);Wa(en,tn);var Ct=J,Q=bi(en,Ct),on=bi(Ct,Ct),gn=Q*Q-on*(bi(en,en)-1);if(!(gn<0)){var In=$n(gn),dn=wi(Ct,(-Q-In)/on);if(Wa(dn,en),dn=lo(dn),!T)return dn;var ix=_[0],Cn=S[0],ax=_[1],sx=S[1],lx;Cn<ix&&(lx=ix,ix=Cn,Cn=lx);var ox=Cn-ix,hx=nn(ox-K)<H,_x=hx||ox<H;if(!hx&&sx<ax&&(lx=ax,ax=sx,sx=lx),_x?hx?ax+sx>0^dn[1]<(nn(dn[0]-ix)<H?ax:sx):ax<=dn[1]&&dn[1]<=sx:ox>K^(ix<=dn[0]&&dn[0]<=Cn)){var ux=wi(Ct,(-Q+In)/on);return Wa(ux,en),[dn,lo(ux)]}}}function x(_,S){var T=s?t:K-t,A=0;return _<-T?A|=1:_>T&&(A|=2),S<-T?A|=4:S>T&&(A|=8),A}return G0(c,p,u,s?[0,-t]:[-K,t-K])}function Cw(t,n,a,s,l,u){var c=t[0],p=t[1],d=n[0],x=n[1],_=0,S=1,T=d-c,A=x-p,R;if(R=a-c,!(!T&&R>0)){if(R/=T,T<0){if(R<_)return;R<S&&(S=R)}else if(T>0){if(R>S)return;R>_&&(_=R)}if(R=l-c,!(!T&&R<0)){if(R/=T,T<0){if(R>S)return;R>_&&(_=R)}else if(T>0){if(R<_)return;R<S&&(S=R)}if(R=s-p,!(!A&&R>0)){if(R/=A,A<0){if(R<_)return;R<S&&(S=R)}else if(A>0){if(R>S)return;R>_&&(_=R)}if(R=u-p,!(!A&&R<0)){if(R/=A,A<0){if(R>S)return;R>_&&(_=R)}else if(A>0){if(R<_)return;R<S&&(S=R)}return _>0&&(t[0]=c+_*T,t[1]=p+_*A),S<1&&(n[0]=c+S*T,n[1]=p+S*A),!0}}}}}var Mi=1e9,$i=-1e9;function oa(t,n,a,s){function l(x,_){return t<=x&&x<=a&&n<=_&&_<=s}function u(x,_,S,T){var A=0,R=0;if(x==null||(A=c(x,S))!==(R=c(_,S))||d(x,_)<0^S>0)do T.point(A===0||A===3?t:a,A>1?s:n);while((A=(A+S+4)%4)!==R);else T.point(_[0],_[1])}function c(x,_){return nn(x[0]-t)<H?_>0?0:3:nn(x[0]-a)<H?_>0?2:1:nn(x[1]-n)<H?_>0?1:0:_>0?3:2}function p(x,_){return d(x.x,_.x)}function d(x,_){var S=c(x,1),T=c(_,1);return S!==T?S-T:S===0?_[1]-x[1]:S===1?x[0]-_[0]:S===2?x[1]-_[1]:_[0]-x[0]}return function(x){var _=x,S=j0(),T,A,R,D,O,F,z,j,Z,W,J,en={point:tn,lineStart:gn,lineEnd:In,polygonStart:Q,polygonEnd:on};function tn(ix,Cn){l(ix,Cn)&&_.point(ix,Cn)}function Ct(){for(var ix=0,Cn=0,ax=A.length;Cn<ax;++Cn)for(var sx=A[Cn],lx=1,ox=sx.length,hx=sx[0],_x,ux,px=hx[0],dx=hx[1];lx<ox;++lx)_x=px,ux=dx,hx=sx[lx],px=hx[0],dx=hx[1],ux<=s?dx>s&&(px-_x)*(s-ux)>(dx-ux)*(t-_x)&&++ix:dx<=s&&(px-_x)*(s-ux)<(dx-ux)*(t-_x)&&--ix;return ix}function Q(){_=S,T=[],A=[],J=!0}function on(){var ix=Ct(),Cn=J&&ix,ax=(T=yf(T)).length;(Cn||ax)&&(x.polygonStart(),Cn&&(x.lineStart(),u(null,null,1,x),x.lineEnd()),ax&&W0(T,p,ix,u,x),x.polygonEnd()),_=x,T=A=R=null}function gn(){en.point=dn,A&&A.push(R=[]),W=!0,Z=!1,z=j=NaN}function In(){T&&(dn(D,O),F&&Z&&S.rejoin(),T.push(S.result())),en.point=tn,Z&&_.lineEnd()}function dn(ix,Cn){var ax=l(ix,Cn);if(A&&R.push([ix,Cn]),W)D=ix,O=Cn,F=ax,W=!1,ax&&(_.lineStart(),_.point(ix,Cn));else if(ax&&Z)_.point(ix,Cn);else{var sx=[z=Math.max($i,Math.min(Mi,z)),j=Math.max($i,Math.min(Mi,j))],lx=[ix=Math.max($i,Math.min(Mi,ix)),Cn=Math.max($i,Math.min(Mi,Cn))];Cw(sx,lx,t,n,a,s)?(Z||(_.lineStart(),_.point(sx[0],sx[1])),_.point(lx[0],lx[1]),ax||_.lineEnd(),J=!1):ax&&(_.lineStart(),_.point(ix,Cn),J=!1)}z=ix,j=Cn,Z=ax}return en}}function Pw(){var t=0,n=0,a=960,s=500,l,u,c;return c={stream:function(p){return l&&u===p?l:l=oa(t,n,a,s)(u=p)},extent:function(p){return arguments.length?(t=+p[0][0],n=+p[0][1],a=+p[1][0],s=+p[1][1],l=u=null,c):[[t,n],[a,s]]}}}var Hu,ju,Li,Bi,Ge={sphere:ln,point:ln,lineStart:Dw,lineEnd:ln,polygonStart:ln,polygonEnd:ln};function Dw(){Ge.point=Ow,Ge.lineEnd=zw}function zw(){Ge.point=Ge.lineEnd=ln}function Ow(t,n){t*=U,n*=U,ju=t,Li=q(n),Bi=B(n),Ge.point=Yw}function Yw(t,n){t*=U,n*=U;var a=q(n),s=B(n),l=nn(t-ju),u=B(l),c=q(l),p=s*c,d=Bi*a-Li*s*u,x=Li*a+Bi*s*u;Hu.add(Bn($n(p*p+d*d),x)),ju=t,Li=a,Bi=s}function Q0(t){return Hu=new bn,it(t,Ge),+Hu}var Wu=[null,null],Fw={type:"LineString",coordinates:Wu};function wo(t,n){return Wu[0]=t,Wu[1]=n,Q0(Fw)}var Ls={Feature:function(t,n){return xo(t.geometry,n)},FeatureCollection:function(t,n){for(var a=t.features,s=-1,l=a.length;++s<l;)if(xo(a[s].geometry,n))return!0;return!1}},Bs={Sphere:function(){return!0},Point:function(t,n){return Us(t.coordinates,n)},MultiPoint:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)if(Us(a[s],n))return!0;return!1},LineString:function(t,n){return Xs(t.coordinates,n)},MultiLineString:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)if(Xs(a[s],n))return!0;return!1},Polygon:function(t,n){return Hs(t.coordinates,n)},MultiPolygon:function(t,n){for(var a=t.coordinates,s=-1,l=a.length;++s<l;)if(Hs(a[s],n))return!0;return!1},GeometryCollection:function(t,n){for(var a=t.geometries,s=-1,l=a.length;++s<l;)if(xo(a[s],n))return!0;return!1}};function xo(t,n){return t&&Bs.hasOwnProperty(t.type)?Bs[t.type](t,n):!1}function Us(t,n){return wo(t,n)===0}function Xs(t,n){for(var a,s,l,u=0,c=t.length;u<c;u++){if(s=wo(t[u],n),s===0||u>0&&(l=wo(t[u],t[u-1]),l>0&&a<=l&&s<=l&&(a+s-l)*(1-Math.pow((a-s)/l,2))<oo*l))return!0;a=s}return!1}function Hs(t,n){return!!V0(t.map(qw),K0(n))}function qw(t){return t=t.map(K0),t.pop(),t}function K0(t){return[t[0]*U,t[1]*U]}function Lw(t,n){return(t&&Ls.hasOwnProperty(t.type)?Ls[t.type]:xo)(t,n)}function js(t,n,a){var s=zt(t,n-H,a).concat(n);return function(l){return s.map(function(u){return[l,u]})}}function Ws(t,n,a){var s=zt(t,n-H,a).concat(n);return function(l){return s.map(function(u){return[u,l]})}}function J0(){var t,n,a,s,l,u,c,p,d=10,x=d,_=90,S=360,T,A,R,D,O=2.5;function F(){return{type:"MultiLineString",coordinates:z()}}function z(){return zt(vi(s/_)*_,a,_).map(R).concat(zt(vi(p/S)*S,c,S).map(D)).concat(zt(vi(n/d)*d,t,d).filter(function(j){return nn(j%_)>H}).map(T)).concat(zt(vi(u/x)*x,l,x).filter(function(j){return nn(j%S)>H}).map(A))}return F.lines=function(){return z().map(function(j){return{type:"LineString",coordinates:j}})},F.outline=function(){return{type:"Polygon",coordinates:[R(s).concat(D(c).slice(1),R(a).reverse().slice(1),D(p).reverse().slice(1))]}},F.extent=function(j){return arguments.length?F.extentMajor(j).extentMinor(j):F.extentMinor()},F.extentMajor=function(j){return arguments.length?(s=+j[0][0],a=+j[1][0],p=+j[0][1],c=+j[1][1],s>a&&(j=s,s=a,a=j),p>c&&(j=p,p=c,c=j),F.precision(O)):[[s,p],[a,c]]},F.extentMinor=function(j){return arguments.length?(n=+j[0][0],t=+j[1][0],u=+j[0][1],l=+j[1][1],n>t&&(j=n,n=t,t=j),u>l&&(j=u,u=l,l=j),F.precision(O)):[[n,u],[t,l]]},F.step=function(j){return arguments.length?F.stepMajor(j).stepMinor(j):F.stepMinor()},F.stepMajor=function(j){return arguments.length?(_=+j[0],S=+j[1],F):[_,S]},F.stepMinor=function(j){return arguments.length?(d=+j[0],x=+j[1],F):[d,x]},F.precision=function(j){return arguments.length?(O=+j,T=js(u,l,90),A=Ws(n,t,O),R=js(p,c,90),D=Ws(s,a,O),F):O},F.extentMajor([[-180,-90+H],[180,90-H]]).extentMinor([[-180,-80-H],[180,80+H]])}function Bw(){return J0()()}function Uw(t,n){var a=t[0]*U,s=t[1]*U,l=n[0]*U,u=n[1]*U,c=B(s),p=q(s),d=B(u),x=q(u),_=c*B(a),S=c*q(a),T=d*B(l),A=d*q(l),R=2*Un($n(Ss(u-s)+c*d*Ss(l-a))),D=q(R),O=R?function(F){var z=q(F*=R)/D,j=q(R-F)/D,Z=j*_+z*T,W=j*S+z*A,J=j*p+z*x;return[Bn(W,Z)*an,Bn(J,$n(Z*Z+W*W))*an]}:function(){return[a*an,s*an]};return O.distance=R,O}const Xr=t=>t;var Ga=new bn,Vu=new bn,n1,t1,Gu,Zu,Tt={point:ln,lineStart:ln,lineEnd:ln,polygonStart:function(){Tt.lineStart=Xw,Tt.lineEnd=jw},polygonEnd:function(){Tt.lineStart=Tt.lineEnd=Tt.point=ln,Ga.add(nn(Vu)),Vu=new bn},result:function(){var t=Ga/2;return Ga=new bn,t}};function Xw(){Tt.point=Hw}function Hw(t,n){Tt.point=e1,n1=Gu=t,t1=Zu=n}function e1(t,n){Vu.add(Zu*t-Gu*n),Gu=t,Zu=n}function jw(){e1(n1,t1)}var Ze=1/0,Mo=Ze,Hr=-Ze,$o=Hr,To={point:Ww,lineStart:ln,lineEnd:ln,polygonStart:ln,polygonEnd:ln,result:function(){var t=[[Ze,Mo],[Hr,$o]];return Hr=$o=-(Mo=Ze=1/0),t}};function Ww(t,n){t<Ze&&(Ze=t),t>Hr&&(Hr=t),n<Mo&&(Mo=n),n>$o&&($o=n)}var Qu=0,Ku=0,br=0,Ao=0,So=0,Ce=0,Ju=0,nf=0,wr=0,r1,i1,ct,st,Jn={point:le,lineStart:Vs,lineEnd:Gs,polygonStart:function(){Jn.lineStart=Zw,Jn.lineEnd=Qw},polygonEnd:function(){Jn.point=le,Jn.lineStart=Vs,Jn.lineEnd=Gs},result:function(){var t=wr?[Ju/wr,nf/wr]:Ce?[Ao/Ce,So/Ce]:br?[Qu/br,Ku/br]:[NaN,NaN];return Qu=Ku=br=Ao=So=Ce=Ju=nf=wr=0,t}};function le(t,n){Qu+=t,Ku+=n,++br}function Vs(){Jn.point=Vw}function Vw(t,n){Jn.point=Gw,le(ct=t,st=n)}function Gw(t,n){var a=t-ct,s=n-st,l=$n(a*a+s*s);Ao+=l*(ct+t)/2,So+=l*(st+n)/2,Ce+=l,le(ct=t,st=n)}function Gs(){Jn.point=le}function Zw(){Jn.point=Kw}function Qw(){o1(r1,i1)}function Kw(t,n){Jn.point=o1,le(r1=ct=t,i1=st=n)}function o1(t,n){var a=t-ct,s=n-st,l=$n(a*a+s*s);Ao+=l*(ct+t)/2,So+=l*(st+n)/2,Ce+=l,l=st*t-ct*n,Ju+=l*(ct+t),nf+=l*(st+n),wr+=l*3,le(ct=t,st=n)}function a1(t){this._context=t}a1.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Ln);break}}},result:ln};var tf=new bn,Za,u1,f1,xr,Mr,jr={point:ln,lineStart:function(){jr.point=Jw},lineEnd:function(){Za&&c1(u1,f1),jr.point=ln},polygonStart:function(){Za=!0},polygonEnd:function(){Za=null},result:function(){var t=+tf;return tf=new bn,t}};function Jw(t,n){jr.point=c1,u1=xr=t,f1=Mr=n}function c1(t,n){xr-=t,Mr-=n,tf.add($n(xr*xr+Mr*Mr)),xr=t,Mr=n}let Zs,Eo,Qs,Ks;class Js{constructor(n){this._append=n==null?s1:n3(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,a){switch(this._point){case 0:{this._append`M${n},${a}`,this._point=1;break}case 1:{this._append`L${n},${a}`;break}default:{if(this._append`M${n},${a}`,this._radius!==Qs||this._append!==Eo){const s=this._radius,l=this._;this._="",this._append`m0,${s}a${s},${s} 0 1,1 0,${-2*s}a${s},${s} 0 1,1 0,${2*s}z`,Qs=s,Eo=this._append,Ks=this._,this._=l}this._+=Ks;break}}}result(){const n=this._;return this._="",n.length?n:null}}function s1(t){let n=1;this._+=t[0];for(const a=t.length;n<a;++n)this._+=arguments[n]+t[n]}function n3(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return s1;if(n!==Zs){const a=10**n;Zs=n,Eo=function(s){let l=1;this._+=s[0];for(const u=s.length;l<u;++l)this._+=Math.round(arguments[l]*a)/a+s[l]}}return Eo}function t3(t,n){let a=3,s=4.5,l,u;function c(p){return p&&(typeof s=="function"&&u.pointRadius(+s.apply(this,arguments)),it(p,l(u))),u.result()}return c.area=function(p){return it(p,l(Tt)),Tt.result()},c.measure=function(p){return it(p,l(jr)),jr.result()},c.bounds=function(p){return it(p,l(To)),To.result()},c.centroid=function(p){return it(p,l(Jn)),Jn.result()},c.projection=function(p){return arguments.length?(l=p==null?(t=null,Xr):(t=p).stream,c):t},c.context=function(p){return arguments.length?(u=p==null?(n=null,new Js(a)):new a1(n=p),typeof s!="function"&&u.pointRadius(s),c):n},c.pointRadius=function(p){return arguments.length?(s=typeof p=="function"?p:(u.pointRadius(+p),+p),c):s},c.digits=function(p){if(!arguments.length)return a;if(p==null)a=null;else{const d=Math.floor(p);if(!(d>=0))throw new RangeError(`invalid digits: ${p}`);a=d}return n===null&&(u=new Js(a)),c},c.projection(t).digits(a).context(n)}function e3(t){return{stream:ei(t)}}function ei(t){return function(n){var a=new ef;for(var s in t)a[s]=t[s];return a.stream=n,a}}function ef(){}ef.prototype={constructor:ef,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Uf(t,n,a){var s=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),s!=null&&t.clipExtent(null),it(a,t.stream(To)),n(To.result()),s!=null&&t.clipExtent(s),t}function aa(t,n,a){return Uf(t,function(s){var l=n[1][0]-n[0][0],u=n[1][1]-n[0][1],c=Math.min(l/(s[1][0]-s[0][0]),u/(s[1][1]-s[0][1])),p=+n[0][0]+(l-c*(s[1][0]+s[0][0]))/2,d=+n[0][1]+(u-c*(s[1][1]+s[0][1]))/2;t.scale(150*c).translate([p,d])},a)}function Xf(t,n,a){return aa(t,[[0,0],n],a)}function Hf(t,n,a){return Uf(t,function(s){var l=+n,u=l/(s[1][0]-s[0][0]),c=(l-u*(s[1][0]+s[0][0]))/2,p=-u*s[0][1];t.scale(150*u).translate([c,p])},a)}function jf(t,n,a){return Uf(t,function(s){var l=+n,u=l/(s[1][1]-s[0][1]),c=-u*s[0][0],p=(l-u*(s[1][1]+s[0][1]))/2;t.scale(150*u).translate([c,p])},a)}var nl=16,r3=B(30*U);function tl(t,n){return+n?o3(t,n):i3(t)}function i3(t){return ei({point:function(n,a){n=t(n,a),this.stream.point(n[0],n[1])}})}function o3(t,n){function a(s,l,u,c,p,d,x,_,S,T,A,R,D,O){var F=x-s,z=_-l,j=F*F+z*z;if(j>4*n&&D--){var Z=c+T,W=p+A,J=d+R,en=$n(Z*Z+W*W+J*J),tn=Un(J/=en),Ct=nn(nn(J)-1)<H||nn(u-S)<H?(u+S)/2:Bn(W,Z),Q=t(Ct,tn),on=Q[0],gn=Q[1],In=on-s,dn=gn-l,ix=z*In-F*dn;(ix*ix/j>n||nn((F*In+z*dn)/j-.5)>.3||c*T+p*A+d*R<r3)&&(a(s,l,u,c,p,d,on,gn,Ct,Z/=en,W/=en,J,D,O),O.point(on,gn),a(on,gn,Ct,Z,W,J,x,_,S,T,A,R,D,O))}}return function(s){var l,u,c,p,d,x,_,S,T,A,R,D,O={point:F,lineStart:z,lineEnd:Z,polygonStart:function(){s.polygonStart(),O.lineStart=W},polygonEnd:function(){s.polygonEnd(),O.lineStart=z}};function F(tn,Ct){tn=t(tn,Ct),s.point(tn[0],tn[1])}function z(){S=NaN,O.point=j,s.lineStart()}function j(tn,Ct){var Q=se([tn,Ct]),on=t(tn,Ct);a(S,T,_,A,R,D,S=on[0],T=on[1],_=tn,A=Q[0],R=Q[1],D=Q[2],nl,s),s.point(S,T)}function Z(){O.point=F,s.lineEnd()}function W(){z(),O.point=J,O.lineEnd=en}function J(tn,Ct){j(l=tn,Ct),u=S,c=T,p=A,d=R,x=D,O.point=j}function en(){a(S,T,_,A,R,D,u,c,l,p,d,x,nl,s),O.lineEnd=Z,Z()}return O}}var a3=ei({point:function(t,n){this.stream.point(t*U,n*U)}});function u3(t){return ei({point:function(n,a){var s=t(n,a);return this.stream.point(s[0],s[1])}})}function f3(t,n,a,s,l){function u(c,p){return c*=s,p*=l,[n+t*c,a-t*p]}return u.invert=function(c,p){return[(c-n)/t*s,(a-p)/t*l]},u}function el(t,n,a,s,l,u){if(!u)return f3(t,n,a,s,l);var c=B(u),p=q(u),d=c*t,x=p*t,_=c/t,S=p/t,T=(p*a-c*n)/t,A=(p*n+c*a)/t;function R(D,O){return D*=s,O*=l,[d*D-x*O+n,a-x*D-d*O]}return R.invert=function(D,O){return[s*(_*D-S*O+T),l*(A-S*D-_*O)]},R}function vt(t){return Wf(function(){return t})()}function Wf(t){var n,a=150,s=480,l=250,u=0,c=0,p=0,d=0,x=0,_,S=0,T=1,A=1,R=null,D=Xu,O=null,F,z,j,Z=Xr,W=.5,J,en,tn,Ct,Q;function on(ix){return tn(ix[0]*U,ix[1]*U)}function gn(ix){return ix=tn.invert(ix[0],ix[1]),ix&&[ix[0]*an,ix[1]*an]}on.stream=function(ix){return Ct&&Q===ix?Ct:Ct=a3(u3(_)(D(J(Z(Q=ix)))))},on.preclip=function(ix){return arguments.length?(D=ix,R=void 0,dn()):D},on.postclip=function(ix){return arguments.length?(Z=ix,O=F=z=j=null,dn()):Z},on.clipAngle=function(ix){return arguments.length?(D=+ix?Z0(R=ix*U):(R=null,Xu),dn()):R*an},on.clipExtent=function(ix){return arguments.length?(Z=ix==null?(O=F=z=j=null,Xr):oa(O=+ix[0][0],F=+ix[0][1],z=+ix[1][0],j=+ix[1][1]),dn()):O==null?null:[[O,F],[z,j]]},on.scale=function(ix){return arguments.length?(a=+ix,In()):a},on.translate=function(ix){return arguments.length?(s=+ix[0],l=+ix[1],In()):[s,l]},on.center=function(ix){return arguments.length?(u=ix[0]%360*U,c=ix[1]%360*U,In()):[u*an,c*an]},on.rotate=function(ix){return arguments.length?(p=ix[0]%360*U,d=ix[1]%360*U,x=ix.length>2?ix[2]%360*U:0,In()):[p*an,d*an,x*an]},on.angle=function(ix){return arguments.length?(S=ix%360*U,In()):S*an},on.reflectX=function(ix){return arguments.length?(T=ix?-1:1,In()):T<0},on.reflectY=function(ix){return arguments.length?(A=ix?-1:1,In()):A<0},on.precision=function(ix){return arguments.length?(J=tl(en,W=ix*ix),dn()):$n(W)},on.fitExtent=function(ix,Cn){return aa(on,ix,Cn)},on.fitSize=function(ix,Cn){return Xf(on,ix,Cn)},on.fitWidth=function(ix,Cn){return Hf(on,ix,Cn)},on.fitHeight=function(ix,Cn){return jf(on,ix,Cn)};function In(){var ix=el(a,0,0,T,A,S).apply(null,n(u,c)),Cn=el(a,s-ix[0],l-ix[1],T,A,S);return _=Bf(p,d,x),en=Bu(n,Cn),tn=Bu(_,en),J=tl(en,W),dn()}function dn(){return Ct=Q=null,on}return function(){return n=t.apply(this,arguments),on.invert=n.invert&&gn,In()}}function Vf(t){var n=0,a=K/3,s=Wf(t),l=s(n,a);return l.parallels=function(u){return arguments.length?s(n=u[0]*U,a=u[1]*U):[n*an,a*an]},l}function c3(t){var n=B(t);function a(s,l){return[s*n,q(l)/n]}return a.invert=function(s,l){return[s/n,Un(l*n)]},a}function l1(t,n){var a=q(t),s=(a+q(n))/2;if(nn(s)<H)return c3(t);var l=1+a*(2*s-a),u=$n(l)/s;function c(p,d){var x=$n(l-2*s*q(d))/s;return[x*q(p*=s),u-x*B(p)]}return c.invert=function(p,d){var x=u-d,_=Bn(p,nn(x))*nt(x);return x*s<0&&(_-=K*nt(p)*nt(x)),[_/s,Un((l-(p*p+x*x)*s*s)/(2*s))]},c}function ko(){return Vf(l1).scale(155.424).center([0,33.6442])}function h1(){return ko().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function s3(t){var n=t.length;return{point:function(a,s){for(var l=-1;++l<n;)t[l].point(a,s)},sphere:function(){for(var a=-1;++a<n;)t[a].sphere()},lineStart:function(){for(var a=-1;++a<n;)t[a].lineStart()},lineEnd:function(){for(var a=-1;++a<n;)t[a].lineEnd()},polygonStart:function(){for(var a=-1;++a<n;)t[a].polygonStart()},polygonEnd:function(){for(var a=-1;++a<n;)t[a].polygonEnd()}}}function l3(){var t,n,a=h1(),s,l=ko().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u,c=ko().rotate([157,0]).center([-3,19.9]).parallels([8,18]),p,d,x={point:function(T,A){d=[T,A]}};function _(T){var A=T[0],R=T[1];return d=null,s.point(A,R),d||(u.point(A,R),d)||(p.point(A,R),d)}_.invert=function(T){var A=a.scale(),R=a.translate(),D=(T[0]-R[0])/A,O=(T[1]-R[1])/A;return(O>=.12&&O<.234&&D>=-.425&&D<-.214?l:O>=.166&&O<.234&&D>=-.214&&D<-.115?c:a).invert(T)},_.stream=function(T){return t&&n===T?t:t=s3([a.stream(n=T),l.stream(T),c.stream(T)])},_.precision=function(T){return arguments.length?(a.precision(T),l.precision(T),c.precision(T),S()):a.precision()},_.scale=function(T){return arguments.length?(a.scale(T),l.scale(T*.35),c.scale(T),_.translate(a.translate())):a.scale()},_.translate=function(T){if(!arguments.length)return a.translate();var A=a.scale(),R=+T[0],D=+T[1];return s=a.translate(T).clipExtent([[R-.455*A,D-.238*A],[R+.455*A,D+.238*A]]).stream(x),u=l.translate([R-.307*A,D+.201*A]).clipExtent([[R-.425*A+H,D+.12*A+H],[R-.214*A-H,D+.234*A-H]]).stream(x),p=c.translate([R-.205*A,D+.212*A]).clipExtent([[R-.214*A+H,D+.166*A+H],[R-.115*A-H,D+.234*A-H]]).stream(x),S()},_.fitExtent=function(T,A){return aa(_,T,A)},_.fitSize=function(T,A){return Xf(_,T,A)},_.fitWidth=function(T,A){return Hf(_,T,A)},_.fitHeight=function(T,A){return jf(_,T,A)};function S(){return t=n=null,_}return _.scale(1070)}function d1(t){return function(n,a){var s=B(n),l=B(a),u=t(s*l);return u===1/0?[2,0]:[u*l*q(n),u*q(a)]}}function ri(t){return function(n,a){var s=$n(n*n+a*a),l=t(s),u=q(l),c=B(l);return[Bn(n*u,s*c),Un(s&&a*u/s)]}}var Gf=d1(function(t){return $n(2/(1+t))});Gf.invert=ri(function(t){return 2*Un(t/2)});function h3(){return vt(Gf).scale(124.75).clipAngle(180-.001)}var Zf=d1(function(t){return(t=C0(t))&&t/q(t)});Zf.invert=ri(function(t){return t});function d3(){return vt(Zf).scale(79.4188).clipAngle(180-.001)}function ii(t,n){return[t,uo(qf((mn+n)/2))]}ii.invert=function(t,n){return[t,2*ir(I0(n))-mn]};function g3(){return g1(ii).scale(961/Ln)}function g1(t){var n=vt(t),a=n.center,s=n.scale,l=n.translate,u=n.clipExtent,c=null,p,d,x;n.scale=function(S){return arguments.length?(s(S),_()):s()},n.translate=function(S){return arguments.length?(l(S),_()):l()},n.center=function(S){return arguments.length?(a(S),_()):a()},n.clipExtent=function(S){return arguments.length?(S==null?c=p=d=x=null:(c=+S[0][0],p=+S[0][1],d=+S[1][0],x=+S[1][1]),_()):c==null?null:[[c,p],[d,x]]};function _(){var S=K*s(),T=n(X0(n.rotate()).invert([0,0]));return u(c==null?[[T[0]-S,T[1]-S],[T[0]+S,T[1]+S]]:t===ii?[[Math.max(T[0]-S,c),p],[Math.min(T[0]+S,d),x]]:[[c,Math.max(T[1]-S,p)],[d,Math.min(T[1]+S,x)]])}return _()}function Ti(t){return qf((mn+t)/2)}function p1(t,n){var a=B(t),s=t===n?q(t):uo(a/B(n))/uo(Ti(n)/Ti(t)),l=a*ja(Ti(t),s)/s;if(!s)return ii;function u(c,p){l>0?p<-mn+H&&(p=-mn+H):p>mn-H&&(p=mn-H);var d=l/ja(Ti(p),s);return[d*q(s*c),l-d*B(s*c)]}return u.invert=function(c,p){var d=l-p,x=nt(s)*$n(c*c+d*d),_=Bn(c,nn(d))*nt(d);return d*s<0&&(_-=K*nt(c)*nt(d)),[_/s,2*ir(ja(l/x,1/s))-mn]},u}function p3(){return Vf(p1).scale(109.5).parallels([30,30])}function Wr(t,n){return[t,n]}Wr.invert=Wr;function m3(){return vt(Wr).scale(152.63)}function m1(t,n){var a=B(t),s=t===n?q(t):(a-B(n))/(n-t),l=a/s+t;if(nn(s)<H)return Wr;function u(c,p){var d=l-p,x=s*c;return[d*q(x),l-d*B(x)]}return u.invert=function(c,p){var d=l-p,x=Bn(c,nn(d))*nt(d);return d*s<0&&(x-=K*nt(c)*nt(d)),[x/s,l-nt(s)*$n(c*c+d*d)]},u}function y3(){return Vf(m1).scale(131.154).center([0,13.9389])}var kr=1.340264,Nr=-.081106,Rr=893e-6,Ir=.003796,No=$n(3)/2,_3=12;function Qf(t,n){var a=Un(No*q(n)),s=a*a,l=s*s*s;return[t*B(a)/(No*(kr+3*Nr*s+l*(7*Rr+9*Ir*s))),a*(kr+Nr*s+l*(Rr+Ir*s))]}Qf.invert=function(t,n){for(var a=n,s=a*a,l=s*s*s,u=0,c,p,d;u<_3&&(p=a*(kr+Nr*s+l*(Rr+Ir*s))-n,d=kr+3*Nr*s+l*(7*Rr+9*Ir*s),a-=c=p/d,s=a*a,l=s*s*s,!(nn(c)<oo));++u);return[No*t*(kr+3*Nr*s+l*(7*Rr+9*Ir*s))/B(a),Un(q(a)/No)]};function v3$1(){return vt(Qf).scale(177.158)}function Kf(t,n){var a=B(n),s=B(t)*a;return[a*q(t)/s,q(n)/s]}Kf.invert=ri(ir);function b3(){return vt(Kf).scale(144.049).clipAngle(60)}function w3(){var t=1,n=0,a=0,s=1,l=1,u=0,c,p,d=null,x,_,S,T=1,A=1,R=ei({point:function(Z,W){var J=j([Z,W]);this.stream.point(J[0],J[1])}}),D=Xr,O,F;function z(){return T=t*s,A=t*l,O=F=null,j}function j(Z){var W=Z[0]*T,J=Z[1]*A;if(u){var en=J*c-W*p;W=W*c+J*p,J=en}return[W+n,J+a]}return j.invert=function(Z){var W=Z[0]-n,J=Z[1]-a;if(u){var en=J*c+W*p;W=W*c-J*p,J=en}return[W/T,J/A]},j.stream=function(Z){return O&&F===Z?O:O=R(D(F=Z))},j.postclip=function(Z){return arguments.length?(D=Z,d=x=_=S=null,z()):D},j.clipExtent=function(Z){return arguments.length?(D=Z==null?(d=x=_=S=null,Xr):oa(d=+Z[0][0],x=+Z[0][1],_=+Z[1][0],S=+Z[1][1]),z()):d==null?null:[[d,x],[_,S]]},j.scale=function(Z){return arguments.length?(t=+Z,z()):t},j.translate=function(Z){return arguments.length?(n=+Z[0],a=+Z[1],z()):[n,a]},j.angle=function(Z){return arguments.length?(u=Z%360*U,p=q(u),c=B(u),z()):u*an},j.reflectX=function(Z){return arguments.length?(s=Z?-1:1,z()):s<0},j.reflectY=function(Z){return arguments.length?(l=Z?-1:1,z()):l<0},j.fitExtent=function(Z,W){return aa(j,Z,W)},j.fitSize=function(Z,W){return Xf(j,Z,W)},j.fitWidth=function(Z,W){return Hf(j,Z,W)},j.fitHeight=function(Z,W){return jf(j,Z,W)},j}function Jf(t,n){var a=n*n,s=a*a;return[t*(.8707-.131979*a+s*(-.013791+s*(.003971*a-.001529*s))),n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))]}Jf.invert=function(t,n){var a=n,s=25,l;do{var u=a*a,c=u*u;a-=l=(a*(1.007226+u*(.015085+c*(-.044475+.028874*u-.005916*c)))-n)/(1.007226+u*(.015085*3+c*(-.044475*7+.028874*9*u-.005916*11*c)))}while(nn(l)>H&&--s>0);return[t/(.8707+(u=a*a)*(-.131979+u*(-.013791+u*u*u*(.003971-.001529*u)))),a]};function x3(){return vt(Jf).scale(175.295)}function nc(t,n){return[B(n)*q(t),q(n)]}nc.invert=ri(Un);function M3(){return vt(nc).scale(249.5).clipAngle(90+H)}function tc(t,n){var a=B(n),s=1+B(t)*a;return[a*q(t)/s,q(n)/s]}tc.invert=ri(function(t){return 2*ir(t)});function $3(){return vt(tc).scale(250).clipAngle(142)}function ec(t,n){return[uo(qf((mn+n)/2)),-t]}ec.invert=function(t,n){return[-n,2*ir(I0(t))-mn]};function T3(){var t=g1(ec),n=t.center,a=t.rotate;return t.center=function(s){return arguments.length?n([-s[1],s[0]]):(s=n(),[s[1],-s[0]])},t.rotate=function(s){return arguments.length?a([s[0],s[1],s.length>2?s[2]+90:90]):(s=a(),[s[0],s[1],s[2]-90])},a([0,0,90]).scale(159.155)}function A3(t,n){return t.parent===n.parent?1:2}function S3(t){return t.reduce(E3,0)/t.length}function E3(t,n){return t+n.x}function k3(t){return 1+t.reduce(N3,0)}function N3(t,n){return Math.max(t,n.y)}function R3(t){for(var n;n=t.children;)t=n[0];return t}function I3(t){for(var n;n=t.children;)t=n[n.length-1];return t}function C3(){var t=A3,n=1,a=1,s=!1;function l(u){var c,p=0;u.eachAfter(function(T){var A=T.children;A?(T.x=S3(A),T.y=k3(A)):(T.x=c?p+=t(T,c):0,T.y=0,c=T)});var d=R3(u),x=I3(u),_=d.x-t(d,x)/2,S=x.x+t(x,d)/2;return u.eachAfter(s?function(T){T.x=(T.x-u.x)*n,T.y=(u.y-T.y)*a}:function(T){T.x=(T.x-_)/(S-_)*n,T.y=(1-(u.y?T.y/u.y:1))*a})}return l.separation=function(u){return arguments.length?(t=u,l):t},l.size=function(u){return arguments.length?(s=!1,n=+u[0],a=+u[1],l):s?null:[n,a]},l.nodeSize=function(u){return arguments.length?(s=!0,n=+u[0],a=+u[1],l):s?[n,a]:null},l}function P3(t){var n=0,a=t.children,s=a&&a.length;if(!s)n=1;else for(;--s>=0;)n+=a[s].value;t.value=n}function D3(){return this.eachAfter(P3)}function z3(t,n){let a=-1;for(const s of this)t.call(n,s,++a,this);return this}function O3(t,n){for(var a=this,s=[a],l,u,c=-1;a=s.pop();)if(t.call(n,a,++c,this),l=a.children)for(u=l.length-1;u>=0;--u)s.push(l[u]);return this}function Y3(t,n){for(var a=this,s=[a],l=[],u,c,p,d=-1;a=s.pop();)if(l.push(a),u=a.children)for(c=0,p=u.length;c<p;++c)s.push(u[c]);for(;a=l.pop();)t.call(n,a,++d,this);return this}function F3(t,n){let a=-1;for(const s of this)if(t.call(n,s,++a,this))return s}function q3(t){return this.eachAfter(function(n){for(var a=+t(n.data)||0,s=n.children,l=s&&s.length;--l>=0;)a+=s[l].value;n.value=a})}function L3(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function B3(t){for(var n=this,a=U3(n,t),s=[n];n!==a;)n=n.parent,s.push(n);for(var l=s.length;t!==a;)s.splice(l,0,t),t=t.parent;return s}function U3(t,n){if(t===n)return t;var a=t.ancestors(),s=n.ancestors(),l=null;for(t=a.pop(),n=s.pop();t===n;)l=t,t=a.pop(),n=s.pop();return l}function X3(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function H3(){return Array.from(this)}function j3(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function W3(){var t=this,n=[];return t.each(function(a){a!==t&&n.push({source:a.parent,target:a})}),n}function*V3(){var t=this,n,a=[t],s,l,u;do for(n=a.reverse(),a=[];t=n.pop();)if(yield t,s=t.children)for(l=0,u=s.length;l<u;++l)a.push(s[l]);while(a.length)}function rc(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=Q3)):n===void 0&&(n=Z3);for(var a=new he(t),s,l=[a],u,c,p,d;s=l.pop();)if((c=n(s.data))&&(d=(c=Array.from(c)).length))for(s.children=c,p=d-1;p>=0;--p)l.push(u=c[p]=new he(c[p])),u.parent=s,u.depth=s.depth+1;return a.eachBefore(y1)}function G3(){return rc(this).eachBefore(K3)}function Z3(t){return t.children}function Q3(t){return Array.isArray(t)?t[1]:null}function K3(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function y1(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function he(t){this.data=t,this.depth=this.height=0,this.parent=null}he.prototype=rc.prototype={constructor:he,count:D3,each:z3,eachAfter:Y3,eachBefore:O3,find:F3,sum:q3,sort:L3,path:B3,ancestors:X3,descendants:H3,leaves:j3,links:W3,copy:G3,[Symbol.iterator]:V3};function Ui(t){return t==null?null:_1(t)}function _1(t){if(typeof t!="function")throw new Error;return t}function Kt(){return 0}function Re(t){return function(){return t}}const J3=1664525,n6=1013904223,rl=4294967296;function ic(){let t=1;return()=>(t=(J3*t+n6)%rl)/rl}function t6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function e6(t,n){let a=t.length,s,l;for(;a;)l=n()*a--|0,s=t[a],t[a]=t[l],t[l]=s;return t}function r6(t){return v1$1(t,ic())}function v1$1(t,n){for(var a=0,s=(t=e6(Array.from(t),n)).length,l=[],u,c;a<s;)u=t[a],c&&b1(c,u)?++a:(c=o6(l=i6(l,u)),a=0);return c}function i6(t,n){var a,s;if(Qa(n,t))return[n];for(a=0;a<t.length;++a)if(Ai(n,t[a])&&Qa($r(t[a],n),t))return[t[a],n];for(a=0;a<t.length-1;++a)for(s=a+1;s<t.length;++s)if(Ai($r(t[a],t[s]),n)&&Ai($r(t[a],n),t[s])&&Ai($r(t[s],n),t[a])&&Qa(w1(t[a],t[s],n),t))return[t[a],t[s],n];throw new Error}function Ai(t,n){var a=t.r-n.r,s=n.x-t.x,l=n.y-t.y;return a<0||a*a<s*s+l*l}function b1(t,n){var a=t.r-n.r+Math.max(t.r,n.r,1)*1e-9,s=n.x-t.x,l=n.y-t.y;return a>0&&a*a>s*s+l*l}function Qa(t,n){for(var a=0;a<n.length;++a)if(!b1(t,n[a]))return!1;return!0}function o6(t){switch(t.length){case 1:return a6(t[0]);case 2:return $r(t[0],t[1]);case 3:return w1(t[0],t[1],t[2])}}function a6(t){return{x:t.x,y:t.y,r:t.r}}function $r(t,n){var a=t.x,s=t.y,l=t.r,u=n.x,c=n.y,p=n.r,d=u-a,x=c-s,_=p-l,S=Math.sqrt(d*d+x*x);return{x:(a+u+d/S*_)/2,y:(s+c+x/S*_)/2,r:(S+l+p)/2}}function w1(t,n,a){var s=t.x,l=t.y,u=t.r,c=n.x,p=n.y,d=n.r,x=a.x,_=a.y,S=a.r,T=s-c,A=s-x,R=l-p,D=l-_,O=d-u,F=S-u,z=s*s+l*l-u*u,j=z-c*c-p*p+d*d,Z=z-x*x-_*_+S*S,W=A*R-T*D,J=(R*Z-D*j)/(W*2)-s,en=(D*O-R*F)/W,tn=(A*j-T*Z)/(W*2)-l,Ct=(T*F-A*O)/W,Q=en*en+Ct*Ct-1,on=2*(u+J*en+tn*Ct),gn=J*J+tn*tn-u*u,In=-(Math.abs(Q)>1e-6?(on+Math.sqrt(on*on-4*Q*gn))/(2*Q):gn/on);return{x:s+J+en*In,y:l+tn+Ct*In,r:In}}function il(t,n,a){var s=t.x-n.x,l,u,c=t.y-n.y,p,d,x=s*s+c*c;x?(u=n.r+a.r,u*=u,d=t.r+a.r,d*=d,u>d?(l=(x+d-u)/(2*x),p=Math.sqrt(Math.max(0,d/x-l*l)),a.x=t.x-l*s-p*c,a.y=t.y-l*c+p*s):(l=(x+u-d)/(2*x),p=Math.sqrt(Math.max(0,u/x-l*l)),a.x=n.x+l*s-p*c,a.y=n.y+l*c+p*s)):(a.x=n.x+a.r,a.y=n.y)}function ol(t,n){var a=t.r+n.r-1e-6,s=n.x-t.x,l=n.y-t.y;return a>0&&a*a>s*s+l*l}function al(t){var n=t._,a=t.next._,s=n.r+a.r,l=(n.x*a.r+a.x*n.r)/s,u=(n.y*a.r+a.y*n.r)/s;return l*l+u*u}function Si(t){this._=t,this.next=null,this.previous=null}function x1(t,n){if(!(u=(t=t6(t)).length))return 0;var a,s,l,u,c,p,d,x,_,S,T;if(a=t[0],a.x=0,a.y=0,!(u>1))return a.r;if(s=t[1],a.x=-s.r,s.x=a.r,s.y=0,!(u>2))return a.r+s.r;il(s,a,l=t[2]),a=new Si(a),s=new Si(s),l=new Si(l),a.next=l.previous=s,s.next=a.previous=l,l.next=s.previous=a;e:for(d=3;d<u;++d){il(a._,s._,l=t[d]),l=new Si(l),x=s.next,_=a.previous,S=s._.r,T=a._.r;do if(S<=T){if(ol(x._,l._)){s=x,a.next=s,s.previous=a,--d;continue e}S+=x._.r,x=x.next}else{if(ol(_._,l._)){a=_,a.next=s,s.previous=a,--d;continue e}T+=_._.r,_=_.previous}while(x!==_.next);for(l.previous=a,l.next=s,a.next=s.previous=s=l,c=al(a);(l=l.next)!==s;)(p=al(l))<c&&(a=l,c=p);s=a.next}for(a=[s._],l=s;(l=l.next)!==s;)a.push(l._);for(l=v1$1(a,n),d=0;d<u;++d)a=t[d],a.x-=l.x,a.y-=l.y;return l.r}function u6(t){return x1(t,ic()),t}function f6(t){return Math.sqrt(t.value)}function c6(){var t=null,n=1,a=1,s=Kt;function l(u){const c=ic();return u.x=n/2,u.y=a/2,t?u.eachBefore(ul(t)).eachAfter(Ka(s,.5,c)).eachBefore(fl(1)):u.eachBefore(ul(f6)).eachAfter(Ka(Kt,1,c)).eachAfter(Ka(s,u.r/Math.min(n,a),c)).eachBefore(fl(Math.min(n,a)/(2*u.r))),u}return l.radius=function(u){return arguments.length?(t=Ui(u),l):t},l.size=function(u){return arguments.length?(n=+u[0],a=+u[1],l):[n,a]},l.padding=function(u){return arguments.length?(s=typeof u=="function"?u:Re(+u),l):s},l}function ul(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Ka(t,n,a){return function(s){if(l=s.children){var l,u,c=l.length,p=t(s)*n||0,d;if(p)for(u=0;u<c;++u)l[u].r+=p;if(d=x1(l,a),p)for(u=0;u<c;++u)l[u].r-=p;s.r=d+p}}}function fl(t){return function(n){var a=n.parent;n.r*=t,a&&(n.x=a.x+t*n.x,n.y=a.y+t*n.y)}}function M1(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function oi(t,n,a,s,l){for(var u=t.children,c,p=-1,d=u.length,x=t.value&&(s-n)/t.value;++p<d;)c=u[p],c.y0=a,c.y1=l,c.x0=n,c.x1=n+=c.value*x}function s6(){var t=1,n=1,a=0,s=!1;function l(c){var p=c.height+1;return c.x0=c.y0=a,c.x1=t,c.y1=n/p,c.eachBefore(u(n,p)),s&&c.eachBefore(M1),c}function u(c,p){return function(d){d.children&&oi(d,d.x0,c*(d.depth+1)/p,d.x1,c*(d.depth+2)/p);var x=d.x0,_=d.y0,S=d.x1-a,T=d.y1-a;S<x&&(x=S=(x+S)/2),T<_&&(_=T=(_+T)/2),d.x0=x,d.y0=_,d.x1=S,d.y1=T}}return l.round=function(c){return arguments.length?(s=!!c,l):s},l.size=function(c){return arguments.length?(t=+c[0],n=+c[1],l):[t,n]},l.padding=function(c){return arguments.length?(a=+c,l):a},l}var l6={depth:-1},cl={},Ja={};function h6(t){return t.id}function d6(t){return t.parentId}function g6(){var t=h6,n=d6,a;function s(l){var u=Array.from(l),c=t,p=n,d,x,_,S,T,A,R,D,O=new Map;if(a!=null){const F=u.map((Z,W)=>p6(a(Z,W,l))),z=F.map(sl),j=new Set(F).add("");for(const Z of z)j.has(Z)||(j.add(Z),F.push(Z),z.push(sl(Z)),u.push(Ja));c=(Z,W)=>F[W],p=(Z,W)=>z[W]}for(_=0,d=u.length;_<d;++_)x=u[_],A=u[_]=new he(x),(R=c(x,_,l))!=null&&(R+="")&&(D=A.id=R,O.set(D,O.has(D)?cl:A)),(R=p(x,_,l))!=null&&(R+="")&&(A.parent=R);for(_=0;_<d;++_)if(A=u[_],R=A.parent){if(T=O.get(R),!T)throw new Error("missing: "+R);if(T===cl)throw new Error("ambiguous: "+R);T.children?T.children.push(A):T.children=[A],A.parent=T}else{if(S)throw new Error("multiple roots");S=A}if(!S)throw new Error("no root");if(a!=null){for(;S.data===Ja&&S.children.length===1;)S=S.children[0],--d;for(let F=u.length-1;F>=0&&(A=u[F],A.data===Ja);--F)A.data=null}if(S.parent=l6,S.eachBefore(function(F){F.depth=F.parent.depth+1,--d}).eachBefore(y1),S.parent=null,d>0)throw new Error("cycle");return S}return s.id=function(l){return arguments.length?(t=Ui(l),s):t},s.parentId=function(l){return arguments.length?(n=Ui(l),s):n},s.path=function(l){return arguments.length?(a=Ui(l),s):a},s}function p6(t){t=`${t}`;let n=t.length;return rf(t,n-1)&&!rf(t,n-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function sl(t){let n=t.length;if(n<2)return"";for(;--n>1&&!rf(t,n););return t.slice(0,n)}function rf(t,n){if(t[n]==="/"){let a=0;for(;n>0&&t[--n]==="\\";)++a;if((a&1)===0)return!0}return!1}function m6(t,n){return t.parent===n.parent?1:2}function nu(t){var n=t.children;return n?n[0]:t.t}function tu(t){var n=t.children;return n?n[n.length-1]:t.t}function y6(t,n,a){var s=a/(n.i-t.i);n.c-=s,n.s+=a,t.c+=s,n.z+=a,n.m+=a}function _6(t){for(var n=0,a=0,s=t.children,l=s.length,u;--l>=0;)u=s[l],u.z+=n,u.m+=n,n+=u.s+(a+=u.c)}function v6(t,n,a){return t.a.parent===n.parent?t.a:a}function Xi(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}Xi.prototype=Object.create(he.prototype);function b6(t){for(var n=new Xi(t,0),a,s=[n],l,u,c,p;a=s.pop();)if(u=a._.children)for(a.children=new Array(p=u.length),c=p-1;c>=0;--c)s.push(l=a.children[c]=new Xi(u[c],c)),l.parent=a;return(n.parent=new Xi(null,0)).children=[n],n}function w6(){var t=m6,n=1,a=1,s=null;function l(x){var _=b6(x);if(_.eachAfter(u),_.parent.m=-_.z,_.eachBefore(c),s)x.eachBefore(d);else{var S=x,T=x,A=x;x.eachBefore(function(z){z.x<S.x&&(S=z),z.x>T.x&&(T=z),z.depth>A.depth&&(A=z)});var R=S===T?1:t(S,T)/2,D=R-S.x,O=n/(T.x+R+D),F=a/(A.depth||1);x.eachBefore(function(z){z.x=(z.x+D)*O,z.y=z.depth*F})}return x}function u(x){var _=x.children,S=x.parent.children,T=x.i?S[x.i-1]:null;if(_){_6(x);var A=(_[0].z+_[_.length-1].z)/2;T?(x.z=T.z+t(x._,T._),x.m=x.z-A):x.z=A}else T&&(x.z=T.z+t(x._,T._));x.parent.A=p(x,T,x.parent.A||S[0])}function c(x){x._.x=x.z+x.parent.m,x.m+=x.parent.m}function p(x,_,S){if(_){for(var T=x,A=x,R=_,D=T.parent.children[0],O=T.m,F=A.m,z=R.m,j=D.m,Z;R=tu(R),T=nu(T),R&&T;)D=nu(D),A=tu(A),A.a=x,Z=R.z+z-T.z-O+t(R._,T._),Z>0&&(y6(v6(R,x,S),x,Z),O+=Z,F+=Z),z+=R.m,O+=T.m,j+=D.m,F+=A.m;R&&!tu(A)&&(A.t=R,A.m+=z-F),T&&!nu(D)&&(D.t=T,D.m+=O-j,S=x)}return S}function d(x){x.x*=n,x.y=x.depth*a}return l.separation=function(x){return arguments.length?(t=x,l):t},l.size=function(x){return arguments.length?(s=!1,n=+x[0],a=+x[1],l):s?null:[n,a]},l.nodeSize=function(x){return arguments.length?(s=!0,n=+x[0],a=+x[1],l):s?[n,a]:null},l}function ua(t,n,a,s,l){for(var u=t.children,c,p=-1,d=u.length,x=t.value&&(l-a)/t.value;++p<d;)c=u[p],c.x0=n,c.x1=s,c.y0=a,c.y1=a+=c.value*x}var $1=(1+Math.sqrt(5))/2;function T1(t,n,a,s,l,u){for(var c=[],p=n.children,d,x,_=0,S=0,T=p.length,A,R,D=n.value,O,F,z,j,Z,W,J;_<T;){A=l-a,R=u-s;do O=p[S++].value;while(!O&&S<T);for(F=z=O,W=Math.max(R/A,A/R)/(D*t),J=O*O*W,Z=Math.max(z/J,J/F);S<T;++S){if(O+=x=p[S].value,x<F&&(F=x),x>z&&(z=x),J=O*O*W,j=Math.max(z/J,J/F),j>Z){O-=x;break}Z=j}c.push(d={value:O,dice:A<R,children:p.slice(_,S)}),d.dice?oi(d,a,s,l,D?s+=R*O/D:u):ua(d,a,s,D?a+=A*O/D:l,u),D-=O,_=S}return c}const A1=function t(n){function a(s,l,u,c,p){T1(n,s,l,u,c,p)}return a.ratio=function(s){return t((s=+s)>1?s:1)},a}($1);function x6(){var t=A1,n=!1,a=1,s=1,l=[0],u=Kt,c=Kt,p=Kt,d=Kt,x=Kt;function _(T){return T.x0=T.y0=0,T.x1=a,T.y1=s,T.eachBefore(S),l=[0],n&&T.eachBefore(M1),T}function S(T){var A=l[T.depth],R=T.x0+A,D=T.y0+A,O=T.x1-A,F=T.y1-A;O<R&&(R=O=(R+O)/2),F<D&&(D=F=(D+F)/2),T.x0=R,T.y0=D,T.x1=O,T.y1=F,T.children&&(A=l[T.depth+1]=u(T)/2,R+=x(T)-A,D+=c(T)-A,O-=p(T)-A,F-=d(T)-A,O<R&&(R=O=(R+O)/2),F<D&&(D=F=(D+F)/2),t(T,R,D,O,F))}return _.round=function(T){return arguments.length?(n=!!T,_):n},_.size=function(T){return arguments.length?(a=+T[0],s=+T[1],_):[a,s]},_.tile=function(T){return arguments.length?(t=_1(T),_):t},_.padding=function(T){return arguments.length?_.paddingInner(T).paddingOuter(T):_.paddingInner()},_.paddingInner=function(T){return arguments.length?(u=typeof T=="function"?T:Re(+T),_):u},_.paddingOuter=function(T){return arguments.length?_.paddingTop(T).paddingRight(T).paddingBottom(T).paddingLeft(T):_.paddingTop()},_.paddingTop=function(T){return arguments.length?(c=typeof T=="function"?T:Re(+T),_):c},_.paddingRight=function(T){return arguments.length?(p=typeof T=="function"?T:Re(+T),_):p},_.paddingBottom=function(T){return arguments.length?(d=typeof T=="function"?T:Re(+T),_):d},_.paddingLeft=function(T){return arguments.length?(x=typeof T=="function"?T:Re(+T),_):x},_}function M6(t,n,a,s,l){var u=t.children,c,p=u.length,d,x=new Array(p+1);for(x[0]=d=c=0;c<p;++c)x[c+1]=d+=u[c].value;_(0,p,t.value,n,a,s,l);function _(S,T,A,R,D,O,F){if(S>=T-1){var z=u[S];z.x0=R,z.y0=D,z.x1=O,z.y1=F;return}for(var j=x[S],Z=A/2+j,W=S+1,J=T-1;W<J;){var en=W+J>>>1;x[en]<Z?W=en+1:J=en}Z-x[W-1]<x[W]-Z&&S+1<W&&--W;var tn=x[W]-j,Ct=A-tn;if(O-R>F-D){var Q=A?(R*Ct+O*tn)/A:O;_(S,W,tn,R,D,Q,F),_(W,T,Ct,Q,D,O,F)}else{var on=A?(D*Ct+F*tn)/A:F;_(S,W,tn,R,D,O,on),_(W,T,Ct,R,on,O,F)}}}function $6(t,n,a,s,l){(t.depth&1?ua:oi)(t,n,a,s,l)}const T6=function t(n){function a(s,l,u,c,p){if((d=s._squarify)&&d.ratio===n)for(var d,x,_,S,T=-1,A,R=d.length,D=s.value;++T<R;){for(x=d[T],_=x.children,S=x.value=0,A=_.length;S<A;++S)x.value+=_[S].value;x.dice?oi(x,l,u,c,D?u+=(p-u)*x.value/D:p):ua(x,l,u,D?l+=(c-l)*x.value/D:c,p),D-=x.value}else s._squarify=d=T1(n,s,l,u,c,p),d.ratio=n}return a.ratio=function(s){return t((s=+s)>1?s:1)},a}($1);function A6(t){for(var n=-1,a=t.length,s,l=t[a-1],u=0;++n<a;)s=l,l=t[n],u+=s[1]*l[0]-s[0]*l[1];return u/2}function S6(t){for(var n=-1,a=t.length,s=0,l=0,u,c=t[a-1],p,d=0;++n<a;)u=c,c=t[n],d+=p=u[0]*c[1]-c[0]*u[1],s+=(u[0]+c[0])*p,l+=(u[1]+c[1])*p;return d*=3,[s/d,l/d]}function E6(t,n,a){return(n[0]-t[0])*(a[1]-t[1])-(n[1]-t[1])*(a[0]-t[0])}function k6(t,n){return t[0]-n[0]||t[1]-n[1]}function ll(t){const n=t.length,a=[0,1];let s=2,l;for(l=2;l<n;++l){for(;s>1&&E6(t[a[s-2]],t[a[s-1]],t[l])<=0;)--s;a[s++]=l}return a.slice(0,s)}function N6(t){if((a=t.length)<3)return null;var n,a,s=new Array(a),l=new Array(a);for(n=0;n<a;++n)s[n]=[+t[n][0],+t[n][1],n];for(s.sort(k6),n=0;n<a;++n)l[n]=[s[n][0],-s[n][1]];var u=ll(s),c=ll(l),p=c[0]===u[0],d=c[c.length-1]===u[u.length-1],x=[];for(n=u.length-1;n>=0;--n)x.push(t[s[u[n]][2]]);for(n=+p;n<c.length-d;++n)x.push(t[s[c[n]][2]]);return x}function R6(t,n){for(var a=t.length,s=t[a-1],l=n[0],u=n[1],c=s[0],p=s[1],d,x,_=!1,S=0;S<a;++S)s=t[S],d=s[0],x=s[1],x>u!=p>u&&l<(c-d)*(u-x)/(p-x)+d&&(_=!_),c=d,p=x;return _}function I6(t){for(var n=-1,a=t.length,s=t[a-1],l,u,c=s[0],p=s[1],d=0;++n<a;)l=c,u=p,s=t[n],c=s[0],p=s[1],l-=c,u-=p,d+=Math.hypot(l,u);return d}const An=Math.random,C6=function t(n){function a(s,l){return s=s==null?0:+s,l=l==null?1:+l,arguments.length===1?(l=s,s=0):l-=s,function(){return n()*l+s}}return a.source=t,a}(An),P6=function t(n){function a(s,l){return arguments.length<2&&(l=s,s=0),s=Math.floor(s),l=Math.floor(l)-s,function(){return Math.floor(n()*l+s)}}return a.source=t,a}(An),oc=function t(n){function a(s,l){var u,c;return s=s==null?0:+s,l=l==null?1:+l,function(){var p;if(u!=null)p=u,u=null;else do u=n()*2-1,p=n()*2-1,c=u*u+p*p;while(!c||c>1);return s+l*p*Math.sqrt(-2*Math.log(c)/c)}}return a.source=t,a}(An),D6=function t(n){var a=oc.source(n);function s(){var l=a.apply(this,arguments);return function(){return Math.exp(l())}}return s.source=t,s}(An),S1=function t(n){function a(s){return(s=+s)<=0?()=>0:function(){for(var l=0,u=s;u>1;--u)l+=n();return l+u*n()}}return a.source=t,a}(An),z6=function t(n){var a=S1.source(n);function s(l){if((l=+l)==0)return n;var u=a(l);return function(){return u()/l}}return s.source=t,s}(An),O6=function t(n){function a(s){return function(){return-Math.log1p(-n())/s}}return a.source=t,a}(An),Y6=function t(n){function a(s){if((s=+s)<0)throw new RangeError("invalid alpha");return s=1/-s,function(){return Math.pow(1-n(),s)}}return a.source=t,a}(An),F6=function t(n){function a(s){if((s=+s)<0||s>1)throw new RangeError("invalid p");return function(){return Math.floor(n()+s)}}return a.source=t,a}(An),E1=function t(n){function a(s){if((s=+s)<0||s>1)throw new RangeError("invalid p");return s===0?()=>1/0:s===1?()=>1:(s=Math.log1p(-s),function(){return 1+Math.floor(Math.log1p(-n())/s)})}return a.source=t,a}(An),ac=function t(n){var a=oc.source(n)();function s(l,u){if((l=+l)<0)throw new RangeError("invalid k");if(l===0)return()=>0;if(u=u==null?1:+u,l===1)return()=>-Math.log1p(-n())*u;var c=(l<1?l+1:l)-1/3,p=1/(3*Math.sqrt(c)),d=l<1?()=>Math.pow(n(),1/l):()=>1;return function(){do{do var x=a(),_=1+p*x;while(_<=0);_*=_*_;var S=1-n()}while(S>=1-.0331*x*x*x*x&&Math.log(S)>=.5*x*x+c*(1-_+Math.log(_)));return c*_*d()*u}}return s.source=t,s}(An),k1=function t(n){var a=ac.source(n);function s(l,u){var c=a(l),p=a(u);return function(){var d=c();return d===0?0:d/(d+p())}}return s.source=t,s}(An),N1=function t(n){var a=E1.source(n),s=k1.source(n);function l(u,c){return u=+u,(c=+c)>=1?()=>u:c<=0?()=>0:function(){for(var p=0,d=u,x=c;d*x>16&&d*(1-x)>16;){var _=Math.floor((d+1)*x),S=s(_,d-_+1)();S<=x?(p+=_,d-=_,x=(x-S)/(1-S)):(d=_-1,x/=S)}for(var T=x<.5,A=T?x:1-x,R=a(A),D=R(),O=0;D<=d;++O)D+=R();return p+(T?O:d-O)}}return l.source=t,l}(An),q6=function t(n){function a(s,l,u){var c;return(s=+s)==0?c=p=>-Math.log(p):(s=1/s,c=p=>Math.pow(p,s)),l=l==null?0:+l,u=u==null?1:+u,function(){return l+u*c(-Math.log1p(-n()))}}return a.source=t,a}(An),L6=function t(n){function a(s,l){return s=s==null?0:+s,l=l==null?1:+l,function(){return s+l*Math.tan(Math.PI*n())}}return a.source=t,a}(An),B6=function t(n){function a(s,l){return s=s==null?0:+s,l=l==null?1:+l,function(){var u=n();return s+l*Math.log(u/(1-u))}}return a.source=t,a}(An),U6=function t(n){var a=ac.source(n),s=N1.source(n);function l(u){return function(){for(var c=0,p=u;p>16;){var d=Math.floor(.875*p),x=a(d)();if(x>p)return c+s(d-1,p/x)();c+=d,p-=x}for(var _=-Math.log1p(-n()),S=0;_<=p;++S)_-=Math.log1p(-n());return c+S}}return l.source=t,l}(An),X6=1664525,H6=1013904223,hl=1/4294967296;function j6(t=Math.random()){let n=(0<=t&&t<1?t/hl:Math.abs(t))|0;return()=>(n=X6*n+H6|0,hl*(n>>>0))}function et(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function It(t,n){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}const of=Symbol("implicit");function uc(){var t=new Cr,n=[],a=[],s=of;function l(u){let c=t.get(u);if(c===void 0){if(s!==of)return s;t.set(u,c=n.push(u)-1)}return a[c%a.length]}return l.domain=function(u){if(!arguments.length)return n.slice();n=[],t=new Cr;for(const c of u)t.has(c)||t.set(c,n.push(c)-1);return l},l.range=function(u){return arguments.length?(a=Array.from(u),l):a.slice()},l.unknown=function(u){return arguments.length?(s=u,l):s},l.copy=function(){return uc(n,a).unknown(s)},et.apply(l,arguments),l}function fc(){var t=uc().unknown(void 0),n=t.domain,a=t.range,s=0,l=1,u,c,p=!1,d=0,x=0,_=.5;delete t.unknown;function S(){var T=n().length,A=l<s,R=A?l:s,D=A?s:l;u=(D-R)/Math.max(1,T-d+x*2),p&&(u=Math.floor(u)),R+=(D-R-u*(T-d))*_,c=u*(1-d),p&&(R=Math.round(R),c=Math.round(c));var O=zt(T).map(function(F){return R+u*F});return a(A?O.reverse():O)}return t.domain=function(T){return arguments.length?(n(T),S()):n()},t.range=function(T){return arguments.length?([s,l]=T,s=+s,l=+l,S()):[s,l]},t.rangeRound=function(T){return[s,l]=T,s=+s,l=+l,p=!0,S()},t.bandwidth=function(){return c},t.step=function(){return u},t.round=function(T){return arguments.length?(p=!!T,S()):p},t.padding=function(T){return arguments.length?(d=Math.min(1,x=+T),S()):d},t.paddingInner=function(T){return arguments.length?(d=Math.min(1,T),S()):d},t.paddingOuter=function(T){return arguments.length?(x=+T,S()):x},t.align=function(T){return arguments.length?(_=Math.max(0,Math.min(1,T)),S()):_},t.copy=function(){return fc(n(),[s,l]).round(p).paddingInner(d).paddingOuter(x).align(_)},et.apply(S(),arguments)}function R1(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return R1(n())},t}function W6(){return R1(fc.apply(null,arguments).paddingInner(1))}function V6(t){return function(){return t}}function Ro(t){return+t}var dl=[0,1];function Fn(t){return t}function af(t,n){return(n-=t=+t)?function(a){return(a-t)/n}:V6(isNaN(n)?NaN:.5)}function G6(t,n){var a;return t>n&&(a=t,t=n,n=a),function(s){return Math.max(t,Math.min(n,s))}}function Z6(t,n,a){var s=t[0],l=t[1],u=n[0],c=n[1];return l<s?(s=af(l,s),u=a(c,u)):(s=af(s,l),u=a(u,c)),function(p){return u(s(p))}}function Q6(t,n,a){var s=Math.min(t.length,n.length)-1,l=new Array(s),u=new Array(s),c=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++c<s;)l[c]=af(t[c],t[c+1]),u[c]=a(n[c],n[c+1]);return function(p){var d=Ft(t,p,1,s)-1;return u[d](l[d](p))}}function ai(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function fa(){var t=dl,n=dl,a=Ht,s,l,u,c=Fn,p,d,x;function _(){var T=Math.min(t.length,n.length);return c!==Fn&&(c=G6(t[0],t[T-1])),p=T>2?Q6:Z6,d=x=null,S}function S(T){return T==null||isNaN(T=+T)?u:(d||(d=p(t.map(s),n,a)))(s(c(T)))}return S.invert=function(T){return c(l((x||(x=p(n,t.map(s),Kn)))(T)))},S.domain=function(T){return arguments.length?(t=Array.from(T,Ro),_()):t.slice()},S.range=function(T){return arguments.length?(n=Array.from(T),_()):n.slice()},S.rangeRound=function(T){return n=Array.from(T),a=Vo,_()},S.clamp=function(T){return arguments.length?(c=T?!0:Fn,_()):c!==Fn},S.interpolate=function(T){return arguments.length?(a=T,_()):a},S.unknown=function(T){return arguments.length?(u=T,S):u},function(T,A){return s=T,l=A,_()}}function cc(){return fa()(Fn,Fn)}function I1(t,n,a,s){var l=Wi(t,n,a),u;switch(s=We(s??",f"),s.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(n));return s.precision==null&&!isNaN(u=N0(l,c))&&(s.precision=u),Ff(s,c)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(u=R0(l,Math.max(Math.abs(t),Math.abs(n))))&&(s.precision=u-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(u=k0(l))&&(s.precision=u-(s.type==="%")*2);break}}return ia(s)}function jt(t){var n=t.domain;return t.ticks=function(a){var s=n();return oe(s[0],s[s.length-1],a??10)},t.tickFormat=function(a,s){var l=n();return I1(l[0],l[l.length-1],a??10,s)},t.nice=function(a){a==null&&(a=10);var s=n(),l=0,u=s.length-1,c=s[l],p=s[u],d,x,_=10;for(p<c&&(x=c,c=p,p=x,x=l,l=u,u=x);_-- >0;){if(x=ae(c,p,a),x===d)return s[l]=c,s[u]=p,n(s);if(x>0)c=Math.floor(c/x)*x,p=Math.ceil(p/x)*x;else if(x<0)c=Math.ceil(c*x)/x,p=Math.floor(p*x)/x;else break;d=x}return t},t}function C1(){var t=cc();return t.copy=function(){return ai(t,C1())},et.apply(t,arguments),jt(t)}function P1(t){var n;function a(s){return s==null||isNaN(s=+s)?n:s}return a.invert=a,a.domain=a.range=function(s){return arguments.length?(t=Array.from(s,Ro),a):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return P1(t).unknown(n)},t=arguments.length?Array.from(t,Ro):[0,1],jt(a)}function D1(t,n){t=t.slice();var a=0,s=t.length-1,l=t[a],u=t[s],c;return u<l&&(c=a,a=s,s=c,c=l,l=u,u=c),t[a]=n.floor(l),t[s]=n.ceil(u),t}function gl(t){return Math.log(t)}function pl(t){return Math.exp(t)}function K6(t){return-Math.log(-t)}function J6(t){return-Math.exp(-t)}function n5(t){return isFinite(t)?+("1e"+t):t<0?0:t}function t5(t){return t===10?n5:t===Math.E?Math.exp:n=>Math.pow(t,n)}function e5(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),n=>Math.log(n)/t)}function ml(t){return(n,a)=>-t(-n,a)}function sc(t){const n=t(gl,pl),a=n.domain;let s=10,l,u;function c(){return l=e5(s),u=t5(s),a()[0]<0?(l=ml(l),u=ml(u),t(K6,J6)):t(gl,pl),n}return n.base=function(p){return arguments.length?(s=+p,c()):s},n.domain=function(p){return arguments.length?(a(p),c()):a()},n.ticks=p=>{const d=a();let x=d[0],_=d[d.length-1];const S=_<x;S&&([x,_]=[_,x]);let T=l(x),A=l(_),R,D;const O=p==null?10:+p;let F=[];if(!(s%1)&&A-T<O){if(T=Math.floor(T),A=Math.ceil(A),x>0){for(;T<=A;++T)for(R=1;R<s;++R)if(D=T<0?R/u(-T):R*u(T),!(D<x)){if(D>_)break;F.push(D)}}else for(;T<=A;++T)for(R=s-1;R>=1;--R)if(D=T>0?R/u(-T):R*u(T),!(D<x)){if(D>_)break;F.push(D)}F.length*2<O&&(F=oe(x,_,O))}else F=oe(T,A,Math.min(A-T,O)).map(u);return S?F.reverse():F},n.tickFormat=(p,d)=>{if(p==null&&(p=10),d==null&&(d=s===10?"s":","),typeof d!="function"&&(!(s%1)&&(d=We(d)).precision==null&&(d.trim=!0),d=ia(d)),p===1/0)return d;const x=Math.max(1,s*p/n.ticks().length);return _=>{let S=_/u(Math.round(l(_)));return S*s<s-.5&&(S*=s),S<=x?d(_):""}},n.nice=()=>a(D1(a(),{floor:p=>u(Math.floor(l(p))),ceil:p=>u(Math.ceil(l(p)))})),n}function z1(){const t=sc(fa()).domain([1,10]);return t.copy=()=>ai(t,z1()).base(t.base()),et.apply(t,arguments),t}function yl(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function _l(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function lc(t){var n=1,a=t(yl(n),_l(n));return a.constant=function(s){return arguments.length?t(yl(n=+s),_l(n)):n},jt(a)}function O1(){var t=lc(fa());return t.copy=function(){return ai(t,O1()).constant(t.constant())},et.apply(t,arguments)}function vl(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function r5(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function i5(t){return t<0?-t*t:t*t}function hc(t){var n=t(Fn,Fn),a=1;function s(){return a===1?t(Fn,Fn):a===.5?t(r5,i5):t(vl(a),vl(1/a))}return n.exponent=function(l){return arguments.length?(a=+l,s()):a},jt(n)}function dc(){var t=hc(fa());return t.copy=function(){return ai(t,dc()).exponent(t.exponent())},et.apply(t,arguments),t}function o5(){return dc.apply(null,arguments).exponent(.5)}function bl(t){return Math.sign(t)*t*t}function a5(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Y1(){var t=cc(),n=[0,1],a=!1,s;function l(u){var c=a5(t(u));return isNaN(c)?s:a?Math.round(c):c}return l.invert=function(u){return t.invert(bl(u))},l.domain=function(u){return arguments.length?(t.domain(u),l):t.domain()},l.range=function(u){return arguments.length?(t.range((n=Array.from(u,Ro)).map(bl)),l):n.slice()},l.rangeRound=function(u){return l.range(u).round(!0)},l.round=function(u){return arguments.length?(a=!!u,l):a},l.clamp=function(u){return arguments.length?(t.clamp(u),l):t.clamp()},l.unknown=function(u){return arguments.length?(s=u,l):s},l.copy=function(){return Y1(t.domain(),n).round(a).clamp(t.clamp()).unknown(s)},et.apply(l,arguments),jt(l)}function F1(){var t=[],n=[],a=[],s;function l(){var c=0,p=Math.max(1,n.length);for(a=new Array(p-1);++c<p;)a[c-1]=lh(t,c/p);return u}function u(c){return c==null||isNaN(c=+c)?s:n[Ft(a,c)]}return u.invertExtent=function(c){var p=n.indexOf(c);return p<0?[NaN,NaN]:[p>0?a[p-1]:t[0],p<a.length?a[p]:t[t.length-1]]},u.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let p of c)p!=null&&!isNaN(p=+p)&&t.push(p);return t.sort(hn),l()},u.range=function(c){return arguments.length?(n=Array.from(c),l()):n.slice()},u.unknown=function(c){return arguments.length?(s=c,u):s},u.quantiles=function(){return a.slice()},u.copy=function(){return F1().domain(t).range(n).unknown(s)},et.apply(u,arguments)}function q1(){var t=0,n=1,a=1,s=[.5],l=[0,1],u;function c(d){return d!=null&&d<=d?l[Ft(s,d,0,a)]:u}function p(){var d=-1;for(s=new Array(a);++d<a;)s[d]=((d+1)*n-(d-a)*t)/(a+1);return c}return c.domain=function(d){return arguments.length?([t,n]=d,t=+t,n=+n,p()):[t,n]},c.range=function(d){return arguments.length?(a=(l=Array.from(d)).length-1,p()):l.slice()},c.invertExtent=function(d){var x=l.indexOf(d);return x<0?[NaN,NaN]:x<1?[t,s[0]]:x>=a?[s[a-1],n]:[s[x-1],s[x]]},c.unknown=function(d){return arguments.length&&(u=d),c},c.thresholds=function(){return s.slice()},c.copy=function(){return q1().domain([t,n]).range(l).unknown(u)},et.apply(jt(c),arguments)}function L1(){var t=[.5],n=[0,1],a,s=1;function l(u){return u!=null&&u<=u?n[Ft(t,u,0,s)]:a}return l.domain=function(u){return arguments.length?(t=Array.from(u),s=Math.min(t.length,n.length-1),l):t.slice()},l.range=function(u){return arguments.length?(n=Array.from(u),s=Math.min(t.length,n.length-1),l):n.slice()},l.invertExtent=function(u){var c=n.indexOf(u);return[t[c-1],t[c]]},l.unknown=function(u){return arguments.length?(a=u,l):a},l.copy=function(){return L1().domain(t).range(n).unknown(a)},et.apply(l,arguments)}const eu=new Date,ru=new Date;function _n(t,n,a,s){function l(u){return t(u=arguments.length===0?new Date:new Date(+u)),u}return l.floor=u=>(t(u=new Date(+u)),u),l.ceil=u=>(t(u=new Date(u-1)),n(u,1),t(u),u),l.round=u=>{const c=l(u),p=l.ceil(u);return u-c<p-u?c:p},l.offset=(u,c)=>(n(u=new Date(+u),c==null?1:Math.floor(c)),u),l.range=(u,c,p)=>{const d=[];if(u=l.ceil(u),p=p==null?1:Math.floor(p),!(u<c)||!(p>0))return d;let x;do d.push(x=new Date(+u)),n(u,p),t(u);while(x<u&&u<c);return d},l.filter=u=>_n(c=>{if(c>=c)for(;t(c),!u(c);)c.setTime(c-1)},(c,p)=>{if(c>=c)if(p<0)for(;++p<=0;)for(;n(c,-1),!u(c););else for(;--p>=0;)for(;n(c,1),!u(c););}),a&&(l.count=(u,c)=>(eu.setTime(+u),ru.setTime(+c),t(eu),t(ru),Math.floor(a(eu,ru))),l.every=u=>(u=Math.floor(u),!isFinite(u)||!(u>0)?null:u>1?l.filter(s?c=>s(c)%u===0:c=>l.count(0,c)%u===0):l)),l}const Qe=_n(()=>{},(t,n)=>{t.setTime(+t+n)},(t,n)=>n-t);Qe.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_n(n=>{n.setTime(Math.floor(n/t)*t)},(n,a)=>{n.setTime(+n+a*t)},(n,a)=>(a-n)/t):Qe);const wl=Qe.range,At=1e3,tt=At*60,St=tt*60,Rt=St*24,gc=Rt*7,xl=Rt*30,iu=Rt*365,Et=_n(t=>{t.setTime(t-t.getMilliseconds())},(t,n)=>{t.setTime(+t+n*At)},(t,n)=>(n-t)/At,t=>t.getUTCSeconds()),Ml=Et.range,ca=_n(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*At)},(t,n)=>{t.setTime(+t+n*tt)},(t,n)=>(n-t)/tt,t=>t.getMinutes()),u5=ca.range,sa=_n(t=>{t.setUTCSeconds(0,0)},(t,n)=>{t.setTime(+t+n*tt)},(t,n)=>(n-t)/tt,t=>t.getUTCMinutes()),f5=sa.range,la=_n(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*At-t.getMinutes()*tt)},(t,n)=>{t.setTime(+t+n*St)},(t,n)=>(n-t)/St,t=>t.getHours()),c5=la.range,ha=_n(t=>{t.setUTCMinutes(0,0,0)},(t,n)=>{t.setTime(+t+n*St)},(t,n)=>(n-t)/St,t=>t.getUTCHours()),s5=ha.range,or=_n(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*tt)/Rt,t=>t.getDate()-1),l5=or.range,ui=_n(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/Rt,t=>t.getUTCDate()-1),h5=ui.range,pc=_n(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/Rt,t=>Math.floor(t/Rt)),d5=pc.range;function ve(t){return _n(n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},(n,a)=>{n.setDate(n.getDate()+a*7)},(n,a)=>(a-n-(a.getTimezoneOffset()-n.getTimezoneOffset())*tt)/gc)}const Ke=ve(0),Vr=ve(1),B1=ve(2),U1=ve(3),de=ve(4),X1=ve(5),H1=ve(6),$l=Ke.range,g5=Vr.range,p5=B1.range,m5=U1.range,y5=de.range,_5=X1.range,v5=H1.range;function be(t){return _n(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},(n,a)=>{n.setUTCDate(n.getUTCDate()+a*7)},(n,a)=>(a-n)/gc)}const Je=be(0),Gr=be(1),j1=be(2),W1=be(3),ge=be(4),V1=be(5),G1=be(6),Tl=Je.range,b5=Gr.range,w5=j1.range,x5=W1.range,M5=ge.range,$5=V1.range,T5=G1.range,da=_n(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n)=>{t.setMonth(t.getMonth()+n)},(t,n)=>n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),A5=da.range,ga=_n(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)},(t,n)=>n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),S5=ga.range,mt=_n(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n)},(t,n)=>n.getFullYear()-t.getFullYear(),t=>t.getFullYear());mt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_n(n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,a)=>{n.setFullYear(n.getFullYear()+a*t)});const E5=mt.range,yt=_n(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)},(t,n)=>n.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());yt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_n(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,a)=>{n.setUTCFullYear(n.getUTCFullYear()+a*t)});const k5=yt.range;function Z1(t,n,a,s,l,u){const c=[[Et,1,At],[Et,5,5*At],[Et,15,15*At],[Et,30,30*At],[u,1,tt],[u,5,5*tt],[u,15,15*tt],[u,30,30*tt],[l,1,St],[l,3,3*St],[l,6,6*St],[l,12,12*St],[s,1,Rt],[s,2,2*Rt],[a,1,gc],[n,1,xl],[n,3,3*xl],[t,1,iu]];function p(x,_,S){const T=_<x;T&&([x,_]=[_,x]);const A=S&&typeof S.range=="function"?S:d(x,_,S),R=A?A.range(x,+_+1):[];return T?R.reverse():R}function d(x,_,S){const T=Math.abs(_-x)/S,A=Oo(([,,O])=>O).right(c,T);if(A===c.length)return t.every(Wi(x/iu,_/iu,S));if(A===0)return Qe.every(Math.max(Wi(x,_,S),1));const[R,D]=c[T/c[A-1][2]<c[A][2]/T?A-1:A];return R.every(D)}return[p,d]}const[Q1,K1]=Z1(yt,ga,Je,pc,ha,sa),[J1,nd]=Z1(mt,da,Ke,or,la,ca);function ou(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function au(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function lr(t,n,a){return{y:t,m:n,d:a,H:0,M:0,S:0,L:0}}function td(t){var n=t.dateTime,a=t.date,s=t.time,l=t.periods,u=t.days,c=t.shortDays,p=t.months,d=t.shortMonths,x=hr(l),_=dr(l),S=hr(u),T=dr(u),A=hr(c),R=dr(c),D=hr(p),O=dr(p),F=hr(d),z=dr(d),j={a:ax,A:sx,b:lx,B:ox,c:null,d:Rl,e:Rl,f:K5,g:f8,G:s8,H:G5,I:Z5,j:Q5,L:ed,m:J5,M:n8,p:hx,q:_x,Q:Pl,s:Dl,S:t8,u:e8,U:r8,V:i8,w:o8,W:a8,x:null,X:null,y:u8,Y:c8,Z:l8,"%":Cl},Z={a:ux,A:px,b:dx,B:mx,c:null,d:Il,e:Il,f:p8,g:T8,G:S8,H:h8,I:d8,j:g8,L:id$1,m:m8,M:y8,p:gx,q:Sx,Q:Pl,s:Dl,S:_8,u:v8,U:b8,V:w8,w:x8,W:M8,x:null,X:null,y:$8,Y:A8,Z:E8,"%":Cl},W={a:Q,A:on,b:gn,B:In,c:dn,d:kl,e:kl,f:H5,g:El,G:Sl,H:Nl,I:Nl,j:L5,L:X5,m:q5,M:B5,p:Ct,q:F5,Q:W5,s:V5,S:U5,u:P5,U:D5,V:z5,w:C5,W:O5,x:ix,X:Cn,y:El,Y:Sl,Z:Y5,"%":j5};j.x=J(a,j),j.X=J(s,j),j.c=J(n,j),Z.x=J(a,Z),Z.X=J(s,Z),Z.c=J(n,Z);function J(Ex,Cx){return function(Ax){var Tx=[],kx=-1,Rx=0,$x=Ex.length,Gx,qx,Dx;for(Ax instanceof Date||(Ax=new Date(+Ax));++kx<$x;)Ex.charCodeAt(kx)===37&&(Tx.push(Ex.slice(Rx,kx)),(qx=Al[Gx=Ex.charAt(++kx)])!=null?Gx=Ex.charAt(++kx):qx=Gx==="e"?" ":"0",(Dx=Cx[Gx])&&(Gx=Dx(Ax,qx)),Tx.push(Gx),Rx=kx+1);return Tx.push(Ex.slice(Rx,kx)),Tx.join("")}}function en(Ex,Cx){return function(Ax){var Tx=lr(1900,void 0,1),kx=tn(Tx,Ex,Ax+="",0),Rx,$x;if(kx!=Ax.length)return null;if("Q"in Tx)return new Date(Tx.Q);if("s"in Tx)return new Date(Tx.s*1e3+("L"in Tx?Tx.L:0));if(Cx&&!("Z"in Tx)&&(Tx.Z=0),"p"in Tx&&(Tx.H=Tx.H%12+Tx.p*12),Tx.m===void 0&&(Tx.m="q"in Tx?Tx.q:0),"V"in Tx){if(Tx.V<1||Tx.V>53)return null;"w"in Tx||(Tx.w=1),"Z"in Tx?(Rx=au(lr(Tx.y,0,1)),$x=Rx.getUTCDay(),Rx=$x>4||$x===0?Gr.ceil(Rx):Gr(Rx),Rx=ui.offset(Rx,(Tx.V-1)*7),Tx.y=Rx.getUTCFullYear(),Tx.m=Rx.getUTCMonth(),Tx.d=Rx.getUTCDate()+(Tx.w+6)%7):(Rx=ou(lr(Tx.y,0,1)),$x=Rx.getDay(),Rx=$x>4||$x===0?Vr.ceil(Rx):Vr(Rx),Rx=or.offset(Rx,(Tx.V-1)*7),Tx.y=Rx.getFullYear(),Tx.m=Rx.getMonth(),Tx.d=Rx.getDate()+(Tx.w+6)%7)}else("W"in Tx||"U"in Tx)&&("w"in Tx||(Tx.w="u"in Tx?Tx.u%7:"W"in Tx?1:0),$x="Z"in Tx?au(lr(Tx.y,0,1)).getUTCDay():ou(lr(Tx.y,0,1)).getDay(),Tx.m=0,Tx.d="W"in Tx?(Tx.w+6)%7+Tx.W*7-($x+5)%7:Tx.w+Tx.U*7-($x+6)%7);return"Z"in Tx?(Tx.H+=Tx.Z/100|0,Tx.M+=Tx.Z%100,au(Tx)):ou(Tx)}}function tn(Ex,Cx,Ax,Tx){for(var kx=0,Rx=Cx.length,$x=Ax.length,Gx,qx;kx<Rx;){if(Tx>=$x)return-1;if(Gx=Cx.charCodeAt(kx++),Gx===37){if(Gx=Cx.charAt(kx++),qx=W[Gx in Al?Cx.charAt(kx++):Gx],!qx||(Tx=qx(Ex,Ax,Tx))<0)return-1}else if(Gx!=Ax.charCodeAt(Tx++))return-1}return Tx}function Ct(Ex,Cx,Ax){var Tx=x.exec(Cx.slice(Ax));return Tx?(Ex.p=_.get(Tx[0].toLowerCase()),Ax+Tx[0].length):-1}function Q(Ex,Cx,Ax){var Tx=A.exec(Cx.slice(Ax));return Tx?(Ex.w=R.get(Tx[0].toLowerCase()),Ax+Tx[0].length):-1}function on(Ex,Cx,Ax){var Tx=S.exec(Cx.slice(Ax));return Tx?(Ex.w=T.get(Tx[0].toLowerCase()),Ax+Tx[0].length):-1}function gn(Ex,Cx,Ax){var Tx=F.exec(Cx.slice(Ax));return Tx?(Ex.m=z.get(Tx[0].toLowerCase()),Ax+Tx[0].length):-1}function In(Ex,Cx,Ax){var Tx=D.exec(Cx.slice(Ax));return Tx?(Ex.m=O.get(Tx[0].toLowerCase()),Ax+Tx[0].length):-1}function dn(Ex,Cx,Ax){return tn(Ex,n,Cx,Ax)}function ix(Ex,Cx,Ax){return tn(Ex,a,Cx,Ax)}function Cn(Ex,Cx,Ax){return tn(Ex,s,Cx,Ax)}function ax(Ex){return c[Ex.getDay()]}function sx(Ex){return u[Ex.getDay()]}function lx(Ex){return d[Ex.getMonth()]}function ox(Ex){return p[Ex.getMonth()]}function hx(Ex){return l[+(Ex.getHours()>=12)]}function _x(Ex){return 1+~~(Ex.getMonth()/3)}function ux(Ex){return c[Ex.getUTCDay()]}function px(Ex){return u[Ex.getUTCDay()]}function dx(Ex){return d[Ex.getUTCMonth()]}function mx(Ex){return p[Ex.getUTCMonth()]}function gx(Ex){return l[+(Ex.getUTCHours()>=12)]}function Sx(Ex){return 1+~~(Ex.getUTCMonth()/3)}return{format:function(Ex){var Cx=J(Ex+="",j);return Cx.toString=function(){return Ex},Cx},parse:function(Ex){var Cx=en(Ex+="",!1);return Cx.toString=function(){return Ex},Cx},utcFormat:function(Ex){var Cx=J(Ex+="",Z);return Cx.toString=function(){return Ex},Cx},utcParse:function(Ex){var Cx=en(Ex+="",!0);return Cx.toString=function(){return Ex},Cx}}}var Al={"-":"",_:" ",0:"0"},Tn=/^\s*\d+/,N5=/^%/,R5=/[\\^$*+?|[\]().{}]/g;function rn(t,n,a){var s=t<0?"-":"",l=(s?-t:t)+"",u=l.length;return s+(u<a?new Array(a-u+1).join(n)+l:l)}function I5(t){return t.replace(R5,"\\$&")}function hr(t){return new RegExp("^(?:"+t.map(I5).join("|")+")","i")}function dr(t){return new Map(t.map((n,a)=>[n.toLowerCase(),a]))}function C5(t,n,a){var s=Tn.exec(n.slice(a,a+1));return s?(t.w=+s[0],a+s[0].length):-1}function P5(t,n,a){var s=Tn.exec(n.slice(a,a+1));return s?(t.u=+s[0],a+s[0].length):-1}function D5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.U=+s[0],a+s[0].length):-1}function z5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.V=+s[0],a+s[0].length):-1}function O5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.W=+s[0],a+s[0].length):-1}function Sl(t,n,a){var s=Tn.exec(n.slice(a,a+4));return s?(t.y=+s[0],a+s[0].length):-1}function El(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function Y5(t,n,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(a,a+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function F5(t,n,a){var s=Tn.exec(n.slice(a,a+1));return s?(t.q=s[0]*3-3,a+s[0].length):-1}function q5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.m=s[0]-1,a+s[0].length):-1}function kl(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.d=+s[0],a+s[0].length):-1}function L5(t,n,a){var s=Tn.exec(n.slice(a,a+3));return s?(t.m=0,t.d=+s[0],a+s[0].length):-1}function Nl(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.H=+s[0],a+s[0].length):-1}function B5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.M=+s[0],a+s[0].length):-1}function U5(t,n,a){var s=Tn.exec(n.slice(a,a+2));return s?(t.S=+s[0],a+s[0].length):-1}function X5(t,n,a){var s=Tn.exec(n.slice(a,a+3));return s?(t.L=+s[0],a+s[0].length):-1}function H5(t,n,a){var s=Tn.exec(n.slice(a,a+6));return s?(t.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function j5(t,n,a){var s=N5.exec(n.slice(a,a+1));return s?a+s[0].length:-1}function W5(t,n,a){var s=Tn.exec(n.slice(a));return s?(t.Q=+s[0],a+s[0].length):-1}function V5(t,n,a){var s=Tn.exec(n.slice(a));return s?(t.s=+s[0],a+s[0].length):-1}function Rl(t,n){return rn(t.getDate(),n,2)}function G5(t,n){return rn(t.getHours(),n,2)}function Z5(t,n){return rn(t.getHours()%12||12,n,2)}function Q5(t,n){return rn(1+or.count(mt(t),t),n,3)}function ed(t,n){return rn(t.getMilliseconds(),n,3)}function K5(t,n){return ed(t,n)+"000"}function J5(t,n){return rn(t.getMonth()+1,n,2)}function n8(t,n){return rn(t.getMinutes(),n,2)}function t8(t,n){return rn(t.getSeconds(),n,2)}function e8(t){var n=t.getDay();return n===0?7:n}function r8(t,n){return rn(Ke.count(mt(t)-1,t),n,2)}function rd(t){var n=t.getDay();return n>=4||n===0?de(t):de.ceil(t)}function i8(t,n){return t=rd(t),rn(de.count(mt(t),t)+(mt(t).getDay()===4),n,2)}function o8(t){return t.getDay()}function a8(t,n){return rn(Vr.count(mt(t)-1,t),n,2)}function u8(t,n){return rn(t.getFullYear()%100,n,2)}function f8(t,n){return t=rd(t),rn(t.getFullYear()%100,n,2)}function c8(t,n){return rn(t.getFullYear()%1e4,n,4)}function s8(t,n){var a=t.getDay();return t=a>=4||a===0?de(t):de.ceil(t),rn(t.getFullYear()%1e4,n,4)}function l8(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+rn(n/60|0,"0",2)+rn(n%60,"0",2)}function Il(t,n){return rn(t.getUTCDate(),n,2)}function h8(t,n){return rn(t.getUTCHours(),n,2)}function d8(t,n){return rn(t.getUTCHours()%12||12,n,2)}function g8(t,n){return rn(1+ui.count(yt(t),t),n,3)}function id$1(t,n){return rn(t.getUTCMilliseconds(),n,3)}function p8(t,n){return id$1(t,n)+"000"}function m8(t,n){return rn(t.getUTCMonth()+1,n,2)}function y8(t,n){return rn(t.getUTCMinutes(),n,2)}function _8(t,n){return rn(t.getUTCSeconds(),n,2)}function v8(t){var n=t.getUTCDay();return n===0?7:n}function b8(t,n){return rn(Je.count(yt(t)-1,t),n,2)}function od(t){var n=t.getUTCDay();return n>=4||n===0?ge(t):ge.ceil(t)}function w8(t,n){return t=od(t),rn(ge.count(yt(t),t)+(yt(t).getUTCDay()===4),n,2)}function x8(t){return t.getUTCDay()}function M8(t,n){return rn(Gr.count(yt(t)-1,t),n,2)}function $8(t,n){return rn(t.getUTCFullYear()%100,n,2)}function T8(t,n){return t=od(t),rn(t.getUTCFullYear()%100,n,2)}function A8(t,n){return rn(t.getUTCFullYear()%1e4,n,4)}function S8(t,n){var a=t.getUTCDay();return t=a>=4||a===0?ge(t):ge.ceil(t),rn(t.getUTCFullYear()%1e4,n,4)}function E8(){return"+0000"}function Cl(){return"%"}function Pl(t){return+t}function Dl(t){return Math.floor(+t/1e3)}var Ne,mc,ad,pa,yc;ud({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ud(t){return Ne=td(t),mc=Ne.format,ad=Ne.parse,pa=Ne.utcFormat,yc=Ne.utcParse,Ne}var fd="%Y-%m-%dT%H:%M:%S.%LZ";function k8(t){return t.toISOString()}var N8=Date.prototype.toISOString?k8:pa(fd);function R8(t){var n=new Date(t);return isNaN(n)?null:n}var I8=+new Date("2000-01-01T00:00:00.000Z")?R8:yc(fd);function C8(t){return new Date(t)}function P8(t){return t instanceof Date?+t:+new Date(+t)}function _c$1(t,n,a,s,l,u,c,p,d,x){var _=cc(),S=_.invert,T=_.domain,A=x(".%L"),R=x(":%S"),D=x("%I:%M"),O=x("%I %p"),F=x("%a %d"),z=x("%b %d"),j=x("%B"),Z=x("%Y");function W(J){return(d(J)<J?A:p(J)<J?R:c(J)<J?D:u(J)<J?O:s(J)<J?l(J)<J?F:z:a(J)<J?j:Z)(J)}return _.invert=function(J){return new Date(S(J))},_.domain=function(J){return arguments.length?T(Array.from(J,P8)):T().map(C8)},_.ticks=function(J){var en=T();return t(en[0],en[en.length-1],J??10)},_.tickFormat=function(J,en){return en==null?W:x(en)},_.nice=function(J){var en=T();return(!J||typeof J.range!="function")&&(J=n(en[0],en[en.length-1],J??10)),J?T(D1(en,J)):_},_.copy=function(){return ai(_,_c$1(t,n,a,s,l,u,c,p,d,x))},_}function D8(){return et.apply(_c$1(J1,nd,mt,da,Ke,or,la,ca,Et,mc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function z8(){return et.apply(_c$1(Q1,K1,yt,ga,Je,ui,ha,sa,Et,pa).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ma(){var t=0,n=1,a,s,l,u,c=Fn,p=!1,d;function x(S){return S==null||isNaN(S=+S)?d:c(l===0?.5:(S=(u(S)-a)*l,p?Math.max(0,Math.min(1,S)):S))}x.domain=function(S){return arguments.length?([t,n]=S,a=u(t=+t),s=u(n=+n),l=a===s?0:1/(s-a),x):[t,n]},x.clamp=function(S){return arguments.length?(p=!!S,x):p},x.interpolator=function(S){return arguments.length?(c=S,x):c};function _(S){return function(T){var A,R;return arguments.length?([A,R]=T,c=S(A,R),x):[c(0),c(1)]}}return x.range=_(Ht),x.rangeRound=_(Vo),x.unknown=function(S){return arguments.length?(d=S,x):d},function(S){return u=S,a=S(t),s=S(n),l=a===s?0:1/(s-a),x}}function Wt(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function cd(){var t=jt(ma()(Fn));return t.copy=function(){return Wt(t,cd())},It.apply(t,arguments)}function sd(){var t=sc(ma()).domain([1,10]);return t.copy=function(){return Wt(t,sd()).base(t.base())},It.apply(t,arguments)}function ld(){var t=lc(ma());return t.copy=function(){return Wt(t,ld()).constant(t.constant())},It.apply(t,arguments)}function vc(){var t=hc(ma());return t.copy=function(){return Wt(t,vc()).exponent(t.exponent())},It.apply(t,arguments)}function O8(){return vc.apply(null,arguments).exponent(.5)}function hd(){var t=[],n=Fn;function a(s){if(s!=null&&!isNaN(s=+s))return n((Ft(t,s,1)-1)/(t.length-1))}return a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let l of s)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(hn),a},a.interpolator=function(s){return arguments.length?(n=s,a):n},a.range=function(){return t.map((s,l)=>n(l/(t.length-1)))},a.quantiles=function(s){return Array.from({length:s+1},(l,u)=>Dr(t,u/s))},a.copy=function(){return hd(n).domain(t)},It.apply(a,arguments)}function ya(){var t=0,n=.5,a=1,s=1,l,u,c,p,d,x=Fn,_,S=!1,T;function A(D){return isNaN(D=+D)?T:(D=.5+((D=+_(D))-u)*(s*D<s*u?p:d),x(S?Math.max(0,Math.min(1,D)):D))}A.domain=function(D){return arguments.length?([t,n,a]=D,l=_(t=+t),u=_(n=+n),c=_(a=+a),p=l===u?0:.5/(u-l),d=u===c?0:.5/(c-u),s=u<l?-1:1,A):[t,n,a]},A.clamp=function(D){return arguments.length?(S=!!D,A):S},A.interpolator=function(D){return arguments.length?(x=D,A):x};function R(D){return function(O){var F,z,j;return arguments.length?([F,z,j]=O,x=i0(D,[F,z,j]),A):[x(0),x(.5),x(1)]}}return A.range=R(Ht),A.rangeRound=R(Vo),A.unknown=function(D){return arguments.length?(T=D,A):T},function(D){return _=D,l=D(t),u=D(n),c=D(a),p=l===u?0:.5/(u-l),d=u===c?0:.5/(c-u),s=u<l?-1:1,A}}function dd(){var t=jt(ya()(Fn));return t.copy=function(){return Wt(t,dd())},It.apply(t,arguments)}function gd(){var t=sc(ya()).domain([.1,1,10]);return t.copy=function(){return Wt(t,gd()).base(t.base())},It.apply(t,arguments)}function pd(){var t=lc(ya());return t.copy=function(){return Wt(t,pd()).constant(t.constant())},It.apply(t,arguments)}function bc(){var t=hc(ya());return t.copy=function(){return Wt(t,bc()).exponent(t.exponent())},It.apply(t,arguments)}function Y8(){return bc.apply(null,arguments).exponent(.5)}function G(t){for(var n=t.length/6|0,a=new Array(n),s=0;s<n;)a[s]="#"+t.slice(s*6,++s*6);return a}const F8=G("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),q8=G("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),L8=G("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),B8=G("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),U8=G("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),X8=G("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),H8=G("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),j8=G("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),W8=G("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),V8=G("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),G8=G("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),un=t=>Hh(t[t.length-1]);var md=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(G);const Z8=un(md);var yd=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(G);const Q8=un(yd);var _d=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(G);const K8=un(_d);var vd=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(G);const J8=un(vd);var bd=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(G);const n4=un(bd);var wd=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(G);const t4=un(wd);var xd=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(G);const e4=un(xd);var Md=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(G);const r4=un(Md);var $d=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(G);const i4=un($d);var Td=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(G);const o4=un(Td);var Ad=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(G);const a4=un(Ad);var Sd=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(G);const u4=un(Sd);var Ed=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(G);const f4=un(Ed);var kd=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(G);const c4=un(kd);var Nd=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(G);const s4=un(Nd);var Rd=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(G);const l4=un(Rd);var Id=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(G);const h4=un(Id);var Cd=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(G);const d4=un(Cd);var Pd=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(G);const g4=un(Pd);var Dd=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(G);const p4=un(Dd);var zd=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(G);const m4=un(zd);var Od=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(G);const y4=un(Od);var Yd=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(G);const _4=un(Yd);var Fd=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(G);const v4=un(Fd);var qd=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(G);const b4=un(qd);var Ld=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(G);const w4=un(Ld);var Bd=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(G);const x4=un(Bd);function M4(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const $4=Go(ut(300,.5,0),ut(-240,.5,1));var T4=Go(ut(-100,.75,.35),ut(80,1.5,.8)),A4=Go(ut(260,.75,.35),ut(80,1.5,.8)),Ei=ut();function S4(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return Ei.h=360*t-100,Ei.s=1.5-1.5*n,Ei.l=.8-.9*n,Ei+""}var ki=Ue(),E4=Math.PI/3,k4=Math.PI*2/3;function N4(t){var n;return t=(.5-t)*Math.PI,ki.r=255*(n=Math.sin(t))*n,ki.g=255*(n=Math.sin(t+E4))*n,ki.b=255*(n=Math.sin(t+k4))*n,ki+""}function R4(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function _a$1(t){var n=t.length;return function(a){return t[Math.max(0,Math.min(n-1,Math.floor(a*n)))]}}const I4=_a$1(G("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var C4=_a$1(G("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),P4=_a$1(G("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),D4=_a$1(G("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function V(t){return function(){return t}}const zl=Math.abs,Nn=Math.atan2,Mt=Math.cos,z4=Math.max,Fe=Math.min,jn$1=Math.sin,fn=Math.sqrt,Rn=1e-12,Bt=Math.PI,Io=Bt/2,Yt=2*Bt;function O4(t){return t>1?0:t<-1?Bt:Math.acos(t)}function Ol(t){return t>=1?Io:t<=-1?-Io:Math.asin(t)}function fi(t){let n=3;return t.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);n=s}return t},()=>new Jr(n)}function Y4(t){return t.innerRadius}function F4(t){return t.outerRadius}function q4(t){return t.startAngle}function L4(t){return t.endAngle}function B4(t){return t&&t.padAngle}function U4(t,n,a,s,l,u,c,p){var d=a-t,x=s-n,_=c-l,S=p-u,T=S*d-_*x;if(!(T*T<Rn))return T=(_*(n-u)-S*(t-l))/T,[t+T*d,n+T*x]}function Ni(t,n,a,s,l,u,c){var p=t-a,d=n-s,x=(c?u:-u)/fn(p*p+d*d),_=x*d,S=-x*p,T=t+_,A=n+S,R=a+_,D=s+S,O=(T+R)/2,F=(A+D)/2,z=R-T,j=D-A,Z=z*z+j*j,W=l-u,J=T*D-R*A,en=(j<0?-1:1)*fn(z4(0,W*W*Z-J*J)),tn=(J*j-z*en)/Z,Ct=(-J*z-j*en)/Z,Q=(J*j+z*en)/Z,on=(-J*z+j*en)/Z,gn=tn-O,In=Ct-F,dn=Q-O,ix=on-F;return gn*gn+In*In>dn*dn+ix*ix&&(tn=Q,Ct=on),{cx:tn,cy:Ct,x01:-_,y01:-S,x11:tn*(l/W-1),y11:Ct*(l/W-1)}}function X4(){var t=Y4,n=F4,a=V(0),s=null,l=q4,u=L4,c=B4,p=null,d=fi(x);function x(){var _,S,T=+t.apply(this,arguments),A=+n.apply(this,arguments),R=l.apply(this,arguments)-Io,D=u.apply(this,arguments)-Io,O=zl(D-R),F=D>R;if(p||(p=_=d()),A<T&&(S=A,A=T,T=S),!(A>Rn))p.moveTo(0,0);else if(O>Yt-Rn)p.moveTo(A*Mt(R),A*jn$1(R)),p.arc(0,0,A,R,D,!F),T>Rn&&(p.moveTo(T*Mt(D),T*jn$1(D)),p.arc(0,0,T,D,R,F));else{var z=R,j=D,Z=R,W=D,J=O,en=O,tn=c.apply(this,arguments)/2,Ct=tn>Rn&&(s?+s.apply(this,arguments):fn(T*T+A*A)),Q=Fe(zl(A-T)/2,+a.apply(this,arguments)),on=Q,gn=Q,In,dn;if(Ct>Rn){var ix=Ol(Ct/T*jn$1(tn)),Cn=Ol(Ct/A*jn$1(tn));(J-=ix*2)>Rn?(ix*=F?1:-1,Z+=ix,W-=ix):(J=0,Z=W=(R+D)/2),(en-=Cn*2)>Rn?(Cn*=F?1:-1,z+=Cn,j-=Cn):(en=0,z=j=(R+D)/2)}var ax=A*Mt(z),sx=A*jn$1(z),lx=T*Mt(W),ox=T*jn$1(W);if(Q>Rn){var hx=A*Mt(j),_x=A*jn$1(j),ux=T*Mt(Z),px=T*jn$1(Z),dx;if(O<Bt)if(dx=U4(ax,sx,ux,px,hx,_x,lx,ox)){var mx=ax-dx[0],gx=sx-dx[1],Sx=hx-dx[0],Ex=_x-dx[1],Cx=1/jn$1(O4((mx*Sx+gx*Ex)/(fn(mx*mx+gx*gx)*fn(Sx*Sx+Ex*Ex)))/2),Ax=fn(dx[0]*dx[0]+dx[1]*dx[1]);on=Fe(Q,(T-Ax)/(Cx-1)),gn=Fe(Q,(A-Ax)/(Cx+1))}else on=gn=0}en>Rn?gn>Rn?(In=Ni(ux,px,ax,sx,A,gn,F),dn=Ni(hx,_x,lx,ox,A,gn,F),p.moveTo(In.cx+In.x01,In.cy+In.y01),gn<Q?p.arc(In.cx,In.cy,gn,Nn(In.y01,In.x01),Nn(dn.y01,dn.x01),!F):(p.arc(In.cx,In.cy,gn,Nn(In.y01,In.x01),Nn(In.y11,In.x11),!F),p.arc(0,0,A,Nn(In.cy+In.y11,In.cx+In.x11),Nn(dn.cy+dn.y11,dn.cx+dn.x11),!F),p.arc(dn.cx,dn.cy,gn,Nn(dn.y11,dn.x11),Nn(dn.y01,dn.x01),!F))):(p.moveTo(ax,sx),p.arc(0,0,A,z,j,!F)):p.moveTo(ax,sx),!(T>Rn)||!(J>Rn)?p.lineTo(lx,ox):on>Rn?(In=Ni(lx,ox,hx,_x,T,-on,F),dn=Ni(ax,sx,ux,px,T,-on,F),p.lineTo(In.cx+In.x01,In.cy+In.y01),on<Q?p.arc(In.cx,In.cy,on,Nn(In.y01,In.x01),Nn(dn.y01,dn.x01),!F):(p.arc(In.cx,In.cy,on,Nn(In.y01,In.x01),Nn(In.y11,In.x11),!F),p.arc(0,0,T,Nn(In.cy+In.y11,In.cx+In.x11),Nn(dn.cy+dn.y11,dn.cx+dn.x11),F),p.arc(dn.cx,dn.cy,on,Nn(dn.y11,dn.x11),Nn(dn.y01,dn.x01),!F))):p.arc(0,0,T,W,Z,F)}if(p.closePath(),_)return p=null,_+""||null}return x.centroid=function(){var _=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,S=(+l.apply(this,arguments)+ +u.apply(this,arguments))/2-Bt/2;return[Mt(S)*_,jn$1(S)*_]},x.innerRadius=function(_){return arguments.length?(t=typeof _=="function"?_:V(+_),x):t},x.outerRadius=function(_){return arguments.length?(n=typeof _=="function"?_:V(+_),x):n},x.cornerRadius=function(_){return arguments.length?(a=typeof _=="function"?_:V(+_),x):a},x.padRadius=function(_){return arguments.length?(s=_==null?null:typeof _=="function"?_:V(+_),x):s},x.startAngle=function(_){return arguments.length?(l=typeof _=="function"?_:V(+_),x):l},x.endAngle=function(_){return arguments.length?(u=typeof _=="function"?_:V(+_),x):u},x.padAngle=function(_){return arguments.length?(c=typeof _=="function"?_:V(+_),x):c},x.context=function(_){return arguments.length?(p=_??null,x):p},x}var H4=Array.prototype.slice;function va(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ud(t){this._context=t}Ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function ba(t){return new Ud(t)}function wc(t){return t[0]}function xc(t){return t[1]}function Mc(t,n){var a=V(!0),s=null,l=ba,u=null,c=fi(p);t=typeof t=="function"?t:t===void 0?wc:V(t),n=typeof n=="function"?n:n===void 0?xc:V(n);function p(d){var x,_=(d=va(d)).length,S,T=!1,A;for(s==null&&(u=l(A=c())),x=0;x<=_;++x)!(x<_&&a(S=d[x],x,d))===T&&((T=!T)?u.lineStart():u.lineEnd()),T&&u.point(+t(S,x,d),+n(S,x,d));if(A)return u=null,A+""||null}return p.x=function(d){return arguments.length?(t=typeof d=="function"?d:V(+d),p):t},p.y=function(d){return arguments.length?(n=typeof d=="function"?d:V(+d),p):n},p.defined=function(d){return arguments.length?(a=typeof d=="function"?d:V(!!d),p):a},p.curve=function(d){return arguments.length?(l=d,s!=null&&(u=l(s)),p):l},p.context=function(d){return arguments.length?(d==null?s=u=null:u=l(s=d),p):s},p}function Xd(t,n,a){var s=null,l=V(!0),u=null,c=ba,p=null,d=fi(x);t=typeof t=="function"?t:t===void 0?wc:V(+t),n=typeof n=="function"?n:V(n===void 0?0:+n),a=typeof a=="function"?a:a===void 0?xc:V(+a);function x(S){var T,A,R,D=(S=va(S)).length,O,F=!1,z,j=new Array(D),Z=new Array(D);for(u==null&&(p=c(z=d())),T=0;T<=D;++T){if(!(T<D&&l(O=S[T],T,S))===F)if(F=!F)A=T,p.areaStart(),p.lineStart();else{for(p.lineEnd(),p.lineStart(),R=T-1;R>=A;--R)p.point(j[R],Z[R]);p.lineEnd(),p.areaEnd()}F&&(j[T]=+t(O,T,S),Z[T]=+n(O,T,S),p.point(s?+s(O,T,S):j[T],a?+a(O,T,S):Z[T]))}if(z)return p=null,z+""||null}function _(){return Mc().defined(l).curve(c).context(u)}return x.x=function(S){return arguments.length?(t=typeof S=="function"?S:V(+S),s=null,x):t},x.x0=function(S){return arguments.length?(t=typeof S=="function"?S:V(+S),x):t},x.x1=function(S){return arguments.length?(s=S==null?null:typeof S=="function"?S:V(+S),x):s},x.y=function(S){return arguments.length?(n=typeof S=="function"?S:V(+S),a=null,x):n},x.y0=function(S){return arguments.length?(n=typeof S=="function"?S:V(+S),x):n},x.y1=function(S){return arguments.length?(a=S==null?null:typeof S=="function"?S:V(+S),x):a},x.lineX0=x.lineY0=function(){return _().x(t).y(n)},x.lineY1=function(){return _().x(t).y(a)},x.lineX1=function(){return _().x(s).y(n)},x.defined=function(S){return arguments.length?(l=typeof S=="function"?S:V(!!S),x):l},x.curve=function(S){return arguments.length?(c=S,u!=null&&(p=c(u)),x):c},x.context=function(S){return arguments.length?(S==null?u=p=null:p=c(u=S),x):u},x}function j4(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function W4(t){return t}function V4(){var t=W4,n=j4,a=null,s=V(0),l=V(Yt),u=V(0);function c(p){var d,x=(p=va(p)).length,_,S,T=0,A=new Array(x),R=new Array(x),D=+s.apply(this,arguments),O=Math.min(Yt,Math.max(-Yt,l.apply(this,arguments)-D)),F,z=Math.min(Math.abs(O)/x,u.apply(this,arguments)),j=z*(O<0?-1:1),Z;for(d=0;d<x;++d)(Z=R[A[d]=d]=+t(p[d],d,p))>0&&(T+=Z);for(n!=null?A.sort(function(W,J){return n(R[W],R[J])}):a!=null&&A.sort(function(W,J){return a(p[W],p[J])}),d=0,S=T?(O-x*j)/T:0;d<x;++d,D=F)_=A[d],Z=R[_],F=D+(Z>0?Z*S:0)+j,R[_]={data:p[_],index:d,value:Z,startAngle:D,endAngle:F,padAngle:z};return R}return c.value=function(p){return arguments.length?(t=typeof p=="function"?p:V(+p),c):t},c.sortValues=function(p){return arguments.length?(n=p,a=null,c):n},c.sort=function(p){return arguments.length?(a=p,n=null,c):a},c.startAngle=function(p){return arguments.length?(s=typeof p=="function"?p:V(+p),c):s},c.endAngle=function(p){return arguments.length?(l=typeof p=="function"?p:V(+p),c):l},c.padAngle=function(p){return arguments.length?(u=typeof p=="function"?p:V(+p),c):u},c}var Hd=$c(ba);function jd(t){this._curve=t}jd.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};function $c(t){function n(a){return new jd(t(a))}return n._curve=t,n}function Tr(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(a){return arguments.length?n($c(a)):n()._curve},t}function Yl(){return Tr(Mc().curve(Hd))}function Fl(){var t=Xd().curve(Hd),n=t.curve,a=t.lineX0,s=t.lineX1,l=t.lineY0,u=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Tr(a())},delete t.lineX0,t.lineEndAngle=function(){return Tr(s())},delete t.lineX1,t.lineInnerRadius=function(){return Tr(l())},delete t.lineY0,t.lineOuterRadius=function(){return Tr(u())},delete t.lineY1,t.curve=function(c){return arguments.length?n($c(c)):n()._curve},t}function Ar(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}class Wd{constructor(n,a){this._context=n,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,a){switch(n=+n,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,a,n,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,n,this._y0,n,a);break}}this._x0=n,this._y0=a}}class G4{constructor(n){this._context=n}lineStart(){this._point=0}lineEnd(){}point(n,a){if(n=+n,a=+a,this._point===0)this._point=1;else{const s=Ar(this._x0,this._y0),l=Ar(this._x0,this._y0=(this._y0+a)/2),u=Ar(n,this._y0),c=Ar(n,a);this._context.moveTo(...s),this._context.bezierCurveTo(...l,...u,...c)}this._x0=n,this._y0=a}}function Vd(t){return new Wd(t,!0)}function Gd(t){return new Wd(t,!1)}function Z4(t){return new G4(t)}function Q4(t){return t.source}function K4(t){return t.target}function wa(t){let n=Q4,a=K4,s=wc,l=xc,u=null,c=null,p=fi(d);function d(){let x;const _=H4.call(arguments),S=n.apply(this,_),T=a.apply(this,_);if(u==null&&(c=t(x=p())),c.lineStart(),_[0]=S,c.point(+s.apply(this,_),+l.apply(this,_)),_[0]=T,c.point(+s.apply(this,_),+l.apply(this,_)),c.lineEnd(),x)return c=null,x+""||null}return d.source=function(x){return arguments.length?(n=x,d):n},d.target=function(x){return arguments.length?(a=x,d):a},d.x=function(x){return arguments.length?(s=typeof x=="function"?x:V(+x),d):s},d.y=function(x){return arguments.length?(l=typeof x=="function"?x:V(+x),d):l},d.context=function(x){return arguments.length?(x==null?u=c=null:c=t(u=x),d):u},d}function J4(){return wa(Vd)}function n7(){return wa(Gd)}function t7(){const t=wa(Z4);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const e7=fn(3),Zd={draw(t,n){const a=fn(n+Fe(n/28,.75))*.59436,s=a/2,l=s*e7;t.moveTo(0,a),t.lineTo(0,-a),t.moveTo(-l,-s),t.lineTo(l,s),t.moveTo(-l,s),t.lineTo(l,-s)}},xa={draw(t,n){const a=fn(n/Bt);t.moveTo(a,0),t.arc(0,0,a,0,Yt)}},Qd={draw(t,n){const a=fn(n/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},Kd=fn(1/3),r7=Kd*2,Jd={draw(t,n){const a=fn(n/r7),s=a*Kd;t.moveTo(0,-a),t.lineTo(s,0),t.lineTo(0,a),t.lineTo(-s,0),t.closePath()}},ng={draw(t,n){const a=fn(n)*.62625;t.moveTo(0,-a),t.lineTo(a,0),t.lineTo(0,a),t.lineTo(-a,0),t.closePath()}},tg={draw(t,n){const a=fn(n-Fe(n/7,2))*.87559;t.moveTo(-a,0),t.lineTo(a,0),t.moveTo(0,a),t.lineTo(0,-a)}},eg={draw(t,n){const a=fn(n),s=-a/2;t.rect(s,s,a,a)}},rg={draw(t,n){const a=fn(n)*.4431;t.moveTo(a,a),t.lineTo(a,-a),t.lineTo(-a,-a),t.lineTo(-a,a),t.closePath()}},i7=.8908130915292852,ig=jn$1(Bt/10)/jn$1(7*Bt/10),o7=jn$1(Yt/10)*ig,a7=-Mt(Yt/10)*ig,og={draw(t,n){const a=fn(n*i7),s=o7*a,l=a7*a;t.moveTo(0,-a),t.lineTo(s,l);for(let u=1;u<5;++u){const c=Yt*u/5,p=Mt(c),d=jn$1(c);t.lineTo(d*a,-p*a),t.lineTo(p*s-d*l,d*s+p*l)}t.closePath()}},uu=fn(3),ag={draw(t,n){const a=-fn(n/(uu*3));t.moveTo(0,a*2),t.lineTo(-uu*a,-a),t.lineTo(uu*a,-a),t.closePath()}},u7=fn(3),ug={draw(t,n){const a=fn(n)*.6824,s=a/2,l=a*u7/2;t.moveTo(0,-a),t.lineTo(l,s),t.lineTo(-l,s),t.closePath()}},Zn=-.5,Qn=fn(3)/2,uf=1/fn(12),f7=(uf/2+1)*3,fg={draw(t,n){const a=fn(n/f7),s=a/2,l=a*uf,u=s,c=a*uf+a,p=-u,d=c;t.moveTo(s,l),t.lineTo(u,c),t.lineTo(p,d),t.lineTo(Zn*s-Qn*l,Qn*s+Zn*l),t.lineTo(Zn*u-Qn*c,Qn*u+Zn*c),t.lineTo(Zn*p-Qn*d,Qn*p+Zn*d),t.lineTo(Zn*s+Qn*l,Zn*l-Qn*s),t.lineTo(Zn*u+Qn*c,Zn*c-Qn*u),t.lineTo(Zn*p+Qn*d,Zn*d-Qn*p),t.closePath()}},ff={draw(t,n){const a=fn(n-Fe(n/6,1.7))*.6189;t.moveTo(-a,-a),t.lineTo(a,a),t.moveTo(-a,a),t.lineTo(a,-a)}},ql=[xa,Qd,Jd,eg,og,ag,fg],c7=[xa,tg,ff,ug,Zd,rg,ng];function s7(t,n){let a=null,s=fi(l);t=typeof t=="function"?t:V(t||xa),n=typeof n=="function"?n:V(n===void 0?64:+n);function l(){let u;if(a||(a=u=s()),t.apply(this,arguments).draw(a,+n.apply(this,arguments)),u)return a=null,u+""||null}return l.type=function(u){return arguments.length?(t=typeof u=="function"?u:V(u),l):t},l.size=function(u){return arguments.length?(n=typeof u=="function"?u:V(+u),l):n},l.context=function(u){return arguments.length?(a=u??null,l):a},l}function Ut(){}function Co(t,n,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+a)/6)}function Ma(t){this._context=t}Ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Co(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Co(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function l7(t){return new Ma(t)}function cg(t){this._context=t}cg.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Co(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function h7(t){return new cg(t)}function sg(t){this._context=t}sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,s=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:Co(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function d7(t){return new sg(t)}function lg(t,n){this._basis=new Ma(t),this._beta=n}lg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,a=t.length-1;if(a>0)for(var s=t[0],l=n[0],u=t[a]-s,c=n[a]-l,p=-1,d;++p<=a;)d=p/a,this._basis.point(this._beta*t[p]+(1-this._beta)*(s+d*u),this._beta*n[p]+(1-this._beta)*(l+d*c));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};const g7=function t(n){function a(s){return n===1?new Ma(s):new lg(s,n)}return a.beta=function(s){return t(+s)},a}(.85);function Po(t,n,a){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-a),t._x2,t._y2)}function Tc(t,n){this._context=t,this._k=(1-n)/6}Tc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Po(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Po(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const p7=function t(n){function a(s){return new Tc(s,n)}return a.tension=function(s){return t(+s)},a}(0);function Ac(t,n){this._context=t,this._k=(1-n)/6}Ac.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Po(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const m7=function t(n){function a(s){return new Ac(s,n)}return a.tension=function(s){return t(+s)},a}(0);function Sc(t,n){this._context=t,this._k=(1-n)/6}Sc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Po(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const y7=function t(n){function a(s){return new Sc(s,n)}return a.tension=function(s){return t(+s)},a}(0);function Ec(t,n,a){var s=t._x1,l=t._y1,u=t._x2,c=t._y2;if(t._l01_a>Rn){var p=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,d=3*t._l01_a*(t._l01_a+t._l12_a);s=(s*p-t._x0*t._l12_2a+t._x2*t._l01_2a)/d,l=(l*p-t._y0*t._l12_2a+t._y2*t._l01_2a)/d}if(t._l23_a>Rn){var x=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,_=3*t._l23_a*(t._l23_a+t._l12_a);u=(u*x+t._x1*t._l23_2a-n*t._l12_2a)/_,c=(c*x+t._y1*t._l23_2a-a*t._l12_2a)/_}t._context.bezierCurveTo(s,l,u,c,t._x2,t._y2)}function hg(t,n){this._context=t,this._alpha=n}hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Ec(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const _7=function t(n){function a(s){return n?new hg(s,n):new Tc(s,0)}return a.alpha=function(s){return t(+s)},a}(.5);function dg(t,n){this._context=t,this._alpha=n}dg.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Ec(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const v7=function t(n){function a(s){return n?new dg(s,n):new Ac(s,0)}return a.alpha=function(s){return t(+s)},a}(.5);function gg(t,n){this._context=t,this._alpha=n}gg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ec(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const b7=function t(n){function a(s){return n?new gg(s,n):new Sc(s,0)}return a.alpha=function(s){return t(+s)},a}(.5);function pg(t){this._context=t}pg.prototype={areaStart:Ut,areaEnd:Ut,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};function w7(t){return new pg(t)}function Ll(t){return t<0?-1:1}function Bl(t,n,a){var s=t._x1-t._x0,l=n-t._x1,u=(t._y1-t._y0)/(s||l<0&&-0),c=(a-t._y1)/(l||s<0&&-0),p=(u*l+c*s)/(s+l);return(Ll(u)+Ll(c))*Math.min(Math.abs(u),Math.abs(c),.5*Math.abs(p))||0}function Ul(t,n){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-n)/2:n}function fu(t,n,a){var s=t._x0,l=t._y0,u=t._x1,c=t._y1,p=(u-s)/3;t._context.bezierCurveTo(s+p,l+p*n,u-p,c-p*a,u,c)}function Do(t){this._context=t}Do.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fu(this,this._t0,Ul(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var a=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,fu(this,Ul(this,a=Bl(this,t,n)),a);break;default:fu(this,this._t0,a=Bl(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=a}}};function mg(t){this._context=new yg(t)}(mg.prototype=Object.create(Do.prototype)).point=function(t,n){Do.prototype.point.call(this,n,t)};function yg(t){this._context=t}yg.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,a,s,l,u){this._context.bezierCurveTo(n,t,s,a,u,l)}};function x7(t){return new Do(t)}function M7(t){return new mg(t)}function _g(t){this._context=t}_g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),a===2)this._context.lineTo(t[1],n[1]);else for(var s=Xl(t),l=Xl(n),u=0,c=1;c<a;++u,++c)this._context.bezierCurveTo(s[0][u],l[0][u],s[1][u],l[1][u],t[c],n[c]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};function Xl(t){var n,a=t.length-1,s,l=new Array(a),u=new Array(a),c=new Array(a);for(l[0]=0,u[0]=2,c[0]=t[0]+2*t[1],n=1;n<a-1;++n)l[n]=1,u[n]=4,c[n]=4*t[n]+2*t[n+1];for(l[a-1]=2,u[a-1]=7,c[a-1]=8*t[a-1]+t[a],n=1;n<a;++n)s=l[n]/u[n-1],u[n]-=s,c[n]-=s*c[n-1];for(l[a-1]=c[a-1]/u[a-1],n=a-2;n>=0;--n)l[n]=(c[n]-l[n+1])/u[n];for(u[a-1]=(t[a]+l[a-1])/2,n=0;n<a-1;++n)u[n]=2*t[n+1]-l[n+1];return[l,u]}function $7(t){return new _g(t)}function $a(t,n){this._context=t,this._t=n}$a.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,n)}break}}this._x=t,this._y=n}};function T7(t){return new $a(t,.5)}function A7(t){return new $a(t,0)}function S7(t){return new $a(t,1)}function nr(t,n){if((c=t.length)>1)for(var a=1,s,l,u=t[n[0]],c,p=u.length;a<c;++a)for(l=u,u=t[n[a]],s=0;s<p;++s)u[s][1]+=u[s][0]=isNaN(l[s][1])?l[s][0]:l[s][1]}function tr(t){for(var n=t.length,a=new Array(n);--n>=0;)a[n]=n;return a}function E7(t,n){return t[n]}function k7(t){const n=[];return n.key=t,n}function N7(){var t=V([]),n=tr,a=nr,s=E7;function l(u){var c=Array.from(t.apply(this,arguments),k7),p,d=c.length,x=-1,_;for(const S of u)for(p=0,++x;p<d;++p)(c[p][x]=[0,+s(S,c[p].key,x,u)]).data=S;for(p=0,_=va(n(c));p<d;++p)c[_[p]].index=p;return a(c,_),c}return l.keys=function(u){return arguments.length?(t=typeof u=="function"?u:V(Array.from(u)),l):t},l.value=function(u){return arguments.length?(s=typeof u=="function"?u:V(+u),l):s},l.order=function(u){return arguments.length?(n=u==null?tr:typeof u=="function"?u:V(Array.from(u)),l):n},l.offset=function(u){return arguments.length?(a=u??nr,l):a},l}function R7(t,n){if((s=t.length)>0){for(var a,s,l=0,u=t[0].length,c;l<u;++l){for(c=a=0;a<s;++a)c+=t[a][l][1]||0;if(c)for(a=0;a<s;++a)t[a][l][1]/=c}nr(t,n)}}function I7(t,n){if((d=t.length)>0)for(var a,s=0,l,u,c,p,d,x=t[n[0]].length;s<x;++s)for(c=p=0,a=0;a<d;++a)(u=(l=t[n[a]][s])[1]-l[0])>0?(l[0]=c,l[1]=c+=u):u<0?(l[1]=p,l[0]=p+=u):(l[0]=0,l[1]=u)}function C7(t,n){if((l=t.length)>0){for(var a=0,s=t[n[0]],l,u=s.length;a<u;++a){for(var c=0,p=0;c<l;++c)p+=t[c][a][1]||0;s[a][1]+=s[a][0]=-p/2}nr(t,n)}}function P7(t,n){if(!(!((c=t.length)>0)||!((u=(l=t[n[0]]).length)>0))){for(var a=0,s=1,l,u,c;s<u;++s){for(var p=0,d=0,x=0;p<c;++p){for(var _=t[n[p]],S=_[s][1]||0,T=_[s-1][1]||0,A=(S-T)/2,R=0;R<p;++R){var D=t[n[R]],O=D[s][1]||0,F=D[s-1][1]||0;A+=O-F}d+=S,x+=A*S}l[s-1][1]+=l[s-1][0]=a,d&&(a-=x/d)}l[s-1][1]+=l[s-1][0]=a,nr(t,n)}}function vg(t){var n=t.map(D7);return tr(t).sort(function(a,s){return n[a]-n[s]})}function D7(t){for(var n=-1,a=0,s=t.length,l,u=-1/0;++n<s;)(l=+t[n][1])>u&&(u=l,a=n);return a}function bg(t){var n=t.map(wg);return tr(t).sort(function(a,s){return n[a]-n[s]})}function wg(t){for(var n=0,a=-1,s=t.length,l;++a<s;)(l=+t[a][1])&&(n+=l);return n}function z7(t){return bg(t).reverse()}function O7(t){var n=t.length,a,s,l=t.map(wg),u=vg(t),c=0,p=0,d=[],x=[];for(a=0;a<n;++a)s=u[a],c<p?(c+=l[s],d.push(s)):(p+=l[s],x.push(s));return x.reverse().concat(d)}function Y7(t){return tr(t).reverse()}const Ri=t=>()=>t;function F7(t,{sourceEvent:n,target:a,transform:s,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:l}})}function ht(t,n,a){this.k=t,this.x=n,this.y=a}ht.prototype={constructor:ht,scale:function(t){return t===1?this:new ht(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new ht(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ci=new ht(1,0,0);Pe.prototype=ht.prototype;function Pe(t){for(;!t.__zoom;)if(!(t=t.parentNode))return ci;return t.__zoom}function cu(t){t.stopImmediatePropagation()}function gr(t){t.preventDefault(),t.stopImmediatePropagation()}function q7(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function L7(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Hl(){return this.__zoom||ci}function B7(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function U7(){return navigator.maxTouchPoints||"ontouchstart"in this}function X7(t,n,a){var s=t.invertX(n[0][0])-a[0][0],l=t.invertX(n[1][0])-a[1][0],u=t.invertY(n[0][1])-a[0][1],c=t.invertY(n[1][1])-a[1][1];return t.translate(l>s?(s+l)/2:Math.min(0,s)||Math.max(0,l),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function xg(){var t=q7,n=L7,a=X7,s=B7,l=U7,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],p=250,d=n0,x=pe("start","zoom","end"),_,S,T,A=500,R=150,D=0,O=10;function F(dn){dn.property("__zoom",Hl).on("wheel.zoom",tn,{passive:!1}).on("mousedown.zoom",Ct).on("dblclick.zoom",Q).filter(l).on("touchstart.zoom",on).on("touchmove.zoom",gn).on("touchend.zoom touchcancel.zoom",In).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}F.transform=function(dn,ix,Cn,ax){var sx=dn.selection?dn.selection():dn;sx.property("__zoom",Hl),dn!==sx?W(dn,ix,Cn,ax):sx.interrupt().each(function(){J(this,arguments).event(ax).start().zoom(null,typeof ix=="function"?ix.apply(this,arguments):ix).end()})},F.scaleBy=function(dn,ix,Cn,ax){F.scaleTo(dn,function(){var sx=this.__zoom.k,lx=typeof ix=="function"?ix.apply(this,arguments):ix;return sx*lx},Cn,ax)},F.scaleTo=function(dn,ix,Cn,ax){F.transform(dn,function(){var sx=n.apply(this,arguments),lx=this.__zoom,ox=Cn==null?Z(sx):typeof Cn=="function"?Cn.apply(this,arguments):Cn,hx=lx.invert(ox),_x=typeof ix=="function"?ix.apply(this,arguments):ix;return a(j(z(lx,_x),ox,hx),sx,c)},Cn,ax)},F.translateBy=function(dn,ix,Cn,ax){F.transform(dn,function(){return a(this.__zoom.translate(typeof ix=="function"?ix.apply(this,arguments):ix,typeof Cn=="function"?Cn.apply(this,arguments):Cn),n.apply(this,arguments),c)},null,ax)},F.translateTo=function(dn,ix,Cn,ax,sx){F.transform(dn,function(){var lx=n.apply(this,arguments),ox=this.__zoom,hx=ax==null?Z(lx):typeof ax=="function"?ax.apply(this,arguments):ax;return a(ci.translate(hx[0],hx[1]).scale(ox.k).translate(typeof ix=="function"?-ix.apply(this,arguments):-ix,typeof Cn=="function"?-Cn.apply(this,arguments):-Cn),lx,c)},ax,sx)};function z(dn,ix){return ix=Math.max(u[0],Math.min(u[1],ix)),ix===dn.k?dn:new ht(ix,dn.x,dn.y)}function j(dn,ix,Cn){var ax=ix[0]-Cn[0]*dn.k,sx=ix[1]-Cn[1]*dn.k;return ax===dn.x&&sx===dn.y?dn:new ht(dn.k,ax,sx)}function Z(dn){return[(+dn[0][0]+ +dn[1][0])/2,(+dn[0][1]+ +dn[1][1])/2]}function W(dn,ix,Cn,ax){dn.on("start.zoom",function(){J(this,arguments).event(ax).start()}).on("interrupt.zoom end.zoom",function(){J(this,arguments).event(ax).end()}).tween("zoom",function(){var sx=this,lx=arguments,ox=J(sx,lx).event(ax),hx=n.apply(sx,lx),_x=Cn==null?Z(hx):typeof Cn=="function"?Cn.apply(sx,lx):Cn,ux=Math.max(hx[1][0]-hx[0][0],hx[1][1]-hx[0][1]),px=sx.__zoom,dx=typeof ix=="function"?ix.apply(sx,lx):ix,mx=d(px.invert(_x).concat(ux/px.k),dx.invert(_x).concat(ux/dx.k));return function(gx){if(gx===1)gx=dx;else{var Sx=mx(gx),Ex=ux/Sx[2];gx=new ht(Ex,_x[0]-Sx[0]*Ex,_x[1]-Sx[1]*Ex)}ox.zoom(null,gx)}})}function J(dn,ix,Cn){return!Cn&&dn.__zooming||new en(dn,ix)}function en(dn,ix){this.that=dn,this.args=ix,this.active=0,this.sourceEvent=null,this.extent=n.apply(dn,ix),this.taps=0}en.prototype={event:function(dn){return dn&&(this.sourceEvent=dn),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(dn,ix){return this.mouse&&dn!=="mouse"&&(this.mouse[1]=ix.invert(this.mouse[0])),this.touch0&&dn!=="touch"&&(this.touch0[1]=ix.invert(this.touch0[0])),this.touch1&&dn!=="touch"&&(this.touch1[1]=ix.invert(this.touch1[0])),this.that.__zoom=ix,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(dn){var ix=X(this.that).datum();x.call(dn,this.that,new F7(dn,{sourceEvent:this.sourceEvent,target:F,transform:this.that.__zoom,dispatch:x}),ix)}};function tn(dn,...ix){if(!t.apply(this,arguments))return;var Cn=J(this,ix).event(dn),ax=this.__zoom,sx=Math.max(u[0],Math.min(u[1],ax.k*Math.pow(2,s.apply(this,arguments)))),lx=wn(dn);if(Cn.wheel)(Cn.mouse[0][0]!==lx[0]||Cn.mouse[0][1]!==lx[1])&&(Cn.mouse[1]=ax.invert(Cn.mouse[0]=lx)),clearTimeout(Cn.wheel);else{if(ax.k===sx)return;Cn.mouse=[lx,ax.invert(lx)],re(this),Cn.start()}gr(dn),Cn.wheel=setTimeout(ox,R),Cn.zoom("mouse",a(j(z(ax,sx),Cn.mouse[0],Cn.mouse[1]),Cn.extent,c));function ox(){Cn.wheel=null,Cn.end()}}function Ct(dn,...ix){if(T||!t.apply(this,arguments))return;var Cn=dn.currentTarget,ax=J(this,ix,!0).event(dn),sx=X(dn.view).on("mousemove.zoom",_x,!0).on("mouseup.zoom",ux,!0),lx=wn(dn,Cn),ox=dn.clientX,hx=dn.clientY;Uo(dn.view),cu(dn),ax.mouse=[lx,this.__zoom.invert(lx)],re(this),ax.start();function _x(px){if(gr(px),!ax.moved){var dx=px.clientX-ox,mx=px.clientY-hx;ax.moved=dx*dx+mx*mx>D}ax.event(px).zoom("mouse",a(j(ax.that.__zoom,ax.mouse[0]=wn(px,Cn),ax.mouse[1]),ax.extent,c))}function ux(px){sx.on("mousemove.zoom mouseup.zoom",null),Xo(px.view,ax.moved),gr(px),ax.event(px).end()}}function Q(dn,...ix){if(t.apply(this,arguments)){var Cn=this.__zoom,ax=wn(dn.changedTouches?dn.changedTouches[0]:dn,this),sx=Cn.invert(ax),lx=Cn.k*(dn.shiftKey?.5:2),ox=a(j(z(Cn,lx),ax,sx),n.apply(this,ix),c);gr(dn),p>0?X(this).transition().duration(p).call(W,ox,ax,dn):X(this).call(F.transform,ox,ax,dn)}}function on(dn,...ix){if(t.apply(this,arguments)){var Cn=dn.touches,ax=Cn.length,sx=J(this,ix,dn.changedTouches.length===ax).event(dn),lx,ox,hx,_x;for(cu(dn),ox=0;ox<ax;++ox)hx=Cn[ox],_x=wn(hx,this),_x=[_x,this.__zoom.invert(_x),hx.identifier],sx.touch0?!sx.touch1&&sx.touch0[2]!==_x[2]&&(sx.touch1=_x,sx.taps=0):(sx.touch0=_x,lx=!0,sx.taps=1+!!_);_&&(_=clearTimeout(_)),lx&&(sx.taps<2&&(S=_x[0],_=setTimeout(function(){_=null},A)),re(this),sx.start())}}function gn(dn,...ix){if(this.__zooming){var Cn=J(this,ix).event(dn),ax=dn.changedTouches,sx=ax.length,lx,ox,hx,_x;for(gr(dn),lx=0;lx<sx;++lx)ox=ax[lx],hx=wn(ox,this),Cn.touch0&&Cn.touch0[2]===ox.identifier?Cn.touch0[0]=hx:Cn.touch1&&Cn.touch1[2]===ox.identifier&&(Cn.touch1[0]=hx);if(ox=Cn.that.__zoom,Cn.touch1){var ux=Cn.touch0[0],px=Cn.touch0[1],dx=Cn.touch1[0],mx=Cn.touch1[1],gx=(gx=dx[0]-ux[0])*gx+(gx=dx[1]-ux[1])*gx,Sx=(Sx=mx[0]-px[0])*Sx+(Sx=mx[1]-px[1])*Sx;ox=z(ox,Math.sqrt(gx/Sx)),hx=[(ux[0]+dx[0])/2,(ux[1]+dx[1])/2],_x=[(px[0]+mx[0])/2,(px[1]+mx[1])/2]}else if(Cn.touch0)hx=Cn.touch0[0],_x=Cn.touch0[1];else return;Cn.zoom("touch",a(j(ox,hx,_x),Cn.extent,c))}}function In(dn,...ix){if(this.__zooming){var Cn=J(this,ix).event(dn),ax=dn.changedTouches,sx=ax.length,lx,ox;for(cu(dn),T&&clearTimeout(T),T=setTimeout(function(){T=null},A),lx=0;lx<sx;++lx)ox=ax[lx],Cn.touch0&&Cn.touch0[2]===ox.identifier?delete Cn.touch0:Cn.touch1&&Cn.touch1[2]===ox.identifier&&delete Cn.touch1;if(Cn.touch1&&!Cn.touch0&&(Cn.touch0=Cn.touch1,delete Cn.touch1),Cn.touch0)Cn.touch0[1]=this.__zoom.invert(Cn.touch0[0]);else if(Cn.end(),Cn.taps===2&&(ox=wn(ox,this),Math.hypot(S[0]-ox[0],S[1]-ox[1])<O)){var hx=X(this).on("dblclick.zoom");hx&&hx.apply(this,arguments)}}}return F.wheelDelta=function(dn){return arguments.length?(s=typeof dn=="function"?dn:Ri(+dn),F):s},F.filter=function(dn){return arguments.length?(t=typeof dn=="function"?dn:Ri(!!dn),F):t},F.touchable=function(dn){return arguments.length?(l=typeof dn=="function"?dn:Ri(!!dn),F):l},F.extent=function(dn){return arguments.length?(n=typeof dn=="function"?dn:Ri([[+dn[0][0],+dn[0][1]],[+dn[1][0],+dn[1][1]]]),F):n},F.scaleExtent=function(dn){return arguments.length?(u[0]=+dn[0],u[1]=+dn[1],F):[u[0],u[1]]},F.translateExtent=function(dn){return arguments.length?(c[0][0]=+dn[0][0],c[1][0]=+dn[1][0],c[0][1]=+dn[0][1],c[1][1]=+dn[1][1],F):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},F.constrain=function(dn){return arguments.length?(a=dn,F):a},F.duration=function(dn){return arguments.length?(p=+dn,F):p},F.interpolate=function(dn){return arguments.length?(d=dn,F):d},F.on=function(){var dn=x.on.apply(x,arguments);return dn===x?F:dn},F.clickDistance=function(dn){return arguments.length?(D=(dn=+dn)*dn,F):Math.sqrt(D)},F.tapDistance=function(dn){return arguments.length?(O=+dn,F):O},F}const H7=Object.freeze(Object.defineProperty({__proto__:null,Adder:bn,Delaunay:zf,FormatSpecifier:ra,InternMap:Cr,InternSet:ie,Node:he,Path:Jr,Voronoi:v0,ZoomTransform:ht,active:B_,arc:X4,area:Xd,areaRadial:Fl,ascending:hn,autoType:hb,axisBottom:Cp,axisLeft:Pp,axisRight:Ip,axisTop:Rp,bin:Nc,bisect:Ft,bisectCenter:Sg,bisectLeft:Ag,bisectRight:Ft,bisector:Oo,blob:pb,blur:Eg,blur2:Zl,blurImage:kg,brush:tv,brushSelection:K_,brushX:J_,brushY:nv,buffer:yb,chord:rv,chordDirected:ov,chordTranspose:iv,cluster:C3,color:qt,contourDensity:Rv,contours:Ru,count:Yo,create:pm,creator:Lo,cross:zg,csv:bb,csvFormat:tb,csvFormatBody:eb,csvFormatRow:ib,csvFormatRows:rb$1,csvFormatValue:ob,csvParse:w0,csvParseRows:nb,cubehelix:ut,cumsum:Og,curveBasis:l7,curveBasisClosed:h7,curveBasisOpen:d7,curveBumpX:Vd,curveBumpY:Gd,curveBundle:g7,curveCardinal:p7,curveCardinalClosed:m7,curveCardinalOpen:y7,curveCatmullRom:_7,curveCatmullRomClosed:v7,curveCatmullRomOpen:b7,curveLinear:ba,curveLinearClosed:w7,curveMonotoneX:x7,curveMonotoneY:M7,curveNatural:$7,curveStep:T7,curveStepAfter:S7,curveStepBefore:A7,descending:Vl,deviation:Jl,difference:vp,disjoint:bp,dispatch:pe,drag:Sh,dragDisable:Uo,dragEnable:Xo,dsv:vb,dsvFormat:na,easeBack:ns,easeBackIn:P_,easeBackInOut:ns,easeBackOut:D_,easeBounce:Br,easeBounceIn:I_,easeBounceInOut:C_,easeBounceOut:Br,easeCircle:Jc,easeCircleIn:x_,easeCircleInOut:Jc,easeCircleOut:M_,easeCubic:Au,easeCubicIn:g_,easeCubicInOut:Au,easeCubicOut:p_,easeElastic:ts,easeElasticIn:z_,easeElasticInOut:O_,easeElasticOut:ts,easeExp:Kc,easeExpIn:b_,easeExpInOut:Kc,easeExpOut:w_,easeLinear:l_,easePoly:Zc,easePolyIn:m_,easePolyInOut:Zc,easePolyOut:y_,easeQuad:Gc,easeQuadIn:h_,easeQuadInOut:Gc,easeQuadOut:d_,easeSin:Qc,easeSinIn:__,easeSinInOut:Qc,easeSinOut:v_,every:dp,extent:Sr,fcumsum:Fg,filter:pp,flatGroup:qg,flatRollup:Lg,forceCenter:Sb,forceCollide:jb,forceLink:Vb,forceManyBody:rw,forceRadial:iw,forceSimulation:ew,forceX:ow,forceY:aw,get format(){return ia},formatDefaultLocale:E0,formatLocale:S0,get formatPrefix(){return Ff},formatSpecifier:We,fsum:Yg,geoAlbers:h1,geoAlbersUsa:l3,geoArea:mw,geoAzimuthalEqualArea:h3,geoAzimuthalEqualAreaRaw:Gf,geoAzimuthalEquidistant:d3,geoAzimuthalEquidistantRaw:Zf,geoBounds:bw,geoCentroid:Aw,geoCircle:Sw,geoClipAntimeridian:Xu,geoClipCircle:Z0,geoClipExtent:Pw,geoClipRectangle:oa,geoConicConformal:p3,geoConicConformalRaw:p1,geoConicEqualArea:ko,geoConicEqualAreaRaw:l1,geoConicEquidistant:y3,geoConicEquidistantRaw:m1,geoContains:Lw,geoDistance:wo,geoEqualEarth:v3$1,geoEqualEarthRaw:Qf,geoEquirectangular:m3,geoEquirectangularRaw:Wr,geoGnomonic:b3,geoGnomonicRaw:Kf,geoGraticule:J0,geoGraticule10:Bw,geoIdentity:w3,geoInterpolate:Uw,geoLength:Q0,geoMercator:g3,geoMercatorRaw:ii,geoNaturalEarth1:x3,geoNaturalEarth1Raw:Jf,geoOrthographic:M3,geoOrthographicRaw:nc,geoPath:t3,geoProjection:vt,geoProjectionMutator:Wf,geoRotation:X0,geoStereographic:$3,geoStereographicRaw:tc,geoStream:it,geoTransform:e3,geoTransverseMercator:T3,geoTransverseMercatorRaw:ec,gray:Dm,greatest:sh,greatestIndex:up,group:rh,groupSort:Xg,groups:ih,hcl:no,hierarchy:rc,histogram:Nc,hsl:Qi,html:Tb,image:xb,index:Bg,indexes:Ug,interpolate:Ht,interpolateArray:Lm,interpolateBasis:Lh,interpolateBasisClosed:Bh,interpolateBlues:y4,interpolateBrBG:Z8,interpolateBuGn:o4,interpolateBuPu:a4,interpolateCividis:M4,interpolateCool:A4,interpolateCubehelix:ey,interpolateCubehelixDefault:$4,interpolateCubehelixLong:Go,interpolateDate:Vh,interpolateDiscrete:Xm,interpolateGnBu:u4,interpolateGreens:_4,interpolateGreys:v4,interpolateHcl:ny,interpolateHclLong:ty,interpolateHsl:Qm,interpolateHslLong:Km,interpolateHue:Hm,interpolateInferno:P4,interpolateLab:Jm,interpolateMagma:C4,interpolateNumber:Kn,interpolateNumberArray:Af,interpolateObject:Gh,interpolateOrRd:f4,interpolateOranges:x4,interpolatePRGn:Q8,interpolatePiYG:K8,interpolatePlasma:D4,interpolatePuBu:s4,interpolatePuBuGn:c4,interpolatePuOr:J8,interpolatePuRd:l4,interpolatePurples:b4,interpolateRainbow:S4,interpolateRdBu:n4,interpolateRdGy:t4,interpolateRdPu:h4,interpolateRdYlBu:e4,interpolateRdYlGn:r4,interpolateReds:w4,interpolateRgb:Fr,interpolateRgbBasis:Hh,interpolateRgbBasisClosed:qm,interpolateRound:Vo,interpolateSinebow:N4,interpolateSpectral:i4,interpolateString:Sf,interpolateTransformCss:Kh,interpolateTransformSvg:Jh,interpolateTurbo:R4,interpolateViridis:I4,interpolateWarm:T4,interpolateYlGn:g4,interpolateYlGnBu:d4,interpolateYlOrBr:p4,interpolateYlOrRd:m4,interpolateZoom:n0,interrupt:re,intersection:wp,interval:uy,isoFormat:N8,isoParse:I8,json:$b,lab:Ji,lch:zm,least:ap,leastIndex:dh,line:Mc,lineRadial:Yl,link:wa,linkHorizontal:J4,linkRadial:t7,linkVertical:n7,local:Th,map:mp,matcher:vf,max:Pr,maxIndex:pf,mean:Kg,median:Jg,medianIndex:np,merge:yf,min:Vi,minIndex:mf,mode:ep,namespace:Zr,namespaces:mu,nice:df,now:Kr,pack:c6,packEnclose:r6,packSiblings:u6,pairs:rp,partition:s6,path:Jo,pathRound:fv,permute:ch,pie:V4,piecewise:i0,pointRadial:Ar,pointer:wn,pointers:ym,polygonArea:A6,polygonCentroid:S6,polygonContains:R6,polygonHull:N6,polygonLength:I6,precisionFixed:k0,precisionPrefix:N0,precisionRound:R0,quadtree:ea,quantile:Dr,quantileIndex:hh,quantileSorted:lh,quantize:ry,quickselect:Fo,radialArea:Fl,radialLine:Yl,randomBates:z6,randomBernoulli:F6,randomBeta:k1,randomBinomial:N1,randomCauchy:L6,randomExponential:O6,randomGamma:ac,randomGeometric:E1,randomInt:P6,randomIrwinHall:S1,randomLcg:j6,randomLogNormal:D6,randomLogistic:B6,randomNormal:oc,randomPareto:Y6,randomPoisson:U6,randomUniform:C6,randomWeibull:q6,range:zt,rank:op,reduce:yp,reverse:_p,rgb:Ue,ribbon:mv,ribbonArrow:yv,rollup:ah,rollups:uh,scaleBand:fc,scaleDiverging:dd,scaleDivergingLog:gd,scaleDivergingPow:bc,scaleDivergingSqrt:Y8,scaleDivergingSymlog:pd,scaleIdentity:P1,scaleImplicit:of,scaleLinear:C1,scaleLog:z1,scaleOrdinal:uc,scalePoint:W6,scalePow:dc,scaleQuantile:F1,scaleQuantize:q1,scaleRadial:Y1,scaleSequential:cd,scaleSequentialLog:sd,scaleSequentialPow:vc,scaleSequentialQuantile:hd,scaleSequentialSqrt:O8,scaleSequentialSymlog:ld,scaleSqrt:o5,scaleSymlog:O1,scaleThreshold:L1,scaleTime:D8,scaleUtc:z8,scan:fp,schemeAccent:q8,schemeBlues:Od,schemeBrBG:md,schemeBuGn:Td,schemeBuPu:Ad,schemeCategory10:F8,schemeDark2:L8,schemeGnBu:Sd,schemeGreens:Yd,schemeGreys:Fd,schemeObservable10:B8,schemeOrRd:Ed,schemeOranges:Bd,schemePRGn:yd,schemePaired:U8,schemePastel1:X8,schemePastel2:H8,schemePiYG:_d,schemePuBu:Nd,schemePuBuGn:kd,schemePuOr:vd,schemePuRd:Rd,schemePurples:qd,schemeRdBu:bd,schemeRdGy:wd,schemeRdPu:Id,schemeRdYlBu:xd,schemeRdYlGn:Md,schemeReds:Ld,schemeSet1:j8,schemeSet2:W8,schemeSet3:V8,schemeSpectral:$d,schemeTableau10:G8,schemeYlGn:Pd,schemeYlGnBu:Cd,schemeYlOrBr:Dd,schemeYlOrRd:zd,select:X,selectAll:_m,selection:me,selector:Bo,selectorAll:_f,shuffle:cp,shuffler:gh,some:gp,sort:du,stack:N7,stackOffsetDiverging:I7,stackOffsetExpand:R7,stackOffsetNone:nr,stackOffsetSilhouette:C7,stackOffsetWiggle:P7,stackOrderAppearance:vg,stackOrderAscending:bg,stackOrderDescending:z7,stackOrderInsideOut:O7,stackOrderNone:tr,stackOrderReverse:Y7,stratify:g6,style:ue,subset:Mp,sum:sp,superset:mh,svg:Ab,symbol:s7,symbolAsterisk:Zd,symbolCircle:xa,symbolCross:Qd,symbolDiamond:Jd,symbolDiamond2:ng,symbolPlus:tg,symbolSquare:eg,symbolSquare2:rg,symbolStar:og,symbolTimes:ff,symbolTriangle:ag,symbolTriangle2:ug,symbolWye:fg,symbolX:ff,symbols:ql,symbolsFill:ql,symbolsStroke:c7,text:ta,thresholdFreedmanDiaconis:Zg,thresholdScott:Qg,thresholdSturges:gf,tickFormat:I1,tickIncrement:ae,tickStep:Wi,ticks:oe,timeDay:or,timeDays:l5,get timeFormat(){return mc},timeFormatDefaultLocale:ud,timeFormatLocale:td,timeFriday:X1,timeFridays:_5,timeHour:la,timeHours:c5,timeInterval:_n,timeMillisecond:Qe,timeMilliseconds:wl,timeMinute:ca,timeMinutes:u5,timeMonday:Vr,timeMondays:g5,timeMonth:da,timeMonths:A5,get timeParse(){return ad},timeSaturday:H1,timeSaturdays:v5,timeSecond:Et,timeSeconds:Ml,timeSunday:Ke,timeSundays:$l,timeThursday:de,timeThursdays:y5,timeTickInterval:nd,timeTicks:J1,timeTuesday:B1,timeTuesdays:p5,timeWednesday:U1,timeWednesdays:m5,timeWeek:Ke,timeWeeks:$l,timeYear:mt,timeYears:E5,timeout:xu,timer:Qo,timerFlush:u0,transition:l0,transpose:ph,tree:w6,treemap:x6,treemapBinary:M6,treemapDice:oi,treemapResquarify:T6,treemapSlice:ua,treemapSliceDice:$6,treemapSquarify:A1,tsv:wb,tsvFormat:ub,tsvFormatBody:fb,tsvFormatRow:sb,tsvFormatRows:cb,tsvFormatValue:lb$1,tsvParse:x0,tsvParseRows:ab,union:$p,unixDay:pc,unixDays:d5,utcDay:ui,utcDays:h5,get utcFormat(){return pa},utcFriday:V1,utcFridays:$5,utcHour:ha,utcHours:s5,utcMillisecond:Qe,utcMilliseconds:wl,utcMinute:sa,utcMinutes:f5,utcMonday:Gr,utcMondays:b5,utcMonth:ga,utcMonths:S5,get utcParse(){return yc},utcSaturday:G1,utcSaturdays:T5,utcSecond:Et,utcSeconds:Ml,utcSunday:Je,utcSundays:Tl,utcThursday:ge,utcThursdays:M5,utcTickInterval:K1,utcTicks:Q1,utcTuesday:j1,utcTuesdays:w5,utcWednesday:W1,utcWednesdays:x5,utcWeek:Je,utcWeeks:Tl,utcYear:yt,utcYears:k5,variance:Kl,window:bf,xml:$0,zip:hp,zoom:xg,zoomIdentity:ci,zoomTransform:Pe},Symbol.toStringTag,{value:"Module"}));function kc(t){const n=t.attr("transform"),a=n&&n.match(/translate\(([^,]+),\s*([^)]+)\)/);return a?[parseFloat(a[1]),parseFloat(a[2])]:[0,0]}function Ta(t){const n=t&&t.match(/rotate\(([^)]+)\)/);return n?parseFloat(n[1]):0}function Mg(t,n,a){const s=Math.sqrt(t*t+n*n),l=Math.atan2(n,t),u=s*Math.sin(l+a*Math.PI/180);return[s*Math.cos(l+a*Math.PI/180),u]}function cf(t,n,a,s,l){const[u,c]=[s.shapes[n].x,s.shapes[n].y];var p=s.shapes[n].connectors[a][0],d=s.shapes[n].connectors[a][1];const x=t.attr("transform"),_=x?Ta(x):s.shapes[n].rotation!=null?s.shapes[n].rotation:0,[S,T]=Mg(p,d,_);return l([u+S,c+T])}const pr={gridSize:16,width:2432,height:1792,defaultZoom:1,maxZoom:2};function j7(t){t.shapes||(t.shapes=[]),t.wires||(t.wires=[]),t.settings||(t.settings={});for(const n in pr)if(t.settings[n]===void 0&&(t.settings[n]=pr[n]),typeof pr[n]=="object")for(const a in pr[n])t.settings[n][a]===void 0&&(t.settings[n][a]=pr[n][a]);return t}function zo(t,n,a,s,l,u,c){var p,d=10,x=[];const _=s.select("path");var S=[];{const z=Jo();z.moveTo(...n[0]),S.push(n[0]);var T,A,R,D=n;for(p=1;p<D.length;p++)if(T=D[p-1],A=D[p],T[0]==A[0]||T[1]==A[1])S.push(A);else{var O=a([(A[0]-T[0])/2,0])[0];S.push([T[0]+O,T[1]]),S.push([T[0]+O,A[1]]),S.push(A)}for(p=1;p<S.length-1;p++)T=S[p-1],R=S[p],A=S[p+1],T[0]==R[0]&&R[0]==A[0]||T[1]==R[1]&&R[1]==A[1]?(S.splice(p,1),p--):x.push([S[p][0],S[p][1]]);S.map(j=>z.lineTo(j[0],j[1])),_.attr("d",z.toString())}if(s.selectAll(".visiojs_elbow").remove(),l)for(var F=0;F<x.length;F++){T=x[F];const z=F,j=s.append("rect").attr("class","visiojs_elbow").attr("x",T[0]-d/2).attr("y",T[1]-d/2).attr("width",d).attr("height",d).attr("fill","url(#visiojs_elbow_fill)");u({elbowID:z,elbow:j,wireID:c,start:n[0],end:n[n.length-1],redrawWire:Z=>zo(t,Z,a,s,l,u,c)})}return x}function W7({d3:t,snapAndClipToGrid:n,elbSvg:a,wireID:s,initialState:l,elbowID:u,redrawWire:c,start:p,end:d,stateChanged:x}){var _={x:0,y:0},S=[],T={x:0,y:0};const A=t.drag().clickDistance(10).on("start",R=>{[T.x,T.y]=[R.x,R.y]}).on("drag",R=>{const D=n([R.x-T.x,R.y-T.y]),O={x:D[0],y:D[1]};if(O.x===_.x&&O.y===_.y)return;_={...O};const F=l.wires[s].points.map((j,Z)=>Z===u?[j[0]+O.x,j[1]+O.y]:(Z===u-1||Z===u+1)&&j[0]===l.wires[s].points[u][0]?[j[0]+O.x,j[1]]:(Z===u-1||Z===u+1)&&j[1]===l.wires[s].points[u][1]?[j[0],j[1]+O.y]:j);var z=[p,d];z.splice(1,0,...F),S=[...c(z)]}).on("end",()=>{l.wires[s].points=[...S],x(l)});a.call(A)}function V7(t,n,a){const s=document.elementFromPoint(t,n);if(s&&s.classList.contains("visiojs_connector")&&s.id!="visiojs_tempconn"){const l=s.id.split("_");a.shapeID=Number(l[1]),a.connectorID=Number(l[2])}else a.shapeID=null,a.connectorID=null}function jl(t,n,a,s,l,u,c,p,d,x,_){const S=x,T=[l,u],A=d([(t-S.x)/S.k,(n-S.y)/S.k]);var R=[T,...s,A];zo("manhattan",R,d,a,null,j=>moveElbow(j),_.wires.length);const D=X("#visiojs_tempconn");D.attr("cx",A[0]).attr("cy",A[1]).style("visibility","visible");const O=D.node().getBoundingClientRect(),F=O.left+5,z=O.top+5;V7(F,z,p),p.shapeID!=null?(c.classed("visiojs_good_wire",!0),c.classed("visiojs_bad_wire",!1)):(c.classed("visiojs_good_wire",!1),c.classed("visiojs_bad_wire",!0))}const sf=({prevEvent:t,group:n,shapeID:a,connectorID:s,x:l,y:u,endLine:c,wireMidPoints:p=[],lineGroup:d=null,line:x=null,snapAndClipToGrid:_,wireStart:S,svg:T,initialState:A,stateChanged:R})=>{t.stopPropagation(),t.preventDefault();var[D,O]=kc(n);const F=Ta(n.attr("transform")),[z,j]=Mg(l,u,F);[D,O]=_([D+z,O+j]),S.shapeID=a,S.connectorID=s;const Z={shapeID:null,connectorID:null},W=X("#visiojs_wires");d===null&&(d=W.insert("g")),x===null&&(x=d.append("path").attr("class","visiojs_wire"));var J=X("#visiojs_tempconn");J.empty()&&(J=d.append("circle").attr("r",10).attr("cx",0).attr("cy",0).attr("fill","url(#visiojs_connector_fill)").attr("class","visiojs_connector").attr("id","visiojs_tempconn").style("visibility","hidden")),x.attr("stroke-dasharray","5,5"),x.classed("visiojs_bad_wire",!0),T.on("touchmove.drawline",function(en){const tn=en.touches[0];en.preventDefault();const[Ct,Q]=wn(tn,T.node());jl(Ct,Q,d,p,D,O,x,Z,_,Pe(T.node()),A)}),T.on("mousemove.drawline",function(en){const[tn,Ct]=wn(en,T.node());jl(tn,Ct,d,p,D,O,x,Z,_,Pe(T.node()),A)}),X(window).on("keydown.endline",en=>{en.key==="Escape"&&(Z.shapeID=null,Z.connectorID=null,c(en,p,d,Z))}),T.on("dblclick.endline",en=>{c(en,p,d,Z)}),T.on("click.endline",en=>{if(Z.shapeID!=null&&!(Z.connectorID==s&&Z.shapeID==a))c(en,p,d,Z),R(A);else{const[tn,Ct]=wn(en,T.node()),Q=Pe(T.node()),on=_([(tn-Q.x)/Q.k,(Ct-Q.y)/Q.k]);p.push(on)}}),T.on("touchend.endline",en=>{const tn=en.changedTouches[0];if(console.log("touch endline"),Z.shapeID!=null)console.log("single click + hover"),c(en,p,d,Z),R(A);else{const[Ct,Q]=wn(tn,T.node()),on=Pe(T.node());p.push(_([(Ct-on.x)/on.k,(Q-on.y)/on.k])),console.log("add a point",p),J.on("touchstart",function(gn){console.log("cvb mousedown on connector",a,s),sf({prevEvent:gn,group:n,shapeID:a,connectorID:s,x:l,y:u,endLine:c,wireMidPoints:p,lineGroup:d,line:x,snapAndClipToGrid:_,wireStart:S,svg:T,initialState:A,stateChanged:R})})}})},G7={clickStartX:0,clickStartY:0,objStartX:0,objStartY:0,shapeDom:null,shapeID:null},Z7=(t,n,a,s,l)=>()=>Sh().clickDistance(10).on("start",function(u){t.clickStartX=u.x,t.clickStartY=u.y,t.shapeDom=X(this),t.shapeID=Number(t.shapeDom.attr("id").split("_")[1]),[t.objStartX,t.objStartY]=kc(t.shapeDom)}).on("end",function(u){const c=u.x-t.clickStartX,p=u.y-t.clickStartY,[d,x]=n([t.objStartX+c,t.objStartY+p]);d==t.objStartX&&x==t.objStartY||(s({shapeID:t.shapeID,save:!0}),l(a))}).on("drag",function(u){const c=u.x-t.clickStartX,p=u.y-t.clickStartY,[d,x]=n([t.objStartX+c,t.objStartY+p]);if(d==a.shapes[t.shapeID].x&&x==a.shapes[t.shapeID].y)return;const _={x:d-a.shapes[t.shapeID].x,y:x-a.shapes[t.shapeID].y},S=Ta(t.shapeDom.attr("transform"));t.shapeDom.attr("transform",`translate(${d}, ${x}) rotate(${S})`);const T=[];for(const A in a.shapes[t.shapeID].connectors)T.push(cf(t.shapeDom,t.shapeID,A,a,n));a.shapes[t.shapeID].x=d,a.shapes[t.shapeID].y=x,s({shapeID:t.shapeID,origXY:T,delta:_})});async function su({id:t,data:n,selectIt:a=!1,selected:s,wireStart:l,snapAndClipToGrid:u,initialState:c,redrawWireOnShape:p,stateChanged:d,drawWire:x}){const _=`shape_${t}`,S=X("#visiojs_shapes");var T=X(`#${_}`);if(n===null){T.remove();return}const A=n.image,R=n.x,D=n.y,O=n.connectors===void 0?[]:n.connectors,F=n.rotation,z=n.label,j=n.fixed===void 0?!1:n.fixed,Z=n.offset===void 0?[0,0]:n.offset;if(T.empty()){T=S.append("g").attr("id",_);const en=T.append("g");var W;if(A.endsWith(".svg")){const tn=(await $0(A)).documentElement;en.node().appendChild(tn),W=X(tn)}else W=en.append("image").attr("href",A);en.attr("transform",`translate(${Z[0]}, ${Z[1]})`),a&&s.push(_),Q7(T,t,Z,c,p,W,a,d),z&&T.append("text").attr("stroke","none").attr("x",z.x).attr("y",z.y).text(z.text).attr("class",`visiojs_label ${z.class}`);for(let tn=0;tn<O.length;tn++){const Ct=O[tn];K7({x:Ct[0],y:Ct[1],group:T,shapeID:t,connectorID:tn,wireStart:l,snapAndClipToGrid:u,initialState:c,drawWire:x,stateChanged:d})}j===!1&&(T.style("cursor","pointer"),T.on("mouseover",function(){l.shapeID===null&&(s.includes(_)||W.attr("opacity",.5))}),T.on("mouseout",function(){W.attr("opacity",1)}),T.on("click",function(tn){if(l.shapeID!==null)return;tn.stopPropagation(),W.attr("opacity",1);const Ct=s.indexOf(_);Ct===-1?(s.push(_),T.selectAll(".visiojs_hover_rect").style("opacity","1"),T.selectAll(".visiojs_hover_rotate").style("visibility",null)):(console.log("removing rect 3"),s.splice(Ct,1),T.selectAll(".visiojs_hover_rect").style("opacity","0"),T.selectAll(".visiojs_hover_rotate").style("visibility","hidden"),W.attr("opacity",.5))}),T.call(Z7(G7,u,c,p,d)()))}var J="";F&&(J=`rotate(${F})`),T.attr("transform",`translate(${R}, ${D}) ${J}`)}function Q7(t,n,a,s,l,u,c,p){const d=u.node().getBBox(),[x,_]=[d.x+d.width+a[0]+10,d.y+a[1]-10],S=t.append("rect").attr("x",d.x-5).attr("y",d.y-5).attr("width",d.width+10).attr("height",d.height+10).attr("class","visiojs_hover_rect").attr("transform",`translate(${a[0]}, ${a[1]})`);c||S.style("opacity","0");const T=t.append("g").attr("width","16").attr("height","16").attr("fill","currentColor").attr("viewBox","0 0 16 16").attr("transform",`translate(${x}, ${_})`).attr("class","visiojs_hover_rotate");c||T.style("visibility","hidden"),T.append("path").attr("fill-rule","evenodd").attr("d","M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"),T.append("path").attr("d","M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"),T.append("rect").attr("x","0").attr("y","0").attr("width","16").attr("height","16").attr("fill","transparent"),T.on("click",function(A){A.stopPropagation();const R=Ta(t.attr("transform")),[D,O]=kc(t),F=(R+90)%360;t.attr("transform",`translate(${D}, ${O}) rotate(${F})`),s.shapes[t.attr("id").split("_")[1]].rotation=F,l({shapeID:n,save:!0}),p(s)})}const K7=({x:t,y:n,group:a,shapeID:s,connectorID:l,wireStart:u,snapAndClipToGrid:c,initialState:p,drawWire:d,stateChanged:x})=>{const _=X("#visiojs_top");function S(T,A,R,D){if(u.shapeID!==null){if(T.stopPropagation(),X("#visiojs_tempconn").remove(),_.on("mousemove.drawline",null),_.on("dblclick.endline",null),_.on("click.endline",null),X(window).on(".endline",null),D.shapeID===null)R.remove();else if(D.shapeID==u.shapeID&&D.connectorID==u.connectorID)R.remove();else{const F={start:{...u},end:{...D},points:A};var O=p.wires.indexOf(null);O==-1?(O=p.wires.length,p.wires.push(F)):p.wires[O]=F,R.remove();const z=d(O);p.wires[O].points=z}u.shapeID=null,u.connectorID=null}}a.append("circle").attr("r",8).attr("cx",t).attr("cy",n).attr("fill","url(#visiojs_connector_fill)").attr("class","visiojs_connector").attr("id",`connector_${s}_${l}`).on("mouseover",function(){X(this).transition().duration(200).attr("r",16)}).on("mouseout",function(){X(this).transition().duration(200).attr("r",8)}).on("mousedown",function(T){X(this).transition().duration(200).attr("r",8),u.shapeID===null&&sf({prevEvent:T,group:a,shapeID:s,connectorID:l,x:t,y:n,endLine:S,snapAndClipToGrid:c,wireStart:u,svg:_,initialState:p,stateChanged:x})}).on("touchstart",function(T){X(this).transition().duration(200).attr("r",8),u.shapeID===null&&sf({prevEvent:T,group:a,shapeID:s,connectorID:l,x:t,y:n,endLine:S,snapAndClipToGrid:c,wireStart:u,svg:_,initialState:p,stateChanged:x})})};function J7(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lu,Wl;function nx(){return Wl||(Wl=1,lu=function t(n,a){if(n===a)return!0;if(n&&a&&typeof n=="object"&&typeof a=="object"){if(n.constructor!==a.constructor)return!1;var s,l,u;if(Array.isArray(n)){if(s=n.length,s!=a.length)return!1;for(l=s;l--!==0;)if(!t(n[l],a[l]))return!1;return!0}if(n.constructor===RegExp)return n.source===a.source&&n.flags===a.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===a.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===a.toString();if(u=Object.keys(n),s=u.length,s!==Object.keys(a).length)return!1;for(l=s;l--!==0;)if(!Object.prototype.hasOwnProperty.call(a,u[l]))return!1;for(l=s;l--!==0;){var c=u[l];if(!t(n[c],a[c]))return!1}return!0}return n!==n&&a!==a}),lu}var tx=nx();const Ii=J7(tx),rx=({initialState:t,stateChanged:n=()=>{}})=>{var a,s,l,u={connectorID:null,shapeID:null},c=[],p,d,x,_,S,T=!1;t=j7(t);const A={...t.settings};function R(Ct=!0){S=A.gridSize,a=X("#visiojs_top"),p=X("#visiojs_wholeThing"),p.empty()&&(p=a.append("g").attr("id","visiojs_wholeThing")),a.on("."),a.attr("tabindex",0),a.on("click",function(){O()}),a.on("dragover",function(ax){ax.preventDefault()}),a.on("drop",function(ax){ax.preventDefault();const sx=ax.dataTransfer.getData("application/json"),lx=JSON.parse(sx),ox=wn(ax,p.node()),[hx,_x]=ox;var[ux,px]=D([hx,_x]);J(lx,ux,px)}),X(window).on("keydown.delete",ax=>{(ax.key==="Backspace"||ax.key==="Delete")&&document.activeElement===a.node()&&(console.log("deleting"),en())}),X(window).on("resize",function(){R(!1)});const Q=a.node().getBoundingClientRect();s=Math.round(Q.width/S)*S,l=Math.round(Q.height/S)*S;var on=X("#visiojs_svgDefs");if(on.empty()){on=a.append("defs").attr("id","visiojs_svgDefs");const ax=on.append("linearGradient").attr("id","visiojs_connector_fill").attr("x1",0).attr("y1",1).attr("x2",0).attr("y2",0);ax.append("stop").attr("offset","0%").attr("stop-color","#4f6870"),ax.append("stop").attr("offset","100%").attr("stop-color","#678792");const sx=on.append("linearGradient").attr("id","visiojs_elbow_fill").attr("x1",0).attr("y1",1).attr("x2",0).attr("y2",0);sx.append("stop").attr("offset","0%").attr("stop-color","#cacaca"),sx.append("stop").attr("offset","100%").attr("stop-color","#fdfdfd")}j(p,A.width,A.height,S),d=X("#visiojs_wires"),d.empty()&&(d=p.append("g").attr("id","visiojs_wires")),x=X("#visiojs_shapes"),x.empty()&&(x=p.append("g").attr("id","visiojs_shapes"));const gn=Math.min(s/A.width,l/A.height),In=xg().scaleExtent([gn,A.maxZoom]).clickDistance(10).translateExtent([[-A.width/2,-A.height/2],[A.width/2,A.height/2]]).on("zoom",ax=>p.attr("transform",ax.transform)),dn=ci.translate(s/2,l/2).scale(A.defaultZoom);a.call(In.transform,dn),z(),Ct&&n(t);const ix=100,Cn=X("#visiojs_toggle_button").empty()?a.append("foreignObject").attr("y",5).attr("width",ix).attr("height",50).attr("id","visiojs_toggle_button_foreign").append("xhtml:body").style("margin","0px").style("background","transparent").append("button").attr("id","visiojs_toggle_button").text("Enable Zoom"):X("#visiojs_toggle_button");X("#visiojs_toggle_button_foreign").attr("x",Q.width-ix-3),Cn.on("click",function(){T?(a.on(".zoom",null),Cn.text("Enable Zoom"),Cn.attr("class",null),T=!1):(a.call(In).on("dblclick.zoom",null),Cn.text("Disable Zoom"),Cn.attr("class","visiojs_toggle_button_active"),T=!0)})}function D(Ct,Q=!0){return Q?[Math.min(Math.max(Math.round(Ct[0]/S)*S,-A.width/2),A.width/2),Math.min(Math.max(Math.round(Ct[1]/S)*S,-A.height/2),A.height/2)]:[Math.round(Ct[0]/S)*S,Math.round(Ct[1]/S)*S]}function O(){p.selectAll(".visiojs_hover_rect").style("opacity","0"),p.selectAll(".visiojs_hover_rotate").style("visibility","hidden"),p.selectAll(".visiojs_selected_wire").classed("visiojs_selected_wire",!1),p.selectAll(".visiojs_selected_connector").classed("visiojs_selected_connector",!1),p.selectAll(".visiojs_elbow").remove(),c.length=0,X("#visiojs_shapes").style("pointer-events","auto").style("opacity","1.0")}function F(Ct){const Q=d;var on=t.wires[Ct];if(!on)return;var gn=X(`#shape_${on.start.shapeID}`);if(gn.empty()){console.log("ERROR - cannot find shapeID",on.start.shapeID);return}var In=X(`#shape_${on.end.shapeID}`);if(In.empty()){console.log("ERROR - cannot find shapeID",on.end.shapeID);return}const dn=`wire_${Ct}`;var ix=X(`#${dn}`),Cn;ix.empty()?(ix=Q.insert("g").attr("id",`wire_${Ct}`),Cn=ix.insert("path").attr("class","visiojs_wire")):Cn=ix.select("path");const ax=cf(gn,on.start.shapeID,on.start.connectorID,t,D),sx=cf(In,on.end.shapeID,on.end.connectorID,t,D),lx=[ax,...on.points,sx],ox=zo("manhattan",lx,D,ix,null,hx=>W(hx),Ct);return ix.on("click",function(hx){if(hx.stopPropagation(),u.shapeID!==null)return;var _x=p.select(`#connector_${on.start.shapeID}_${on.start.connectorID}`),ux=p.select(`#connector_${on.end.shapeID}_${on.end.connectorID}`);console.log("removing pointer events from shapes"),X("#visiojs_shapes").style("pointer-events","none").style("opacity","0.9");const px=[ax,...on.points,sx];zo("manhattan",px,D,ix,!0,mx=>W(mx),Ct),Cn.classed("visiojs_selected_wire",!0),ix.raise(),_x.classed("visiojs_selected_connector",!0),ux.classed("visiojs_selected_connector",!0);const dx=c.indexOf(dn);dx===-1?c.push(dn):(c.splice(dx,1),Cn.classed("visiojs_selected_wire",!1),_x.classed("visiojs_selected_connector",!1),ux.classed("visiojs_selected_connector",!1),ix.lower(),_.lower(),ix.selectAll(".visiojs_elbow").remove(),c.filter(mx=>mx.startsWith("wire")).length==0&&(console.log("re-enabling pointer events on shapes"),X("#visiojs_shapes").style("pointer-events","auto").style("opacity","1.0")))}),ox}function z(){for(let Ct=0;Ct<t.shapes.length;Ct++){const Q=t.shapes[Ct];Q&&su({id:Ct,data:Q,selected:c,wireStart:u,snapAndClipToGrid:D,initialState:t,redrawWireOnShape:Z,stateChanged:n,drawWire:F})}for(let Ct=0;Ct<t.wires.length;Ct++)F(Ct)}function j(Ct,Q,on,gn){if(!X("#visiojs_grid").empty())return;_=Ct.append("g").attr("id","visiojs_grid");const In=[];for(let dn=-Q/2;dn<Q/2;dn+=gn)In.push({x1:dn,y1:-on/2,x2:dn,y2:on/2});for(let dn=-on/2;dn<on/2;dn+=gn)In.push({x1:-Q/2,y1:dn,x2:Q/2,y2:dn});_.selectAll("line.grid-line").data(In).join("line").attr("class","visiojs_grid_line").attr("x1",dn=>dn.x1).attr("y1",dn=>dn.y1).attr("x2",dn=>dn.x2).attr("y2",dn=>dn.y2)}function Z({shapeID:Ct,save:Q=!1,origXY:on=[],delta:gn={}}){for(const dn in t.wires){if(!t.wires[dn])continue;const ix=t.wires[dn].start.shapeID==Ct,Cn=t.wires[dn].end.shapeID==Ct;var In=t.wires[dn].start.connectorID;if(Cn&&(In=t.wires[dn].end.connectorID),ix||Cn){if(on.length>0&&t.wires[dn].points.length>0){const sx=on[In],lx=t.wires[dn].points[0],ox=t.wires[dn].points[t.wires[dn].points.length-1];ix?sx[0]==lx[0]?lx[0]+=gn.x:lx[1]+=gn.y:Cn&&(sx[0]==ox[0]?ox[0]+=gn.x:ox[1]+=gn.y)}const ax=F(dn);Q&&(t.wires[dn].points=ax)}}}const W=Ct=>{W7({d3:H7,snapAndClipToGrid:D,elbSvg:Ct.elbow,wireID:Ct.wireID,initialState:t,elbowID:Ct.elbowID,redrawWire:Ct.redrawWire,start:Ct.start,end:Ct.end,stateChanged:n})};function J(Ct,Q=null,on=null){O(),a.node().focus();const gn=JSON.parse(JSON.stringify(Ct));Q!==null&&(gn.x=Q),on!==null&&(gn.y=on);var In=t.shapes.indexOf(null);In==-1?(In=t.shapes.length,t.shapes.push(gn)):t.shapes[In]=gn,n(t),su({id:In,data:gn,selected:c,selectIt:!0,wireStart:u,snapAndClipToGrid:D,initialState:t,redrawWireOnShape:Z,stateChanged:n,drawWire:F})}function en(){for(const Ct of c){X(`#${Ct}`).remove();const Q=Ct.split("_");Q[0]=="shape"?(t.shapes[Q[1]]=null,t.wires=t.wires.map((on,gn)=>on&&(on.start.shapeID==Q[1]||on.end.shapeID==Q[1]?(X(`#wire_${gn}`).remove(),null):on))):Q[0]=="wire"&&(t.wires[Q[1]]=null)}n(t),O()}function tn(Ct){O();const Q=JSON.parse(JSON.stringify(t));if(t.shapes=JSON.parse(JSON.stringify(Ct.shapes)),t.wires=JSON.parse(JSON.stringify(Ct.wires)),Ii(Q.shapes,t.shapes))if(Ii(Q.wires,t.wires))console.log("it's all the same");else{if(t.wires.length<Q.wires.length){X(`#wire_${Q.wires.length-1}`).remove();return}for(const gn in t.wires)Ii(Q.wires[gn],t.wires[gn])||F(gn)}else{console.log("shapes are different");var on=!1;if(t.shapes.length<Q.shapes.length){X(`#shape_${Q.shapes.length-1}`).remove();return}for(const gn in t.shapes)Ii(Q.shapes[gn],t.shapes[gn])||(console.log("delta in id ",gn),on=!0,su({id:gn,data:t.shapes[gn],selected:c,wireStart:u,snapAndClipToGrid:D,initialState:t,redrawWireOnShape:Z,stateChanged:n,drawWire:F}),Z({shapeID:gn}));if(on)return;console.log("ERROR - some shape change but not sure what was changed?")}}return{addShape:J,deleteSelected:en,redraw:tn,init:R}};function elementMapper(t){const n=t.image.split(".")[0],a=t.label?t.label.text:"";return t.image=="vin.svg"?{type:"vin",name:"vin"}:t.image=="iin.svg"?{type:"iin",name:"iin"}:t.image=="gnd.svg"?{type:"gnd",name:"gnd"}:{type:n,name:a}}function createNodeMap(t,n){var a=[];const s={},l={};var u=[];t.shapes.map(O=>{if(O!==null&&"connectors"in O){var F=elementMapper(O);s[F.name]={type:F.type,portConnections:Array(O.connectors.length).fill(!1)}}});var c,p,d,x=null,_=[];for(const O of t.wires){if(O==null)continue;const F=elementMapper(t.shapes[O.start.shapeID]),z=elementMapper(t.shapes[O.end.shapeID]);c={...F,port:O.start.connectorID},p={...z,port:O.end.connectorID},s[F.name].portConnections[O.start.connectorID]=!0,s[z.name].portConnections[O.end.connectorID]=!0,_.push([c,p])}var S;do{S=!1;e:for(d in _)for(const O in _[d]){const F=_[d][O];for(const z in _){if(z==d)continue;const j=_[z];for(const Z in j){const W=j[Z];if(F.name==W.name&&F.port==W.port){_[z]=[..._[z],..._[d]],_.splice(d,1),S=!0;break e}}}}}while(S);e:for(const O in _){const F=_[O];for(const z of F)if(z.type=="gnd"){_.splice(O,1);break e}}for(const O in _)for(let F=0;F<_[O].length;F++){const z=_[O][F];for(let j=F+1;j<_[O].length;j++){const Z=_[O][j];z.name==Z.name&&z.port==Z.port&&(_[O].splice(j,1),j--)}}a=_;for(const[O,F]of Object.entries(s))if(F.portConnections.includes(!1))for(const z in a)a[z]=a[z].filter(j=>j.name!=O);for(const O in a)for(const F of a[O])(F.type=="vin"||F.type=="iin")&&(x=O);if(x!==null){for(var T=[x],A=a[x].map(O=>O.name),R,D=0;D<A.length;D++)for(const O in a)if(!T.includes(O)){R=!1;for(const F of a[O])A.includes(F.name)&&(R||T.push(O),R=!0,A.push(...a[O].map(z=>z.name).filter(z=>!A.includes(z))))}u=T.map(O=>a[O]),u.forEach((O,F)=>{O.forEach(z=>{z.name in l||(l[z.name]={ports:Array(n[z.type].connectors.length).fill(null),type:z.type}),l[z.name].ports[z.port]=F})})}return{nodeMap:u,components:s,fullyConnectedComponents:l}}function r(t){var n,a,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(n=0;n<l;n++)t[n]&&(a=r(t[n]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}function clsx(){for(var t,n,a=0,s="",l=arguments.length;a<l;a++)(t=arguments[a])&&(n=r(t))&&(s&&(s+=" "),s+=n);return s}function resolveProps(t,n){const a={...n};for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const l=s;if(l==="components"||l==="slots")a[l]={...t[l],...a[l]};else if(l==="componentsProps"||l==="slotProps"){const u=t[l],c=n[l];if(!c)a[l]=u||{};else if(!u)a[l]=c;else{a[l]={...c};for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const d=p;a[l][d]=resolveProps(u[d],c[d])}}}else a[l]===void 0&&(a[l]=t[l])}return a}function composeClasses(t,n,a=void 0){const s={};for(const l in t){const u=t[l];let c="",p=!0;for(let d=0;d<u.length;d+=1){const x=u[d];x&&(c+=(p===!0?"":" ")+n(x),p=!1,a&&a[x]&&(c+=" "+a[x]))}s[l]=c}return s}function formatMuiErrorMessage(t,...n){const a=new URL(`https://mui.com/production-error/?code=${t}`);return n.forEach(s=>a.searchParams.append("args[]",s)),`Minified MUI error #${t}; visit ${a} for the full message.`}function clamp$1(t,n=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(n,Math.min(t,a))}function clampWrapper(t,n=0,a=1){return clamp$1(t,n,a)}function hexToRgb(t){t=t.slice(1);const n=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let a=t.match(n);return a&&a[0].length===1&&(a=a.map(s=>s+s)),a?`rgb${a.length===4?"a":""}(${a.map((s,l)=>l<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(t){if(t.type)return t;if(t.charAt(0)==="#")return decomposeColor(hexToRgb(t));const n=t.indexOf("("),a=t.substring(0,n);if(!["rgb","rgba","hsl","hsla","color"].includes(a))throw new Error(formatMuiErrorMessage(9,t));let s=t.substring(n+1,t.length-1),l;if(a==="color"){if(s=s.split(" "),l=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(l))throw new Error(formatMuiErrorMessage(10,l))}else s=s.split(",");return s=s.map(u=>parseFloat(u)),{type:a,values:s,colorSpace:l}}const colorChannel=t=>{const n=decomposeColor(t);return n.values.slice(0,3).map((a,s)=>n.type.includes("hsl")&&s!==0?`${a}%`:a).join(" ")},private_safeColorChannel=(t,n)=>{try{return colorChannel(t)}catch{return t}};function recomposeColor(t){const{type:n,colorSpace:a}=t;let{values:s}=t;return n.includes("rgb")?s=s.map((l,u)=>u<3?parseInt(l,10):l):n.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),n.includes("color")?s=`${a} ${s.join(" ")}`:s=`${s.join(", ")}`,`${n}(${s})`}function hslToRgb(t){t=decomposeColor(t);const{values:n}=t,a=n[0],s=n[1]/100,l=n[2]/100,u=s*Math.min(l,1-l),c=(x,_=(x+a/30)%12)=>l-u*Math.max(Math.min(_-3,9-_,1),-1);let p="rgb";const d=[Math.round(c(0)*255),Math.round(c(8)*255),Math.round(c(4)*255)];return t.type==="hsla"&&(p+="a",d.push(n[3])),recomposeColor({type:p,values:d})}function getLuminance(t){t=decomposeColor(t);let n=t.type==="hsl"||t.type==="hsla"?decomposeColor(hslToRgb(t)).values:t.values;return n=n.map(a=>(t.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*n[0]+.7152*n[1]+.0722*n[2]).toFixed(3))}function getContrastRatio(t,n){const a=getLuminance(t),s=getLuminance(n);return(Math.max(a,s)+.05)/(Math.min(a,s)+.05)}function alpha$1(t,n){return t=decomposeColor(t),n=clampWrapper(n),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${n}`:t.values[3]=n,recomposeColor(t)}function private_safeAlpha(t,n,a){try{return alpha$1(t,n)}catch{return t}}function darken(t,n){if(t=decomposeColor(t),n=clampWrapper(n),t.type.includes("hsl"))t.values[2]*=1-n;else if(t.type.includes("rgb")||t.type.includes("color"))for(let a=0;a<3;a+=1)t.values[a]*=1-n;return recomposeColor(t)}function private_safeDarken(t,n,a){try{return darken(t,n)}catch{return t}}function lighten(t,n){if(t=decomposeColor(t),n=clampWrapper(n),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*n;else if(t.type.includes("rgb"))for(let a=0;a<3;a+=1)t.values[a]+=(255-t.values[a])*n;else if(t.type.includes("color"))for(let a=0;a<3;a+=1)t.values[a]+=(1-t.values[a])*n;return recomposeColor(t)}function private_safeLighten(t,n,a){try{return lighten(t,n)}catch{return t}}function emphasize(t,n=.15){return getLuminance(t)>.5?darken(t,n):lighten(t,n)}function private_safeEmphasize(t,n,a){try{return emphasize(t,n)}catch{return t}}const defaultGenerator=t=>t,createClassNameGenerator=()=>{let t=defaultGenerator;return{configure(n){t=n},generate(n){return t(n)},reset(){t=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator();function capitalize(t){if(typeof t!="string")throw new Error(formatMuiErrorMessage(7));return t.charAt(0).toUpperCase()+t.slice(1)}function createChainedFunction(...t){return t.reduce((n,a)=>a==null?n:function(...l){n.apply(this,l),a.apply(this,l)},()=>{})}var reactIs$1={exports:{}},reactIs_production={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production;function requireReactIs_production(){if(hasRequiredReactIs_production)return reactIs_production;hasRequiredReactIs_production=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.view_transition"),A=Symbol.for("react.client.reference");function R(D){if(typeof D=="object"&&D!==null){var O=D.$$typeof;switch(O){case t:switch(D=D.type,D){case a:case l:case s:case d:case x:case T:return D;default:switch(D=D&&D.$$typeof,D){case c:case p:case S:case _:return D;case u:return D;default:return O}}case n:return O}}}return reactIs_production.ContextConsumer=u,reactIs_production.ContextProvider=c,reactIs_production.Element=t,reactIs_production.ForwardRef=p,reactIs_production.Fragment=a,reactIs_production.Lazy=S,reactIs_production.Memo=_,reactIs_production.Portal=n,reactIs_production.Profiler=l,reactIs_production.StrictMode=s,reactIs_production.Suspense=d,reactIs_production.SuspenseList=x,reactIs_production.isContextConsumer=function(D){return R(D)===u},reactIs_production.isContextProvider=function(D){return R(D)===c},reactIs_production.isElement=function(D){return typeof D=="object"&&D!==null&&D.$$typeof===t},reactIs_production.isForwardRef=function(D){return R(D)===p},reactIs_production.isFragment=function(D){return R(D)===a},reactIs_production.isLazy=function(D){return R(D)===S},reactIs_production.isMemo=function(D){return R(D)===_},reactIs_production.isPortal=function(D){return R(D)===n},reactIs_production.isProfiler=function(D){return R(D)===l},reactIs_production.isStrictMode=function(D){return R(D)===s},reactIs_production.isSuspense=function(D){return R(D)===d},reactIs_production.isSuspenseList=function(D){return R(D)===x},reactIs_production.isValidElementType=function(D){return typeof D=="string"||typeof D=="function"||D===a||D===l||D===s||D===d||D===x||typeof D=="object"&&D!==null&&(D.$$typeof===S||D.$$typeof===_||D.$$typeof===c||D.$$typeof===u||D.$$typeof===p||D.$$typeof===A||D.getModuleId!==void 0)},reactIs_production.typeOf=R,reactIs_production}var hasRequiredReactIs$1;function requireReactIs$1(){return hasRequiredReactIs$1||(hasRequiredReactIs$1=1,reactIs$1.exports=requireReactIs_production()),reactIs$1.exports}var reactIsExports=requireReactIs$1();function isPlainObject(t){if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function deepClone(t){if(reactExports.isValidElement(t)||reactIsExports.isValidElementType(t)||!isPlainObject(t))return t;const n={};return Object.keys(t).forEach(a=>{n[a]=deepClone(t[a])}),n}function deepmerge(t,n,a={clone:!0}){const s=a.clone?{...t}:t;return isPlainObject(t)&&isPlainObject(n)&&Object.keys(n).forEach(l=>{reactExports.isValidElement(n[l])||reactIsExports.isValidElementType(n[l])?s[l]=n[l]:isPlainObject(n[l])&&Object.prototype.hasOwnProperty.call(t,l)&&isPlainObject(t[l])?s[l]=deepmerge(t[l],n[l],a):a.clone?s[l]=isPlainObject(n[l])?deepClone(n[l]):n[l]:s[l]=n[l]}),s}function merge$1(t,n){return n?deepmerge(t,n,{clone:!1}):t}function sortContainerQueries(t,n){if(!t.containerQueries)return n;const a=Object.keys(n).filter(s=>s.startsWith("@container")).sort((s,l)=>{var c,p;const u=/min-width:\s*([0-9.]+)/;return+(((c=s.match(u))==null?void 0:c[1])||0)-+(((p=l.match(u))==null?void 0:p[1])||0)});return a.length?a.reduce((s,l)=>{const u=n[l];return delete s[l],s[l]=u,s},{...n}):n}function isCqShorthand(t,n){return n==="@"||n.startsWith("@")&&(t.some(a=>n.startsWith(`@${a}`))||!!n.match(/^@\d/))}function getContainerQuery(t,n){const a=n.match(/^@([^/]+)?\/?(.+)?$/);if(!a)return null;const[,s,l]=a,u=Number.isNaN(+s)?s||0:+s;return t.containerQueries(l).up(u)}function cssContainerQueries(t){const n=(u,c)=>u.replace("@media",c?`@container ${c}`:"@container");function a(u,c){u.up=(...p)=>n(t.breakpoints.up(...p),c),u.down=(...p)=>n(t.breakpoints.down(...p),c),u.between=(...p)=>n(t.breakpoints.between(...p),c),u.only=(...p)=>n(t.breakpoints.only(...p),c),u.not=(...p)=>{const d=n(t.breakpoints.not(...p),c);return d.includes("not all and")?d.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):d}}const s={},l=u=>(a(s,u),s);return a(l),{...t,containerQueries:l}}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${values$1[t]}px)`},defaultContainerQueries={containerQueries:t=>({up:n=>{let a=typeof n=="number"?n:values$1[n]||n;return typeof a=="number"&&(a=`${a}px`),t?`@container ${t} (min-width:${a})`:`@container (min-width:${a})`}})};function handleBreakpoints(t,n,a){const s=t.theme||{};if(Array.isArray(n)){const u=s.breakpoints||defaultBreakpoints;return n.reduce((c,p,d)=>(c[u.up(u.keys[d])]=a(n[d]),c),{})}if(typeof n=="object"){const u=s.breakpoints||defaultBreakpoints;return Object.keys(n).reduce((c,p)=>{if(isCqShorthand(u.keys,p)){const d=getContainerQuery(s.containerQueries?s:defaultContainerQueries,p);d&&(c[d]=a(n[p],p))}else if(Object.keys(u.values||values$1).includes(p)){const d=u.up(p);c[d]=a(n[p],p)}else{const d=p;c[d]=n[d]}return c},{})}return a(n)}function createEmptyBreakpointObject(t={}){var a;return((a=t.keys)==null?void 0:a.reduce((s,l)=>{const u=t.up(l);return s[u]={},s},{}))||{}}function removeUnusedBreakpoints(t,n){return t.reduce((a,s)=>{const l=a[s];return(!l||Object.keys(l).length===0)&&delete a[s],a},n)}function mergeBreakpointsInOrder(t,...n){const a=createEmptyBreakpointObject(t),s=[a,...n].reduce((l,u)=>deepmerge(l,u),{});return removeUnusedBreakpoints(Object.keys(a),s)}function computeBreakpointsBase(t,n){if(typeof t!="object")return{};const a={},s=Object.keys(n);return Array.isArray(t)?s.forEach((l,u)=>{u<t.length&&(a[l]=!0)}):s.forEach(l=>{t[l]!=null&&(a[l]=!0)}),a}function resolveBreakpointValues({values:t,breakpoints:n,base:a}){const s=a||computeBreakpointsBase(t,n),l=Object.keys(s);if(l.length===0)return t;let u;return l.reduce((c,p,d)=>(Array.isArray(t)?(c[p]=t[d]!=null?t[d]:t[u],u=d):typeof t=="object"?(c[p]=t[p]!=null?t[p]:t[u],u=p):c[p]=t,c),{})}function getPath(t,n,a=!0){if(!n||typeof n!="string")return null;if(t&&t.vars&&a){const s=`vars.${n}`.split(".").reduce((l,u)=>l&&l[u]?l[u]:null,t);if(s!=null)return s}return n.split(".").reduce((s,l)=>s&&s[l]!=null?s[l]:null,t)}function getStyleValue$1(t,n,a,s=a){let l;return typeof t=="function"?l=t(a):Array.isArray(t)?l=t[a]||s:l=getPath(t,a)||s,n&&(l=n(l,s,t)),l}function style$2(t){const{prop:n,cssProperty:a=t.prop,themeKey:s,transform:l}=t,u=c=>{if(c[n]==null)return null;const p=c[n],d=c.theme,x=getPath(d,s)||{};return handleBreakpoints(c,p,S=>{let T=getStyleValue$1(x,l,S);return S===T&&typeof S=="string"&&(T=getStyleValue$1(x,l,`${n}${S==="default"?"":capitalize(S)}`,S)),a===!1?T:{[a]:T}})};return u.propTypes={},u.filterProps=[n],u}function memoize$1(t){const n={};return a=>(n[a]===void 0&&(n[a]=t(a)),n[a])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize$1(t=>{if(t.length>2)if(aliases[t])t=aliases[t];else return[t];const[n,a]=t.split(""),s=properties[n],l=directions[a]||"";return Array.isArray(l)?l.map(u=>s+u):[s+l]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(t,n,a,s){const l=getPath(t,n,!0)??a;return typeof l=="number"||typeof l=="string"?u=>typeof u=="string"?u:typeof l=="string"?l.startsWith("var(")&&u===0?0:l.startsWith("var(")&&u===1?l:`calc(${u} * ${l})`:l*u:Array.isArray(l)?u=>{if(typeof u=="string")return u;const c=Math.abs(u),p=l[c];return u>=0?p:typeof p=="number"?-p:typeof p=="string"&&p.startsWith("var(")?`calc(-1 * ${p})`:`-${p}`}:typeof l=="function"?l:()=>{}}function createUnarySpacing(t){return createUnaryUnit(t,"spacing",8)}function getValue(t,n){return typeof n=="string"||n==null?n:t(n)}function getStyleFromPropValue(t,n){return a=>t.reduce((s,l)=>(s[l]=getValue(n,a),s),{})}function resolveCssProperty(t,n,a,s){if(!n.includes(a))return null;const l=getCssProperties(a),u=getStyleFromPropValue(l,s),c=t[a];return handleBreakpoints(t,c,u)}function style$1(t,n){const a=createUnarySpacing(t.theme);return Object.keys(t).map(s=>resolveCssProperty(t,n,s,a)).reduce(merge$1,{})}function margin(t){return style$1(t,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(t){return style$1(t,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function compose(...t){const n=t.reduce((s,l)=>(l.filterProps.forEach(u=>{s[u]=l}),s),{}),a=s=>Object.keys(s).reduce((l,u)=>n[u]?merge$1(l,n[u](s)):l,{});return a.propTypes={},a.filterProps=t.reduce((s,l)=>s.concat(l.filterProps),[]),a}function borderTransform(t){return typeof t!="number"?t:`${t}px solid`}function createBorderStyle(t,n){return style$2({prop:t,themeKey:"borders",transform:n})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const n=createUnaryUnit(t.theme,"shape.borderRadius",4),a=s=>({borderRadius:getValue(n,s)});return handleBreakpoints(t,t.borderRadius,a)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=t=>{if(t.gap!==void 0&&t.gap!==null){const n=createUnaryUnit(t.theme,"spacing",8),a=s=>({gap:getValue(n,s)});return handleBreakpoints(t,t.gap,a)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const n=createUnaryUnit(t.theme,"spacing",8),a=s=>({columnGap:getValue(n,s)});return handleBreakpoints(t,t.columnGap,a)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const n=createUnaryUnit(t.theme,"spacing",8),a=s=>({rowGap:getValue(n,s)});return handleBreakpoints(t,t.rowGap,a)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$2({prop:"gridColumn"}),gridRow=style$2({prop:"gridRow"}),gridAutoFlow=style$2({prop:"gridAutoFlow"}),gridAutoColumns=style$2({prop:"gridAutoColumns"}),gridAutoRows=style$2({prop:"gridAutoRows"}),gridTemplateColumns=style$2({prop:"gridTemplateColumns"}),gridTemplateRows=style$2({prop:"gridTemplateRows"}),gridTemplateAreas=style$2({prop:"gridTemplateAreas"}),gridArea=style$2({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(t,n){return n==="grey"?n:t}const color$1=style$2({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$2({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor$1=style$2({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color$1,bgcolor,backgroundColor$1);function sizingTransform(t){return t<=1&&t!==0?`${t*100}%`:t}const width=style$2({prop:"width",transform:sizingTransform}),maxWidth=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const n=a=>{var l,u,c,p,d;const s=((c=(u=(l=t.theme)==null?void 0:l.breakpoints)==null?void 0:u.values)==null?void 0:c[a])||values$1[a];return s?((d=(p=t.theme)==null?void 0:p.breakpoints)==null?void 0:d.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:sizingTransform(a)}};return handleBreakpoints(t,t.maxWidth,n)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$2({prop:"minWidth",transform:sizingTransform}),height=style$2({prop:"height",transform:sizingTransform}),maxHeight=style$2({prop:"maxHeight",transform:sizingTransform}),minHeight=style$2({prop:"minHeight",transform:sizingTransform});style$2({prop:"size",cssProperty:"width",transform:sizingTransform});style$2({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$2({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function objectsHaveSameKeys(...t){const n=t.reduce((s,l)=>s.concat(Object.keys(l)),[]),a=new Set(n);return t.every(s=>a.size===Object.keys(s).length)}function callIfFn(t,n){return typeof t=="function"?t(n):t}function unstable_createStyleFunctionSx(){function t(a,s,l,u){const c={[a]:s,theme:l},p=u[a];if(!p)return{[a]:s};const{cssProperty:d=a,themeKey:x,transform:_,style:S}=p;if(s==null)return null;if(x==="typography"&&s==="inherit")return{[a]:s};const T=getPath(l,x)||{};return S?S(c):handleBreakpoints(c,s,R=>{let D=getStyleValue$1(T,_,R);return R===D&&typeof R=="string"&&(D=getStyleValue$1(T,_,`${a}${R==="default"?"":capitalize(R)}`,R)),d===!1?D:{[d]:D}})}function n(a){const{sx:s,theme:l={}}=a||{};if(!s)return null;const u=l.unstable_sxConfig??defaultSxConfig;function c(p){let d=p;if(typeof p=="function")d=p(l);else if(typeof p!="object")return p;if(!d)return null;const x=createEmptyBreakpointObject(l.breakpoints),_=Object.keys(x);let S=x;return Object.keys(d).forEach(T=>{const A=callIfFn(d[T],l);if(A!=null)if(typeof A=="object")if(u[T])S=merge$1(S,t(T,A,l,u));else{const R=handleBreakpoints({theme:l},A,D=>({[T]:D}));objectsHaveSameKeys(R,A)?S[T]=n({sx:A,theme:l}):S=merge$1(S,R)}else S=merge$1(S,t(T,A,l,u))}),sortContainerQueries(l,removeUnusedBreakpoints(_,S))}return Array.isArray(s)?s.map(c):c(s)}return n}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const splitProps=t=>{var s;const n={systemProps:{},otherProps:{}},a=((s=t==null?void 0:t.theme)==null?void 0:s.unstable_sxConfig)??defaultSxConfig;return Object.keys(t).forEach(l=>{a[l]?n.systemProps[l]=t[l]:n.otherProps[l]=t[l]}),n};function extendSxProp$1(t){const{sx:n,...a}=t,{systemProps:s,otherProps:l}=splitProps(a);let u;return Array.isArray(n)?u=[s,...n]:typeof n=="function"?u=(...c)=>{const p=n(...c);return isPlainObject(p)?{...s,...p}:s}:u={...s,...n},{...l,sx:u}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)({}).hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},_extends.apply(null,arguments)}function sheetForTag(t){if(t.sheet)return t.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===t)return document.styleSheets[n]}function createStyleElement(t){var n=document.createElement("style");return n.setAttribute("data-emotion",t.key),t.nonce!==void 0&&n.setAttribute("nonce",t.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var StyleSheet=function(){function t(a){var s=this;this._insertTag=function(l){var u;s.tags.length===0?s.insertionPoint?u=s.insertionPoint.nextSibling:s.prepend?u=s.container.firstChild:u=s.before:u=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(l,u),s.tags.push(l)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var n=t.prototype;return n.hydrate=function(s){s.forEach(this._insertTag)},n.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var u=sheetForTag(l);try{u.insertRule(s,u.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(s));this.ctr++},n.flush=function(){this.tags.forEach(function(s){var l;return(l=s.parentNode)==null?void 0:l.removeChild(s)}),this.tags=[],this.ctr=0},t}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs$4=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash$2(t,n){return charat(t,0)^45?(((n<<2^charat(t,0))<<2^charat(t,1))<<2^charat(t,2))<<2^charat(t,3):0}function trim$2(t){return t.trim()}function match(t,n){return(t=n.exec(t))?t[0]:t}function replace(t,n,a){return t.replace(n,a)}function indexof(t,n){return t.indexOf(n)}function charat(t,n){return t.charCodeAt(n)|0}function substr(t,n,a){return t.slice(n,a)}function strlen(t){return t.length}function sizeof(t){return t.length}function append$1(t,n){return n.push(t),t}function combine(t,n){return t.map(n).join("")}var line=1,column=1,length$1=0,position$1=0,character=0,characters="";function node(t,n,a,s,l,u,c){return{value:t,root:n,parent:a,type:s,props:l,children:u,line,column,length:c,return:""}}function copy$2(t,n){return assign(node("",null,null,"",null,null,0),t,{length:-t.length},n)}function char(){return character}function prev(){return character=position$1>0?charat(characters,--position$1):0,column--,character===10&&(column=1,line--),character}function next(){return character=position$1<length$1?charat(characters,position$1++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position$1)}function caret(){return position$1}function slice$1(t,n){return substr(characters,t,n)}function token(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(t){return line=column=1,length$1=strlen(characters=t),position$1=0,[]}function dealloc(t){return characters="",t}function delimit(t){return trim$2(slice$1(position$1-1,delimiter(t===91?t+2:t===40?t+1:t)))}function whitespace(t){for(;(character=peek())&&character<33;)next();return token(t)>2||token(character)>3?"":" "}function escaping(t,n){for(;--n&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice$1(t,caret()+(n<6&&peek()==32&&next()==32))}function delimiter(t){for(;next();)switch(character){case t:return position$1;case 34:case 39:t!==34&&t!==39&&delimiter(character);break;case 40:t===41&&delimiter(t);break;case 92:next();break}return position$1}function commenter(t,n){for(;next()&&t+character!==57;)if(t+character===84&&peek()===47)break;return"/*"+slice$1(n,position$1-1)+"*"+from(t===47?t:next())}function identifier(t){for(;!token(peek());)next();return slice$1(t,position$1)}function compile(t){return dealloc(parse$1("",null,null,null,[""],t=alloc(t),0,[0],t))}function parse$1(t,n,a,s,l,u,c,p,d){for(var x=0,_=0,S=c,T=0,A=0,R=0,D=1,O=1,F=1,z=0,j="",Z=l,W=u,J=s,en=j;O;)switch(R=z,z=next()){case 40:if(R!=108&&charat(en,S-1)==58){indexof(en+=replace(delimit(z),"&","&\f"),"&\f")!=-1&&(F=-1);break}case 34:case 39:case 91:en+=delimit(z);break;case 9:case 10:case 13:case 32:en+=whitespace(R);break;case 92:en+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append$1(comment(commenter(next(),caret()),n,a),d);break;default:en+="/"}break;case 123*D:p[x++]=strlen(en)*F;case 125*D:case 59:case 0:switch(z){case 0:case 125:O=0;case 59+_:F==-1&&(en=replace(en,/\f/g,"")),A>0&&strlen(en)-S&&append$1(A>32?declaration(en+";",s,a,S-1):declaration(replace(en," ","")+";",s,a,S-2),d);break;case 59:en+=";";default:if(append$1(J=ruleset(en,n,a,x,_,l,p,j,Z=[],W=[],S),u),z===123)if(_===0)parse$1(en,n,J,J,Z,u,S,p,W);else switch(T===99&&charat(en,3)===110?100:T){case 100:case 108:case 109:case 115:parse$1(t,J,J,s&&append$1(ruleset(t,J,J,0,0,l,p,j,l,Z=[],S),W),l,W,S,p,s?Z:W);break;default:parse$1(en,J,J,J,[""],W,0,p,W)}}x=_=A=0,D=F=1,j=en="",S=c;break;case 58:S=1+strlen(en),A=R;default:if(D<1){if(z==123)--D;else if(z==125&&D++==0&&prev()==125)continue}switch(en+=from(z),z*D){case 38:F=_>0?1:(en+="\f",-1);break;case 44:p[x++]=(strlen(en)-1)*F,F=1;break;case 64:peek()===45&&(en+=delimit(next())),T=peek(),_=S=strlen(j=en+=identifier(caret())),z++;break;case 45:R===45&&strlen(en)==2&&(D=0)}}return u}function ruleset(t,n,a,s,l,u,c,p,d,x,_){for(var S=l-1,T=l===0?u:[""],A=sizeof(T),R=0,D=0,O=0;R<s;++R)for(var F=0,z=substr(t,S+1,S=abs$4(D=c[R])),j=t;F<A;++F)(j=trim$2(D>0?T[F]+" "+z:replace(z,/&\f/g,T[F])))&&(d[O++]=j);return node(t,n,a,l===0?RULESET:p,d,x,_)}function comment(t,n,a){return node(t,n,a,COMMENT,from(char()),substr(t,2,-2),0)}function declaration(t,n,a,s){return node(t,n,a,DECLARATION,substr(t,0,s),substr(t,s+1,-1),s)}function serialize(t,n){for(var a="",s=sizeof(t),l=0;l<s;l++)a+=n(t[l],l,t,n)||"";return a}function stringify$1(t,n,a,s){switch(t.type){case LAYER:if(t.children.length)break;case IMPORT:case DECLARATION:return t.return=t.return||t.value;case COMMENT:return"";case KEYFRAMES:return t.return=t.value+"{"+serialize(t.children,s)+"}";case RULESET:t.value=t.props.join(",")}return strlen(a=serialize(t.children,s))?t.return=t.value+"{"+a+"}":""}function middleware(t){var n=sizeof(t);return function(a,s,l,u){for(var c="",p=0;p<n;p++)c+=t[p](a,s,l,u)||"";return c}}function rulesheet(t){return function(n){n.root||(n=n.return)&&t(n)}}function memoize(t){var n=Object.create(null);return function(a){return n[a]===void 0&&(n[a]=t(a)),n[a]}}var identifierWithPointTracking=function(n,a,s){for(var l=0,u=0;l=u,u=peek(),l===38&&u===12&&(a[s]=1),!token(u);)next();return slice$1(n,position$1)},toRules=function(n,a){var s=-1,l=44;do switch(token(l)){case 0:l===38&&peek()===12&&(a[s]=1),n[s]+=identifierWithPointTracking(position$1-1,a,s);break;case 2:n[s]+=delimit(l);break;case 4:if(l===44){n[++s]=peek()===58?"&\f":"",a[s]=n[s].length;break}default:n[s]+=from(l)}while(l=next());return n},getRules=function(n,a){return dealloc(toRules(alloc(n),a))},fixedElements=new WeakMap,compat=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var a=n.value,s=n.parent,l=n.column===s.column&&n.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(n.props.length===1&&a.charCodeAt(0)!==58&&!fixedElements.get(s))&&!l){fixedElements.set(n,!0);for(var u=[],c=getRules(a,u),p=s.props,d=0,x=0;d<c.length;d++)for(var _=0;_<p.length;_++,x++)n.props[x]=u[d]?c[d].replace(/&\f/g,p[_]):p[_]+" "+c[d]}}},removeLabel=function(n){if(n.type==="decl"){var a=n.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(n.return="",n.value="")}};function prefix(t,n){switch(hash$2(t,n)){case 5103:return WEBKIT+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+t+MOZ+t+MS+t+t;case 6828:case 4268:return WEBKIT+t+MS+t+t;case 6165:return WEBKIT+t+MS+"flex-"+t+t;case 5187:return WEBKIT+t+replace(t,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+t;case 5443:return WEBKIT+t+MS+"flex-item-"+replace(t,/flex-|-self/,"")+t;case 4675:return WEBKIT+t+MS+"flex-line-pack"+replace(t,/align-content|flex-|-self/,"")+t;case 5548:return WEBKIT+t+MS+replace(t,"shrink","negative")+t;case 5292:return WEBKIT+t+MS+replace(t,"basis","preferred-size")+t;case 6060:return WEBKIT+"box-"+replace(t,"-grow","")+WEBKIT+t+MS+replace(t,"grow","positive")+t;case 4554:return WEBKIT+replace(t,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+t;case 6187:return replace(replace(replace(t,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),t,"")+t;case 5495:case 3959:return replace(t,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(t,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+t+t;case 4095:case 3583:case 4068:case 2532:return replace(t,/(.+)-inline(.+)/,WEBKIT+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(t)-1-n>6)switch(charat(t,n+1)){case 109:if(charat(t,n+4)!==45)break;case 102:return replace(t,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(t,n+3)==108?"$3":"$2-$3"))+t;case 115:return~indexof(t,"stretch")?prefix(replace(t,"stretch","fill-available"),n)+t:t}break;case 4949:if(charat(t,n+1)!==115)break;case 6444:switch(charat(t,strlen(t)-3-(~indexof(t,"!important")&&10))){case 107:return replace(t,":",":"+WEBKIT)+t;case 101:return replace(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(t,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+t}break;case 5936:switch(charat(t,n+11)){case 114:return WEBKIT+t+MS+replace(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return WEBKIT+t+MS+replace(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return WEBKIT+t+MS+replace(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return WEBKIT+t+MS+t+t}return t}var prefixer=function(n,a,s,l){if(n.length>-1&&!n.return)switch(n.type){case DECLARATION:n.return=prefix(n.value,n.length);break;case KEYFRAMES:return serialize([copy$2(n,{value:replace(n.value,"@","@"+WEBKIT)})],l);case RULESET:if(n.length)return combine(n.props,function(u){switch(match(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy$2(n,{props:[replace(u,/:(read-\w+)/,":"+MOZ+"$1")]})],l);case"::placeholder":return serialize([copy$2(n,{props:[replace(u,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy$2(n,{props:[replace(u,/:(plac\w+)/,":"+MOZ+"$1")]}),copy$2(n,{props:[replace(u,/:(plac\w+)/,MS+"input-$1")]})],l)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(n){var a=n.key;if(a==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(D){var O=D.getAttribute("data-emotion");O.indexOf(" ")!==-1&&(document.head.appendChild(D),D.setAttribute("data-s",""))})}var l=n.stylisPlugins||defaultStylisPlugins,u={},c,p=[];c=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(D){for(var O=D.getAttribute("data-emotion").split(" "),F=1;F<O.length;F++)u[O[F]]=!0;p.push(D)});var d,x=[compat,removeLabel];{var _,S=[stringify$1,rulesheet(function(D){_.insert(D)})],T=middleware(x.concat(l,S)),A=function(O){return serialize(compile(O),T)};d=function(O,F,z,j){_=z,A(O?O+"{"+F.styles+"}":F.styles),j&&(R.inserted[F.name]=!0)}}var R={key:a,sheet:new StyleSheet({key:a,container:c,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:u,registered:{},insert:d};return R.sheet.hydrate(p),R},reactIs={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var t=typeof Symbol=="function"&&Symbol.for,n=t?Symbol.for("react.element"):60103,a=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,l=t?Symbol.for("react.strict_mode"):60108,u=t?Symbol.for("react.profiler"):60114,c=t?Symbol.for("react.provider"):60109,p=t?Symbol.for("react.context"):60110,d=t?Symbol.for("react.async_mode"):60111,x=t?Symbol.for("react.concurrent_mode"):60111,_=t?Symbol.for("react.forward_ref"):60112,S=t?Symbol.for("react.suspense"):60113,T=t?Symbol.for("react.suspense_list"):60120,A=t?Symbol.for("react.memo"):60115,R=t?Symbol.for("react.lazy"):60116,D=t?Symbol.for("react.block"):60121,O=t?Symbol.for("react.fundamental"):60117,F=t?Symbol.for("react.responder"):60118,z=t?Symbol.for("react.scope"):60119;function j(W){if(typeof W=="object"&&W!==null){var J=W.$$typeof;switch(J){case n:switch(W=W.type,W){case d:case x:case s:case u:case l:case S:return W;default:switch(W=W&&W.$$typeof,W){case p:case _:case R:case A:case c:return W;default:return J}}case a:return J}}}function Z(W){return j(W)===x}return reactIs_production_min.AsyncMode=d,reactIs_production_min.ConcurrentMode=x,reactIs_production_min.ContextConsumer=p,reactIs_production_min.ContextProvider=c,reactIs_production_min.Element=n,reactIs_production_min.ForwardRef=_,reactIs_production_min.Fragment=s,reactIs_production_min.Lazy=R,reactIs_production_min.Memo=A,reactIs_production_min.Portal=a,reactIs_production_min.Profiler=u,reactIs_production_min.StrictMode=l,reactIs_production_min.Suspense=S,reactIs_production_min.isAsyncMode=function(W){return Z(W)||j(W)===d},reactIs_production_min.isConcurrentMode=Z,reactIs_production_min.isContextConsumer=function(W){return j(W)===p},reactIs_production_min.isContextProvider=function(W){return j(W)===c},reactIs_production_min.isElement=function(W){return typeof W=="object"&&W!==null&&W.$$typeof===n},reactIs_production_min.isForwardRef=function(W){return j(W)===_},reactIs_production_min.isFragment=function(W){return j(W)===s},reactIs_production_min.isLazy=function(W){return j(W)===R},reactIs_production_min.isMemo=function(W){return j(W)===A},reactIs_production_min.isPortal=function(W){return j(W)===a},reactIs_production_min.isProfiler=function(W){return j(W)===u},reactIs_production_min.isStrictMode=function(W){return j(W)===l},reactIs_production_min.isSuspense=function(W){return j(W)===S},reactIs_production_min.isValidElementType=function(W){return typeof W=="string"||typeof W=="function"||W===s||W===x||W===u||W===l||W===S||W===T||typeof W=="object"&&W!==null&&(W.$$typeof===R||W.$$typeof===A||W.$$typeof===c||W.$$typeof===p||W.$$typeof===_||W.$$typeof===O||W.$$typeof===F||W.$$typeof===z||W.$$typeof===D)},reactIs_production_min.typeOf=j,reactIs_production_min}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production_min()),reactIs.exports}var hoistNonReactStatics_cjs,hasRequiredHoistNonReactStatics_cjs;function requireHoistNonReactStatics_cjs(){if(hasRequiredHoistNonReactStatics_cjs)return hoistNonReactStatics_cjs;hasRequiredHoistNonReactStatics_cjs=1;var t=requireReactIs(),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};u[t.ForwardRef]=s,u[t.Memo]=l;function c(R){return t.isMemo(R)?l:u[R.$$typeof]||n}var p=Object.defineProperty,d=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,_=Object.getOwnPropertyDescriptor,S=Object.getPrototypeOf,T=Object.prototype;function A(R,D,O){if(typeof D!="string"){if(T){var F=S(D);F&&F!==T&&A(R,F,O)}var z=d(D);x&&(z=z.concat(x(D)));for(var j=c(R),Z=c(D),W=0;W<z.length;++W){var J=z[W];if(!a[J]&&!(O&&O[J])&&!(Z&&Z[J])&&!(j&&j[J])){var en=_(D,J);try{p(R,J,en)}catch{}}}}return R}return hoistNonReactStatics_cjs=A,hoistNonReactStatics_cjs}requireHoistNonReactStatics_cjs();var isBrowser=!0;function getRegisteredStyles(t,n,a){var s="";return a.split(" ").forEach(function(l){t[l]!==void 0?n.push(t[l]+";"):l&&(s+=l+" ")}),s}var registerStyles=function(n,a,s){var l=n.key+"-"+a.name;(s===!1||isBrowser===!1)&&n.registered[l]===void 0&&(n.registered[l]=a.styles)},insertStyles=function(n,a,s){registerStyles(n,a,s);var l=n.key+"-"+a.name;if(n.inserted[a.name]===void 0){var u=a;do n.insert(a===u?"."+l:"",u,n.sheet,!0),u=u.next;while(u!==void 0)}};function murmur2(t){for(var n=0,a,s=0,l=t.length;l>=4;++s,l-=4)a=t.charCodeAt(s)&255|(t.charCodeAt(++s)&255)<<8|(t.charCodeAt(++s)&255)<<16|(t.charCodeAt(++s)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,n=(a&65535)*1540483477+((a>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(l){case 3:n^=(t.charCodeAt(s+2)&255)<<16;case 2:n^=(t.charCodeAt(s+1)&255)<<8;case 1:n^=t.charCodeAt(s)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(n){return n.charCodeAt(1)===45},isProcessableValue=function(n){return n!=null&&typeof n!="boolean"},processStyleName=memoize(function(t){return isCustomProperty(t)?t:t.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(n,a){switch(n){case"animation":case"animationName":if(typeof a=="string")return a.replace(animationRegex,function(s,l,u){return cursor={name:l,styles:u,next:cursor},l})}return unitlessKeys[n]!==1&&!isCustomProperty(n)&&typeof a=="number"&&a!==0?a+"px":a};function handleInterpolation(t,n,a){if(a==null)return"";var s=a;if(s.__emotion_styles!==void 0)return s;switch(typeof a){case"boolean":return"";case"object":{var l=a;if(l.anim===1)return cursor={name:l.name,styles:l.styles,next:cursor},l.name;var u=a;if(u.styles!==void 0){var c=u.next;if(c!==void 0)for(;c!==void 0;)cursor={name:c.name,styles:c.styles,next:cursor},c=c.next;var p=u.styles+";";return p}return createStringFromObject(t,n,a)}case"function":{if(t!==void 0){var d=cursor,x=a(t);return cursor=d,handleInterpolation(t,n,x)}break}}var _=a;if(n==null)return _;var S=n[_];return S!==void 0?S:_}function createStringFromObject(t,n,a){var s="";if(Array.isArray(a))for(var l=0;l<a.length;l++)s+=handleInterpolation(t,n,a[l])+";";else for(var u in a){var c=a[u];if(typeof c!="object"){var p=c;n!=null&&n[p]!==void 0?s+=u+"{"+n[p]+"}":isProcessableValue(p)&&(s+=processStyleName(u)+":"+processStyleValue(u,p)+";")}else if(Array.isArray(c)&&typeof c[0]=="string"&&(n==null||n[c[0]]===void 0))for(var d=0;d<c.length;d++)isProcessableValue(c[d])&&(s+=processStyleName(u)+":"+processStyleValue(u,c[d])+";");else{var x=handleInterpolation(t,n,c);switch(u){case"animation":case"animationName":{s+=processStyleName(u)+":"+x+";";break}default:s+=u+"{"+x+"}"}}}return s}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor;function serializeStyles(t,n,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var s=!0,l="";cursor=void 0;var u=t[0];if(u==null||u.raw===void 0)s=!1,l+=handleInterpolation(a,n,u);else{var c=u;l+=c[0]}for(var p=1;p<t.length;p++)if(l+=handleInterpolation(a,n,t[p]),s){var d=u;l+=d[p]}labelPattern.lastIndex=0;for(var x="",_;(_=labelPattern.exec(l))!==null;)x+="-"+_[1];var S=murmur2(l)+x;return{name:S,styles:l,next:cursor}}var syncFallback=function(n){return n()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(n){return reactExports.forwardRef(function(a,s){var l=reactExports.useContext(EmotionCacheContext);return n(a,l,s)})},ThemeContext$1=reactExports.createContext({}),hasOwn$1={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(n,a){var s={};for(var l in a)hasOwn$1.call(a,l)&&(s[l]=a[l]);return s[typePropName]=n,s},Insertion$1=function(n){var a=n.cache,s=n.serialized,l=n.isStringTag;return registerStyles(a,s,l),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(a,s,l)}),null},Emotion=withEmotionCache(function(t,n,a){var s=t.css;typeof s=="string"&&n.registered[s]!==void 0&&(s=n.registered[s]);var l=t[typePropName],u=[s],c="";typeof t.className=="string"?c=getRegisteredStyles(n.registered,u,t.className):t.className!=null&&(c=t.className+" ");var p=serializeStyles(u,void 0,reactExports.useContext(ThemeContext$1));c+=n.key+"-"+p.name;var d={};for(var x in t)hasOwn$1.call(t,x)&&x!=="css"&&x!==typePropName&&(d[x]=t[x]);return d.className=c,a&&(d.ref=a),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:n,serialized:p,isStringTag:typeof l=="string"}),reactExports.createElement(l,d))}),Emotion$1=Emotion,jsx=function(n,a){var s=arguments;if(a==null||!hasOwn$1.call(a,"css"))return reactExports.createElement.apply(void 0,s);var l=s.length,u=new Array(l);u[0]=Emotion$1,u[1]=createEmotionProps(n,a);for(var c=2;c<l;c++)u[c]=s[c];return reactExports.createElement.apply(null,u)};(function(t){var n;n||(n=t.JSX||(t.JSX={}))})(jsx||(jsx={}));var Global=withEmotionCache(function(t,n){var a=t.styles,s=serializeStyles([a],void 0,reactExports.useContext(ThemeContext$1)),l=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var u=n.key+"-global",c=new n.sheet.constructor({key:u,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),p=!1,d=document.querySelector('style[data-emotion="'+u+" "+s.name+'"]');return n.sheet.tags.length&&(c.before=n.sheet.tags[0]),d!==null&&(p=!0,d.setAttribute("data-emotion",u),c.hydrate([d])),l.current=[c,p],function(){c.flush()}},[n]),useInsertionEffectWithLayoutFallback(function(){var u=l.current,c=u[0],p=u[1];if(p){u[1]=!1;return}if(s.next!==void 0&&insertStyles(n,s.next,!0),c.tags.length){var d=c.tags[c.tags.length-1].nextElementSibling;c.before=d,c.flush()}n.insert("",s,c,!1)},[n,s.name]),null});function css(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return serializeStyles(n)}function keyframes(){var t=css.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize(function(t){return reactPropsRegex.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(n){return n!=="theme"},getDefaultShouldForwardProp=function(n){return typeof n=="string"&&n.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(n,a,s){var l;if(a){var u=a.shouldForwardProp;l=n.__emotion_forwardProp&&u?function(c){return n.__emotion_forwardProp(c)&&u(c)}:u}return typeof l!="function"&&s&&(l=n.__emotion_forwardProp),l},Insertion=function(n){var a=n.cache,s=n.serialized,l=n.isStringTag;return registerStyles(a,s,l),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(a,s,l)}),null},createStyled$1=function t(n,a){var s=n.__emotion_real===n,l=s&&n.__emotion_base||n,u,c;a!==void 0&&(u=a.label,c=a.target);var p=composeShouldForwardProps(n,a,s),d=p||getDefaultShouldForwardProp(l),x=!d("as");return function(){var _=arguments,S=s&&n.__emotion_styles!==void 0?n.__emotion_styles.slice(0):[];if(u!==void 0&&S.push("label:"+u+";"),_[0]==null||_[0].raw===void 0)S.push.apply(S,_);else{var T=_[0];S.push(T[0]);for(var A=_.length,R=1;R<A;R++)S.push(_[R],T[R])}var D=withEmotionCache(function(O,F,z){var j=x&&O.as||l,Z="",W=[],J=O;if(O.theme==null){J={};for(var en in O)J[en]=O[en];J.theme=reactExports.useContext(ThemeContext$1)}typeof O.className=="string"?Z=getRegisteredStyles(F.registered,W,O.className):O.className!=null&&(Z=O.className+" ");var tn=serializeStyles(S.concat(W),F.registered,J);Z+=F.key+"-"+tn.name,c!==void 0&&(Z+=" "+c);var Ct=x&&p===void 0?getDefaultShouldForwardProp(j):d,Q={};for(var on in O)x&&on==="as"||Ct(on)&&(Q[on]=O[on]);return Q.className=Z,z&&(Q.ref=z),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:F,serialized:tn,isStringTag:typeof j=="string"}),reactExports.createElement(j,Q))});return D.displayName=u!==void 0?u:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",D.defaultProps=n.defaultProps,D.__emotion_real=D,D.__emotion_base=l,D.__emotion_styles=S,D.__emotion_forwardProp=p,Object.defineProperty(D,"toString",{value:function(){return"."+c}}),D.withComponent=function(O,F){var z=t(O,_extends({},a,F,{shouldForwardProp:composeShouldForwardProps(D,F,!0)}));return z.apply(void 0,S)},D}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],styled$3=createStyled$1.bind(null);tags.forEach(function(t){styled$3[t]=styled$3(t)});function isEmpty$2(t){return t==null||Object.keys(t).length===0}function GlobalStyles$2(t){const{styles:n,defaultTheme:a={}}=t,s=typeof n=="function"?l=>n(isEmpty$2(l)?a:l):n;return jsxRuntimeExports.jsx(Global,{styles:s})}function styled$2(t,n){return styled$3(t,n)}function internal_mutateStyles(t,n){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=n(t.__emotion_styles))}const wrapper=[];function internal_serializeStyles(t){return wrapper[0]=t,serializeStyles(wrapper)}const sortBreakpointsValues=t=>{const n=Object.keys(t).map(a=>({key:a,val:t[a]}))||[];return n.sort((a,s)=>a.val-s.val),n.reduce((a,s)=>({...a,[s.key]:s.val}),{})};function createBreakpoints(t){const{values:n={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:s=5,...l}=t,u=sortBreakpointsValues(n),c=Object.keys(u);function p(T){return`@media (min-width:${typeof n[T]=="number"?n[T]:T}${a})`}function d(T){return`@media (max-width:${(typeof n[T]=="number"?n[T]:T)-s/100}${a})`}function x(T,A){const R=c.indexOf(A);return`@media (min-width:${typeof n[T]=="number"?n[T]:T}${a}) and (max-width:${(R!==-1&&typeof n[c[R]]=="number"?n[c[R]]:A)-s/100}${a})`}function _(T){return c.indexOf(T)+1<c.length?x(T,c[c.indexOf(T)+1]):p(T)}function S(T){const A=c.indexOf(T);return A===0?p(c[1]):A===c.length-1?d(c[A]):x(T,c[c.indexOf(T)+1]).replace("@media","@media not all and")}return{keys:c,values:u,up:p,down:d,between:x,only:_,not:S,unit:a,...l}}const shape={borderRadius:4};function createSpacing(t=8,n=createUnarySpacing({spacing:t})){if(t.mui)return t;const a=(...s)=>(s.length===0?[1]:s).map(u=>{const c=n(u);return typeof c=="number"?`${c}px`:c}).join(" ");return a.mui=!0,a}function applyStyles$2(t,n){var s;const a=this;if(a.vars){if(!((s=a.colorSchemes)!=null&&s[t])||typeof a.getColorSchemeSelector!="function")return{};let l=a.getColorSchemeSelector(t);return l==="&"?n:((l.includes("data-")||l.includes("."))&&(l=`*:where(${l.replace(/\s*&$/,"")}) &`),{[l]:n})}return a.palette.mode===t?n:{}}function createTheme$1(t={},...n){const{breakpoints:a={},palette:s={},spacing:l,shape:u={},...c}=t,p=createBreakpoints(a),d=createSpacing(l);let x=deepmerge({breakpoints:p,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:d,shape:{...shape,...u}},c);return x=cssContainerQueries(x),x.applyStyles=applyStyles$2,x=n.reduce((_,S)=>deepmerge(_,S),x),x.unstable_sxConfig={...defaultSxConfig,...c==null?void 0:c.unstable_sxConfig},x.unstable_sx=function(S){return styleFunctionSx({sx:S,theme:this})},x}function isObjectEmpty$2(t){return Object.keys(t).length===0}function useTheme$3(t=null){const n=reactExports.useContext(ThemeContext$1);return!n||isObjectEmpty$2(n)?t:n}const systemDefaultTheme$1=createTheme$1();function useTheme$2(t=systemDefaultTheme$1){return useTheme$3(t)}function GlobalStyles$1({styles:t,themeId:n,defaultTheme:a={}}){const s=useTheme$2(a),l=typeof t=="function"?t(n&&s[n]||s):t;return jsxRuntimeExports.jsx(GlobalStyles$2,{styles:l})}function createBox(t={}){const{themeId:n,defaultTheme:a,defaultClassName:s="MuiBox-root",generateClassName:l}=t,u=styled$2("div",{shouldForwardProp:p=>p!=="theme"&&p!=="sx"&&p!=="as"})(styleFunctionSx);return reactExports.forwardRef(function(d,x){const _=useTheme$2(a),{className:S,component:T="div",...A}=extendSxProp$1(d);return jsxRuntimeExports.jsx(u,{as:T,ref:x,className:clsx(S,l?l(s):s),theme:n&&_[n]||_,...A})})}const globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(t,n,a="Mui"){const s=globalStateClasses[n];return s?`${a}-${s}`:`${ClassNameGenerator.generate(t)}-${n}`}function generateUtilityClasses(t,n,a="Mui"){const s={};return n.forEach(l=>{s[l]=generateUtilityClass(t,l,a)}),s}function preprocessStyles(t){const{variants:n,...a}=t,s={variants:n,style:internal_serializeStyles(a),isProcessed:!0};return s.style===a||n&&n.forEach(l=>{typeof l.style!="function"&&(l.style=internal_serializeStyles(l.style))}),s}const systemDefaultTheme=createTheme$1();function shouldForwardProp(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function defaultOverridesResolver(t){return t?(n,a)=>a[t]:null}function attachTheme(t,n,a){t.theme=isObjectEmpty$1(t.theme)?a:t.theme[n]||t.theme}function processStyle(t,n){const a=typeof n=="function"?n(t):n;if(Array.isArray(a))return a.flatMap(s=>processStyle(t,s));if(Array.isArray(a==null?void 0:a.variants)){let s;if(a.isProcessed)s=a.style;else{const{variants:l,...u}=a;s=u}return processStyleVariants(t,a.variants,[s])}return a!=null&&a.isProcessed?a.style:a}function processStyleVariants(t,n,a=[]){var l;let s;e:for(let u=0;u<n.length;u+=1){const c=n[u];if(typeof c.props=="function"){if(s??(s={...t,...t.ownerState,ownerState:t.ownerState}),!c.props(s))continue}else for(const p in c.props)if(t[p]!==c.props[p]&&((l=t.ownerState)==null?void 0:l[p])!==c.props[p])continue e;typeof c.style=="function"?(s??(s={...t,...t.ownerState,ownerState:t.ownerState}),a.push(c.style(s))):a.push(c.style)}return a}function createStyled(t={}){const{themeId:n,defaultTheme:a=systemDefaultTheme,rootShouldForwardProp:s=shouldForwardProp,slotShouldForwardProp:l=shouldForwardProp}=t;function u(p){attachTheme(p,n,a)}return(p,d={})=>{internal_mutateStyles(p,W=>W.filter(J=>J!==styleFunctionSx));const{name:x,slot:_,skipVariantsResolver:S,skipSx:T,overridesResolver:A=defaultOverridesResolver(lowercaseFirstLetter(_)),...R}=d,D=S!==void 0?S:_&&_!=="Root"&&_!=="root"||!1,O=T||!1;let F=shouldForwardProp;_==="Root"||_==="root"?F=s:_?F=l:isStringTag(p)&&(F=void 0);const z=styled$2(p,{shouldForwardProp:F,label:generateStyledLabel(),...R}),j=W=>{if(W.__emotion_real===W)return W;if(typeof W=="function")return function(en){return processStyle(en,W)};if(isPlainObject(W)){const J=preprocessStyles(W);return J.variants?function(tn){return processStyle(tn,J)}:J.style}return W},Z=(...W)=>{const J=[],en=W.map(j),tn=[];if(J.push(u),x&&A&&tn.push(function(gn){var Cn,ax;const dn=(ax=(Cn=gn.theme.components)==null?void 0:Cn[x])==null?void 0:ax.styleOverrides;if(!dn)return null;const ix={};for(const sx in dn)ix[sx]=processStyle(gn,dn[sx]);return A(gn,ix)}),x&&!D&&tn.push(function(gn){var ix,Cn;const In=gn.theme,dn=(Cn=(ix=In==null?void 0:In.components)==null?void 0:ix[x])==null?void 0:Cn.variants;return dn?processStyleVariants(gn,dn):null}),O||tn.push(styleFunctionSx),Array.isArray(en[0])){const on=en.shift(),gn=new Array(J.length).fill(""),In=new Array(tn.length).fill("");let dn;dn=[...gn,...on,...In],dn.raw=[...gn,...on.raw,...In],J.unshift(dn)}const Ct=[...J,...en,...tn],Q=z(...Ct);return p.muiName&&(Q.muiName=p.muiName),Q};return z.withConfig&&(Z.withConfig=z.withConfig),Z}}function generateStyledLabel(t,n){return void 0}function isObjectEmpty$1(t){for(const n in t)return!1;return!0}function isStringTag(t){return typeof t=="string"&&t.charCodeAt(0)>96}function lowercaseFirstLetter(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const styled$1=createStyled();function getThemeProps$1(t){const{theme:n,name:a,props:s}=t;return!n||!n.components||!n.components[a]||!n.components[a].defaultProps?s:resolveProps(n.components[a].defaultProps,s)}function useThemeProps({props:t,name:n,defaultTheme:a,themeId:s}){let l=useTheme$2(a);return s&&(l=l[s]||l),getThemeProps$1({theme:l,name:n,props:t})}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,ThemeContext=reactExports.createContext(null);function useTheme$1(){return reactExports.useContext(ThemeContext)}const hasSymbol=typeof Symbol=="function"&&Symbol.for,nested=hasSymbol?Symbol.for("mui.nested"):"__THEME_NESTED__";function mergeOuterLocalTheme(t,n){return typeof n=="function"?n(t):{...t,...n}}function ThemeProvider$2(t){const{children:n,theme:a}=t,s=useTheme$1(),l=reactExports.useMemo(()=>{const u=s===null?{...a}:mergeOuterLocalTheme(s,a);return u!=null&&(u[nested]=s!==null),u},[a,s]);return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:l,children:n})}const RtlContext=reactExports.createContext();function RtlProvider({value:t,...n}){return jsxRuntimeExports.jsx(RtlContext.Provider,{value:t??!0,...n})}const useRtl=()=>reactExports.useContext(RtlContext)??!1,PropsContext=reactExports.createContext(void 0);function DefaultPropsProvider({value:t,children:n}){return jsxRuntimeExports.jsx(PropsContext.Provider,{value:t,children:n})}function getThemeProps(t){const{theme:n,name:a,props:s}=t;if(!n||!n.components||!n.components[a])return s;const l=n.components[a];return l.defaultProps?resolveProps(l.defaultProps,s):!l.styleOverrides&&!l.variants?resolveProps(l,s):s}function useDefaultProps$1({props:t,name:n}){const a=reactExports.useContext(PropsContext);return getThemeProps({props:t,name:n,theme:{components:a}})}const EMPTY_THEME={};function useThemeScoping(t,n,a,s=!1){return reactExports.useMemo(()=>{const l=t&&n[t]||n;if(typeof a=="function"){const u=a(l),c=t?{...n,[t]:u}:u;return s?()=>c:c}return t?{...n,[t]:a}:{...n,...a}},[t,n,a,s])}function ThemeProvider$1(t){const{children:n,theme:a,themeId:s}=t,l=useTheme$3(EMPTY_THEME),u=useTheme$1()||EMPTY_THEME,c=useThemeScoping(s,l,a),p=useThemeScoping(s,u,a,!0),d=(s?c[s]:c).direction==="rtl";return jsxRuntimeExports.jsx(ThemeProvider$2,{theme:p,children:jsxRuntimeExports.jsx(ThemeContext$1.Provider,{value:c,children:jsxRuntimeExports.jsx(RtlProvider,{value:d,children:jsxRuntimeExports.jsx(DefaultPropsProvider,{value:s?c[s].components:c.components,children:n})})})})}const arg={theme:void 0};function unstable_memoTheme(t){let n,a;return function(l){let u=n;return(u===void 0||l.theme!==a)&&(arg.theme=l.theme,u=preprocessStyles(t(arg)),n=u,a=l.theme),u}}const DEFAULT_MODE_STORAGE_KEY="mode",DEFAULT_COLOR_SCHEME_STORAGE_KEY="color-scheme",DEFAULT_ATTRIBUTE="data-color-scheme";function InitColorSchemeScript(t){const{defaultMode:n="system",defaultLightColorScheme:a="light",defaultDarkColorScheme:s="dark",modeStorageKey:l=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:u=DEFAULT_COLOR_SCHEME_STORAGE_KEY,attribute:c=DEFAULT_ATTRIBUTE,colorSchemeNode:p="document.documentElement",nonce:d}=t||{};let x="",_=c;if(c==="class"&&(_=".%s"),c==="data"&&(_="[data-%s]"),_.startsWith(".")){const T=_.substring(1);x+=`${p}.classList.remove('${T}'.replace('%s', light), '${T}'.replace('%s', dark));
      ${p}.classList.add('${T}'.replace('%s', colorScheme));`}const S=_.match(/\[([^\]]+)\]/);if(S){const[T,A]=S[1].split("=");A||(x+=`${p}.removeAttribute('${T}'.replace('%s', light));
      ${p}.removeAttribute('${T}'.replace('%s', dark));`),x+=`
      ${p}.setAttribute('${T}'.replace('%s', colorScheme), ${A?`${A}.replace('%s', colorScheme)`:'""'});`}else x+=`${p}.setAttribute('${_}', colorScheme);`;return jsxRuntimeExports.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${l}') || '${n}';
  const dark = localStorage.getItem('${u}-dark') || '${s}';
  const light = localStorage.getItem('${u}-light') || '${a}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${x}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function noop$4(){}const localStorageManager=({key:t,storageWindow:n})=>(!n&&typeof window<"u"&&(n=window),{get(a){if(typeof window>"u")return;if(!n)return a;let s;try{s=n.localStorage.getItem(t)}catch{}return s||a},set:a=>{if(n)try{n.localStorage.setItem(t,a)}catch{}},subscribe:a=>{if(!n)return noop$4;const s=l=>{const u=l.newValue;l.key===t&&a(u)};return n.addEventListener("storage",s),()=>{n.removeEventListener("storage",s)}}});function noop$3(){}function getSystemMode(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function processState(t,n){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return n("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return n("dark")}function getColorScheme(t){return processState(t,n=>{if(n==="light")return t.lightColorScheme;if(n==="dark")return t.darkColorScheme})}function useCurrentColorScheme(t){const{defaultMode:n="light",defaultLightColorScheme:a,defaultDarkColorScheme:s,supportedColorSchemes:l=[],modeStorageKey:u=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:c=DEFAULT_COLOR_SCHEME_STORAGE_KEY,storageWindow:p=typeof window>"u"?void 0:window,storageManager:d=localStorageManager,noSsr:x=!1}=t,_=l.join(","),S=l.length>1,T=reactExports.useMemo(()=>d==null?void 0:d({key:u,storageWindow:p}),[d,u,p]),A=reactExports.useMemo(()=>d==null?void 0:d({key:`${c}-light`,storageWindow:p}),[d,c,p]),R=reactExports.useMemo(()=>d==null?void 0:d({key:`${c}-dark`,storageWindow:p}),[d,c,p]),[D,O]=reactExports.useState(()=>{const tn=(T==null?void 0:T.get(n))||n,Ct=(A==null?void 0:A.get(a))||a,Q=(R==null?void 0:R.get(s))||s;return{mode:tn,systemMode:getSystemMode(tn),lightColorScheme:Ct,darkColorScheme:Q}}),[F,z]=reactExports.useState(x||!S);reactExports.useEffect(()=>{z(!0)},[]);const j=getColorScheme(D),Z=reactExports.useCallback(tn=>{O(Ct=>{if(tn===Ct.mode)return Ct;const Q=tn??n;return T==null||T.set(Q),{...Ct,mode:Q,systemMode:getSystemMode(Q)}})},[T,n]),W=reactExports.useCallback(tn=>{tn?typeof tn=="string"?tn&&!_.includes(tn)?console.error(`\`${tn}\` does not exist in \`theme.colorSchemes\`.`):O(Ct=>{const Q={...Ct};return processState(Ct,on=>{on==="light"&&(A==null||A.set(tn),Q.lightColorScheme=tn),on==="dark"&&(R==null||R.set(tn),Q.darkColorScheme=tn)}),Q}):O(Ct=>{const Q={...Ct},on=tn.light===null?a:tn.light,gn=tn.dark===null?s:tn.dark;return on&&(_.includes(on)?(Q.lightColorScheme=on,A==null||A.set(on)):console.error(`\`${on}\` does not exist in \`theme.colorSchemes\`.`)),gn&&(_.includes(gn)?(Q.darkColorScheme=gn,R==null||R.set(gn)):console.error(`\`${gn}\` does not exist in \`theme.colorSchemes\`.`)),Q}):O(Ct=>(A==null||A.set(a),R==null||R.set(s),{...Ct,lightColorScheme:a,darkColorScheme:s}))},[_,A,R,a,s]),J=reactExports.useCallback(tn=>{D.mode==="system"&&O(Ct=>{const Q=tn!=null&&tn.matches?"dark":"light";return Ct.systemMode===Q?Ct:{...Ct,systemMode:Q}})},[D.mode]),en=reactExports.useRef(J);return en.current=J,reactExports.useEffect(()=>{if(typeof window.matchMedia!="function"||!S)return;const tn=(...Q)=>en.current(...Q),Ct=window.matchMedia("(prefers-color-scheme: dark)");return Ct.addListener(tn),tn(Ct),()=>{Ct.removeListener(tn)}},[S]),reactExports.useEffect(()=>{if(S){const tn=(T==null?void 0:T.subscribe(on=>{(!on||["light","dark","system"].includes(on))&&Z(on||n)}))||noop$3,Ct=(A==null?void 0:A.subscribe(on=>{(!on||_.match(on))&&W({light:on})}))||noop$3,Q=(R==null?void 0:R.subscribe(on=>{(!on||_.match(on))&&W({dark:on})}))||noop$3;return()=>{tn(),Ct(),Q()}}},[W,Z,_,n,p,S,T,A,R]),{...D,mode:F?D.mode:void 0,systemMode:F?D.systemMode:void 0,colorScheme:F?j:void 0,setMode:Z,setColorScheme:W}}const DISABLE_CSS_TRANSITION="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function createCssVarsProvider(t){const{themeId:n,theme:a={},modeStorageKey:s=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:l=DEFAULT_COLOR_SCHEME_STORAGE_KEY,disableTransitionOnChange:u=!1,defaultColorScheme:c,resolveTheme:p}=t,d={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},x=reactExports.createContext(void 0),_=()=>reactExports.useContext(x)||d,S={},T={};function A(F){var fx,yx,Ix,Nx;const{children:z,theme:j,modeStorageKey:Z=s,colorSchemeStorageKey:W=l,disableTransitionOnChange:J=u,storageManager:en,storageWindow:tn=typeof window>"u"?void 0:window,documentNode:Ct=typeof document>"u"?void 0:document,colorSchemeNode:Q=typeof document>"u"?void 0:document.documentElement,disableNestedContext:on=!1,disableStyleSheetGeneration:gn=!1,defaultMode:In="system",forceThemeRerender:dn=!1,noSsr:ix}=F,Cn=reactExports.useRef(!1),ax=useTheme$1(),sx=reactExports.useContext(x),lx=!!sx&&!on,ox=reactExports.useMemo(()=>j||(typeof a=="function"?a():a),[j]),hx=ox[n],_x=hx||ox,{colorSchemes:ux=S,components:px=T,cssVarPrefix:dx}=_x,mx=Object.keys(ux).filter(Fx=>!!ux[Fx]).join(","),gx=reactExports.useMemo(()=>mx.split(","),[mx]),Sx=typeof c=="string"?c:c.light,Ex=typeof c=="string"?c:c.dark,Cx=ux[Sx]&&ux[Ex]?In:((yx=(fx=ux[_x.defaultColorScheme])==null?void 0:fx.palette)==null?void 0:yx.mode)||((Ix=_x.palette)==null?void 0:Ix.mode),{mode:Ax,setMode:Tx,systemMode:kx,lightColorScheme:Rx,darkColorScheme:$x,colorScheme:Gx,setColorScheme:qx}=useCurrentColorScheme({supportedColorSchemes:gx,defaultLightColorScheme:Sx,defaultDarkColorScheme:Ex,modeStorageKey:Z,colorSchemeStorageKey:W,defaultMode:Cx,storageManager:en,storageWindow:tn,noSsr:ix});let Dx=Ax,lE=Gx;lx&&(Dx=sx.mode,lE=sx.colorScheme);let cE=lE||_x.defaultColorScheme;_x.vars&&!dn&&(cE=_x.defaultColorScheme);const nE=reactExports.useMemo(()=>{var Wx;const Fx=((Wx=_x.generateThemeVars)==null?void 0:Wx.call(_x))||_x.vars,Px={..._x,components:px,colorSchemes:ux,cssVarPrefix:dx,vars:Fx};if(typeof Px.generateSpacing=="function"&&(Px.spacing=Px.generateSpacing()),cE){const jx=ux[cE];jx&&typeof jx=="object"&&Object.keys(jx).forEach(Qx=>{jx[Qx]&&typeof jx[Qx]=="object"?Px[Qx]={...Px[Qx],...jx[Qx]}:Px[Qx]=jx[Qx]})}return p?p(Px):Px},[_x,cE,px,ux,dx]),iE=_x.colorSchemeSelector;useEnhancedEffect(()=>{if(lE&&Q&&iE&&iE!=="media"){const Fx=iE;let Px=iE;if(Fx==="class"&&(Px=".%s"),Fx==="data"&&(Px="[data-%s]"),Fx!=null&&Fx.startsWith("data-")&&!Fx.includes("%s")&&(Px=`[${Fx}="%s"]`),Px.startsWith("."))Q.classList.remove(...gx.map(Wx=>Px.substring(1).replace("%s",Wx))),Q.classList.add(Px.substring(1).replace("%s",lE));else{const Wx=Px.replace("%s",lE).match(/\[([^\]]+)\]/);if(Wx){const[jx,Qx]=Wx[1].split("=");Qx||gx.forEach(tE=>{Q.removeAttribute(jx.replace(lE,tE))}),Q.setAttribute(jx,Qx?Qx.replace(/"|'/g,""):"")}else Q.setAttribute(Px,lE)}}},[lE,iE,Q,gx]),reactExports.useEffect(()=>{let Fx;if(J&&Cn.current&&Ct){const Px=Ct.createElement("style");Px.appendChild(Ct.createTextNode(DISABLE_CSS_TRANSITION)),Ct.head.appendChild(Px),window.getComputedStyle(Ct.body),Fx=setTimeout(()=>{Ct.head.removeChild(Px)},1)}return()=>{clearTimeout(Fx)}},[lE,J,Ct]),reactExports.useEffect(()=>(Cn.current=!0,()=>{Cn.current=!1}),[]);const _E=reactExports.useMemo(()=>({allColorSchemes:gx,colorScheme:lE,darkColorScheme:$x,lightColorScheme:Rx,mode:Dx,setColorScheme:qx,setMode:Tx,systemMode:kx}),[gx,lE,$x,Rx,Dx,qx,Tx,kx,nE.colorSchemeSelector]);let sE=!0;(gn||_x.cssVariables===!1||lx&&(ax==null?void 0:ax.cssVarPrefix)===dx)&&(sE=!1);const ME=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ThemeProvider$1,{themeId:hx?n:void 0,theme:nE,children:z}),sE&&jsxRuntimeExports.jsx(GlobalStyles$2,{styles:((Nx=nE.generateStyleSheets)==null?void 0:Nx.call(nE))||[]})]});return lx?ME:jsxRuntimeExports.jsx(x.Provider,{value:_E,children:ME})}const R=typeof c=="string"?c:c.light,D=typeof c=="string"?c:c.dark;return{CssVarsProvider:A,useColorScheme:_,getInitColorSchemeScript:F=>InitColorSchemeScript({colorSchemeStorageKey:l,defaultLightColorScheme:R,defaultDarkColorScheme:D,modeStorageKey:s,...F})}}function createGetCssVar$1(t=""){function n(...s){if(!s.length)return"";const l=s[0];return typeof l=="string"&&!l.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${l}${n(...s.slice(1))})`:`, ${l}`}return(s,...l)=>`var(--${t?`${t}-`:""}${s}${n(...l)})`}const assignNestedKeys=(t,n,a,s=[])=>{let l=t;n.forEach((u,c)=>{c===n.length-1?Array.isArray(l)?l[Number(u)]=a:l&&typeof l=="object"&&(l[u]=a):l&&typeof l=="object"&&(l[u]||(l[u]=s.includes(u)?[]:{}),l=l[u])})},walkObjectDeep=(t,n,a)=>{function s(l,u=[],c=[]){Object.entries(l).forEach(([p,d])=>{(!a||a&&!a([...u,p]))&&d!=null&&(typeof d=="object"&&Object.keys(d).length>0?s(d,[...u,p],Array.isArray(d)?[...c,p]:c):n([...u,p],d,c))})}s(t)},getCssValue=(t,n)=>typeof n=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>t.includes(s))||t[t.length-1].toLowerCase().includes("opacity")?n:`${n}px`:n;function cssVarsParser(t,n){const{prefix:a,shouldSkipGeneratingVar:s}=n||{},l={},u={},c={};return walkObjectDeep(t,(p,d,x)=>{if((typeof d=="string"||typeof d=="number")&&(!s||!s(p,d))){const _=`--${a?`${a}-`:""}${p.join("-")}`,S=getCssValue(p,d);Object.assign(l,{[_]:S}),assignNestedKeys(u,p,`var(${_})`,x),assignNestedKeys(c,p,`var(${_}, ${S})`,x)}},p=>p[0]==="vars"),{css:l,vars:u,varsWithDefaults:c}}function prepareCssVars(t,n={}){const{getSelector:a=O,disableCssColorScheme:s,colorSchemeSelector:l}=n,{colorSchemes:u={},components:c,defaultColorScheme:p="light",...d}=t,{vars:x,css:_,varsWithDefaults:S}=cssVarsParser(d,n);let T=S;const A={},{[p]:R,...D}=u;if(Object.entries(D||{}).forEach(([j,Z])=>{const{vars:W,css:J,varsWithDefaults:en}=cssVarsParser(Z,n);T=deepmerge(T,en),A[j]={css:J,vars:W}}),R){const{css:j,vars:Z,varsWithDefaults:W}=cssVarsParser(R,n);T=deepmerge(T,W),A[p]={css:j,vars:Z}}function O(j,Z){var J,en;let W=l;if(l==="class"&&(W=".%s"),l==="data"&&(W="[data-%s]"),l!=null&&l.startsWith("data-")&&!l.includes("%s")&&(W=`[${l}="%s"]`),j){if(W==="media")return t.defaultColorScheme===j?":root":{[`@media (prefers-color-scheme: ${((en=(J=u[j])==null?void 0:J.palette)==null?void 0:en.mode)||j})`]:{":root":Z}};if(W)return t.defaultColorScheme===j?`:root, ${W.replace("%s",String(j))}`:W.replace("%s",String(j))}return":root"}return{vars:T,generateThemeVars:()=>{let j={...x};return Object.entries(A).forEach(([,{vars:Z}])=>{j=deepmerge(j,Z)}),j},generateStyleSheets:()=>{var tn,Ct;const j=[],Z=t.defaultColorScheme||"light";function W(Q,on){Object.keys(on).length&&j.push(typeof Q=="string"?{[Q]:{...on}}:Q)}W(a(void 0,{..._}),_);const{[Z]:J,...en}=A;if(J){const{css:Q}=J,on=(Ct=(tn=u[Z])==null?void 0:tn.palette)==null?void 0:Ct.mode,gn=!s&&on?{colorScheme:on,...Q}:{...Q};W(a(Z,{...gn}),gn)}return Object.entries(en).forEach(([Q,{css:on}])=>{var dn,ix;const gn=(ix=(dn=u[Q])==null?void 0:dn.palette)==null?void 0:ix.mode,In=!s&&gn?{colorScheme:gn,...on}:{...on};W(a(Q,{...In}),In)}),j}}}function createGetColorSchemeSelector(t){return function(a){return t==="media"?`@media (prefers-color-scheme: ${a})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${a}"] &`:t==="class"?`.${a} &`:t==="data"?`[data-${a}] &`:`${t.replace("%s",a)} &`:"&"}}const defaultTheme$4=createTheme$1(),defaultCreateStyledComponent$2=styled$1("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`maxWidth${capitalize(String(a.maxWidth))}`],a.fixed&&n.fixed,a.disableGutters&&n.disableGutters]}}),useThemePropsDefault$2=t=>useThemeProps({props:t,name:"MuiContainer",defaultTheme:defaultTheme$4}),useUtilityClasses$G=(t,n)=>{const a=d=>generateUtilityClass(n,d),{classes:s,fixed:l,disableGutters:u,maxWidth:c}=t,p={root:["root",c&&`maxWidth${capitalize(String(c))}`,l&&"fixed",u&&"disableGutters"]};return composeClasses(p,a,s)};function createContainer(t={}){const{createStyledComponent:n=defaultCreateStyledComponent$2,useThemeProps:a=useThemePropsDefault$2,componentName:s="MuiContainer"}=t,l=n(({theme:c,ownerState:p})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!p.disableGutters&&{paddingLeft:c.spacing(2),paddingRight:c.spacing(2),[c.breakpoints.up("sm")]:{paddingLeft:c.spacing(3),paddingRight:c.spacing(3)}}}),({theme:c,ownerState:p})=>p.fixed&&Object.keys(c.breakpoints.values).reduce((d,x)=>{const _=x,S=c.breakpoints.values[_];return S!==0&&(d[c.breakpoints.up(_)]={maxWidth:`${S}${c.breakpoints.unit}`}),d},{}),({theme:c,ownerState:p})=>({...p.maxWidth==="xs"&&{[c.breakpoints.up("xs")]:{maxWidth:Math.max(c.breakpoints.values.xs,444)}},...p.maxWidth&&p.maxWidth!=="xs"&&{[c.breakpoints.up(p.maxWidth)]:{maxWidth:`${c.breakpoints.values[p.maxWidth]}${c.breakpoints.unit}`}}}));return reactExports.forwardRef(function(p,d){const x=a(p),{className:_,component:S="div",disableGutters:T=!1,fixed:A=!1,maxWidth:R="lg",classes:D,...O}=x,F={...x,component:S,disableGutters:T,fixed:A,maxWidth:R},z=useUtilityClasses$G(F,s);return jsxRuntimeExports.jsx(l,{as:S,ownerState:F,className:clsx(z.root,_),ref:d,...O})})}function isMuiElement(t,n){var a,s,l;return reactExports.isValidElement(t)&&n.indexOf(t.type.muiName??((l=(s=(a=t.type)==null?void 0:a._payload)==null?void 0:s.value)==null?void 0:l.muiName))!==-1}const filterBreakpointKeys=(t,n)=>t.filter(a=>n.includes(a)),traverseBreakpoints=(t,n,a)=>{const s=t.keys[0];Array.isArray(n)?n.forEach((l,u)=>{a((c,p)=>{u<=t.keys.length-1&&(u===0?Object.assign(c,p):c[t.up(t.keys[u])]=p)},l)}):n&&typeof n=="object"?(Object.keys(n).length>t.keys.length?t.keys:filterBreakpointKeys(t.keys,Object.keys(n))).forEach(u=>{if(t.keys.includes(u)){const c=n[u];c!==void 0&&a((p,d)=>{s===u?Object.assign(p,d):p[t.up(u)]=d},c)}}):(typeof n=="number"||typeof n=="string")&&a((l,u)=>{Object.assign(l,u)},n)};function getSelfSpacingVar(t){return`--Grid-${t}Spacing`}function getParentSpacingVar(t){return`--Grid-parent-${t}Spacing`}const selfColumnsVar="--Grid-columns",parentColumnsVar="--Grid-parent-columns",generateGridSizeStyles=({theme:t,ownerState:n})=>{const a={};return traverseBreakpoints(t.breakpoints,n.size,(s,l)=>{let u={};l==="grow"&&(u={flexBasis:0,flexGrow:1,maxWidth:"100%"}),l==="auto"&&(u={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof l=="number"&&(u={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${l} / var(${parentColumnsVar}) - (var(${parentColumnsVar}) - ${l}) * (var(${getParentSpacingVar("column")}) / var(${parentColumnsVar})))`}),s(a,u)}),a},generateGridOffsetStyles=({theme:t,ownerState:n})=>{const a={};return traverseBreakpoints(t.breakpoints,n.offset,(s,l)=>{let u={};l==="auto"&&(u={marginLeft:"auto"}),typeof l=="number"&&(u={marginLeft:l===0?"0px":`calc(100% * ${l} / var(${parentColumnsVar}) + var(${getParentSpacingVar("column")}) * ${l} / var(${parentColumnsVar}))`}),s(a,u)}),a},generateGridColumnsStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={[selfColumnsVar]:12};return traverseBreakpoints(t.breakpoints,n.columns,(s,l)=>{const u=l??12;s(a,{[selfColumnsVar]:u,"> *":{[parentColumnsVar]:u}})}),a},generateGridRowSpacingStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={};return traverseBreakpoints(t.breakpoints,n.rowSpacing,(s,l)=>{var c;const u=typeof l=="string"?l:(c=t.spacing)==null?void 0:c.call(t,l);s(a,{[getSelfSpacingVar("row")]:u,"> *":{[getParentSpacingVar("row")]:u}})}),a},generateGridColumnSpacingStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={};return traverseBreakpoints(t.breakpoints,n.columnSpacing,(s,l)=>{var c;const u=typeof l=="string"?l:(c=t.spacing)==null?void 0:c.call(t,l);s(a,{[getSelfSpacingVar("column")]:u,"> *":{[getParentSpacingVar("column")]:u}})}),a},generateGridDirectionStyles=({theme:t,ownerState:n})=>{if(!n.container)return{};const a={};return traverseBreakpoints(t.breakpoints,n.direction,(s,l)=>{s(a,{flexDirection:l})}),a},generateGridStyles=({ownerState:t})=>({minWidth:0,boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",...t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},gap:`var(${getSelfSpacingVar("row")}) var(${getSelfSpacingVar("column")})`}}),generateSizeClassNames=t=>{const n=[];return Object.entries(t).forEach(([a,s])=>{s!==!1&&s!==void 0&&n.push(`grid-${a}-${String(s)}`)}),n},generateSpacingClassNames=(t,n="xs")=>{function a(s){return s===void 0?!1:typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"&&s>0}if(a(t))return[`spacing-${n}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const s=[];return Object.entries(t).forEach(([l,u])=>{a(u)&&s.push(`spacing-${l}-${String(u)}`)}),s}return[]},generateDirectionClasses=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([n,a])=>`direction-${n}-${a}`):[`direction-xs-${String(t)}`];function deleteLegacyGridProps(t,n){t.item!==void 0&&delete t.item,t.zeroMinWidth!==void 0&&delete t.zeroMinWidth,n.keys.forEach(a=>{t[a]!==void 0&&delete t[a]})}const defaultTheme$3=createTheme$1(),defaultCreateStyledComponent$1=styled$1("div",{name:"MuiGrid",slot:"Root"});function useThemePropsDefault$1(t){return useThemeProps({props:t,name:"MuiGrid",defaultTheme:defaultTheme$3})}function createGrid(t={}){const{createStyledComponent:n=defaultCreateStyledComponent$1,useThemeProps:a=useThemePropsDefault$1,useTheme:s=useTheme$2,componentName:l="MuiGrid"}=t,u=(x,_)=>{const{container:S,direction:T,spacing:A,wrap:R,size:D}=x,O={root:["root",S&&"container",R!=="wrap"&&`wrap-xs-${String(R)}`,...generateDirectionClasses(T),...generateSizeClassNames(D),...S?generateSpacingClassNames(A,_.breakpoints.keys[0]):[]]};return composeClasses(O,F=>generateUtilityClass(l,F),{})};function c(x,_,S=()=>!0){const T={};return x===null||(Array.isArray(x)?x.forEach((A,R)=>{A!==null&&S(A)&&_.keys[R]&&(T[_.keys[R]]=A)}):typeof x=="object"?Object.keys(x).forEach(A=>{const R=x[A];R!=null&&S(R)&&(T[A]=R)}):T[_.keys[0]]=x),T}const p=n(generateGridColumnsStyles,generateGridColumnSpacingStyles,generateGridRowSpacingStyles,generateGridSizeStyles,generateGridDirectionStyles,generateGridStyles,generateGridOffsetStyles),d=reactExports.forwardRef(function(_,S){const T=s(),A=a(_),R=extendSxProp$1(A);deleteLegacyGridProps(R,T.breakpoints);const{className:D,children:O,columns:F=12,container:z=!1,component:j="div",direction:Z="row",wrap:W="wrap",size:J={},offset:en={},spacing:tn=0,rowSpacing:Ct=tn,columnSpacing:Q=tn,unstable_level:on=0,...gn}=R,In=c(J,T.breakpoints,hx=>hx!==!1),dn=c(en,T.breakpoints),ix=_.columns??(on?void 0:F),Cn=_.spacing??(on?void 0:tn),ax=_.rowSpacing??_.spacing??(on?void 0:Ct),sx=_.columnSpacing??_.spacing??(on?void 0:Q),lx={...R,level:on,columns:ix,container:z,direction:Z,wrap:W,spacing:Cn,rowSpacing:ax,columnSpacing:sx,size:In,offset:dn},ox=u(lx,T);return jsxRuntimeExports.jsx(p,{ref:S,as:j,ownerState:lx,className:clsx(ox.root,D),...gn,children:reactExports.Children.map(O,hx=>{var _x;return reactExports.isValidElement(hx)&&isMuiElement(hx,["Grid"])&&z&&hx.props.container?reactExports.cloneElement(hx,{unstable_level:((_x=hx.props)==null?void 0:_x.unstable_level)??on+1}):hx})})});return d.muiName="Grid",d}const defaultTheme$2=createTheme$1(),defaultCreateStyledComponent=styled$1("div",{name:"MuiStack",slot:"Root"});function useThemePropsDefault(t){return useThemeProps({props:t,name:"MuiStack",defaultTheme:defaultTheme$2})}function joinChildren(t,n){const a=reactExports.Children.toArray(t).filter(Boolean);return a.reduce((s,l,u)=>(s.push(l),u<a.length-1&&s.push(reactExports.cloneElement(n,{key:`separator-${u}`})),s),[])}const getSideFromDirection=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],style=({ownerState:t,theme:n})=>{let a={display:"flex",flexDirection:"column",...handleBreakpoints({theme:n},resolveBreakpointValues({values:t.direction,breakpoints:n.breakpoints.values}),s=>({flexDirection:s}))};if(t.spacing){const s=createUnarySpacing(n),l=Object.keys(n.breakpoints.values).reduce((d,x)=>((typeof t.spacing=="object"&&t.spacing[x]!=null||typeof t.direction=="object"&&t.direction[x]!=null)&&(d[x]=!0),d),{}),u=resolveBreakpointValues({values:t.direction,base:l}),c=resolveBreakpointValues({values:t.spacing,base:l});typeof u=="object"&&Object.keys(u).forEach((d,x,_)=>{if(!u[d]){const T=x>0?u[_[x-1]]:"column";u[d]=T}}),a=deepmerge(a,handleBreakpoints({theme:n},c,(d,x)=>t.useFlexGap?{gap:getValue(s,d)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(x?u[x]:t.direction)}`]:getValue(s,d)}}))}return a=mergeBreakpointsInOrder(n.breakpoints,a),a};function createStack(t={}){const{createStyledComponent:n=defaultCreateStyledComponent,useThemeProps:a=useThemePropsDefault,componentName:s="MuiStack"}=t,l=()=>composeClasses({root:["root"]},d=>generateUtilityClass(s,d),{}),u=n(style);return reactExports.forwardRef(function(d,x){const _=a(d),S=extendSxProp$1(_),{component:T="div",direction:A="column",spacing:R=0,divider:D,children:O,className:F,useFlexGap:z=!1,...j}=S,Z={direction:A,spacing:R,useFlexGap:z},W=l();return jsxRuntimeExports.jsx(u,{as:T,ownerState:Z,ref:x,className:clsx(W.root,F),...j,children:D?joinChildren(O,D):O})})}const common={black:"#000",white:"#fff"},grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},purple={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},red={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},orange={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},blue={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},lightBlue={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},green={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function getLight(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common.white,default:common.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const light=getLight();function getDark(){return{text:{primary:common.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const dark=getDark();function addLightOrDark(t,n,a,s){const l=s.light||s,u=s.dark||s*1.5;t[n]||(t.hasOwnProperty(a)?t[n]=t[a]:n==="light"?t.light=lighten(t.main,l):n==="dark"&&(t.dark=darken(t.main,u)))}function getDefaultPrimary(t="light"){return t==="dark"?{main:blue[200],light:blue[50],dark:blue[400]}:{main:blue[700],light:blue[400],dark:blue[800]}}function getDefaultSecondary(t="light"){return t==="dark"?{main:purple[200],light:purple[50],dark:purple[400]}:{main:purple[500],light:purple[300],dark:purple[700]}}function getDefaultError(t="light"){return t==="dark"?{main:red[500],light:red[300],dark:red[700]}:{main:red[700],light:red[400],dark:red[800]}}function getDefaultInfo(t="light"){return t==="dark"?{main:lightBlue[400],light:lightBlue[300],dark:lightBlue[700]}:{main:lightBlue[700],light:lightBlue[500],dark:lightBlue[900]}}function getDefaultSuccess(t="light"){return t==="dark"?{main:green[400],light:green[300],dark:green[700]}:{main:green[800],light:green[500],dark:green[900]}}function getDefaultWarning(t="light"){return t==="dark"?{main:orange[400],light:orange[300],dark:orange[700]}:{main:"#ed6c02",light:orange[500],dark:orange[900]}}function createPalette(t){const{mode:n="light",contrastThreshold:a=3,tonalOffset:s=.2,...l}=t,u=t.primary||getDefaultPrimary(n),c=t.secondary||getDefaultSecondary(n),p=t.error||getDefaultError(n),d=t.info||getDefaultInfo(n),x=t.success||getDefaultSuccess(n),_=t.warning||getDefaultWarning(n);function S(D){return getContrastRatio(D,dark.text.primary)>=a?dark.text.primary:light.text.primary}const T=({color:D,name:O,mainShade:F=500,lightShade:z=300,darkShade:j=700})=>{if(D={...D},!D.main&&D[F]&&(D.main=D[F]),!D.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,O?` (${O})`:"",F));if(typeof D.main!="string")throw new Error(formatMuiErrorMessage(12,O?` (${O})`:"",JSON.stringify(D.main)));return addLightOrDark(D,"light",z,s),addLightOrDark(D,"dark",j,s),D.contrastText||(D.contrastText=S(D.main)),D};let A;return n==="light"?A=getLight():n==="dark"&&(A=getDark()),deepmerge({common:{...common},mode:n,primary:T({color:u,name:"primary"}),secondary:T({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:T({color:p,name:"error"}),warning:T({color:_,name:"warning"}),info:T({color:d,name:"info"}),success:T({color:x,name:"success"}),grey,contrastThreshold:a,getContrastText:S,augmentColor:T,tonalOffset:s,...A},l)}function prepareTypographyVars(t){const n={};return Object.entries(t).forEach(s=>{const[l,u]=s;typeof u=="object"&&(n[l]=`${u.fontStyle?`${u.fontStyle} `:""}${u.fontVariant?`${u.fontVariant} `:""}${u.fontWeight?`${u.fontWeight} `:""}${u.fontStretch?`${u.fontStretch} `:""}${u.fontSize||""}${u.lineHeight?`/${u.lineHeight} `:""}${u.fontFamily||""}`)}),n}function createMixins(t,n){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...n}}function round$6(t){return Math.round(t*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(t,n){const{fontFamily:a=defaultFontFamily,fontSize:s=14,fontWeightLight:l=300,fontWeightRegular:u=400,fontWeightMedium:c=500,fontWeightBold:p=700,htmlFontSize:d=16,allVariants:x,pxToRem:_,...S}=typeof n=="function"?n(t):n,T=s/14,A=_||(O=>`${O/d*T}rem`),R=(O,F,z,j,Z)=>({fontFamily:a,fontWeight:O,fontSize:A(F),lineHeight:z,...a===defaultFontFamily?{letterSpacing:`${round$6(j/F)}em`}:{},...Z,...x}),D={h1:R(l,96,1.167,-1.5),h2:R(l,60,1.2,-.5),h3:R(u,48,1.167,0),h4:R(u,34,1.235,.25),h5:R(u,24,1.334,0),h6:R(c,20,1.6,.15),subtitle1:R(u,16,1.75,.15),subtitle2:R(c,14,1.57,.1),body1:R(u,16,1.5,.15),body2:R(u,14,1.43,.15),button:R(c,14,1.75,.4,caseAllCaps),caption:R(u,12,1.66,.4),overline:R(u,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge({htmlFontSize:d,pxToRem:A,fontFamily:a,fontSize:s,fontWeightLight:l,fontWeightRegular:u,fontWeightMedium:c,fontWeightBold:p,...D},S,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(t){return`${Math.round(t)}ms`}function getAutoHeightDuration(t){if(!t)return 0;const n=t/36;return Math.min(Math.round((4+15*n**.25+n/5)*10),3e3)}function createTransitions(t){const n={...easing,...t.easing},a={...duration,...t.duration};return{getAutoHeightDuration,create:(l=["all"],u={})=>{const{duration:c=a.standard,easing:p=n.easeInOut,delay:d=0,...x}=u;return(Array.isArray(l)?l:[l]).map(_=>`${_} ${typeof c=="string"?c:formatMs(c)} ${p} ${typeof d=="string"?d:formatMs(d)}`).join(",")},...t,easing:n,duration:a}}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function isSerializable(t){return isPlainObject(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function stringifyTheme(t={}){const n={...t};function a(s){const l=Object.entries(s);for(let u=0;u<l.length;u++){const[c,p]=l[u];!isSerializable(p)||c.startsWith("unstable_")?delete s[c]:isPlainObject(p)&&(s[c]={...p},a(s[c]))}}return a(n),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(n,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function createThemeNoVars(t={},...n){const{breakpoints:a,mixins:s={},spacing:l,palette:u={},transitions:c={},typography:p={},shape:d,...x}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(formatMuiErrorMessage(20));const _=createPalette(u),S=createTheme$1(t);let T=deepmerge(S,{mixins:createMixins(S.breakpoints,s),palette:_,shadows:shadows.slice(),typography:createTypography(_,p),transitions:createTransitions(c),zIndex:{...zIndex}});return T=deepmerge(T,x),T=n.reduce((A,R)=>deepmerge(A,R),T),T.unstable_sxConfig={...defaultSxConfig,...x==null?void 0:x.unstable_sxConfig},T.unstable_sx=function(R){return styleFunctionSx({sx:R,theme:this})},T.toRuntimeSource=stringifyTheme,T}function getOverlayAlpha(t){let n;return t<1?n=5.11916*t**2:n=4.5*Math.log(t+1)+2,Math.round(n*10)/1e3}const defaultDarkOverlays=[...Array(25)].map((t,n)=>{if(n===0)return"none";const a=getOverlayAlpha(n);return`linear-gradient(rgba(255 255 255 / ${a}), rgba(255 255 255 / ${a}))`});function getOpacity(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function getOverlays(t){return t==="dark"?defaultDarkOverlays:[]}function createColorScheme(t){const{palette:n={mode:"light"},opacity:a,overlays:s,...l}=t,u=createPalette(n);return{palette:u,opacity:{...getOpacity(u.mode),...a},overlays:s||getOverlays(u.mode),...l}}function shouldSkipGeneratingVar(t){var n;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((n=t[1])!=null&&n.match(/(mode|contrastThreshold|tonalOffset)/))}const excludeVariablesFromRoot=t=>[...[...Array(25)].map((n,a)=>`--${t?`${t}-`:""}overlays-${a}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],defaultGetSelector=t=>(n,a)=>{const s=t.rootSelector||":root",l=t.colorSchemeSelector;let u=l;if(l==="class"&&(u=".%s"),l==="data"&&(u="[data-%s]"),l!=null&&l.startsWith("data-")&&!l.includes("%s")&&(u=`[${l}="%s"]`),t.defaultColorScheme===n){if(n==="dark"){const c={};return excludeVariablesFromRoot(t.cssVarPrefix).forEach(p=>{c[p]=a[p],delete a[p]}),u==="media"?{[s]:a,"@media (prefers-color-scheme: dark)":{[s]:c}}:u?{[u.replace("%s",n)]:c,[`${s}, ${u.replace("%s",n)}`]:a}:{[s]:{...a,...c}}}if(u&&u!=="media")return`${s}, ${u.replace("%s",String(n))}`}else if(n){if(u==="media")return{[`@media (prefers-color-scheme: ${String(n)})`]:{[s]:a}};if(u)return u.replace("%s",String(n))}return s};function assignNode(t,n){n.forEach(a=>{t[a]||(t[a]={})})}function setColor(t,n,a){!t[n]&&a&&(t[n]=a)}function toRgb(t){return typeof t!="string"||!t.startsWith("hsl")?t:hslToRgb(t)}function setColorChannel(t,n){`${n}Channel`in t||(t[`${n}Channel`]=private_safeColorChannel(toRgb(t[n])))}function getSpacingVal(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const silent=t=>{try{return t()}catch{}},createGetCssVar=(t="mui")=>createGetCssVar$1(t);function attachColorScheme$1(t,n,a,s){if(!n)return;n=n===!0?{}:n;const l=s==="dark"?"dark":"light";if(!a){t[s]=createColorScheme({...n,palette:{mode:l,...n==null?void 0:n.palette}});return}const{palette:u,...c}=createThemeNoVars({...a,palette:{mode:l,...n==null?void 0:n.palette}});return t[s]={...n,palette:u,opacity:{...getOpacity(l),...n==null?void 0:n.opacity},overlays:(n==null?void 0:n.overlays)||getOverlays(l)},c}function createThemeWithVars(t={},...n){const{colorSchemes:a={light:!0},defaultColorScheme:s,disableCssColorScheme:l=!1,cssVarPrefix:u="mui",shouldSkipGeneratingVar:c=shouldSkipGeneratingVar,colorSchemeSelector:p=a.light&&a.dark?"media":void 0,rootSelector:d=":root",...x}=t,_=Object.keys(a)[0],S=s||(a.light&&_!=="light"?"light":_),T=createGetCssVar(u),{[S]:A,light:R,dark:D,...O}=a,F={...O};let z=A;if((S==="dark"&&!("dark"in a)||S==="light"&&!("light"in a))&&(z=!0),!z)throw new Error(formatMuiErrorMessage(21,S));const j=attachColorScheme$1(F,z,x,S);R&&!F.light&&attachColorScheme$1(F,R,void 0,"light"),D&&!F.dark&&attachColorScheme$1(F,D,void 0,"dark");let Z={defaultColorScheme:S,...j,cssVarPrefix:u,colorSchemeSelector:p,rootSelector:d,getCssVar:T,colorSchemes:F,font:{...prepareTypographyVars(j.typography),...j.font},spacing:getSpacingVal(x.spacing)};Object.keys(Z.colorSchemes).forEach(Ct=>{const Q=Z.colorSchemes[Ct].palette,on=gn=>{const In=gn.split("-"),dn=In[1],ix=In[2];return T(gn,Q[dn][ix])};if(Q.mode==="light"&&(setColor(Q.common,"background","#fff"),setColor(Q.common,"onBackground","#000")),Q.mode==="dark"&&(setColor(Q.common,"background","#000"),setColor(Q.common,"onBackground","#fff")),assignNode(Q,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),Q.mode==="light"){setColor(Q.Alert,"errorColor",private_safeDarken(Q.error.light,.6)),setColor(Q.Alert,"infoColor",private_safeDarken(Q.info.light,.6)),setColor(Q.Alert,"successColor",private_safeDarken(Q.success.light,.6)),setColor(Q.Alert,"warningColor",private_safeDarken(Q.warning.light,.6)),setColor(Q.Alert,"errorFilledBg",on("palette-error-main")),setColor(Q.Alert,"infoFilledBg",on("palette-info-main")),setColor(Q.Alert,"successFilledBg",on("palette-success-main")),setColor(Q.Alert,"warningFilledBg",on("palette-warning-main")),setColor(Q.Alert,"errorFilledColor",silent(()=>Q.getContrastText(Q.error.main))),setColor(Q.Alert,"infoFilledColor",silent(()=>Q.getContrastText(Q.info.main))),setColor(Q.Alert,"successFilledColor",silent(()=>Q.getContrastText(Q.success.main))),setColor(Q.Alert,"warningFilledColor",silent(()=>Q.getContrastText(Q.warning.main))),setColor(Q.Alert,"errorStandardBg",private_safeLighten(Q.error.light,.9)),setColor(Q.Alert,"infoStandardBg",private_safeLighten(Q.info.light,.9)),setColor(Q.Alert,"successStandardBg",private_safeLighten(Q.success.light,.9)),setColor(Q.Alert,"warningStandardBg",private_safeLighten(Q.warning.light,.9)),setColor(Q.Alert,"errorIconColor",on("palette-error-main")),setColor(Q.Alert,"infoIconColor",on("palette-info-main")),setColor(Q.Alert,"successIconColor",on("palette-success-main")),setColor(Q.Alert,"warningIconColor",on("palette-warning-main")),setColor(Q.AppBar,"defaultBg",on("palette-grey-100")),setColor(Q.Avatar,"defaultBg",on("palette-grey-400")),setColor(Q.Button,"inheritContainedBg",on("palette-grey-300")),setColor(Q.Button,"inheritContainedHoverBg",on("palette-grey-A100")),setColor(Q.Chip,"defaultBorder",on("palette-grey-400")),setColor(Q.Chip,"defaultAvatarColor",on("palette-grey-700")),setColor(Q.Chip,"defaultIconColor",on("palette-grey-700")),setColor(Q.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),setColor(Q.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),setColor(Q.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),setColor(Q.LinearProgress,"primaryBg",private_safeLighten(Q.primary.main,.62)),setColor(Q.LinearProgress,"secondaryBg",private_safeLighten(Q.secondary.main,.62)),setColor(Q.LinearProgress,"errorBg",private_safeLighten(Q.error.main,.62)),setColor(Q.LinearProgress,"infoBg",private_safeLighten(Q.info.main,.62)),setColor(Q.LinearProgress,"successBg",private_safeLighten(Q.success.main,.62)),setColor(Q.LinearProgress,"warningBg",private_safeLighten(Q.warning.main,.62)),setColor(Q.Skeleton,"bg",`rgba(${on("palette-text-primaryChannel")} / 0.11)`),setColor(Q.Slider,"primaryTrack",private_safeLighten(Q.primary.main,.62)),setColor(Q.Slider,"secondaryTrack",private_safeLighten(Q.secondary.main,.62)),setColor(Q.Slider,"errorTrack",private_safeLighten(Q.error.main,.62)),setColor(Q.Slider,"infoTrack",private_safeLighten(Q.info.main,.62)),setColor(Q.Slider,"successTrack",private_safeLighten(Q.success.main,.62)),setColor(Q.Slider,"warningTrack",private_safeLighten(Q.warning.main,.62));const gn=private_safeEmphasize(Q.background.default,.8);setColor(Q.SnackbarContent,"bg",gn),setColor(Q.SnackbarContent,"color",silent(()=>Q.getContrastText(gn))),setColor(Q.SpeedDialAction,"fabHoverBg",private_safeEmphasize(Q.background.paper,.15)),setColor(Q.StepConnector,"border",on("palette-grey-400")),setColor(Q.StepContent,"border",on("palette-grey-400")),setColor(Q.Switch,"defaultColor",on("palette-common-white")),setColor(Q.Switch,"defaultDisabledColor",on("palette-grey-100")),setColor(Q.Switch,"primaryDisabledColor",private_safeLighten(Q.primary.main,.62)),setColor(Q.Switch,"secondaryDisabledColor",private_safeLighten(Q.secondary.main,.62)),setColor(Q.Switch,"errorDisabledColor",private_safeLighten(Q.error.main,.62)),setColor(Q.Switch,"infoDisabledColor",private_safeLighten(Q.info.main,.62)),setColor(Q.Switch,"successDisabledColor",private_safeLighten(Q.success.main,.62)),setColor(Q.Switch,"warningDisabledColor",private_safeLighten(Q.warning.main,.62)),setColor(Q.TableCell,"border",private_safeLighten(private_safeAlpha(Q.divider,1),.88)),setColor(Q.Tooltip,"bg",private_safeAlpha(Q.grey[700],.92))}if(Q.mode==="dark"){setColor(Q.Alert,"errorColor",private_safeLighten(Q.error.light,.6)),setColor(Q.Alert,"infoColor",private_safeLighten(Q.info.light,.6)),setColor(Q.Alert,"successColor",private_safeLighten(Q.success.light,.6)),setColor(Q.Alert,"warningColor",private_safeLighten(Q.warning.light,.6)),setColor(Q.Alert,"errorFilledBg",on("palette-error-dark")),setColor(Q.Alert,"infoFilledBg",on("palette-info-dark")),setColor(Q.Alert,"successFilledBg",on("palette-success-dark")),setColor(Q.Alert,"warningFilledBg",on("palette-warning-dark")),setColor(Q.Alert,"errorFilledColor",silent(()=>Q.getContrastText(Q.error.dark))),setColor(Q.Alert,"infoFilledColor",silent(()=>Q.getContrastText(Q.info.dark))),setColor(Q.Alert,"successFilledColor",silent(()=>Q.getContrastText(Q.success.dark))),setColor(Q.Alert,"warningFilledColor",silent(()=>Q.getContrastText(Q.warning.dark))),setColor(Q.Alert,"errorStandardBg",private_safeDarken(Q.error.light,.9)),setColor(Q.Alert,"infoStandardBg",private_safeDarken(Q.info.light,.9)),setColor(Q.Alert,"successStandardBg",private_safeDarken(Q.success.light,.9)),setColor(Q.Alert,"warningStandardBg",private_safeDarken(Q.warning.light,.9)),setColor(Q.Alert,"errorIconColor",on("palette-error-main")),setColor(Q.Alert,"infoIconColor",on("palette-info-main")),setColor(Q.Alert,"successIconColor",on("palette-success-main")),setColor(Q.Alert,"warningIconColor",on("palette-warning-main")),setColor(Q.AppBar,"defaultBg",on("palette-grey-900")),setColor(Q.AppBar,"darkBg",on("palette-background-paper")),setColor(Q.AppBar,"darkColor",on("palette-text-primary")),setColor(Q.Avatar,"defaultBg",on("palette-grey-600")),setColor(Q.Button,"inheritContainedBg",on("palette-grey-800")),setColor(Q.Button,"inheritContainedHoverBg",on("palette-grey-700")),setColor(Q.Chip,"defaultBorder",on("palette-grey-700")),setColor(Q.Chip,"defaultAvatarColor",on("palette-grey-300")),setColor(Q.Chip,"defaultIconColor",on("palette-grey-300")),setColor(Q.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),setColor(Q.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),setColor(Q.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),setColor(Q.LinearProgress,"primaryBg",private_safeDarken(Q.primary.main,.5)),setColor(Q.LinearProgress,"secondaryBg",private_safeDarken(Q.secondary.main,.5)),setColor(Q.LinearProgress,"errorBg",private_safeDarken(Q.error.main,.5)),setColor(Q.LinearProgress,"infoBg",private_safeDarken(Q.info.main,.5)),setColor(Q.LinearProgress,"successBg",private_safeDarken(Q.success.main,.5)),setColor(Q.LinearProgress,"warningBg",private_safeDarken(Q.warning.main,.5)),setColor(Q.Skeleton,"bg",`rgba(${on("palette-text-primaryChannel")} / 0.13)`),setColor(Q.Slider,"primaryTrack",private_safeDarken(Q.primary.main,.5)),setColor(Q.Slider,"secondaryTrack",private_safeDarken(Q.secondary.main,.5)),setColor(Q.Slider,"errorTrack",private_safeDarken(Q.error.main,.5)),setColor(Q.Slider,"infoTrack",private_safeDarken(Q.info.main,.5)),setColor(Q.Slider,"successTrack",private_safeDarken(Q.success.main,.5)),setColor(Q.Slider,"warningTrack",private_safeDarken(Q.warning.main,.5));const gn=private_safeEmphasize(Q.background.default,.98);setColor(Q.SnackbarContent,"bg",gn),setColor(Q.SnackbarContent,"color",silent(()=>Q.getContrastText(gn))),setColor(Q.SpeedDialAction,"fabHoverBg",private_safeEmphasize(Q.background.paper,.15)),setColor(Q.StepConnector,"border",on("palette-grey-600")),setColor(Q.StepContent,"border",on("palette-grey-600")),setColor(Q.Switch,"defaultColor",on("palette-grey-300")),setColor(Q.Switch,"defaultDisabledColor",on("palette-grey-600")),setColor(Q.Switch,"primaryDisabledColor",private_safeDarken(Q.primary.main,.55)),setColor(Q.Switch,"secondaryDisabledColor",private_safeDarken(Q.secondary.main,.55)),setColor(Q.Switch,"errorDisabledColor",private_safeDarken(Q.error.main,.55)),setColor(Q.Switch,"infoDisabledColor",private_safeDarken(Q.info.main,.55)),setColor(Q.Switch,"successDisabledColor",private_safeDarken(Q.success.main,.55)),setColor(Q.Switch,"warningDisabledColor",private_safeDarken(Q.warning.main,.55)),setColor(Q.TableCell,"border",private_safeDarken(private_safeAlpha(Q.divider,1),.68)),setColor(Q.Tooltip,"bg",private_safeAlpha(Q.grey[700],.92))}setColorChannel(Q.background,"default"),setColorChannel(Q.background,"paper"),setColorChannel(Q.common,"background"),setColorChannel(Q.common,"onBackground"),setColorChannel(Q,"divider"),Object.keys(Q).forEach(gn=>{const In=Q[gn];gn!=="tonalOffset"&&In&&typeof In=="object"&&(In.main&&setColor(Q[gn],"mainChannel",private_safeColorChannel(toRgb(In.main))),In.light&&setColor(Q[gn],"lightChannel",private_safeColorChannel(toRgb(In.light))),In.dark&&setColor(Q[gn],"darkChannel",private_safeColorChannel(toRgb(In.dark))),In.contrastText&&setColor(Q[gn],"contrastTextChannel",private_safeColorChannel(toRgb(In.contrastText))),gn==="text"&&(setColorChannel(Q[gn],"primary"),setColorChannel(Q[gn],"secondary")),gn==="action"&&(In.active&&setColorChannel(Q[gn],"active"),In.selected&&setColorChannel(Q[gn],"selected")))})}),Z=n.reduce((Ct,Q)=>deepmerge(Ct,Q),Z);const W={prefix:u,disableCssColorScheme:l,shouldSkipGeneratingVar:c,getSelector:defaultGetSelector(Z)},{vars:J,generateThemeVars:en,generateStyleSheets:tn}=prepareCssVars(Z,W);return Z.vars=J,Object.entries(Z.colorSchemes[Z.defaultColorScheme]).forEach(([Ct,Q])=>{Z[Ct]=Q}),Z.generateThemeVars=en,Z.generateStyleSheets=tn,Z.generateSpacing=function(){return createSpacing(x.spacing,createUnarySpacing(this))},Z.getColorSchemeSelector=createGetColorSchemeSelector(p),Z.spacing=Z.generateSpacing(),Z.shouldSkipGeneratingVar=c,Z.unstable_sxConfig={...defaultSxConfig,...x==null?void 0:x.unstable_sxConfig},Z.unstable_sx=function(Q){return styleFunctionSx({sx:Q,theme:this})},Z.toRuntimeSource=stringifyTheme,Z}function attachColorScheme(t,n,a){t.colorSchemes&&a&&(t.colorSchemes[n]={...a!==!0&&a,palette:createPalette({...a===!0?{}:a.palette,mode:n})})}function createTheme(t={},...n){const{palette:a,cssVariables:s=!1,colorSchemes:l=a?void 0:{light:!0},defaultColorScheme:u=a==null?void 0:a.mode,...c}=t,p=u||"light",d=l==null?void 0:l[p],x={...l,...a?{[p]:{...typeof d!="boolean"&&d,palette:a}}:void 0};if(s===!1){if(!("colorSchemes"in t))return createThemeNoVars(t,...n);let _=a;"palette"in t||x[p]&&(x[p]!==!0?_=x[p].palette:p==="dark"&&(_={mode:"dark"}));const S=createThemeNoVars({...t,palette:_},...n);return S.defaultColorScheme=p,S.colorSchemes=x,S.palette.mode==="light"&&(S.colorSchemes.light={...x.light!==!0&&x.light,palette:S.palette},attachColorScheme(S,"dark",x.dark)),S.palette.mode==="dark"&&(S.colorSchemes.dark={...x.dark!==!0&&x.dark,palette:S.palette},attachColorScheme(S,"light",x.light)),S}return!a&&!("light"in x)&&p==="light"&&(x.light=!0),createThemeWithVars({...c,colorSchemes:x,defaultColorScheme:p,...typeof s!="boolean"&&s},...n)}const defaultTheme$1=createTheme(),THEME_ID="$$material";function useTheme(){const t=useTheme$2(defaultTheme$1);return t[THEME_ID]||t}function GlobalStyles(t){return jsxRuntimeExports.jsx(GlobalStyles$1,{...t,defaultTheme:defaultTheme$1,themeId:THEME_ID})}function slotShouldForwardProp(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const rootShouldForwardProp=t=>slotShouldForwardProp(t)&&t!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$1,rootShouldForwardProp});function globalCss(t){return function(a){return jsxRuntimeExports.jsx(GlobalStyles,{styles:typeof t=="function"?s=>t({theme:s,...a}):t})}}function internal_createExtendSxProp(){return extendSxProp$1}const memoTheme=unstable_memoTheme;function useDefaultProps(t){return useDefaultProps$1(t)}function getSvgIconUtilityClass(t){return generateUtilityClass("MuiSvgIcon",t)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const useUtilityClasses$F=t=>{const{color:n,fontSize:a,classes:s}=t,l={root:["root",n!=="inherit"&&`color${capitalize(n)}`,`fontSize${capitalize(a)}`]};return composeClasses(l,getSvgIconUtilityClass,s)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.color!=="inherit"&&n[`color${capitalize(a.color)}`],n[`fontSize${capitalize(a.fontSize)}`]]}})(memoTheme(({theme:t})=>{var n,a,s,l,u,c,p,d,x,_,S,T,A,R;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(l=(n=t.transitions)==null?void 0:n.create)==null?void 0:l.call(n,"fill",{duration:(s=(a=(t.vars??t).transitions)==null?void 0:a.duration)==null?void 0:s.shorter}),variants:[{props:D=>!D.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((c=(u=t.typography)==null?void 0:u.pxToRem)==null?void 0:c.call(u,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((d=(p=t.typography)==null?void 0:p.pxToRem)==null?void 0:d.call(p,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((_=(x=t.typography)==null?void 0:x.pxToRem)==null?void 0:_.call(x,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,D])=>D&&D.main).map(([D])=>{var O,F;return{props:{color:D},style:{color:(F=(O=(t.vars??t).palette)==null?void 0:O[D])==null?void 0:F.main}}}),{props:{color:"action"},style:{color:(T=(S=(t.vars??t).palette)==null?void 0:S.action)==null?void 0:T.active}},{props:{color:"disabled"},style:{color:(R=(A=(t.vars??t).palette)==null?void 0:A.action)==null?void 0:R.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),SvgIcon=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiSvgIcon"}),{children:l,className:u,color:c="inherit",component:p="svg",fontSize:d="medium",htmlColor:x,inheritViewBox:_=!1,titleAccess:S,viewBox:T="0 0 24 24",...A}=s,R=reactExports.isValidElement(l)&&l.type==="svg",D={...s,color:c,component:p,fontSize:d,instanceFontSize:n.fontSize,inheritViewBox:_,viewBox:T,hasSvgAsChild:R},O={};_||(O.viewBox=T);const F=useUtilityClasses$F(D);return jsxRuntimeExports.jsxs(SvgIconRoot,{as:p,className:clsx(F.root,u),focusable:"false",color:x,"aria-hidden":S?void 0:!0,role:S?"img":void 0,ref:a,...O,...A,...R&&l.props,ownerState:D,children:[R?l.props.children:l,S?jsxRuntimeExports.jsx("title",{children:S}):null]})});SvgIcon.muiName="SvgIcon";function createSvgIcon(t,n){function a(s,l){return jsxRuntimeExports.jsx(SvgIcon,{"data-testid":void 0,ref:l,...s,children:t})}return a.muiName=SvgIcon.muiName,reactExports.memo(reactExports.forwardRef(a))}function debounce$2(t,n=166){let a;function s(...l){const u=()=>{t.apply(this,l)};clearTimeout(a),a=setTimeout(u,n)}return s.clear=()=>{clearTimeout(a)},s}function ownerDocument(t){return t&&t.ownerDocument||document}function ownerWindow(t){return ownerDocument(t).defaultView||window}function setRef(t,n){typeof t=="function"?t(n):t&&(t.current=n)}let globalId=0;function useGlobalId(t){const[n,a]=reactExports.useState(t),s=t||n;return reactExports.useEffect(()=>{n==null&&(globalId+=1,a(`mui-${globalId}`))},[n]),s}const safeReact={...React$1},maybeReactUseId=safeReact.useId;function useId(t){if(maybeReactUseId!==void 0){const n=maybeReactUseId();return t??n}return useGlobalId(t)}function useControlled(t){const{controlled:n,default:a,name:s,state:l="value"}=t,{current:u}=reactExports.useRef(n!==void 0),[c,p]=reactExports.useState(a),d=u?n:c,x=reactExports.useCallback(_=>{u||p(_)},[]);return[d,x]}function useEventCallback(t){const n=reactExports.useRef(t);return useEnhancedEffect(()=>{n.current=t}),reactExports.useRef((...a)=>(0,n.current)(...a)).current}function useForkRef(...t){const n=reactExports.useRef(void 0),a=reactExports.useCallback(s=>{const l=t.map(u=>{if(u==null)return null;if(typeof u=="function"){const c=u,p=c(s);return typeof p=="function"?p:()=>{c(null)}}return u.current=s,()=>{u.current=null}});return()=>{l.forEach(u=>u==null?void 0:u())}},t);return reactExports.useMemo(()=>t.every(s=>s==null)?null:s=>{n.current&&(n.current(),n.current=void 0),s!=null&&(n.current=a(s))},t)}function isEventHandler(t,n){const a=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&a>=65&&a<=90&&typeof n=="function"}function mergeSlotProps$1(t,n){if(!t)return n;function a(c,p){const d={};return Object.keys(p).forEach(x=>{isEventHandler(x,p[x])&&typeof c[x]=="function"&&(d[x]=(..._)=>{c[x](..._),p[x](..._)})}),d}if(typeof t=="function"||typeof n=="function")return c=>{const p=typeof n=="function"?n(c):n,d=typeof t=="function"?t({...c,...p}):t,x=clsx(c==null?void 0:c.className,p==null?void 0:p.className,d==null?void 0:d.className),_=a(d,p);return{...p,...d,..._,...!!x&&{className:x},...(p==null?void 0:p.style)&&(d==null?void 0:d.style)&&{style:{...p.style,...d.style}},...(p==null?void 0:p.sx)&&(d==null?void 0:d.sx)&&{sx:[...Array.isArray(p.sx)?p.sx:[p.sx],...Array.isArray(d.sx)?d.sx:[d.sx]]}}};const s=n,l=a(t,s),u=clsx(s==null?void 0:s.className,t==null?void 0:t.className);return{...n,...t,...l,...!!u&&{className:u},...(s==null?void 0:s.style)&&(t==null?void 0:t.style)&&{style:{...s.style,...t.style}},...(s==null?void 0:s.sx)&&(t==null?void 0:t.sx)&&{sx:[...Array.isArray(s.sx)?s.sx:[s.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function isFocusVisible(t){try{return t.matches(":focus-visible")}catch{}return!1}const UNINITIALIZED={};function useLazyRef(t,n){const a=reactExports.useRef(UNINITIALIZED);return a.current===UNINITIALIZED&&(a.current=t(n)),a}class LazyRipple{constructor(){BC(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new LazyRipple}static use(){const n=useLazyRef(LazyRipple.create).current,[a,s]=reactExports.useState(!1);return n.shouldMount=a,n.setShouldMount=s,reactExports.useEffect(n.mountEffect,[a]),n}mount(){return this.mounted||(this.mounted=createControlledPromise(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...n){this.mount().then(()=>{var a;return(a=this.ref.current)==null?void 0:a.start(...n)})}stop(...n){this.mount().then(()=>{var a;return(a=this.ref.current)==null?void 0:a.stop(...n)})}pulsate(...n){this.mount().then(()=>{var a;return(a=this.ref.current)==null?void 0:a.pulsate(...n)})}}function useLazyRipple(){return LazyRipple.use()}function createControlledPromise(){let t,n;const a=new Promise((s,l)=>{t=s,n=l});return a.resolve=t,a.reject=n,a}function _objectWithoutPropertiesLoose(t,n){if(t==null)return{};var a={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;a[s]=t[s]}return a}function _setPrototypeOf(t,n){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},_setPrototypeOf(t,n)}function _inheritsLoose(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,_setPrototypeOf(t,n)}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports),config$1={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(n){return n.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(t){_inheritsLoose(n,t);function n(s,l){var u;u=t.call(this,s,l)||this;var c=l,p=c&&!c.isMounting?s.enter:s.appear,d;return u.appearStatus=null,s.in?p?(d=EXITED,u.appearStatus=ENTERING):d=ENTERED:s.unmountOnExit||s.mountOnEnter?d=UNMOUNTED:d=EXITED,u.state={status:d},u.nextCallback=null,u}n.getDerivedStateFromProps=function(l,u){var c=l.in;return c&&u.status===UNMOUNTED?{status:EXITED}:null};var a=n.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(l){var u=null;if(l!==this.props){var c=this.state.status;this.props.in?c!==ENTERING&&c!==ENTERED&&(u=ENTERING):(c===ENTERING||c===ENTERED)&&(u=EXITING)}this.updateStatus(!1,u)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var l=this.props.timeout,u,c,p;return u=c=p=l,l!=null&&typeof l!="number"&&(u=l.exit,c=l.enter,p=l.appear!==void 0?l.appear:c),{exit:u,enter:c,appear:p}},a.updateStatus=function(l,u){if(l===void 0&&(l=!1),u!==null)if(this.cancelNextCallback(),u===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);c&&forceReflow(c)}this.performEnter(l)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},a.performEnter=function(l){var u=this,c=this.props.enter,p=this.context?this.context.isMounting:l,d=this.props.nodeRef?[p]:[ReactDOM.findDOMNode(this),p],x=d[0],_=d[1],S=this.getTimeouts(),T=p?S.appear:S.enter;if(!l&&!c||config$1.disabled){this.safeSetState({status:ENTERED},function(){u.props.onEntered(x)});return}this.props.onEnter(x,_),this.safeSetState({status:ENTERING},function(){u.props.onEntering(x,_),u.onTransitionEnd(T,function(){u.safeSetState({status:ENTERED},function(){u.props.onEntered(x,_)})})})},a.performExit=function(){var l=this,u=this.props.exit,c=this.getTimeouts(),p=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!u||config$1.disabled){this.safeSetState({status:EXITED},function(){l.props.onExited(p)});return}this.props.onExit(p),this.safeSetState({status:EXITING},function(){l.props.onExiting(p),l.onTransitionEnd(c.exit,function(){l.safeSetState({status:EXITED},function(){l.props.onExited(p)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(l,u){u=this.setNextCallback(u),this.setState(l,u)},a.setNextCallback=function(l){var u=this,c=!0;return this.nextCallback=function(p){c&&(c=!1,u.nextCallback=null,l(p))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},a.onTransitionEnd=function(l,u){this.setNextCallback(u);var c=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),p=l==null&&!this.props.addEndListener;if(!c||p){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],x=d[0],_=d[1];this.props.addEndListener(x,_)}l!=null&&setTimeout(this.nextCallback,l)},a.render=function(){var l=this.state.status;if(l===UNMOUNTED)return null;var u=this.props,c=u.children;u.in,u.mountOnEnter,u.unmountOnExit,u.appear,u.enter,u.exit,u.timeout,u.addEndListener,u.onEnter,u.onEntering,u.onEntered,u.onExit,u.onExiting,u.onExited,u.nodeRef;var p=_objectWithoutPropertiesLoose(u,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof c=="function"?c(l,p):React.cloneElement(React.Children.only(c),p))},n}(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$2(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$2,onEntering:noop$2,onEntered:noop$2,onExit:noop$2,onExiting:noop$2,onExited:noop$2};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;function _assertThisInitialized(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function getChildMapping(t,n){var a=function(u){return n&&reactExports.isValidElement(u)?n(u):u},s=Object.create(null);return t&&reactExports.Children.map(t,function(l){return l}).forEach(function(l){s[l.key]=a(l)}),s}function mergeChildMappings(t,n){t=t||{},n=n||{};function a(_){return _ in n?n[_]:t[_]}var s=Object.create(null),l=[];for(var u in t)u in n?l.length&&(s[u]=l,l=[]):l.push(u);var c,p={};for(var d in n){if(s[d])for(c=0;c<s[d].length;c++){var x=s[d][c];p[s[d][c]]=a(x)}p[d]=a(d)}for(c=0;c<l.length;c++)p[l[c]]=a(l[c]);return p}function getProp(t,n,a){return a[n]!=null?a[n]:t.props[n]}function getInitialChildMapping(t,n){return getChildMapping(t.children,function(a){return reactExports.cloneElement(a,{onExited:n.bind(null,a),in:!0,appear:getProp(a,"appear",t),enter:getProp(a,"enter",t),exit:getProp(a,"exit",t)})})}function getNextChildMapping(t,n,a){var s=getChildMapping(t.children),l=mergeChildMappings(n,s);return Object.keys(l).forEach(function(u){var c=l[u];if(reactExports.isValidElement(c)){var p=u in n,d=u in s,x=n[u],_=reactExports.isValidElement(x)&&!x.props.in;d&&(!p||_)?l[u]=reactExports.cloneElement(c,{onExited:a.bind(null,c),in:!0,exit:getProp(c,"exit",t),enter:getProp(c,"enter",t)}):!d&&p&&!_?l[u]=reactExports.cloneElement(c,{in:!1}):d&&p&&reactExports.isValidElement(x)&&(l[u]=reactExports.cloneElement(c,{onExited:a.bind(null,c),in:x.props.in,exit:getProp(c,"exit",t),enter:getProp(c,"enter",t)}))}}),l}var values=Object.values||function(t){return Object.keys(t).map(function(n){return t[n]})},defaultProps={component:"div",childFactory:function(n){return n}},TransitionGroup=function(t){_inheritsLoose(n,t);function n(s,l){var u;u=t.call(this,s,l)||this;var c=u.handleExited.bind(_assertThisInitialized(u));return u.state={contextValue:{isMounting:!0},handleExited:c,firstRender:!0},u}var a=n.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(l,u){var c=u.children,p=u.handleExited,d=u.firstRender;return{children:d?getInitialChildMapping(l,p):getNextChildMapping(l,c,p),firstRender:!1}},a.handleExited=function(l,u){var c=getChildMapping(this.props.children);l.key in c||(l.props.onExited&&l.props.onExited(u),this.mounted&&this.setState(function(p){var d=_extends({},p.children);return delete d[l.key],{children:d}}))},a.render=function(){var l=this.props,u=l.component,c=l.childFactory,p=_objectWithoutPropertiesLoose(l,["component","childFactory"]),d=this.state.contextValue,x=values(this.state.children).map(c);return delete p.appear,delete p.enter,delete p.exit,u===null?React.createElement(TransitionGroupContext.Provider,{value:d},x):React.createElement(TransitionGroupContext.Provider,{value:d},React.createElement(u,p,x))},n}(React.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const EMPTY=[];function useOnMount(t){reactExports.useEffect(t,EMPTY)}class Timeout{constructor(){BC(this,"currentId",null);BC(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});BC(this,"disposeEffect",()=>this.clear)}static create(){return new Timeout}start(n,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},n)}}function useTimeout(){const t=useLazyRef(Timeout.create).current;return useOnMount(t.disposeEffect),t}function Ripple(t){const{className:n,classes:a,pulsate:s=!1,rippleX:l,rippleY:u,rippleSize:c,in:p,onExited:d,timeout:x}=t,[_,S]=reactExports.useState(!1),T=clsx(n,a.ripple,a.rippleVisible,s&&a.ripplePulsate),A={width:c,height:c,top:-(c/2)+u,left:-(c/2)+l},R=clsx(a.child,_&&a.childLeaving,s&&a.childPulsate);return!p&&!_&&S(!0),reactExports.useEffect(()=>{if(!p&&d!=null){const D=setTimeout(d,x);return()=>{clearTimeout(D)}}},[d,p,x]),jsxRuntimeExports.jsx("span",{className:T,style:A,children:jsxRuntimeExports.jsx("span",{className:R})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,exitKeyframe=keyframes`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,pulsateKeyframe=keyframes`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,TouchRippleRoot=styled("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${touchRippleClasses.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${enterKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${touchRippleClasses.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${touchRippleClasses.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${touchRippleClasses.childLeaving} {
    opacity: 0;
    animation-name: ${exitKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${touchRippleClasses.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${pulsateKeyframe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,TouchRipple=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiTouchRipple"}),{center:l=!1,classes:u={},className:c,...p}=s,[d,x]=reactExports.useState([]),_=reactExports.useRef(0),S=reactExports.useRef(null);reactExports.useEffect(()=>{S.current&&(S.current(),S.current=null)},[d]);const T=reactExports.useRef(!1),A=useTimeout(),R=reactExports.useRef(null),D=reactExports.useRef(null),O=reactExports.useCallback(Z=>{const{pulsate:W,rippleX:J,rippleY:en,rippleSize:tn,cb:Ct}=Z;x(Q=>[...Q,jsxRuntimeExports.jsx(TouchRippleRipple,{classes:{ripple:clsx(u.ripple,touchRippleClasses.ripple),rippleVisible:clsx(u.rippleVisible,touchRippleClasses.rippleVisible),ripplePulsate:clsx(u.ripplePulsate,touchRippleClasses.ripplePulsate),child:clsx(u.child,touchRippleClasses.child),childLeaving:clsx(u.childLeaving,touchRippleClasses.childLeaving),childPulsate:clsx(u.childPulsate,touchRippleClasses.childPulsate)},timeout:DURATION,pulsate:W,rippleX:J,rippleY:en,rippleSize:tn},_.current)]),_.current+=1,S.current=Ct},[u]),F=reactExports.useCallback((Z={},W={},J=()=>{})=>{const{pulsate:en=!1,center:tn=l||W.pulsate,fakeElement:Ct=!1}=W;if((Z==null?void 0:Z.type)==="mousedown"&&T.current){T.current=!1;return}(Z==null?void 0:Z.type)==="touchstart"&&(T.current=!0);const Q=Ct?null:D.current,on=Q?Q.getBoundingClientRect():{width:0,height:0,left:0,top:0};let gn,In,dn;if(tn||Z===void 0||Z.clientX===0&&Z.clientY===0||!Z.clientX&&!Z.touches)gn=Math.round(on.width/2),In=Math.round(on.height/2);else{const{clientX:ix,clientY:Cn}=Z.touches&&Z.touches.length>0?Z.touches[0]:Z;gn=Math.round(ix-on.left),In=Math.round(Cn-on.top)}if(tn)dn=Math.sqrt((2*on.width**2+on.height**2)/3),dn%2===0&&(dn+=1);else{const ix=Math.max(Math.abs((Q?Q.clientWidth:0)-gn),gn)*2+2,Cn=Math.max(Math.abs((Q?Q.clientHeight:0)-In),In)*2+2;dn=Math.sqrt(ix**2+Cn**2)}Z!=null&&Z.touches?R.current===null&&(R.current=()=>{O({pulsate:en,rippleX:gn,rippleY:In,rippleSize:dn,cb:J})},A.start(DELAY_RIPPLE,()=>{R.current&&(R.current(),R.current=null)})):O({pulsate:en,rippleX:gn,rippleY:In,rippleSize:dn,cb:J})},[l,O,A]),z=reactExports.useCallback(()=>{F({},{pulsate:!0})},[F]),j=reactExports.useCallback((Z,W)=>{if(A.clear(),(Z==null?void 0:Z.type)==="touchend"&&R.current){R.current(),R.current=null,A.start(0,()=>{j(Z,W)});return}R.current=null,x(J=>J.length>0?J.slice(1):J),S.current=W},[A]);return reactExports.useImperativeHandle(a,()=>({pulsate:z,start:F,stop:j}),[z,F,j]),jsxRuntimeExports.jsx(TouchRippleRoot,{className:clsx(touchRippleClasses.root,u.root,c),ref:D,...p,children:jsxRuntimeExports.jsx(TransitionGroup,{component:null,exit:!0,children:d})})});function getButtonBaseUtilityClass(t){return generateUtilityClass("MuiButtonBase",t)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]),useUtilityClasses$E=t=>{const{disabled:n,focusVisible:a,focusVisibleClassName:s,classes:l}=t,c=composeClasses({root:["root",n&&"disabled",a&&"focusVisible"]},getButtonBaseUtilityClass,l);return a&&s&&(c.root+=` ${s}`),c},ButtonBaseRoot=styled("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiButtonBase"}),{action:l,centerRipple:u=!1,children:c,className:p,component:d="button",disabled:x=!1,disableRipple:_=!1,disableTouchRipple:S=!1,focusRipple:T=!1,focusVisibleClassName:A,LinkComponent:R="a",onBlur:D,onClick:O,onContextMenu:F,onDragLeave:z,onFocus:j,onFocusVisible:Z,onKeyDown:W,onKeyUp:J,onMouseDown:en,onMouseLeave:tn,onMouseUp:Ct,onTouchEnd:Q,onTouchMove:on,onTouchStart:gn,tabIndex:In=0,TouchRippleProps:dn,touchRippleRef:ix,type:Cn,...ax}=s,sx=reactExports.useRef(null),lx=useLazyRipple(),ox=useForkRef(lx.ref,ix),[hx,_x]=reactExports.useState(!1);x&&hx&&_x(!1),reactExports.useImperativeHandle(l,()=>({focusVisible:()=>{_x(!0),sx.current.focus()}}),[]);const ux=lx.shouldMount&&!_&&!x;reactExports.useEffect(()=>{hx&&T&&!_&&lx.pulsate()},[_,T,hx,lx]);const px=useRippleHandler(lx,"start",en,S),dx=useRippleHandler(lx,"stop",F,S),mx=useRippleHandler(lx,"stop",z,S),gx=useRippleHandler(lx,"stop",Ct,S),Sx=useRippleHandler(lx,"stop",iE=>{hx&&iE.preventDefault(),tn&&tn(iE)},S),Ex=useRippleHandler(lx,"start",gn,S),Cx=useRippleHandler(lx,"stop",Q,S),Ax=useRippleHandler(lx,"stop",on,S),Tx=useRippleHandler(lx,"stop",iE=>{isFocusVisible(iE.target)||_x(!1),D&&D(iE)},!1),kx=useEventCallback(iE=>{sx.current||(sx.current=iE.currentTarget),isFocusVisible(iE.target)&&(_x(!0),Z&&Z(iE)),j&&j(iE)}),Rx=()=>{const iE=sx.current;return d&&d!=="button"&&!(iE.tagName==="A"&&iE.href)},$x=useEventCallback(iE=>{T&&!iE.repeat&&hx&&iE.key===" "&&lx.stop(iE,()=>{lx.start(iE)}),iE.target===iE.currentTarget&&Rx()&&iE.key===" "&&iE.preventDefault(),W&&W(iE),iE.target===iE.currentTarget&&Rx()&&iE.key==="Enter"&&!x&&(iE.preventDefault(),O&&O(iE))}),Gx=useEventCallback(iE=>{T&&iE.key===" "&&hx&&!iE.defaultPrevented&&lx.stop(iE,()=>{lx.pulsate(iE)}),J&&J(iE),O&&iE.target===iE.currentTarget&&Rx()&&iE.key===" "&&!iE.defaultPrevented&&O(iE)});let qx=d;qx==="button"&&(ax.href||ax.to)&&(qx=R);const Dx={};qx==="button"?(Dx.type=Cn===void 0?"button":Cn,Dx.disabled=x):(!ax.href&&!ax.to&&(Dx.role="button"),x&&(Dx["aria-disabled"]=x));const lE=useForkRef(a,sx),cE={...s,centerRipple:u,component:d,disabled:x,disableRipple:_,disableTouchRipple:S,focusRipple:T,tabIndex:In,focusVisible:hx},nE=useUtilityClasses$E(cE);return jsxRuntimeExports.jsxs(ButtonBaseRoot,{as:qx,className:clsx(nE.root,p),ownerState:cE,onBlur:Tx,onClick:O,onContextMenu:dx,onFocus:kx,onKeyDown:$x,onKeyUp:Gx,onMouseDown:px,onMouseLeave:Sx,onMouseUp:gx,onDragLeave:mx,onTouchEnd:Cx,onTouchMove:Ax,onTouchStart:Ex,ref:lE,tabIndex:x?-1:In,type:Cn,...Dx,...ax,children:[c,ux?jsxRuntimeExports.jsx(TouchRipple,{ref:ox,center:u,...dn}):null]})});function useRippleHandler(t,n,a,s=!1){return useEventCallback(l=>(a&&a(l),s||t[n](l),!0))}function hasCorrectMainProperty(t){return typeof t.main=="string"}function checkSimplePaletteColorValues(t,n=[]){if(!hasCorrectMainProperty(t))return!1;for(const a of n)if(!t.hasOwnProperty(a)||typeof t[a]!="string")return!1;return!0}function createSimplePaletteValueFilter(t=[]){return([,n])=>n&&checkSimplePaletteColorValues(n,t)}function getCircularProgressUtilityClass(t){return generateUtilityClass("MuiCircularProgress",t)}generateUtilityClasses("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const SIZE=44,circularRotateKeyframe=keyframes`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,circularDashKeyframe=keyframes`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,rotateAnimation=typeof circularRotateKeyframe!="string"?css`
        animation: ${circularRotateKeyframe} 1.4s linear infinite;
      `:null,dashAnimation=typeof circularDashKeyframe!="string"?css`
        animation: ${circularDashKeyframe} 1.4s ease-in-out infinite;
      `:null,useUtilityClasses$D=t=>{const{classes:n,variant:a,color:s,disableShrink:l}=t,u={root:["root",a,`color${capitalize(s)}`],svg:["svg"],circle:["circle",`circle${capitalize(a)}`,l&&"circleDisableShrink"]};return composeClasses(u,getCircularProgressUtilityClass,n)},CircularProgressRoot=styled("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],n[`color${capitalize(a.color)}`]]}})(memoTheme(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:rotateAnimation||{animation:`${circularRotateKeyframe} 1.4s linear infinite`}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}}))]}))),CircularProgressSVG=styled("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),CircularProgressCircle=styled("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.circle,n[`circle${capitalize(a.variant)}`],a.disableShrink&&n.circleDisableShrink]}})(memoTheme(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:n})=>n.variant==="indeterminate"&&!n.disableShrink,style:dashAnimation||{animation:`${circularDashKeyframe} 1.4s ease-in-out infinite`}}]}))),CircularProgress=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiCircularProgress"}),{className:l,color:u="primary",disableShrink:c=!1,size:p=40,style:d,thickness:x=3.6,value:_=0,variant:S="indeterminate",...T}=s,A={...s,color:u,disableShrink:c,size:p,thickness:x,value:_,variant:S},R=useUtilityClasses$D(A),D={},O={},F={};if(S==="determinate"){const z=2*Math.PI*((SIZE-x)/2);D.strokeDasharray=z.toFixed(3),F["aria-valuenow"]=Math.round(_),D.strokeDashoffset=`${((100-_)/100*z).toFixed(3)}px`,O.transform="rotate(-90deg)"}return jsxRuntimeExports.jsx(CircularProgressRoot,{className:clsx(R.root,l),style:{width:p,height:p,...O,...d},ownerState:A,ref:a,role:"progressbar",...F,...T,children:jsxRuntimeExports.jsx(CircularProgressSVG,{className:R.svg,ownerState:A,viewBox:`${SIZE/2} ${SIZE/2} ${SIZE} ${SIZE}`,children:jsxRuntimeExports.jsx(CircularProgressCircle,{className:R.circle,style:D,ownerState:A,cx:SIZE,cy:SIZE,r:(SIZE-x)/2,fill:"none",strokeWidth:x})})})});function getButtonUtilityClass(t){return generateUtilityClass("MuiButton",t)}const buttonClasses=generateUtilityClasses("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),ButtonGroupContext=reactExports.createContext({}),ButtonGroupButtonContext=reactExports.createContext(void 0),useUtilityClasses$C=t=>{const{color:n,disableElevation:a,fullWidth:s,size:l,variant:u,loading:c,loadingPosition:p,classes:d}=t,x={root:["root",c&&"loading",u,`${u}${capitalize(n)}`,`size${capitalize(l)}`,`${u}Size${capitalize(l)}`,`color${capitalize(n)}`,a&&"disableElevation",s&&"fullWidth",c&&`loadingPosition${capitalize(p)}`],startIcon:["icon","startIcon",`iconSize${capitalize(l)}`],endIcon:["icon","endIcon",`iconSize${capitalize(l)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},_=composeClasses(x,getButtonUtilityClass,d);return{...d,..._}},commonIconStyles=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],ButtonRoot=styled(ButtonBase,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],n[`${a.variant}${capitalize(a.color)}`],n[`size${capitalize(a.size)}`],n[`${a.variant}Size${capitalize(a.size)}`],a.color==="inherit"&&n.colorInherit,a.disableElevation&&n.disableElevation,a.fullWidth&&n.fullWidth,a.loading&&n.loading]}})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],a=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${buttonClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${buttonClasses.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${buttonClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${buttonClasses.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(t.vars||t).palette[s].main,"--variant-outlinedColor":(t.vars||t).palette[s].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[s].mainChannel} / 0.5)`:alpha$1(t.palette[s].main,.5),"--variant-containedColor":(t.vars||t).palette[s].contrastText,"--variant-containedBg":(t.vars||t).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[s].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[s].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha$1(t.palette[s].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[s].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[s].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha$1(t.palette[s].main,t.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:a,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha$1(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha$1(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${buttonClasses.loading}`]:{color:"transparent"}}}]}})),ButtonStartIcon=styled("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.startIcon,a.loading&&n.startIconLoadingStart,n[`iconSize${capitalize(a.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...commonIconStyles]})),ButtonEndIcon=styled("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.endIcon,a.loading&&n.endIconLoadingEnd,n[`iconSize${capitalize(a.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...commonIconStyles]})),ButtonLoadingIndicator=styled("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),ButtonLoadingIconPlaceholder=styled("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Button=reactExports.forwardRef(function(n,a){const s=reactExports.useContext(ButtonGroupContext),l=reactExports.useContext(ButtonGroupButtonContext),u=resolveProps(s,n),c=useDefaultProps({props:u,name:"MuiButton"}),{children:p,color:d="primary",component:x="button",className:_,disabled:S=!1,disableElevation:T=!1,disableFocusRipple:A=!1,endIcon:R,focusVisibleClassName:D,fullWidth:O=!1,id:F,loading:z=null,loadingIndicator:j,loadingPosition:Z="center",size:W="medium",startIcon:J,type:en,variant:tn="text",...Ct}=c,Q=useId(F),on=j??jsxRuntimeExports.jsx(CircularProgress,{"aria-labelledby":Q,color:"inherit",size:16}),gn={...c,color:d,component:x,disabled:S,disableElevation:T,disableFocusRipple:A,fullWidth:O,loading:z,loadingIndicator:on,loadingPosition:Z,size:W,type:en,variant:tn},In=useUtilityClasses$C(gn),dn=(J||z&&Z==="start")&&jsxRuntimeExports.jsx(ButtonStartIcon,{className:In.startIcon,ownerState:gn,children:J||jsxRuntimeExports.jsx(ButtonLoadingIconPlaceholder,{className:In.loadingIconPlaceholder,ownerState:gn})}),ix=(R||z&&Z==="end")&&jsxRuntimeExports.jsx(ButtonEndIcon,{className:In.endIcon,ownerState:gn,children:R||jsxRuntimeExports.jsx(ButtonLoadingIconPlaceholder,{className:In.loadingIconPlaceholder,ownerState:gn})}),Cn=l||"",ax=typeof z=="boolean"?jsxRuntimeExports.jsx("span",{className:In.loadingWrapper,style:{display:"contents"},children:z&&jsxRuntimeExports.jsx(ButtonLoadingIndicator,{className:In.loadingIndicator,ownerState:gn,children:on})}):null;return jsxRuntimeExports.jsxs(ButtonRoot,{ownerState:gn,className:clsx(s.className,In.root,_,Cn),component:x,disabled:S||z,focusRipple:!A,focusVisibleClassName:clsx(In.focusVisible,D),ref:a,type:en,id:z?Q:F,...Ct,classes:In,children:[dn,Z!=="end"&&ax,p,Z==="end"&&ax,ix]})});function getIconButtonUtilityClass(t){return generateUtilityClass("MuiIconButton",t)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),useUtilityClasses$B=t=>{const{classes:n,disabled:a,color:s,edge:l,size:u,loading:c}=t,p={root:["root",c&&"loading",a&&"disabled",s!=="default"&&`color${capitalize(s)}`,l&&`edge${capitalize(l)}`,`size${capitalize(u)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return composeClasses(p,getIconButtonUtilityClass,n)},IconButtonRoot=styled(ButtonBase,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.loading&&n.loading,a.color!=="default"&&n[`color${capitalize(a.color)}`],a.edge&&n[`edge${capitalize(a.edge)}`],n[`size${capitalize(a.size)}`]]}})(memoTheme(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:n=>!n.disableRipple,style:{"--IconButton-hoverBg":t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha$1(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),memoTheme(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{"--IconButton-hoverBg":t.vars?`rgba(${(t.vars||t).palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:alpha$1((t.vars||t).palette[n].main,t.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${iconButtonClasses.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${iconButtonClasses.loading}`]:{color:"transparent"}}))),IconButtonLoadingIndicator=styled("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),IconButton=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiIconButton"}),{edge:l=!1,children:u,className:c,color:p="default",disabled:d=!1,disableFocusRipple:x=!1,size:_="medium",id:S,loading:T=null,loadingIndicator:A,...R}=s,D=useId(S),O=A??jsxRuntimeExports.jsx(CircularProgress,{"aria-labelledby":D,color:"inherit",size:16}),F={...s,edge:l,color:p,disabled:d,disableFocusRipple:x,loading:T,loadingIndicator:O,size:_},z=useUtilityClasses$B(F);return jsxRuntimeExports.jsxs(IconButtonRoot,{id:T?D:S,className:clsx(z.root,c),centerRipple:!0,focusRipple:!x,disabled:d||T,ref:a,...R,ownerState:F,children:[typeof T=="boolean"&&jsxRuntimeExports.jsx("span",{className:z.loadingWrapper,style:{display:"contents"},children:jsxRuntimeExports.jsx(IconButtonLoadingIndicator,{className:z.loadingIndicator,ownerState:F,children:T&&O})}),u]})}),DeleteIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),UndoIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"})),RedoIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"}));function ThemeProviderNoVars({theme:t,...n}){const a=THEME_ID in t?t[THEME_ID]:void 0;return jsxRuntimeExports.jsx(ThemeProvider$1,{...n,themeId:a?THEME_ID:void 0,theme:a||t})}const defaultConfig={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:InternalCssVarsProvider}=createCssVarsProvider({themeId:THEME_ID,theme:()=>createTheme({cssVariables:!0}),colorSchemeStorageKey:defaultConfig.colorSchemeStorageKey,modeStorageKey:defaultConfig.modeStorageKey,defaultColorScheme:{light:defaultConfig.defaultLightColorScheme,dark:defaultConfig.defaultDarkColorScheme},resolveTheme:t=>{const n={...t,typography:createTypography(t.palette,t.typography)};return n.unstable_sx=function(s){return styleFunctionSx({sx:s,theme:this})},n}}),CssVarsProvider=InternalCssVarsProvider;function ThemeProvider({theme:t,...n}){const a=reactExports.useMemo(()=>{if(typeof t=="function")return t;const s=THEME_ID in t?t[THEME_ID]:t;return"colorSchemes"in s?null:"vars"in s?t:{...t,vars:null}},[t]);return a?jsxRuntimeExports.jsx(ThemeProviderNoVars,{theme:a,...n}):jsxRuntimeExports.jsx(CssVarsProvider,{theme:t,...n})}const boxClasses=generateUtilityClasses("MuiBox",["root"]),defaultTheme=createTheme(),Box=createBox({themeId:THEME_ID,defaultTheme,defaultClassName:boxClasses.root,generateClassName:ClassNameGenerator.generate});function getReactElementRef(t){var n;return parseInt(reactExports.version,10)>=19?((n=t==null?void 0:t.props)==null?void 0:n.ref)||null:(t==null?void 0:t.ref)||null}const reflow=t=>t.scrollTop;function getTransitionProps(t,n){const{timeout:a,easing:s,style:l={}}=t;return{duration:l.transitionDuration??(typeof a=="number"?a:a[n.mode]||0),easing:l.transitionTimingFunction??(typeof s=="object"?s[n.mode]:s),delay:l.transitionDelay}}function getScale(t){return`scale(${t}, ${t**2})`}const styles$2={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},isWebKit154=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Grow=reactExports.forwardRef(function(n,a){const{addEndListener:s,appear:l=!0,children:u,easing:c,in:p,onEnter:d,onEntered:x,onEntering:_,onExit:S,onExited:T,onExiting:A,style:R,timeout:D="auto",TransitionComponent:O=Transition,...F}=n,z=useTimeout(),j=reactExports.useRef(),Z=useTheme(),W=reactExports.useRef(null),J=useForkRef(W,getReactElementRef(u),a),en=ix=>Cn=>{if(ix){const ax=W.current;Cn===void 0?ix(ax):ix(ax,Cn)}},tn=en(_),Ct=en((ix,Cn)=>{reflow(ix);const{duration:ax,delay:sx,easing:lx}=getTransitionProps({style:R,timeout:D,easing:c},{mode:"enter"});let ox;D==="auto"?(ox=Z.transitions.getAutoHeightDuration(ix.clientHeight),j.current=ox):ox=ax,ix.style.transition=[Z.transitions.create("opacity",{duration:ox,delay:sx}),Z.transitions.create("transform",{duration:isWebKit154?ox:ox*.666,delay:sx,easing:lx})].join(","),d&&d(ix,Cn)}),Q=en(x),on=en(A),gn=en(ix=>{const{duration:Cn,delay:ax,easing:sx}=getTransitionProps({style:R,timeout:D,easing:c},{mode:"exit"});let lx;D==="auto"?(lx=Z.transitions.getAutoHeightDuration(ix.clientHeight),j.current=lx):lx=Cn,ix.style.transition=[Z.transitions.create("opacity",{duration:lx,delay:ax}),Z.transitions.create("transform",{duration:isWebKit154?lx:lx*.666,delay:isWebKit154?ax:ax||lx*.333,easing:sx})].join(","),ix.style.opacity=0,ix.style.transform=getScale(.75),S&&S(ix)}),In=en(T),dn=ix=>{D==="auto"&&z.start(j.current||0,ix),s&&s(W.current,ix)};return jsxRuntimeExports.jsx(O,{appear:l,in:p,nodeRef:W,onEnter:Ct,onEntered:Q,onEntering:tn,onExit:gn,onExited:In,onExiting:on,addEndListener:dn,timeout:D==="auto"?null:D,...F,children:(ix,{ownerState:Cn,...ax})=>reactExports.cloneElement(u,{style:{opacity:0,transform:getScale(.75),visibility:ix==="exited"&&!p?"hidden":void 0,...styles$2[ix],...R,...u.props.style},ref:J,...ax})})});Grow&&(Grow.muiSupportAuto=!0);var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start$1="start",end$1="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(t,n){return t.concat([n+"-"+start$1,n+"-"+end$1])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(t,n){return t.concat([n,n+"-"+start$1,n+"-"+end$1])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(t){return t?(t.nodeName||"").toLowerCase():null}function getWindow(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function isElement(t){var n=getWindow(t).Element;return t instanceof n||t instanceof Element}function isHTMLElement$1(t){var n=getWindow(t).HTMLElement;return t instanceof n||t instanceof HTMLElement}function isShadowRoot(t){if(typeof ShadowRoot>"u")return!1;var n=getWindow(t).ShadowRoot;return t instanceof n||t instanceof ShadowRoot}function applyStyles(t){var n=t.state;Object.keys(n.elements).forEach(function(a){var s=n.styles[a]||{},l=n.attributes[a]||{},u=n.elements[a];!isHTMLElement$1(u)||!getNodeName(u)||(Object.assign(u.style,s),Object.keys(l).forEach(function(c){var p=l[c];p===!1?u.removeAttribute(c):u.setAttribute(c,p===!0?"":p)}))})}function effect$2(t){var n=t.state,a={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,a.popper),n.styles=a,n.elements.arrow&&Object.assign(n.elements.arrow.style,a.arrow),function(){Object.keys(n.elements).forEach(function(s){var l=n.elements[s],u=n.attributes[s]||{},c=Object.keys(n.styles.hasOwnProperty(s)?n.styles[s]:a[s]),p=c.reduce(function(d,x){return d[x]="",d},{});!isHTMLElement$1(l)||!getNodeName(l)||(Object.assign(l.style,p),Object.keys(u).forEach(function(d){l.removeAttribute(d)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(t){return t.split("-")[0]}var max$3=Math.max,min$2=Math.min,round$5=Math.round;function getUAString(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(t,n,a){n===void 0&&(n=!1),a===void 0&&(a=!1);var s=t.getBoundingClientRect(),l=1,u=1;n&&isHTMLElement$1(t)&&(l=t.offsetWidth>0&&round$5(s.width)/t.offsetWidth||1,u=t.offsetHeight>0&&round$5(s.height)/t.offsetHeight||1);var c=isElement(t)?getWindow(t):window,p=c.visualViewport,d=!isLayoutViewport()&&a,x=(s.left+(d&&p?p.offsetLeft:0))/l,_=(s.top+(d&&p?p.offsetTop:0))/u,S=s.width/l,T=s.height/u;return{width:S,height:T,top:_,right:x+S,bottom:_+T,left:x,x,y:_}}function getLayoutRect$1(t){var n=getBoundingClientRect(t),a=t.offsetWidth,s=t.offsetHeight;return Math.abs(n.width-a)<=1&&(a=n.width),Math.abs(n.height-s)<=1&&(s=n.height),{x:t.offsetLeft,y:t.offsetTop,width:a,height:s}}function contains(t,n){var a=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(a&&isShadowRoot(a)){var s=n;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function getComputedStyle$2(t){return getWindow(t).getComputedStyle(t)}function isTableElement(t){return["table","td","th"].indexOf(getNodeName(t))>=0}function getDocumentElement(t){return((isElement(t)?t.ownerDocument:t.document)||window.document).documentElement}function getParentNode(t){return getNodeName(t)==="html"?t:t.assignedSlot||t.parentNode||(isShadowRoot(t)?t.host:null)||getDocumentElement(t)}function getTrueOffsetParent(t){return!isHTMLElement$1(t)||getComputedStyle$2(t).position==="fixed"?null:t.offsetParent}function getContainingBlock(t){var n=/firefox/i.test(getUAString()),a=/Trident/i.test(getUAString());if(a&&isHTMLElement$1(t)){var s=getComputedStyle$2(t);if(s.position==="fixed")return null}var l=getParentNode(t);for(isShadowRoot(l)&&(l=l.host);isHTMLElement$1(l)&&["html","body"].indexOf(getNodeName(l))<0;){var u=getComputedStyle$2(l);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||n&&u.willChange==="filter"||n&&u.filter&&u.filter!=="none")return l;l=l.parentNode}return null}function getOffsetParent(t){for(var n=getWindow(t),a=getTrueOffsetParent(t);a&&isTableElement(a)&&getComputedStyle$2(a).position==="static";)a=getTrueOffsetParent(a);return a&&(getNodeName(a)==="html"||getNodeName(a)==="body"&&getComputedStyle$2(a).position==="static")?n:a||getContainingBlock(t)||n}function getMainAxisFromPlacement(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function within(t,n,a){return max$3(t,min$2(n,a))}function withinMaxClamp(t,n,a){var s=within(t,n,a);return s>a?a:s}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(t){return Object.assign({},getFreshSideObject(),t)}function expandToHashMap(t,n){return n.reduce(function(a,s){return a[s]=t,a},{})}var toPaddingObject=function(n,a){return n=typeof n=="function"?n(Object.assign({},a.rects,{placement:a.placement})):n,mergePaddingObject(typeof n!="number"?n:expandToHashMap(n,basePlacements))};function arrow(t){var n,a=t.state,s=t.name,l=t.options,u=a.elements.arrow,c=a.modifiersData.popperOffsets,p=getBasePlacement(a.placement),d=getMainAxisFromPlacement(p),x=[left,right].indexOf(p)>=0,_=x?"height":"width";if(!(!u||!c)){var S=toPaddingObject(l.padding,a),T=getLayoutRect$1(u),A=d==="y"?top:left,R=d==="y"?bottom:right,D=a.rects.reference[_]+a.rects.reference[d]-c[d]-a.rects.popper[_],O=c[d]-a.rects.reference[d],F=getOffsetParent(u),z=F?d==="y"?F.clientHeight||0:F.clientWidth||0:0,j=D/2-O/2,Z=S[A],W=z-T[_]-S[R],J=z/2-T[_]/2+j,en=within(Z,J,W),tn=d;a.modifiersData[s]=(n={},n[tn]=en,n.centerOffset=en-J,n)}}function effect$1(t){var n=t.state,a=t.options,s=a.element,l=s===void 0?"[data-popper-arrow]":s;l!=null&&(typeof l=="string"&&(l=n.elements.popper.querySelector(l),!l)||contains(n.elements.popper,l)&&(n.elements.arrow=l))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(t){return t.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(t,n){var a=t.x,s=t.y,l=n.devicePixelRatio||1;return{x:round$5(a*l)/l||0,y:round$5(s*l)/l||0}}function mapToStyles(t){var n,a=t.popper,s=t.popperRect,l=t.placement,u=t.variation,c=t.offsets,p=t.position,d=t.gpuAcceleration,x=t.adaptive,_=t.roundOffsets,S=t.isFixed,T=c.x,A=T===void 0?0:T,R=c.y,D=R===void 0?0:R,O=typeof _=="function"?_({x:A,y:D}):{x:A,y:D};A=O.x,D=O.y;var F=c.hasOwnProperty("x"),z=c.hasOwnProperty("y"),j=left,Z=top,W=window;if(x){var J=getOffsetParent(a),en="clientHeight",tn="clientWidth";if(J===getWindow(a)&&(J=getDocumentElement(a),getComputedStyle$2(J).position!=="static"&&p==="absolute"&&(en="scrollHeight",tn="scrollWidth")),J=J,l===top||(l===left||l===right)&&u===end$1){Z=bottom;var Ct=S&&J===W&&W.visualViewport?W.visualViewport.height:J[en];D-=Ct-s.height,D*=d?1:-1}if(l===left||(l===top||l===bottom)&&u===end$1){j=right;var Q=S&&J===W&&W.visualViewport?W.visualViewport.width:J[tn];A-=Q-s.width,A*=d?1:-1}}var on=Object.assign({position:p},x&&unsetSides),gn=_===!0?roundOffsetsByDPR({x:A,y:D},getWindow(a)):{x:A,y:D};if(A=gn.x,D=gn.y,d){var In;return Object.assign({},on,(In={},In[Z]=z?"0":"",In[j]=F?"0":"",In.transform=(W.devicePixelRatio||1)<=1?"translate("+A+"px, "+D+"px)":"translate3d("+A+"px, "+D+"px, 0)",In))}return Object.assign({},on,(n={},n[Z]=z?D+"px":"",n[j]=F?A+"px":"",n.transform="",n))}function computeStyles(t){var n=t.state,a=t.options,s=a.gpuAcceleration,l=s===void 0?!0:s,u=a.adaptive,c=u===void 0?!0:u,p=a.roundOffsets,d=p===void 0?!0:p,x={placement:getBasePlacement(n.placement),variation:getVariation(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:l,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,mapToStyles(Object.assign({},x,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:c,roundOffsets:d})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,mapToStyles(Object.assign({},x,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(t){var n=t.state,a=t.instance,s=t.options,l=s.scroll,u=l===void 0?!0:l,c=s.resize,p=c===void 0?!0:c,d=getWindow(n.elements.popper),x=[].concat(n.scrollParents.reference,n.scrollParents.popper);return u&&x.forEach(function(_){_.addEventListener("scroll",a.update,passive)}),p&&d.addEventListener("resize",a.update,passive),function(){u&&x.forEach(function(_){_.removeEventListener("scroll",a.update,passive)}),p&&d.removeEventListener("resize",a.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,function(n){return hash$1[n]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(t){return t.replace(/start|end/g,function(n){return hash[n]})}function getWindowScroll(t){var n=getWindow(t),a=n.pageXOffset,s=n.pageYOffset;return{scrollLeft:a,scrollTop:s}}function getWindowScrollBarX(t){return getBoundingClientRect(getDocumentElement(t)).left+getWindowScroll(t).scrollLeft}function getViewportRect(t,n){var a=getWindow(t),s=getDocumentElement(t),l=a.visualViewport,u=s.clientWidth,c=s.clientHeight,p=0,d=0;if(l){u=l.width,c=l.height;var x=isLayoutViewport();(x||!x&&n==="fixed")&&(p=l.offsetLeft,d=l.offsetTop)}return{width:u,height:c,x:p+getWindowScrollBarX(t),y:d}}function getDocumentRect(t){var n,a=getDocumentElement(t),s=getWindowScroll(t),l=(n=t.ownerDocument)==null?void 0:n.body,u=max$3(a.scrollWidth,a.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),c=max$3(a.scrollHeight,a.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),p=-s.scrollLeft+getWindowScrollBarX(t),d=-s.scrollTop;return getComputedStyle$2(l||a).direction==="rtl"&&(p+=max$3(a.clientWidth,l?l.clientWidth:0)-u),{width:u,height:c,x:p,y:d}}function isScrollParent(t){var n=getComputedStyle$2(t),a=n.overflow,s=n.overflowX,l=n.overflowY;return/auto|scroll|overlay|hidden/.test(a+l+s)}function getScrollParent(t){return["html","body","#document"].indexOf(getNodeName(t))>=0?t.ownerDocument.body:isHTMLElement$1(t)&&isScrollParent(t)?t:getScrollParent(getParentNode(t))}function listScrollParents(t,n){var a;n===void 0&&(n=[]);var s=getScrollParent(t),l=s===((a=t.ownerDocument)==null?void 0:a.body),u=getWindow(s),c=l?[u].concat(u.visualViewport||[],isScrollParent(s)?s:[]):s,p=n.concat(c);return l?p:p.concat(listScrollParents(getParentNode(c)))}function rectToClientRect(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function getInnerBoundingClientRect(t,n){var a=getBoundingClientRect(t,!1,n==="fixed");return a.top=a.top+t.clientTop,a.left=a.left+t.clientLeft,a.bottom=a.top+t.clientHeight,a.right=a.left+t.clientWidth,a.width=t.clientWidth,a.height=t.clientHeight,a.x=a.left,a.y=a.top,a}function getClientRectFromMixedType(t,n,a){return n===viewport?rectToClientRect(getViewportRect(t,a)):isElement(n)?getInnerBoundingClientRect(n,a):rectToClientRect(getDocumentRect(getDocumentElement(t)))}function getClippingParents(t){var n=listScrollParents(getParentNode(t)),a=["absolute","fixed"].indexOf(getComputedStyle$2(t).position)>=0,s=a&&isHTMLElement$1(t)?getOffsetParent(t):t;return isElement(s)?n.filter(function(l){return isElement(l)&&contains(l,s)&&getNodeName(l)!=="body"}):[]}function getClippingRect(t,n,a,s){var l=n==="clippingParents"?getClippingParents(t):[].concat(n),u=[].concat(l,[a]),c=u[0],p=u.reduce(function(d,x){var _=getClientRectFromMixedType(t,x,s);return d.top=max$3(_.top,d.top),d.right=min$2(_.right,d.right),d.bottom=min$2(_.bottom,d.bottom),d.left=max$3(_.left,d.left),d},getClientRectFromMixedType(t,c,s));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}function computeOffsets(t){var n=t.reference,a=t.element,s=t.placement,l=s?getBasePlacement(s):null,u=s?getVariation(s):null,c=n.x+n.width/2-a.width/2,p=n.y+n.height/2-a.height/2,d;switch(l){case top:d={x:c,y:n.y-a.height};break;case bottom:d={x:c,y:n.y+n.height};break;case right:d={x:n.x+n.width,y:p};break;case left:d={x:n.x-a.width,y:p};break;default:d={x:n.x,y:n.y}}var x=l?getMainAxisFromPlacement(l):null;if(x!=null){var _=x==="y"?"height":"width";switch(u){case start$1:d[x]=d[x]-(n[_]/2-a[_]/2);break;case end$1:d[x]=d[x]+(n[_]/2-a[_]/2);break}}return d}function detectOverflow(t,n){n===void 0&&(n={});var a=n,s=a.placement,l=s===void 0?t.placement:s,u=a.strategy,c=u===void 0?t.strategy:u,p=a.boundary,d=p===void 0?clippingParents:p,x=a.rootBoundary,_=x===void 0?viewport:x,S=a.elementContext,T=S===void 0?popper:S,A=a.altBoundary,R=A===void 0?!1:A,D=a.padding,O=D===void 0?0:D,F=mergePaddingObject(typeof O!="number"?O:expandToHashMap(O,basePlacements)),z=T===popper?reference:popper,j=t.rects.popper,Z=t.elements[R?z:T],W=getClippingRect(isElement(Z)?Z:Z.contextElement||getDocumentElement(t.elements.popper),d,_,c),J=getBoundingClientRect(t.elements.reference),en=computeOffsets({reference:J,element:j,placement:l}),tn=rectToClientRect(Object.assign({},j,en)),Ct=T===popper?tn:J,Q={top:W.top-Ct.top+F.top,bottom:Ct.bottom-W.bottom+F.bottom,left:W.left-Ct.left+F.left,right:Ct.right-W.right+F.right},on=t.modifiersData.offset;if(T===popper&&on){var gn=on[l];Object.keys(Q).forEach(function(In){var dn=[right,bottom].indexOf(In)>=0?1:-1,ix=[top,bottom].indexOf(In)>=0?"y":"x";Q[In]+=gn[ix]*dn})}return Q}function computeAutoPlacement(t,n){n===void 0&&(n={});var a=n,s=a.placement,l=a.boundary,u=a.rootBoundary,c=a.padding,p=a.flipVariations,d=a.allowedAutoPlacements,x=d===void 0?placements:d,_=getVariation(s),S=_?p?variationPlacements:variationPlacements.filter(function(R){return getVariation(R)===_}):basePlacements,T=S.filter(function(R){return x.indexOf(R)>=0});T.length===0&&(T=S);var A=T.reduce(function(R,D){return R[D]=detectOverflow(t,{placement:D,boundary:l,rootBoundary:u,padding:c})[getBasePlacement(D)],R},{});return Object.keys(A).sort(function(R,D){return A[R]-A[D]})}function getExpandedFallbackPlacements(t){if(getBasePlacement(t)===auto)return[];var n=getOppositePlacement(t);return[getOppositeVariationPlacement(t),n,getOppositeVariationPlacement(n)]}function flip(t){var n=t.state,a=t.options,s=t.name;if(!n.modifiersData[s]._skip){for(var l=a.mainAxis,u=l===void 0?!0:l,c=a.altAxis,p=c===void 0?!0:c,d=a.fallbackPlacements,x=a.padding,_=a.boundary,S=a.rootBoundary,T=a.altBoundary,A=a.flipVariations,R=A===void 0?!0:A,D=a.allowedAutoPlacements,O=n.options.placement,F=getBasePlacement(O),z=F===O,j=d||(z||!R?[getOppositePlacement(O)]:getExpandedFallbackPlacements(O)),Z=[O].concat(j).reduce(function(px,dx){return px.concat(getBasePlacement(dx)===auto?computeAutoPlacement(n,{placement:dx,boundary:_,rootBoundary:S,padding:x,flipVariations:R,allowedAutoPlacements:D}):dx)},[]),W=n.rects.reference,J=n.rects.popper,en=new Map,tn=!0,Ct=Z[0],Q=0;Q<Z.length;Q++){var on=Z[Q],gn=getBasePlacement(on),In=getVariation(on)===start$1,dn=[top,bottom].indexOf(gn)>=0,ix=dn?"width":"height",Cn=detectOverflow(n,{placement:on,boundary:_,rootBoundary:S,altBoundary:T,padding:x}),ax=dn?In?right:left:In?bottom:top;W[ix]>J[ix]&&(ax=getOppositePlacement(ax));var sx=getOppositePlacement(ax),lx=[];if(u&&lx.push(Cn[gn]<=0),p&&lx.push(Cn[ax]<=0,Cn[sx]<=0),lx.every(function(px){return px})){Ct=on,tn=!1;break}en.set(on,lx)}if(tn)for(var ox=R?3:1,hx=function(dx){var mx=Z.find(function(gx){var Sx=en.get(gx);if(Sx)return Sx.slice(0,dx).every(function(Ex){return Ex})});if(mx)return Ct=mx,"break"},_x=ox;_x>0;_x--){var ux=hx(_x);if(ux==="break")break}n.placement!==Ct&&(n.modifiersData[s]._skip=!0,n.placement=Ct,n.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(t,n,a){return a===void 0&&(a={x:0,y:0}),{top:t.top-n.height-a.y,right:t.right-n.width+a.x,bottom:t.bottom-n.height+a.y,left:t.left-n.width-a.x}}function isAnySideFullyClipped(t){return[top,right,bottom,left].some(function(n){return t[n]>=0})}function hide(t){var n=t.state,a=t.name,s=n.rects.reference,l=n.rects.popper,u=n.modifiersData.preventOverflow,c=detectOverflow(n,{elementContext:"reference"}),p=detectOverflow(n,{altBoundary:!0}),d=getSideOffsets(c,s),x=getSideOffsets(p,l,u),_=isAnySideFullyClipped(d),S=isAnySideFullyClipped(x);n.modifiersData[a]={referenceClippingOffsets:d,popperEscapeOffsets:x,isReferenceHidden:_,hasPopperEscaped:S},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":_,"data-popper-escaped":S})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(t,n,a){var s=getBasePlacement(t),l=[left,top].indexOf(s)>=0?-1:1,u=typeof a=="function"?a(Object.assign({},n,{placement:t})):a,c=u[0],p=u[1];return c=c||0,p=(p||0)*l,[left,right].indexOf(s)>=0?{x:p,y:c}:{x:c,y:p}}function offset(t){var n=t.state,a=t.options,s=t.name,l=a.offset,u=l===void 0?[0,0]:l,c=placements.reduce(function(_,S){return _[S]=distanceAndSkiddingToXY(S,n.rects,u),_},{}),p=c[n.placement],d=p.x,x=p.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=d,n.modifiersData.popperOffsets.y+=x),n.modifiersData[s]=c}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(t){var n=t.state,a=t.name;n.modifiersData[a]=computeOffsets({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(t){return t==="x"?"y":"x"}function preventOverflow(t){var n=t.state,a=t.options,s=t.name,l=a.mainAxis,u=l===void 0?!0:l,c=a.altAxis,p=c===void 0?!1:c,d=a.boundary,x=a.rootBoundary,_=a.altBoundary,S=a.padding,T=a.tether,A=T===void 0?!0:T,R=a.tetherOffset,D=R===void 0?0:R,O=detectOverflow(n,{boundary:d,rootBoundary:x,padding:S,altBoundary:_}),F=getBasePlacement(n.placement),z=getVariation(n.placement),j=!z,Z=getMainAxisFromPlacement(F),W=getAltAxis(Z),J=n.modifiersData.popperOffsets,en=n.rects.reference,tn=n.rects.popper,Ct=typeof D=="function"?D(Object.assign({},n.rects,{placement:n.placement})):D,Q=typeof Ct=="number"?{mainAxis:Ct,altAxis:Ct}:Object.assign({mainAxis:0,altAxis:0},Ct),on=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,gn={x:0,y:0};if(J){if(u){var In,dn=Z==="y"?top:left,ix=Z==="y"?bottom:right,Cn=Z==="y"?"height":"width",ax=J[Z],sx=ax+O[dn],lx=ax-O[ix],ox=A?-tn[Cn]/2:0,hx=z===start$1?en[Cn]:tn[Cn],_x=z===start$1?-tn[Cn]:-en[Cn],ux=n.elements.arrow,px=A&&ux?getLayoutRect$1(ux):{width:0,height:0},dx=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:getFreshSideObject(),mx=dx[dn],gx=dx[ix],Sx=within(0,en[Cn],px[Cn]),Ex=j?en[Cn]/2-ox-Sx-mx-Q.mainAxis:hx-Sx-mx-Q.mainAxis,Cx=j?-en[Cn]/2+ox+Sx+gx+Q.mainAxis:_x+Sx+gx+Q.mainAxis,Ax=n.elements.arrow&&getOffsetParent(n.elements.arrow),Tx=Ax?Z==="y"?Ax.clientTop||0:Ax.clientLeft||0:0,kx=(In=on==null?void 0:on[Z])!=null?In:0,Rx=ax+Ex-kx-Tx,$x=ax+Cx-kx,Gx=within(A?min$2(sx,Rx):sx,ax,A?max$3(lx,$x):lx);J[Z]=Gx,gn[Z]=Gx-ax}if(p){var qx,Dx=Z==="x"?top:left,lE=Z==="x"?bottom:right,cE=J[W],nE=W==="y"?"height":"width",iE=cE+O[Dx],_E=cE-O[lE],sE=[top,left].indexOf(F)!==-1,ME=(qx=on==null?void 0:on[W])!=null?qx:0,fx=sE?iE:cE-en[nE]-tn[nE]-ME+Q.altAxis,yx=sE?cE+en[nE]+tn[nE]-ME-Q.altAxis:_E,Ix=A&&sE?withinMaxClamp(fx,cE,yx):within(A?fx:iE,cE,A?yx:_E);J[W]=Ix,gn[W]=Ix-cE}n.modifiersData[s]=gn}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function getNodeScroll(t){return t===getWindow(t)||!isHTMLElement$1(t)?getWindowScroll(t):getHTMLElementScroll(t)}function isElementScaled(t){var n=t.getBoundingClientRect(),a=round$5(n.width)/t.offsetWidth||1,s=round$5(n.height)/t.offsetHeight||1;return a!==1||s!==1}function getCompositeRect(t,n,a){a===void 0&&(a=!1);var s=isHTMLElement$1(n),l=isHTMLElement$1(n)&&isElementScaled(n),u=getDocumentElement(n),c=getBoundingClientRect(t,l,a),p={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(s||!s&&!a)&&((getNodeName(n)!=="body"||isScrollParent(u))&&(p=getNodeScroll(n)),isHTMLElement$1(n)?(d=getBoundingClientRect(n,!0),d.x+=n.clientLeft,d.y+=n.clientTop):u&&(d.x=getWindowScrollBarX(u))),{x:c.left+p.scrollLeft-d.x,y:c.top+p.scrollTop-d.y,width:c.width,height:c.height}}function order(t){var n=new Map,a=new Set,s=[];t.forEach(function(u){n.set(u.name,u)});function l(u){a.add(u.name);var c=[].concat(u.requires||[],u.requiresIfExists||[]);c.forEach(function(p){if(!a.has(p)){var d=n.get(p);d&&l(d)}}),s.push(u)}return t.forEach(function(u){a.has(u.name)||l(u)}),s}function orderModifiers(t){var n=order(t);return modifierPhases.reduce(function(a,s){return a.concat(n.filter(function(l){return l.phase===s}))},[])}function debounce$1(t){var n;return function(){return n||(n=new Promise(function(a){Promise.resolve().then(function(){n=void 0,a(t())})})),n}}function mergeByName(t){var n=t.reduce(function(a,s){var l=a[s.name];return a[s.name]=l?Object.assign({},l,s,{options:Object.assign({},l.options,s.options),data:Object.assign({},l.data,s.data)}):s,a},{});return Object.keys(n).map(function(a){return n[a]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return!n.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function popperGenerator(t){t===void 0&&(t={});var n=t,a=n.defaultModifiers,s=a===void 0?[]:a,l=n.defaultOptions,u=l===void 0?DEFAULT_OPTIONS:l;return function(p,d,x){x===void 0&&(x=u);var _={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,u),modifiersData:{},elements:{reference:p,popper:d},attributes:{},styles:{}},S=[],T=!1,A={state:_,setOptions:function(F){var z=typeof F=="function"?F(_.options):F;D(),_.options=Object.assign({},u,_.options,z),_.scrollParents={reference:isElement(p)?listScrollParents(p):p.contextElement?listScrollParents(p.contextElement):[],popper:listScrollParents(d)};var j=orderModifiers(mergeByName([].concat(s,_.options.modifiers)));return _.orderedModifiers=j.filter(function(Z){return Z.enabled}),R(),A.update()},forceUpdate:function(){if(!T){var F=_.elements,z=F.reference,j=F.popper;if(areValidElements(z,j)){_.rects={reference:getCompositeRect(z,getOffsetParent(j),_.options.strategy==="fixed"),popper:getLayoutRect$1(j)},_.reset=!1,_.placement=_.options.placement,_.orderedModifiers.forEach(function(Q){return _.modifiersData[Q.name]=Object.assign({},Q.data)});for(var Z=0;Z<_.orderedModifiers.length;Z++){if(_.reset===!0){_.reset=!1,Z=-1;continue}var W=_.orderedModifiers[Z],J=W.fn,en=W.options,tn=en===void 0?{}:en,Ct=W.name;typeof J=="function"&&(_=J({state:_,options:tn,name:Ct,instance:A})||_)}}}},update:debounce$1(function(){return new Promise(function(O){A.forceUpdate(),O(_)})}),destroy:function(){D(),T=!0}};if(!areValidElements(p,d))return A;A.setOptions(x).then(function(O){!T&&x.onFirstUpdate&&x.onFirstUpdate(O)});function R(){_.orderedModifiers.forEach(function(O){var F=O.name,z=O.options,j=z===void 0?{}:z,Z=O.effect;if(typeof Z=="function"){var W=Z({state:_,name:F,instance:A,options:j}),J=function(){};S.push(W||J)}})}function D(){S.forEach(function(O){return O()}),S=[]}return A}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function isHostComponent$1(t){return typeof t=="string"}function appendOwnerState(t,n,a){return t===void 0||isHostComponent$1(t)?n:{...n,ownerState:{...n.ownerState,...a}}}function extractEventHandlers(t,n=[]){if(t===void 0)return{};const a={};return Object.keys(t).filter(s=>s.match(/^on[A-Z]/)&&typeof t[s]=="function"&&!n.includes(s)).forEach(s=>{a[s]=t[s]}),a}function omitEventHandlers(t){if(t===void 0)return{};const n={};return Object.keys(t).filter(a=>!(a.match(/^on[A-Z]/)&&typeof t[a]=="function")).forEach(a=>{n[a]=t[a]}),n}function mergeSlotProps(t){const{getSlotProps:n,additionalProps:a,externalSlotProps:s,externalForwardedProps:l,className:u}=t;if(!n){const A=clsx(a==null?void 0:a.className,u,l==null?void 0:l.className,s==null?void 0:s.className),R={...a==null?void 0:a.style,...l==null?void 0:l.style,...s==null?void 0:s.style},D={...a,...l,...s};return A.length>0&&(D.className=A),Object.keys(R).length>0&&(D.style=R),{props:D,internalRef:void 0}}const c=extractEventHandlers({...l,...s}),p=omitEventHandlers(s),d=omitEventHandlers(l),x=n(c),_=clsx(x==null?void 0:x.className,a==null?void 0:a.className,u,l==null?void 0:l.className,s==null?void 0:s.className),S={...x==null?void 0:x.style,...a==null?void 0:a.style,...l==null?void 0:l.style,...s==null?void 0:s.style},T={...x,...a,...d,...p};return _.length>0&&(T.className=_),Object.keys(S).length>0&&(T.style=S),{props:T,internalRef:x.ref}}function resolveComponentProps(t,n,a){return typeof t=="function"?t(n,a):t}function useSlotProps(t){var S;const{elementType:n,externalSlotProps:a,ownerState:s,skipResolvingSlotProps:l=!1,...u}=t,c=l?{}:resolveComponentProps(a,s),{props:p,internalRef:d}=mergeSlotProps({...u,externalSlotProps:c}),x=useForkRef(d,c==null?void 0:c.ref,(S=t.additionalProps)==null?void 0:S.ref);return appendOwnerState(n,{...p,ref:x},s)}function getContainer$1(t){return typeof t=="function"?t():t}const Portal=reactExports.forwardRef(function(n,a){const{children:s,container:l,disablePortal:u=!1}=n,[c,p]=reactExports.useState(null),d=useForkRef(reactExports.isValidElement(s)?getReactElementRef(s):null,a);if(useEnhancedEffect(()=>{u||p(getContainer$1(l)||document.body)},[l,u]),useEnhancedEffect(()=>{if(c&&!u)return setRef(a,c),()=>{setRef(a,null)}},[a,c,u]),u){if(reactExports.isValidElement(s)){const x={ref:d};return reactExports.cloneElement(s,x)}return s}return c&&reactDomExports.createPortal(s,c)});function getPopperUtilityClass(t){return generateUtilityClass("MuiPopper",t)}generateUtilityClasses("MuiPopper",["root"]);function flipPlacement(t,n){if(n==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function resolveAnchorEl$1(t){return typeof t=="function"?t():t}function isHTMLElement(t){return t.nodeType!==void 0}const useUtilityClasses$A=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getPopperUtilityClass,n)},defaultPopperOptions={},PopperTooltip=reactExports.forwardRef(function(n,a){const{anchorEl:s,children:l,direction:u,disablePortal:c,modifiers:p,open:d,placement:x,popperOptions:_,popperRef:S,slotProps:T={},slots:A={},TransitionProps:R,ownerState:D,...O}=n,F=reactExports.useRef(null),z=useForkRef(F,a),j=reactExports.useRef(null),Z=useForkRef(j,S),W=reactExports.useRef(Z);useEnhancedEffect(()=>{W.current=Z},[Z]),reactExports.useImperativeHandle(S,()=>j.current,[]);const J=flipPlacement(x,u),[en,tn]=reactExports.useState(J),[Ct,Q]=reactExports.useState(resolveAnchorEl$1(s));reactExports.useEffect(()=>{j.current&&j.current.forceUpdate()}),reactExports.useEffect(()=>{s&&Q(resolveAnchorEl$1(s))},[s]),useEnhancedEffect(()=>{if(!Ct||!d)return;const ix=sx=>{tn(sx.placement)};let Cn=[{name:"preventOverflow",options:{altBoundary:c}},{name:"flip",options:{altBoundary:c}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:sx})=>{ix(sx)}}];p!=null&&(Cn=Cn.concat(p)),_&&_.modifiers!=null&&(Cn=Cn.concat(_.modifiers));const ax=createPopper(Ct,F.current,{placement:J,..._,modifiers:Cn});return W.current(ax),()=>{ax.destroy(),W.current(null)}},[Ct,c,p,d,_,J]);const on={placement:en};R!==null&&(on.TransitionProps=R);const gn=useUtilityClasses$A(n),In=A.root??"div",dn=useSlotProps({elementType:In,externalSlotProps:T.root,externalForwardedProps:O,additionalProps:{role:"tooltip",ref:z},ownerState:n,className:gn.root});return jsxRuntimeExports.jsx(In,{...dn,children:typeof l=="function"?l(on):l})}),Popper$1=reactExports.forwardRef(function(n,a){const{anchorEl:s,children:l,container:u,direction:c="ltr",disablePortal:p=!1,keepMounted:d=!1,modifiers:x,open:_,placement:S="bottom",popperOptions:T=defaultPopperOptions,popperRef:A,style:R,transition:D=!1,slotProps:O={},slots:F={},...z}=n,[j,Z]=reactExports.useState(!0),W=()=>{Z(!1)},J=()=>{Z(!0)};if(!d&&!_&&(!D||j))return null;let en;if(u)en=u;else if(s){const Q=resolveAnchorEl$1(s);en=Q&&isHTMLElement(Q)?ownerDocument(Q).body:ownerDocument(null).body}const tn=!_&&d&&(!D||j)?"none":void 0,Ct=D?{in:_,onEnter:W,onExited:J}:void 0;return jsxRuntimeExports.jsx(Portal,{disablePortal:p,container:en,children:jsxRuntimeExports.jsx(PopperTooltip,{anchorEl:s,direction:c,disablePortal:p,modifiers:x,ref:a,open:D?!j:_,placement:S,popperOptions:T,popperRef:A,slotProps:O,slots:F,...z,style:{position:"fixed",top:0,left:0,display:tn,...R},TransitionProps:Ct,children:l})})}),PopperRoot=styled(Popper$1,{name:"MuiPopper",slot:"Root"})({}),Popper=reactExports.forwardRef(function(n,a){const s=useRtl(),l=useDefaultProps({props:n,name:"MuiPopper"}),{anchorEl:u,component:c,components:p,componentsProps:d,container:x,disablePortal:_,keepMounted:S,modifiers:T,open:A,placement:R,popperOptions:D,popperRef:O,transition:F,slots:z,slotProps:j,...Z}=l,W=(z==null?void 0:z.root)??(p==null?void 0:p.Root),J={anchorEl:u,container:x,disablePortal:_,keepMounted:S,modifiers:T,open:A,placement:R,popperOptions:D,popperRef:O,transition:F,...Z};return jsxRuntimeExports.jsx(PopperRoot,{as:c,direction:s?"rtl":"ltr",slots:{root:W},slotProps:j??d,...J,ref:a})});function useSlot(t,n){const{className:a,elementType:s,ownerState:l,externalForwardedProps:u,internalForwardedProps:c,shouldForwardComponentProp:p=!1,...d}=n,{component:x,slots:_={[t]:void 0},slotProps:S={[t]:void 0},...T}=u,A=_[t]||s,R=resolveComponentProps(S[t],l),{props:{component:D,...O},internalRef:F}=mergeSlotProps({className:a,...d,externalForwardedProps:t==="root"?T:void 0,externalSlotProps:R}),z=useForkRef(F,R==null?void 0:R.ref,n.ref),j=t==="root"?D||x:D,Z=appendOwnerState(A,{...t==="root"&&!x&&!_[t]&&c,...t!=="root"&&!_[t]&&c,...O,...j&&!p&&{as:j},...j&&p&&{component:j},ref:z},l);return[A,Z]}function getTooltipUtilityClass(t){return generateUtilityClass("MuiTooltip",t)}const tooltipClasses=generateUtilityClasses("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function round$4(t){return Math.round(t*1e5)/1e5}const useUtilityClasses$z=t=>{const{classes:n,disableInteractive:a,arrow:s,touch:l,placement:u}=t,c={popper:["popper",!a&&"popperInteractive",s&&"popperArrow"],tooltip:["tooltip",s&&"tooltipArrow",l&&"touch",`tooltipPlacement${capitalize(u.split("-")[0])}`],arrow:["arrow"]};return composeClasses(c,getTooltipUtilityClass,n)},TooltipPopper=styled(Popper,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.popper,!a.disableInteractive&&n.popperInteractive,a.arrow&&n.popperArrow,!a.open&&n.popperClose]}})(memoTheme(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:n})=>!n.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:n})=>!n,style:{pointerEvents:"none"}},{props:({ownerState:n})=>n.arrow,style:{[`&[data-popper-placement*="bottom"] .${tooltipClasses.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${tooltipClasses.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:n})=>n.arrow&&!n.isRtl,style:{[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:n})=>n.arrow&&!!n.isRtl,style:{[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:n})=>n.arrow&&!n.isRtl,style:{[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:n})=>n.arrow&&!!n.isRtl,style:{[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),TooltipTooltip=styled("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.tooltip,a.touch&&n.touch,a.arrow&&n.tooltipArrow,n[`tooltipPlacement${capitalize(a.placement.split("-")[0])}`]]}})(memoTheme(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:alpha$1(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${tooltipClasses.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:n})=>n.arrow,style:{position:"relative",margin:0}},{props:({ownerState:n})=>n.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${round$4(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:n})=>!n.isRtl,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:n})=>!n.isRtl&&n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:n})=>!!n.isRtl,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:n})=>!!n.isRtl&&n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:n})=>n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:n})=>n.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),TooltipArrow=styled("span",{name:"MuiTooltip",slot:"Arrow"})(memoTheme(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:alpha$1(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let hystersisOpen=!1;const hystersisTimer=new Timeout;let cursorPosition={x:0,y:0};function composeEventHandler(t,n){return(a,...s)=>{n&&n(a,...s),t(a,...s)}}const Tooltip=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiTooltip"}),{arrow:l=!1,children:u,classes:c,components:p={},componentsProps:d={},describeChild:x=!1,disableFocusListener:_=!1,disableHoverListener:S=!1,disableInteractive:T=!1,disableTouchListener:A=!1,enterDelay:R=100,enterNextDelay:D=0,enterTouchDelay:O=700,followCursor:F=!1,id:z,leaveDelay:j=0,leaveTouchDelay:Z=1500,onClose:W,onOpen:J,open:en,placement:tn="bottom",PopperComponent:Ct,PopperProps:Q={},slotProps:on={},slots:gn={},title:In,TransitionComponent:dn,TransitionProps:ix,...Cn}=s,ax=reactExports.isValidElement(u)?u:jsxRuntimeExports.jsx("span",{children:u}),sx=useTheme(),lx=useRtl(),[ox,hx]=reactExports.useState(),[_x,ux]=reactExports.useState(null),px=reactExports.useRef(!1),dx=T||F,mx=useTimeout(),gx=useTimeout(),Sx=useTimeout(),Ex=useTimeout(),[Cx,Ax]=useControlled({controlled:en,default:!1,name:"Tooltip",state:"open"});let Tx=Cx;const kx=useId(z),Rx=reactExports.useRef(),$x=useEventCallback(()=>{Rx.current!==void 0&&(document.body.style.WebkitUserSelect=Rx.current,Rx.current=void 0),Ex.clear()});reactExports.useEffect(()=>$x,[$x]);const Gx=Lx=>{hystersisTimer.clear(),hystersisOpen=!0,Ax(!0),J&&!Tx&&J(Lx)},qx=useEventCallback(Lx=>{hystersisTimer.start(800+j,()=>{hystersisOpen=!1}),Ax(!1),W&&Tx&&W(Lx),mx.start(sx.transitions.duration.shortest,()=>{px.current=!1})}),Dx=Lx=>{px.current&&Lx.type!=="touchstart"||(ox&&ox.removeAttribute("title"),gx.clear(),Sx.clear(),R||hystersisOpen&&D?gx.start(hystersisOpen?D:R,()=>{Gx(Lx)}):Gx(Lx))},lE=Lx=>{gx.clear(),Sx.start(j,()=>{qx(Lx)})},[,cE]=reactExports.useState(!1),nE=Lx=>{isFocusVisible(Lx.target)||(cE(!1),lE(Lx))},iE=Lx=>{ox||hx(Lx.currentTarget),isFocusVisible(Lx.target)&&(cE(!0),Dx(Lx))},_E=Lx=>{px.current=!0;const Kx=ax.props;Kx.onTouchStart&&Kx.onTouchStart(Lx)},sE=Lx=>{_E(Lx),Sx.clear(),mx.clear(),$x(),Rx.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ex.start(O,()=>{document.body.style.WebkitUserSelect=Rx.current,Dx(Lx)})},ME=Lx=>{ax.props.onTouchEnd&&ax.props.onTouchEnd(Lx),$x(),Sx.start(Z,()=>{qx(Lx)})};reactExports.useEffect(()=>{if(!Tx)return;function Lx(Kx){Kx.key==="Escape"&&qx(Kx)}return document.addEventListener("keydown",Lx),()=>{document.removeEventListener("keydown",Lx)}},[qx,Tx]);const fx=useForkRef(getReactElementRef(ax),hx,a);!In&&In!==0&&(Tx=!1);const yx=reactExports.useRef(),Ix=Lx=>{const Kx=ax.props;Kx.onMouseMove&&Kx.onMouseMove(Lx),cursorPosition={x:Lx.clientX,y:Lx.clientY},yx.current&&yx.current.update()},Nx={},Fx=typeof In=="string";x?(Nx.title=!Tx&&Fx&&!S?In:null,Nx["aria-describedby"]=Tx?kx:null):(Nx["aria-label"]=Fx?In:null,Nx["aria-labelledby"]=Tx&&!Fx?kx:null);const Px={...Nx,...Cn,...ax.props,className:clsx(Cn.className,ax.props.className),onTouchStart:_E,ref:fx,...F?{onMouseMove:Ix}:{}},Wx={};A||(Px.onTouchStart=sE,Px.onTouchEnd=ME),S||(Px.onMouseOver=composeEventHandler(Dx,Px.onMouseOver),Px.onMouseLeave=composeEventHandler(lE,Px.onMouseLeave),dx||(Wx.onMouseOver=Dx,Wx.onMouseLeave=lE)),_||(Px.onFocus=composeEventHandler(iE,Px.onFocus),Px.onBlur=composeEventHandler(nE,Px.onBlur),dx||(Wx.onFocus=iE,Wx.onBlur=nE));const jx={...s,isRtl:lx,arrow:l,disableInteractive:dx,placement:tn,PopperComponentProp:Ct,touch:px.current},Qx=typeof on.popper=="function"?on.popper(jx):on.popper,tE=reactExports.useMemo(()=>{var Kx,dE;let Lx=[{name:"arrow",enabled:!!_x,options:{element:_x,padding:4}}];return(Kx=Q.popperOptions)!=null&&Kx.modifiers&&(Lx=Lx.concat(Q.popperOptions.modifiers)),(dE=Qx==null?void 0:Qx.popperOptions)!=null&&dE.modifiers&&(Lx=Lx.concat(Qx.popperOptions.modifiers)),{...Q.popperOptions,...Qx==null?void 0:Qx.popperOptions,modifiers:Lx}},[_x,Q.popperOptions,Qx==null?void 0:Qx.popperOptions]),hE=useUtilityClasses$z(jx),gE=typeof on.transition=="function"?on.transition(jx):on.transition,zx={slots:{popper:p.Popper,transition:p.Transition??dn,tooltip:p.Tooltip,arrow:p.Arrow,...gn},slotProps:{arrow:on.arrow??d.arrow,popper:{...Q,...Qx??d.popper},tooltip:on.tooltip??d.tooltip,transition:{...ix,...gE??d.transition}}},[Xx,oE]=useSlot("popper",{elementType:TooltipPopper,externalForwardedProps:zx,ownerState:jx,className:clsx(hE.popper,Q==null?void 0:Q.className)}),[Jx,fE]=useSlot("transition",{elementType:Grow,externalForwardedProps:zx,ownerState:jx}),[pE,vx]=useSlot("tooltip",{elementType:TooltipTooltip,className:hE.tooltip,externalForwardedProps:zx,ownerState:jx}),[xx,Mx]=useSlot("arrow",{elementType:TooltipArrow,className:hE.arrow,externalForwardedProps:zx,ownerState:jx,ref:ux});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[reactExports.cloneElement(ax,Px),jsxRuntimeExports.jsx(Xx,{as:Ct??Popper,placement:tn,anchorEl:F?{getBoundingClientRect:()=>({top:cursorPosition.y,left:cursorPosition.x,right:cursorPosition.x,bottom:cursorPosition.y,width:0,height:0})}:ox,popperRef:yx,open:ox?Tx:!1,id:kx,transition:!0,...Wx,...oE,popperOptions:tE,children:({TransitionProps:Lx})=>jsxRuntimeExports.jsx(Jx,{timeout:sx.transitions.duration.shorter,...Lx,...fE,children:jsxRuntimeExports.jsxs(pE,{...vx,children:[In,l?jsxRuntimeExports.jsx(xx,{...Mx}):null]})})})]})}),Grid$1=createGrid({createStyledComponent:styled("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.container&&n.container]}}),componentName:"MuiGrid",useThemeProps:t=>useDefaultProps({props:t,name:"MuiGrid"}),useTheme}),units={resistor:{m:.001,:1,K:1e3,M:1e6,G:1e9},capacitor:{fF:1e-15,pF:1e-12,nF:1e-9,uF:1e-6,mF:.001,F:1},inductor:{fH:1e-15,pH:1e-12,nH:1e-9,uH:1e-6,mH:.001,H:1},frequency:{Hz:1,kHz:1e3,MHz:1e6,GHz:1e9,THz:1e12}},addShapes={opamp:{image:"opamp.svg",connectors:[[0,-32],[0,32],[128,0]],x:0,y:0,offset:[0,-96],label:{text:"U1",class:"circuit_label",x:96,y:-32}},resistor:{image:"resistor.svg",connectors:[[-32,0],[64,0]],x:0,y:0,label:{text:"R1",class:"circuit_label",x:16,y:-36},offset:[-48,-48]},capacitor:{image:"capacitor.svg",connectors:[[0,-32],[0,64]],x:0,y:0,label:{text:"C1",class:"circuit_label",x:-28,y:0},offset:[-48,-64]},inductor:{image:"inductor.svg",connectors:[[-64,0],[64,0]],x:0,y:0,label:{text:"L1",class:"circuit_label",x:0,y:-30},offset:[-80,-64]},vin:{image:"vin.svg",connectors:[[0,0]],x:0,y:0,offset:[-64,0]},iin:{image:"iin.svg",connectors:[[0,0]],x:0,y:0,offset:[-64,0]},gnd:{image:"gnd.svg",connectors:[[0,0]],x:0,y:0,offset:[-100,-180]},vprobe:{image:"vprobe.svg",label:{text:"X1",class:"circuit_label",x:0,y:-30},connectors:[[0,0]],x:0,y:0,offset:[-10,-90]},iprobe:{image:"iprobe.svg",label:{text:"Y1",class:"circuit_label",x:-64,y:-36},connectors:[[-64,0],[64,0]],x:0,y:0,offset:[-96,-64]}},theme$1=createTheme({palette:{bland:{main:"#fff",light:"#dedfe0",dark:"#dedfe0",contrastText:"#242105"}}}),shapesWithLabels={resistor:"R",capacitor:"C",inductor:"L",opamp:"U",vprobe:"X",iprobe:"Y"},componentDefaults={resistor:{value:1e3,unit:"K"},capacitor:{value:1,unit:"pF"},inductor:{value:1,unit:"nH"}},activeComponents=["opamp","resistor","capacitor","inductor"],probes=["vprobe","iprobe"],initialLabels={};Object.keys(shapesWithLabels).forEach(t=>{initialLabels[t]=`${shapesWithLabels[t]}0`});function calculateNextIndex(t,n,a){if(!t||Object.keys(t).length==0)return initialLabels[n];const s=Object.keys(t).filter(l=>t[l].type==n).map(l=>Number(l.slice(1)));return`${a}${s.length==0?0:Math.max(...s)+1}`}function VisioJSSchematic({setResults:t,setNodes:n,setComponentValues:a,setFullyConnectedComponents:s,history:l,setHistory:u}){const[c,p]=reactExports.useState(initialLabels),[d,x]=reactExports.useState(null),[_,S]=reactExports.useState({}),T=15,A=reactExports.useCallback(z=>{const{nodeMap:j,components:Z,fullyConnectedComponents:W}=createNodeMap(z,addShapes);for(const[en,tn]of Object.entries(Z))!(en in _)&&tn.type in componentDefaults&&(Z[en]={...tn,...componentDefaults[tn.type]});a(en=>{const tn={...en};for(const[Ct,Q]of Object.entries(Z))!(Ct in tn)&&Q.type in componentDefaults&&(tn[Ct]={type:Q.type,...componentDefaults[Q.type]});for(const Ct in tn)Ct in Z||delete tn[Ct];return JSON.stringify(en)==JSON.stringify(tn)?en:tn}),s(en=>JSON.stringify(en)==JSON.stringify(W)?en:W),n(en=>JSON.stringify(en)==JSON.stringify(j)?en:(t({text:"",mathML:"",complexResponse:"",bilinearRaw:"",bilinearMathML:""}),j)),S(Z);const J={};for(const en in shapesWithLabels)J[en]=calculateNextIndex(Z,en,shapesWithLabels[en]);p(J)},[_,a,s,n,t]),R=reactExports.useCallback(z=>{u(j=>{const Z=JSON.parse(JSON.stringify(z)),W={...j};return W.pointer<W.state.length-1&&(W.state=W.state.slice(0,W.pointer+1)),W.state.length==T?W.state=[...W.state.slice(1),Z]:W.state=[...W.state,Z],W.pointer=W.state.length-1,W}),A(z)},[A,u]),D=reactExports.useCallback(()=>{u(z=>{if(z.pointer==0)return z;d.redraw(z.state[z.pointer-1]);const j={...z};return j.pointer=j.pointer-1,j}),A(l.state[l.pointer-1])},[A,u,l,d]),O=reactExports.useCallback(()=>{u(z=>{if(z.pointer>=z.state.length-1)return z;d.redraw(z.state[z.pointer+1]);const j={...z};return j.pointer=j.pointer+1,j}),A(l.state[l.pointer+1])},[A,u,l,d]);reactExports.useEffect(()=>{if(!d){var z=rx({initialState:l.state[0],stateChanged:R});x(z)}},[R,l,d]),reactExports.useEffect(()=>{d&&d.init()},[d]),reactExports.useEffect(()=>{const z=j=>{const Z=(j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="z"&&!j.shiftKey,W=(j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="z"&&j.shiftKey;Z?(console.log("undo"),j.preventDefault(),D()):W&&(j.preventDefault(),O())};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[D,O]);const F={};return F.vin=!("iin"in _||"vin"in _),F.vprobe=Object.keys(_).filter(z=>_[z].type=="vprobe").length<2,jsxRuntimeExports.jsxs(Grid$1,{container:!0,spacing:1,sx:{mt:1},children:[jsxRuntimeExports.jsx(Grid$1,{container:!0,size:{xs:12,sm:10},columns:{xs:3,md:9},children:Object.keys(addShapes).map(z=>{const j=addShapes[z];return"label"in j&&(j.label.text=c[z]),jsxRuntimeExports.jsx(Grid$1,{size:1,children:jsxRuntimeExports.jsx(Tooltip,{title:z=="vin"&&!F.vin||z=="iin"&&!F.vin?"max 1 vin or iin ":z=="vprobe"&&!F.vprobe?"max 2 vprobes":"",children:jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(Button,{variant:"contained",fullWidth:!0,color:probes.includes(z)?"secondary":activeComponents.includes(z)?"info":"success",style:{cursor:"grab",marginRight:"10px",height:"100%"},size:"small",disabled:z=="vin"||z=="iin"?!F.vin:z=="vprobe"?!F.vprobe:!1,draggable:"true",onDragStart:Z=>{window.dragData=j,Z.dataTransfer.setData("application/json",JSON.stringify(j))},onClick:()=>d.addShape(j),children:z},z)})},z)},z)})}),jsxRuntimeExports.jsxs(Grid$1,{container:!0,size:{xs:12,sm:2},spacing:0,justifyContent:"flex-end",children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"delete",onClick:()=>d.deleteSelected(),sx:{p:.5},children:jsxRuntimeExports.jsx(DeleteIcon,{})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"delete",onClick:()=>D(),disabled:l.pointer==0,sx:{p:.5},children:jsxRuntimeExports.jsx(UndoIcon,{})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"delete",onClick:()=>O(),disabled:l.pointer==l.state.length-1,sx:{p:.5},children:jsxRuntimeExports.jsx(RedoIcon,{})})]}),jsxRuntimeExports.jsx(Grid$1,{container:!0,size:12,children:jsxRuntimeExports.jsx(Grid$1,{size:12,children:jsxRuntimeExports.jsx("div",{style:{border:"1px solid rgb(222, 226, 230)",display:"inline-block",width:"100%"},children:jsxRuntimeExports.jsx("svg",{id:"visiojs_top",className:"visiojs_svg"})})})})]})}function getStyleValue(t){return parseInt(t,10)||0}const styles$1={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function isObjectEmpty(t){for(const n in t)return!1;return!0}function isEmpty$1(t){return isObjectEmpty(t)||t.outerHeightStyle===0&&!t.overflowing}const TextareaAutosize=reactExports.forwardRef(function(n,a){const{onChange:s,maxRows:l,minRows:u=1,style:c,value:p,...d}=n,{current:x}=reactExports.useRef(p!=null),_=reactExports.useRef(null),S=useForkRef(a,_),T=reactExports.useRef(null),A=reactExports.useRef(null),R=reactExports.useCallback(()=>{const j=_.current,Z=A.current;if(!j||!Z)return;const J=ownerWindow(j).getComputedStyle(j);if(J.width==="0px")return{outerHeightStyle:0,overflowing:!1};Z.style.width=J.width,Z.value=j.value||n.placeholder||"x",Z.value.slice(-1)===`
`&&(Z.value+=" ");const en=J.boxSizing,tn=getStyleValue(J.paddingBottom)+getStyleValue(J.paddingTop),Ct=getStyleValue(J.borderBottomWidth)+getStyleValue(J.borderTopWidth),Q=Z.scrollHeight;Z.value="x";const on=Z.scrollHeight;let gn=Q;u&&(gn=Math.max(Number(u)*on,gn)),l&&(gn=Math.min(Number(l)*on,gn)),gn=Math.max(gn,on);const In=gn+(en==="border-box"?tn+Ct:0),dn=Math.abs(gn-Q)<=1;return{outerHeightStyle:In,overflowing:dn}},[l,u,n.placeholder]),D=useEventCallback(()=>{const j=_.current,Z=R();if(!j||!Z||isEmpty$1(Z))return!1;const W=Z.outerHeightStyle;return T.current!=null&&T.current!==W}),O=reactExports.useCallback(()=>{const j=_.current,Z=R();if(!j||!Z||isEmpty$1(Z))return;const W=Z.outerHeightStyle;T.current!==W&&(T.current=W,j.style.height=`${W}px`),j.style.overflow=Z.overflowing?"hidden":""},[R]),F=reactExports.useRef(-1);useEnhancedEffect(()=>{const j=debounce$2(O),Z=_==null?void 0:_.current;if(!Z)return;const W=ownerWindow(Z);W.addEventListener("resize",j);let J;return typeof ResizeObserver<"u"&&(J=new ResizeObserver(()=>{D()&&(J.unobserve(Z),cancelAnimationFrame(F.current),O(),F.current=requestAnimationFrame(()=>{J.observe(Z)}))}),J.observe(Z)),()=>{j.clear(),cancelAnimationFrame(F.current),W.removeEventListener("resize",j),J&&J.disconnect()}},[R,O,D]),useEnhancedEffect(()=>{O()});const z=j=>{x||O();const Z=j.target,W=Z.value.length,J=Z.value.endsWith(`
`),en=Z.selectionStart===W;J&&en&&Z.setSelectionRange(W,W),s&&s(j)};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:p,onChange:z,ref:S,rows:u,style:c,...d}),jsxRuntimeExports.jsx("textarea",{"aria-hidden":!0,className:n.className,readOnly:!0,ref:A,tabIndex:-1,style:{...styles$1.shadow,...c,paddingTop:0,paddingBottom:0}})]})});function isHostComponent(t){return typeof t=="string"}function formControlState({props:t,states:n,muiFormControl:a}){return n.reduce((s,l)=>(s[l]=t[l],a&&typeof t[l]>"u"&&(s[l]=a[l]),s),{})}const FormControlContext=reactExports.createContext(void 0);function useFormControl(){return reactExports.useContext(FormControlContext)}function hasValue(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function isFilled(t,n=!1){return t&&(hasValue(t.value)&&t.value!==""||n&&hasValue(t.defaultValue)&&t.defaultValue!=="")}function isAdornedStart(t){return t.startAdornment}function getInputBaseUtilityClass(t){return generateUtilityClass("MuiInputBase",t)}const inputBaseClasses=generateUtilityClasses("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var _InputGlobalStyles;const rootOverridesResolver=(t,n)=>{const{ownerState:a}=t;return[n.root,a.formControl&&n.formControl,a.startAdornment&&n.adornedStart,a.endAdornment&&n.adornedEnd,a.error&&n.error,a.size==="small"&&n.sizeSmall,a.multiline&&n.multiline,a.color&&n[`color${capitalize(a.color)}`],a.fullWidth&&n.fullWidth,a.hiddenLabel&&n.hiddenLabel]},inputOverridesResolver=(t,n)=>{const{ownerState:a}=t;return[n.input,a.size==="small"&&n.inputSizeSmall,a.multiline&&n.inputMultiline,a.type==="search"&&n.inputTypeSearch,a.startAdornment&&n.inputAdornedStart,a.endAdornment&&n.inputAdornedEnd,a.hiddenLabel&&n.inputHiddenLabel]},useUtilityClasses$y=t=>{const{classes:n,color:a,disabled:s,error:l,endAdornment:u,focused:c,formControl:p,fullWidth:d,hiddenLabel:x,multiline:_,readOnly:S,size:T,startAdornment:A,type:R}=t,D={root:["root",`color${capitalize(a)}`,s&&"disabled",l&&"error",d&&"fullWidth",c&&"focused",p&&"formControl",T&&T!=="medium"&&`size${capitalize(T)}`,_&&"multiline",A&&"adornedStart",u&&"adornedEnd",x&&"hiddenLabel",S&&"readOnly"],input:["input",s&&"disabled",R==="search"&&"inputTypeSearch",_&&"inputMultiline",T==="small"&&"inputSizeSmall",x&&"inputHiddenLabel",A&&"inputAdornedStart",u&&"inputAdornedEnd",S&&"readOnly"]};return composeClasses(D,getInputBaseUtilityClass,n)},InputBaseRoot=styled("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${inputBaseClasses.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:n})=>n.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:n,size:a})=>n.multiline&&a==="small",style:{paddingTop:1}},{props:({ownerState:n})=>n.fullWidth,style:{width:"100%"}}]}))),InputBaseInput=styled("input",{name:"MuiInputBase",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light",a={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},s={opacity:"0 !important"},l=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&::-ms-input-placeholder":a,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${inputBaseClasses.formControl} &`]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":l,"&:focus::-moz-placeholder":l,"&:focus::-ms-input-placeholder":l},[`&.${inputBaseClasses.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:u})=>!u.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:u})=>u.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),InputGlobalStyles=globalCss({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),InputBase=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiInputBase"}),{"aria-describedby":l,autoComplete:u,autoFocus:c,className:p,color:d,components:x={},componentsProps:_={},defaultValue:S,disabled:T,disableInjectingGlobalStyles:A,endAdornment:R,error:D,fullWidth:O=!1,id:F,inputComponent:z="input",inputProps:j={},inputRef:Z,margin:W,maxRows:J,minRows:en,multiline:tn=!1,name:Ct,onBlur:Q,onChange:on,onClick:gn,onFocus:In,onKeyDown:dn,onKeyUp:ix,placeholder:Cn,readOnly:ax,renderSuffix:sx,rows:lx,size:ox,slotProps:hx={},slots:_x={},startAdornment:ux,type:px="text",value:dx,...mx}=s,gx=j.value!=null?j.value:dx,{current:Sx}=reactExports.useRef(gx!=null),Ex=reactExports.useRef(),Cx=reactExports.useCallback(Px=>{},[]),Ax=useForkRef(Ex,Z,j.ref,Cx),[Tx,kx]=reactExports.useState(!1),Rx=useFormControl(),$x=formControlState({props:s,muiFormControl:Rx,states:["color","disabled","error","hiddenLabel","size","required","filled"]});$x.focused=Rx?Rx.focused:Tx,reactExports.useEffect(()=>{!Rx&&T&&Tx&&(kx(!1),Q&&Q())},[Rx,T,Tx,Q]);const Gx=Rx&&Rx.onFilled,qx=Rx&&Rx.onEmpty,Dx=reactExports.useCallback(Px=>{isFilled(Px)?Gx&&Gx():qx&&qx()},[Gx,qx]);useEnhancedEffect(()=>{Sx&&Dx({value:gx})},[gx,Dx,Sx]);const lE=Px=>{In&&In(Px),j.onFocus&&j.onFocus(Px),Rx&&Rx.onFocus?Rx.onFocus(Px):kx(!0)},cE=Px=>{Q&&Q(Px),j.onBlur&&j.onBlur(Px),Rx&&Rx.onBlur?Rx.onBlur(Px):kx(!1)},nE=(Px,...Wx)=>{if(!Sx){const jx=Px.target||Ex.current;if(jx==null)throw new Error(formatMuiErrorMessage(1));Dx({value:jx.value})}j.onChange&&j.onChange(Px,...Wx),on&&on(Px,...Wx)};reactExports.useEffect(()=>{Dx(Ex.current)},[]);const iE=Px=>{Ex.current&&Px.currentTarget===Px.target&&Ex.current.focus(),gn&&gn(Px)};let _E=z,sE=j;tn&&_E==="input"&&(lx?sE={type:void 0,minRows:lx,maxRows:lx,...sE}:sE={type:void 0,maxRows:J,minRows:en,...sE},_E=TextareaAutosize);const ME=Px=>{Dx(Px.animationName==="mui-auto-fill-cancel"?Ex.current:{value:"x"})};reactExports.useEffect(()=>{Rx&&Rx.setAdornedStart(!!ux)},[Rx,ux]);const fx={...s,color:$x.color||"primary",disabled:$x.disabled,endAdornment:R,error:$x.error,focused:$x.focused,formControl:Rx,fullWidth:O,hiddenLabel:$x.hiddenLabel,multiline:tn,size:$x.size,startAdornment:ux,type:px},yx=useUtilityClasses$y(fx),Ix=_x.root||x.Root||InputBaseRoot,Nx=hx.root||_.root||{},Fx=_x.input||x.Input||InputBaseInput;return sE={...sE,...hx.input??_.input},jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[!A&&typeof InputGlobalStyles=="function"&&(_InputGlobalStyles||(_InputGlobalStyles=jsxRuntimeExports.jsx(InputGlobalStyles,{}))),jsxRuntimeExports.jsxs(Ix,{...Nx,ref:a,onClick:iE,...mx,...!isHostComponent(Ix)&&{ownerState:{...fx,...Nx.ownerState}},className:clsx(yx.root,Nx.className,p,ax&&"MuiInputBase-readOnly"),children:[ux,jsxRuntimeExports.jsx(FormControlContext.Provider,{value:null,children:jsxRuntimeExports.jsx(Fx,{"aria-invalid":$x.error,"aria-describedby":l,autoComplete:u,autoFocus:c,defaultValue:S,disabled:$x.disabled,id:F,onAnimationStart:ME,name:Ct,placeholder:Cn,readOnly:ax,required:$x.required,rows:lx,value:gx,onKeyDown:dn,onKeyUp:ix,type:px,...sE,...!isHostComponent(Fx)&&{as:_E,ownerState:{...fx,...sE.ownerState}},ref:Ax,className:clsx(yx.input,sE.className,ax&&"MuiInputBase-readOnly"),onBlur:cE,onChange:nE,onFocus:lE})}),R,sx?sx({...$x,startAdornment:ux}):null]})]})});function getInputUtilityClass(t){return generateUtilityClass("MuiInput",t)}const inputClasses={...inputBaseClasses,...generateUtilityClasses("MuiInput",["root","underline","input"])},useUtilityClasses$x=t=>{const{classes:n,disableUnderline:a}=t,l=composeClasses({root:["root",!a&&"underline"],input:["input"]},getInputUtilityClass,n);return{...n,...l}},InputRoot=styled(InputBaseRoot,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[...rootOverridesResolver(t,n),!a.disableUnderline&&n.underline]}})(memoTheme(({theme:t})=>{let a=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(a=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:s})=>s.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:s})=>!s.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${inputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${inputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${inputClasses.disabled}, .${inputClasses.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${a}`}},[`&.${inputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([s])=>({props:{color:s,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[s].main}`}}}))]}})),InputInput=styled(InputBaseInput,{name:"MuiInput",slot:"Input",overridesResolver:inputOverridesResolver})({}),Input=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiInput"}),{disableUnderline:l=!1,components:u={},componentsProps:c,fullWidth:p=!1,inputComponent:d="input",multiline:x=!1,slotProps:_,slots:S={},type:T="text",...A}=s,R=useUtilityClasses$x(s),O={root:{ownerState:{disableUnderline:l}}},F=_??c?deepmerge(_??c,O):O,z=S.root??u.Root??InputRoot,j=S.input??u.Input??InputInput;return jsxRuntimeExports.jsx(InputBase,{slots:{root:z,input:j},slotProps:F,fullWidth:p,inputComponent:d,multiline:x,ref:a,type:T,...A,classes:R})});Input.muiName="Input";function getFilledInputUtilityClass(t){return generateUtilityClass("MuiFilledInput",t)}const filledInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},useUtilityClasses$w=t=>{const{classes:n,disableUnderline:a,startAdornment:s,endAdornment:l,size:u,hiddenLabel:c,multiline:p}=t,d={root:["root",!a&&"underline",s&&"adornedStart",l&&"adornedEnd",u==="small"&&`size${capitalize(u)}`,c&&"hiddenLabel",p&&"multiline"],input:["input"]},x=composeClasses(d,getFilledInputUtilityClass,n);return{...n,...x}},FilledInputRoot=styled(InputBaseRoot,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[...rootOverridesResolver(t,n),!a.disableUnderline&&n.underline]}})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light",a=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${filledInputClasses.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${filledInputClasses.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:u},variants:[{props:({ownerState:c})=>!c.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${filledInputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${filledInputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${filledInputClasses.disabled}, .${filledInputClasses.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${filledInputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([c])=>{var p;return{props:{disableUnderline:!1,color:c},style:{"&::after":{borderBottom:`2px solid ${(p=(t.vars||t).palette[c])==null?void 0:p.main}`}}}}),{props:({ownerState:c})=>c.startAdornment,style:{paddingLeft:12}},{props:({ownerState:c})=>c.endAdornment,style:{paddingRight:12}},{props:({ownerState:c})=>c.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:c,size:p})=>c.multiline&&p==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:c})=>c.multiline&&c.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:c})=>c.multiline&&c.hiddenLabel&&c.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),FilledInputInput=styled(InputBaseInput,{name:"MuiFilledInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:n})=>n.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:0}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:0}},{props:({ownerState:n})=>n.hiddenLabel&&n.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:n})=>n.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),FilledInput=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiFilledInput"}),{disableUnderline:l=!1,components:u={},componentsProps:c,fullWidth:p=!1,hiddenLabel:d,inputComponent:x="input",multiline:_=!1,slotProps:S,slots:T={},type:A="text",...R}=s,D={...s,disableUnderline:l,fullWidth:p,inputComponent:x,multiline:_,type:A},O=useUtilityClasses$w(s),F={root:{ownerState:D},input:{ownerState:D}},z=S??c?deepmerge(F,S??c):F,j=T.root??u.Root??FilledInputRoot,Z=T.input??u.Input??FilledInputInput;return jsxRuntimeExports.jsx(InputBase,{slots:{root:j,input:Z},slotProps:z,fullWidth:p,inputComponent:x,multiline:_,ref:a,type:A,...R,classes:O})});FilledInput.muiName="Input";var _span$2;const NotchedOutlineRoot$1=styled("fieldset",{shouldForwardProp:rootShouldForwardProp})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NotchedOutlineLegend=styled("legend",{shouldForwardProp:rootShouldForwardProp})(memoTheme(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:n})=>!n.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:n})=>n.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:n})=>n.withLabel&&n.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function NotchedOutline(t){const{children:n,classes:a,className:s,label:l,notched:u,...c}=t,p=l!=null&&l!=="",d={...t,notched:u,withLabel:p};return jsxRuntimeExports.jsx(NotchedOutlineRoot$1,{"aria-hidden":!0,className:s,ownerState:d,...c,children:jsxRuntimeExports.jsx(NotchedOutlineLegend,{ownerState:d,children:p?jsxRuntimeExports.jsx("span",{children:l}):_span$2||(_span$2=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}function getOutlinedInputUtilityClass(t){return generateUtilityClass("MuiOutlinedInput",t)}const outlinedInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiOutlinedInput",["root","notchedOutline","input"])},useUtilityClasses$v=t=>{const{classes:n}=t,s=composeClasses({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},getOutlinedInputUtilityClass,n);return{...n,...s}},OutlinedInputRoot=styled(InputBaseRoot,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([a])=>({props:{color:a},style:{[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette[a].main}}})),{props:{},style:{[`&.${outlinedInputClasses.error} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${outlinedInputClasses.disabled} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:14}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:14}},{props:({ownerState:a})=>a.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:a,size:s})=>a.multiline&&s==="small",style:{padding:"8.5px 14px"}}]}})),NotchedOutlineRoot=styled(NotchedOutline,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}})),OutlinedInputInput=styled(InputBaseInput,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:n})=>n.multiline,style:{padding:0}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:0}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:0}}]}))),OutlinedInput=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiOutlinedInput"}),{components:l={},fullWidth:u=!1,inputComponent:c="input",label:p,multiline:d=!1,notched:x,slots:_={},slotProps:S={},type:T="text",...A}=s,R=useUtilityClasses$v(s),D=useFormControl(),O=formControlState({props:s,muiFormControl:D,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),F={...s,color:O.color||"primary",disabled:O.disabled,error:O.error,focused:O.focused,formControl:D,fullWidth:u,hiddenLabel:O.hiddenLabel,multiline:d,size:O.size,type:T},z=_.root??l.Root??OutlinedInputRoot,j=_.input??l.Input??OutlinedInputInput,[Z,W]=useSlot("notchedOutline",{elementType:NotchedOutlineRoot,className:R.notchedOutline,shouldForwardComponentProp:!0,ownerState:F,externalForwardedProps:{slots:_,slotProps:S},additionalProps:{label:p!=null&&p!==""&&O.required?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[p,"","*"]}):p}});return jsxRuntimeExports.jsx(InputBase,{slots:{root:z,input:j},slotProps:S,renderSuffix:J=>jsxRuntimeExports.jsx(Z,{...W,notched:typeof x<"u"?x:!!(J.startAdornment||J.filled||J.focused)}),fullWidth:u,inputComponent:c,multiline:d,ref:a,type:T,...A,classes:{...R,notchedOutline:null}})});OutlinedInput.muiName="Input";function getFormLabelUtilityClasses(t){return generateUtilityClass("MuiFormLabel",t)}const formLabelClasses=generateUtilityClasses("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),useUtilityClasses$u=t=>{const{classes:n,color:a,focused:s,disabled:l,error:u,filled:c,required:p}=t,d={root:["root",`color${capitalize(a)}`,l&&"disabled",u&&"error",c&&"filled",s&&"focused",p&&"required"],asterisk:["asterisk",u&&"error"]};return composeClasses(d,getFormLabelUtilityClasses,n)},FormLabelRoot=styled("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.color==="secondary"&&n.colorSecondary,a.filled&&n.filled]}})(memoTheme(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{[`&.${formLabelClasses.focused}`]:{color:(t.vars||t).palette[n].main}}})),{props:{},style:{[`&.${formLabelClasses.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${formLabelClasses.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),AsteriskComponent=styled("span",{name:"MuiFormLabel",slot:"Asterisk"})(memoTheme(({theme:t})=>({[`&.${formLabelClasses.error}`]:{color:(t.vars||t).palette.error.main}}))),FormLabel=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiFormLabel"}),{children:l,className:u,color:c,component:p="label",disabled:d,error:x,filled:_,focused:S,required:T,...A}=s,R=useFormControl(),D=formControlState({props:s,muiFormControl:R,states:["color","required","focused","disabled","error","filled"]}),O={...s,color:D.color||"primary",component:p,disabled:D.disabled,error:D.error,filled:D.filled,focused:D.focused,required:D.required},F=useUtilityClasses$u(O);return jsxRuntimeExports.jsxs(FormLabelRoot,{as:p,ownerState:O,className:clsx(F.root,u),ref:a,...A,children:[l,D.required&&jsxRuntimeExports.jsxs(AsteriskComponent,{ownerState:O,"aria-hidden":!0,className:F.asterisk,children:["","*"]})]})});function getInputLabelUtilityClasses(t){return generateUtilityClass("MuiInputLabel",t)}generateUtilityClasses("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const useUtilityClasses$t=t=>{const{classes:n,formControl:a,size:s,shrink:l,disableAnimation:u,variant:c,required:p}=t,d={root:["root",a&&"formControl",!u&&"animated",l&&"shrink",s&&s!=="medium"&&`size${capitalize(s)}`,c],asterisk:[p&&"asterisk"]},x=composeClasses(d,getInputLabelUtilityClasses,n);return{...n,...x}},InputLabelRoot=styled(FormLabel,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`& .${formLabelClasses.asterisk}`]:n.asterisk},n.root,a.formControl&&n.formControl,a.size==="small"&&n.sizeSmall,a.shrink&&n.shrink,!a.disableAnimation&&n.animated,a.focused&&n.focused,n[a.variant]]}})(memoTheme(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:n})=>n.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:n})=>n.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:n})=>!n.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:n,ownerState:a})=>n==="filled"&&a.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:n,ownerState:a,size:s})=>n==="filled"&&a.shrink&&s==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:n,ownerState:a})=>n==="outlined"&&a.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),InputLabel=reactExports.forwardRef(function(n,a){const s=useDefaultProps({name:"MuiInputLabel",props:n}),{disableAnimation:l=!1,margin:u,shrink:c,variant:p,className:d,...x}=s,_=useFormControl();let S=c;typeof S>"u"&&_&&(S=_.filled||_.focused||_.adornedStart);const T=formControlState({props:s,muiFormControl:_,states:["size","variant","required","focused"]}),A={...s,disableAnimation:l,formControl:_,shrink:S,size:T.size,variant:T.variant,required:T.required,focused:T.focused},R=useUtilityClasses$t(A);return jsxRuntimeExports.jsx(InputLabelRoot,{"data-shrink":S,ref:a,className:clsx(R.root,d),...x,ownerState:A,classes:R})});function getFormControlUtilityClasses(t){return generateUtilityClass("MuiFormControl",t)}generateUtilityClasses("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const useUtilityClasses$s=t=>{const{classes:n,margin:a,fullWidth:s}=t,l={root:["root",a!=="none"&&`margin${capitalize(a)}`,s&&"fullWidth"]};return composeClasses(l,getFormControlUtilityClasses,n)},FormControlRoot=styled("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`margin${capitalize(a.margin)}`],a.fullWidth&&n.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),FormControl=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiFormControl"}),{children:l,className:u,color:c="primary",component:p="div",disabled:d=!1,error:x=!1,focused:_,fullWidth:S=!1,hiddenLabel:T=!1,margin:A="none",required:R=!1,size:D="medium",variant:O="outlined",...F}=s,z={...s,color:c,component:p,disabled:d,error:x,fullWidth:S,hiddenLabel:T,margin:A,required:R,size:D,variant:O},j=useUtilityClasses$s(z),[Z,W]=reactExports.useState(()=>{let ix=!1;return l&&reactExports.Children.forEach(l,Cn=>{if(!isMuiElement(Cn,["Input","Select"]))return;const ax=isMuiElement(Cn,["Select"])?Cn.props.input:Cn;ax&&isAdornedStart(ax.props)&&(ix=!0)}),ix}),[J,en]=reactExports.useState(()=>{let ix=!1;return l&&reactExports.Children.forEach(l,Cn=>{isMuiElement(Cn,["Input","Select"])&&(isFilled(Cn.props,!0)||isFilled(Cn.props.inputProps,!0))&&(ix=!0)}),ix}),[tn,Ct]=reactExports.useState(!1);d&&tn&&Ct(!1);const Q=_!==void 0&&!d?_:tn;let on;reactExports.useRef(!1);const gn=reactExports.useCallback(()=>{en(!0)},[]),In=reactExports.useCallback(()=>{en(!1)},[]),dn=reactExports.useMemo(()=>({adornedStart:Z,setAdornedStart:W,color:c,disabled:d,error:x,filled:J,focused:Q,fullWidth:S,hiddenLabel:T,size:D,onBlur:()=>{Ct(!1)},onFocus:()=>{Ct(!0)},onEmpty:In,onFilled:gn,registerEffect:on,required:R,variant:O}),[Z,c,d,x,J,Q,S,T,on,In,gn,R,D,O]);return jsxRuntimeExports.jsx(FormControlContext.Provider,{value:dn,children:jsxRuntimeExports.jsx(FormControlRoot,{as:p,ownerState:z,className:clsx(j.root,u),ref:a,...F,children:l})})});function getFormHelperTextUtilityClasses(t){return generateUtilityClass("MuiFormHelperText",t)}const formHelperTextClasses=generateUtilityClasses("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var _span$1;const useUtilityClasses$r=t=>{const{classes:n,contained:a,size:s,disabled:l,error:u,filled:c,focused:p,required:d}=t,x={root:["root",l&&"disabled",u&&"error",s&&`size${capitalize(s)}`,a&&"contained",p&&"focused",c&&"filled",d&&"required"]};return composeClasses(x,getFormHelperTextUtilityClasses,n)},FormHelperTextRoot=styled("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.size&&n[`size${capitalize(a.size)}`],a.contained&&n.contained,a.filled&&n.filled]}})(memoTheme(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${formHelperTextClasses.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${formHelperTextClasses.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:n})=>n.contained,style:{marginLeft:14,marginRight:14}}]}))),FormHelperText=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiFormHelperText"}),{children:l,className:u,component:c="p",disabled:p,error:d,filled:x,focused:_,margin:S,required:T,variant:A,...R}=s,D=useFormControl(),O=formControlState({props:s,muiFormControl:D,states:["variant","size","disabled","error","filled","focused","required"]}),F={...s,component:c,contained:O.variant==="filled"||O.variant==="outlined",variant:O.variant,size:O.size,disabled:O.disabled,error:O.error,filled:O.filled,focused:O.focused,required:O.required};delete F.ownerState;const z=useUtilityClasses$r(F);return jsxRuntimeExports.jsx(FormHelperTextRoot,{as:c,className:clsx(z.root,u),ref:a,...R,ownerState:F,children:l===" "?_span$1||(_span$1=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):l})}),ListContext=reactExports.createContext({});function getListUtilityClass(t){return generateUtilityClass("MuiList",t)}generateUtilityClasses("MuiList",["root","padding","dense","subheader"]);const useUtilityClasses$q=t=>{const{classes:n,disablePadding:a,dense:s,subheader:l}=t;return composeClasses({root:["root",!a&&"padding",s&&"dense",l&&"subheader"]},getListUtilityClass,n)},ListRoot=styled("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,!a.disablePadding&&n.padding,a.dense&&n.dense,a.subheader&&n.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),List=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiList"}),{children:l,className:u,component:c="ul",dense:p=!1,disablePadding:d=!1,subheader:x,..._}=s,S=reactExports.useMemo(()=>({dense:p}),[p]),T={...s,component:c,dense:p,disablePadding:d},A=useUtilityClasses$q(T);return jsxRuntimeExports.jsx(ListContext.Provider,{value:S,children:jsxRuntimeExports.jsxs(ListRoot,{as:c,className:clsx(A.root,u),ref:a,ownerState:T,..._,children:[x,l]})})});function getScrollbarSize(t=window){const n=t.document.documentElement.clientWidth;return t.innerWidth-n}function nextItem(t,n,a){return t===n?t.firstChild:n&&n.nextElementSibling?n.nextElementSibling:a?null:t.firstChild}function previousItem(t,n,a){return t===n?a?t.firstChild:t.lastChild:n&&n.previousElementSibling?n.previousElementSibling:a?null:t.lastChild}function textCriteriaMatches(t,n){if(n===void 0)return!0;let a=t.innerText;return a===void 0&&(a=t.textContent),a=a.trim().toLowerCase(),a.length===0?!1:n.repeating?a[0]===n.keys[0]:a.startsWith(n.keys.join(""))}function moveFocus(t,n,a,s,l,u){let c=!1,p=l(t,n,n?a:!1);for(;p;){if(p===t.firstChild){if(c)return!1;c=!0}const d=s?!1:p.disabled||p.getAttribute("aria-disabled")==="true";if(!p.hasAttribute("tabindex")||!textCriteriaMatches(p,u)||d)p=l(t,p,a);else return p.focus(),!0}return!1}const MenuList=reactExports.forwardRef(function(n,a){const{actions:s,autoFocus:l=!1,autoFocusItem:u=!1,children:c,className:p,disabledItemsFocusable:d=!1,disableListWrap:x=!1,onKeyDown:_,variant:S="selectedMenu",...T}=n,A=reactExports.useRef(null),R=reactExports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});useEnhancedEffect(()=>{l&&A.current.focus()},[l]),reactExports.useImperativeHandle(s,()=>({adjustStyleForScrollbar:(j,{direction:Z})=>{const W=!A.current.style.width;if(j.clientHeight<A.current.clientHeight&&W){const J=`${getScrollbarSize(ownerWindow(j))}px`;A.current.style[Z==="rtl"?"paddingLeft":"paddingRight"]=J,A.current.style.width=`calc(100% + ${J})`}return A.current}}),[]);const D=j=>{const Z=A.current,W=j.key;if(j.ctrlKey||j.metaKey||j.altKey){_&&_(j);return}const en=ownerDocument(Z).activeElement;if(W==="ArrowDown")j.preventDefault(),moveFocus(Z,en,x,d,nextItem);else if(W==="ArrowUp")j.preventDefault(),moveFocus(Z,en,x,d,previousItem);else if(W==="Home")j.preventDefault(),moveFocus(Z,null,x,d,nextItem);else if(W==="End")j.preventDefault(),moveFocus(Z,null,x,d,previousItem);else if(W.length===1){const tn=R.current,Ct=W.toLowerCase(),Q=performance.now();tn.keys.length>0&&(Q-tn.lastTime>500?(tn.keys=[],tn.repeating=!0,tn.previousKeyMatched=!0):tn.repeating&&Ct!==tn.keys[0]&&(tn.repeating=!1)),tn.lastTime=Q,tn.keys.push(Ct);const on=en&&!tn.repeating&&textCriteriaMatches(en,tn);tn.previousKeyMatched&&(on||moveFocus(Z,en,!1,d,nextItem,tn))?j.preventDefault():tn.previousKeyMatched=!1}_&&_(j)},O=useForkRef(A,a);let F=-1;reactExports.Children.forEach(c,(j,Z)=>{if(!reactExports.isValidElement(j)){F===Z&&(F+=1,F>=c.length&&(F=-1));return}j.props.disabled||(S==="selectedMenu"&&j.props.selected||F===-1)&&(F=Z),F===Z&&(j.props.disabled||j.props.muiSkipListHighlight||j.type.muiSkipListHighlight)&&(F+=1,F>=c.length&&(F=-1))});const z=reactExports.Children.map(c,(j,Z)=>{if(Z===F){const W={};return u&&(W.autoFocus=!0),j.props.tabIndex===void 0&&S==="selectedMenu"&&(W.tabIndex=0),reactExports.cloneElement(j,W)}return j});return jsxRuntimeExports.jsx(List,{role:"menu",ref:O,className:p,onKeyDown:D,tabIndex:l?0:-1,...T,children:z})});function isOverflowing(t){const n=ownerDocument(t);return n.body===t?ownerWindow(t).innerWidth>n.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function ariaHidden(t,n){n?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function getPaddingRight(t){return parseInt(ownerWindow(t).getComputedStyle(t).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(t){const a=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),s=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return a||s}function ariaHiddenSiblings(t,n,a,s,l){const u=[n,a,...s];[].forEach.call(t.children,c=>{const p=!u.includes(c),d=!isAriaHiddenForbiddenOnElement(c);p&&d&&ariaHidden(c,l)})}function findIndexOf(t,n){let a=-1;return t.some((s,l)=>n(s)?(a=l,!0):!1),a}function handleContainer(t,n){const a=[],s=t.container;if(!n.disableScrollLock){if(isOverflowing(s)){const c=getScrollbarSize(ownerWindow(s));a.push({value:s.style.paddingRight,property:"padding-right",el:s}),s.style.paddingRight=`${getPaddingRight(s)+c}px`;const p=ownerDocument(s).querySelectorAll(".mui-fixed");[].forEach.call(p,d=>{a.push({value:d.style.paddingRight,property:"padding-right",el:d}),d.style.paddingRight=`${getPaddingRight(d)+c}px`})}let u;if(s.parentNode instanceof DocumentFragment)u=ownerDocument(s).body;else{const c=s.parentElement,p=ownerWindow(s);u=(c==null?void 0:c.nodeName)==="HTML"&&p.getComputedStyle(c).overflowY==="scroll"?c:s}a.push({value:u.style.overflow,property:"overflow",el:u},{value:u.style.overflowX,property:"overflow-x",el:u},{value:u.style.overflowY,property:"overflow-y",el:u}),u.style.overflow="hidden"}return()=>{a.forEach(({value:u,el:c,property:p})=>{u?c.style.setProperty(p,u):c.style.removeProperty(p)})}}function getHiddenSiblings(t){const n=[];return[].forEach.call(t.children,a=>{a.getAttribute("aria-hidden")==="true"&&n.push(a)}),n}class ModalManager{constructor(){this.modals=[],this.containers=[]}add(n,a){let s=this.modals.indexOf(n);if(s!==-1)return s;s=this.modals.length,this.modals.push(n),n.modalRef&&ariaHidden(n.modalRef,!1);const l=getHiddenSiblings(a);ariaHiddenSiblings(a,n.mount,n.modalRef,l,!0);const u=findIndexOf(this.containers,c=>c.container===a);return u!==-1?(this.containers[u].modals.push(n),s):(this.containers.push({modals:[n],container:a,restore:null,hiddenSiblings:l}),s)}mount(n,a){const s=findIndexOf(this.containers,u=>u.modals.includes(n)),l=this.containers[s];l.restore||(l.restore=handleContainer(l,a))}remove(n,a=!0){const s=this.modals.indexOf(n);if(s===-1)return s;const l=findIndexOf(this.containers,c=>c.modals.includes(n)),u=this.containers[l];if(u.modals.splice(u.modals.indexOf(n),1),this.modals.splice(s,1),u.modals.length===0)u.restore&&u.restore(),n.modalRef&&ariaHidden(n.modalRef,a),ariaHiddenSiblings(u.container,n.mount,n.modalRef,u.hiddenSiblings,!1),this.containers.splice(l,1);else{const c=u.modals[u.modals.length-1];c.modalRef&&ariaHidden(c.modalRef,!1)}return s}isTopModal(n){return this.modals.length>0&&this.modals[this.modals.length-1]===n}}const candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(t){const n=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(n)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:n}function isNonTabbableRadio(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const n=s=>t.ownerDocument.querySelector(`input[type="radio"]${s}`);let a=n(`[name="${t.name}"]:checked`);return a||(a=n(`[name="${t.name}"]`)),a!==t}function isNodeMatchingSelectorFocusable(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||isNonTabbableRadio(t))}function defaultGetTabbable(t){const n=[],a=[];return Array.from(t.querySelectorAll(candidatesSelector)).forEach((s,l)=>{const u=getTabIndex(s);u===-1||!isNodeMatchingSelectorFocusable(s)||(u===0?n.push(s):a.push({documentOrder:l,tabIndex:u,node:s}))}),a.sort((s,l)=>s.tabIndex===l.tabIndex?s.documentOrder-l.documentOrder:s.tabIndex-l.tabIndex).map(s=>s.node).concat(n)}function defaultIsEnabled(){return!0}function FocusTrap(t){const{children:n,disableAutoFocus:a=!1,disableEnforceFocus:s=!1,disableRestoreFocus:l=!1,getTabbable:u=defaultGetTabbable,isEnabled:c=defaultIsEnabled,open:p}=t,d=reactExports.useRef(!1),x=reactExports.useRef(null),_=reactExports.useRef(null),S=reactExports.useRef(null),T=reactExports.useRef(null),A=reactExports.useRef(!1),R=reactExports.useRef(null),D=useForkRef(getReactElementRef(n),R),O=reactExports.useRef(null);reactExports.useEffect(()=>{!p||!R.current||(A.current=!a)},[a,p]),reactExports.useEffect(()=>{if(!p||!R.current)return;const j=ownerDocument(R.current);return R.current.contains(j.activeElement)||(R.current.hasAttribute("tabIndex")||R.current.setAttribute("tabIndex","-1"),A.current&&R.current.focus()),()=>{l||(S.current&&S.current.focus&&(d.current=!0,S.current.focus()),S.current=null)}},[p]),reactExports.useEffect(()=>{if(!p||!R.current)return;const j=ownerDocument(R.current),Z=en=>{O.current=en,!(s||!c()||en.key!=="Tab")&&j.activeElement===R.current&&en.shiftKey&&(d.current=!0,_.current&&_.current.focus())},W=()=>{var Ct,Q;const en=R.current;if(en===null)return;if(!j.hasFocus()||!c()||d.current){d.current=!1;return}if(en.contains(j.activeElement)||s&&j.activeElement!==x.current&&j.activeElement!==_.current)return;if(j.activeElement!==T.current)T.current=null;else if(T.current!==null)return;if(!A.current)return;let tn=[];if((j.activeElement===x.current||j.activeElement===_.current)&&(tn=u(R.current)),tn.length>0){const on=!!((Ct=O.current)!=null&&Ct.shiftKey&&((Q=O.current)==null?void 0:Q.key)==="Tab"),gn=tn[0],In=tn[tn.length-1];typeof gn!="string"&&typeof In!="string"&&(on?In.focus():gn.focus())}else en.focus()};j.addEventListener("focusin",W),j.addEventListener("keydown",Z,!0);const J=setInterval(()=>{j.activeElement&&j.activeElement.tagName==="BODY"&&W()},50);return()=>{clearInterval(J),j.removeEventListener("focusin",W),j.removeEventListener("keydown",Z,!0)}},[a,s,l,c,p,u]);const F=j=>{S.current===null&&(S.current=j.relatedTarget),A.current=!0,T.current=j.target;const Z=n.props.onFocus;Z&&Z(j)},z=j=>{S.current===null&&(S.current=j.relatedTarget),A.current=!0};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{tabIndex:p?0:-1,onFocus:z,ref:x,"data-testid":"sentinelStart"}),reactExports.cloneElement(n,{ref:D,onFocus:F}),jsxRuntimeExports.jsx("div",{tabIndex:p?0:-1,onFocus:z,ref:_,"data-testid":"sentinelEnd"})]})}const styles={entering:{opacity:1},entered:{opacity:1}},Fade=reactExports.forwardRef(function(n,a){const s=useTheme(),l={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:u,appear:c=!0,children:p,easing:d,in:x,onEnter:_,onEntered:S,onEntering:T,onExit:A,onExited:R,onExiting:D,style:O,timeout:F=l,TransitionComponent:z=Transition,...j}=n,Z=reactExports.useRef(null),W=useForkRef(Z,getReactElementRef(p),a),J=dn=>ix=>{if(dn){const Cn=Z.current;ix===void 0?dn(Cn):dn(Cn,ix)}},en=J(T),tn=J((dn,ix)=>{reflow(dn);const Cn=getTransitionProps({style:O,timeout:F,easing:d},{mode:"enter"});dn.style.webkitTransition=s.transitions.create("opacity",Cn),dn.style.transition=s.transitions.create("opacity",Cn),_&&_(dn,ix)}),Ct=J(S),Q=J(D),on=J(dn=>{const ix=getTransitionProps({style:O,timeout:F,easing:d},{mode:"exit"});dn.style.webkitTransition=s.transitions.create("opacity",ix),dn.style.transition=s.transitions.create("opacity",ix),A&&A(dn)}),gn=J(R),In=dn=>{u&&u(Z.current,dn)};return jsxRuntimeExports.jsx(z,{appear:c,in:x,nodeRef:Z,onEnter:tn,onEntered:Ct,onEntering:en,onExit:on,onExited:gn,onExiting:Q,addEndListener:In,timeout:F,...j,children:(dn,{ownerState:ix,...Cn})=>reactExports.cloneElement(p,{style:{opacity:0,visibility:dn==="exited"&&!x?"hidden":void 0,...styles[dn],...O,...p.props.style},ref:W,...Cn})})});function getBackdropUtilityClass(t){return generateUtilityClass("MuiBackdrop",t)}generateUtilityClasses("MuiBackdrop",["root","invisible"]);const useUtilityClasses$p=t=>{const{classes:n,invisible:a}=t;return composeClasses({root:["root",a&&"invisible"]},getBackdropUtilityClass,n)},BackdropRoot=styled("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.invisible&&n.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Backdrop=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiBackdrop"}),{children:l,className:u,component:c="div",invisible:p=!1,open:d,components:x={},componentsProps:_={},slotProps:S={},slots:T={},TransitionComponent:A,transitionDuration:R,...D}=s,O={...s,component:c,invisible:p},F=useUtilityClasses$p(O),z={transition:A,root:x.Root,...T},j={..._,...S},Z={slots:z,slotProps:j},[W,J]=useSlot("root",{elementType:BackdropRoot,externalForwardedProps:Z,className:clsx(F.root,u),ownerState:O}),[en,tn]=useSlot("transition",{elementType:Fade,externalForwardedProps:Z,ownerState:O});return jsxRuntimeExports.jsx(en,{in:d,timeout:R,...D,...tn,children:jsxRuntimeExports.jsx(W,{"aria-hidden":!0,...J,classes:F,ref:a,children:l})})});function getContainer(t){return typeof t=="function"?t():t}function getHasTransition(t){return t?t.props.hasOwnProperty("in"):!1}const noop$1=()=>{},manager=new ModalManager;function useModal(t){const{container:n,disableEscapeKeyDown:a=!1,disableScrollLock:s=!1,closeAfterTransition:l=!1,onTransitionEnter:u,onTransitionExited:c,children:p,onClose:d,open:x,rootRef:_}=t,S=reactExports.useRef({}),T=reactExports.useRef(null),A=reactExports.useRef(null),R=useForkRef(A,_),[D,O]=reactExports.useState(!x),F=getHasTransition(p);let z=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(z=!1);const j=()=>ownerDocument(T.current),Z=()=>(S.current.modalRef=A.current,S.current.mount=T.current,S.current),W=()=>{manager.mount(Z(),{disableScrollLock:s}),A.current&&(A.current.scrollTop=0)},J=useEventCallback(()=>{const ix=getContainer(n)||j().body;manager.add(Z(),ix),A.current&&W()}),en=()=>manager.isTopModal(Z()),tn=useEventCallback(ix=>{T.current=ix,ix&&(x&&en()?W():A.current&&ariaHidden(A.current,z))}),Ct=reactExports.useCallback(()=>{manager.remove(Z(),z)},[z]);reactExports.useEffect(()=>()=>{Ct()},[Ct]),reactExports.useEffect(()=>{x?J():(!F||!l)&&Ct()},[x,Ct,F,l,J]);const Q=ix=>Cn=>{var ax;(ax=ix.onKeyDown)==null||ax.call(ix,Cn),!(Cn.key!=="Escape"||Cn.which===229||!en())&&(a||(Cn.stopPropagation(),d&&d(Cn,"escapeKeyDown")))},on=ix=>Cn=>{var ax;(ax=ix.onClick)==null||ax.call(ix,Cn),Cn.target===Cn.currentTarget&&d&&d(Cn,"backdropClick")};return{getRootProps:(ix={})=>{const Cn=extractEventHandlers(t);delete Cn.onTransitionEnter,delete Cn.onTransitionExited;const ax={...Cn,...ix};return{role:"presentation",...ax,onKeyDown:Q(ax),ref:R}},getBackdropProps:(ix={})=>{const Cn=ix;return{"aria-hidden":!0,...Cn,onClick:on(Cn),open:x}},getTransitionProps:()=>{const ix=()=>{O(!1),u&&u()},Cn=()=>{O(!0),c&&c(),l&&Ct()};return{onEnter:createChainedFunction(ix,(p==null?void 0:p.props.onEnter)??noop$1),onExited:createChainedFunction(Cn,(p==null?void 0:p.props.onExited)??noop$1)}},rootRef:R,portalRef:tn,isTopModal:en,exited:D,hasTransition:F}}function getModalUtilityClass(t){return generateUtilityClass("MuiModal",t)}generateUtilityClasses("MuiModal",["root","hidden","backdrop"]);const useUtilityClasses$o=t=>{const{open:n,exited:a,classes:s}=t;return composeClasses({root:["root",!n&&a&&"hidden"],backdrop:["backdrop"]},getModalUtilityClass,s)},ModalRoot=styled("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,!a.open&&a.exited&&n.hidden]}})(memoTheme(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:n})=>!n.open&&n.exited,style:{visibility:"hidden"}}]}))),ModalBackdrop=styled(Backdrop,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),Modal=reactExports.forwardRef(function(n,a){const s=useDefaultProps({name:"MuiModal",props:n}),{BackdropComponent:l=ModalBackdrop,BackdropProps:u,classes:c,className:p,closeAfterTransition:d=!1,children:x,container:_,component:S,components:T={},componentsProps:A={},disableAutoFocus:R=!1,disableEnforceFocus:D=!1,disableEscapeKeyDown:O=!1,disablePortal:F=!1,disableRestoreFocus:z=!1,disableScrollLock:j=!1,hideBackdrop:Z=!1,keepMounted:W=!1,onClose:J,onTransitionEnter:en,onTransitionExited:tn,open:Ct,slotProps:Q={},slots:on={},theme:gn,...In}=s,dn={...s,closeAfterTransition:d,disableAutoFocus:R,disableEnforceFocus:D,disableEscapeKeyDown:O,disablePortal:F,disableRestoreFocus:z,disableScrollLock:j,hideBackdrop:Z,keepMounted:W},{getRootProps:ix,getBackdropProps:Cn,getTransitionProps:ax,portalRef:sx,isTopModal:lx,exited:ox,hasTransition:hx}=useModal({...dn,rootRef:a}),_x={...dn,exited:ox},ux=useUtilityClasses$o(_x),px={};if(x.props.tabIndex===void 0&&(px.tabIndex="-1"),hx){const{onEnter:Cx,onExited:Ax}=ax();px.onEnter=Cx,px.onExited=Ax}const dx={slots:{root:T.Root,backdrop:T.Backdrop,...on},slotProps:{...A,...Q}},[mx,gx]=useSlot("root",{ref:a,elementType:ModalRoot,externalForwardedProps:{...dx,...In,component:S},getSlotProps:ix,ownerState:_x,className:clsx(p,ux==null?void 0:ux.root,!_x.open&&_x.exited&&(ux==null?void 0:ux.hidden))}),[Sx,Ex]=useSlot("backdrop",{ref:u==null?void 0:u.ref,elementType:l,externalForwardedProps:dx,shouldForwardComponentProp:!0,additionalProps:u,getSlotProps:Cx=>Cn({...Cx,onClick:Ax=>{Cx!=null&&Cx.onClick&&Cx.onClick(Ax)}}),className:clsx(u==null?void 0:u.className,ux==null?void 0:ux.backdrop),ownerState:_x});return!W&&!Ct&&(!hx||ox)?null:jsxRuntimeExports.jsx(Portal,{ref:sx,container:_,disablePortal:F,children:jsxRuntimeExports.jsxs(mx,{...gx,children:[!Z&&l?jsxRuntimeExports.jsx(Sx,{...Ex}):null,jsxRuntimeExports.jsx(FocusTrap,{disableEnforceFocus:D,disableAutoFocus:R,disableRestoreFocus:z,isEnabled:lx,open:Ct,children:reactExports.cloneElement(x,px)})]})})});function getPaperUtilityClass(t){return generateUtilityClass("MuiPaper",t)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const useUtilityClasses$n=t=>{const{square:n,elevation:a,variant:s,classes:l}=t,u={root:["root",s,!n&&"rounded",s==="elevation"&&`elevation${a}`]};return composeClasses(u,getPaperUtilityClass,l)},PaperRoot=styled("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],!a.square&&n.rounded,a.variant==="elevation"&&n[`elevation${a.elevation}`]]}})(memoTheme(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:n})=>!n.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Paper=reactExports.forwardRef(function(n,a){var A;const s=useDefaultProps({props:n,name:"MuiPaper"}),l=useTheme(),{className:u,component:c="div",elevation:p=1,square:d=!1,variant:x="elevation",..._}=s,S={...s,component:c,elevation:p,square:d,variant:x},T=useUtilityClasses$n(S);return jsxRuntimeExports.jsx(PaperRoot,{as:c,ownerState:S,className:clsx(T.root,u),ref:a,..._,style:{...x==="elevation"&&{"--Paper-shadow":(l.vars||l).shadows[p],...l.vars&&{"--Paper-overlay":(A=l.vars.overlays)==null?void 0:A[p]},...!l.vars&&l.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${alpha$1("#fff",getOverlayAlpha(p))}, ${alpha$1("#fff",getOverlayAlpha(p))})`}},..._.style}})});function getPopoverUtilityClass(t){return generateUtilityClass("MuiPopover",t)}generateUtilityClasses("MuiPopover",["root","paper"]);function getOffsetTop(t,n){let a=0;return typeof n=="number"?a=n:n==="center"?a=t.height/2:n==="bottom"&&(a=t.height),a}function getOffsetLeft(t,n){let a=0;return typeof n=="number"?a=n:n==="center"?a=t.width/2:n==="right"&&(a=t.width),a}function getTransformOriginValue(t){return[t.horizontal,t.vertical].map(n=>typeof n=="number"?`${n}px`:n).join(" ")}function resolveAnchorEl(t){return typeof t=="function"?t():t}const useUtilityClasses$m=t=>{const{classes:n}=t;return composeClasses({root:["root"],paper:["paper"]},getPopoverUtilityClass,n)},PopoverRoot=styled(Modal,{name:"MuiPopover",slot:"Root"})({}),PopoverPaper=styled(Paper,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Popover=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiPopover"}),{action:l,anchorEl:u,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:p,anchorReference:d="anchorEl",children:x,className:_,container:S,elevation:T=8,marginThreshold:A=16,open:R,PaperProps:D={},slots:O={},slotProps:F={},transformOrigin:z={vertical:"top",horizontal:"left"},TransitionComponent:j,transitionDuration:Z="auto",TransitionProps:W={},disableScrollLock:J=!1,...en}=s,tn=reactExports.useRef(),Ct={...s,anchorOrigin:c,anchorReference:d,elevation:T,marginThreshold:A,transformOrigin:z,TransitionComponent:j,transitionDuration:Z,TransitionProps:W},Q=useUtilityClasses$m(Ct),on=reactExports.useCallback(()=>{if(d==="anchorPosition")return p;const Cx=resolveAnchorEl(u),Tx=(Cx&&Cx.nodeType===1?Cx:ownerDocument(tn.current).body).getBoundingClientRect();return{top:Tx.top+getOffsetTop(Tx,c.vertical),left:Tx.left+getOffsetLeft(Tx,c.horizontal)}},[u,c.horizontal,c.vertical,p,d]),gn=reactExports.useCallback(Cx=>({vertical:getOffsetTop(Cx,z.vertical),horizontal:getOffsetLeft(Cx,z.horizontal)}),[z.horizontal,z.vertical]),In=reactExports.useCallback(Cx=>{const Ax={width:Cx.offsetWidth,height:Cx.offsetHeight},Tx=gn(Ax);if(d==="none")return{top:null,left:null,transformOrigin:getTransformOriginValue(Tx)};const kx=on();let Rx=kx.top-Tx.vertical,$x=kx.left-Tx.horizontal;const Gx=Rx+Ax.height,qx=$x+Ax.width,Dx=ownerWindow(resolveAnchorEl(u)),lE=Dx.innerHeight-A,cE=Dx.innerWidth-A;if(A!==null&&Rx<A){const nE=Rx-A;Rx-=nE,Tx.vertical+=nE}else if(A!==null&&Gx>lE){const nE=Gx-lE;Rx-=nE,Tx.vertical+=nE}if(A!==null&&$x<A){const nE=$x-A;$x-=nE,Tx.horizontal+=nE}else if(qx>cE){const nE=qx-cE;$x-=nE,Tx.horizontal+=nE}return{top:`${Math.round(Rx)}px`,left:`${Math.round($x)}px`,transformOrigin:getTransformOriginValue(Tx)}},[u,d,on,gn,A]),[dn,ix]=reactExports.useState(R),Cn=reactExports.useCallback(()=>{const Cx=tn.current;if(!Cx)return;const Ax=In(Cx);Ax.top!==null&&Cx.style.setProperty("top",Ax.top),Ax.left!==null&&(Cx.style.left=Ax.left),Cx.style.transformOrigin=Ax.transformOrigin,ix(!0)},[In]);reactExports.useEffect(()=>(J&&window.addEventListener("scroll",Cn),()=>window.removeEventListener("scroll",Cn)),[u,J,Cn]);const ax=()=>{Cn()},sx=()=>{ix(!1)};reactExports.useEffect(()=>{R&&Cn()}),reactExports.useImperativeHandle(l,()=>R?{updatePosition:()=>{Cn()}}:null,[R,Cn]),reactExports.useEffect(()=>{if(!R)return;const Cx=debounce$2(()=>{Cn()}),Ax=ownerWindow(resolveAnchorEl(u));return Ax.addEventListener("resize",Cx),()=>{Cx.clear(),Ax.removeEventListener("resize",Cx)}},[u,R,Cn]);let lx=Z;const ox={slots:{transition:j,...O},slotProps:{transition:W,paper:D,...F}},[hx,_x]=useSlot("transition",{elementType:Grow,externalForwardedProps:ox,ownerState:Ct,getSlotProps:Cx=>({...Cx,onEntering:(Ax,Tx)=>{var kx;(kx=Cx.onEntering)==null||kx.call(Cx,Ax,Tx),ax()},onExited:Ax=>{var Tx;(Tx=Cx.onExited)==null||Tx.call(Cx,Ax),sx()}}),additionalProps:{appear:!0,in:R}});Z==="auto"&&!hx.muiSupportAuto&&(lx=void 0);const ux=S||(u?ownerDocument(resolveAnchorEl(u)).body:void 0),[px,{slots:dx,slotProps:mx,...gx}]=useSlot("root",{ref:a,elementType:PopoverRoot,externalForwardedProps:{...ox,...en},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:O.backdrop},slotProps:{backdrop:mergeSlotProps$1(typeof F.backdrop=="function"?F.backdrop(Ct):F.backdrop,{invisible:!0})},container:ux,open:R},ownerState:Ct,className:clsx(Q.root,_)}),[Sx,Ex]=useSlot("paper",{ref:tn,className:Q.paper,elementType:PopoverPaper,externalForwardedProps:ox,shouldForwardComponentProp:!0,additionalProps:{elevation:T,style:dn?void 0:{opacity:0}},ownerState:Ct});return jsxRuntimeExports.jsx(px,{...gx,...!isHostComponent(px)&&{slots:dx,slotProps:mx,disableScrollLock:J},children:jsxRuntimeExports.jsx(hx,{..._x,timeout:lx,children:jsxRuntimeExports.jsx(Sx,{...Ex,children:x})})})});function getMenuUtilityClass(t){return generateUtilityClass("MuiMenu",t)}generateUtilityClasses("MuiMenu",["root","paper","list"]);const RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},useUtilityClasses$l=t=>{const{classes:n}=t;return composeClasses({root:["root"],paper:["paper"],list:["list"]},getMenuUtilityClass,n)},MenuRoot=styled(Popover,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),MenuPaper=styled(PopoverPaper,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MenuMenuList=styled(MenuList,{name:"MuiMenu",slot:"List"})({outline:0}),Menu=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiMenu"}),{autoFocus:l=!0,children:u,className:c,disableAutoFocusItem:p=!1,MenuListProps:d={},onClose:x,open:_,PaperProps:S={},PopoverClasses:T,transitionDuration:A="auto",TransitionProps:{onEntering:R,...D}={},variant:O="selectedMenu",slots:F={},slotProps:z={},...j}=s,Z=useRtl(),W={...s,autoFocus:l,disableAutoFocusItem:p,MenuListProps:d,onEntering:R,PaperProps:S,transitionDuration:A,TransitionProps:D,variant:O},J=useUtilityClasses$l(W),en=l&&!p&&_,tn=reactExports.useRef(null),Ct=(lx,ox)=>{tn.current&&tn.current.adjustStyleForScrollbar(lx,{direction:Z?"rtl":"ltr"}),R&&R(lx,ox)},Q=lx=>{lx.key==="Tab"&&(lx.preventDefault(),x&&x(lx,"tabKeyDown"))};let on=-1;reactExports.Children.map(u,(lx,ox)=>{reactExports.isValidElement(lx)&&(lx.props.disabled||(O==="selectedMenu"&&lx.props.selected||on===-1)&&(on=ox))});const gn={slots:F,slotProps:{list:d,transition:D,paper:S,...z}},In=useSlotProps({elementType:F.root,externalSlotProps:z.root,ownerState:W,className:[J.root,c]}),[dn,ix]=useSlot("paper",{className:J.paper,elementType:MenuPaper,externalForwardedProps:gn,shouldForwardComponentProp:!0,ownerState:W}),[Cn,ax]=useSlot("list",{className:clsx(J.list,d.className),elementType:MenuMenuList,shouldForwardComponentProp:!0,externalForwardedProps:gn,getSlotProps:lx=>({...lx,onKeyDown:ox=>{var hx;Q(ox),(hx=lx.onKeyDown)==null||hx.call(lx,ox)}}),ownerState:W}),sx=typeof gn.slotProps.transition=="function"?gn.slotProps.transition(W):gn.slotProps.transition;return jsxRuntimeExports.jsx(MenuRoot,{onClose:x,anchorOrigin:{vertical:"bottom",horizontal:Z?"right":"left"},transformOrigin:Z?RTL_ORIGIN:LTR_ORIGIN,slots:{root:F.root,paper:dn,backdrop:F.backdrop,...F.transition&&{transition:F.transition}},slotProps:{root:In,paper:ix,backdrop:typeof z.backdrop=="function"?z.backdrop(W):z.backdrop,transition:{...sx,onEntering:(...lx)=>{var ox;Ct(...lx),(ox=sx==null?void 0:sx.onEntering)==null||ox.call(sx,...lx)}}},open:_,ref:a,transitionDuration:A,ownerState:W,...j,classes:T,children:jsxRuntimeExports.jsx(Cn,{actions:tn,autoFocus:l&&(on===-1||p),autoFocusItem:en,variant:O,...ax,children:u})})});function getNativeSelectUtilityClasses(t){return generateUtilityClass("MuiNativeSelect",t)}const nativeSelectClasses=generateUtilityClasses("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),useUtilityClasses$k=t=>{const{classes:n,variant:a,disabled:s,multiple:l,open:u,error:c}=t,p={select:["select",a,s&&"disabled",l&&"multiple",c&&"error"],icon:["icon",`icon${capitalize(a)}`,u&&"iconOpen",s&&"disabled"]};return composeClasses(p,getNativeSelectUtilityClasses,n)},StyledSelectSelect=styled("select")(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${nativeSelectClasses.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:n})=>n.variant!=="filled"&&n.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),NativeSelectSelect=styled(StyledSelectSelect,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:rootShouldForwardProp,overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.select,n[a.variant],a.error&&n.error,{[`&.${nativeSelectClasses.multiple}`]:n.multiple}]}})({}),StyledSelectIcon=styled("svg")(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${nativeSelectClasses.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:n})=>n.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),NativeSelectIcon=styled(StyledSelectIcon,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.icon,a.variant&&n[`icon${capitalize(a.variant)}`],a.open&&n.iconOpen]}})({}),NativeSelectInput=reactExports.forwardRef(function(n,a){const{className:s,disabled:l,error:u,IconComponent:c,inputRef:p,variant:d="standard",...x}=n,_={...n,disabled:l,variant:d,error:u},S=useUtilityClasses$k(_);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(NativeSelectSelect,{ownerState:_,className:clsx(S.select,s),disabled:l,ref:p||a,...x}),n.multiple?null:jsxRuntimeExports.jsx(NativeSelectIcon,{as:c,ownerState:_,className:S.icon})]})});function getSelectUtilityClasses(t){return generateUtilityClass("MuiSelect",t)}const selectClasses=generateUtilityClasses("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var _span;const SelectSelect=styled(StyledSelectSelect,{name:"MuiSelect",slot:"Select",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`&.${selectClasses.select}`]:n.select},{[`&.${selectClasses.select}`]:n[a.variant]},{[`&.${selectClasses.error}`]:n.error},{[`&.${selectClasses.multiple}`]:n.multiple}]}})({[`&.${selectClasses.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),SelectIcon=styled(StyledSelectIcon,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.icon,a.variant&&n[`icon${capitalize(a.variant)}`],a.open&&n.iconOpen]}})({}),SelectNativeInput=styled("input",{shouldForwardProp:t=>slotShouldForwardProp(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function areEqualValues(t,n){return typeof n=="object"&&n!==null?t===n:String(t)===String(n)}function isEmpty(t){return t==null||typeof t=="string"&&!t.trim()}const useUtilityClasses$j=t=>{const{classes:n,variant:a,disabled:s,multiple:l,open:u,error:c}=t,p={select:["select",a,s&&"disabled",l&&"multiple",c&&"error"],icon:["icon",`icon${capitalize(a)}`,u&&"iconOpen",s&&"disabled"],nativeInput:["nativeInput"]};return composeClasses(p,getSelectUtilityClasses,n)},SelectInput=reactExports.forwardRef(function(n,a){var Qx;const{"aria-describedby":s,"aria-label":l,autoFocus:u,autoWidth:c,children:p,className:d,defaultOpen:x,defaultValue:_,disabled:S,displayEmpty:T,error:A=!1,IconComponent:R,inputRef:D,labelId:O,MenuProps:F={},multiple:z,name:j,onBlur:Z,onChange:W,onClose:J,onFocus:en,onOpen:tn,open:Ct,readOnly:Q,renderValue:on,required:gn,SelectDisplayProps:In={},tabIndex:dn,type:ix,value:Cn,variant:ax="standard",...sx}=n,[lx,ox]=useControlled({controlled:Cn,default:_,name:"Select"}),[hx,_x]=useControlled({controlled:Ct,default:x,name:"Select"}),ux=reactExports.useRef(null),px=reactExports.useRef(null),[dx,mx]=reactExports.useState(null),{current:gx}=reactExports.useRef(Ct!=null),[Sx,Ex]=reactExports.useState(),Cx=useForkRef(a,D),Ax=reactExports.useCallback(tE=>{px.current=tE,tE&&mx(tE)},[]),Tx=dx==null?void 0:dx.parentNode;reactExports.useImperativeHandle(Cx,()=>({focus:()=>{px.current.focus()},node:ux.current,value:lx}),[lx]),reactExports.useEffect(()=>{x&&hx&&dx&&!gx&&(Ex(c?null:Tx.clientWidth),px.current.focus())},[dx,c]),reactExports.useEffect(()=>{u&&px.current.focus()},[u]),reactExports.useEffect(()=>{if(!O)return;const tE=ownerDocument(px.current).getElementById(O);if(tE){const hE=()=>{getSelection().isCollapsed&&px.current.focus()};return tE.addEventListener("click",hE),()=>{tE.removeEventListener("click",hE)}}},[O]);const kx=(tE,hE)=>{tE?tn&&tn(hE):J&&J(hE),gx||(Ex(c?null:Tx.clientWidth),_x(tE))},Rx=tE=>{tE.button===0&&(tE.preventDefault(),px.current.focus(),kx(!0,tE))},$x=tE=>{kx(!1,tE)},Gx=reactExports.Children.toArray(p),qx=tE=>{const hE=Gx.find(gE=>gE.props.value===tE.target.value);hE!==void 0&&(ox(hE.props.value),W&&W(tE,hE))},Dx=tE=>hE=>{let gE;if(hE.currentTarget.hasAttribute("tabindex")){if(z){gE=Array.isArray(lx)?lx.slice():[];const zx=lx.indexOf(tE.props.value);zx===-1?gE.push(tE.props.value):gE.splice(zx,1)}else gE=tE.props.value;if(tE.props.onClick&&tE.props.onClick(hE),lx!==gE&&(ox(gE),W)){const zx=hE.nativeEvent||hE,Xx=new zx.constructor(zx.type,zx);Object.defineProperty(Xx,"target",{writable:!0,value:{value:gE,name:j}}),W(Xx,tE)}z||kx(!1,hE)}},lE=tE=>{Q||[" ","ArrowUp","ArrowDown","Enter"].includes(tE.key)&&(tE.preventDefault(),kx(!0,tE))},cE=dx!==null&&hx,nE=tE=>{!cE&&Z&&(Object.defineProperty(tE,"target",{writable:!0,value:{value:lx,name:j}}),Z(tE))};delete sx["aria-invalid"];let iE,_E;const sE=[];let ME=!1;(isFilled({value:lx})||T)&&(on?iE=on(lx):ME=!0);const fx=Gx.map(tE=>{if(!reactExports.isValidElement(tE))return null;let hE;if(z){if(!Array.isArray(lx))throw new Error(formatMuiErrorMessage(2));hE=lx.some(gE=>areEqualValues(gE,tE.props.value)),hE&&ME&&sE.push(tE.props.children)}else hE=areEqualValues(lx,tE.props.value),hE&&ME&&(_E=tE.props.children);return reactExports.cloneElement(tE,{"aria-selected":hE?"true":"false",onClick:Dx(tE),onKeyUp:gE=>{gE.key===" "&&gE.preventDefault(),tE.props.onKeyUp&&tE.props.onKeyUp(gE)},role:"option",selected:hE,value:void 0,"data-value":tE.props.value})});ME&&(z?sE.length===0?iE=null:iE=sE.reduce((tE,hE,gE)=>(tE.push(hE),gE<sE.length-1&&tE.push(", "),tE),[]):iE=_E);let yx=Sx;!c&&gx&&dx&&(yx=Tx.clientWidth);let Ix;typeof dn<"u"?Ix=dn:Ix=S?null:0;const Nx=In.id||(j?`mui-component-select-${j}`:void 0),Fx={...n,variant:ax,value:lx,open:cE,error:A},Px=useUtilityClasses$j(Fx),Wx={...F.PaperProps,...(Qx=F.slotProps)==null?void 0:Qx.paper},jx=useId();return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectSelect,{as:"div",ref:Ax,tabIndex:Ix,role:"combobox","aria-controls":cE?jx:void 0,"aria-disabled":S?"true":void 0,"aria-expanded":cE?"true":"false","aria-haspopup":"listbox","aria-label":l,"aria-labelledby":[O,Nx].filter(Boolean).join(" ")||void 0,"aria-describedby":s,"aria-required":gn?"true":void 0,"aria-invalid":A?"true":void 0,onKeyDown:lE,onMouseDown:S||Q?null:Rx,onBlur:nE,onFocus:en,...In,ownerState:Fx,className:clsx(In.className,Px.select,d),id:Nx,children:isEmpty(iE)?_span||(_span=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):iE}),jsxRuntimeExports.jsx(SelectNativeInput,{"aria-invalid":A,value:Array.isArray(lx)?lx.join(","):lx,name:j,ref:ux,"aria-hidden":!0,onChange:qx,tabIndex:-1,disabled:S,className:Px.nativeInput,autoFocus:u,required:gn,...sx,ownerState:Fx}),jsxRuntimeExports.jsx(SelectIcon,{as:R,className:Px.icon,ownerState:Fx}),jsxRuntimeExports.jsx(Menu,{id:`menu-${j||""}`,anchorEl:Tx,open:cE,onClose:$x,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...F,slotProps:{...F.slotProps,list:{"aria-labelledby":O,role:"listbox","aria-multiselectable":z?"true":void 0,disableListWrap:!0,id:jx,...F.MenuListProps},paper:{...Wx,style:{minWidth:yx,...Wx!=null?Wx.style:null}}},children:fx})]})}),ArrowDropDownIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M7 10l5 5 5-5z"})),useUtilityClasses$i=t=>{const{classes:n}=t,s=composeClasses({root:["root"]},getSelectUtilityClasses,n);return{...n,...s}},styledRootConfig={name:"MuiSelect",slot:"Root",shouldForwardProp:t=>rootShouldForwardProp(t)&&t!=="variant"},StyledInput=styled(Input,styledRootConfig)(""),StyledOutlinedInput=styled(OutlinedInput,styledRootConfig)(""),StyledFilledInput=styled(FilledInput,styledRootConfig)(""),Select=reactExports.forwardRef(function(n,a){const s=useDefaultProps({name:"MuiSelect",props:n}),{autoWidth:l=!1,children:u,classes:c={},className:p,defaultOpen:d=!1,displayEmpty:x=!1,IconComponent:_=ArrowDropDownIcon,id:S,input:T,inputProps:A,label:R,labelId:D,MenuProps:O,multiple:F=!1,native:z=!1,onClose:j,onOpen:Z,open:W,renderValue:J,SelectDisplayProps:en,variant:tn="outlined",...Ct}=s,Q=z?NativeSelectInput:SelectInput,on=useFormControl(),gn=formControlState({props:s,muiFormControl:on,states:["variant","error"]}),In=gn.variant||tn,dn={...s,variant:In,classes:c},ix=useUtilityClasses$i(dn),{root:Cn,...ax}=ix,sx=T||{standard:jsxRuntimeExports.jsx(StyledInput,{ownerState:dn}),outlined:jsxRuntimeExports.jsx(StyledOutlinedInput,{label:R,ownerState:dn}),filled:jsxRuntimeExports.jsx(StyledFilledInput,{ownerState:dn})}[In],lx=useForkRef(a,getReactElementRef(sx));return jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(sx,{inputComponent:Q,inputProps:{children:u,error:gn.error,IconComponent:_,variant:In,type:void 0,multiple:F,...z?{id:S}:{autoWidth:l,defaultOpen:d,displayEmpty:x,labelId:D,MenuProps:O,onClose:j,onOpen:Z,open:W,renderValue:J,SelectDisplayProps:{id:S,...en}},...A,classes:A?deepmerge(ax,A.classes):ax,...T?T.props.inputProps:{}},...(F&&z||x)&&In==="outlined"?{notched:!0}:{},ref:lx,className:clsx(sx.props.className,p,ix.root),...!T&&{variant:In},...Ct})})});Select.muiName="Select";function getTextFieldUtilityClass(t){return generateUtilityClass("MuiTextField",t)}generateUtilityClasses("MuiTextField",["root"]);const variantComponent={standard:Input,filled:FilledInput,outlined:OutlinedInput},useUtilityClasses$h=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getTextFieldUtilityClass,n)},TextFieldRoot=styled(FormControl,{name:"MuiTextField",slot:"Root"})({}),TextField=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiTextField"}),{autoComplete:l,autoFocus:u=!1,children:c,className:p,color:d="primary",defaultValue:x,disabled:_=!1,error:S=!1,FormHelperTextProps:T,fullWidth:A=!1,helperText:R,id:D,InputLabelProps:O,inputProps:F,InputProps:z,inputRef:j,label:Z,maxRows:W,minRows:J,multiline:en=!1,name:tn,onBlur:Ct,onChange:Q,onFocus:on,placeholder:gn,required:In=!1,rows:dn,select:ix=!1,SelectProps:Cn,slots:ax={},slotProps:sx={},type:lx,value:ox,variant:hx="outlined",..._x}=s,ux={...s,autoFocus:u,color:d,disabled:_,error:S,fullWidth:A,multiline:en,required:In,select:ix,variant:hx},px=useUtilityClasses$h(ux),dx=useId(D),mx=R&&dx?`${dx}-helper-text`:void 0,gx=Z&&dx?`${dx}-label`:void 0,Sx=variantComponent[hx],Ex={slots:ax,slotProps:{input:z,inputLabel:O,htmlInput:F,formHelperText:T,select:Cn,...sx}},Cx={},Ax=Ex.slotProps.inputLabel;hx==="outlined"&&(Ax&&typeof Ax.shrink<"u"&&(Cx.notched=Ax.shrink),Cx.label=Z),ix&&((!Cn||!Cn.native)&&(Cx.id=void 0),Cx["aria-describedby"]=void 0);const[Tx,kx]=useSlot("root",{elementType:TextFieldRoot,shouldForwardComponentProp:!0,externalForwardedProps:{...Ex,..._x},ownerState:ux,className:clsx(px.root,p),ref:a,additionalProps:{disabled:_,error:S,fullWidth:A,required:In,color:d,variant:hx}}),[Rx,$x]=useSlot("input",{elementType:Sx,externalForwardedProps:Ex,additionalProps:Cx,ownerState:ux}),[Gx,qx]=useSlot("inputLabel",{elementType:InputLabel,externalForwardedProps:Ex,ownerState:ux}),[Dx,lE]=useSlot("htmlInput",{elementType:"input",externalForwardedProps:Ex,ownerState:ux}),[cE,nE]=useSlot("formHelperText",{elementType:FormHelperText,externalForwardedProps:Ex,ownerState:ux}),[iE,_E]=useSlot("select",{elementType:Select,externalForwardedProps:Ex,ownerState:ux}),sE=jsxRuntimeExports.jsx(Rx,{"aria-describedby":mx,autoComplete:l,autoFocus:u,defaultValue:x,fullWidth:A,multiline:en,name:tn,rows:dn,maxRows:W,minRows:J,type:lx,value:ox,id:dx,inputRef:j,onBlur:Ct,onChange:Q,onFocus:on,placeholder:gn,inputProps:lE,slots:{input:ax.htmlInput?Dx:void 0},...$x});return jsxRuntimeExports.jsxs(Tx,{...kx,children:[Z!=null&&Z!==""&&jsxRuntimeExports.jsx(Gx,{htmlFor:dx,id:gx,...qx,children:Z}),ix?jsxRuntimeExports.jsx(iE,{"aria-describedby":mx,id:dx,labelId:gx,value:ox,input:sE,..._E,children:c}):sE,R&&jsxRuntimeExports.jsx(cE,{id:mx,...nE,children:R})]})});function getTypographyUtilityClass(t){return generateUtilityClass("MuiTypography",t)}generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const v6Colors$1={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},extendSxProp=internal_createExtendSxProp(),useUtilityClasses$g=t=>{const{align:n,gutterBottom:a,noWrap:s,paragraph:l,variant:u,classes:c}=t,p={root:["root",u,t.align!=="inherit"&&`align${capitalize(n)}`,a&&"gutterBottom",s&&"noWrap",l&&"paragraph"]};return composeClasses(p,getTypographyUtilityClass,c)},TypographyRoot=styled("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.variant&&n[a.variant],a.align!=="inherit"&&n[`align${capitalize(a.align)}`],a.noWrap&&n.noWrap,a.gutterBottom&&n.gutterBottom,a.paragraph&&n.paragraph]}})(memoTheme(({theme:t})=>{var n;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([a,s])=>a!=="inherit"&&s&&typeof s=="object").map(([a,s])=>({props:{variant:a},style:s})),...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([a])=>({props:{color:a},style:{color:(t.vars||t).palette[a].main}})),...Object.entries(((n=t.palette)==null?void 0:n.text)||{}).filter(([,a])=>typeof a=="string").map(([a])=>({props:{color:`text${capitalize(a)}`},style:{color:(t.vars||t).palette.text[a]}})),{props:({ownerState:a})=>a.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:a})=>a.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:a})=>a.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:a})=>a.paragraph,style:{marginBottom:16}}]}})),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Typography=reactExports.forwardRef(function(n,a){const{color:s,...l}=useDefaultProps({props:n,name:"MuiTypography"}),u=!v6Colors$1[s],c=extendSxProp({...l,...u&&{color:s}}),{align:p="inherit",className:d,component:x,gutterBottom:_=!1,noWrap:S=!1,paragraph:T=!1,variant:A="body1",variantMapping:R=defaultVariantMapping,...D}=c,O={...c,align:p,color:s,className:d,component:x,gutterBottom:_,noWrap:S,paragraph:T,variant:A,variantMapping:R},F=x||(T?"p":R[A]||defaultVariantMapping[A])||"span",z=useUtilityClasses$g(O);return jsxRuntimeExports.jsx(TypographyRoot,{as:F,ref:a,className:clsx(z.root,d),...D,ownerState:O,style:{...p!=="inherit"&&{"--Typography-textAlign":p},...D.style}})}),Stack=createStack({createStyledComponent:styled("div",{name:"MuiStack",slot:"Root"}),useThemeProps:t=>useDefaultProps({props:t,name:"MuiStack"})}),dividerClasses=generateUtilityClasses("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),listItemIconClasses=generateUtilityClasses("MuiListItemIcon",["root","alignItemsFlexStart"]),listItemTextClasses=generateUtilityClasses("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function getMenuItemUtilityClass(t){return generateUtilityClass("MuiMenuItem",t)}const menuItemClasses=generateUtilityClasses("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),overridesResolver=(t,n)=>{const{ownerState:a}=t;return[n.root,a.dense&&n.dense,a.divider&&n.divider,!a.disableGutters&&n.gutters]},useUtilityClasses$f=t=>{const{disabled:n,dense:a,divider:s,disableGutters:l,selected:u,classes:c}=t,d=composeClasses({root:["root",a&&"dense",n&&"disabled",!l&&"gutters",s&&"divider",u&&"selected"]},getMenuItemUtilityClass,c);return{...c,...d}},MenuItemRoot=styled(ButtonBase,{shouldForwardProp:t=>rootShouldForwardProp(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver})(memoTheme(({theme:t})=>({...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${menuItemClasses.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:alpha$1(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:alpha$1(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${menuItemClasses.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:alpha$1(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:alpha$1(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${menuItemClasses.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${dividerClasses.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${dividerClasses.inset}`]:{marginLeft:52},[`& .${listItemTextClasses.root}`]:{marginTop:0,marginBottom:0},[`& .${listItemTextClasses.inset}`]:{paddingLeft:36},[`& .${listItemIconClasses.root}`]:{minWidth:36},variants:[{props:({ownerState:n})=>!n.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:n})=>n.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:n})=>!n.dense,style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:n})=>n.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${listItemIconClasses.root} svg`]:{fontSize:"1.25rem"}}}]}))),MenuItem=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiMenuItem"}),{autoFocus:l=!1,component:u="li",dense:c=!1,divider:p=!1,disableGutters:d=!1,focusVisibleClassName:x,role:_="menuitem",tabIndex:S,className:T,...A}=s,R=reactExports.useContext(ListContext),D=reactExports.useMemo(()=>({dense:c||R.dense||!1,disableGutters:d}),[R.dense,c,d]),O=reactExports.useRef(null);useEnhancedEffect(()=>{l&&O.current&&O.current.focus()},[l]);const F={...s,dense:D.dense,divider:p,disableGutters:d},z=useUtilityClasses$f(s),j=useForkRef(O,a);let Z;return s.disabled||(Z=S!==void 0?S:-1),jsxRuntimeExports.jsx(ListContext.Provider,{value:D,children:jsxRuntimeExports.jsx(MenuItemRoot,{ref:j,role:_,tabIndex:Z,component:u,focusVisibleClassName:clsx(z.focusVisible,x),className:clsx(z.root,T),...A,ownerState:F,classes:z})})});function getCardUtilityClass(t){return generateUtilityClass("MuiCard",t)}generateUtilityClasses("MuiCard",["root"]);const useUtilityClasses$e=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getCardUtilityClass,n)},CardRoot=styled(Paper,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Card=reactExports.forwardRef(function(n,a){const s=useDefaultProps({props:n,name:"MuiCard"}),{className:l,raised:u=!1,...c}=s,p={...s,raised:u},d=useUtilityClasses$e(p);return jsxRuntimeExports.jsx(CardRoot,{className:clsx(d.root,l),elevation:u?8:void 0,ref:a,ownerState:p,...c})});function ComponentAdjuster({componentValues:t,setComponentValues:n}){function a(l,u){n(c=>({...c,[l]:{...c[l],value:u}}))}function s(l,u){n(c=>({...c,[l]:{...c[l],unit:u}}))}return jsxRuntimeExports.jsx(Grid$1,{container:!0,spacing:2,children:Object.keys(t).map(l=>jsxRuntimeExports.jsx(Grid$1,{size:{md:3},children:jsxRuntimeExports.jsx(Card,{sx:{p:1,m:1,width:"100%"},children:jsxRuntimeExports.jsxs(Stack,{direction:"row",spacing:0,alignItems:"center",sx:{borderRadius:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{mr:1},children:l}),jsxRuntimeExports.jsx(TextField,{name:l,value:t[l].value,sx:{width:"8ch"},size:"small",onChange:u=>a(l,u.target.value)}),jsxRuntimeExports.jsx(FormControl,{size:"small",children:jsxRuntimeExports.jsx(Select,{value:t[l].unit,onChange:u=>s(l,u.target.value),children:Object.keys(units[t[l].type]).map(u=>jsxRuntimeExports.jsx(MenuItem,{value:u,size:"small",children:u},u))})})]})})},l))})}function FreqAdjusters({settings:t,setSettings:n}){function a(s,l){n(u=>({...u,[s]:l}))}return jsxRuntimeExports.jsx(Grid$1,{container:!0,spacing:2,children:[["fmin","fminUnit"],["fmax","fmaxUnit"],["resolution",null]].map(s=>jsxRuntimeExports.jsx(Grid$1,{size:{xs:12,sm:6,md:4},children:jsxRuntimeExports.jsx(Card,{sx:{p:1,m:1},children:jsxRuntimeExports.jsxs(Stack,{direction:"row",spacing:0,alignItems:"center",sx:{borderRadius:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{mr:1},children:s[0]}),jsxRuntimeExports.jsx(TextField,{name:s[0],value:t[s[0]],sx:{width:"8ch"},size:"small",onChange:l=>a(s[0],l.target.value)}),s[1]!==null&&jsxRuntimeExports.jsx(FormControl,{size:"small",children:jsxRuntimeExports.jsx(Select,{value:t[s[1]],onChange:l=>a(s[1],l.target.value),children:Object.keys(units.frequency).map(l=>jsxRuntimeExports.jsx(MenuItem,{value:l,size:"small",children:l},l))})})]})})},s[0]))})}var algebrite={},BigInteger={exports:{}},hasRequiredBigInteger;function requireBigInteger(){return hasRequiredBigInteger||(hasRequiredBigInteger=1,function(t){var n=function(a){var s=1e7,l=7,u=9007199254740992,c=R(u),p="0123456789abcdefghijklmnopqrstuvwxyz",d=typeof BigInt=="function";function x(fx,yx,Ix,Nx){return typeof fx>"u"?x[0]:typeof yx<"u"?+yx==10&&!Ix?sE(fx):qx(fx,yx,Ix,Nx):sE(fx)}function _(fx,yx){this.value=fx,this.sign=yx,this.isSmall=!1}_.prototype=Object.create(x.prototype);function S(fx){this.value=fx,this.sign=fx<0,this.isSmall=!0}S.prototype=Object.create(x.prototype);function T(fx){this.value=fx}T.prototype=Object.create(x.prototype);function A(fx){return-u<fx&&fx<u}function R(fx){return fx<1e7?[fx]:fx<1e14?[fx%1e7,Math.floor(fx/1e7)]:[fx%1e7,Math.floor(fx/1e7)%1e7,Math.floor(fx/1e14)]}function D(fx){O(fx);var yx=fx.length;if(yx<4&&ox(fx,c)<0)switch(yx){case 0:return 0;case 1:return fx[0];case 2:return fx[0]+fx[1]*s;default:return fx[0]+(fx[1]+fx[2]*s)*s}return fx}function O(fx){for(var yx=fx.length;fx[--yx]===0;);fx.length=yx+1}function F(fx){for(var yx=new Array(fx),Ix=-1;++Ix<fx;)yx[Ix]=0;return yx}function z(fx){return fx>0?Math.floor(fx):Math.ceil(fx)}function j(fx,yx){var Ix=fx.length,Nx=yx.length,Fx=new Array(Ix),Px=0,Wx=s,jx,Qx;for(Qx=0;Qx<Nx;Qx++)jx=fx[Qx]+yx[Qx]+Px,Px=jx>=Wx?1:0,Fx[Qx]=jx-Px*Wx;for(;Qx<Ix;)jx=fx[Qx]+Px,Px=jx===Wx?1:0,Fx[Qx++]=jx-Px*Wx;return Px>0&&Fx.push(Px),Fx}function Z(fx,yx){return fx.length>=yx.length?j(fx,yx):j(yx,fx)}function W(fx,yx){var Ix=fx.length,Nx=new Array(Ix),Fx=s,Px,Wx;for(Wx=0;Wx<Ix;Wx++)Px=fx[Wx]-Fx+yx,yx=Math.floor(Px/Fx),Nx[Wx]=Px-yx*Fx,yx+=1;for(;yx>0;)Nx[Wx++]=yx%Fx,yx=Math.floor(yx/Fx);return Nx}_.prototype.add=function(fx){var yx=sE(fx);if(this.sign!==yx.sign)return this.subtract(yx.negate());var Ix=this.value,Nx=yx.value;return yx.isSmall?new _(W(Ix,Math.abs(Nx)),this.sign):new _(Z(Ix,Nx),this.sign)},_.prototype.plus=_.prototype.add,S.prototype.add=function(fx){var yx=sE(fx),Ix=this.value;if(Ix<0!==yx.sign)return this.subtract(yx.negate());var Nx=yx.value;if(yx.isSmall){if(A(Ix+Nx))return new S(Ix+Nx);Nx=R(Math.abs(Nx))}return new _(W(Nx,Math.abs(Ix)),Ix<0)},S.prototype.plus=S.prototype.add,T.prototype.add=function(fx){return new T(this.value+sE(fx).value)},T.prototype.plus=T.prototype.add;function J(fx,yx){var Ix=fx.length,Nx=yx.length,Fx=new Array(Ix),Px=0,Wx=s,jx,Qx;for(jx=0;jx<Nx;jx++)Qx=fx[jx]-Px-yx[jx],Qx<0?(Qx+=Wx,Px=1):Px=0,Fx[jx]=Qx;for(jx=Nx;jx<Ix;jx++){if(Qx=fx[jx]-Px,Qx<0)Qx+=Wx;else{Fx[jx++]=Qx;break}Fx[jx]=Qx}for(;jx<Ix;jx++)Fx[jx]=fx[jx];return O(Fx),Fx}function en(fx,yx,Ix){var Nx;return ox(fx,yx)>=0?Nx=J(fx,yx):(Nx=J(yx,fx),Ix=!Ix),Nx=D(Nx),typeof Nx=="number"?(Ix&&(Nx=-Nx),new S(Nx)):new _(Nx,Ix)}function tn(fx,yx,Ix){var Nx=fx.length,Fx=new Array(Nx),Px=-yx,Wx=s,jx,Qx;for(jx=0;jx<Nx;jx++)Qx=fx[jx]+Px,Px=Math.floor(Qx/Wx),Qx%=Wx,Fx[jx]=Qx<0?Qx+Wx:Qx;return Fx=D(Fx),typeof Fx=="number"?(Ix&&(Fx=-Fx),new S(Fx)):new _(Fx,Ix)}_.prototype.subtract=function(fx){var yx=sE(fx);if(this.sign!==yx.sign)return this.add(yx.negate());var Ix=this.value,Nx=yx.value;return yx.isSmall?tn(Ix,Math.abs(Nx),this.sign):en(Ix,Nx,this.sign)},_.prototype.minus=_.prototype.subtract,S.prototype.subtract=function(fx){var yx=sE(fx),Ix=this.value;if(Ix<0!==yx.sign)return this.add(yx.negate());var Nx=yx.value;return yx.isSmall?new S(Ix-Nx):tn(Nx,Math.abs(Ix),Ix>=0)},S.prototype.minus=S.prototype.subtract,T.prototype.subtract=function(fx){return new T(this.value-sE(fx).value)},T.prototype.minus=T.prototype.subtract,_.prototype.negate=function(){return new _(this.value,!this.sign)},S.prototype.negate=function(){var fx=this.sign,yx=new S(-this.value);return yx.sign=!fx,yx},T.prototype.negate=function(){return new T(-this.value)},_.prototype.abs=function(){return new _(this.value,!1)},S.prototype.abs=function(){return new S(Math.abs(this.value))},T.prototype.abs=function(){return new T(this.value>=0?this.value:-this.value)};function Ct(fx,yx){var Ix=fx.length,Nx=yx.length,Fx=Ix+Nx,Px=F(Fx),Wx=s,jx,Qx,tE,hE,gE;for(tE=0;tE<Ix;++tE){hE=fx[tE];for(var zx=0;zx<Nx;++zx)gE=yx[zx],jx=hE*gE+Px[tE+zx],Qx=Math.floor(jx/Wx),Px[tE+zx]=jx-Qx*Wx,Px[tE+zx+1]+=Qx}return O(Px),Px}function Q(fx,yx){var Ix=fx.length,Nx=new Array(Ix),Fx=s,Px=0,Wx,jx;for(jx=0;jx<Ix;jx++)Wx=fx[jx]*yx+Px,Px=Math.floor(Wx/Fx),Nx[jx]=Wx-Px*Fx;for(;Px>0;)Nx[jx++]=Px%Fx,Px=Math.floor(Px/Fx);return Nx}function on(fx,yx){for(var Ix=[];yx-- >0;)Ix.push(0);return Ix.concat(fx)}function gn(fx,yx){var Ix=Math.max(fx.length,yx.length);if(Ix<=30)return Ct(fx,yx);Ix=Math.ceil(Ix/2);var Nx=fx.slice(Ix),Fx=fx.slice(0,Ix),Px=yx.slice(Ix),Wx=yx.slice(0,Ix),jx=gn(Fx,Wx),Qx=gn(Nx,Px),tE=gn(Z(Fx,Nx),Z(Wx,Px)),hE=Z(Z(jx,on(J(J(tE,jx),Qx),Ix)),on(Qx,2*Ix));return O(hE),hE}function In(fx,yx){return-.012*fx-.012*yx+15e-6*fx*yx>0}_.prototype.multiply=function(fx){var yx=sE(fx),Ix=this.value,Nx=yx.value,Fx=this.sign!==yx.sign,Px;if(yx.isSmall){if(Nx===0)return x[0];if(Nx===1)return this;if(Nx===-1)return this.negate();if(Px=Math.abs(Nx),Px<s)return new _(Q(Ix,Px),Fx);Nx=R(Px)}return In(Ix.length,Nx.length)?new _(gn(Ix,Nx),Fx):new _(Ct(Ix,Nx),Fx)},_.prototype.times=_.prototype.multiply;function dn(fx,yx,Ix){return fx<s?new _(Q(yx,fx),Ix):new _(Ct(yx,R(fx)),Ix)}S.prototype._multiplyBySmall=function(fx){return A(fx.value*this.value)?new S(fx.value*this.value):dn(Math.abs(fx.value),R(Math.abs(this.value)),this.sign!==fx.sign)},_.prototype._multiplyBySmall=function(fx){return fx.value===0?x[0]:fx.value===1?this:fx.value===-1?this.negate():dn(Math.abs(fx.value),this.value,this.sign!==fx.sign)},S.prototype.multiply=function(fx){return sE(fx)._multiplyBySmall(this)},S.prototype.times=S.prototype.multiply,T.prototype.multiply=function(fx){return new T(this.value*sE(fx).value)},T.prototype.times=T.prototype.multiply;function ix(fx){var yx=fx.length,Ix=F(yx+yx),Nx=s,Fx,Px,Wx,jx,Qx;for(Wx=0;Wx<yx;Wx++){jx=fx[Wx],Px=0-jx*jx;for(var tE=Wx;tE<yx;tE++)Qx=fx[tE],Fx=2*(jx*Qx)+Ix[Wx+tE]+Px,Px=Math.floor(Fx/Nx),Ix[Wx+tE]=Fx-Px*Nx;Ix[Wx+yx]=Px}return O(Ix),Ix}_.prototype.square=function(){return new _(ix(this.value),!1)},S.prototype.square=function(){var fx=this.value*this.value;return A(fx)?new S(fx):new _(ix(R(Math.abs(this.value))),!1)},T.prototype.square=function(fx){return new T(this.value*this.value)};function Cn(fx,yx){var Ix=fx.length,Nx=yx.length,Fx=s,Px=F(yx.length),Wx=yx[Nx-1],jx=Math.ceil(Fx/(2*Wx)),Qx=Q(fx,jx),tE=Q(yx,jx),hE,gE,zx,Xx,oE,Jx,fE;for(Qx.length<=Ix&&Qx.push(0),tE.push(0),Wx=tE[Nx-1],gE=Ix-Nx;gE>=0;gE--){for(hE=Fx-1,Qx[gE+Nx]!==Wx&&(hE=Math.floor((Qx[gE+Nx]*Fx+Qx[gE+Nx-1])/Wx)),zx=0,Xx=0,Jx=tE.length,oE=0;oE<Jx;oE++)zx+=hE*tE[oE],fE=Math.floor(zx/Fx),Xx+=Qx[gE+oE]-(zx-fE*Fx),zx=fE,Xx<0?(Qx[gE+oE]=Xx+Fx,Xx=-1):(Qx[gE+oE]=Xx,Xx=0);for(;Xx!==0;){for(hE-=1,zx=0,oE=0;oE<Jx;oE++)zx+=Qx[gE+oE]-Fx+tE[oE],zx<0?(Qx[gE+oE]=zx+Fx,zx=0):(Qx[gE+oE]=zx,zx=1);Xx+=zx}Px[gE]=hE}return Qx=sx(Qx,jx)[0],[D(Px),D(Qx)]}function ax(fx,yx){for(var Ix=fx.length,Nx=yx.length,Fx=[],Px=[],Wx=s,jx,Qx,tE,hE,gE;Ix;){if(Px.unshift(fx[--Ix]),O(Px),ox(Px,yx)<0){Fx.push(0);continue}Qx=Px.length,tE=Px[Qx-1]*Wx+Px[Qx-2],hE=yx[Nx-1]*Wx+yx[Nx-2],Qx>Nx&&(tE=(tE+1)*Wx),jx=Math.ceil(tE/hE);do{if(gE=Q(yx,jx),ox(gE,Px)<=0)break;jx--}while(jx);Fx.push(jx),Px=J(Px,gE)}return Fx.reverse(),[D(Fx),D(Px)]}function sx(fx,yx){var Ix=fx.length,Nx=F(Ix),Fx=s,Px,Wx,jx,Qx;for(jx=0,Px=Ix-1;Px>=0;--Px)Qx=jx*Fx+fx[Px],Wx=z(Qx/yx),jx=Qx-Wx*yx,Nx[Px]=Wx|0;return[Nx,jx|0]}function lx(fx,yx){var Ix,Nx=sE(yx);if(d)return[new T(fx.value/Nx.value),new T(fx.value%Nx.value)];var Fx=fx.value,Px=Nx.value,Wx;if(Px===0)throw new Error("Cannot divide by zero");if(fx.isSmall)return Nx.isSmall?[new S(z(Fx/Px)),new S(Fx%Px)]:[x[0],fx];if(Nx.isSmall){if(Px===1)return[fx,x[0]];if(Px==-1)return[fx.negate(),x[0]];var jx=Math.abs(Px);if(jx<s){Ix=sx(Fx,jx),Wx=D(Ix[0]);var Qx=Ix[1];return fx.sign&&(Qx=-Qx),typeof Wx=="number"?(fx.sign!==Nx.sign&&(Wx=-Wx),[new S(Wx),new S(Qx)]):[new _(Wx,fx.sign!==Nx.sign),new S(Qx)]}Px=R(jx)}var tE=ox(Fx,Px);if(tE===-1)return[x[0],fx];if(tE===0)return[x[fx.sign===Nx.sign?1:-1],x[0]];Fx.length+Px.length<=200?Ix=Cn(Fx,Px):Ix=ax(Fx,Px),Wx=Ix[0];var hE=fx.sign!==Nx.sign,gE=Ix[1],zx=fx.sign;return typeof Wx=="number"?(hE&&(Wx=-Wx),Wx=new S(Wx)):Wx=new _(Wx,hE),typeof gE=="number"?(zx&&(gE=-gE),gE=new S(gE)):gE=new _(gE,zx),[Wx,gE]}_.prototype.divmod=function(fx){var yx=lx(this,fx);return{quotient:yx[0],remainder:yx[1]}},T.prototype.divmod=S.prototype.divmod=_.prototype.divmod,_.prototype.divide=function(fx){return lx(this,fx)[0]},T.prototype.over=T.prototype.divide=function(fx){return new T(this.value/sE(fx).value)},S.prototype.over=S.prototype.divide=_.prototype.over=_.prototype.divide,_.prototype.mod=function(fx){return lx(this,fx)[1]},T.prototype.mod=T.prototype.remainder=function(fx){return new T(this.value%sE(fx).value)},S.prototype.remainder=S.prototype.mod=_.prototype.remainder=_.prototype.mod,_.prototype.pow=function(fx){var yx=sE(fx),Ix=this.value,Nx=yx.value,Fx,Px,Wx;if(Nx===0)return x[1];if(Ix===0)return x[0];if(Ix===1)return x[1];if(Ix===-1)return yx.isEven()?x[1]:x[-1];if(yx.sign)return x[0];if(!yx.isSmall)throw new Error("The exponent "+yx.toString()+" is too large.");if(this.isSmall&&A(Fx=Math.pow(Ix,Nx)))return new S(z(Fx));for(Px=this,Wx=x[1];Nx&!0&&(Wx=Wx.times(Px),--Nx),Nx!==0;)Nx/=2,Px=Px.square();return Wx},S.prototype.pow=_.prototype.pow,T.prototype.pow=function(fx){var yx=sE(fx),Ix=this.value,Nx=yx.value,Fx=BigInt(0),Px=BigInt(1),Wx=BigInt(2);if(Nx===Fx)return x[1];if(Ix===Fx)return x[0];if(Ix===Px)return x[1];if(Ix===BigInt(-1))return yx.isEven()?x[1]:x[-1];if(yx.isNegative())return new T(Fx);for(var jx=this,Qx=x[1];(Nx&Px)===Px&&(Qx=Qx.times(jx),--Nx),Nx!==Fx;)Nx/=Wx,jx=jx.square();return Qx},_.prototype.modPow=function(fx,yx){if(fx=sE(fx),yx=sE(yx),yx.isZero())throw new Error("Cannot take modPow with modulus 0");var Ix=x[1],Nx=this.mod(yx);for(fx.isNegative()&&(fx=fx.multiply(x[-1]),Nx=Nx.modInv(yx));fx.isPositive();){if(Nx.isZero())return x[0];fx.isOdd()&&(Ix=Ix.multiply(Nx).mod(yx)),fx=fx.divide(2),Nx=Nx.square().mod(yx)}return Ix},T.prototype.modPow=S.prototype.modPow=_.prototype.modPow;function ox(fx,yx){if(fx.length!==yx.length)return fx.length>yx.length?1:-1;for(var Ix=fx.length-1;Ix>=0;Ix--)if(fx[Ix]!==yx[Ix])return fx[Ix]>yx[Ix]?1:-1;return 0}_.prototype.compareAbs=function(fx){var yx=sE(fx),Ix=this.value,Nx=yx.value;return yx.isSmall?1:ox(Ix,Nx)},S.prototype.compareAbs=function(fx){var yx=sE(fx),Ix=Math.abs(this.value),Nx=yx.value;return yx.isSmall?(Nx=Math.abs(Nx),Ix===Nx?0:Ix>Nx?1:-1):-1},T.prototype.compareAbs=function(fx){var yx=this.value,Ix=sE(fx).value;return yx=yx>=0?yx:-yx,Ix=Ix>=0?Ix:-Ix,yx===Ix?0:yx>Ix?1:-1},_.prototype.compare=function(fx){if(fx===1/0)return-1;if(fx===-1/0)return 1;var yx=sE(fx),Ix=this.value,Nx=yx.value;return this.sign!==yx.sign?yx.sign?1:-1:yx.isSmall?this.sign?-1:1:ox(Ix,Nx)*(this.sign?-1:1)},_.prototype.compareTo=_.prototype.compare,S.prototype.compare=function(fx){if(fx===1/0)return-1;if(fx===-1/0)return 1;var yx=sE(fx),Ix=this.value,Nx=yx.value;return yx.isSmall?Ix==Nx?0:Ix>Nx?1:-1:Ix<0!==yx.sign?Ix<0?-1:1:Ix<0?1:-1},S.prototype.compareTo=S.prototype.compare,T.prototype.compare=function(fx){if(fx===1/0)return-1;if(fx===-1/0)return 1;var yx=this.value,Ix=sE(fx).value;return yx===Ix?0:yx>Ix?1:-1},T.prototype.compareTo=T.prototype.compare,_.prototype.equals=function(fx){return this.compare(fx)===0},T.prototype.eq=T.prototype.equals=S.prototype.eq=S.prototype.equals=_.prototype.eq=_.prototype.equals,_.prototype.notEquals=function(fx){return this.compare(fx)!==0},T.prototype.neq=T.prototype.notEquals=S.prototype.neq=S.prototype.notEquals=_.prototype.neq=_.prototype.notEquals,_.prototype.greater=function(fx){return this.compare(fx)>0},T.prototype.gt=T.prototype.greater=S.prototype.gt=S.prototype.greater=_.prototype.gt=_.prototype.greater,_.prototype.lesser=function(fx){return this.compare(fx)<0},T.prototype.lt=T.prototype.lesser=S.prototype.lt=S.prototype.lesser=_.prototype.lt=_.prototype.lesser,_.prototype.greaterOrEquals=function(fx){return this.compare(fx)>=0},T.prototype.geq=T.prototype.greaterOrEquals=S.prototype.geq=S.prototype.greaterOrEquals=_.prototype.geq=_.prototype.greaterOrEquals,_.prototype.lesserOrEquals=function(fx){return this.compare(fx)<=0},T.prototype.leq=T.prototype.lesserOrEquals=S.prototype.leq=S.prototype.lesserOrEquals=_.prototype.leq=_.prototype.lesserOrEquals,_.prototype.isEven=function(){return(this.value[0]&1)===0},S.prototype.isEven=function(){return(this.value&1)===0},T.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},_.prototype.isOdd=function(){return(this.value[0]&1)===1},S.prototype.isOdd=function(){return(this.value&1)===1},T.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},_.prototype.isPositive=function(){return!this.sign},S.prototype.isPositive=function(){return this.value>0},T.prototype.isPositive=S.prototype.isPositive,_.prototype.isNegative=function(){return this.sign},S.prototype.isNegative=function(){return this.value<0},T.prototype.isNegative=S.prototype.isNegative,_.prototype.isUnit=function(){return!1},S.prototype.isUnit=function(){return Math.abs(this.value)===1},T.prototype.isUnit=function(){return this.abs().value===BigInt(1)},_.prototype.isZero=function(){return!1},S.prototype.isZero=function(){return this.value===0},T.prototype.isZero=function(){return this.value===BigInt(0)},_.prototype.isDivisibleBy=function(fx){var yx=sE(fx);return yx.isZero()?!1:yx.isUnit()?!0:yx.compareAbs(2)===0?this.isEven():this.mod(yx).isZero()},T.prototype.isDivisibleBy=S.prototype.isDivisibleBy=_.prototype.isDivisibleBy;function hx(fx){var yx=fx.abs();if(yx.isUnit())return!1;if(yx.equals(2)||yx.equals(3)||yx.equals(5))return!0;if(yx.isEven()||yx.isDivisibleBy(3)||yx.isDivisibleBy(5))return!1;if(yx.lesser(49))return!0}function _x(fx,yx){for(var Ix=fx.prev(),Nx=Ix,Fx=0,Px,Wx,jx;Nx.isEven();)Nx=Nx.divide(2),Fx++;e:for(Wx=0;Wx<yx.length;Wx++)if(!fx.lesser(yx[Wx])&&(jx=n(yx[Wx]).modPow(Nx,fx),!(jx.isUnit()||jx.equals(Ix)))){for(Px=Fx-1;Px!=0;Px--){if(jx=jx.square().mod(fx),jx.isUnit())return!1;if(jx.equals(Ix))continue e}return!1}return!0}_.prototype.isPrime=function(fx){var yx=hx(this);if(yx!==a)return yx;var Ix=this.abs(),Nx=Ix.bitLength();if(Nx<=64)return _x(Ix,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var Fx=Math.log(2)*Nx.toJSNumber(),Px=Math.ceil(fx===!0?2*Math.pow(Fx,2):Fx),Wx=[],jx=0;jx<Px;jx++)Wx.push(n(jx+2));return _x(Ix,Wx)},T.prototype.isPrime=S.prototype.isPrime=_.prototype.isPrime,_.prototype.isProbablePrime=function(fx,yx){var Ix=hx(this);if(Ix!==a)return Ix;for(var Nx=this.abs(),Fx=fx===a?5:fx,Px=[],Wx=0;Wx<Fx;Wx++)Px.push(n.randBetween(2,Nx.minus(2),yx));return _x(Nx,Px)},T.prototype.isProbablePrime=S.prototype.isProbablePrime=_.prototype.isProbablePrime,_.prototype.modInv=function(fx){for(var yx=n.zero,Ix=n.one,Nx=sE(fx),Fx=this.abs(),Px,Wx,jx;!Fx.isZero();)Px=Nx.divide(Fx),Wx=yx,jx=Nx,yx=Ix,Nx=Fx,Ix=Wx.subtract(Px.multiply(Ix)),Fx=jx.subtract(Px.multiply(Fx));if(!Nx.isUnit())throw new Error(this.toString()+" and "+fx.toString()+" are not co-prime");return yx.compare(0)===-1&&(yx=yx.add(fx)),this.isNegative()?yx.negate():yx},T.prototype.modInv=S.prototype.modInv=_.prototype.modInv,_.prototype.next=function(){var fx=this.value;return this.sign?tn(fx,1,this.sign):new _(W(fx,1),this.sign)},S.prototype.next=function(){var fx=this.value;return fx+1<u?new S(fx+1):new _(c,!1)},T.prototype.next=function(){return new T(this.value+BigInt(1))},_.prototype.prev=function(){var fx=this.value;return this.sign?new _(W(fx,1),!0):tn(fx,1,this.sign)},S.prototype.prev=function(){var fx=this.value;return fx-1>-u?new S(fx-1):new _(c,!0)},T.prototype.prev=function(){return new T(this.value-BigInt(1))};for(var ux=[1];2*ux[ux.length-1]<=s;)ux.push(2*ux[ux.length-1]);var px=ux.length,dx=ux[px-1];function mx(fx){return Math.abs(fx)<=s}_.prototype.shiftLeft=function(fx){var yx=sE(fx).toJSNumber();if(!mx(yx))throw new Error(String(yx)+" is too large for shifting.");if(yx<0)return this.shiftRight(-yx);var Ix=this;if(Ix.isZero())return Ix;for(;yx>=px;)Ix=Ix.multiply(dx),yx-=px-1;return Ix.multiply(ux[yx])},T.prototype.shiftLeft=S.prototype.shiftLeft=_.prototype.shiftLeft,_.prototype.shiftRight=function(fx){var yx,Ix=sE(fx).toJSNumber();if(!mx(Ix))throw new Error(String(Ix)+" is too large for shifting.");if(Ix<0)return this.shiftLeft(-Ix);for(var Nx=this;Ix>=px;){if(Nx.isZero()||Nx.isNegative()&&Nx.isUnit())return Nx;yx=lx(Nx,dx),Nx=yx[1].isNegative()?yx[0].prev():yx[0],Ix-=px-1}return yx=lx(Nx,ux[Ix]),yx[1].isNegative()?yx[0].prev():yx[0]},T.prototype.shiftRight=S.prototype.shiftRight=_.prototype.shiftRight;function gx(fx,yx,Ix){yx=sE(yx);for(var Nx=fx.isNegative(),Fx=yx.isNegative(),Px=Nx?fx.not():fx,Wx=Fx?yx.not():yx,jx=0,Qx=0,tE=null,hE=null,gE=[];!Px.isZero()||!Wx.isZero();)tE=lx(Px,dx),jx=tE[1].toJSNumber(),Nx&&(jx=dx-1-jx),hE=lx(Wx,dx),Qx=hE[1].toJSNumber(),Fx&&(Qx=dx-1-Qx),Px=tE[0],Wx=hE[0],gE.push(Ix(jx,Qx));for(var zx=Ix(Nx?1:0,Fx?1:0)!==0?n(-1):n(0),Xx=gE.length-1;Xx>=0;Xx-=1)zx=zx.multiply(dx).add(n(gE[Xx]));return zx}_.prototype.not=function(){return this.negate().prev()},T.prototype.not=S.prototype.not=_.prototype.not,_.prototype.and=function(fx){return gx(this,fx,function(yx,Ix){return yx&Ix})},T.prototype.and=S.prototype.and=_.prototype.and,_.prototype.or=function(fx){return gx(this,fx,function(yx,Ix){return yx|Ix})},T.prototype.or=S.prototype.or=_.prototype.or,_.prototype.xor=function(fx){return gx(this,fx,function(yx,Ix){return yx^Ix})},T.prototype.xor=S.prototype.xor=_.prototype.xor;var Sx=1<<30,Ex=(s&-s)*(s&-s)|Sx;function Cx(fx){var yx=fx.value,Ix=typeof yx=="number"?yx|Sx:typeof yx=="bigint"?yx|BigInt(Sx):yx[0]+yx[1]*s|Ex;return Ix&-Ix}function Ax(fx,yx){if(yx.compareTo(fx)<=0){var Ix=Ax(fx,yx.square(yx)),Nx=Ix.p,Fx=Ix.e,Px=Nx.multiply(yx);return Px.compareTo(fx)<=0?{p:Px,e:Fx*2+1}:{p:Nx,e:Fx*2}}return{p:n(1),e:0}}_.prototype.bitLength=function(){var fx=this;return fx.compareTo(n(0))<0&&(fx=fx.negate().subtract(n(1))),fx.compareTo(n(0))===0?n(0):n(Ax(fx,n(2)).e).add(n(1))},T.prototype.bitLength=S.prototype.bitLength=_.prototype.bitLength;function Tx(fx,yx){return fx=sE(fx),yx=sE(yx),fx.greater(yx)?fx:yx}function kx(fx,yx){return fx=sE(fx),yx=sE(yx),fx.lesser(yx)?fx:yx}function Rx(fx,yx){if(fx=sE(fx).abs(),yx=sE(yx).abs(),fx.equals(yx))return fx;if(fx.isZero())return yx;if(yx.isZero())return fx;for(var Ix=x[1],Nx,Fx;fx.isEven()&&yx.isEven();)Nx=kx(Cx(fx),Cx(yx)),fx=fx.divide(Nx),yx=yx.divide(Nx),Ix=Ix.multiply(Nx);for(;fx.isEven();)fx=fx.divide(Cx(fx));do{for(;yx.isEven();)yx=yx.divide(Cx(yx));fx.greater(yx)&&(Fx=yx,yx=fx,fx=Fx),yx=yx.subtract(fx)}while(!yx.isZero());return Ix.isUnit()?fx:fx.multiply(Ix)}function $x(fx,yx){return fx=sE(fx).abs(),yx=sE(yx).abs(),fx.divide(Rx(fx,yx)).multiply(yx)}function Gx(fx,yx,Ix){fx=sE(fx),yx=sE(yx);var Nx=Ix||Math.random,Fx=kx(fx,yx),Px=Tx(fx,yx),Wx=Px.subtract(Fx).add(1);if(Wx.isSmall)return Fx.add(Math.floor(Nx()*Wx));for(var jx=cE(Wx,s).value,Qx=[],tE=!0,hE=0;hE<jx.length;hE++){var gE=tE?jx[hE]+(hE+1<jx.length?jx[hE+1]/s:0):s,zx=z(Nx()*gE);Qx.push(zx),zx<jx[hE]&&(tE=!1)}return Fx.add(x.fromArray(Qx,s,!1))}var qx=function(fx,yx,Ix,Nx){Ix=Ix||p,fx=String(fx),Nx||(fx=fx.toLowerCase(),Ix=Ix.toLowerCase());var Fx=fx.length,Px,Wx=Math.abs(yx),jx={};for(Px=0;Px<Ix.length;Px++)jx[Ix[Px]]=Px;for(Px=0;Px<Fx;Px++){var Qx=fx[Px];if(Qx!=="-"&&Qx in jx&&jx[Qx]>=Wx){if(Qx==="1"&&Wx===1)continue;throw new Error(Qx+" is not a valid digit in base "+yx+".")}}yx=sE(yx);var tE=[],hE=fx[0]==="-";for(Px=hE?1:0;Px<fx.length;Px++){var Qx=fx[Px];if(Qx in jx)tE.push(sE(jx[Qx]));else if(Qx==="<"){var gE=Px;do Px++;while(fx[Px]!==">"&&Px<fx.length);tE.push(sE(fx.slice(gE+1,Px)))}else throw new Error(Qx+" is not a valid character")}return Dx(tE,yx,hE)};function Dx(fx,yx,Ix){var Nx=x[0],Fx=x[1],Px;for(Px=fx.length-1;Px>=0;Px--)Nx=Nx.add(fx[Px].times(Fx)),Fx=Fx.times(yx);return Ix?Nx.negate():Nx}function lE(fx,yx){return yx=yx||p,fx<yx.length?yx[fx]:"<"+fx+">"}function cE(fx,yx){if(yx=n(yx),yx.isZero()){if(fx.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(yx.equals(-1)){if(fx.isZero())return{value:[0],isNegative:!1};if(fx.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-fx.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var Ix=Array.apply(null,Array(fx.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return Ix.unshift([1]),{value:[].concat.apply([],Ix),isNegative:!1}}var Nx=!1;if(fx.isNegative()&&yx.isPositive()&&(Nx=!0,fx=fx.abs()),yx.isUnit())return fx.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(fx.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:Nx};for(var Fx=[],Px=fx,Wx;Px.isNegative()||Px.compareAbs(yx)>=0;){Wx=Px.divmod(yx),Px=Wx.quotient;var jx=Wx.remainder;jx.isNegative()&&(jx=yx.minus(jx).abs(),Px=Px.next()),Fx.push(jx.toJSNumber())}return Fx.push(Px.toJSNumber()),{value:Fx.reverse(),isNegative:Nx}}function nE(fx,yx,Ix){var Nx=cE(fx,yx);return(Nx.isNegative?"-":"")+Nx.value.map(function(Fx){return lE(Fx,Ix)}).join("")}_.prototype.toArray=function(fx){return cE(this,fx)},S.prototype.toArray=function(fx){return cE(this,fx)},T.prototype.toArray=function(fx){return cE(this,fx)},_.prototype.toString=function(fx,yx){if(fx===a&&(fx=10),fx!==10||yx)return nE(this,fx,yx);for(var Ix=this.value,Nx=Ix.length,Fx=String(Ix[--Nx]),Px="0000000",Wx;--Nx>=0;)Wx=String(Ix[Nx]),Fx+=Px.slice(Wx.length)+Wx;var jx=this.sign?"-":"";return jx+Fx},S.prototype.toString=function(fx,yx){return fx===a&&(fx=10),fx!=10||yx?nE(this,fx,yx):String(this.value)},T.prototype.toString=S.prototype.toString,T.prototype.toJSON=_.prototype.toJSON=S.prototype.toJSON=function(){return this.toString()},_.prototype.valueOf=function(){return parseInt(this.toString(),10)},_.prototype.toJSNumber=_.prototype.valueOf,S.prototype.valueOf=function(){return this.value},S.prototype.toJSNumber=S.prototype.valueOf,T.prototype.valueOf=T.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function iE(fx){if(A(+fx)){var yx=+fx;if(yx===z(yx))return d?new T(BigInt(yx)):new S(yx);throw new Error("Invalid integer: "+fx)}var Ix=fx[0]==="-";Ix&&(fx=fx.slice(1));var Nx=fx.split(/e/i);if(Nx.length>2)throw new Error("Invalid integer: "+Nx.join("e"));if(Nx.length===2){var Fx=Nx[1];if(Fx[0]==="+"&&(Fx=Fx.slice(1)),Fx=+Fx,Fx!==z(Fx)||!A(Fx))throw new Error("Invalid integer: "+Fx+" is not a valid exponent.");var Px=Nx[0],Wx=Px.indexOf(".");if(Wx>=0&&(Fx-=Px.length-Wx-1,Px=Px.slice(0,Wx)+Px.slice(Wx+1)),Fx<0)throw new Error("Cannot include negative exponent part for integers");Px+=new Array(Fx+1).join("0"),fx=Px}var jx=/^([0-9][0-9]*)$/.test(fx);if(!jx)throw new Error("Invalid integer: "+fx);if(d)return new T(BigInt(Ix?"-"+fx:fx));for(var Qx=[],tE=fx.length,hE=l,gE=tE-hE;tE>0;)Qx.push(+fx.slice(gE,tE)),gE-=hE,gE<0&&(gE=0),tE-=hE;return O(Qx),new _(Qx,Ix)}function _E(fx){if(d)return new T(BigInt(fx));if(A(fx)){if(fx!==z(fx))throw new Error(fx+" is not an integer.");return new S(fx)}return iE(fx.toString())}function sE(fx){return typeof fx=="number"?_E(fx):typeof fx=="string"?iE(fx):typeof fx=="bigint"?new T(fx):fx}for(var ME=0;ME<1e3;ME++)x[ME]=sE(ME),ME>0&&(x[-ME]=sE(-ME));return x.one=x[1],x.zero=x[0],x.minusOne=x[-1],x.max=Tx,x.min=kx,x.gcd=Rx,x.lcm=$x,x.isInstance=function(fx){return fx instanceof _||fx instanceof S||fx instanceof T},x.randBetween=Gx,x.fromArray=function(fx,yx,Ix){return Dx(fx.map(sE),sE(yx||10),Ix)},x}();t.hasOwnProperty("exports")&&(t.exports=n)}(BigInteger)),BigInteger.exports}var hasRequiredAlgebrite;function requireAlgebrite(){return hasRequiredAlgebrite||(hasRequiredAlgebrite=1,function(exports){(function(){var $,ABS,ADD,ADJ,AND,APPROXRATIO,ARCCOS,ARCCOSH,ARCSIN,ARCSINH,ARCTAN,ARCTANH,ARG,ASSUME_REAL_VARIABLES,ATOMIZE,AUTOEXPAND,BAKE,BESSELJ,BESSELY,BINDING,BINOMIAL,BINOM_check_args,C1,C2,C3,C4,C5,C6,CEILING,CHECK,CHOOSE,CIRCEXP,CLEAR,CLEARALL,CLEARPATTERNS,CLOCK,COEFF,COFACTOR,CONDENSE,CONJ,CONS,CONTRACT,COS,COSH,Condense,DEBUG,DEBUG_ABS,DEBUG_ARG,DEBUG_CLOCKFORM,DEBUG_IMAG,DEBUG_IS,DEBUG_MULTIPLY,DEBUG_POWER,DEBUG_RATIONALIZE,DEBUG_RECT,DEBUG_SIMPLIFY,DECOMP,DEFINT,DEGREE,DENOMINATOR,DERIVATIVE,DET,DET_check_arg,DIM,DIRAC,DIVISORS,DO,DOT,DOUBLE,DRAW,DRAWX,DSOLVE,E,EIGEN,EIGENVAL,EIGENVEC,EIG_N,EIG_check_arg,EIG_yydd,EIG_yyqq,ERF,ERFC,EVAL,EXP,EXPAND,EXPCOS,EXPSIN,Eval,Eval_Eval,Eval_abs,Eval_add,Eval_adj,Eval_and,Eval_approxratio,Eval_arccos,Eval_arccosh,Eval_arcsin,Eval_arcsinh,Eval_arctan,Eval_arctanh,Eval_arg,Eval_besselj,Eval_bessely,Eval_binding,Eval_binomial,Eval_ceiling,Eval_check,Eval_choose,Eval_circexp,Eval_clear,Eval_clearall,Eval_clearpatterns,Eval_clock,Eval_coeff,Eval_cofactor,Eval_condense,Eval_conj,Eval_cons,Eval_contract,Eval_cos,Eval_cosh,Eval_decomp,Eval_defint,Eval_degree,Eval_denominator,Eval_derivative,Eval_det,Eval_dim,Eval_dirac,Eval_divisors,Eval_do,Eval_dsolve,Eval_eigen,Eval_eigenval,Eval_eigenvec,Eval_erf,Eval_erfc,Eval_exp,Eval_expand,Eval_expcos,Eval_expsin,Eval_factor,Eval_factorial,Eval_factorpoly,Eval_filter,Eval_float,Eval_floor,Eval_for,Eval_function_reference,Eval_gamma,Eval_gcd,Eval_hermite,Eval_hilbert,Eval_imag,Eval_index,Eval_inner,Eval_integral,Eval_inv,Eval_invg,Eval_isinteger,Eval_isprime,Eval_laguerre,Eval_lcm,Eval_leading,Eval_legendre,Eval_log,Eval_lookup,Eval_mod,Eval_multiply,Eval_not,Eval_nroots,Eval_number,Eval_numerator,Eval_operator,Eval_or,Eval_outer,Eval_pattern,Eval_patternsinfo,Eval_polar,Eval_power,Eval_predicate,Eval_prime,Eval_print,Eval_print2dascii,Eval_printcomputer,Eval_printhuman,Eval_printlatex,Eval_printlist,Eval_product,Eval_quote,Eval_quotient,Eval_rank,Eval_rationalize,Eval_real,Eval_rect,Eval_roots,Eval_round,Eval_setq,Eval_sgn,Eval_shape,Eval_silentpattern,Eval_simplify,Eval_sin,Eval_sinh,Eval_sqrt,Eval_stop,Eval_subst,Eval_sum,Eval_sym,Eval_symbolsinfo,Eval_tan,Eval_tanh,Eval_taylor,Eval_tensor,Eval_test,Eval_testeq,Eval_testge,Eval_testgt,Eval_testle,Eval_testlt,Eval_transpose,Eval_unit,Eval_user_function,Eval_zero,Evalpoly,FACTOR,FACTORIAL,FACTORPOLY,FILTER,FLOATF,FLOOR,FOR,FORCE_FIXED_PRINTOUT,FUNCTION,Find,GAMMA,GCD,HERMITE,HILBERT,IMAG,INDEX,INNER,INTEGRAL,INV,INVG,INV_check_arg,INV_decomp,ISINTEGER,ISPRIME,LAGUERRE,LAST,LAST_2DASCII_PRINT,LAST_FULL_PRINT,LAST_LATEX_PRINT,LAST_LIST_PRINT,LAST_PLAIN_PRINT,LAST_PRINT,LCM,LEADING,LEGENDRE,LOG,LOOKUP,M,MAXDIM,MAXPRIMETAB,MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES,MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE,MAX_FIXED_PRINTOUT_DIGITS,MEQUAL,METAA,METAB,METAX,MOD,MSIGN,MULTIPLY,MZERO,N,NIL,NOT,NROOTS,NROOTS_ABS,NROOTS_DELTA,NROOTS_EPSILON,NROOTS_RANDOM,NROOTS_YMAX,NROOTS_divpoly,NSYM,NUM,NUMBER,NUMERATOR,OPERATOR,OR,OUTER,PATTERN,PATTERNSINFO,PI,POLAR,POWER,PRIME,PRINT,PRINT2DASCII,PRINTFULL,PRINTLATEX,PRINTLIST,PRINTMODE_2DASCII,PRINTMODE_COMPUTER,PRINTMODE_HUMAN,PRINTMODE_LATEX,PRINTMODE_LIST,PRINTOUTRESULT,PRINTPLAIN,PRINT_LEAVE_E_ALONE,PRINT_LEAVE_X_ALONE,PRODUCT,QUOTE,QUOTIENT,RANK,RATIONALIZE,REAL,ROOTS,ROUND,SECRETX,SETQ,SGN,SHAPE,SILENTPATTERN,SIMPLIFY,SIN,SINH,SPACE_BETWEEN_COLUMNS,SPACE_BETWEEN_ROWS,SQRT,STOP,STR,SUBST,SUM,SYM,SYMBOLSINFO,SYMBOL_A,SYMBOL_A_UNDERSCORE,SYMBOL_B,SYMBOL_B_UNDERSCORE,SYMBOL_C,SYMBOL_D,SYMBOL_I,SYMBOL_IDENTITY_MATRIX,SYMBOL_J,SYMBOL_N,SYMBOL_R,SYMBOL_S,SYMBOL_T,SYMBOL_X,SYMBOL_X_UNDERSCORE,SYMBOL_Y,SYMBOL_Z,TAN,TANH,TAYLOR,TENSOR,TEST,TESTEQ,TESTGE,TESTGT,TESTLE,TESTLT,TIMING_DEBUGS,TOS,TRACE,TRANSPOSE,T_DOUBLE,T_EQ,T_FUNCTION,T_GTEQ,T_INTEGER,T_LTEQ,T_NEQ,T_NEWLINE,T_QUOTASSIGN,T_STRING,T_SYMBOL,U,UNIT,VERSION,YMAX,YYE,YYRECT,ZERO,__emit_char,__emit_str,__factor_add,__factorial,__is_negative,__is_radical_number,__lcm,__legendre,__legendre2,__legendre3,__normalize_radical_factors,__rationalize_tensor,_print,abs,absValFloat,absval,absval_tensor,add,addSymbolLeftOfAssignment,addSymbolRightOfAssignment,add_all,add_factor_to_accumulator,add_numbers,add_terms,adj,alloc_tensor,allocatedId,any_denominators,approxAll,approxLogs,approxLogsOfRationals,approxOneRatioOnly,approxRadicals,approxRadicalsOfRationals,approxRationalsOfLogs,approxRationalsOfPowersOfE,approxRationalsOfPowersOfPI,approxRationalsOfRadicals,approxSineOfRationalMultiplesOfPI,approxSineOfRationals,approxTrigonometric,approx_just_an_integer,approx_logarithmsOfRationals,approx_radicalOfRatio,approx_ratioOfRadical,approx_rationalOfE,approx_rationalOfPi,approx_rationalsOfLogarithms,approx_sine_of_pi_times_rational,approx_sine_of_rational,approxratioRecursive,arccos,arccosh,arcsin,arcsinh,arctan,arctanh,areunivarpolysfactoredorexpandedform,arg,assignmentFound,avoidCalculatingPowersIntoArctans,bake,bake_poly,bake_poly_term,besselj,bessely,bigInt,bignum_factorial,bignum_float,bignum_power_number,bignum_scan_float,bignum_scan_integer,bignum_truncate,binding,binomial,build_tensor,caaddr,caadr,caar,cadaddr,cadadr,cadar,caddaddr,caddadr,caddar,caddddr,cadddr,caddr,cadr,car,cdaddr,cdadr,cdar,cddaddr,cddar,cdddaddr,cddddr,cdddr,cddr,cdr,ceiling,chainOfUserSymbolsNotFunctionsBeingEvaluated,charTabIndex,chartab,check_esc_flag,check_stack,check_tensor_dimensions,choose,choose_check_args,circexp,clearAlgebraEnvironment,clearRenamedVariablesToAvoidBindingToExternalScope,clear_symbols,clear_term,clockform,cmpGlyphs,cmp_args,cmp_expr,cmp_terms,codeGen,coeff,cofactor,collectLatexStringFromReturnValue,collectUserSymbols,combine_factors,combine_terms,compare_numbers,compare_rationals,compare_tensors,compatible,computeDependenciesFromAlgebra,computeResultsAndJavaScriptFromAlgebra,compute_fa,conjugate,cons,consCount,contract,convert_rational_to_double,copy_tensor,cosine,cosine_of_angle,cosine_of_angle_sum,count,countOccurrencesOfSymbol,count_denominators,counter,countsize,d_scalar_scalar,d_scalar_scalar_1,d_scalar_tensor,d_tensor_scalar,d_tensor_tensor,dabs,darccos,darccosh,darcsin,darcsinh,darctan,darctanh,dbesselj0,dbesseljn,dbessely0,dbesselyn,dcos,dcosh,dd,decomp,decomp_product,decomp_sum,defineSomeHandyConstants,define_user_function,defn,defn_str,degree,denominator,derf,derfc,derivative,derivative_of_integral,det,determinant,dfunction,dhermite,dirac,divide,divide_numbers,divisors,divisors_onstack,divpoly,dlog,do_clearPatterns,do_clearall,do_simplify_nested_radicals,dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication,dotprod_unicode,doubleToReasonableString,dpow,dpower,dproduct,dsgn,dsin,dsinh,dsum,dtan,dtanh,dupl,eigen,elelmIndex,elem,emit_denominator,emit_denominators,emit_expr,emit_factor,emit_factorial_function,emit_flat_tensor,emit_fraction,emit_function,emit_index_function,emit_multiply,emit_number,emit_numerators,emit_numerical_fraction,emit_power,emit_string,emit_subexpr,emit_symbol,emit_tensor,emit_tensor_inner,emit_term,emit_top_expr,emit_unsigned_expr,emit_x,equal,equaln,equalq,erfc,errorMessage,esc_flag,evaluatingAsFloats,evaluatingPolar,exec,expand,expand_get_A,expand_get_AF,expand_get_B,expand_get_C,expand_get_CF,expand_tensor,expanding,expcos,exponential,expr_level,expsin,f1,f10,f2,f3,f4,f5,f9,f_equals_a,factor,factor_a,factor_again,factor_b,factor_number,factor_small_number,factor_term,factorial,factorpoly,factors,filter,filter_main,filter_sum,filter_tensor,findDependenciesInScript,findPossibleClockForm,findPossibleExponentialForm,findroot,fixup_fraction,fixup_power,flag,floatToRatioRoutine,frame,functionInvokationsScanningStack,gamma,gamma_of_sum,gammaf,gcd,gcd_main,gcd_numbers,gcd_polys,gcd_powers_with_same_base,gcd_product_product,gcd_product_sum,gcd_sum,gcd_sum_product,gcd_sum_sum,gen,getSimpleRoots,get_binding,get_factor_from_complex_root,get_factor_from_real_root,get_innerprod_factors,get_next_token,get_printname,get_size,get_token,glyph,guess,hasImaginaryCoeff,hasNegativeRationalExponent,hash_addition,hash_function,hash_multiplication,hash_power,hashcode_values,hashed_itab,hermite,hilbert,i1,imag,imaginaryunit,index_function,init,initNRoots,inited,inner,inner_f,input_str,integral,integral_of_form,integral_of_product,integral_of_sum,inv,inverse,invert_number,invg,isNumberOneOverSomething,isNumericAtom,isNumericAtomOrTensor,isSimpleRoot,isSmall,isSymbolLeftOfAssignment,isSymbolReclaimable,isZeroAtom,isZeroAtomOrTensor,isZeroLikeOrNonZeroLikeOrUndetermined,isZeroTensor,is_denominator,is_factor,is_small_integer,is_usr_symbol,isadd,isalnumorunderscore,isalpha,isalphaOrUnderscore,iscomplexnumber,iscomplexnumberdouble,iscons,isdenominator,isdigit,isdouble,iseveninteger,isfactor,isfactorial,isfloating,isfraction,isidentitymatrix,isimaginarynumber,isimaginarynumberdouble,isimaginaryunit,isinnerordot,isinteger,isintegerfactor,isintegerorintegerfloat,isinv,iskeyword,isminusone,isminusoneoversqrttwo,isminusoneovertwo,isminussqrtthreeovertwo,ismultiply,isnegative,isnegativenumber,isnegativeterm,isnonnegativeinteger,isnpi,isone,isoneover,isoneoversqrttwo,isoneovertwo,isplusone,isplustwo,ispolyexpandedform,ispolyexpandedform_expr,ispolyexpandedform_factor,ispolyexpandedform_term,ispolyfactoredorexpandedform,ispolyfactoredorexpandedform_factor,ispolyfactoredorexpandedform_power,isposint,ispositivenumber,ispower,isquarterturn,isrational,isspace,issqrtthree,issqrtthreeovertwo,isstr,issymbol,issymbolic,istensor,istranspose,isunivarpolyfactoredorexpandedform,itab,italu_hashcode,j1,laguerre,laguerre2,lastFoundSymbol,latexErrorSign,lcm,leading,legendre,length,lessp,level,list,logarithm,lookupsTotal,lu_decomp,madd,makePositive,makeSignSameAs,make_hashed_itab,mcmp,mdiv,mdivrem,meta_mode,mgcd,mini_solve,mint,mmod,mmul,mod,monic,move,moveTos,mp_denominator,mp_numerator,mpow,mprime,mroot,msub,multinomial_sum,multiply,multiply_all,multiply_all_noexpand,multiply_consecutive_constants,multiply_denominators,multiply_denominators_factor,multiply_denominators_term,multiply_noexpand,multiply_numbers,n_factor_number,negate,negate_noexpand,negate_number,new_integer,new_string,newline_flag,nil_symbols,normaliseDots,normalisedCoeff,normalize_angle,nroots_a,nroots_b,nroots_c,nroots_df,nroots_dx,nroots_fa,nroots_fb,nroots_x,nroots_y,nterms,numerator,numericRootOfPolynomial,o,one,oneElement,one_as_double,outer,p0,p1,p2,p3,p4,p5,p6,p7,p8,p9,parse,parse_internal,parse_p1,parse_p2,parse_time_simplifications,partition,patternHasBeenFound,patternsinfo,polar,polarRectAMinusOneBase,polyform,pop,pop_double,pop_frame,pop_integer,power,power_str,power_sum,power_tensor,predefinedSymbolsInGlobalScope_doNotTrackInDependencies,prime,primetab,print2dascii,printMode,print_ABS_latex,print_ARCCOS_codegen,print_ARCSIN_codegen,print_ARCTAN_codegen,print_BINOMIAL_latex,print_COS_codegen,print_DEFINT_latex,print_DOT_codegen,print_DOT_latex,print_DO_codegen,print_FOR_codegen,print_INV_codegen,print_INV_latex,print_PRODUCT_codegen,print_PRODUCT_latex,print_SETQ_codegen,print_SIN_codegen,print_SQRT_latex,print_SUM_codegen,print_SUM_latex,print_TAN_codegen,print_TESTEQ_latex,print_TESTGE_latex,print_TESTGT_latex,print_TESTLE_latex,print_TESTLT_latex,print_TEST_codegen,print_TEST_latex,print_TRANSPOSE_codegen,print_TRANSPOSE_latex,print_UNIT_codegen,print_a_over_b,print_base_of_denom,print_char,print_denom,print_expo_of_denom,print_expr,print_factor,print_factorial_function,print_glyphs,print_index_function,print_list,print_multiply_sign,print_number,print_power,print_str,print_subexpr,print_tensor,print_tensor_inner,print_tensor_inner_latex,print_tensor_latex,print_term,printchar,printchar_nowrap,printline,promote_tensor,push,pushTryNotToDuplicate,push_double,push_factor,push_frame,push_integer,push_rational,push_symbol,push_term_factors,push_terms,push_zero_matrix,qadd,qdiv,qmul,qpow,qpowf,quickfactor,quickpower,rational,rationalize,rationalize_coefficients,real,reciprocate,rect,recursionLevelNestedRadicalsRemoval,recursiveDependencies,ref,ref1,rememberPrint,remove_negative_exponents,reset_after_error,restore,restoreMetaBindings,rewrite_args,rewrite_args_tensor,roots,roots2,roots3,run,runUserDefinedSimplifications,save,saveMetaBindings,scalar_times_tensor,scan,scan_error,scan_expression,scan_factor,scan_function_call_with_function_name,scan_function_call_without_function_name,scan_index,scan_meta,scan_power,scan_relation,scan_stmt,scan_str,scan_string,scan_subexpr,scan_symbol,scan_tensor,scan_term,scanned,scanningParameters,setM,setSignTo,set_binding,set_component,setq_indexed,sgn,shape,sign,sign_of_term,simfac,simfac_term,simpleComplexityMeasure,simplify,simplifyForCodeGeneration,simplify_1_in_products,simplify_main,simplify_nested_radicals,simplify_polar,simplify_polarRect,simplify_rational_expressions,simplify_rectToClock,simplify_tensor,simplify_trig,sine,sine_of_angle,sine_of_angle_sum,skipRootVariableToBeSolved,sort_stack,square,stack,stackAddsCount,std_symbol,step,step2,stop,strcmp,stringsEmittedByUserPrintouts,subst,subtract,swap,symbol,symbolsDependencies,symbolsHavingReassignments,symbolsInExpressionsWithoutAssignments,symbolsLeftOfAssignment,symbolsRightOfAssignment,symbolsinfo,symnum,symtab,take_care_of_nested_radicals,tangent,taylor,tensor,tensor_plus_tensor,tensor_times_scalar,testApprox,test_flag,token,token_buf,token_str,top,top_level_eval,tos,transform,transpose,transpose_unicode,trigmode,trivial_divide,try_kth_prime,turnErrorMessageToLatex,update_token_buf,userSimplificationsInListForm,userSimplificationsInStringForm,usr_symbol,version,will_be_displayed_as_fraction,ybinomial,ycosh,ydirac,yerf,yerfc,yfloor,yindex,yround,ysinh,yyarg,yybesselj,yybessely,yyceiling,yycondense,yycontract,yycosh,yydegree,yydetg,yydivpoly,yyerf,yyerfc,yyexpand,yyfactorpoly,yyfloat,yyfloor,yyhermite,yyhermite2,yyinvg,yylcm,yylog,yymultiply,yyouter,yypower,yyrationalize,yyround,yysgn,yysimfac,yysinh,yytangent,zero,zzfloat,hasProp={}.hasOwnProperty;for(bigInt=requireBigInteger(),version="1.4.0",NSYM=1e3,DEBUG=!1,PRINTOUTRESULT=!1,PRINTMODE_LATEX="PRINTMODE_LATEX",PRINTMODE_2DASCII="PRINTMODE_2DASCII",PRINTMODE_COMPUTER="PRINTMODE_COMPUTER",PRINTMODE_HUMAN="PRINTMODE_HUMAN",PRINTMODE_LIST="PRINTMODE_LIST",printMode=PRINTMODE_COMPUTER,dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication=!0,recursionLevelNestedRadicalsRemoval=0,do_simplify_nested_radicals=!0,avoidCalculatingPowersIntoArctans=!0,rational=(function(){class t{}return t.prototype.a=null,t.prototype.b=null,t}).call(this),U=(function(){class t{toString(){return print_expr(this)}toLatexString(){return collectLatexStringFromReturnValue(this)}constructor(){this.cons={},this.cons.car=null,this.cons.cdr=null,this.q=new rational}}return t.prototype.cons=null,t.prototype.printname="",t.prototype.str="",t.prototype.tensor=null,t.prototype.q=null,t.prototype.d=0,t.prototype.k=0,t.prototype.tag=0,t}).call(this),errorMessage="",CONS=0,NUM=1,DOUBLE=2,STR=3,TENSOR=4,SYM=5,counter=0,ABS=counter++,ADD=counter++,ADJ=counter++,AND=counter++,APPROXRATIO=counter++,ARCCOS=counter++,ARCCOSH=counter++,ARCSIN=counter++,ARCSINH=counter++,ARCTAN=counter++,ARCTANH=counter++,ARG=counter++,ATOMIZE=counter++,BESSELJ=counter++,BESSELY=counter++,BINDING=counter++,BINOMIAL=counter++,CEILING=counter++,CHECK=counter++,CHOOSE=counter++,CIRCEXP=counter++,CLEAR=counter++,CLEARALL=counter++,CLEARPATTERNS=counter++,CLOCK=counter++,COEFF=counter++,COFACTOR=counter++,CONDENSE=counter++,CONJ=counter++,CONTRACT=counter++,COS=counter++,COSH=counter++,DECOMP=counter++,DEFINT=counter++,DEGREE=counter++,DENOMINATOR=counter++,DERIVATIVE=counter++,DET=counter++,DIM=counter++,DIRAC=counter++,DIVISORS=counter++,DO=counter++,DOT=counter++,DRAW=counter++,DSOLVE=counter++,EIGEN=counter++,EIGENVAL=counter++,EIGENVEC=counter++,ERF=counter++,ERFC=counter++,EVAL=counter++,EXP=counter++,EXPAND=counter++,EXPCOS=counter++,EXPSIN=counter++,FACTOR=counter++,FACTORIAL=counter++,FACTORPOLY=counter++,FILTER=counter++,FLOATF=counter++,FLOOR=counter++,FOR=counter++,FUNCTION=counter++,GAMMA=counter++,GCD=counter++,HERMITE=counter++,HILBERT=counter++,IMAG=counter++,INDEX=counter++,INNER=counter++,INTEGRAL=counter++,INV=counter++,INVG=counter++,ISINTEGER=counter++,ISPRIME=counter++,LAGUERRE=counter++,LCM=counter++,LEADING=counter++,LEGENDRE=counter++,LOG=counter++,LOOKUP=counter++,MOD=counter++,MULTIPLY=counter++,NOT=counter++,NROOTS=counter++,NUMBER=counter++,NUMERATOR=counter++,OPERATOR=counter++,OR=counter++,OUTER=counter++,PATTERN=counter++,PATTERNSINFO=counter++,POLAR=counter++,POWER=counter++,PRIME=counter++,PRINT_LEAVE_E_ALONE=counter++,PRINT_LEAVE_X_ALONE=counter++,PRINT=counter++,PRINT2DASCII=counter++,PRINTFULL=counter++,PRINTLATEX=counter++,PRINTLIST=counter++,PRINTPLAIN=counter++,PRODUCT=counter++,QUOTE=counter++,QUOTIENT=counter++,RANK=counter++,RATIONALIZE=counter++,REAL=counter++,ROUND=counter++,YYRECT=counter++,ROOTS=counter++,SETQ=counter++,SGN=counter++,SILENTPATTERN=counter++,SIMPLIFY=counter++,SIN=counter++,SINH=counter++,SHAPE=counter++,SQRT=counter++,STOP=counter++,SUBST=counter++,SUM=counter++,SYMBOLSINFO=counter++,TAN=counter++,TANH=counter++,TAYLOR=counter++,TEST=counter++,TESTEQ=counter++,TESTGE=counter++,TESTGT=counter++,TESTLE=counter++,TESTLT=counter++,TRANSPOSE=counter++,UNIT=counter++,ZERO=counter++,NIL=counter++,LAST=counter++,LAST_PRINT=counter++,LAST_2DASCII_PRINT=counter++,LAST_FULL_PRINT=counter++,LAST_LATEX_PRINT=counter++,LAST_LIST_PRINT=counter++,LAST_PLAIN_PRINT=counter++,AUTOEXPAND=counter++,BAKE=counter++,ASSUME_REAL_VARIABLES=counter++,TRACE=counter++,FORCE_FIXED_PRINTOUT=counter++,MAX_FIXED_PRINTOUT_DIGITS=counter++,YYE=counter++,DRAWX=counter++,METAA=counter++,METAB=counter++,METAX=counter++,SECRETX=counter++,VERSION=counter++,PI=counter++,SYMBOL_A=counter++,SYMBOL_B=counter++,SYMBOL_C=counter++,SYMBOL_D=counter++,SYMBOL_I=counter++,SYMBOL_J=counter++,SYMBOL_N=counter++,SYMBOL_R=counter++,SYMBOL_S=counter++,SYMBOL_T=counter++,SYMBOL_X=counter++,SYMBOL_Y=counter++,SYMBOL_Z=counter++,SYMBOL_IDENTITY_MATRIX=counter++,SYMBOL_A_UNDERSCORE=counter++,SYMBOL_B_UNDERSCORE=counter++,SYMBOL_X_UNDERSCORE=counter++,C1=counter++,C2=counter++,C3=counter++,C4=counter++,C5=counter++,C6=counter++,counter++,E=YYE,TOS=1e5,MAXPRIMETAB=1e4,MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES=5,MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE=10,MAXDIM=24,symbolsDependencies={},symbolsHavingReassignments=[],symbolsInExpressionsWithoutAssignments=[],patternHasBeenFound=!1,predefinedSymbolsInGlobalScope_doNotTrackInDependencies=["rationalize","abs","e","i","pi","sin","ceiling","cos","roots","integral","derivative","defint","sqrt","eig","cov","deig","dcov","float","floor","product","root","round","sum","test","unit"],parse_time_simplifications=!0,chainOfUserSymbolsNotFunctionsBeingEvaluated=[],stringsEmittedByUserPrintouts="",tensor=(function(){class t{constructor(){this.dim=function(){var a,s,l;for(l=[],a=0,s=MAXDIM;0<=s?a<=s:a>=s;0<=s?a++:a--)l.push(0);return l}(),this.elem=[]}}return t.prototype.ndim=0,t.prototype.dim=null,t.prototype.nelem=0,t.prototype.elem=null,t}).call(this),(function(){class t{}return t.prototype.h=0,t.prototype.w=0,t.prototype.n=0,t.prototype.a=[],t}).call(this),(function(){class t{}return t.prototype.ascent=0,t.prototype.descent=0,t.prototype.width=0,t}).call(this),tos=0,expanding=0,evaluatingAsFloats=0,evaluatingPolar=0,primetab=function(){var t,n,a,s;for(s=[2],n=3;s.length<MAXPRIMETAB;){for(a=0,t=Math.sqrt(n);a<s.length&&s[a]<=t;){if(n%s[a]===0){a=-1;break}a++}a!==-1&&s.push(n),n+=2}return s[MAXPRIMETAB]=0,s}(),esc_flag=0,trigmode=0,symtab=[],binding=[],isSymbolReclaimable=[],stack=[],frame=0,p0=null,p1=null,p2=null,p3=null,p4=null,p5=null,p6=null,p7=null,p8=null,p9=null,zero=null,one=null,one_as_double=null,imaginaryunit=null,test_flag=0,codeGen=!1,userSimplificationsInListForm=[],userSimplificationsInStringForm=[],transpose_unicode=7488,dotprod_unicode=183,symbol=function(t){return symtab[t]},iscons=function(t){return t.k===CONS},isrational=function(t){return t.k===NUM},isdouble=function(t){return t.k===DOUBLE},isNumericAtom=function(t){return isrational(t)||isdouble(t)},isstr=function(t){return t.k===STR},istensor=function(t){if(t==null)debugger;else return t.k===TENSOR},isNumericAtomOrTensor=function(t){var n,a,s,l,u;if(isNumericAtom(t)||t===symbol(SYMBOL_IDENTITY_MATRIX))return 1;if(!istensor(t)&&!isNumericAtom(t))return 0;for(s=t.tensor.nelem,n=t.tensor.elem,a=l=0,u=s;0<=u?l<u:l>u;a=0<=u?++l:--l)if(!isNumericAtomOrTensor(n[a]))return 0;return 1},issymbol=function(t){return t.k===SYM},iskeyword=function(t){return issymbol(t)&&symnum(t)<NIL},car=function(t){return iscons(t)?t.cons.car:symbol(NIL)},cdr=function(t){return iscons(t)?t.cons.cdr:symbol(NIL)},caar=function(t){return car(car(t))},cadr=function(t){return car(cdr(t))},cdar=function(t){return cdr(car(t))},cddr=function(t){return cdr(cdr(t))},caadr=function(t){return car(car(cdr(t)))},caddr=function(t){return car(cdr(cdr(t)))},cadar=function(t){return car(cdr(car(t)))},cdadr=function(t){return cdr(car(cdr(t)))},cddar=function(t){return cdr(cdr(car(t)))},cdddr=function(t){return cdr(cdr(cdr(t)))},caaddr=function(t){return car(car(cdr(cdr(t))))},cadadr=function(t){return car(cdr(car(cdr(t))))},caddar=function(t){return car(cdr(cdr(car(t))))},cdaddr=function(t){return cdr(car(cdr(cdr(t))))},cadddr=function(t){return car(cdr(cdr(cdr(t))))},cddddr=function(t){return cdr(cdr(cdr(cdr(t))))},caddddr=function(t){return car(cdr(cdr(cdr(cdr(t)))))},cadaddr=function(t){return car(cdr(car(cdr(cdr(t)))))},cddaddr=function(t){return cdr(cdr(car(cdr(cdr(t)))))},caddadr=function(t){return car(cdr(cdr(car(cdr(t)))))},cdddaddr=function(t){return cdr(cdr(cdr(car(cdr(cdr(t))))))},caddaddr=function(t){return car(cdr(cdr(car(cdr(cdr(t))))))},isadd=function(t){return car(t)===symbol(ADD)},ismultiply=function(t){return car(t)===symbol(MULTIPLY)},ispower=function(t){return car(t)===symbol(POWER)},isfactorial=function(t){return car(t)===symbol(FACTORIAL)},isinnerordot=function(t){return car(t)===symbol(INNER)||car(t)===symbol(DOT)},istranspose=function(t){return car(t)===symbol(TRANSPOSE)},isinv=function(t){return car(t)===symbol(INV)},isidentitymatrix=function(t){return t===symbol(SYMBOL_IDENTITY_MATRIX)},MSIGN=function(t){return t.isPositive()?1:t.isZero()?0:-1},MZERO=function(t){return t.isZero()},MEQUAL=function(t,n){if(t==null)debugger;return t.equals(n)},reset_after_error=function(){return moveTos(0),esc_flag=0,frame=TOS,evaluatingAsFloats=0,evaluatingPolar=0},$=exports!==null?exports:this,$.version=version,$.isadd=isadd,$.ismultiply=ismultiply,$.ispower=ispower,$.isfactorial=isfactorial,$.car=car,$.cdr=cdr,$.caar=caar,$.cadr=cadr,$.cdar=cdar,$.cddr=cddr,$.caadr=caadr,$.caddr=caddr,$.cadar=cadar,$.cdadr=cdadr,$.cddar=cddar,$.cdddr=cdddr,$.caaddr=caaddr,$.cadadr=cadadr,$.caddar=caddar,$.cdaddr=cdaddr,$.cadddr=cadddr,$.cddddr=cddddr,$.caddddr=caddddr,$.cadaddr=cadaddr,$.cddaddr=cddaddr,$.caddadr=caddadr,$.cdddaddr=cdddaddr,$.caddaddr=caddaddr,$.symbol=symbol,$.iscons=iscons,$.isrational=isrational,$.isdouble=isdouble,$.isNumericAtom=isNumericAtom,$.isstr=isstr,$.istensor=istensor,$.issymbol=issymbol,$.iskeyword=iskeyword,$.CONS=CONS,$.NUM=NUM,$.DOUBLE=DOUBLE,$.STR=STR,$.TENSOR=TENSOR,$.SYM=SYM,DEBUG_ABS=!1,Eval_abs=function(){return push(cadr(p1)),Eval(),abs()},absValFloat=function(){return Eval(),absval(),Eval(),zzfloat()},abs=function(){var t;if(t=top(),DEBUG_ABS&&console.trace(">>>>  ABS of "+t),numerator(),DEBUG_ABS&&console.log("ABS numerator "+stack[tos-1]),absval(),DEBUG_ABS&&console.log("ABSVAL numerator: "+stack[tos-1]),push(t),denominator(),DEBUG_ABS&&console.log("ABS denominator: "+stack[tos-1]),absval(),DEBUG_ABS&&console.log("ABSVAL denominator: "+stack[tos-1]),divide(),DEBUG_ABS&&console.log("ABSVAL divided: "+stack[tos-1]),DEBUG_ABS)return console.log("<<<<<<<  ABS")},absval=function(){var t,n;if(save(),p1=pop(),n=p1,DEBUG_ABS&&console.log("ABS of "+p1),isZeroAtomOrTensor(p1)){DEBUG_ABS&&console.log(" abs: "+p1+" just zero"),push(zero),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(isnegativenumber(p1)){DEBUG_ABS&&console.log(" abs: "+p1+" just a negative"),push(p1),negate(),restore();return}if(ispositivenumber(p1)){DEBUG_ABS&&console.log(" abs: "+p1+" just a positive"),push(p1),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(p1===symbol(PI)){DEBUG_ABS&&console.log(" abs: "+p1+" of PI"),push(p1),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(ADD)&&(findPossibleClockForm(p1)||findPossibleExponentialForm(p1)||Find(p1,imaginaryunit))){DEBUG_ABS&&console.log(" abs: "+p1+" is a sum"),DEBUG_ABS&&console.log("abs of a sum"),push(p1),rect(),p1=pop(),push(p1),real(),push_integer(2),power(),push(p1),imag(),push_integer(2),power(),add(),push_rational(1,2),power(),simplify_trig(),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(POWER)&&equaln(cadr(p1),-1)){DEBUG_ABS&&console.log(" abs: "+p1+" is -1 to any power"),evaluatingAsFloats?(DEBUG_ABS&&console.log(" abs: numeric, so result is 1.0"),push_double(1)):(DEBUG_ABS&&console.log(" abs: symbolic, so result is 1"),push_integer(1)),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(POWER)&&ispositivenumber(caddr(p1))){DEBUG_ABS&&console.log(" abs: "+p1+" is something to the power of a positive number"),push(cadr(p1)),abs(),push(caddr(p1)),power(),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(POWER)&&cadr(p1)===symbol(E)){DEBUG_ABS&&console.log(" abs: "+p1+" is an exponential"),push(caddr(p1)),real(),exponential(),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(MULTIPLY)){for(DEBUG_ABS&&console.log(" abs: "+p1+" is a product"),t=!1,p1=cdr(p1);iscons(p1);)push(car(p1)),absval(),t&&multiply(),t=!0,p1=cdr(p1);DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(car(p1)===symbol(ABS)){DEBUG_ABS&&console.log(" abs: "+p1+" is abs of a abs"),push_symbol(ABS),push(cadr(p1)),list(2),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore();return}if(istensor(p1)){absval_tensor(),restore();return}return(isnegativeterm(p1)||car(p1)===symbol(ADD)&&isnegativeterm(cadr(p1)))&&(push(p1),negate(),p1=pop()),DEBUG_ABS&&console.log(" abs: "+p1+" is nothing decomposable"),push_symbol(ABS),push(p1),list(2),DEBUG_ABS&&console.log(" --> ABS of "+n+" : "+stack[tos-1]),restore()},absval_tensor=function(){return p1.tensor.ndim!==1&&stop("abs(tensor) with tensor rank > 1"),push(p1),push(p1),conjugate(),inner(),push_rational(1,2),power(),simplify(),Eval()},flag=0,Eval_add=function(){var t;for(t=tos,p1=cdr(p1);iscons(p1);)push(car(p1)),Eval(),p2=pop(),push_terms(p2),p1=cdr(p1);return add_terms(tos-t)},stackAddsCount=0,add_terms=function(t){var n,a,s,l,u,c,p,d,x;if(stackAddsCount++,a=0,n=tos-t,DEBUG&&console.log("stack before adding terms #"+stackAddsCount),DEBUG)for(a=u=0,c=tos;0<=c?u<c:u>c;a=0<=c?++u:--u)console.log(print_list(stack[a]));for(a=s=0;s<10&&!(t<2||(flag=0,x=stack.slice(n,n+t),x.sort(cmp_terms),stack=stack.slice(0,n).concat(x).concat(stack.slice(n+t)),flag===0));a=++s)t=combine_terms(n,t);switch(moveTos(n+t),t){case 0:evaluatingAsFloats?push_double(0):push(zero);break;case 1:break;default:list(t),p1=pop(),push_symbol(ADD),push(p1),cons()}if(DEBUG&&console.log("stack after adding terms #"+stackAddsCount),DEBUG){for(d=[],a=l=0,p=tos;0<=p?l<p:l>p;a=0<=p?++l:--l)d.push(console.log(print_list(stack[a])));return d}},cmp_terms=function(t,n){var a,s,l,u;if(a=0,isNumericAtom(t)&&isNumericAtom(n))return flag=1,0;if(istensor(t)&&istensor(n)){if(t.tensor.ndim<n.tensor.ndim)return-1;if(t.tensor.ndim>n.tensor.ndim)return 1;for(a=s=0,l=t.tensor.ndim;0<=l?s<l:s>l;a=0<=l?++s:--s){if(t.tensor.dim[a]<n.tensor.dim[a])return-1;if(t.tensor.dim[a]>n.tensor.dim[a])return 1}return flag=1,0}return car(t)===symbol(MULTIPLY)&&(t=cdr(t),isNumericAtom(car(t))&&(t=cdr(t),cdr(t)===symbol(NIL)&&(t=car(t)))),car(n)===symbol(MULTIPLY)&&(n=cdr(n),isNumericAtom(car(n))&&(n=cdr(n),cdr(n)===symbol(NIL)&&(n=car(n)))),u=cmp_expr(t,n),u===0&&(flag=1),u},combine_terms=function(t,n){var a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j;for(a=0;a<n-1;){if(check_esc_flag(),p3=stack[t+a],p4=stack[t+a+1],istensor(p3)&&istensor(p4)){if(push(p3),push(p4),tensor_plus_tensor(),p1=pop(),p1!==symbol(NIL)){for(stack[t+a]=p1,l=d=x=a+1,_=n-1;x<=_?d<_:d>_;l=x<=_?++d:--d)stack[t+l]=stack[t+l+1];n--,a--}a++;continue}if(istensor(p3)||istensor(p4)){a++;continue}if(isNumericAtom(p3)&&isNumericAtom(p4)){if(push(p3),push(p4),add_numbers(),p1=pop(),isZeroAtomOrTensor(p1)){for(l=s=S=a,T=n-2;S<=T?s<T:s>T;l=S<=T?++s:--s)stack[t+l]=stack[t+l+2];n-=2}else{for(stack[t+a]=p1,l=u=A=a+1,R=n-1;A<=R?u<R:u>R;l=A<=R?++u:--u)stack[t+l]=stack[t+l+1];n--}a--,a++;continue}if(isNumericAtom(p3)||isNumericAtom(p4)){a++;continue}if(evaluatingAsFloats?(p1=one_as_double,p2=one_as_double):(p1=one,p2=one),j=0,car(p3)===symbol(MULTIPLY)&&(p3=cdr(p3),j=1,isNumericAtom(car(p3))&&(p1=car(p3),p3=cdr(p3),cdr(p3)===symbol(NIL)&&(p3=car(p3),j=0))),car(p4)===symbol(MULTIPLY)&&(p4=cdr(p4),isNumericAtom(car(p4))&&(p2=car(p4),p4=cdr(p4),cdr(p4)===symbol(NIL)&&(p4=car(p4)))),!equal(p3,p4)){a++;continue}if(push(p1),push(p2),add_numbers(),p1=pop(),isZeroAtomOrTensor(p1)){for(l=c=D=a,O=n-2;D<=O?c<O:c>O;l=D<=O?++c:--c)stack[t+l]=stack[t+l+2];n-=2,a--,a++;continue}for(push(p1),j?(push(symbol(MULTIPLY)),push(p3),cons()):push(p3),multiply(),stack[t+a]=pop(),l=p=F=a+1,z=n-1;F<=z?p<z:p>z;l=F<=z?++p:--p)stack[t+l]=stack[t+l+1];n--,a--,a++}return n},push_terms=function(t){var n;if(car(t)===symbol(ADD)){for(t=cdr(t),n=[];iscons(t);)push(car(t)),n.push(t=cdr(t));return n}else if(!isZeroAtom(t))return push(t)},add=function(){var t;return save(),p2=pop(),p1=pop(),t=tos,push_terms(p1),push_terms(p2),add_terms(tos-t),restore()},add_all=function(t){var n,a,s,l,u;for(a=0,save(),u=tos-t,n=tos,a=s=0,l=t;0<=l?s<l:s>l;a=0<=l?++s:--s)push_terms(stack[u+a]);return add_terms(tos-n),p1=pop(),moveTos(tos-t),push(p1),restore()},subtract=function(){return negate(),add()},Eval_adj=function(){return push(cadr(p1)),Eval(),adj()},adj=function(){var t,n,a,s,l,u,c;for(t=0,a=0,s=0,save(),p1=pop(),istensor(p1)&&p1.tensor.ndim===2&&p1.tensor.dim[0]===p1.tensor.dim[1]||stop("adj: square matrix expected"),s=p1.tensor.dim[0],p2=alloc_tensor(s*s),p2.tensor.ndim=2,p2.tensor.dim[0]=s,p2.tensor.dim[1]=s,t=l=0,u=s;0<=u?l<u:l>u;t=0<=u?++l:--l)for(a=n=0,c=s;0<=c?n<c:n>c;a=0<=c?++n:--n)cofactor(p1,s,t,a),p2.tensor.elem[s*a+t]=pop();return push(p2),restore()},Eval_approxratio=function(){var t;return t=cadr(p1),push(t),approxratioRecursive()},approxratioRecursive=function(){var t,n,a,s,l;if(t=0,save(),p1=pop(),istensor(p1)){for(p4=alloc_tensor(p1.tensor.nelem),p4.tensor.ndim=p1.tensor.ndim,t=a=0,s=p1.tensor.ndim;0<=s?a<s:a>s;t=0<=s?++a:--a)p4.tensor.dim[t]=p1.tensor.dim[t];for(t=n=0,l=p1.tensor.nelem;0<=l?n<l:n>l;t=0<=l?++n:--n)push(p1.tensor.elem[t]),approxratioRecursive(),p4.tensor.elem[t]=pop(),check_tensor_dimensions(p4);push(p4)}else p1.k===DOUBLE?(push(p1),approxOneRatioOnly()):iscons(p1)?(push(car(p1)),approxratioRecursive(),push(cdr(p1)),approxratioRecursive(),cons()):push(p1);return restore()},approxOneRatioOnly=function(){var t,n,a,s,l,u;if(zzfloat(),s=pop(),s.k===DOUBLE){l=s.d,a=l.toString().split("."),a.length===2?(t=a[1].length,n=1/Math.pow(10,t),u=floatToRatioRoutine(l,n),push_rational(u[0],u[1])):push_integer(l);return}return push_symbol(APPROXRATIO),push(theArgument),list(2)},floatToRatioRoutine=function(t,n){var a,s,l,u,c,p,d;if(l=void 0,s=void 0,a=void 0,p=void 0,u=void 0,c=void 0,d=[0,0],isNaN(t))return d;if(t===1/0)return d[0]=1,d[1]=0,d;if(t===-1/0)return d[0]=-1,d[1]=0,d;if(t<0?a=-1:a=1,t=Math.abs(t),Math.abs(t-Math.floor(t))<n)return l=t*a,s=1,d[0]=l,d[1]=s,d;if(t<1e-19)return l=a,s=1e19,d[0]=l,d[1]=s,d;if(t>1e19)return l=1e19*a,s=1,d[0]=l,d[1]=s,d;for(p=t,u=0,s=1;p=1/(p-Math.floor(p)),c=s,s=s*Math.floor(p)+u,u=c,l=Math.floor(t*s+.5),Math.abs(t-l/s)>n&&p!==Math.floor(p););return l=a*l,d[0]=l,d[1]=s,d},approx_just_an_integer=0,approx_sine_of_rational=1,approx_sine_of_pi_times_rational=2,approx_rationalOfPi=3,approx_radicalOfRatio=4,approx_ratioOfRadical=6,approx_rationalOfE=7,approx_logarithmsOfRationals=8,approx_rationalsOfLogarithms=9,approxRationalsOfRadicals=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F;if(F=t.toString().split("."),F.length===2)S=F[1].length,A=1/Math.pow(10,S);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+A),n=null,_=Number.MAX_VALUE,D=[2,3,5,6,7,8,10],T=0,d=D.length;T<d;T++)for(u=D[T],p=c=1;c<=10;p=++c)l=Math.sqrt(u)/p,Math.abs(l)>1e-10?(R=t/l,x=Math.round(R),s=Math.abs(1-R/x)):(R=1,x=1,s=Math.abs(t-l)),s<2*A&&(a=simpleComplexityMeasure(x,u,p),a<_&&(_=a,O=x+" * sqrt( "+u+" ) / "+p,n=[O,approx_ratioOfRadical,x,u,p]));return n},approxRadicalsOfRationals=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j;if(j=t.toString().split("."),j.length===2)T=j[1].length,R=1/Math.pow(10,T);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+R),n=null,S=Number.MAX_VALUE,O=[1,2,3,5,6,7,8,10],A=0,d=O.length;A<d;A++)for(u=O[A],F=[1,2,3,5,6,7,8,10],c=0,x=F.length;c<x;c++)p=F[c],l=Math.sqrt(u/p),Math.abs(l)>1e-10?(D=t/l,_=Math.round(D),s=Math.abs(1-D/_)):(D=1,_=1,s=Math.abs(t-l)),s<2*R&&(a=simpleComplexityMeasure(_,u,p),a<S&&(S=a,z=_+" * (sqrt( "+u+" / "+p+" )",n=[z,approx_radicalOfRatio,_,u,p]));return n},approxRadicals=function(t){var n,a,s,l,u;if(u=t.toString().split("."),u.length===2)s=u[1].length,l=1/Math.pow(10,s);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+l),a=approxRationalsOfRadicals(t),a??(n=approxRadicalsOfRationals(t),n??null)},approxLogs=function(t){var n,a,s,l,u;if(u=t.toString().split("."),u.length===2)s=u[1].length,l=1/Math.pow(10,s);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+l),a=approxRationalsOfLogs(t),a??(n=approxLogsOfRationals(t),n??null)},approxRationalsOfLogs=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D;if(D=t.toString().split("."),D.length===2)_=D[1].length,T=1/Math.pow(10,_);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+T),n=null,x=Number.MAX_VALUE,u=S=2;S<=5;u=++S)for(p=c=1;c<=5;p=++c)l=Math.log(u)/p,Math.abs(l)>1e-10?(A=t/l,d=Math.round(A),s=Math.abs(1-A/d)):(A=1,d=1,s=Math.abs(t-l)),!(d!==1&&Math.abs(Math.floor(d/p))===Math.abs(d/p))&&s<2.2*T&&(a=simpleComplexityMeasure(d,u,p),a<x&&(x=a,R=d+" * log( "+u+" ) / "+p,n=[R,approx_rationalsOfLogarithms,d,u,p]));return n},approxLogsOfRationals=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D;if(D=t.toString().split("."),D.length===2)_=D[1].length,T=1/Math.pow(10,_);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+T),n=null,x=Number.MAX_VALUE,u=S=1;S<=5;u=++S)for(p=c=1;c<=5;p=++c)l=Math.log(u/p),Math.abs(l)>1e-10?(A=t/l,d=Math.round(A),s=Math.abs(1-A/d)):(A=1,d=1,s=Math.abs(t-l)),s<1.96*T&&(a=simpleComplexityMeasure(d,u,p),a<x&&(x=a,R=d+" * log( "+u+" / "+p+" )",n=[R,approx_logarithmsOfRationals,d,u,p]));return n},approxRationalsOfPowersOfE=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D;if(D=t.toString().split("."),D.length===2)_=D[1].length,T=1/Math.pow(10,_);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+T),n=null,x=Number.MAX_VALUE,u=S=1;S<=2;u=++S)for(p=c=1;c<=12;p=++c)l=Math.pow(Math.E,u)/p,Math.abs(l)>1e-10?(A=t/l,d=Math.round(A),s=Math.abs(1-A/d)):(A=1,d=1,s=Math.abs(t-l)),s<2*T&&(a=simpleComplexityMeasure(d,u,p),a<x&&(x=a,R=d+" * (e ^ "+u+" ) / "+p,n=[R,approx_rationalOfE,d,u,p]));return n},approxRationalsOfPowersOfPI=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D;if(D=t.toString().split("."),D.length===2)_=D[1].length,T=1/Math.pow(10,_);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+T),n=null,x=Number.MAX_VALUE,u=S=1;S<=5;u=++S)for(p=c=1;c<=12;p=++c)l=Math.pow(Math.PI,u)/p,Math.abs(l)>1e-10?(A=t/l,d=Math.round(A),s=Math.abs(1-A/d)):(A=1,d=1,s=Math.abs(t-l)),s<2*T&&(a=simpleComplexityMeasure(d,u,p),a<x&&(x=a,R=d+" * (pi ^ "+u+" ) / "+p+" )",n=[R,approx_rationalOfPi,d,u,p]));return n},approxTrigonometric=function(t){var n,a,s,l,u;if(u=t.toString().split("."),u.length===2)s=u[1].length,l=1/Math.pow(10,s);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+l),a=approxSineOfRationals(t),a??(n=approxSineOfRationalMultiplesOfPI(t),n??null)},approxSineOfRationals=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O;if(O=t.toString().split("."),O.length===2)S=O[1].length,A=1/Math.pow(10,S);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+A),n=null,_=Number.MAX_VALUE,c=T=1;T<=4;c=++T)for(d=p=1;p<=4;d=++p)l=c/d,u=Math.sin(l),Math.abs(u)>1e-10?(R=t/u,x=Math.round(R),s=Math.abs(1-R/x)):(R=1,x=1,s=Math.abs(t-u)),s<2*A&&(a=simpleComplexityMeasure(x,c,d),a<_&&(_=a,D=x+" * sin( "+c+"/"+d+" )",n=[D,approx_sine_of_rational,x,c,d]));return n},approxSineOfRationalMultiplesOfPI=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O;if(O=t.toString().split("."),O.length===2)S=O[1].length,A=1/Math.pow(10,S);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(console.log("precision: "+A),n=null,_=Number.MAX_VALUE,c=T=1;T<=13;c=++T)for(d=p=1;p<=13;d=++p)l=c/d,u=Math.sin(Math.PI*l),Math.abs(u)>1e-10?(R=t/u,x=Math.round(R),s=Math.abs(1-R/x)):(R=1,x=1,s=Math.abs(t-u)),s<23*A&&(a=simpleComplexityMeasure(x,c,d),a<_&&(_=a,D=x+" * sin( "+c+"/"+d+" * pi )",n=[D,approx_sine_of_pi_times_rational,x,c,d]));return n},approxAll=function(t){var n,a,s,l,u,c,p,d,x,_,S,T;if(T=t.toString().split("."),T.length===2)_=T[1].length,S=1/Math.pow(10,_);else return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];return console.log("precision: "+S),x=Number.MAX_VALUE,d=0,p=null,n=!0,s=approxRadicals(t),s!=null&&(d=simpleComplexityMeasure(s),d<x?(n&&console.log("better explanation by approxRadicals: "+s+" complexity: "+d),x=d,p=s):n&&console.log("subpar explanation by approxRadicals: "+s+" complexity: "+d)),a=approxLogs(t),a!=null&&(d=simpleComplexityMeasure(a),d<x?(n&&console.log("better explanation by approxLogs: "+a+" complexity: "+d),x=d,p=a):n&&console.log("subpar explanation by approxLogs: "+a+" complexity: "+d)),l=approxRationalsOfPowersOfE(t),l!=null&&(d=simpleComplexityMeasure(l),d<x?(n&&console.log("better explanation by approxRationalsOfPowersOfE: "+l+" complexity: "+d),x=d,p=l):n&&console.log("subpar explanation by approxRationalsOfPowersOfE: "+l+" complexity: "+d)),u=approxRationalsOfPowersOfPI(t),u!=null&&(d=simpleComplexityMeasure(u),d<x?(n&&console.log("better explanation by approxRationalsOfPowersOfPI: "+u+" complexity: "+d),x=d,p=u):n&&console.log("subpar explanation by approxRationalsOfPowersOfPI: "+u+" complexity: "+d)),c=approxTrigonometric(t),c!=null&&(d=simpleComplexityMeasure(c),d<x?(n&&console.log("better explanation by approxTrigonometric: "+c+" complexity: "+d),x=d,p=c):n&&console.log("subpar explanation by approxTrigonometric: "+c+" complexity: "+d)),p},simpleComplexityMeasure=function(t,n,a){var s;if(s=null,t instanceof Array){switch(t[1]){case approx_sine_of_pi_times_rational:s=4;break;case approx_rationalOfPi:s=Math.pow(4,Math.abs(t[3]))*Math.abs(t[2]);break;case approx_rationalOfE:s=Math.pow(3,Math.abs(t[3]))*Math.abs(t[2]);break;default:s=0}s+=Math.abs(t[2])*(Math.abs(t[3])+Math.abs(t[4]))}else s+=Math.abs(t)*(Math.abs(n)+Math.abs(a));return t[2]===1?s-=1:s+=1,t[3]===1?s-=1:s+=1,t[4]===1?s-=1:s+=1,s<0&&(s=0),s},testApprox=function(){var t,n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j,Z,W,J,en,tn,Ct,Q,on,gn,In,dn,ix,Cn,ax,sx,lx,ox,hx,_x,ux,px,dx,mx,gx,Sx,Ex,Cx,Ax,Tx,kx,Rx,$x,Gx,qx,Dx,lE,cE,nE,iE;for(lx=[2,3,5,6,7,8,10],on=0,R=lx.length;on<R;on++)for(a=lx[on],ox=[2,3,5,6,7,8,10],s=0,D=ox.length;s<D;s++)c=ox[s],a!==c&&(console.log("testapproxRadicals testing: 1 * sqrt( "+a+" ) / "+c),n=a/c,Dx=Math.sqrt(a)/c,gx=approxRadicals(Dx),Ex=gx[2]*Math.sqrt(gx[3])/gx[4],Math.abs(Dx-Ex)>1e-15&&console.log("fail testapproxRadicals: 1 * sqrt( "+a+" ) / "+c+" . obtained: "+gx));for(hx=[2,3,5,6,7,8,10],p=0,O=hx.length;p<O;p++)for(a=hx[p],_x=[2,3,5,6,7,8,10],S=0,F=_x.length;S<F;S++)c=_x[S],a!==c&&(console.log("testapproxRadicals testing with 4 digits: 1 * sqrt( "+a+" ) / "+c),n=a/c,dn=Math.sqrt(a)/c,Dx=dn.toFixed(4),gx=approxRadicals(Dx),Ex=gx[2]*Math.sqrt(gx[3])/gx[4],Math.abs(dn-Ex)>1e-15&&console.log("fail testapproxRadicals with 4 digits: 1 * sqrt( "+a+" ) / "+c+" . obtained: "+gx));for(ux=[2,3,5,6,7,8,10],J=0,z=ux.length;J<z;J++)for(a=ux[J],px=[2,3,5,6,7,8,10],Ct=0,j=px.length;Ct<j;Ct++)c=px[Ct],a!==c&&(console.log("testapproxRadicals testing: 1 * sqrt( "+a+" / "+c+" )"),n=a/c,Dx=Math.sqrt(a/c),gx=approxRadicals(Dx),gx!=null&&(Ex=gx[2]*Math.sqrt(gx[3]/gx[4]),gx[1]===approx_radicalOfRatio&&Math.abs(Dx-Ex)>1e-15&&console.log("fail testapproxRadicals: 1 * sqrt( "+a+" / "+c+" ) . obtained: "+gx)));for(dx=[1,2,3,5,6,7,8,10],gn=0,Z=dx.length;gn<Z;gn++)for(a=dx[gn],mx=[1,2,3,5,6,7,8,10],ix=0,W=mx.length;ix<W;ix++)c=mx[ix],!(a===1&&c===1)&&(console.log("testapproxRadicals testing with 4 digits:: 1 * sqrt( "+a+" / "+c+" )"),n=a/c,dn=Math.sqrt(a/c),Dx=dn.toFixed(4),gx=approxRadicals(Dx),Ex=gx[2]*Math.sqrt(gx[3]/gx[4]),gx[1]===approx_radicalOfRatio&&Math.abs(dn-Ex)>1e-15&&console.log("fail testapproxRadicals with 4 digits:: 1 * sqrt( "+a+" / "+c+" ) . obtained: "+gx));for(a=ax=1;ax<=5;a=++ax)for(c=Cx=1;Cx<=5;c=++Cx)console.log("testApproxAll testing: 1 * log("+a+" ) / "+c),n=a/c,Dx=Math.log(a)/c,gx=approxAll(Dx),Ex=gx[2]*Math.log(gx[3])/gx[4],Math.abs(Dx-Ex)>1e-15&&console.log("fail testApproxAll: 1 * log("+a+" ) / "+c+" . obtained: "+gx);for(a=Tx=1;Tx<=5;a=++Tx)for(c=Rx=1;Rx<=5;c=++Rx)console.log("testApproxAll testing with 4 digits: 1 * log("+a+" ) / "+c),n=a/c,dn=Math.log(a)/c,Dx=dn.toFixed(4),gx=approxAll(Dx),Ex=gx[2]*Math.log(gx[3])/gx[4],Math.abs(dn-Ex)>1e-15&&console.log("fail testApproxAll with 4 digits: 1 * log("+a+" ) / "+c+" . obtained: "+gx);for(a=Gx=1;Gx<=5;a=++Gx)for(c=lE=1;lE<=5;c=++lE)console.log("testApproxAll testing: 1 * log("+a+" / "+c+" )"),n=a/c,Dx=Math.log(a/c),gx=approxAll(Dx),Ex=gx[2]*Math.log(gx[3]/gx[4]),Math.abs(Dx-Ex)>1e-15&&console.log("fail testApproxAll: 1 * log("+a+" / "+c+" ) . obtained: "+gx);for(a=nE=1;nE<=5;a=++nE)for(c=l=1;l<=5;c=++l)console.log("testApproxAll testing with 4 digits: 1 * log("+a+" / "+c+" )"),n=a/c,dn=Math.log(a/c),Dx=dn.toFixed(4),gx=approxAll(Dx),Ex=gx[2]*Math.log(gx[3]/gx[4]),Math.abs(dn-Ex)>1e-15&&console.log("fail testApproxAll with 4 digits: 1 * log("+a+" / "+c+" ) . obtained: "+gx);for(a=d=1;d<=2;a=++d)for(c=T=1;T<=12;c=++T)console.log("testApproxAll testing: 1 * (e ^ "+a+" ) / "+c),n=a/c,Dx=Math.pow(Math.E,a)/c,gx=approxAll(Dx),Ex=gx[2]*Math.pow(Math.E,gx[3])/gx[4],Math.abs(Dx-Ex)>1e-15&&console.log("fail testApproxAll: 1 * (e ^ "+a+" ) / "+c+" . obtained: "+gx);for(a=en=1;en<=2;a=++en)for(c=Q=1;Q<=12;c=++Q)console.log("approxRationalsOfPowersOfE testing with 4 digits: 1 * (e ^ "+a+" ) / "+c),n=a/c,dn=Math.pow(Math.E,a)/c,Dx=dn.toFixed(4),gx=approxRationalsOfPowersOfE(Dx),Ex=gx[2]*Math.pow(Math.E,gx[3])/gx[4],Math.abs(dn-Ex)>1e-15&&console.log("fail approxRationalsOfPowersOfE with 4 digits: 1 * (e ^ "+a+" ) / "+c+" . obtained: "+gx);for(a=In=1;In<=2;a=++In)for(c=Cn=1;Cn<=12;c=++Cn)console.log("testApproxAll testing: 1 * pi ^ "+a+" / "+c),n=a/c,Dx=Math.pow(Math.PI,a)/c,gx=approxAll(Dx),Ex=gx[2]*Math.pow(Math.PI,gx[3])/gx[4],Math.abs(Dx-Ex)>1e-15&&console.log("fail testApproxAll: 1 * pi ^ "+a+" / "+c+" ) . obtained: "+gx);for(a=sx=1;sx<=2;a=++sx)for(c=Ax=1;Ax<=12;c=++Ax)console.log("approxRationalsOfPowersOfPI testing with 4 digits: 1 * pi ^ "+a+" / "+c),n=a/c,dn=Math.pow(Math.PI,a)/c,Dx=dn.toFixed(4),gx=approxRationalsOfPowersOfPI(Dx),Ex=gx[2]*Math.pow(Math.PI,gx[3])/gx[4],Math.abs(dn-Ex)>1e-15&&console.log("fail approxRationalsOfPowersOfPI with 4 digits: 1 * pi ^ "+a+" / "+c+" ) . obtained: "+gx);for(a=kx=1;kx<=4;a=++kx)for(c=$x=1;$x<=4;c=++$x)console.log("testApproxAll testing: 1 * sin( "+a+"/"+c+" )"),n=a/c,Dx=Math.sin(n),gx=approxAll(Dx),Sx=gx[3]/gx[4],Ex=gx[2]*Math.sin(Sx),Math.abs(Dx-Ex)>1e-15&&console.log("fail testApproxAll: 1 * sin( "+a+"/"+c+" ) . obtained: "+gx);for(a=qx=1;qx<=4;a=++qx)for(c=cE=1;cE<=4;c=++cE)console.log("testApproxAll testing with 5 digits: 1 * sin( "+a+"/"+c+" )"),n=a/c,dn=Math.sin(n),Dx=dn.toFixed(5),gx=approxAll(Dx),gx==null&&console.log("fail testApproxAll with 5 digits: 1 * sin( "+a+"/"+c+" ) . obtained:  undefined "),Sx=gx[3]/gx[4],Ex=gx[2]*Math.sin(Sx),t=Math.abs(dn-Ex),t>1e-14&&console.log("fail testApproxAll with 5 digits: 1 * sin( "+a+"/"+c+" ) . obtained: "+gx+" error: "+t);for(a=iE=1;iE<=4;a=++iE)for(c=u=1;u<=4;c=++u)console.log("testApproxAll testing with 4 digits: 1 * sin( "+a+"/"+c+" )"),n=a/c,dn=Math.sin(n),Dx=dn.toFixed(4),gx=approxAll(Dx),gx==null&&console.log("fail testApproxAll with 4 digits: 1 * sin( "+a+"/"+c+" ) . obtained:  undefined "),Sx=gx[3]/gx[4],Ex=gx[2]*Math.sin(Sx),t=Math.abs(dn-Ex),t>1e-14&&console.log("fail testApproxAll with 4 digits: 1 * sin( "+a+"/"+c+" ) . obtained: "+gx+" error: "+t);for(Dx=0,approxAll(Dx)[0]!=="0"&&console.log("fail testApproxAll: 0"),Dx=0,approxAll(Dx)[0]!=="0"&&console.log("fail testApproxAll: 0.0"),Dx=0,approxAll(Dx)[0]!=="0"&&console.log("fail testApproxAll: 0.00"),Dx=0,approxAll(Dx)[0]!=="0"&&console.log("fail testApproxAll: 0.000"),Dx=0,approxAll(Dx)[0]!=="0"&&console.log("fail testApproxAll: 0.0000"),Dx=1,approxAll(Dx)[0]!=="1"&&console.log("fail testApproxAll: 1"),Dx=1,approxAll(Dx)[0]!=="1"&&console.log("fail testApproxAll: 1.0"),Dx=1,approxAll(Dx)[0]!=="1"&&console.log("fail testApproxAll: 1.00"),Dx=1,approxAll(Dx)[0]!=="1"&&console.log("fail testApproxAll: 1.000"),Dx=1,approxAll(Dx)[0]!=="1"&&console.log("fail testApproxAll: 1.0000"),Dx=1,approxAll(Dx)[0]!=="1"&&console.log("fail testApproxAll: 1.00000"),Dx=Math.sqrt(2),approxAll(Dx)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail testApproxAll: Math.sqrt(2)"),Dx=1.41,approxAll(Dx)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail testApproxAll: 1.41"),Dx=1.4,approxRadicals(Dx)[0]!=="1 * sqrt( 2 ) / 1"&&console.log("fail approxRadicals: 1.4"),Dx=.6,approxLogs(Dx)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.6"),Dx=.69,approxLogs(Dx)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.69"),Dx=.7,approxLogs(Dx)[0]!=="1 * log( 2 ) / 1"&&console.log("fail approxLogs: 0.7"),Dx=1.09,approxLogs(Dx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxLogs: 1.09"),Dx=1.09,approxAll(Dx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.09"),Dx=1.098,approxAll(Dx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.098"),Dx=1.1,approxAll(Dx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.1"),Dx=1.11,approxAll(Dx)[0]!=="1 * log( 3 ) / 1"&&console.log("fail approxAll: 1.11"),Dx=Math.sqrt(3),approxAll(Dx)[0]!=="1 * sqrt( 3 ) / 1"&&console.log("fail testApproxAll: Math.sqrt(3)"),Dx=1,approxAll(Dx)[0]!=="1"&&console.log("fail testApproxAll: 1.0000"),Dx=3.141592,approxAll(Dx)[0]!=="1 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 3.141592"),Dx=31.41592,approxAll(Dx)[0]!=="10 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 31.41592"),Dx=314.1592,approxAll(Dx)[0]!=="100 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 314.1592"),Dx=3141592653589793e-8,approxAll(Dx)[0]!=="10000000 * (pi ^ 1 ) / 1 )"&&console.log("fail testApproxAll: 31415926.53589793"),Dx=Math.sqrt(2),approxTrigonometric(Dx)[0]!=="2 * sin( 1/4 * pi )"&&console.log("fail approxTrigonometric: Math.sqrt(2)"),Dx=Math.sqrt(3),approxTrigonometric(Dx)[0]!=="2 * sin( 1/3 * pi )"&&console.log("fail approxTrigonometric: Math.sqrt(3)"),Dx=(Math.sqrt(6)-Math.sqrt(2))/4,approxAll(Dx)[0]!=="1 * sin( 1/12 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(6) - Math.sqrt(2))/4"),Dx=Math.sqrt(2-Math.sqrt(2))/2,approxAll(Dx)[0]!=="1 * sin( 1/8 * pi )"&&console.log("fail testApproxAll: Math.sqrt(2 - Math.sqrt(2))/2"),Dx=(Math.sqrt(6)+Math.sqrt(2))/4,approxAll(Dx)[0]!=="1 * sin( 5/12 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(6) + Math.sqrt(2))/4"),Dx=Math.sqrt(2+Math.sqrt(3))/2,approxAll(Dx)[0]!=="1 * sin( 5/12 * pi )"&&console.log("fail testApproxAll: Math.sqrt(2 + Math.sqrt(3))/2"),Dx=(Math.sqrt(5)-1)/4,approxAll(Dx)[0]!=="1 * sin( 1/10 * pi )"&&console.log("fail testApproxAll: (Math.sqrt(5) - 1)/4"),Dx=Math.sqrt(10-2*Math.sqrt(5))/4,approxAll(Dx)[0]!=="1 * sin( 1/5 * pi )"&&console.log("fail testApproxAll: Math.sqrt(10 - 2*Math.sqrt(5))/4"),Dx=Math.sin(Math.PI/7),approxAll(Dx)[0]!=="1 * sin( 1/7 * pi )"&&console.log("fail testApproxAll: Math.sin(Math.PI/7)"),Dx=Math.sin(Math.PI/9),approxAll(Dx)[0]!=="1 * sin( 1/9 * pi )"&&console.log("fail testApproxAll: Math.sin(Math.PI/9)"),Dx=1836.15267,approxRationalsOfPowersOfPI(Dx)[0]!=="6 * (pi ^ 5 ) / 1 )"&&console.log("fail approxRationalsOfPowersOfPI: 1836.15267"),a=x=1;x<=13;a=++x)for(c=_=1;_<=13;c=++_)console.log("approxTrigonometric testing: 1 * sin( "+a+"/"+c+" * pi )"),n=a/c,Dx=Math.sin(Math.PI*n),gx=approxTrigonometric(Dx),Sx=gx[3]/gx[4],Ex=gx[2]*Math.sin(Math.PI*Sx),Math.abs(Dx-Ex)>1e-15&&console.log("fail approxTrigonometric: 1 * sin( "+a+"/"+c+" * pi ) . obtained: "+gx);for(a=A=1;A<=13;a=++A)for(c=tn=1;tn<=13;c=++tn)a===5&&c===11||a===6&&c===11||(console.log("approxTrigonometric testing with 4 digits: 1 * sin( "+a+"/"+c+" * pi )"),n=a/c,dn=Math.sin(Math.PI*n),Dx=dn.toFixed(4),gx=approxTrigonometric(Dx),Sx=gx[3]/gx[4],Ex=gx[2]*Math.sin(Math.PI*Sx),t=Math.abs(dn-Ex),t>1e-14&&console.log("fail approxTrigonometric with 4 digits: 1 * sin( "+a+"/"+c+" * pi ) . obtained: "+gx+" error: "+t));return console.log("testApprox done")},$.approxRadicals=approxRadicals,$.approxRationalsOfLogs=approxRationalsOfLogs,$.approxAll=approxAll,$.testApprox=testApprox,Eval_arccos=function(){return push(cadr(p1)),Eval(),arccos()},arccos=function(){var t,n,a;if(a=0,t=0,save(),p1=pop(),car(p1)===symbol(COS)){push(cadr(p1)),restore();return}if(isdouble(p1)){n=0,t=Math.acos(p1.d),n&&stop("arccos function argument is not in the interval [-1,1]"),push_double(t),restore();return}if(isoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){evaluatingAsFloats?push_double(Math.PI/4):(push_rational(1,4),push_symbol(PI),multiply()),restore();return}if(isminusoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),-1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){evaluatingAsFloats?push_double(Math.PI*3/4):(push_rational(3,4),push_symbol(PI),multiply()),restore();return}if(issqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(Math.PI/6):(push_rational(1,6),push_symbol(PI),multiply()),restore();return}if(isminussqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(5*Math.PI/6):(push_rational(5,6),push_symbol(PI),multiply()),restore();return}if(!isrational(p1)){push_symbol(ARCCOS),push(p1),list(2),restore();return}switch(push(p1),push_integer(2),multiply(),a=pop_integer(),a){case-2:evaluatingAsFloats?push_double(Math.PI):push_symbol(PI);break;case-1:evaluatingAsFloats?push_double(Math.PI*2/3):(push_rational(2,3),push_symbol(PI),multiply());break;case 0:evaluatingAsFloats?push_double(Math.PI/2):(push_rational(1,2),push_symbol(PI),multiply());break;case 1:evaluatingAsFloats?push_double(Math.PI/3):(push_rational(1,3),push_symbol(PI),multiply());break;case 2:evaluatingAsFloats?push_double(0):push(zero);break;default:push_symbol(ARCCOS),push(p1),list(2)}return restore()},Eval_arccosh=function(){return push(cadr(p1)),Eval(),arccosh()},arccosh=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(COSH)){push(cadr(p1)),restore();return}if(isdouble(p1)){t=p1.d,t<1&&stop("arccosh function argument is less than 1.0"),t=Math.log(t+Math.sqrt(t*t-1)),push_double(t),restore();return}if(isplusone(p1)){push(zero),restore();return}return push_symbol(ARCCOSH),push(p1),list(2),restore()},Eval_arcsin=function(){return push(cadr(p1)),Eval(),arcsin()},arcsin=function(){var t,n,a;if(a=0,t=0,save(),p1=pop(),car(p1)===symbol(SIN)){push(cadr(p1)),restore();return}if(isdouble(p1)){n=0,t=Math.asin(p1.d),n&&stop("arcsin function argument is not in the interval [-1,1]"),push_double(t),restore();return}if(isoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){push_rational(1,4),push_symbol(PI),multiply(),restore();return}if(isminusoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),-1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){evaluatingAsFloats?push_double(-Math.PI/4):(push_rational(-1,4),push_symbol(PI),multiply()),restore();return}if(issqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(Math.PI/3):(push_rational(1,3),push_symbol(PI),multiply()),restore();return}if(isminussqrtthreeovertwo(p1)){evaluatingAsFloats?push_double(-Math.PI/3):(push_rational(-1,3),push_symbol(PI),multiply()),restore();return}if(!isrational(p1)){push_symbol(ARCSIN),push(p1),list(2),restore();return}switch(push(p1),push_integer(2),multiply(),a=pop_integer(),a){case-2:evaluatingAsFloats?push_double(-Math.PI/2):(push_rational(-1,2),push_symbol(PI),multiply());break;case-1:evaluatingAsFloats?push_double(-Math.PI/6):(push_rational(-1,6),push_symbol(PI),multiply());break;case 0:evaluatingAsFloats?push_double(0):push(zero);break;case 1:evaluatingAsFloats?push_double(Math.PI/6):(push_rational(1,6),push_symbol(PI),multiply());break;case 2:evaluatingAsFloats?push_double(Math.PI/2):(push_rational(1,2),push_symbol(PI),multiply());break;default:push_symbol(ARCSIN),push(p1),list(2)}return restore()},Eval_arcsinh=function(){return push(cadr(p1)),Eval(),arcsinh()},arcsinh=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(SINH)){push(cadr(p1)),restore();return}if(isdouble(p1)){t=p1.d,t=Math.log(t+Math.sqrt(t*t+1)),push_double(t),restore();return}if(isZeroAtomOrTensor(p1)){push(zero),restore();return}return push_symbol(ARCSINH),push(p1),list(2),restore()},Eval_arctan=function(){return push(cadr(p1)),Eval(),arctan()},arctan=function(){var t,n;if(t=0,save(),p1=pop(),car(p1)===symbol(TAN)){push(cadr(p1)),restore();return}if(isdouble(p1)){n=0,t=Math.atan(p1.d),n&&stop("arctan function error"),push_double(t),restore();return}if(isZeroAtomOrTensor(p1)){push(zero),restore();return}if(isnegative(p1)){push(p1),negate(),arctan(),negate(),restore();return}if(Find(p1,symbol(SIN))&&Find(p1,symbol(COS))&&(push(p1),numerator(),p2=pop(),push(p1),denominator(),p3=pop(),car(p2)===symbol(SIN)&&car(p3)===symbol(COS)&&equal(cadr(p2),cadr(p3)))){push(cadr(p2)),restore();return}if(car(p1)===symbol(POWER)&&equaln(cadr(p1),3)&&equalq(caddr(p1),-1,2)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,3)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),3)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)){push_rational(1,6),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),restore();return}if(equaln(p1,1)){push_rational(1,4),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),restore();return}if(car(p1)===symbol(POWER)&&equaln(cadr(p1),3)&&equalq(caddr(p1),1,2)){push_rational(1,3),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),restore();return}return push_symbol(ARCTAN),push(p1),list(2),restore()},Eval_arctanh=function(){return push(cadr(p1)),Eval(),arctanh()},arctanh=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(TANH)){push(cadr(p1)),restore();return}if(isdouble(p1)){t=p1.d,(t<-1||t>1)&&stop("arctanh function argument is not in the interval [-1,1]"),t=Math.log((1+t)/(1-t))/2,push_double(t),restore();return}if(isZeroAtomOrTensor(p1)){push(zero),restore();return}return push_symbol(ARCTANH),push(p1),list(2),restore()},DEBUG_ARG=!1,Eval_arg=function(){return push(cadr(p1)),Eval(),arg()},arg=function(){return save(),p1=pop(),push(p1),numerator(),yyarg(),push(p1),denominator(),yyarg(),subtract(),restore()},yyarg=function(){if(save(),p1=pop(),ispositivenumber(p1)||p1===symbol(PI))isdouble(p1)||evaluatingAsFloats?push_double(0):push_integer(0);else if(isnegativenumber(p1))isdouble(p1)||evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),negate();else if(issymbol(p1))push_symbol(ARG),push(p1),list(2);else if(car(p1)===symbol(POWER)&&equaln(cadr(p1),-1))evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),push(caddr(p1)),multiply();else if(car(p1)===symbol(POWER)&&cadr(p1)===symbol(E))push(caddr(p1)),imag();else if(car(p1)===symbol(POWER)&&isoneovertwo(caddr(p1))){if(DEBUG_ARG&&console.log("arg of a sqrt: "+p1),DEBUG_ARG)debugger;push(cadr(p1)),arg(),DEBUG_ARG&&console.log(" = 1/2 * "+stack[tos-1]),push(caddr(p1)),multiply()}else if(car(p1)===symbol(MULTIPLY))for(push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),arg(),add(),p1=cdr(p1);else car(p1)===symbol(ADD)?(push(p1),rect(),p1=pop(),push(p1),real(),p2=pop(),push(p1),imag(),p3=pop(),isZeroAtomOrTensor(p2)?(evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),isnegative(p3)&&negate()):(push(p3),push(p2),divide(),arctan(),isnegative(p2)&&(evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),isnegative(p3)?subtract():add()))):isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))?(push_symbol(ARG),push(p1),list(2)):push_integer(0);return restore()},bake=function(){var t,n,a,s,l,u;if(t=0,n=0,a=0,s=0,l=0,u=0,expanding++,save(),p1=pop(),n=ispolyexpandedform(p1,symbol(SYMBOL_S)),a=ispolyexpandedform(p1,symbol(SYMBOL_T)),s=ispolyexpandedform(p1,symbol(SYMBOL_X)),l=ispolyexpandedform(p1,symbol(SYMBOL_Y)),u=ispolyexpandedform(p1,symbol(SYMBOL_Z)),n===1&&a===0&&s===0&&l===0&&u===0)p2=symbol(SYMBOL_S),bake_poly();else if(n===0&&a===1&&s===0&&l===0&&u===0)p2=symbol(SYMBOL_T),bake_poly();else if(n===0&&a===0&&s===1&&l===0&&u===0)p2=symbol(SYMBOL_X),bake_poly();else if(n===0&&a===0&&s===0&&l===1&&u===0)p2=symbol(SYMBOL_Y),bake_poly();else if(n===0&&a===0&&s===0&&l===0&&u===1)p2=symbol(SYMBOL_Z),bake_poly();else if(iscons(p1)&&car(p1)!==symbol(FOR)){for(t=tos,push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),bake(),p1=cdr(p1);list(tos-t)}else push(p1);return restore(),expanding--},polyform=function(){var t;if(t=0,save(),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2))bake_poly();else if(iscons(p1)){for(t=tos,push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),polyform(),p1=cdr(p1);list(tos-t)}else push(p1);return restore()},bake_poly=function(){var t,n,a,s,l,u;for(n=0,a=0,s=0,l=0,t=tos,s=coeff(p2,p1),n=tos,a=u=s-1;u>=0;a=u+=-1)p1=stack[t+a],bake_poly_term(a);return l=tos-n,l>1&&(list(l),push(symbol(ADD)),swap(),cons()),p1=pop(),moveTos(tos-s),push(p1)},bake_poly_term=function(t){var n,a;if(n=0,a=0,!isZeroAtomOrTensor(p1)){if(t===0){if(car(p1)===symbol(ADD))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else push(p1);return}if(n=tos,car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else equaln(p1,1)||push(p1);if(t===1?push(p2):(push(symbol(POWER)),push(p2),push_integer(t),list(3)),a=tos-n,a>1)return list(a),push(symbol(MULTIPLY)),swap(),cons()}},Eval_besselj=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),besselj()},besselj=function(){return save(),yybesselj(),restore()},yybesselj=function(){var t,n;if(t=0,n=0,p2=pop(),p1=pop(),push(p2),n=pop_integer(),isdouble(p1)&&!isNaN(n)){t=jn(n,p1.d),push_double(t);return}if(isZeroAtomOrTensor(p1)&&isZeroAtomOrTensor(p2)){push_integer(1);return}if(isZeroAtomOrTensor(p1)&&!isNaN(n)){push_integer(0);return}if(p2.k===NUM&&MEQUAL(p2.q.b,2)){if(MEQUAL(p2.q.a,1)){evaluatingAsFloats?push_double(2/Math.PI):(push_integer(2),push_symbol(PI),divide()),push(p1),divide(),push_rational(1,2),power(),push(p1),sine(),multiply();return}if(MEQUAL(p2.q.a,-1)){evaluatingAsFloats?push_double(2/Math.PI):(push_integer(2),push_symbol(PI),divide()),push(p1),divide(),push_rational(1,2),power(),push(p1),cosine(),multiply();return}push_integer(MSIGN(p2.q.a)),p3=pop(),push_integer(2),push(p1),divide(),push(p2),push(p3),subtract(),multiply(),push(p1),push(p2),push(p3),subtract(),besselj(),multiply(),push(p1),push(p2),push_integer(2),push(p3),multiply(),subtract(),besselj(),subtract();return}if(isnegativeterm(p1)){push(p1),negate(),push(p2),power(),push(p1),push(p2),negate(),power(),multiply(),push_symbol(BESSELJ),push(p1),negate(),push(p2),list(3),multiply();return}if(isnegativeterm(p2)){push_integer(-1),push(p2),power(),push_symbol(BESSELJ),push(p1),push(p2),negate(),list(3),multiply();return}return push(symbol(BESSELJ)),push(p1),push(p2),list(3)},Eval_bessely=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),bessely()},bessely=function(){return save(),yybessely(),restore()},yybessely=function(){var t,n;if(t=0,n=0,p2=pop(),p1=pop(),push(p2),n=pop_integer(),isdouble(p1)&&!isNaN(n)){t=yn(n,p1.d),push_double(t);return}if(isnegativeterm(p2)){push_integer(-1),push(p2),power(),push_symbol(BESSELY),push(p1),push(p2),negate(),list(3),multiply();return}push_symbol(BESSELY),push(p1),push(p2),list(3)},mint=function(t){return bigInt(t)},isSmall=function(t){return t.geq(Number.MIN_SAFE_INTEGER)&&t.leq(Number.MAX_SAFE_INTEGER)},setSignTo=function(t,n){if(t.isPositive()){if(n<0)return t.multiply(bigInt(-1))}else if(n>0)return t.multiply(bigInt(-1));return t},makeSignSameAs=function(t,n){if(t.isPositive()){if(n.isNegative())return t.multiply(bigInt(-1))}else if(n.isPositive())return t.multiply(bigInt(-1));return t},makePositive=function(t){return t.isNegative()?t.multiply(bigInt(-1)):t},add_numbers=function(){var t,n,a;if(t=1,n=1,isrational(stack[tos-1])&&isrational(stack[tos-2])){qadd();return}return save(),p2=pop(),p1=pop(),isdouble(p1)?t=p1.d:t=convert_rational_to_double(p1),isdouble(p2)?n=p2.d:n=convert_rational_to_double(p2),a=t+n,push_double(a),restore()},multiply_numbers=function(){var t,n;if(t=0,n=0,isrational(stack[tos-1])&&isrational(stack[tos-2])){qmul();return}return save(),p2=pop(),p1=pop(),isdouble(p1)?t=p1.d:t=convert_rational_to_double(p1),isdouble(p2)?n=p2.d:n=convert_rational_to_double(p2),push_double(t*n),restore()},divide_numbers=function(){var t,n;if(t=0,n=0,isrational(stack[tos-1])&&isrational(stack[tos-2])){qdiv();return}return save(),p2=pop(),p1=pop(),isZeroAtomOrTensor(p2)&&stop("divide by zero"),isdouble(p1)?t=p1.d:t=convert_rational_to_double(p1),isdouble(p2)?n=p2.d:n=convert_rational_to_double(p2),push_double(t/n),restore()},invert_number=function(){var t,n;if(save(),p1=pop(),isZeroAtomOrTensor(p1)&&stop("divide by zero"),isdouble(p1)){push_double(1/p1.d),restore();return}return t=bigInt(p1.q.a),n=bigInt(p1.q.b),n=makeSignSameAs(n,t),t=setSignTo(t,1),p1=new U,p1.k=NUM,p1.q.a=n,p1.q.b=t,push(p1),restore()},compare_rationals=function(t,n){var a,s,l;return l=0,a=mmul(t.q.a,n.q.b),s=mmul(t.q.b,n.q.a),l=mcmp(a,s),l},compare_numbers=function(t,n){var a,s;return a=0,s=0,isrational(t)&&isrational(n)?compare_rationals(t,n):(isdouble(t)?a=t.d:a=convert_rational_to_double(t),isdouble(n)?s=n.d:s=convert_rational_to_double(n),a<s?-1:a>s?1:0)},negate_number=function(){if(save(),p1=pop(),isZeroAtomOrTensor(p1)){push(p1),restore();return}switch(p1.k){case NUM:p2=new U,p2.k=NUM,p2.q.a=bigInt(p1.q.a.multiply(bigInt.minusOne)),p2.q.b=bigInt(p1.q.b),push(p2);break;case DOUBLE:push_double(-p1.d);break;default:stop("bug caught in mp_negate_number")}return restore()},bignum_truncate=function(){var t;return save(),p1=pop(),t=mdiv(p1.q.a,p1.q.b),p1=new U,p1.k=NUM,p1.q.a=t,p1.q.b=bigInt(1),push(p1),restore()},mp_numerator=function(){if(save(),p1=pop(),p1.k!==NUM){push(one),restore();return}return p2=new U,p2.k=NUM,p2.q.a=bigInt(p1.q.a),p2.q.b=bigInt(1),push(p2),restore()},mp_denominator=function(){if(save(),p1=pop(),p1.k!==NUM){push(one),restore();return}return p2=new U,p2.k=NUM,p2.q.a=bigInt(p1.q.b),p2.q.b=bigInt(1),push(p2),restore()},bignum_power_number=function(t){var n,a,s;return save(),p1=pop(),n=mpow(p1.q.a,Math.abs(t)),a=mpow(p1.q.b,Math.abs(t)),t<0&&(s=n,n=a,a=s,n=makeSignSameAs(n,a),a=setSignTo(a,1)),p1=new U,p1.k=NUM,p1.q.a=n,p1.q.b=a,push(p1),restore()},convert_rational_to_double=function(t){var n,a;if(t.q==null)debugger;return n=t.q.a.divmod(t.q.b),a=n.quotient+n.remainder/t.q.b.toJSNumber(),a},new_integer=function(t){var n;return n=new U,n.k=NUM,n.q.a=bigInt(t),n.q.b=bigInt(1),n},push_integer=function(t){return DEBUG&&console.log("pushing integer "+t),push(new_integer(t))},push_double=function(t){return save(),p1=new U,p1.k=DOUBLE,p1.d=t,push(p1),restore()},push_rational=function(t,n){var a;return a=new U,a.k=NUM,a.q.a=bigInt(t),a.q.b=bigInt(n),push(a)},pop_integer=function(){var t;switch(t=NaN,save(),p1=pop(),p1.k){case NUM:isinteger(p1)&&isSmall(p1.q.a)&&(t=p1.q.a.toJSNumber());break;case DOUBLE:DEBUG&&console.log("popping integer but double is found"),Math.floor(p1.d)===p1.d&&(DEBUG&&console.log("...altough it's an integer"),t=p1.d)}return restore(),t},bignum_scan_integer=function(t){var n,a,s;return save(),a=0,s=t[a],(s==="+"||s==="-")&&a++,n=bigInt(t.substring(a)),p1=new U,p1.k=NUM,p1.q.a=n,p1.q.b=bigInt(1),push(p1),s==="-"&&negate(),restore()},bignum_scan_float=function(t){return push_double(parseFloat(t))},print_number=function(t,n){var a,s,l;switch(s="",l="",t.k){case NUM:a=t.q.a.toString(),n||a[0]==="-"&&(a=a.substring(1)),printMode===PRINTMODE_LATEX&&isfraction(t)&&(a="\\frac{"+a+"}{"),s+=a,isfraction(t)&&(printMode!==PRINTMODE_LATEX&&(s+="/"),l=t.q.b.toString(),printMode===PRINTMODE_LATEX&&(l+="}"),s+=l);break;case DOUBLE:a=doubleToReasonableString(t.d),n||a[0]==="-"&&(a=a.substring(1)),s+=a}return s},gcd_numbers=function(){return save(),p2=pop(),p1=pop(),p3=new U,p3.k=NUM,p3.q.a=mgcd(p1.q.a,p2.q.a),p3.q.b=mgcd(p1.q.b,p2.q.b),p3.q.a=setSignTo(p3.q.a,1),push(p3),restore()},pop_double=function(){var t;switch(t=0,save(),p1=pop(),p1.k){case NUM:t=convert_rational_to_double(p1);break;case DOUBLE:t=p1.d;break;default:t=0}return restore(),t},bignum_float=function(){var t;return t=0,t=convert_rational_to_double(pop()),push_double(t)},bignum_factorial=function(t){return save(),p1=new U,p1.k=NUM,p1.q.a=__factorial(t),p1.q.b=bigInt(1),push(p1),restore()},__factorial=function(t){var n,a,s,l,u,c;if(s=0,t===0||t===1)return n=bigInt(1),n;if(n=bigInt(2),a=bigInt(0),3<=t)for(s=l=3,u=t;3<=u?l<=u:l>=u;s=3<=u?++l:--l)a=bigInt(s),c=mmul(n,a),n=c;return n},Eval_binomial=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),binomial()},binomial=function(){return save(),ybinomial(),restore()},ybinomial=function(){if(p2=pop(),p1=pop(),BINOM_check_args()===0){push(zero);return}return push(p1),factorial(),push(p2),factorial(),divide(),push(p1),push(p2),subtract(),factorial(),divide()},BINOM_check_args=function(){return isNumericAtom(p1)&&lessp(p1,zero)||isNumericAtom(p2)&&lessp(p2,zero)||isNumericAtom(p1)&&isNumericAtom(p2)&&lessp(p1,p2)?0:1},Eval_ceiling=function(){return push(cadr(p1)),Eval(),ceiling()},ceiling=function(){return save(),yyceiling(),restore()},yyceiling=function(){var t;if(t=0,p1=pop(),!isNumericAtom(p1)){push_symbol(CEILING),push(p1),list(2);return}if(isdouble(p1)){t=Math.ceil(p1.d),push_double(t);return}if(isinteger(p1)){push(p1);return}return p3=new U,p3.k=NUM,p3.q.a=mdiv(p1.q.a,p1.q.b),p3.q.b=mint(1),push(p3),isnegativenumber(p1)?1:(push_integer(1),add())},Eval_choose=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),choose()},choose=function(){if(save(),p2=pop(),p1=pop(),choose_check_args()===0){push_integer(0),restore();return}return push(p1),factorial(),push(p2),factorial(),divide(),push(p1),push(p2),subtract(),factorial(),divide(),restore()},choose_check_args=function(){return isNumericAtom(p1)&&lessp(p1,zero)||isNumericAtom(p2)&&lessp(p2,zero)||isNumericAtom(p1)&&isNumericAtom(p2)&&lessp(p1,p2)?0:1},Eval_circexp=function(){return push(cadr(p1)),Eval(),circexp(),Eval()},circexp=function(){var t,n,a,s;if(n=0,t=0,save(),p1=pop(),car(p1)===symbol(COS)){push(cadr(p1)),expcos(),restore();return}if(car(p1)===symbol(SIN)){push(cadr(p1)),expsin(),restore();return}if(car(p1)===symbol(TAN)){p1=cadr(p1),push(imaginaryunit),push(p1),multiply(),exponential(),p2=pop(),push(imaginaryunit),push(p1),multiply(),negate(),exponential(),p3=pop(),push(p3),push(p2),subtract(),push(imaginaryunit),multiply(),push(p2),push(p3),add(),divide(),restore();return}if(car(p1)===symbol(COSH)){p1=cadr(p1),push(p1),exponential(),push(p1),negate(),exponential(),add(),push_rational(1,2),multiply(),restore();return}if(car(p1)===symbol(SINH)){p1=cadr(p1),push(p1),exponential(),push(p1),negate(),exponential(),subtract(),push_rational(1,2),multiply(),restore();return}if(car(p1)===symbol(TANH)){p1=cadr(p1),push(p1),push_integer(2),multiply(),exponential(),p1=pop(),push(p1),push_integer(1),subtract(),push(p1),push_integer(1),add(),divide(),restore();return}if(iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),circexp(),p1=cdr(p1);list(tos-t),restore();return}if(p1.k===TENSOR){for(push(p1),copy_tensor(),p1=pop(),n=a=0,s=p1.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)push(p1.tensor.elem[n]),circexp(),p1.tensor.elem[n]=pop();push(p1),restore();return}return push(p1),restore()},Eval_clearall=function(){return do_clearall(),push(symbol(NIL))},do_clearall=function(){return test_flag===0&&clear_term(),do_clearPatterns(),clear_symbols(),defn(),codeGen=!1},clearRenamedVariablesToAvoidBindingToExternalScope=function(){var t,n,a,s;for(s=[],t=n=0,a=symtab.length;0<=a?n<a:n>a;t=0<=a?++n:--n)symtab[t].printname.indexOf("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE")!==-1?(symtab[t].k=SYM,symtab[t].printname="",binding[t]=symtab[t],s.push(isSymbolReclaimable[t]=!0)):s.push(void 0);return s},Eval_clear=function(){var t,n;for(p2=cdr(p1);iscons(p2);)n=car(p2),n.k!==SYM&&stop("symbol error"),t=symtab.indexOf(n),symtab[t].k=SYM,symtab[t].printname="",binding[t]=symtab[t],isSymbolReclaimable[t]=!0,p2=cdr(p2);return push(symbol(NIL))},DEBUG_CLOCKFORM=!1,Eval_clock=function(){return push(cadr(p1)),Eval(),clockform()},clockform=function(){return save(),p1=pop(),push(p1),abs(),DEBUG_CLOCKFORM&&console.log("clockform: abs of "+p1+" : "+stack[tos-1]),push_symbol(POWER),push_integer(-1),push(p1),arg(),DEBUG_CLOCKFORM&&console.log("clockform: arg of "+p1+" : "+stack[tos-1]),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),divide(),DEBUG_CLOCKFORM&&console.log("clockform: divide : "+stack[tos-1]),list(3),DEBUG_CLOCKFORM&&console.log("clockform: power : "+stack[tos-1]),multiply(),DEBUG_CLOCKFORM&&console.log("clockform: multiply : "+stack[tos-1]),restore()},Eval_coeff=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p3=pop(),p2=pop(),p1=pop(),p3===symbol(NIL)&&(p3=p2,p2=symbol(SYMBOL_X)),push(p1),push(p2),push(p3),power(),divide(),push(p2),filter()},coeff=function(t,n){var a,s,l,u;for(DEBUG&&console.log("coeff: "+t+" "+n),a=0;;){if(push(n),push(t),push(zero),subst(),Eval(),s=pop(),push(s),a++,push(n),push(s),subtract(),l=pop(),equal(l,zero))return DEBUG&&console.log("coeff: result: "+a),a;push(l),push(t),u=expanding,expanding=1,divide(),expanding=u,n=pop()}},Eval_cofactor=function(){var t,n,a;return t=0,n=0,a=0,push(cadr(p1)),Eval(),p2=pop(),istensor(p2)&&p2.tensor.ndim===2&&p2.tensor.dim[0]===p2.tensor.dim[1]||stop("cofactor: 1st arg: square matrix expected"),a=p2.tensor.dim[0],push(caddr(p1)),Eval(),t=pop_integer(),(t<1||t>a)&&stop("cofactor: 2nd arg: row index expected"),push(cadddr(p1)),Eval(),n=pop_integer(),(n<1||n>a)&&stop("cofactor: 3rd arg: column index expected"),cofactor(p2,a,t-1,n-1)},cofactor=function(t,n,a,s){var l,u,c,p,d,x;for(l=0,c=0,l=p=0,d=n;0<=d?p<d:p>d;l=0<=d?++p:--p)for(c=u=0,x=n;0<=x?u<x:u>x;c=0<=x?++u:--u)l!==a&&c!==s&&push(t.tensor.elem[n*l+c]);if(determinant(n-1),(a+s)%2)return negate()},Eval_condense=function(){return push(cadr(p1)),Eval(),Condense()},Condense=function(){var t;return t=expanding,expanding=0,save(),yycondense(),restore(),expanding=t},yycondense=function(){if(p1=pop(),car(p1)!==symbol(ADD)){push(p1);return}for(p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),DEBUG&&console.log("calculating gcd between: "+stack[tos-1]+" and "+stack[tos-2]),gcd(),DEBUG&&console.log("partial gcd: "+stack[tos-1]),p3=cdr(p3);for(DEBUG&&console.log("condense: this is the gcd of all the terms: "+stack[tos-1]),inverse(),p2=pop(),push(zero),p3=cdr(p1);iscons(p3);)push(p2),push(car(p3)),multiply_noexpand(),add(),p3=cdr(p3);return yyexpand(),push(p2),divide()},Eval_conj=function(){return push(cadr(p1)),Eval(),p1=pop(),push(p1),Find(p1,imaginaryunit)?conjugate():(polar(),conjugate(),clockform())},conjugate=function(){return push(imaginaryunit),push(imaginaryunit),negate(),subst(),Eval()},consCount=0,cons=function(){var t;if(consCount++,DEBUG&&console.log("cons tos: "+tos+" # "+consCount),t=new U,t.k=CONS,t.cons.cdr=pop(),t===t.cons.cdr){debugger;console.log("something wrong p == its cdr")}return t.cons.car=pop(),push(t)},Eval_contract=function(){return push(cadr(p1)),Eval(),cddr(p1)===symbol(NIL)?(push_integer(1),push_integer(2)):(push(caddr(p1)),Eval(),push(cadddr(p1)),Eval()),contract()},contract=function(){return save(),yycontract(),restore()},yycontract=function(){var t,n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j,Z,W,J,en,tn,Ct,Q;if(l=0,u=0,p=0,x=0,_=0,T=0,R=0,O=0,F=0,n=[],a=[],p3=pop(),p2=pop(),p1=pop(),!istensor(p1)){isZeroAtomOrTensor(p1)||stop("contract: tensor expected, 1st arg is not a tensor"),push(zero);return}for(push(p2),_=pop_integer(),push(p3),T=pop_integer(),O=p1.tensor.ndim,(_<1||_>O||T<1||T>O||_===T||p1.tensor.dim[_-1]!==p1.tensor.dim[T-1])&&stop("contract: index out of range"),_--,T--,R=p1.tensor.dim[_],F=1,u=z=0,Z=O;0<=Z?z<Z:z>Z;u=0<=Z?++z:--z)u!==_&&u!==T&&(F*=p1.tensor.dim[u]);for(p2=alloc_tensor(F),p2.tensor.ndim=O-2,p=0,u=c=0,W=O;0<=W?c<W:c>W;u=0<=W?++c:--c)u!==_&&u!==T&&(p2.tensor.dim[p++]=p1.tensor.dim[u]);for(t=p1.tensor.elem,s=p2.tensor.elem,u=d=0,J=O;0<=J?d<J:d>J;u=0<=J?++d:--d)n[u]=0,a[u]=p1.tensor.dim[u];for(u=S=0,en=F;0<=en?S<en:S>en;u=0<=en?++S:--S){for(push(zero),p=A=0,tn=R;0<=tn?A<tn:A>tn;p=0<=tn?++A:--A){for(n[_]=p,n[T]=p,l=0,x=D=0,Ct=O;0<=Ct?D<Ct:D>Ct;x=0<=Ct?++D:--D)l=l*a[x]+n[x];push(t[l]),add()}for(s[u]=pop(),p=j=Q=O-1;Q<=0?j<=0:j>=0;p=Q<=0?++j:--j)if(!(p===_||p===T)){if(++n[p]<a[p])break;n[p]=0}}return push(F===1?s[0]:p2)},Eval_cos=function(){return push(cadr(p1)),Eval(),cosine()},cosine=function(){return save(),p1=pop(),car(p1)===symbol(ADD)?cosine_of_angle_sum():cosine_of_angle(),restore()},cosine_of_angle_sum=function(){for(p2=cdr(p1);iscons(p2);){if(p4=car(p2),isnpi(p4)){push(p1),push(p4),subtract(),p3=pop(),push(p3),cosine(),push(p4),cosine(),multiply(),push(p3),sine(),push(p4),sine(),multiply(),subtract();return}p2=cdr(p2)}return cosine_of_angle()},cosine_of_angle=function(){var t,n;if(car(p1)===symbol(ARCCOS)){push(cadr(p1));return}if(isdouble(p1)){t=Math.cos(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isnegative(p1)&&(push(p1),negate(),p1=pop()),car(p1)===symbol(ARCTAN)){push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),push_rational(-1,2),power();return}if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),n=pop_integer(),n<0||isNaN(n)){push(symbol(COS)),push(p1),list(2);return}switch(n%360){case 90:case 270:return push_integer(0);case 60:case 300:return push_rational(1,2);case 120:case 240:return push_rational(-1,2);case 45:case 315:return push_rational(1,2),push_integer(2),push_rational(1,2),power(),multiply();case 135:case 225:return push_rational(-1,2),push_integer(2),push_rational(1,2),power(),multiply();case 30:case 330:return push_rational(1,2),push_integer(3),push_rational(1,2),power(),multiply();case 150:case 210:return push_rational(-1,2),push_integer(3),push_rational(1,2),power(),multiply();case 0:return push_integer(1);case 180:return push_integer(-1);default:return push(symbol(COS)),push(p1),list(2)}},Eval_cosh=function(){return push(cadr(p1)),Eval(),ycosh()},ycosh=function(){return save(),yycosh(),restore()},yycosh=function(){var t;if(t=0,p1=pop(),car(p1)===symbol(ARCCOSH)){push(cadr(p1));return}if(isdouble(p1)){t=Math.cosh(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(one);return}return push_symbol(COSH),push(p1),list(2)},Eval_decomp=function(){var t;return save(),console.log("Eval_decomp is being called!!!!!!!!!!!!!!!!!!!!"),t=tos,push(symbol(NIL)),push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)?guess():push(p1),decomp(!1),list(tos-t),restore()},pushTryNotToDuplicate=function(t){if(tos>0&&(DEBUG&&console.log("comparing "+t+" to: "+stack[tos-1]),equal(t,stack[tos-1]))){DEBUG&&console.log("skipping "+t+" because it's already on stack ");return}return push(t)},decomp=function(t){if(save(),p2=pop(),p1=pop(),DEBUG&&console.log("DECOMPOSING "+p1),t){if(!iscons(p1)){DEBUG&&console.log(" ground thing: "+p1),pushTryNotToDuplicate(p1),restore();return}}else if(Find(p1,p2)===0){DEBUG&&console.log(" entire expression is constant"),pushTryNotToDuplicate(p1),restore();return}if(isadd(p1)){decomp_sum(t),restore();return}if(ismultiply(p1)){decomp_product(t),restore();return}for(DEBUG&&console.log(" naive decomp"),p3=cdr(p1),DEBUG&&console.log("startig p3: "+p3);iscons(p3);)t&&push(car(p3)),DEBUG&&console.log("recursive decomposition"),push(car(p3)),DEBUG&&console.log("car(p3): "+car(p3)),push(p2),DEBUG&&console.log("p2: "+p2),decomp(t),p3=cdr(p3);return restore()},decomp_sum=function(t){var n;for(DEBUG&&console.log(" decomposing the sum "),n=0,p3=cdr(p1);iscons(p3);)(Find(car(p3),p2)||t)&&(push(car(p3)),push(p2),decomp(t)),p3=cdr(p3);for(n=tos,p3=cdr(p1);iscons(p3);)Find(car(p3),p2)===0&&pushTryNotToDuplicate(car(p3)),p3=cdr(p3);if(tos-n)return add_all(tos-n),p3=pop(),pushTryNotToDuplicate(p3),push(p3),negate()},decomp_product=function(t){var n;for(DEBUG&&console.log(" decomposing the product "),n=0,p3=cdr(p1);iscons(p3);)(Find(car(p3),p2)||t)&&(push(car(p3)),push(p2),decomp(t)),p3=cdr(p3);for(n=tos,p3=cdr(p1);iscons(p3);)Find(car(p3),p2)===0&&pushTryNotToDuplicate(car(p3)),p3=cdr(p3);if(tos-n)return multiply_all(tos-n)},define_user_function=function(){return p3=caadr(p1),p4=cdadr(p1),p5=caddr(p1),issymbol(p3)||stop("function name?"),car(p5)===symbol(EVAL)&&(push(cadr(p5)),Eval(),p5=pop()),push_symbol(FUNCTION),push(p5),push(p4),list(3),p5=pop(),set_binding(p3,p5),push_symbol(NIL)},Eval_function_reference=function(){return push(p1)},Eval_defint=function(){for(push(cadr(p1)),Eval(),p2=pop(),p1=cddr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1),Eval(),p3=pop(),push(car(p1)),p1=cdr(p1),Eval(),p4=pop(),push(car(p1)),p1=cdr(p1),Eval(),p5=pop(),push(p2),push(p3),integral(),p2=pop(),push(p2),push(p3),push(p5),subst(),Eval(),push(p2),push(p3),push(p4),subst(),Eval(),subtract(),p2=pop();return push(p2)},Eval_degree=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)?guess():push(p1),degree()},degree=function(){return save(),p2=pop(),p1=pop(),p3=zero,yydegree(p1),push(p3),restore()},yydegree=function(t){var n;if(equal(t,p2)){if(isZeroAtomOrTensor(p3))return p3=one}else if(car(t)===symbol(POWER)){if(equal(cadr(t),p2)&&isNumericAtom(caddr(t))&&lessp(p3,caddr(t)))return p3=caddr(t)}else if(iscons(t)){for(t=cdr(t),n=[];iscons(t);)yydegree(car(t)),n.push(t=cdr(t));return n}},Eval_denominator=function(){return push(cadr(p1)),Eval(),denominator()},denominator=function(){var t,n;if(t=0,n=pop(),car(n)===symbol(ADD)&&(push(n),rationalize(),n=pop()),car(n)===symbol(MULTIPLY)&&!isplusone(car(cdr(n)))){for(t=tos,n=cdr(n);iscons(n);)push(car(n)),denominator(),n=cdr(n);return multiply_all(tos-t)}else return isrational(n)?(push(n),mp_denominator()):car(n)===symbol(POWER)&&isnegativeterm(caddr(n))?(push(n),reciprocate()):push(one)},Eval_derivative=function(){var t,n,a,s,l;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?(guess(),push(symbol(NIL))):isNumericAtom(p2)?(guess(),push(p2)):(push(p2),p1=cdr(p1),push(car(p1)),Eval()),p5=pop(),p4=pop(),p3=pop();;){if(isNumericAtom(p5)?(push(p5),n=pop_integer(),isNaN(n)&&stop("nth derivative: check n")):n=1,push(p3),n>=0)for(a=0,s=n;0<=s?a<s:a>s;0<=s?++a:--a)push(p4),derivative();else for(n=-n,t=0,l=n;0<=l?t<l:t>l;0<=l?++t:--t)push(p4),integral();if(p3=pop(),p5===symbol(NIL))break;if(isNumericAtom(p5)){if(p1=cdr(p1),push(car(p1)),Eval(),p5=pop(),p5===symbol(NIL))break;isNumericAtom(p5)||(p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop())}else p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop()}return push(p3)},derivative=function(){return save(),p2=pop(),p1=pop(),isNumericAtom(p2)&&stop("undefined function"),istensor(p1)?istensor(p2)?d_tensor_tensor():d_tensor_scalar():istensor(p2)?d_scalar_tensor():d_scalar_scalar(),restore()},d_scalar_scalar=function(){return issymbol(p2)?d_scalar_scalar_1():(push(p1),push(p2),push(symbol(SECRETX)),subst(),push(symbol(SECRETX)),derivative(),push(symbol(SECRETX)),push(p2),subst())},d_scalar_scalar_1=function(){if(equal(p1,p2)){push(one);return}if(!iscons(p1)){push(zero);return}if(isadd(p1)){dsum();return}if(car(p1)===symbol(MULTIPLY)){dproduct();return}if(car(p1)===symbol(POWER)){dpower();return}if(car(p1)===symbol(DERIVATIVE)){dd();return}if(car(p1)===symbol(LOG)){dlog();return}if(car(p1)===symbol(SIN)){dsin();return}if(car(p1)===symbol(COS)){dcos();return}if(car(p1)===symbol(TAN)){dtan();return}if(car(p1)===symbol(ARCSIN)){darcsin();return}if(car(p1)===symbol(ARCCOS)){darccos();return}if(car(p1)===symbol(ARCTAN)){darctan();return}if(car(p1)===symbol(SINH)){dsinh();return}if(car(p1)===symbol(COSH)){dcosh();return}if(car(p1)===symbol(TANH)){dtanh();return}if(car(p1)===symbol(ARCSINH)){darcsinh();return}if(car(p1)===symbol(ARCCOSH)){darccosh();return}if(car(p1)===symbol(ARCTANH)){darctanh();return}if(car(p1)===symbol(ABS)){dabs();return}if(car(p1)===symbol(SGN)){dsgn();return}if(car(p1)===symbol(HERMITE)){dhermite();return}if(car(p1)===symbol(ERF)){derf();return}if(car(p1)===symbol(ERFC)){derfc();return}if(car(p1)===symbol(BESSELJ)){isZeroAtomOrTensor(caddr(p1))?dbesselj0():dbesseljn();return}if(car(p1)===symbol(BESSELY)){isZeroAtomOrTensor(caddr(p1))?dbessely0():dbesselyn();return}if(car(p1)===symbol(INTEGRAL)&&caddr(p1)===p2){derivative_of_integral();return}return dfunction()},dsum=function(){var t;for(t=tos,p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),derivative(),p1=cdr(p1);return add_all(tos-t)},dproduct=function(){var t,n,a,s,l,u,c;for(t=0,a=0,s=0,s=length(p1)-1,t=l=0,u=s;0<=u?l<u:l>u;t=0<=u?++l:--l){for(p3=cdr(p1),a=n=0,c=s;0<=c?n<c:n>c;a=0<=c?++n:--n)push(car(p3)),t===a&&(push(p2),derivative()),p3=cdr(p3);multiply_all(s)}return add_all(s)},dpower=function(){return push(caddr(p1)),push(cadr(p1)),divide(),push(cadr(p1)),push(p2),derivative(),multiply(),push(cadr(p1)),logarithm(),push(caddr(p1)),push(p2),derivative(),multiply(),add(),push(p1),multiply()},dlog=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),divide()},dd=function(){return push(cadr(p1)),push(p2),derivative(),p3=pop(),car(p3)===symbol(DERIVATIVE)?(push_symbol(DERIVATIVE),push_symbol(DERIVATIVE),push(cadr(p3)),lessp(caddr(p3),caddr(p1))?(push(caddr(p3)),list(3),push(caddr(p1))):(push(caddr(p1)),list(3),push(caddr(p3))),list(3)):(push(p3),push(caddr(p1)),derivative())},dfunction=function(){return p3=cdr(p1),p3===symbol(NIL)||Find(p3,p2)?(push_symbol(DERIVATIVE),push(p1),push(p2),list(3)):push(zero)},dsin=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),cosine(),multiply()},dcos=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),sine(),multiply(),negate()},dtan=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),cosine(),push_integer(-2),power(),multiply()},darcsin=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),push_rational(-1,2),power(),multiply()},darccos=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),push_rational(-1,2),power(),multiply(),negate()},darctan=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),inverse(),multiply(),simplify()},dsinh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ycosh(),multiply()},dcosh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ysinh(),multiply()},dtanh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ycosh(),push_integer(-2),power(),multiply()},darcsinh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(2),power(),push_integer(1),add(),push_rational(-1,2),power(),multiply()},darccosh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(2),power(),push_integer(-1),add(),push_rational(-1,2),power(),multiply()},darctanh=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),inverse(),multiply()},dabs=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),sgn(),multiply()},dsgn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),dirac(),multiply(),push_integer(2),multiply()},dhermite=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(2),push(caddr(p1)),multiply(),multiply(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),hermite(),multiply()},derf=function(){return push(cadr(p1)),push_integer(2),power(),push_integer(-1),multiply(),exponential(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(-1,2),power(),multiply(),push_integer(2),multiply(),push(cadr(p1)),push(p2),derivative(),multiply()},derfc=function(){return push(cadr(p1)),push_integer(2),power(),push_integer(-1),multiply(),exponential(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(-1,2),power(),multiply(),push_integer(-2),multiply(),push(cadr(p1)),push(p2),derivative(),multiply()},dbesselj0=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(1),besselj(),multiply(),push_integer(-1),multiply()},dbesseljn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),besselj(),push(caddr(p1)),push_integer(-1),multiply(),push(cadr(p1)),divide(),push(cadr(p1)),push(caddr(p1)),besselj(),multiply(),add(),multiply()},dbessely0=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(1),besselj(),multiply(),push_integer(-1),multiply()},dbesselyn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),bessely(),push(caddr(p1)),push_integer(-1),multiply(),push(cadr(p1)),divide(),push(cadr(p1)),push(caddr(p1)),bessely(),multiply(),add(),multiply()},derivative_of_integral=function(){return push(cadr(p1))},DET_check_arg=function(){return istensor(p1)?p1.tensor.ndim!==2||p1.tensor.dim[0]!==p1.tensor.dim[1]?0:1:0},det=function(){var t,n,a,s,l,u,c;if(n=0,s=0,save(),p1=pop(),DET_check_arg()===0){push_symbol(DET),push(p1),list(2),restore();return}for(s=p1.tensor.nelem,t=p1.tensor.elem,n=l=0,u=s;(0<=u?l<u:l>u)&&isNumericAtom(t[n]);n=0<=u?++l:--l);if(n===s)yydetg();else{for(n=a=0,c=p1.tensor.nelem;0<=c?a<c:a>c;n=0<=c?++a:--a)push(p1.tensor.elem[n]);determinant(p1.tensor.dim[0])}return restore()},determinant=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R;for(s=0,l=0,c=0,p=0,x=0,T=0,A=0,R=0,n=[],s=tos-t*t,l=d=0,_=t;0<=_?d<_:d>_;l=0<=_?++d:--d)n[l]=l,n[l+t]=0,n[l+t+t]=1;for(A=1,push(zero);;){for(push_integer(A===1?1:-1),l=u=0,S=t;0<=S?u<S:u>S;l=0<=S?++u:--u)p=t*n[l]+l,push(stack[s+p]),multiply();for(add(),c=t-1,T=0,a=!1;;){if(x=n[t+c]+n[t+t+c],x<0){n[t+t+c]=-n[t+t+c],c--;continue}if(x===c+1){if(c===0){a=!0;break}T++,n[t+t+c]=-n[t+t+c],c--;continue}break}if(a)break;R=n[c-n[t+c]+T],n[c-n[t+c]+T]=n[c-x+T],n[c-x+T]=R,n[t+c]=x,A=-A}return stack[s]=stack[tos-1],moveTos(s+1)},yydetg=function(){var t,n,a,s;for(t=0,n=0,n=p1.tensor.dim[0],t=a=0,s=n*n;0<=s?a<s:a>s;t=0<=s?++a:--a)push(p1.tensor.elem[t]);return lu_decomp(n),moveTos(tos-n*n),push(p1)},M=function(t,n,a,s){return stack[t+n*a+s]},setM=function(t,n,a,s,l){return stack[t+n*a+s]=l},lu_decomp=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z;for(n=0,a=0,s=0,u=0,a=tos-t*t,p1=one,n=x=0,_=t-1;0<=_?x<_:x>_;n=0<=_?++x:--x){if(equal(M(a,t,n,n),zero)){for(s=l=S=n+1,T=t;(S<=T?l<T:l>T)&&equal(M(a,t,s,n),zero);s=S<=T?++l:--l);if(s===t){p1=zero;break}for(u=c=A=n,R=t;A<=R?c<R:c>R;u=A<=R?++c:--c)p2=M(a,t,n,u),setM(a,t,n,u,M(a,t,s,u)),setM(a,t,s,u,p2);push(p1),negate(),p1=pop()}for(push(p1),push(M(a,t,n,n)),multiply(),p1=pop(),s=p=D=n+1,O=t;D<=O?p<O:p>O;s=D<=O?++p:--p)for(push(M(a,t,s,n)),push(M(a,t,n,n)),divide(),negate(),p2=pop(),setM(a,t,s,n,zero),u=d=F=n+1,z=t;F<=z?d<z:d>z;u=F<=z?++d:--d)push(M(a,t,n,u)),push(p2),multiply(),push(M(a,t,s,u)),add(),setM(a,t,s,u,pop())}return push(p1),push(M(a,t,t-1,t-1)),multiply(),p1=pop()},Eval_dirac=function(){return push(cadr(p1)),Eval(),dirac()},dirac=function(){return save(),ydirac(),restore()},ydirac=function(){if(p1=pop(),isdouble(p1))if(p1.d===0){push_integer(1);return}else{push_integer(0);return}if(isrational(p1))if(MZERO(mmul(p1.q.a,p1.q.b))){push_integer(1);return}else{push_integer(0);return}if(car(p1)===symbol(POWER)){push_symbol(DIRAC),push(cadr(p1)),list(2);return}if(isnegativeterm(p1)){push_symbol(DIRAC),push(p1),negate(),list(2);return}return(isnegativeterm(p1)||car(p1)===symbol(ADD)&&isnegativeterm(cadr(p1)))&&(push(p1),negate(),p1=pop()),push_symbol(DIRAC),push(p1),list(2)},divisors=function(){var t,n,a,s,l,u;for(n=0,t=0,a=0,save(),t=tos-1,divisors_onstack(),a=tos-t,u=stack.slice(t,t+a),u.sort(cmp_expr),stack=stack.slice(0,t).concat(u).concat(stack.slice(t+a)),p1=alloc_tensor(a),p1.tensor.ndim=1,p1.tensor.dim[0]=a,n=s=0,l=a;0<=l?s<l:s>l;n=0<=l?++s:--s)p1.tensor.elem[n]=stack[t+n];return moveTos(t),push(p1),restore()},divisors_onstack=function(){var t,n,a,s,l,u;if(t=0,n=0,a=0,s=0,save(),p1=pop(),t=tos,isNumericAtom(p1))push(p1),factor_small_number();else if(car(p1)===symbol(ADD))push(p1),__factor_add();else if(car(p1)===symbol(MULTIPLY))for(p1=cdr(p1),isNumericAtom(car(p1))&&(push(car(p1)),factor_small_number(),p1=cdr(p1));iscons(p1);)p2=car(p1),car(p2)===symbol(POWER)?(push(cadr(p2)),push(caddr(p2))):(push(p2),push(one)),p1=cdr(p1);else car(p1)===symbol(POWER)?(push(cadr(p1)),push(caddr(p1))):(push(p1),push(one));for(a=tos,push(one),gen(t,a),s=tos-a,n=l=0,u=s;0<=u?l<u:l>u;n=0<=u?++l:--l)stack[t+n]=stack[a+n];return moveTos(t+s),restore()},gen=function(t,n){var a,s,l,u;if(a=0,s=0,save(),p1=pop(),t===n){push(p1),restore();return}if(p2=stack[t+0],p3=stack[t+1],push(p3),a=pop_integer(),!isNaN(a))for(s=l=0,u=Math.abs(a);0<=u?l<=u:l>=u;s=0<=u?++l:--l)push(p1),push(p2),push_integer(sign(a)*s),power(),multiply(),gen(t+2,n);return restore()},__factor_add=function(){for(save(),p1=pop(),p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),gcd(),p3=cdr(p3);if(p2=pop(),isplusone(p2)){push(p1),push(one),restore();return}if(isNumericAtom(p2))push(p2),factor_small_number();else if(car(p2)===symbol(MULTIPLY))for(p3=cdr(p2),isNumericAtom(car(p3))?(push(car(p3)),factor_small_number()):(push(car(p3)),push(one)),p3=cdr(p3);iscons(p3);)push(car(p3)),push(one),p3=cdr(p3);else push(p2),push(one);for(push(p2),inverse(),p2=pop(),push(zero),p3=cdr(p1);iscons(p3);)push(p2),push(car(p3)),multiply(),add(),p3=cdr(p3);return push(one),restore()},dpow=function(){var t,n,a,s,l,u;if(t=0,n=0,a=0,s=0,l=0,u=0,s=pop_double(),a=pop_double(),a===0&&s<0&&stop("divide by zero"),a>=0||s%1===0){l=Math.pow(a,s),push_double(l);return}return l=Math.pow(Math.abs(a),s),u=Math.PI*s,s%.5===0?(t=0,n=Math.sin(u)):(t=Math.cos(u),n=Math.sin(u)),push_double(t*l),push_double(n*l),push(imaginaryunit),multiply(),add()},EIG_N=0,EIG_yydd=[],EIG_yyqq=[],Eval_eigen=function(){return EIG_check_arg()===0&&stop("eigen: argument is not a square matrix"),eigen(EIGEN),p1=usr_symbol("D"),set_binding(p1,p2),p1=usr_symbol("Q"),set_binding(p1,p3),push(symbol(NIL))},Eval_eigenval=function(){if(EIG_check_arg()===0){push_symbol(EIGENVAL),push(p1),list(2);return}return eigen(EIGENVAL),push(p2)},Eval_eigenvec=function(){if(EIG_check_arg()===0){push_symbol(EIGENVEC),push(p1),list(2);return}return eigen(EIGENVEC),push(p3)},EIG_check_arg=function(){var t,n,a,s,l,u,c,p,d,x,_;if(t=0,a=0,push(cadr(p1)),Eval(),yyfloat(),Eval(),p1=pop(),!istensor(p1))return 0;for((p1.tensor.ndim!==2||p1.tensor.dim[0]!==p1.tensor.dim[1])&&stop("eigen: argument is not a square matrix"),EIG_N=p1.tensor.dim[0],t=u=0,c=EIG_N;0<=c?u<c:u>c;t=0<=c?++u:--u)for(a=n=0,p=EIG_N;0<=p?n<p:n>p;a=0<=p?++n:--n)isdouble(p1.tensor.elem[EIG_N*t+a])||stop("eigen: matrix is not numerical");for(t=s=0,d=EIG_N-1;0<=d?s<d:s>d;t=0<=d?++s:--s)for(a=l=x=t+1,_=EIG_N;x<=_?l<_:l>_;a=x<=_?++l:--l)Math.abs(p1.tensor.elem[EIG_N*t+a].d-p1.tensor.elem[EIG_N*a+t].d)>1e-10&&stop("eigen: matrix is not symmetrical");return 1},eigen=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j,Z,W,J,en,tn;for(n=0,s=0,n=d=0,T=EIG_N*EIG_N;0<=T?d<T:d>T;n=0<=T?++d:--d)EIG_yydd[n]=0;for(n=a=0,A=EIG_N*EIG_N;0<=A?a<A:a>A;n=0<=A?++a:--a)EIG_yyqq[n]=0;for(n=l=0,D=EIG_N;0<=D?l<D:l>D;n=0<=D?++l:--l)for(EIG_yydd[EIG_N*n+n]=p1.tensor.elem[EIG_N*n+n].d,s=u=O=n+1,F=EIG_N;O<=F?u<F:u>F;s=O<=F?++u:--u)EIG_yydd[EIG_N*n+s]=p1.tensor.elem[EIG_N*n+s].d,EIG_yydd[EIG_N*s+n]=p1.tensor.elem[EIG_N*n+s].d;for(n=c=0,z=EIG_N;0<=z?c<z:c>z;n=0<=z?++c:--c)for(EIG_yyqq[EIG_N*n+n]=1,s=p=j=n+1,Z=EIG_N;j<=Z?p<Z:p>Z;s=j<=Z?++p:--p)EIG_yyqq[EIG_N*n+s]=0,EIG_yyqq[EIG_N*s+n]=0;for(n=x=0;x<100&&step()!==0;n=++x);if(n===100&&printstr(`
note: eigen did not converge
`),t===EIGEN||t===EIGENVAL)for(push(p1),copy_tensor(),p2=pop(),n=_=0,W=EIG_N;0<=W?_<W:_>W;n=0<=W?++_:--_)for(s=S=0,J=EIG_N;0<=J?S<J:S>J;s=0<=J?++S:--S)push_double(EIG_yydd[EIG_N*n+s]),p2.tensor.elem[EIG_N*n+s]=pop();if(t===EIGEN||t===EIGENVEC){for(push(p1),copy_tensor(),p3=pop(),en=[],n=tn=0,R=EIG_N;0<=R?tn<R:tn>R;n=0<=R?++tn:--tn)en.push(function(){var Ct,Q,on;for(Q=[],s=on=0,Ct=EIG_N;0<=Ct?on<Ct:on>Ct;s=0<=Ct?++on:--on)push_double(EIG_yyqq[EIG_N*n+s]),Q.push(p3.tensor.elem[EIG_N*n+s]=pop());return Q}());return en}},step=function(){var t,n,a,s,l,u,c,p;for(n=0,s=0,t=0,n=l=0,u=EIG_N-1;0<=u?l<u:l>u;n=0<=u?++l:--l)for(s=a=c=n+1,p=EIG_N;c<=p?a<p:a>p;s=c<=p?++a:--a)EIG_yydd[EIG_N*n+s]!==0&&(step2(n,s),t++);return t},step2=function(t,n){var a,s,l,u,c,p,d,x,_,S,T,A,R;for(c=0,A=0,R=0,a=0,s=0,S=0,T=0,R=.5*(EIG_yydd[EIG_N*t+t]-EIG_yydd[EIG_N*n+n])/EIG_yydd[EIG_N*t+n],A=1/(Math.abs(R)+Math.sqrt(R*R+1)),R<0&&(A=-A),a=1/Math.sqrt(A*A+1),S=A*a,c=p=0,d=EIG_N;0<=d?p<d:p>d;c=0<=d?++p:--p)s=EIG_yydd[EIG_N*t+c],T=EIG_yydd[EIG_N*n+c],EIG_yydd[EIG_N*t+c]=a*s+S*T,EIG_yydd[EIG_N*n+c]=a*T-S*s;for(c=l=0,x=EIG_N;0<=x?l<x:l>x;c=0<=x?++l:--l)s=EIG_yydd[EIG_N*c+t],T=EIG_yydd[EIG_N*c+n],EIG_yydd[EIG_N*c+t]=a*s+S*T,EIG_yydd[EIG_N*c+n]=a*T-S*s;for(c=u=0,_=EIG_N;0<=_?u<_:u>_;c=0<=_?++u:--u)s=EIG_yyqq[EIG_N*t+c],T=EIG_yyqq[EIG_N*n+c],EIG_yyqq[EIG_N*t+c]=a*s+S*T,EIG_yyqq[EIG_N*n+c]=a*T-S*s;return EIG_yydd[EIG_N*t+n]=0,EIG_yydd[EIG_N*n+t]=0},Eval_erf=function(){return push(cadr(p1)),Eval(),yerf()},yerf=function(){return save(),yyerf(),restore()},yyerf=function(){var t;if(t=0,p1=pop(),isdouble(p1)){t=1-erfc(p1.d),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(zero);return}if(isnegativeterm(p1)){push_symbol(ERF),push(p1),negate(),list(2),negate();return}push_symbol(ERF),push(p1),list(2)},Eval_erfc=function(){return push(cadr(p1)),Eval(),yerfc()},yerfc=function(){return save(),yyerfc(),restore()},yyerfc=function(){var t;if(t=0,p1=pop(),isdouble(p1)){t=erfc(p1.d),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(one);return}push_symbol(ERFC),push(p1),list(2)},erfc=function(t){var n,a,s;return t===0?1:(a=0,s=0,n=0,s=Math.abs(t),a=1/(1+.5*s),n=a*Math.exp(-s*s-1.26551223+a*(1.00002368+a*(.37409196+a*(.09678418+a*(-.18628806+a*(.27886807+a*(-1.13520398+a*(1.48851587+a*(-.82215223+a*.17087277))))))))),t>=0?n:2-n)},Eval=function(){var t;if(check_esc_flag(),save(),p1=pop(),p1==null)debugger;switch(!evaluatingAsFloats&&isfloating(p1)&&(t=!0,evaluatingAsFloats++),p1.k){case CONS:Eval_cons();break;case NUM:evaluatingAsFloats?push_double(convert_rational_to_double(p1)):push(p1);break;case DOUBLE:case STR:push(p1);break;case TENSOR:Eval_tensor();break;case SYM:Eval_sym();break;default:stop("atom?")}return t&&evaluatingAsFloats--,restore()},Eval_sym=function(){var t,n,a,s,l,u;if(iskeyword(p1)){push(p1),push(symbol(LAST)),list(2),Eval();return}else if(p1===symbol(PI)&&evaluatingAsFloats){push_double(Math.PI);return}if(p2=get_binding(p1),DEBUG&&console.log("looked up: "+p1+" which contains: "+p2),push(p2),p1!==p2){if(s=chainOfUserSymbolsNotFunctionsBeingEvaluated.indexOf(p1),s!==-1){for(t="",n=a=l=s,u=chainOfUserSymbolsNotFunctionsBeingEvaluated.length;l<=u?a<u:a>u;n=l<=u?++a:--a)t+=chainOfUserSymbolsNotFunctionsBeingEvaluated[n].printname+" -> ";t+=p1.printname,stop("recursive evaluation of symbols: "+t);return}return chainOfUserSymbolsNotFunctionsBeingEvaluated.push(p1),Eval(),chainOfUserSymbolsNotFunctionsBeingEvaluated.pop()}},Eval_cons=function(){var t;if(t=car(p1),car(t)===symbol(EVAL)){Eval_user_function();return}switch(issymbol(t)||stop("cons?"),symnum(t)){case ABS:return Eval_abs();case ADD:return Eval_add();case ADJ:return Eval_adj();case AND:return Eval_and();case ARCCOS:return Eval_arccos();case ARCCOSH:return Eval_arccosh();case ARCSIN:return Eval_arcsin();case ARCSINH:return Eval_arcsinh();case ARCTAN:return Eval_arctan();case ARCTANH:return Eval_arctanh();case ARG:return Eval_arg();case ATOMIZE:return Eval_atomize();case BESSELJ:return Eval_besselj();case BESSELY:return Eval_bessely();case BINDING:return Eval_binding();case BINOMIAL:return Eval_binomial();case CEILING:return Eval_ceiling();case CHECK:return Eval_check();case CHOOSE:return Eval_choose();case CIRCEXP:return Eval_circexp();case CLEAR:return Eval_clear();case CLEARALL:return Eval_clearall();case CLEARPATTERNS:return Eval_clearpatterns();case CLOCK:return Eval_clock();case COEFF:return Eval_coeff();case COFACTOR:return Eval_cofactor();case CONDENSE:return Eval_condense();case CONJ:return Eval_conj();case CONTRACT:return Eval_contract();case COS:return Eval_cos();case COSH:return Eval_cosh();case DECOMP:return Eval_decomp();case DEGREE:return Eval_degree();case DEFINT:return Eval_defint();case DENOMINATOR:return Eval_denominator();case DERIVATIVE:return Eval_derivative();case DET:return Eval_det();case DIM:return Eval_dim();case DIRAC:return Eval_dirac();case DIVISORS:return Eval_divisors();case DO:return Eval_do();case DOT:return Eval_inner();case DRAW:return Eval_draw();case DSOLVE:return Eval_dsolve();case EIGEN:return Eval_eigen();case EIGENVAL:return Eval_eigenval();case EIGENVEC:return Eval_eigenvec();case ERF:return Eval_erf();case ERFC:return Eval_erfc();case EVAL:return Eval_Eval();case EXP:return Eval_exp();case EXPAND:return Eval_expand();case EXPCOS:return Eval_expcos();case EXPSIN:return Eval_expsin();case FACTOR:return Eval_factor();case FACTORIAL:return Eval_factorial();case FACTORPOLY:return Eval_factorpoly();case FILTER:return Eval_filter();case FLOATF:return Eval_float();case APPROXRATIO:return Eval_approxratio();case FLOOR:return Eval_floor();case FOR:return Eval_for();case FUNCTION:return Eval_function_reference();case GAMMA:return Eval_gamma();case GCD:return Eval_gcd();case HERMITE:return Eval_hermite();case HILBERT:return Eval_hilbert();case IMAG:return Eval_imag();case INDEX:return Eval_index();case INNER:return Eval_inner();case INTEGRAL:return Eval_integral();case INV:return Eval_inv();case INVG:return Eval_invg();case ISINTEGER:return Eval_isinteger();case ISPRIME:return Eval_isprime();case LAGUERRE:return Eval_laguerre();case LCM:return Eval_lcm();case LEADING:return Eval_leading();case LEGENDRE:return Eval_legendre();case LOG:return Eval_log();case LOOKUP:return Eval_lookup();case MOD:return Eval_mod();case MULTIPLY:return Eval_multiply();case NOT:return Eval_not();case NROOTS:return Eval_nroots();case NUMBER:return Eval_number();case NUMERATOR:return Eval_numerator();case OPERATOR:return Eval_operator();case OR:return Eval_or();case OUTER:return Eval_outer();case PATTERN:return Eval_pattern();case PATTERNSINFO:return Eval_patternsinfo();case POLAR:return Eval_polar();case POWER:return Eval_power();case PRIME:return Eval_prime();case PRINT:return Eval_print();case PRINT2DASCII:return Eval_print2dascii();case PRINTFULL:return Eval_printcomputer();case PRINTLATEX:return Eval_printlatex();case PRINTLIST:return Eval_printlist();case PRINTPLAIN:return Eval_printhuman();case PRODUCT:return Eval_product();case QUOTE:return Eval_quote();case QUOTIENT:return Eval_quotient();case RANK:return Eval_rank();case RATIONALIZE:return Eval_rationalize();case REAL:return Eval_real();case ROUND:return Eval_round();case YYRECT:return Eval_rect();case ROOTS:return Eval_roots();case SETQ:return Eval_setq();case SGN:return Eval_sgn();case SILENTPATTERN:return Eval_silentpattern();case SIMPLIFY:return Eval_simplify();case SIN:return Eval_sin();case SINH:return Eval_sinh();case SHAPE:return Eval_shape();case SQRT:return Eval_sqrt();case STOP:return Eval_stop();case SUBST:return Eval_subst();case SUM:return Eval_sum();case SYMBOLSINFO:return Eval_symbolsinfo();case TAN:return Eval_tan();case TANH:return Eval_tanh();case TAYLOR:return Eval_taylor();case TEST:return Eval_test();case TESTEQ:return Eval_testeq();case TESTGE:return Eval_testge();case TESTGT:return Eval_testgt();case TESTLE:return Eval_testle();case TESTLT:return Eval_testlt();case TRANSPOSE:return Eval_transpose();case UNIT:return Eval_unit();case ZERO:return Eval_zero();default:return Eval_user_function()}},Eval_binding=function(){return push(get_binding(cadr(p1)))},Eval_check=function(){var t;return t=isZeroLikeOrNonZeroLikeOrUndetermined(cadr(p1)),t==null?push(p1):push_integer(t)},Eval_det=function(){return push(cadr(p1)),Eval(),det()},Eval_dim=function(){var t;return push(cadr(p1)),Eval(),p2=pop(),iscons(cddr(p1))?(push(caddr(p1)),Eval(),t=pop_integer()):t=1,istensor(p2)?t<1||t>p2.tensor.ndim?push(p1):push_integer(p2.tensor.dim[t-1]):push_integer(1)},Eval_divisors=function(){return push(cadr(p1)),Eval(),divisors()},Eval_do=function(){var t;for(push(car(p1)),p1=cdr(p1),t=[];iscons(p1);)pop(),push(car(p1)),Eval(),t.push(p1=cdr(p1));return t},Eval_dsolve=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),dsolve()},Eval_Eval=function(){for(push(cadr(p1)),Eval(),p1=cddr(p1);iscons(p1);)push(car(p1)),Eval(),push(cadr(p1)),Eval(),subst(),p1=cddr(p1);return Eval()},Eval_exp=function(){return push(cadr(p1)),Eval(),exponential()},Eval_factorial=function(){return push(cadr(p1)),Eval(),factorial()},Eval_factorpoly=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),factorpoly(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),factorpoly(),t.push(p1=cdr(p1));return t},Eval_hermite=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),hermite()},Eval_hilbert=function(){return push(cadr(p1)),Eval(),hilbert()},Eval_index=function(){var t,n,a;if(t=tos,n=p1,p1=cdr(p1),push(car(p1)),Eval(),a=stack[tos-1],isNumericAtom(a)&&stop("trying to access a scalar as a tensor"),!istensor(a)){moveTos(t),push(n);return}for(p1=cdr(p1);iscons(p1);){if(push(car(p1)),Eval(),!isintegerorintegerfloat(stack[tos-1])){moveTos(t),push(n);return}p1=cdr(p1)}return index_function(tos-t)},Eval_inv=function(){return push(cadr(p1)),Eval(),inv()},Eval_invg=function(){return push(cadr(p1)),Eval(),invg()},Eval_isinteger=function(){var t;if(push(cadr(p1)),Eval(),p1=pop(),isrational(p1)){isinteger(p1)?push(one):push(zero);return}if(isdouble(p1)){t=Math.floor(p1.d),t===p1.d?push(one):push(zero);return}return push_symbol(ISINTEGER),push(p1),list(2)},Eval_number=function(){return push(cadr(p1)),Eval(),p1=pop(),p1.k===NUM||p1.k===DOUBLE?push_integer(1):push_integer(0)},Eval_operator=function(){var t;for(t=tos,push_symbol(OPERATOR),p1=cdr(p1);iscons(p1);)push(car(p1)),Eval(),p1=cdr(p1);return list(tos-t)},Eval_quote=function(){return push(cadr(p1))},Eval_rank=function(){return push(cadr(p1)),Eval(),p1=pop(),istensor(p1)?push_integer(p1.tensor.ndim):push(zero)},Eval_setq=function(){if(caadr(p1)===symbol(INDEX)){setq_indexed();return}if(iscons(cadr(p1))){define_user_function();return}return issymbol(cadr(p1))||stop("symbol assignment: error in symbol"),push(caddr(p1)),Eval(),p2=pop(),set_binding(cadr(p1),p2),push(symbol(NIL))},setq_indexed=function(){var t;for(p4=cadadr(p1),issymbol(p4)||stop("indexed assignment: expected a symbol name"),t=tos,push(caddr(p1)),Eval(),p2=cdadr(p1);iscons(p2);)push(car(p2)),Eval(),p2=cdr(p2);return set_component(tos-t),p3=pop(),set_binding(p4,p3),push(symbol(NIL))},Eval_sqrt=function(){return push(cadr(p1)),Eval(),push_rational(1,2),power()},Eval_stop=function(){return stop("user stop")},Eval_subst=function(){return push(cadddr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadr(p1)),Eval(),subst(),Eval()},Eval_unit=function(){var t,n,a,s;if(t=0,n=0,push(cadr(p1)),Eval(),n=pop_integer(),isNaN(n)){push(p1);return}if(n<1){push(p1);return}for(p1=alloc_tensor(n*n),p1.tensor.ndim=2,p1.tensor.dim[0]=n,p1.tensor.dim[1]=n,t=a=0,s=n;0<=s?a<s:a>s;t=0<=s?++a:--a)p1.tensor.elem[n*t+t]=one;return check_tensor_dimensions(p1),push(p1)},Eval_predicate=function(){return save(),p1=top(),car(p1)===symbol(SETQ)&&(pop(),push_symbol(TESTEQ),push(cadr(p1)),push(caddr(p1)),list(3)),Eval(),restore()},Eval_expand=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),expand()},expand=function(){var t;if(save(),p9=pop(),p5=pop(),istensor(p5)){expand_tensor(),restore();return}if(car(p5)===symbol(ADD)){for(push_integer(0),p1=cdr(p5);iscons(p1);)push(car(p1)),push(p9),expand(),add(),p1=cdr(p1);restore();return}if(push(p5),numerator(),p3=pop(),push(p5),denominator(),p2=pop(),remove_negative_exponents(),push(p3),push(p2),push(p9),(isone(p3)||isone(p2))&&(!ispolyexpandedform(p2,p9)||isone(p2))){pop(),pop(),pop(),push(p5),restore();return}if(divpoly(),p7=pop(),push(p3),push(p2),push(p7),multiply(),subtract(),p3=pop(),isZeroAtomOrTensor(p3)){push(p7),restore();return}return push(p2),push(p9),factorpoly(),p2=pop(),expand_get_C(),expand_get_B(),expand_get_A(),istensor(p4)?(push(p4),t=expanding,expanding=1,inv(),expanding=t,push(p3),inner(),push(p2),inner()):(push(p3),push(p4),t=expanding,expanding=1,divide(),expanding=t,push(p2),multiply()),push(p7),add(),restore()},expand_tensor=function(){var t,n,a;for(t=0,push(p5),copy_tensor(),p5=pop(),t=n=0,a=p5.tensor.nelem;0<=a?n<a:n>a;t=0<=a?++n:--n)push(p5.tensor.elem[t]),push(p9),expand(),p5.tensor.elem[t]=pop();return push(p5)},remove_negative_exponents=function(){var t,n,a,s,l,u,c;for(t=0,n=0,a=0,s=0,l=0,t=tos,factors(p2),factors(p3),l=tos-t,a=0,n=u=0,c=l;0<=c?u<c:u>c;n=0<=c?++u:--u)p1=stack[t+n],car(p1)===symbol(POWER)&&cadr(p1)===p9&&(push(caddr(p1)),s=pop_integer(),!isNaN(s)&&s<a&&(a=s));if(moveTos(t),a!==0)return push(p2),push(p9),push_integer(-a),power(),multiply(),p2=pop(),push(p3),push(p9),push_integer(-a),power(),multiply(),p3=pop()},expand_get_C=function(){var t,n,a,s,l,u,c,p,d,x;if(n=0,a=0,l=0,u=0,n=tos,car(p2)===symbol(MULTIPLY))for(p1=cdr(p2);iscons(p1);)p5=car(p1),expand_get_CF(),p1=cdr(p1);else p5=p2,expand_get_CF();if(u=tos-n,u===1){p4=pop();return}for(p4=alloc_tensor(u*u),p4.tensor.ndim=2,p4.tensor.dim[0]=u,p4.tensor.dim[1]=u,t=n,a=c=0,d=u;0<=d?c<d:c>d;a=0<=d?++c:--c)for(l=s=0,x=u;0<=x?s<x:s>x;l=0<=x?++s:--s)push(stack[t+l]),push(p9),push_integer(a),power(),p=expanding,expanding=1,divide(),expanding=p,push(p9),filter(),p4.tensor.elem[u*a+l]=pop();return moveTos(tos-u)},expand_get_CF=function(){var t,n,a,s,l,u,c,p;if(t=0,n=0,a=0,s=0,!!Find(p5,p9)){for(u=expanding,expanding=1,trivial_divide(),expanding=u,car(p5)===symbol(POWER)?(push(caddr(p5)),s=pop_integer(),p6=cadr(p5)):(s=1,p6=p5),push(p6),push(p9),degree(),t=pop_integer(),p=[],n=l=0,c=s;0<=c?l<c:l>c;n=0<=c?++l:--l)p.push(function(){var d,x,_;for(_=[],a=d=0,x=t;0<=x?d<x:d>x;a=0<=x?++d:--d)push(p8),push(p6),push_integer(n),power(),u=expanding,expanding=1,multiply(),expanding=u,push(p9),push_integer(a),power(),u=expanding,expanding=1,multiply(),_.push(expanding=u);return _}());return p}},trivial_divide=function(){var t;if(t=0,car(p2)===symbol(MULTIPLY)){for(t=tos,p0=cdr(p2);iscons(p0);)equal(car(p0),p5)||(push(car(p0)),Eval()),p0=cdr(p0);multiply_all(tos-t)}else push_integer(1);return p8=pop()},expand_get_B=function(){var t,n,a,s,l;if(t=0,n=0,!!istensor(p4)){for(n=p4.tensor.dim[0],p8=alloc_tensor(n),p8.tensor.ndim=1,p8.tensor.dim[0]=n,t=a=0,l=n;0<=l?a<l:a>l;t=0<=l?++a:--a)push(p3),push(p9),push_integer(t),power(),s=expanding,expanding=1,divide(),expanding=s,push(p9),filter(),p8.tensor.elem[t]=pop();return p3=p8}},expand_get_A=function(){var t,n,a,s,l;if(t=0,n=0,a=0,!istensor(p4)){push(p2),reciprocate(),p2=pop();return}if(t=tos,car(p2)===symbol(MULTIPLY))for(p8=cdr(p2);iscons(p8);)p5=car(p8),expand_get_AF(),p8=cdr(p8);else p5=p2,expand_get_AF();for(a=tos-t,p8=alloc_tensor(a),p8.tensor.ndim=1,p8.tensor.dim[0]=a,n=s=0,l=a;0<=l?s<l:s>l;n=0<=l?++s:--s)p8.tensor.elem[n]=stack[t+n];return moveTos(t),p2=p8},expand_get_AF=function(){var t,n,a,s,l,u,c;if(t=0,n=0,a=0,s=1,!!Find(p5,p9)){for(car(p5)===symbol(POWER)&&(push(caddr(p5)),s=pop_integer(),p5=cadr(p5)),push(p5),push(p9),degree(),t=pop_integer(),c=[],n=l=u=s;u<=0?l<0:l>0;n=u<=0?++l:--l)c.push(function(){var p,d,x;for(x=[],a=p=0,d=t;0<=d?p<d:p>d;a=0<=d?++p:--p)push(p5),push_integer(n),power(),reciprocate(),push(p9),push_integer(a),power(),x.push(multiply());return x}());return c}},Eval_expcos=function(){return push(cadr(p1)),Eval(),expcos()},expcos=function(){return save(),p1=pop(),push(imaginaryunit),push(p1),multiply(),exponential(),push_rational(1,2),multiply(),push(imaginaryunit),negate(),push(p1),multiply(),exponential(),push_rational(1,2),multiply(),add(),restore()},Eval_expsin=function(){return push(cadr(p1)),Eval(),expsin()},expsin=function(){return save(),p1=pop(),push(imaginaryunit),push(p1),multiply(),exponential(),push(imaginaryunit),divide(),push_rational(1,2),multiply(),push(imaginaryunit),negate(),push(p1),multiply(),exponential(),push(imaginaryunit),divide(),push_rational(1,2),multiply(),subtract(),restore()},Eval_factor=function(){var t;for(push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),factor(),p1=cdddr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),factor_again(),t.push(p1=cdr(p1));return t},factor_again=function(){var t,n;if(save(),p2=pop(),p1=pop(),t=tos,car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),factor_term(),p1=cdr(p1);else push(p1),push(p2),factor_term();return n=tos-t,n>1&&multiply_all_noexpand(n),restore()},factor_term=function(){if(save(),factorpoly(),p1=pop(),car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else push(p1);return restore()},factor=function(){return save(),p2=pop(),p1=pop(),isinteger(p1)?(push(p1),factor_number()):(push(p1),push(p2),factorpoly()),restore()},factor_small_number=function(){var t,n,a,s,l,u;for(a=0,save(),s=pop_integer(),isNaN(s)&&stop("number too big to factor"),s<0&&(s=-s),a=l=0,u=MAXPRIMETAB;(0<=u?l<u:l>u)&&(t=primetab[a],!(t>s/t));a=0<=u?++l:--l){for(n=0;s%t===0;)s/=t,n++;n&&(push_integer(t),push_integer(n))}return s>1&&(push_integer(s),push_integer(1)),restore()},factorial=function(){var t;if(t=0,save(),p1=pop(),push(p1),t=pop_integer(),t<0||isNaN(t)){push_symbol(FACTORIAL),push(p1),list(2),restore();return}return bignum_factorial(t),restore()},factorpoly=function(){var t,n;return DEBUG&&console.log("factorpoly: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),save(),n=pop(),t=pop(),!Find(t,n)||!ispolyexpandedform(t,n)||!issymbol(n)?push(t):yyfactorpoly(n,t),restore()},yyfactorpoly=function(t,n){var a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j,Z,W,J,en,tn,Ct,Q,on,gn;for(DEBUG&&(d=t,on=n,console.log("yyfactorpoly: "+d+" "+on)),save(),S=tos,isfloating(n)&&stop("floating point numbers in polynomial"),z=tos,p=coeff(t,n)-1,DEBUG&&console.log("yyfactorpoly: "+d+" "+on+" factpoly_expo before rationalize_coefficients: "+p),F=rationalize_coefficients(S),DEBUG&&console.log("yyfactorpoly: "+d+" "+on+" factpoly_expo  after rationalize_coefficients: "+p),gn="real",Ct=null;p>0;)if(DEBUG&&console.log("yyfactorpoly: "+d+" "+on+" factpoly_expo inside while loop: "+p),isZeroAtomOrTensor(stack[z+0])?(DEBUG&&console.log("yyfactorpoly: "+d+" "+on+" isZeroAtomOrTensor"),a=one,l=zero):gn==="real"?[_,a,l]=get_factor_from_real_root(t,p,z):gn==="complex"&&([x,a]=get_factor_from_complex_root(Ct,p,z)),gn==="real")if(_===0){gn="complex";continue}else{for(push(a),push(t),multiply(),push(l),add(),s=pop(),DEBUG&&console.log("yyfactorpoly: "+d+" "+on+` success
FACTOR=`+s),push(F),push(s),multiply_noexpand(),F=pop(),yydivpoly(p,z,a,l);p&&isZeroAtomOrTensor(stack[z+p]);)p--;for(push(zero),T=O=0,W=p;0<=W?O<=W:O>=W;T=0<=W?++O:--O)push(stack[z+T]),push(t),push_integer(T),power(),multiply(),add();Ct=pop()}else if(gn==="complex"){if(x===0)break;if(push(a),push(t),subtract(),push(a),conjugate(),push(t),subtract(),multiply(),Q=pop(),DEBUG&&console.log("yyfactorpoly: "+d+" "+on+` success
FACTOR=`+Q),push(F),Z=pop(),push(F),push(Q),multiply_noexpand(),F=pop(),Ct==null){for(push(zero),T=A=0,J=p;0<=J?A<=J:A>=J;T=0<=J?++A:--A)push(stack[z+T]),push(t),push_integer(T),power(),multiply(),add();Ct=pop()}if(c=Ct,push(c),push(Q),push(t),divpoly(),Ct=pop(),push(Ct),push(Q),multiply(),u=pop(),!equal(u,c)){DEBUG&&console.log("we found a polynomial based on complex root and its conj but it doesn't divide the poly, quitting"),DEBUG&&console.log("so just returning previousFactorisation times dividend: "+Z+" * "+c),push(Z),push(c),j=expanding,expanding=0,yycondense(),expanding=j,multiply_noexpand(),F=pop(),stack[S]=F,moveTos(S+1),restore();return}for(T=R=0,en=p;0<=en?R<=en:R>=en;T=0<=en?++R:--R)pop();coeff(t,Ct),p-=2}for(DEBUG&&console.log("yyfactorpoly: "+d+" "+on+" building the remaining unfactored part of the polynomial"),push(zero),T=D=0,tn=p;0<=tn?D<=tn:D>=tn;T=0<=tn?++D:--D)push(stack[z+T]),push(t),push_integer(T),power(),multiply(),add();return n=pop(),DEBUG&&console.log("yyfactorpoly: "+d+" "+on+" remaining unfactored part of the polynomial: "+n.toString()),push(n),j=expanding,expanding=0,yycondense(),expanding=j,n=pop(),DEBUG&&console.log("yyfactorpoly: "+d+" "+on+" new poly with extracted common factor: "+n.toString()),p>0&&isnegativeterm(stack[z+p])&&(push(n),negate(),n=pop(),push(F),negate_noexpand(),F=pop()),push(F),push(n),multiply_noexpand(),F=pop(),DEBUG&&console.log("yyfactorpoly: "+d+" "+on+" result: "+F),stack[S]=F,moveTos(S+1),restore()},rationalize_coefficients=function(t){var n,a,s,l,u,c,p,d,x;for(l=one,n=s=c=t,p=tos;c<=p?s<p:s>p;n=c<=p?++s:--s)push(stack[n]),denominator(),push(l),lcm(),l=pop();for(n=a=d=t,x=tos;d<=x?a<x:a>x;n=d<=x?++a:--a)push(l),push(stack[n]),multiply(),stack[n]=pop();return push(l),reciprocate(),u=pop(),DEBUG&&console.log("rationalize_coefficients result: "+u.toString()),u},get_factor_from_real_root=function(t,n,a){var s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j,Z,W,J,en,tn,Ct;if(DEBUG&&console.log("get_factor_from_real_root"),p=0,c=0,s=0,l=0,T=0,A=0,DEBUG){for(push(zero),p=R=0,O=n;0<=O?R<=O:R>=O;p=0<=O?++R:--R)push(stack[a+p]),push(t),push_integer(p),power(),multiply(),add();D=pop(),console.log("POLY="+D)}if(c=tos,l=tos,push(stack[a+n]),divisors_onstack(),A=tos-l,s=tos,push(stack[a+0]),divisors_onstack(),T=tos-s,DEBUG){for(console.log("divisors of base term"),p=d=0,F=T;0<=F?d<F:d>F;p=0<=F?++d:--d)console.log(", "+stack[s+p]);for(console.log("divisors of leading term"),p=x=0,z=A;0<=z?x<z:x>z;p=0<=z?++x:--x)console.log(", "+stack[l+p])}for(W=_=0,j=A;0<=j?_<j:_>j;W=0<=j?++_:--_)for(J=S=0,Z=T;0<=Z?S<Z:S>Z;J=0<=Z?++S:--S){if(tn=stack[l+W],en=stack[s+J],push(en),push(tn),divide(),negate(),Ct=pop(),u=Evalpoly(n,a,Ct),DEBUG&&(console.log("try A="+tn),console.log(", B="+en),console.log(", root "+t),console.log("=-B/A="+Ct),console.log(", POLY("+Ct),console.log(")="+u)),isZeroAtomOrTensor(u))return moveTos(c),DEBUG&&console.log("get_factor_from_real_root returning 1"),[1,tn,en];if(push(en),negate(),en=pop(),push(Ct),negate(),Ct=pop(),u=Evalpoly(n,a,Ct),DEBUG&&(console.log("try A="+tn),console.log(", B="+en),console.log(", root "+t),console.log("=-B/A="+Ct),console.log(", POLY("+Ct),console.log(")="+u)),isZeroAtomOrTensor(u))return moveTos(c),DEBUG&&console.log("get_factor_from_real_root returning 1"),[1,tn,en]}return moveTos(c),DEBUG&&console.log("get_factor_from_real_root returning"),[0,null,null]},get_factor_from_complex_root=function(t,n,a){var s,l,u,c,p,d,x;if(l=0,n<=2)return DEBUG&&console.log("no more factoring via complex roots to be found in polynomial of degree <= 2"),[0,null];if(DEBUG&&console.log("complex root finding for POLY="+t),l=tos,push_integer(-1),push_rational(2,3),power(),rect(),x=pop(),DEBUG&&console.log("complex root finding: trying with "+x),push(x),s=Evalpoly(n,a,x),DEBUG&&console.log("complex root finding result: "+s),isZeroAtomOrTensor(s))return moveTos(l),DEBUG&&console.log("get_factor_from_complex_root returning 1"),[1,x];if(push_integer(1),push_rational(2,3),power(),rect(),x=pop(),DEBUG&&console.log("complex root finding: trying with "+x),push(x),s=Evalpoly(n,a,x),DEBUG&&console.log("complex root finding result: "+s),isZeroAtomOrTensor(s))return moveTos(l),DEBUG&&console.log("get_factor_from_complex_root returning 1"),[1,x];for(p=c=-10;c<=10;p=++c)for(d=u=1;u<=5;d=++u)if(push_integer(p),push_integer(d),push(imaginaryunit),multiply(),add(),rect(),x=pop(),DEBUG&&console.log("complex root finding: trying simple complex combination "+x),push(x),s=Evalpoly(n,a,x),isZeroAtomOrTensor(s))return moveTos(l),DEBUG&&console.log("found complex root: "+s),[1,x];return moveTos(l),DEBUG&&console.log("get_factor_from_complex_root returning 0"),[0,null]},yydivpoly=function(t,n,a,s){var l,u,c,p;for(l=zero,u=c=p=t;p<=0?c<0:c>0;u=p<=0?++c:--c)push(stack[n+u]),stack[n+u]=l,push(a),divide(),l=pop(),push(stack[n+u-1]),push(l),push(s),multiply(),subtract(),stack[n+u-1]=pop();if(stack[n+0]=l,DEBUG)return console.log("yydivpoly Q: "+l.toString())},Evalpoly=function(t,n,a){var s,l,u;for(push(zero),s=l=u=t;u<=0?l<=0:l>=0;s=u<=0?++l:--l)push(a),multiply(),push(stack[n+s]),add();return pop()},factors=function(t){var n;if(n=tos,car(t)===symbol(ADD))for(t=cdr(t);iscons(t);)push_term_factors(car(t)),t=cdr(t);else push_term_factors(t);return tos-n},push_term_factors=function(t){var n;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),n=[];iscons(t);)push(car(t)),n.push(t=cdr(t));return n}else return push(t)},Eval_filter=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),filter(),t.push(p1=cdr(p1));return t},filter=function(){return save(),p2=pop(),p1=pop(),filter_main(),restore()},filter_main=function(){return car(p1)===symbol(ADD)?filter_sum():istensor(p1)?filter_tensor():Find(p1,p2)?push_integer(0):push(p1)},filter_sum=function(){var t;for(push_integer(0),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),push(p2),filter(),add(),t.push(p1=cdr(p1));return t},filter_tensor=function(){var t,n,a,s,l,u;for(t=0,a=0,a=p1.tensor.nelem,p3=alloc_tensor(a),p3.tensor.ndim=p1.tensor.ndim,t=s=0,l=p1.tensor.ndim;0<=l?s<l:s>l;t=0<=l?++s:--s)p3.tensor.dim[t]=p1.tensor.dim[t];for(t=n=0,u=a;0<=u?n<u:n>u;t=0<=u?++n:--n)push(p1.tensor.elem[t]),push(p2),filter(),p3.tensor.elem[t]=pop();return push(p3)},Eval_float=function(){return evaluatingAsFloats++,push(cadr(p1)),Eval(),yyfloat(),Eval(),evaluatingAsFloats--},zzfloat=function(){return save(),evaluatingAsFloats++,Eval(),yyfloat(),Eval(),evaluatingAsFloats--,restore()},yyfloat=function(){var t,n,a,s;if(n=0,t=0,evaluatingAsFloats++,save(),p1=pop(),iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),yyfloat(),p1=cdr(p1);list(tos-t)}else if(p1.k===TENSOR){for(push(p1),copy_tensor(),p1=pop(),n=a=0,s=p1.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)push(p1.tensor.elem[n]),yyfloat(),p1.tensor.elem[n]=pop();push(p1)}else p1.k===NUM?(push(p1),bignum_float()):p1===symbol(PI)?push_double(Math.PI):p1===symbol(E)?push_double(Math.E):push(p1);return restore(),evaluatingAsFloats--},Eval_floor=function(){return push(cadr(p1)),Eval(),yfloor()},yfloor=function(){return save(),yyfloor(),restore()},yyfloor=function(){var t;if(t=0,p1=pop(),!isNumericAtom(p1)){push_symbol(FLOOR),push(p1),list(2);return}if(isdouble(p1)){t=Math.floor(p1.d),push_double(t);return}if(isinteger(p1)){push(p1);return}if(p3=new U,p3.k=NUM,p3.q.a=mdiv(p1.q.a,p1.q.b),p3.q.b=mint(1),push(p3),isnegativenumber(p1))return push_integer(-1),add()},Eval_for=function(){var t,n,a,s,l,u,c;if(t=0,n=0,a=0,s=caddr(p1),issymbol(s)||stop("for: 2nd arg should be the variable to loop over"),push(cadddr(p1)),Eval(),n=pop_integer(),isNaN(n)){push(p1);return}if(push(caddddr(p1)),Eval(),a=pop_integer(),isNaN(a)){push(p1);return}for(p4=get_binding(s),t=l=u=n,c=a;u<=c?l<=c:l>=c;t=u<=c?++l:--l)push_integer(t),p5=pop(),set_binding(s,p5),push(cadr(p1)),Eval(),pop();return set_binding(s,p4),push_symbol(NIL)},Eval_gamma=function(){return push(cadr(p1)),Eval(),gamma()},gamma=function(){return save(),gammaf(),restore()},gammaf=function(){if(p1=pop(),isrational(p1)&&MEQUAL(p1.q.a,1)&&MEQUAL(p1.q.b,2)){evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(1,2),power();return}if(isrational(p1)&&MEQUAL(p1.q.a,3)&&MEQUAL(p1.q.b,2)){evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(1,2),power(),push_rational(1,2),multiply();return}if(isnegativeterm(p1)){evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_integer(-1),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push(p1),multiply(),sine(),push(p1),multiply(),push(p1),negate(),gamma(),multiply(),divide();return}if(car(p1)===symbol(ADD)){gamma_of_sum();return}push_symbol(GAMMA),push(p1),list(2)},gamma_of_sum=function(){if(p3=cdr(p1),isrational(car(p3))&&MEQUAL(car(p3).q.a,1)&&MEQUAL(car(p3).q.b,1))return push(cadr(p3)),push(cadr(p3)),gamma(),multiply();if(isrational(car(p3))&&MEQUAL(car(p3).q.a,-1)&&MEQUAL(car(p3).q.b,1))return push(cadr(p3)),gamma(),push(cadr(p3)),push_integer(-1),add(),divide();push_symbol(GAMMA),push(p1),list(2)},Eval_gcd=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),gcd(),t.push(p1=cdr(p1));return t},gcd=function(){var t;return t=expanding,save(),gcd_main(),restore(),expanding=t},gcd_main=function(){var t;if(expanding=1,p2=pop(),p1=pop(),DEBUG&&console.log("gcd_main: p1: "+p1+" p2: "+p2),equal(p1,p2)){push(p1);return}if(isrational(p1)&&isrational(p2)){push(p1),push(p2),gcd_numbers();return}if(t=areunivarpolysfactoredorexpandedform(p1,p2)){gcd_polys(t);return}if(car(p1)===symbol(ADD)&&car(p2)===symbol(ADD)){gcd_sum_sum();return}if(car(p1)===symbol(ADD)&&(gcd_sum(p1),p1=pop()),car(p2)===symbol(ADD)&&(gcd_sum(p2),p2=pop()),car(p1)===symbol(MULTIPLY)){gcd_sum_product();return}if(car(p2)===symbol(MULTIPLY)){gcd_product_sum();return}if(car(p1)===symbol(MULTIPLY)&&car(p2)===symbol(MULTIPLY)){gcd_product_product();return}return gcd_powers_with_same_base()},areunivarpolysfactoredorexpandedform=function(t,n){var a;return DEBUG&&console.log("areunivarpolysfactoredorexpandedform: p1: "+t+" p2: "+n),(a=isunivarpolyfactoredorexpandedform(t))&&isunivarpolyfactoredorexpandedform(n,a)?a:!1},gcd_polys=function(t){if(DEBUG&&console.log("gcd_polys: p1: "+p1+" polyVar: "+t),push(p1),push(t),factorpoly(),p1=pop(),push(p2),push(t),factorpoly(),p2=pop(),DEBUG&&console.log("GCD: factored polys:"),DEBUG&&console.log("  p1:"+p1.toString()),DEBUG&&console.log("  p2:"+p2.toString()),(car(p1)===symbol(MULTIPLY)||car(p2)===symbol(MULTIPLY))&&(car(p1)!==symbol(MULTIPLY)&&(push_symbol(MULTIPLY),push(p1),push(one),list(3),p1=pop()),car(p2)!==symbol(MULTIPLY)&&(push_symbol(MULTIPLY),push(p2),push(one),list(3),p2=pop())),car(p1)===symbol(MULTIPLY)&&car(p2)===symbol(MULTIPLY)){gcd_product_product();return}return gcd_powers_with_same_base(),!0},gcd_product_product=function(){var t;for(push(one),p3=cdr(p1),t=[];iscons(p3);){for(p4=cdr(p2);iscons(p4);)push(car(p3)),push(car(p4)),gcd(),multiply(),p4=cdr(p4);t.push(p3=cdr(p3))}return t},gcd_powers_with_same_base=function(){if(car(p1)===symbol(POWER)?(p3=caddr(p1),p1=cadr(p1)):p3=one,car(p2)===symbol(POWER)?(p4=caddr(p2),p2=cadr(p2)):p4=one,!equal(p1,p2)){push(one);return}if(isNumericAtom(p3)&&isNumericAtom(p4)){push(p1),lessp(p3,p4)?push(p3):push(p4),power();return}if(push(p3),push(p4),divide(),p5=pop(),isNumericAtom(p5)){push(p1),car(p3)===symbol(MULTIPLY)&&isNumericAtom(cadr(p3))?p5=cadr(p3):p5=one,car(p4)===symbol(MULTIPLY)&&isNumericAtom(cadr(p4))?p6=cadr(p4):p6=one,lessp(p5,p6)?push(p3):push(p4),power();return}if(push(p3),push(p4),subtract(),p5=pop(),!isNumericAtom(p5)){push(one);return}return push(p1),isnegativenumber(p5)?push(p3):push(p4),power()},gcd_sum_sum=function(){if(length(p1)!==length(p2)){push(one);return}for(p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),gcd(),p3=cdr(p3);for(p3=pop(),p4=cdr(p2),push(car(p4)),p4=cdr(p4);iscons(p4);)push(car(p4)),gcd(),p4=cdr(p4);return p4=pop(),push(p1),push(p3),divide(),p5=pop(),push(p2),push(p4),divide(),p6=pop(),equal(p5,p6)?(push(p5),push(p3),push(p4),gcd(),multiply()):push(one)},gcd_sum=function(t){var n;for(t=cdr(t),push(car(t)),t=cdr(t),n=[];iscons(t);)push(car(t)),gcd(),n.push(t=cdr(t));return n},gcd_sum_product=function(){var t;for(push(one),p3=cdr(p1),t=[];iscons(p3);)push(car(p3)),push(p2),gcd(),multiply(),t.push(p3=cdr(p3));return t},gcd_product_sum=function(){var t;for(push(one),p4=cdr(p2),t=[];iscons(p4);)push(p1),push(car(p4)),gcd(),multiply(),t.push(p4=cdr(p4));return t},guess=function(){var t;return t=pop(),push(t),Find(t,symbol(SYMBOL_X))?push_symbol(SYMBOL_X):Find(t,symbol(SYMBOL_Y))?push_symbol(SYMBOL_Y):Find(t,symbol(SYMBOL_Z))?push_symbol(SYMBOL_Z):Find(t,symbol(SYMBOL_T))?push_symbol(SYMBOL_T):Find(t,symbol(SYMBOL_S))?push_symbol(SYMBOL_S):push_symbol(SYMBOL_X)},hermite=function(){return save(),yyhermite(),restore()},yyhermite=function(){var t;if(t=0,p2=pop(),p1=pop(),push(p2),t=pop_integer(),t<0||isNaN(t)){push_symbol(HERMITE),push(p1),push(p2),list(3);return}return issymbol(p1)?yyhermite2(t):(p3=p1,p1=symbol(SECRETX),yyhermite2(t),p1=p3,push(symbol(SECRETX)),push(p1),subst(),Eval())},yyhermite2=function(t){var n,a,s,l;for(n=0,push_integer(1),push_integer(0),p4=pop(),l=[],n=a=0,s=t;0<=s?a<s:a>s;n=0<=s?++a:--a)p5=p4,p4=pop(),push(p1),push(p4),multiply(),push_integer(n),push(p5),multiply(),subtract(),push_integer(2),l.push(multiply());return l},hilbert=function(){var t,n,a,s,l,u,c;if(t=0,a=0,s=0,save(),p2=pop(),push(p2),s=pop_integer(),s<2){push_symbol(HILBERT),push(p2),list(2),restore();return}for(push_zero_matrix(s,s),p1=pop(),t=l=0,u=s;0<=u?l<u:l>u;t=0<=u?++l:--l)for(a=n=0,c=s;0<=c?n<c:n>c;a=0<=c?++n:--n)push_integer(t+a+1),inverse(),p1.tensor.elem[t*s+a]=pop();return push(p1),restore()},DEBUG_IMAG=!1,Eval_imag=function(){return push(cadr(p1)),Eval(),imag()},imag=function(){return save(),rect(),p1=pop(),DEBUG_IMAG&&console.log("IMAGE of "+p1),push(p1),push(p1),conjugate(),DEBUG_IMAG&&console.log(" image: conjugate result: "+stack[tos-1]),subtract(),push_integer(2),divide(),DEBUG_IMAG&&console.log(" image: 1st divide result: "+stack[tos-1]),push(imaginaryunit),divide(),DEBUG_IMAG&&console.log(" image: 2nd divide result: "+stack[tos-1]),restore()},index_function=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j,Z;for(n=0,l=0,c=0,d=0,x=0,Z=0,save(),j=tos-t,p1=stack[j],d=p1.tensor.ndim,c=t-1,c>d&&stop("too many indices for tensor"),l=0,n=_=0,S=c;0<=S?_<S:_>S;n=0<=S?++_:--_)push(stack[j+n+1]),Z=pop_integer(),(Z<1||Z>p1.tensor.dim[n])&&stop("index out of range"),l=l*p1.tensor.dim[n]+Z-1;if(d===c){moveTos(tos-t),push(p1.tensor.elem[l]),restore();return}for(n=a=T=c,A=d;T<=A?a<A:a>A;n=T<=A?++a:--a)l=l*p1.tensor.dim[n]+0;for(x=1,n=s=R=c,D=d;R<=D?s<D:s>D;n=R<=D?++s:--s)x*=p1.tensor.dim[n];for(p2=alloc_tensor(x),p2.tensor.ndim=d-c,n=u=O=c,F=d;O<=F?u<F:u>F;n=O<=F?++u:--u)p2.tensor.dim[n-c]=p1.tensor.dim[n];for(n=p=0,z=x;0<=z?p<z:p>z;n=0<=z?++p:--p)p2.tensor.elem[n]=p1.tensor.elem[l+n];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),moveTos(tos-t),push(p2),restore()},set_component=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j;for(n=0,l=0,c=0,x=0,j=0,save(),t<3&&stop("error in indexed assign"),z=tos-t,p2=stack[z],p1=stack[z+1],istensor(p1)||stop("error in indexed assign: assigning to something that is not a tensor"),x=p1.tensor.ndim,c=t-2,c>x&&stop("error in indexed assign"),l=0,n=_=0,S=c;0<=S?_<S:_>S;n=0<=S?++_:--_)push(stack[z+n+2]),j=pop_integer(),(j<1||j>p1.tensor.dim[n])&&stop(`error in indexed assign
`),l=l*p1.tensor.dim[n]+j-1;for(n=a=T=c,A=x;T<=A?a<A:a>A;n=T<=A?++a:--a)l=l*p1.tensor.dim[n]+0;for(p3=alloc_tensor(p1.tensor.nelem),p3.tensor.ndim=p1.tensor.ndim,n=s=0,R=p1.tensor.ndim;0<=R?s<R:s>R;n=0<=R?++s:--s)p3.tensor.dim[n]=p1.tensor.dim[n];for(n=u=0,D=p1.tensor.nelem;0<=D?u<D:u>D;n=0<=D?++u:--u)p3.tensor.elem[n]=p1.tensor.elem[n];if(check_tensor_dimensions(p1),check_tensor_dimensions(p3),p1=p3,x===c){istensor(p2)&&stop("error in indexed assign"),p1.tensor.elem[l]=p2,check_tensor_dimensions(p1),moveTos(tos-t),push(p1),restore();return}for(istensor(p2)||stop("error in indexed assign"),x-c!==p2.tensor.ndim&&stop("error in indexed assign"),n=p=0,O=p2.tensor.ndim;0<=O?p<O:p>O;n=0<=O?++p:--p)p1.tensor.dim[c+n]!==p2.tensor.dim[n]&&stop("error in indexed assign");for(n=d=0,F=p2.tensor.nelem;0<=F?d<F:d>F;n=0<=F?++d:--d)p1.tensor.elem[l+n]=p2.tensor.elem[n];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),moveTos(tos-t),push(p1),restore()},Eval_inner=function(){var t,n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O;for(O=[],O.push(car(cdr(p1))),R=car(cdr(cdr(p1))),R===symbol(NIL)&&stop("pattern needs at least a template and a transformed version"),u=cdr(cdr(p1));u!==symbol(NIL);)O.push(car(u)),u=cdr(u);if(O.length>2){for(push_symbol(INNER),push(O[O.length-2]),push(O[O.length-1]),list(3),n=c=2,d=O.length;2<=d?c<d:c>d;n=2<=d?++c:--c)push_symbol(INNER),swap(),push(O[O.length-n-1]),swap(),list(3);p1=pop(),Eval_inner();return}for(p=[],get_innerprod_factors(p1,p),T=[],n=a=0,x=p.length;0<=x?a<x:a>x;n=0<=x?++a:--a)p[n]!==symbol(SYMBOL_IDENTITY_MATRIX)&&T.push(p[n]);if(p=T,T=[],p.length>1){for(D=0,n=s=0,_=p.length;(0<=_?s<_:s>_)&&n+D+1<=p.length-1;n=0<=_?++s:--s){isNumericAtomOrTensor(p[n+D])||isNumericAtomOrTensor(p[n+D+1])?T.push(p[n+D]):(push(p[n+D]),Eval(),inv(),push(p[n+D+1]),Eval(),subtract(),t=pop(),isZeroAtomOrTensor(t)?D+=1:T.push(p[n+D]));if(n+D===p.length-2&&T.push(p[p.length-1]),n+D>=p.length-1)break}p=T}if(push(symbol(INNER)),p.length>0)for(n=l=0,S=p.length;0<=S?l<S:l>S;n=0<=S?++l:--l)push(p[n]);else{pop(),push(symbol(SYMBOL_IDENTITY_MATRIX));return}for(list(p.length+1),p1=pop(),p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),A=[];iscons(p1);)push(car(p1)),Eval(),inner(),A.push(p1=cdr(p1));return A},inner=function(){var t,n,a,s;if(save(),p2=pop(),p1=pop(),isnegativeterm(p2)&&isnegativeterm(p1)&&(push(p2),negate(),p2=pop(),push(p1),negate(),p1=pop()),isinnerordot(p1)&&(t=car(cdr(p1)),n=car(cdr(cdr(p1))),a=p2,p1=t,push(n),push(a),inner(),p2=pop()),p1===symbol(SYMBOL_IDENTITY_MATRIX)){push(p2),restore();return}else if(p2===symbol(SYMBOL_IDENTITY_MATRIX)){push(p1),restore();return}if(istensor(p1)&&istensor(p2))inner_f();else{if(!(isNumericAtomOrTensor(p1)||isNumericAtomOrTensor(p2))&&(push(p1),push(p2),inv(),subtract(),s=pop(),isZeroAtomOrTensor(s))){push_symbol(SYMBOL_IDENTITY_MATRIX),restore();return}if(expanding&&isadd(p1)){for(p1=cdr(p1),push(zero);iscons(p1);)push(car(p1)),push(p2),inner(),add(),p1=cdr(p1);restore();return}if(expanding&&isadd(p2)){for(p2=cdr(p2),push(zero);iscons(p2);)push(p1),push(car(p2)),inner(),add(),p2=cdr(p2);restore();return}if(push(p1),push(p2),istensor(p1)&&isNumericAtom(p2))tensor_times_scalar();else if(isNumericAtom(p1)&&istensor(p2))scalar_times_tensor();else if(isNumericAtom(p1)||isNumericAtom(p2))multiply();else{pop(),pop(),push_symbol(INNER),push(p1),push(p2),list(3),restore();return}}return restore()},inner_f=function(){var t,n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j,Z,W,J,en;if(u=0,T=p1.tensor.dim[p1.tensor.ndim-1],T!==p2.tensor.dim[0]){debugger;stop("inner: tensor dimension check")}for(R=p1.tensor.ndim+p2.tensor.ndim-2,R>MAXDIM&&stop("inner: rank of result exceeds maximum"),t=p1.tensor.elem,a=p2.tensor.elem,n=1,u=D=0,F=p1.tensor.ndim-1;0<=F?D<F:D>F;u=0<=F?++D:--D)n*=p1.tensor.dim[u];for(s=1,u=c=1,z=p2.tensor.ndim;1<=z?c<z:c>z;u=1<=z?++c:--c)s*=p2.tensor.dim[u];for(p3=alloc_tensor(n*s),l=p3.tensor.elem,u=d=0,j=n;0<=j?d<j:d>j;u=0<=j?++d:--d)for(p=_=0,Z=T;0<=Z?_<Z:_>Z;p=0<=Z?++_:--_)if(!isZeroAtomOrTensor(t[u*T+p]))for(x=S=0,W=s;0<=W?S<W:S>W;x=0<=W?++S:--S)push(t[u*T+p]),push(a[p*s+x]),multiply(),push(l[u*s+x]),add(),l[u*s+x]=pop();if(R===0)return push(p3.tensor.elem[0]);for(p3.tensor.ndim=R,p=0,u=A=0,J=p1.tensor.ndim-1;0<=J?A<J:A>J;u=0<=J?++A:--A)p3.tensor.dim[u]=p1.tensor.dim[u];for(p=p1.tensor.ndim-1,u=O=0,en=p2.tensor.ndim-1;0<=en?O<en:O>en;u=0<=en?++O:--O)p3.tensor.dim[p+u]=p2.tensor.dim[u+1];return push(p3)},get_innerprod_factors=function(t,n){if(!iscons(t)){add_factor_to_accumulator(t,n);return}if(cdr(t)===symbol(NIL)){t=get_innerprod_factors(car(t),n);return}if(isinnerordot(t)){get_innerprod_factors(car(cdr(t)),n),get_innerprod_factors(cdr(cdr(t)),n);return}return add_factor_to_accumulator(t,n)},add_factor_to_accumulator=function(t,n){if(t!==symbol(NIL))return n.push(t)},itab=["f(a,a*x)","f(1/x,log(x))","f(x^a,x^(a+1)/(a+1))","f(x^(-2),-x^(-1))","f(x^(-1/2),2*x^(1/2))","f(x^(1/2),2/3*x^(3/2))","f(x,x^2/2)","f(x^2,x^3/3)","f(exp(a*x),1/a*exp(a*x))","f(exp(a*x+b),1/a*exp(a*x+b))","f(x*exp(a*x^2),exp(a*x^2)/(2*a))","f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))","f(log(a*x),x*log(a*x)-x)","f(a^x,a^x/log(a),or(not(number(a)),a>0))","f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/(a+b*x),1/b*log(a+b*x))","f(1/(a+b*x)^2,-1/(b*(a+b*x)))","f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)","f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)","f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))","f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))","f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))","f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))","f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))","f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))","f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))","f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))","f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))","f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))","f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))","f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))","f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))","f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))","f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))","f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))","f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))","f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))","f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))","f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))","f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)","f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)","f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))","f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)","f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)","f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)","f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))","f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))","f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))","f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))","f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))","f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))","f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))","f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))","f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))","f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(x/sqrt(a-x^2),-sqrt(a-x^2))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))","f(sin(a*x),-cos(a*x)/a)","f(cos(a*x),sin(a*x)/a)","f(tan(a*x),-log(cos(a*x))/a)","f(1/tan(a*x),log(sin(a*x))/a)","f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)","f(1/sin(a*x),log(tan(a*x/2))/a)","f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))","f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))","f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(1/sin(a*x)^2,-1/(a*tan(a*x)))","f(1/cos(a*x)^2,tan(a*x)/a)","f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))","f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)","f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))","f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)","f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))","f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)","f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)","f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)","f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))","f(sin(a+b*x),-cos(a+b*x)/b)","f(cos(a+b*x),sin(a+b*x)/b)","f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)","f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)","f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)","f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)","f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)","f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)","f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)","f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)","f(x*log(a*x),x^2*log(a*x)/2-x^2/4)","f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)","f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)","f(1/x*1/(a+log(x)),log(a+log(x)))","f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)","f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)","f(sinh(x),cosh(x))","f(cosh(x),sinh(x))","f(tanh(x),log(cosh(x)))","f(x*sinh(x),x*cosh(x)-sinh(x))","f(x*cosh(x),x*sinh(x)-cosh(x))","f(sinh(x)^2,sinh(2*x)/4-x/2)","f(tanh(x)^2,x-tanh(x))","f(cosh(x)^2,sinh(2*x)/4+x/2)","f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)","f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)","f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)","f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))","f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)","f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)","f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))","f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))","f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))","f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))",0],Eval_integral=function(){var t,n,a,s,l;for(n=0,p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?(guess(),push(symbol(NIL))):isNumericAtom(p2)?(guess(),push(p2)):(push(p2),p1=cdr(p1),push(car(p1)),Eval()),p5=pop(),p4=pop(),p3=pop();;){if(isNumericAtom(p5)?(push(p5),n=pop_integer(),isNaN(n)&&stop("nth integral: check n")):n=1,push(p3),n>=0)for(a=0,s=n;0<=s?a<s:a>s;0<=s?++a:--a)push(p4),integral();else for(n=-n,t=0,l=n;0<=l?t<l:t>l;0<=l?++t:--t)push(p4),derivative();if(p3=pop(),p5===symbol(NIL))break;if(isNumericAtom(p5)){if(p1=cdr(p1),push(car(p1)),Eval(),p5=pop(),p5===symbol(NIL))break;isNumericAtom(p5)||(p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop())}else p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop()}return push(p3)},integral=function(){return save(),p2=pop(),p1=pop(),car(p1)===symbol(ADD)?integral_of_sum():car(p1)===symbol(MULTIPLY)?integral_of_product():integral_of_form(),p1=pop(),Find(p1,symbol(INTEGRAL))&&stop("integral: sorry, could not find a solution"),push(p1),simplify(),Eval(),restore()},integral_of_sum=function(){var t;for(p1=cdr(p1),push(car(p1)),push(p2),integral(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),push(p2),integral(),add(),t.push(p1=cdr(p1));return t},integral_of_product=function(){return push(p1),push(p2),partition(),p1=pop(),integral_of_form(),multiply()},integral_of_form=function(){var t,n;if(t=italu_hashcode(p1,p2).toFixed(6),n=hashed_itab[t],!n){push_symbol(INTEGRAL),push(p1),push(p2),list(3);return}return push(p1),push(p2),transform(n,!1),p3=pop(),p3===symbol(NIL)?(push_symbol(INTEGRAL),push(p1),push(p2),list(3)):push(p3)},hashcode_values={x:.95532,constexp:1.43762,constant:1.1441659362941434,constbase:1.2036412230421882,sin:1.7330548251830322,arcsin:1.6483368529465805,cos:1.0586721236863401,arccos:1.8405225918106694,tan:1.1224943776292506,arctan:1.1297397925394963,sinh:1.8176164926060079,cosh:1.9404934661708022,tanh:1.6421307715103122,log:1.477443701354924,erf:1.0825269225702916},italu_hashcode=function(t,n){var a;if(issymbol(t))return equal(t,n)?hashcode_values.x:hashcode_values.constant;if(iscons(t))switch(symnum(car(t))){case ADD:return hash_addition(cdr(t),n);case MULTIPLY:return hash_multiplication(cdr(t),n);case POWER:return hash_power(cadr(t),caddr(t),n);case EXP:return hash_power(symbol(E),cadr(t),n);case SQRT:return push_double(.5),a=pop(),hash_power(cadr(t),a,n);default:return hash_function(t,n)}return hashcode_values.constant},hash_function=function(t,n){var a,s,l;if(!Find(cadr(t),n))return hashcode_values.constant;if(l=car(t),a=italu_hashcode(cadr(t),n),s=hashcode_values[l.printname],!s)throw new Error("Unsupported function "+l.printname);return Math.pow(s,a)},hash_addition=function(t,n){var a,s,l,u,c;for(c={};iscons(t);)l=car(t),t=cdr(t),u=0,Find(l,n)?u=italu_hashcode(l,n):u=hashcode_values.constant,c[u.toFixed(6)]=!0;s=0;for(a in c)hasProp.call(c,a)&&(c[a],s=s+parseFloat(a,10));return s},hash_multiplication=function(t,n){var a,s;for(a=1;iscons(t);)s=car(t),t=cdr(t),Find(s,n)&&(a=a*italu_hashcode(s,n));return a},hash_power=function(t,n,a){var s,l;if(s=hashcode_values.constant,l=hashcode_values.constexp,Find(t,a)&&(s=italu_hashcode(t,a)),Find(n,a))l=italu_hashcode(n,a);else{if(s===hashcode_values.constant)return hashcode_values.constant;isminusone(n)?l=-1:isoneovertwo(n)?l=.5:isminusoneovertwo(n)?l=-.5:equalq(n,2,1)?l=2:equalq(n,-2,1)&&(l=-2)}return Math.pow(s,l)},make_hashed_itab=function(){var t,n,a,s,l,u,c,p;for(c={},l=0,s=itab.length;l<s&&(u=itab[l],!!u);l++)scan_meta(u),t=pop(),p=cadr(t),n=italu_hashcode(p,symbol(METAX)),a=n.toFixed(6),c[a]||(c[a]=[]),c[a].push(u);return console.log("hashed_itab = "+JSON.stringify(c,null,2)),c},$.make_hashed_itab=make_hashed_itab,hashed_itab={"1.144166":["f(a,a*x)"],"1.046770":["f(1/x,log(x))"],"0.936400":["f(x^a,x^(a+1)/(a+1))"],"1.095727":["f(x^(-2),-x^(-1))"],"1.023118":["f(x^(-1/2),2*x^(1/2))"],"0.977405":["f(x^(1/2),2/3*x^(3/2))"],"0.955320":["f(x,x^2/2)"],"0.912636":["f(x^2,x^3/3)"],"1.137302":["f(exp(a*x),1/a*exp(a*x))","f(a^x,a^x/log(a),or(not(number(a)),a>0))"],"1.326774":["f(exp(a*x+b),1/a*exp(a*x+b))"],"1.080259":["f(x*exp(a*x^2),exp(a*x^2)/(2*a))"],"1.260228":["f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))"],"1.451902":["f(log(a*x),x*log(a*x)-x)"],"0.486192":["f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))"],"0.697274":["f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))"],"0.476307":["f(1/(a+b*x),1/b*log(a+b*x))"],"0.226868":["f(1/(a+b*x)^2,-1/(b*(a+b*x)))"],"2.904531":["f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)"],"0.455026":["f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)"],"0.216732":["f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))"],"0.434695":["f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))"],"0.207048":["f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))"],"2.650781":["f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))"],"0.498584":["f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))"],"0.237479":["f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))"],"3.040375":["f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))"],"0.521902":["f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))"],"0.446014":["f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))"],"0.248586":["f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))"],"0.464469":["f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))"],"0.443716":["f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))"],"0.236382":["f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))"],"0.508931":["f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))"],"0.532733":["f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))"],"0.480638":["f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))"],"0.438648":["f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))"],"0.459164":["f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))"],"0.450070":["f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))"],"1.448960":["f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))"],"1.384221":["f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)"],"1.322374":["f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)"],"1.516728":["f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))"],"1.587665":["f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))"],"0.690150":["f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)"],"0.659314":["f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)"],"0.629856":["f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)"],"0.722428":["f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))"],"0.756216":["f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))"],"1.434156":["f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))"],"0.729886":["f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"1.501230":["f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"0.666120":["f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x/sqrt(a-x^2),-sqrt(a-x^2))"],"1.370077":["f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))"],"1.730087":["f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))"],"0.578006":["f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))"],"0.552180":["f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))"],"1.652787":["f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))"],"1.308862":["f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))"],"1.342944":["f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))"],"0.636358":["f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],"0.652928":["f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))"],"0.764022":["f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))"],"1.578940":["f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))"],"1.620055":["f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))"],"0.332117":["f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))"],"1.571443":["f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],"1.690994":["f(sin(a*x),-cos(a*x)/a)"],"1.055979":["f(cos(a*x),sin(a*x)/a)"],"1.116714":["f(tan(a*x),-log(cos(a*x))/a)"],"0.895484":["f(1/tan(a*x),log(sin(a*x))/a)"],"0.946989":["f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)"],"0.591368":["f(1/sin(a*x),log(tan(a*x/2))/a)"],"2.859462":["f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))"],"2.128050":["f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],"1.115091":["f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))"],"1.081452":["f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],"0.349716":["f(1/sin(a*x)^2,-1/(a*tan(a*x)))"],"0.896788":["f(1/cos(a*x)^2,tan(a*x)/a)"],"1.785654":["f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))"],"3.188560":["f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)"],"1.516463":["f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))"],"2.707879":["f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)"],"0.369293":["f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))"],"0.560019":["f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)"],"0.530332":["f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)"],"0.331177":["f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)"],"0.313621":["f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))"],"3.172365":["f(sin(a+b*x),-cos(a+b*x)/b)"],"1.127162":["f(cos(a+b*x),sin(a+b*x)/b)"],"0.352714":["f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)"],"0.454515":["f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)"],"1.615441":["f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)"],"1.543263":["f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)"],"1.008798":["f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)"],"0.963724":["f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)"],"1.611938":["f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)"],"1.791033":["f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)"],"1.123599":["f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)"],"1.387031":["f(x*log(a*x),x^2*log(a*x)/2-x^2/4)"],"1.325058":["f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)"],"2.108018":["f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)"],"0.403214":["f(1/x*1/(a+log(x)),log(a+log(x)))"],"2.269268":["f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)"],"2.486498":["f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)"],"1.769733":["f(sinh(x),cosh(x))"],"1.883858":["f(cosh(x),sinh(x))"],"1.606140":["f(tanh(x),log(cosh(x)))"],"1.690661":["f(x*sinh(x),x*cosh(x)-sinh(x))"],"1.799688":["f(x*cosh(x),x*sinh(x)-cosh(x))"],"3.131954":["f(sinh(x)^2,sinh(2*x)/4-x/2)"],"2.579685":["f(tanh(x)^2,x-tanh(x))"],"3.548923":["f(cosh(x)^2,sinh(2*x)/4+x/2)"],"1.058866":["f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)"],"1.235270":["f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)"],"1.130783":["f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)"],"1.078698":["f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))"],"2.573650":["f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)"],"2.640666":["f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)"],"1.086487":["f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))"],"1.267493":["f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))"],"1.037943":["f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))"],"1.210862":["f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))"],"1.064970":["f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))"],"1.242392":["f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))"]},INV_check_arg=function(){return istensor(p1)?p1.tensor.ndim!==2||p1.tensor.dim[0]!==p1.tensor.dim[1]?0:1:0},inv=function(){var t,n,a,s;if(save(),p1=pop(),isinv(p1)){push(car(cdr(p1))),restore();return}if(isidentitymatrix(p1)){push(p1),restore();return}if(expanding&&isinnerordot(p1)){for(p1=cdr(p1),t=[];iscons(p1);)t.push(car(p1)),p1=cdr(p1);for(n=a=s=t.length-1;s<=0?a<=0:a>=0;n=s<=0?++a:--a)push(t[n]),inv(),n!==t.length-1&&inner();restore();return}if(INV_check_arg()===0){push_symbol(INV),push(p1),list(2),restore();return}return isNumericAtomOrTensor(p1)?yyinvg():(push(p1),adj(),push(p1),det(),p2=pop(),isZeroAtomOrTensor(p2)&&stop("inverse of singular matrix"),push(p2),divide()),restore()},invg=function(){if(save(),p1=pop(),INV_check_arg()===0){push_symbol(INVG),push(p1),list(2),restore();return}return yyinvg(),restore()},yyinvg=function(){var t,n,a,s,l,u,c,p,d,x,_,S;for(t=0,n=0,s=0,c=0,c=p1.tensor.dim[0],t=tos,n=p=0,d=c;0<=d?p<d:p>d;n=0<=d?++p:--p)for(s=a=0,x=c;0<=x?a<x:a>x;s=0<=x?++a:--a)push(n===s?one:zero);for(n=l=0,_=c*c;0<=_?l<_:l>_;n=0<=_?++l:--l)push(p1.tensor.elem[n]);for(INV_decomp(c),p1=alloc_tensor(c*c),p1.tensor.ndim=2,p1.tensor.dim[0]=c,p1.tensor.dim[1]=c,n=u=0,S=c*c;0<=S?u<S:u>S;n=0<=S?++u:--u)p1.tensor.elem[n]=stack[t+n];return moveTos(tos-2*c*c),push(p1)},INV_decomp=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D;for(n=0,a=0,s=0,u=0,D=0,n=tos-t*t,D=n-t*t,R=[],a=d=0,x=t;0<=x?d<x:d>x;a=0<=x?++d:--d){if(equal(stack[n+t*a+a],zero)){for(s=l=_=a+1,S=t;(_<=S?l<S:l>S)&&equal(stack[n+t*s+a],zero);s=_<=S?++l:--l);for(s===t&&stop("inverse of singular matrix"),u=c=0,T=t;0<=T?c<T:c>T;u=0<=T?++c:--c)p2=stack[n+t*a+u],stack[n+t*a+u]=stack[n+t*s+u],stack[n+t*s+u]=p2,p2=stack[D+t*a+u],stack[D+t*a+u]=stack[D+t*s+u],stack[D+t*s+u]=p2}for(p2=stack[n+t*a+a],u=p=0,A=t;0<=A?p<A:p>A;u=0<=A?++p:--p)u>a&&(push(stack[n+t*a+u]),push(p2),divide(),stack[n+t*a+u]=pop()),push(stack[D+t*a+u]),push(p2),divide(),stack[D+t*a+u]=pop();R.push(function(){var O,F,z;for(z=[],s=O=0,F=t;0<=F?O<F:O>F;s=0<=F?++O:--O)s!==a&&(p2=stack[n+t*s+a],z.push(function(){var j,Z,W;for(W=[],u=j=0,Z=t;0<=Z?j<Z:j>Z;u=0<=Z?++j:--j)u>a&&(push(stack[n+t*s+u]),push(stack[n+t*a+u]),push(p2),multiply(),subtract(),stack[n+t*s+u]=pop()),push(stack[D+t*s+u]),push(stack[D+t*a+u]),push(p2),multiply(),subtract(),W.push(stack[D+t*s+u]=pop());return W}()));return z}())}return R},DEBUG_IS=!1,isZeroAtom=function(t){switch(t.k){case NUM:return MZERO(t.q.a);case DOUBLE:return t.d===0;default:return!1}},isZeroTensor=function(t){var n,a,s;if(t.k!==TENSOR)return 0;for(n=a=0,s=t.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)if(!isZeroAtomOrTensor(t.tensor.elem[n]))return 0;return 1},isZeroAtomOrTensor=function(t){return isZeroAtom(t)||isZeroTensor(t)},isZeroLikeOrNonZeroLikeOrUndetermined=function(t){var n;if(push(t),Eval_predicate(),n=pop(),isZeroAtomOrTensor(n))return 0;if(isNumericAtomOrTensor(n))return 1;if(push(n),zzfloat(),n=pop(),isZeroAtomOrTensor(n))return 0;if(isNumericAtomOrTensor(n))return 1;if(Find(n,imaginaryunit)){if(push(n),absValFloat(),Eval_predicate(),n=pop(),isZeroAtomOrTensor(n))return 0;if(isNumericAtomOrTensor(n))return 1}return null},isnegativenumber=function(t){switch(t.k){case NUM:if(MSIGN(t.q.a)===-1)return 1;break;case DOUBLE:if(t.d<0)return 1}return 0},ispositivenumber=function(t){switch(t.k){case NUM:if(MSIGN(t.q.a)===1)return 1;break;case DOUBLE:if(t.d>0)return 1}return 0},isplustwo=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,2)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(t.d===2)return 1}return 0},isplusone=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,1)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(t.d===1)return 1}return 0},isminusone=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,-1)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(t.d===-1)return 1}return 0},isone=function(t){return isplusone(t)||isminusone(t)},isinteger=function(t){return t.k===NUM&&MEQUAL(t.q.b,1)?1:0},isintegerorintegerfloat=function(t){return t.k===DOUBLE?t.d===Math.round(t.d)?1:0:isinteger(t)},isnonnegativeinteger=function(t){return isrational(t)&&MEQUAL(t.q.b,1)&&MSIGN(t.q.a)===1?1:0},isposint=function(t){return isinteger(t)&&MSIGN(t.q.a)===1?1:0},isunivarpolyfactoredorexpandedform=function(t,n){return DEBUG&&console.log("isunivarpolyfactoredorexpandedform: p: "+t+" x: "+n),n==null&&(push(t),guess(),n=pop(),pop()),ispolyfactoredorexpandedform(t,n)&&Find(t,symbol(SYMBOL_X))+Find(t,symbol(SYMBOL_Y))+Find(t,symbol(SYMBOL_Z))===1?n:0},ispolyfactoredorexpandedform=function(t,n){return ispolyfactoredorexpandedform_factor(t,n)},ispolyfactoredorexpandedform_factor=function(t,n){if(car(t)===symbol(MULTIPLY)){for(t=cdr(t);iscons(t);){if(DEBUG&&console.log("ispolyfactoredorexpandedform_factor testing "+car(t)),!ispolyfactoredorexpandedform_power(car(t),n))return DEBUG&&console.log("... tested negative:"+car(t)),0;t=cdr(t)}return 1}else return ispolyfactoredorexpandedform_power(t,n)},ispolyfactoredorexpandedform_power=function(t,n){return car(t)===symbol(POWER)?(DEBUG&&console.log("ispolyfactoredorexpandedform_power (isposint(caddr(p)) "+(isposint(caddr(t)),DEBUG?console.log("ispolyfactoredorexpandedform_power ispolyexpandedform_expr(cadr(p), x)) "+ispolyexpandedform_expr(cadr(t),n)):void 0)),isposint(caddr(t))&&ispolyexpandedform_expr(cadr(t),n)):(DEBUG&&console.log("ispolyfactoredorexpandedform_power not a power, testing if this is exp form: "+t),ispolyexpandedform_expr(t,n))},ispolyexpandedform=function(t,n){return Find(t,n)?ispolyexpandedform_expr(t,n):0},ispolyexpandedform_expr=function(t,n){if(car(t)===symbol(ADD)){for(t=cdr(t);iscons(t);){if(!ispolyexpandedform_term(car(t),n))return 0;t=cdr(t)}return 1}else return ispolyexpandedform_term(t,n)},ispolyexpandedform_term=function(t,n){if(car(t)===symbol(MULTIPLY)){for(t=cdr(t);iscons(t);){if(!ispolyexpandedform_factor(car(t),n))return 0;t=cdr(t)}return 1}else return ispolyexpandedform_factor(t,n)},ispolyexpandedform_factor=function(t,n){return equal(t,n)?1:car(t)===symbol(POWER)&&equal(cadr(t),n)?isposint(caddr(t))?1:0:Find(t,n)?0:1},isnegativeterm=function(t){return isnegativenumber(t)||car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))?1:0},hasNegativeRationalExponent=function(t){return car(t)===symbol(POWER)&&isrational(car(cdr(cdr(t))))&&isnegativenumber(car(cdr(t)))?(DEBUG_IS&&console.log("hasNegativeRationalExponent: "+t.toString()+" has imaginary component"),1):(DEBUG_IS&&console.log("hasNegativeRationalExponent: "+t.toString()+" has NO imaginary component"),0)},isimaginarynumberdouble=function(t){return car(t)===symbol(MULTIPLY)&&length(t)===3&&isdouble(cadr(t))&&hasNegativeRationalExponent(caddr(t))||equal(t,imaginaryunit)?1:0},isimaginarynumber=function(t){return car(t)===symbol(MULTIPLY)&&length(t)===3&&isNumericAtom(cadr(t))&&equal(caddr(t),imaginaryunit)||equal(t,imaginaryunit)||hasNegativeRationalExponent(caddr(t))?(DEBUG_IS&&console.log("isimaginarynumber: "+t.toString()+" is imaginary number"),1):(DEBUG_IS&&console.log("isimaginarynumber: "+t.toString()+" isn't an imaginary number"),0)},iscomplexnumberdouble=function(t){return car(t)===symbol(ADD)&&length(t)===3&&isdouble(cadr(t))&&isimaginarynumberdouble(caddr(t))||isimaginarynumberdouble(t)?1:0},iscomplexnumber=function(t){if(DEBUG_IS)debugger;return car(t)===symbol(ADD)&&length(t)===3&&isNumericAtom(cadr(t))&&isimaginarynumber(caddr(t))||isimaginarynumber(t)?(DEBUG&&console.log("iscomplexnumber: "+t.toString()+" is imaginary number"),1):(DEBUG&&console.log("iscomplexnumber: "+t.toString()+" is imaginary number"),0)},iseveninteger=function(t){return isinteger(t)&&t.q.a.isEven()?1:0},isnegative=function(t){return car(t)===symbol(ADD)&&isnegativeterm(cadr(t))||isnegativeterm(t)?1:0},issymbolic=function(t){if(issymbol(t))return 1;for(;iscons(t);){if(issymbolic(car(t)))return 1;t=cdr(t)}return 0},isintegerfactor=function(t){return isinteger(t)||car(t)===symbol(POWER)&&isinteger(cadr(t))&&isinteger(caddr(t))},isNumberOneOverSomething=function(t){return isfraction(t)&&MEQUAL(t.q.a.abs(),1)},isoneover=function(t){return car(t)===symbol(POWER)&&isminusone(caddr(t))},isfraction=function(t){return t.k===NUM&&!MEQUAL(t.q.b,1)},equaln=function(t,n){switch(t.k){case NUM:return MEQUAL(t.q.a,n)&&MEQUAL(t.q.b,1);case DOUBLE:return t.d===n;default:return!1}},equalq=function(t,n,a){switch(t.k){case NUM:return MEQUAL(t.q.a,n)&&MEQUAL(t.q.b,a);case DOUBLE:return t.d===n/a;default:return!1}},isoneovertwo=function(t){return equalq(t,1,2)},isminusoneovertwo=function(t){return equalq(t,-1,2)},isoneoversqrttwo=function(t){return car(t)===symbol(POWER)&&equaln(cadr(t),2)&&equalq(caddr(t),-1,2)},isminusoneoversqrttwo=function(t){return car(t)===symbol(MULTIPLY)&&equaln(cadr(t),-1)&&isoneoversqrttwo(caddr(t))&&length(t)===3},issqrtthreeovertwo=function(t){return car(t)===symbol(MULTIPLY)&&isoneovertwo(cadr(t))&&issqrtthree(caddr(t))&&length(t)===3},isminussqrtthreeovertwo=function(t){return car(t)===symbol(MULTIPLY)&&isminusoneovertwo(cadr(t))&&issqrtthree(caddr(t))&&length(t)===3},issqrtthree=function(t){return car(t)===symbol(POWER)&&equaln(cadr(t),3)&&isoneovertwo(caddr(t))},isfloating=function(t){if(t.k===DOUBLE||t===symbol(FLOATF))return 1;for(;iscons(t);){if(isfloating(car(t)))return 1;t=cdr(t)}return 0},isimaginaryunit=function(t){return equal(t,imaginaryunit)?1:0},isquarterturn=function(t){var n,a;if(a=0,n=0,car(t)!==symbol(MULTIPLY))return 0;if(equal(cadr(t),imaginaryunit))return caddr(t)!==symbol(PI)||length(t)!==3?0:2;if(!isNumericAtom(cadr(t))||!equal(caddr(t),imaginaryunit)||cadddr(t)!==symbol(PI)||length(t)!==4||(push(cadr(t)),push_integer(2),multiply(),a=pop_integer(),isNaN(a)))return 0;switch(a<1&&(n=1,a=-a),a%4){case 0:a=1;break;case 1:n?a=4:a=3;break;case 2:a=2;break;case 3:n?a=3:a=4}return a},isnpi=function(t){var n;return n=0,t===symbol(PI)?2:!(car(t)===symbol(MULTIPLY)&&isNumericAtom(cadr(t))&&caddr(t)===symbol(PI)&&length(t)===3)||(push(cadr(t)),push_integer(2),multiply(),n=pop_integer(),isNaN(n))?0:(n<0?n=4- -n%4:n=1+(n-1)%4,n)},$.isZeroAtomOrTensor=isZeroAtomOrTensor,$.isnegativenumber=isnegativenumber,$.isplusone=isplusone,$.isminusone=isminusone,$.isinteger=isinteger,$.isnonnegativeinteger=isnonnegativeinteger,$.isposint=isposint,$.isnegativeterm=isnegativeterm,$.isimaginarynumber=isimaginarynumber,$.iscomplexnumber=iscomplexnumber,$.iseveninteger=iseveninteger,$.isnegative=isnegative,$.issymbolic=issymbolic,$.isintegerfactor=isintegerfactor,$.isoneover=isoneover,$.isfraction=isfraction,$.isoneoversqrttwo=isoneoversqrttwo,$.isminusoneoversqrttwo=isminusoneoversqrttwo,$.isfloating=isfloating,$.isimaginaryunit=isimaginaryunit,$.isquarterturn=isquarterturn,$.isnpi=isnpi,Eval_isprime=function(){return push(cadr(p1)),Eval(),p1=pop(),isnonnegativeinteger(p1)&&mprime(p1.q.a)?push_integer(1):push_integer(0)},Eval_laguerre=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(0):push(p2),laguerre()},laguerre=function(){var t;if(t=0,save(),p3=pop(),p2=pop(),p1=pop(),push(p2),t=pop_integer(),t<0||isNaN(t)){push_symbol(LAGUERRE),push(p1),push(p2),push(p3),list(4),restore();return}return issymbol(p1)?laguerre2(t):(p4=p1,p1=symbol(SECRETX),laguerre2(t),p1=p4,push(symbol(SECRETX)),push(p1),subst(),Eval()),restore()},laguerre2=function(t){var n,a,s,l;for(n=0,push_integer(1),push_integer(0),p6=pop(),l=[],n=a=0,s=t;0<=s?a<s:a>s;n=0<=s?++a:--a)p5=p6,p6=pop(),push_integer(2*n+1),push(p1),subtract(),push(p3),add(),push(p6),multiply(),push_integer(n),push(p3),add(),push(p5),multiply(),subtract(),push_integer(n+1),l.push(divide());return l},Eval_lcm=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),lcm(),t.push(p1=cdr(p1));return t},lcm=function(){var t;return t=expanding,save(),yylcm(),restore(),expanding=t},yylcm=function(){return expanding=1,p2=pop(),p1=pop(),push(p1),push(p2),gcd(),push(p1),divide(),push(p2),divide(),inverse()},Eval_leading=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)?guess():push(p1),leading()},leading=function(){return save(),p2=pop(),p1=pop(),push(p1),push(p2),degree(),p3=pop(),push(p1),push(p2),push(p3),power(),divide(),push(p2),filter(),restore()},Eval_legendre=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(0):push(p2),legendre()},legendre=function(){return save(),__legendre(),restore()},__legendre=function(){var t,n;if(t=0,n=0,p3=pop(),p2=pop(),p1=pop(),push(p2),n=pop_integer(),push(p3),t=pop_integer(),n<0||isNaN(n)||t<0||isNaN(t)){push_symbol(LEGENDRE),push(p1),push(p2),push(p3),list(4);return}return issymbol(p1)?__legendre2(n,t):(p4=p1,p1=symbol(SECRETX),__legendre2(n,t),p1=p4,push(symbol(SECRETX)),push(p1),subst(),Eval()),__legendre3(t)},__legendre2=function(t,n){var a,s,l,u,c,p;for(a=0,push_integer(1),push_integer(0),p6=pop(),a=l=0,u=t;0<=u?l<u:l>u;a=0<=u?++l:--l)p5=p6,p6=pop(),push_integer(2*a+1),push(p1),multiply(),push(p6),multiply(),push_integer(a),push(p5),multiply(),subtract(),push_integer(a+1),divide();for(p=[],a=s=0,c=n;0<=c?s<c:s>c;a=0<=c?++s:--s)push(p1),p.push(derivative());return p},__legendre3=function(t){if(t!==0&&(car(p1)===symbol(COS)?(push(cadr(p1)),sine(),square()):car(p1)===symbol(SIN)?(push(cadr(p1)),cosine(),square()):(push_integer(1),push(p1),square(),subtract()),push_integer(t),push_rational(1,2),multiply(),power(),multiply(),t%2))return negate()},list=function(t){var n,a,s;for(push(symbol(NIL)),s=[],n=0,a=t;0<=a?n<a:n>a;0<=a?++n:--n)s.push(cons());return s},Eval_log=function(){return push(cadr(p1)),Eval(),logarithm()},logarithm=function(){return save(),yylog(),restore()},yylog=function(){var t;if(t=0,p1=pop(),p1===symbol(E)){push_integer(1);return}if(equaln(p1,1)){push_integer(0);return}if(isnegativenumber(p1)){push(p1),negate(),logarithm(),push(imaginaryunit),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),multiply(),add();return}if(isdouble(p1)){t=Math.log(p1.d),push_double(t);return}if(isfraction(p1)){push(p1),numerator(),logarithm(),push(p1),denominator(),logarithm(),subtract();return}if(car(p1)===symbol(POWER)){push(caddr(p1)),push(cadr(p1)),logarithm(),multiply();return}if(car(p1)===symbol(MULTIPLY)){for(push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),logarithm(),add(),p1=cdr(p1);return}return push_symbol(LOG),push(p1),list(2)},Eval_lookup=function(){return p1=cadr(p1),!iscons(p1)&&cadr(p1).k===SYM&&(p1=get_binding(p1)),push(p1)},madd=function(t,n){return t.add(n)},msub=function(t,n){return t.subtract(n)},mgcd=function(t,n){return bigInt.gcd(t,n)},new_string=function(t){var n;return n=new U,n.k=STR,n.str=t,n},push_zero_matrix=function(t,n){return push(alloc_tensor(t*n)),stack[tos-1].tensor.ndim=2,stack[tos-1].tensor.dim[0]=t,stack[tos-1].tensor.dim[1]=n},equal=function(t,n){return cmp_expr(t,n)===0?1:0},lessp=function(t,n){return cmp_expr(t,n)<0?1:0},sign=function(t){return t<0?-1:t>0?1:0},cmp_expr=function(t,n){var a;if(a=0,t===n)return 0;if(t===symbol(NIL))return-1;if(n===symbol(NIL))return 1;if(isNumericAtom(t)&&isNumericAtom(n))return sign(compare_numbers(t,n));if(isNumericAtom(t))return-1;if(isNumericAtom(n))return 1;if(isstr(t)&&isstr(n))return sign(strcmp(t.str,n.str));if(isstr(t))return-1;if(isstr(n))return 1;if(issymbol(t)&&issymbol(n))return sign(strcmp(get_printname(t),get_printname(n)));if(issymbol(t))return-1;if(issymbol(n))return 1;if(istensor(t)&&istensor(n))return compare_tensors(t,n);if(istensor(t))return-1;if(istensor(n))return 1;for(;iscons(t)&&iscons(n);){if(a=cmp_expr(car(t),car(n)),a!==0)return a;t=cdr(t),n=cdr(n)}return iscons(n)?-1:iscons(t)?1:0},length=function(t){var n;for(n=0;iscons(t);)t=cdr(t),n++;return n},yyexpand=function(){var t;return t=expanding,expanding=1,Eval(),expanding=t},exponential=function(){return push_symbol(E),swap(),power()},square=function(){return push_integer(2),power()},sort_stack=function(t){var n,a;return n=tos-t,a=stack.slice(n,n+t),a.sort(cmp_expr),stack=stack.slice(0,n).concat(a).concat(stack.slice(n+t))},$.equal=equal,$.length=length,mmul=function(t,n){return t.multiply(n)},mdiv=function(t,n){return t.divide(n)},mmod=function(t,n){return t.mod(n)},mdivrem=function(t,n){var a;return a=t.divmod(n),[a.quotient,a.remainder]},Eval_mod=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),mod()},mod=function(){var t;if(t=0,save(),p2=pop(),p1=pop(),isZeroAtomOrTensor(p2)&&stop("mod function: divide by zero"),!isNumericAtom(p1)||!isNumericAtom(p2)){push_symbol(MOD),push(p1),push(p2),list(3),restore();return}return isdouble(p1)&&(push(p1),t=pop_integer(),isNaN(t)&&stop("mod function: cannot convert float value to integer"),push_integer(t),p1=pop()),isdouble(p2)&&(push(p2),t=pop_integer(),isNaN(t)&&stop("mod function: cannot convert float value to integer"),push_integer(t),p2=pop()),(!isinteger(p1)||!isinteger(p2))&&stop("mod function: integer arguments expected"),p3=new U,p3.k=NUM,p3.q.a=mmod(p1.q.a,p2.q.a),p3.q.b=mint(1),push(p3),restore()},mpow=function(t,n){return t.pow(n)},mprime=function(t){return t.isProbablePrime()},mroot=function(t,n){var a,s,l,u,c,p,d;for(t=t.abs(),a=0,s=0,l=0,n===0&&stop("root index is zero"),l=0;t.shiftRight(l)>0;)l++;if(l===0)return mint(0);for(l=Math.floor((l-1)/n),s=Math.floor(l/32+1),p=bigInt(s),a=u=0,c=s;0<=c?u<c:u>c;a=0<=c?++u:--u)p=p.and(bigInt(1).shiftLeft(a).not());for(;l>=0;){switch(p=p.or(bigInt(1).shiftLeft(l)),d=mpow(p,n),mcmp(d,t)){case 0:return p;case 1:p=p.and(bigInt(1).shiftLeft(l).not())}l--}return 0},DEBUG_MULTIPLY=!1,Eval_multiply=function(){var t;for(push(cadr(p1)),Eval(),p1=cddr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),multiply(),t.push(p1=cdr(p1));return t},multiply=function(){return esc_flag&&stop("escape key stop"),isNumericAtom(stack[tos-2])&&isNumericAtom(stack[tos-1])?multiply_numbers():(save(),yymultiply(),restore())},yymultiply=function(){var t,n,a,s,l,u;if(t=0,n=0,a=0,p2=pop(),p1=pop(),t=tos,isZeroAtom(p1)||isZeroAtom(p2)){evaluatingAsFloats?push_double(0):push(zero);return}if(expanding&&isadd(p1)){for(p1=cdr(p1),evaluatingAsFloats?push_double(0):push(zero);iscons(p1);)push(car(p1)),push(p2),multiply(),add(),p1=cdr(p1);return}if(expanding&&isadd(p2)){for(p2=cdr(p2),evaluatingAsFloats?push_double(0):push(zero);iscons(p2);)push(p1),push(car(p2)),multiply(),add(),p2=cdr(p2);return}if(!istensor(p1)&&istensor(p2)){push(p1),push(p2),scalar_times_tensor();return}if(istensor(p1)&&!istensor(p2)){push(p1),push(p2),tensor_times_scalar();return}for(car(p1)===symbol(MULTIPLY)?p1=cdr(p1):(push(p1),list(1),p1=pop()),car(p2)===symbol(MULTIPLY)?p2=cdr(p2):(push(p2),list(1),p2=pop()),isNumericAtom(car(p1))&&isNumericAtom(car(p2))?(push(car(p1)),push(car(p2)),multiply_numbers(),p1=cdr(p1),p2=cdr(p2)):isNumericAtom(car(p1))?(push(car(p1)),p1=cdr(p1)):isNumericAtom(car(p2))?(push(car(p2)),p2=cdr(p2)):evaluatingAsFloats?push_double(1):push(one),parse_p1(),parse_p2();iscons(p1)&&iscons(p2);){if(caar(p1)===symbol(OPERATOR)&&caar(p2)===symbol(OPERATOR)){push_symbol(OPERATOR),push(cdar(p1)),push(cdar(p2)),append(),cons(),p1=cdr(p1),p2=cdr(p2),parse_p1(),parse_p2();continue}switch(cmp_expr(p3,p4)){case-1:push(car(p1)),p1=cdr(p1),parse_p1();break;case 1:push(car(p2)),p2=cdr(p2),parse_p2();break;case 0:combine_factors(t),p1=cdr(p1),p2=cdr(p2),parse_p1(),parse_p2();break;default:stop("internal error 2")}}for(;iscons(p1);)push(car(p1)),p1=cdr(p1);for(;iscons(p2);)push(car(p2)),p2=cdr(p2);if(__normalize_radical_factors(t),expanding){for(n=s=l=t,u=tos;l<=u?s<u:s>u;n=l<=u?++s:--s)if(isadd(stack[n])){multiply_all(tos-t);return}}if(a=tos-t,a!==1){if(isrational(stack[t])&&equaln(stack[t],1)){a===2?(p7=pop(),pop(),push(p7)):(stack[t]=symbol(MULTIPLY),list(a));return}return list(a),p7=pop(),push_symbol(MULTIPLY),push(p7),cons()}},parse_p1=function(){if(p3=car(p1),p5=evaluatingAsFloats?one_as_double:one,car(p3)===symbol(POWER))return p5=caddr(p3),p3=cadr(p3)},parse_p2=function(){if(p4=car(p2),p6=evaluatingAsFloats?one_as_double:one,car(p4)===symbol(POWER))return p6=caddr(p4),p4=cadr(p4)},combine_factors=function(t){return push(p4),push(p5),push(p6),add(),power(),p7=pop(),isNumericAtom(p7)?(push(stack[t]),push(p7),multiply_numbers(),stack[t]=pop()):car(p7)===symbol(MULTIPLY)&&isNumericAtom(cadr(p7))&&cdddr(p7)===symbol(NIL)?(push(stack[t]),push(cadr(p7)),multiply_numbers(),stack[t]=pop(),push(caddr(p7))):push(p7)},multiply_noexpand=function(){var t;return t=expanding,expanding=0,multiply(),expanding=t},multiply_all=function(t){var n,a,s,l;if(a=0,t!==1){if(t===0){push(evaluatingAsFloats?one_as_double:one);return}for(n=tos-t,push(stack[n]),a=s=1,l=t;1<=l?s<l:s>l;a=1<=l?++s:--s)push(stack[n+a]),multiply();return stack[n]=pop(),moveTos(n+1)}},multiply_all_noexpand=function(t){var n;return n=expanding,expanding=0,multiply_all(t),expanding=n},divide=function(){return isNumericAtom(stack[tos-2])&&isNumericAtom(stack[tos-1])?divide_numbers():(inverse(),multiply())},inverse=function(){return isNumericAtom(stack[tos-1])?invert_number():(push_integer(-1),power())},reciprocate=function(){return inverse()},negate=function(){return isNumericAtom(stack[tos-1])?negate_number():(evaluatingAsFloats?push_double(-1):push_integer(-1),multiply())},negate_noexpand=function(){var t;return t=expanding,expanding=0,negate(),expanding=t},__normalize_radical_factors=function(t){var n,a,s,l,u,c,p,d,x,_;if(n=0,!(isplusone(stack[t])||isminusone(stack[t])||isdouble(stack[t]))){for(n=l=u=t+1,c=tos;(u<=c?l<c:l>c)&&!__is_radical_number(stack[n]);n=u<=c?++l:--l);if(n!==tos){for(save(),push(stack[t]),mp_numerator(),DEBUG_MULTIPLY&&console.log("__normalize_radical_factors numerator: "+stack[tos-1]),p1=pop(),n=a=p=t+1,d=tos;(p<=d?a<d:a>d)&&!(isplusone(p1)||isminusone(p1));n=p<=d?++a:--a)__is_radical_number(stack[n])&&(p3=cadr(stack[n]),p4=caddr(stack[n]),isnegativenumber(p4)&&(push(p1),push(p3),divide(),p5=pop(),isinteger(p5)&&(p1=p5,push_symbol(POWER),push(p3),push(evaluatingAsFloats?one_as_double:one),push(p4),add(),list(3),stack[n]=pop())));for(push(stack[t]),mp_denominator(),DEBUG_MULTIPLY&&console.log("__normalize_radical_factors denominator: "+stack[tos-1]),p2=pop(),n=s=x=t+1,_=tos;(x<=_?s<_:s>_)&&!isplusone(p2);n=x<=_?++s:--s)if(__is_radical_number(stack[n])&&(p3=cadr(stack[n]),p4=caddr(stack[n]),!isnegativenumber(p4)&&(push(p2),push(p3),divide(),p5=pop(),!!isinteger(p5)))){if(DEBUG_MULTIPLY&&console.log("__new radical p5: "+p5.toString()),DEBUG_MULTIPLY&&console.log("__new radical top stack: "+stack[tos-1]),p2=p5,push_symbol(POWER),push(p3),push(p4),DEBUG_MULTIPLY&&console.log("__new radical p3: "+p3.toString()),DEBUG_MULTIPLY&&console.log("__new radical p4: "+p4.toString()),push(one),subtract(),dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication&&isinteger(p3)&&!isinteger(stack[tos-1])&&isnegativenumber(stack[tos-1])){pop(),pop(),pop(),push(p1),push(p3),divide(),p1=pop();break}DEBUG_MULTIPLY&&console.log("__new radical exponent: "+stack[tos-1]),list(3),stack[n]=pop()}return push(p1),push(p2),divide(),stack[t]=pop(),restore()}}},__is_radical_number=function(t){return car(t)===symbol(POWER)&&isNumericAtom(cadr(t))&&isfraction(caddr(t))&&!isminusone(cadr(t))},NROOTS_YMAX=101,NROOTS_DELTA=1e-6,NROOTS_EPSILON=1e-9,NROOTS_ABS=function(t){return Math.sqrt(t.r*t.r+t.i*t.i)},NROOTS_RANDOM=function(){return 4*Math.random()-2},numericRootOfPolynomial=(function(){class t{}return t.prototype.r=0,t.prototype.i=0,t}).call(this),nroots_a=new numericRootOfPolynomial,nroots_b=new numericRootOfPolynomial,nroots_x=new numericRootOfPolynomial,nroots_y=new numericRootOfPolynomial,nroots_fa=new numericRootOfPolynomial,nroots_fb=new numericRootOfPolynomial,nroots_dx=new numericRootOfPolynomial,nroots_df=new numericRootOfPolynomial,nroots_c=[],initNRoots=o=0,ref=NROOTS_YMAX;0<=ref?o<ref:o>ref;initNRoots=0<=ref?++o:--o)nroots_c[initNRoots]=new numericRootOfPolynomial;for(Eval_nroots=function(){var t,n,a,s,l,u,c,p,d;for(t=0,n=0,l=0,c=0,push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2)||stop("nroots: polynomial?"),t=tos,c=coeff(p2,p1),c>NROOTS_YMAX&&stop("nroots: degree?"),n=a=0,p=c;0<=p?a<p:a>p;n=0<=p?++a:--a)push(stack[t+n]),real(),yyfloat(),Eval(),p1=pop(),push(stack[t+n]),imag(),yyfloat(),Eval(),p2=pop(),(!isdouble(p1)||!isdouble(p2))&&stop("nroots: coefficients?"),nroots_c[n].r=p1.d,nroots_c[n].i=p2.d;for(moveTos(t),monic(c),l=s=c;s>1;l=s+=-1)findroot(l),Math.abs(nroots_a.r)<NROOTS_DELTA&&(nroots_a.r=0),Math.abs(nroots_a.i)<NROOTS_DELTA&&(nroots_a.i=0),push_double(nroots_a.r),push_double(nroots_a.i),push(imaginaryunit),multiply(),add(),NROOTS_divpoly(l);if(c=tos-t,c>1){for(sort_stack(c),p1=alloc_tensor(c),p1.tensor.ndim=1,p1.tensor.dim[0]=c,n=u=0,d=c;0<=d?u<d:u>d;n=0<=d?++u:--u)p1.tensor.elem[n]=stack[t+n];return moveTos(t),push(p1)}},monic=function(t){var n,a,s,l;for(a=0,l=0,nroots_y.r=nroots_c[t-1].r,nroots_y.i=nroots_c[t-1].i,l=nroots_y.r*nroots_y.r+nroots_y.i*nroots_y.i,a=n=0,s=t-1;0<=s?n<s:n>s;a=0<=s?++n:--n)nroots_c[a].r=(nroots_c[a].r*nroots_y.r+nroots_c[a].i*nroots_y.i)/l,nroots_c[a].i=(nroots_c[a].i*nroots_y.r-nroots_c[a].r*nroots_y.i)/l;return nroots_c[t-1].r=1,nroots_c[t-1].i=0},findroot=function(t){var n,a,s,l;if(l=0,NROOTS_ABS(nroots_c[0])<NROOTS_DELTA){nroots_a.r=0,nroots_a.i=0;return}for(n=0;n<100;++n)for(nroots_a.r=NROOTS_RANDOM(),nroots_a.i=NROOTS_RANDOM(),compute_fa(t),nroots_b.r=nroots_a.r,nroots_b.i=nroots_a.i,nroots_fb.r=nroots_fa.r,nroots_fb.i=nroots_fa.i,nroots_a.r=NROOTS_RANDOM(),nroots_a.i=NROOTS_RANDOM(),a=0;a<1e3;++a){if(compute_fa(t),s=NROOTS_ABS(nroots_fa),DEBUG&&console.log("nrabs: "+s),s<NROOTS_EPSILON)return;if(NROOTS_ABS(nroots_fa)<NROOTS_ABS(nroots_fb)&&(nroots_x.r=nroots_a.r,nroots_x.i=nroots_a.i,nroots_a.r=nroots_b.r,nroots_a.i=nroots_b.i,nroots_b.r=nroots_x.r,nroots_b.i=nroots_x.i,nroots_x.r=nroots_fa.r,nroots_x.i=nroots_fa.i,nroots_fa.r=nroots_fb.r,nroots_fa.i=nroots_fb.i,nroots_fb.r=nroots_x.r,nroots_fb.i=nroots_x.i),nroots_dx.r=nroots_b.r-nroots_a.r,nroots_dx.i=nroots_b.i-nroots_a.i,nroots_df.r=nroots_fb.r-nroots_fa.r,nroots_df.i=nroots_fb.i-nroots_fa.i,l=nroots_df.r*nroots_df.r+nroots_df.i*nroots_df.i,l===0)break;nroots_y.r=(nroots_dx.r*nroots_df.r+nroots_dx.i*nroots_df.i)/l,nroots_y.i=(nroots_dx.i*nroots_df.r-nroots_dx.r*nroots_df.i)/l,nroots_a.r=nroots_b.r-(nroots_y.r*nroots_fb.r-nroots_y.i*nroots_fb.i),nroots_a.i=nroots_b.i-(nroots_y.r*nroots_fb.i+nroots_y.i*nroots_fb.r)}return stop("nroots: convergence error")},compute_fa=function(t){var n,a,s,l,u;for(a=0,u=0,nroots_x.r=nroots_a.r,nroots_x.i=nroots_a.i,nroots_fa.r=nroots_c[0].r+nroots_c[1].r*nroots_x.r-nroots_c[1].i*nroots_x.i,nroots_fa.i=nroots_c[0].i+nroots_c[1].r*nroots_x.i+nroots_c[1].i*nroots_x.r,l=[],a=n=2,s=t;2<=s?n<s:n>s;a=2<=s?++n:--n)u=nroots_a.r*nroots_x.r-nroots_a.i*nroots_x.i,nroots_x.i=nroots_a.r*nroots_x.i+nroots_a.i*nroots_x.r,nroots_x.r=u,nroots_fa.r+=nroots_c[a].r*nroots_x.r-nroots_c[a].i*nroots_x.i,l.push(nroots_fa.i+=nroots_c[a].r*nroots_x.i+nroots_c[a].i*nroots_x.r);return l},NROOTS_divpoly=function(t){var n,a,s,l,u,c;for(s=0,s=n=l=t-1;l<=0?n<0:n>0;s=l<=0?++n:--n)nroots_c[s-1].r+=nroots_c[s].r*nroots_a.r-nroots_c[s].i*nroots_a.i,nroots_c[s-1].i+=nroots_c[s].i*nroots_a.r+nroots_c[s].r*nroots_a.i;for(NROOTS_ABS(nroots_c[0])>NROOTS_DELTA&&stop("nroots: residual error"),c=[],s=a=0,u=t-1;0<=u?a<u:a>u;s=0<=u?++a:--a)nroots_c[s].r=nroots_c[s+1].r,c.push(nroots_c[s].i=nroots_c[s+1].i);return c},Eval_numerator=function(){return push(cadr(p1)),Eval(),numerator()},numerator=function(){var t,n;if(t=0,n=pop(),car(n)===symbol(ADD)&&(push(n),rationalize(),n=pop()),car(n)===symbol(MULTIPLY)&&!isplusone(car(cdr(n)))){for(t=tos,n=cdr(n);iscons(n);)push(car(n)),numerator(),n=cdr(n);return multiply_all(tos-t)}else return isrational(n)?(push(n),mp_numerator()):car(n)===symbol(POWER)&&isnegativeterm(caddr(n))?push(one):push(n)},Eval_outer=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),outer(),t.push(p1=cdr(p1));return t},outer=function(){return save(),p2=pop(),p1=pop(),istensor(p1)&&istensor(p2)?yyouter():(push(p1),push(p2),istensor(p1)?tensor_times_scalar():istensor(p2)?scalar_times_tensor():multiply()),restore()},yyouter=function(){var t,n,a,s,l,u,c,p,d,x,_,S,T;for(t=0,a=0,l=0,p=0,d=0,p=p1.tensor.ndim+p2.tensor.ndim,p>MAXDIM&&stop("outer: rank of result exceeds maximum"),d=p1.tensor.nelem*p2.tensor.nelem,p3=alloc_tensor(d),p3.tensor.ndim=p,t=n=0,x=p1.tensor.ndim;0<=x?n<x:n>x;t=0<=x?++n:--n)p3.tensor.dim[t]=p1.tensor.dim[t];for(a=t,t=s=0,_=p2.tensor.ndim;0<=_?s<_:s>_;t=0<=_?++s:--s)p3.tensor.dim[a+t]=p2.tensor.dim[t];for(l=0,t=u=0,S=p1.tensor.nelem;0<=S?u<S:u>S;t=0<=S?++u:--u)for(a=c=0,T=p2.tensor.nelem;0<=T?c<T:c>T;a=0<=T?++c:--c)push(p1.tensor.elem[t]),push(p2.tensor.elem[a]),multiply(),p3.tensor.elem[l++]=pop();return push(p3)},partition=function(){for(save(),p2=pop(),p1=pop(),push_integer(1),p3=pop(),p4=p3,p1=cdr(p1);iscons(p1);)Find(car(p1),p2)?(push(p4),push(car(p1)),multiply(),p4=pop()):(push(p3),push(car(p1)),multiply(),p3=pop()),p1=cdr(p1);return push(p3),push(p4),restore()},Eval_silentpattern=function(){return Eval_pattern(),pop(),push_symbol(NIL)},Eval_pattern=function(){var t,n,a,s,l;return iscons(cdr(p1))||stop("pattern needs at least a template and a transformed version"),t=car(cdr(p1)),a=car(cdr(cdr(p1))),a===symbol(NIL)&&stop("pattern needs at least a template and a transformed version"),iscons(cdr(cdr(p1)))?l=car(cdr(cdr(cdr(p1)))):l=symbol(NIL),equal(t,a)&&stop("recursive pattern"),s="template: "+print_list(t),s+=" tests: "+print_list(l),DEBUG&&console.log("pattern stringkey: "+s),n=userSimplificationsInStringForm.indexOf(s),n===-1?(userSimplificationsInStringForm.push(s),userSimplificationsInListForm.push(cdr(p1))):(DEBUG&&console.log("pattern already exists, replacing. "+cdr(p1)),userSimplificationsInStringForm[n]=s,userSimplificationsInListForm[n]=cdr(p1)),push_symbol(PATTERN),push(cdr(p1)),list(2)},do_clearPatterns=function(){return userSimplificationsInListForm=[],userSimplificationsInStringForm=[]},Eval_clearpatterns=function(){return do_clearPatterns(),push_symbol(NIL)},Eval_patternsinfo=function(){var t;return t=patternsinfo(),t!==""?push(new_string(t)):push_symbol(NIL)},patternsinfo=function(){var t,n,a;for(a="",t=0,n=userSimplificationsInListForm.length;t<n;t++)userSimplificationsInListForm[t],a+=userSimplificationsInListForm+`
`;return a},Eval_polar=function(){return push(cadr(p1)),Eval(),polar()},polar=function(){return evaluatingPolar++,save(),p1=pop(),push(p1),abs(),push(imaginaryunit),push(p1),arg(),multiply(),exponential(),multiply(),evaluatingPolar--,restore()},n_factor_number=0,factor_number=function(){var t;if(t=0,save(),p1=pop(),equaln(p1,0)||equaln(p1,1)||equaln(p1,-1)){push(p1),restore();return}return n_factor_number=p1.q.a,t=tos,factor_a(),tos-t>1&&(list(tos-t),push_symbol(MULTIPLY),swap(),cons()),restore()},factor_a=function(){var t,n;for(n=0,n_factor_number.isNegative()&&(n_factor_number=setSignTo(n_factor_number,1),push_integer(-1)),n=t=0;t<1e4;n=++t)if(try_kth_prime(n),n_factor_number.compare(1)===0)return;return factor_b()},try_kth_prime=function(t){var n,a,s,l;for(n=0,a=mint(primetab[t]),n=0;;){if(n_factor_number.compare(1)===0){n&&push_factor(a,n);return}if([s,l]=mdivrem(n_factor_number,a),l.isZero())n++,n_factor_number=s;else break}if(n&&push_factor(a,n),mcmp(s,a)===-1)return push_factor(n_factor_number,1),n_factor_number=mint(1)},factor_b=function(){var t,n,a,s,l,u,c;for(a=0,s=0,t=mint(1),u=mint(5),c=mint(2),a=1,s=1;;){if(mprime(n_factor_number))return push_factor(n_factor_number,1),0;for(;;){if(esc_flag&&stop("esc"),l=msub(c,u),l=setSignTo(l,1),n=mgcd(l,n_factor_number),MEQUAL(n,1)){--a===0&&(c=u,s*=2,a=s),l=mmul(u,u),u=madd(l,t),l=mmod(u,n_factor_number),u=l;continue}if(push_factor(n,1),mcmp(n,n_factor_number)===0)return-1;l=mdiv(n_factor_number,n),n_factor_number=l,l=mmod(u,n_factor_number),u=l,l=mmod(c,n_factor_number),c=l;break}}},push_factor=function(t,n){if(p1=new U,p1.k=NUM,p1.q.a=t,p1.q.b=mint(1),push(p1),n>1)return push_symbol(POWER),swap(),p1=new U,p1.k=NUM,p1.q.a=mint(n),p1.q.b=mint(1),push(p1),list(3)},DEBUG_POWER=!1,Eval_power=function(){if(DEBUG_POWER)debugger;return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),power()},power=function(){return save(),yypower(),restore()},yypower=function(){var t,n,a,s,l,u,c;if(DEBUG_POWER)debugger;if(c=0,p2=pop(),p1=pop(),s=p2,a=p1,DEBUG_POWER&&console.log("POWER: "+p1+" ^ "+p2),equal(p1,one)||isZeroAtomOrTensor(p2)){evaluatingAsFloats?push_double(1):push(one),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(equal(p2,one)){push(p1),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isminusone(p1)&&isminusone(p2)){evaluatingAsFloats?push_double(1):push(one),negate(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isminusone(p1)&&isoneovertwo(p2)){push(imaginaryunit),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isminusone(p1)&&isminusoneovertwo(p2)){push(imaginaryunit),negate(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isminusone(p1)&&!isdouble(p1)&&isrational(p2)&&!isinteger(p2)&&ispositivenumber(p2)&&!evaluatingAsFloats){DEBUG_POWER&&console.log("   power: -1 ^ rational"),DEBUG_POWER&&console.log(" trick: p2.q.a , p2.q.b "+p2.q.a+" , "+p2.q.b),p2.q.a<p2.q.b?(push_symbol(POWER),push(p1),push(p2),list(3)):(push_symbol(MULTIPLY),push(p1),push_symbol(POWER),push(p1),push_rational(p2.q.a.mod(p2.q.b),p2.q.b),list(3),list(3),DEBUG_POWER&&console.log(" trick applied : "+stack[tos-1])),rect(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isrational(p1)&&isrational(p2)){DEBUG_POWER&&console.log("   power: isrational(p1) && isrational(p2)"),push(p1),push(p2),qpow(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isNumericAtom(p1)&&isNumericAtom(p2)){DEBUG_POWER&&console.log("   power: both base and exponent are either rational or double "),DEBUG_POWER&&console.log("POWER - isNumericAtom(p1) && isNumericAtom(p2)"),push(p1),push(p2),dpow(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(istensor(p1)){DEBUG_POWER&&console.log("   power: istensor(p1) "),power_tensor(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(car(p1)===symbol(ABS)&&iseveninteger(p2)&&!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))){DEBUG_POWER&&console.log("   power: even power of absolute of real value "),push(cadr(p1)),push(p2),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(p1===symbol(E)&&car(p2)===symbol(LOG)){push(cadr(p2)),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(p1===symbol(E)&&isdouble(p2)){DEBUG_POWER&&console.log("   power: p1 == symbol(E) && isdouble(p2) "),push_double(Math.exp(p2.d)),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(p1===symbol(E)&&Find(p2,imaginaryunit)!==0&&Find(p2,symbol(PI))!==0&&!evaluatingPolar&&(push_symbol(POWER),push(p1),push(p2),list(3),DEBUG_POWER&&console.log("   power: turning complex exponential to rect: "+stack[tos-1]),rect(),n=pop(),Find(n,symbol(PI))===0)){DEBUG_POWER&&console.log("   power: turned complex exponential to rect: "+n),push(n);return}if(car(p1)===symbol(MULTIPLY)&&isinteger(p2)){for(DEBUG_POWER&&console.log("   power: (a * b) ^ c  ->  (a ^ c) * (b ^ c) "),p1=cdr(p1),push(car(p1)),push(p2),power(),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),power(),multiply(),p1=cdr(p1);DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(u=!1,isNumericAtom(cadr(p1))&&(u=sign(compare_numbers(cadr(p1),zero))),car(p1)===symbol(POWER)&&(isinteger(p2)||u)){push(cadr(p1)),push(caddr(p1)),push(p2),multiply(),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(t=!1,iseveninteger(caddr(p1))&&(push(caddr(p1)),push(p2),multiply(),l=pop(),isone(l)&&(t=!0)),car(p1)===symbol(POWER)&&t){DEBUG_POWER&&console.log("   power: car(p1) == symbol(POWER) && b_isEven_and_c_isItsInverse "),push(cadr(p1)),abs(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(expanding&&isadd(p1)&&isNumericAtom(p2)&&(push(p2),c=pop_integer(),c>1&&!isNaN(c))){DEBUG_POWER&&console.log("   power: expanding && isadd(p1) && isNumericAtom(p2) "),power_sum(c),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(trigmode===1&&car(p1)===symbol(SIN)&&iseveninteger(p2)){DEBUG_POWER&&console.log("   power: trigmode == 1 && car(p1) == symbol(SIN) && iseveninteger(p2) "),push_integer(1),push(cadr(p1)),cosine(),push_integer(2),power(),subtract(),push(p2),push_rational(1,2),multiply(),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(trigmode===2&&car(p1)===symbol(COS)&&iseveninteger(p2)){DEBUG_POWER&&console.log("   power: trigmode == 2 && car(p1) == symbol(COS) && iseveninteger(p2) "),push_integer(1),push(cadr(p1)),sine(),push_integer(2),power(),subtract(),push(p2),push_rational(1,2),multiply(),power(),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(iscomplexnumber(p1)){if(DEBUG_POWER&&console.log(" power - handling the case (a + ib) ^ n"),isinteger(p2)){push(p1),conjugate(),p3=pop(),push(p3),push(p3),push(p1),multiply(),divide(),isone(p2)||(push(p2),negate(),power()),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}if(isNumericAtom(p2)){push(p1),abs(),push(p2),power(),push_integer(-1),push(p1),arg(),push(p2),multiply(),evaluatingAsFloats||iscomplexnumberdouble(p1)&&isdouble(p2)?push_double(Math.PI):push(symbol(PI)),divide(),power(),multiply(),avoidCalculatingPowersIntoArctans&&Find(stack[tos-1],symbol(ARCTAN))&&(pop(),push_symbol(POWER),push(p1),push(p2),list(3)),DEBUG_POWER&&console.log("   power of "+a+" ^ "+s+": "+stack[tos-1]);return}}if(simplify_polar()){DEBUG_POWER&&console.log("   power: using simplify_polar");return}if(DEBUG_POWER&&console.log("   power: nothing can be done "),push_symbol(POWER),push(p1),push(p2),list(3),DEBUG_POWER)return console.log("   power of "+a+" ^ "+s+": "+stack[tos-1])},power_sum=function(t){var n,a,s,l,u,c,p,d,x,_;for(n=[],a=0,l=0,c=0,c=length(p1)-1,push_frame(c*(t+1)),p1=cdr(p1),a=s=0,d=c;0<=d?s<d:s>d;a=0<=d?++s:--s){for(l=u=0,x=t;0<=x?u<=x:u>=x;l=0<=x?++u:--u)push(car(p1)),push_integer(l),power(),stack[frame+a*(t+1)+l]=pop();p1=cdr(p1)}for(push_integer(t),factorial(),p1=pop(),a=p=0,_=c;0<=_?p<_:p>_;a=0<=_?++p:--p)n[a]=0;return push(zero),multinomial_sum(c,t,n,0,t),pop_frame(c*(t+1))},multinomial_sum=function(t,n,a,s,l){var u,c,p,d,x,_,S;if(c=0,s<t-1){for(c=u=0,x=l;0<=x?u<=x:u>=x;c=0<=x?++u:--u)a[s]=c,multinomial_sum(t,n,a,s+1,l-c);return}for(a[s]=l,push(p1),c=p=0,_=t;0<=_?p<_:p>_;c=0<=_?++p:--p)push_integer(a[c]),factorial(),divide();for(c=d=0,S=t;0<=S?d<S:d>S;c=0<=S?++d:--d)push(stack[frame+c*(n+1)+a[c]]),multiply();return add()},simplify_polar=function(){var t;switch(t=0,t=isquarterturn(p2),t){case 0:break;case 1:return push_integer(1),1;case 2:return push_integer(-1),1;case 3:return push(imaginaryunit),1;case 4:return push(imaginaryunit),negate(),1}if(car(p2)===symbol(ADD)){for(p3=cdr(p2);iscons(p3)&&(t=isquarterturn(car(p3)),!t);)p3=cdr(p3);switch(t){case 0:return 0;case 1:push_integer(1);break;case 2:push_integer(-1);break;case 3:push(imaginaryunit);break;case 4:push(imaginaryunit),negate()}return push(p2),push(car(p3)),subtract(),exponential(),multiply(),1}return 0},Eval_prime=function(){return push(cadr(p1)),Eval(),prime()},prime=function(){var t;return t=0,t=pop_integer(),(t<1||t>MAXPRIMETAB)&&stop("prime: Argument out of range."),t=primetab[t-1],push_integer(t)},power_str="^",codeGen=!1,Eval_print=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),printMode),push(symbol(NIL))},Eval_print2dascii=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_2DASCII),push(symbol(NIL))},Eval_printcomputer=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_COMPUTER),push(symbol(NIL))},Eval_printlatex=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_LATEX),push(symbol(NIL))},Eval_printhuman=function(){var t;return t=test_flag,test_flag=0,stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_HUMAN),test_flag=t,push(symbol(NIL))},Eval_printlist=function(){var t;return t=_print(cdr(p1),PRINTMODE_LIST),stringsEmittedByUserPrintouts+=t,push(symbol(NIL))},_print=function(t,n){var a,s;for(a="";iscons(t);)push(car(t)),Eval(),p2=pop(),s=printMode,n===PRINTMODE_COMPUTER?(printMode=PRINTMODE_COMPUTER,a=printline(p2),rememberPrint(a,LAST_FULL_PRINT)):n===PRINTMODE_HUMAN?(printMode=PRINTMODE_HUMAN,a=printline(p2),rememberPrint(a,LAST_PLAIN_PRINT)):n===PRINTMODE_2DASCII?(printMode=PRINTMODE_2DASCII,a=print2dascii(p2),rememberPrint(a,LAST_2DASCII_PRINT)):n===PRINTMODE_LATEX?(printMode=PRINTMODE_LATEX,a=printline(p2),rememberPrint(a,LAST_LATEX_PRINT)):n===PRINTMODE_LIST&&(printMode=PRINTMODE_LIST,a=print_list(p2),rememberPrint(a,LAST_LIST_PRINT)),printMode=s,t=cdr(t);return DEBUG&&console.log("emttedString from display: "+stringsEmittedByUserPrintouts),a},rememberPrint=function(t,n){var a;return scan('"'+t+'"'),a=pop(),set_binding(symbol(n),a)},print_str=function(t){return DEBUG&&console.log("emttedString from print_str: "+stringsEmittedByUserPrintouts),t},print_char=function(t){return t},collectLatexStringFromReturnValue=function(t){var n,a,s;return n=printMode,printMode=PRINTMODE_LATEX,a=codeGen,codeGen=!1,s=print_expr(t),s=s.replace(/_/g,"\\_"),printMode=n,codeGen=a,DEBUG&&console.log("emttedString from collectLatexStringFromReturnValue: "+stringsEmittedByUserPrintouts),s},printline=function(t){var n;return n="",n+=print_expr(t),n},print_base_of_denom=function(t){var n;return n="",isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||lessp(t,zero)?(n+=print_char("("),n+=print_expr(t),n+=print_char(")")):n+=print_expr(t),n},print_expo_of_denom=function(t){var n;return n="",isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)?(n+=print_char("("),n+=print_expr(t),n+=print_char(")")):n+=print_expr(t),n},print_denom=function(t,n){var a;return a="",save(),p1=cadr(t),p2=caddr(t),isminusone(p2)?(a+=print_base_of_denom(p1),restore(),a):(n===1&&(a+=print_char("(")),push(p2),negate(),p2=pop(),a+=print_power(p1,p2),n===1&&(a+=print_char(")")),restore(),a)},print_a_over_b=function(t){var n,a,s;for(n="",flag=0,s=0,a=0,save(),s=0,a=0,p1=cdr(t),p2=car(p1),isrational(p2)?(push(p2),mp_numerator(),absval(),p3=pop(),push(p2),mp_denominator(),p4=pop(),isplusone(p3)||s++,isplusone(p4)||a++,p1=cdr(p1)):(p3=one,p4=one);iscons(p1);)p2=car(p1),is_denominator(p2)?a++:s++,p1=cdr(p1);if(printMode===PRINTMODE_LATEX&&(n+=print_str("\\frac{")),s===0)n+=print_char("1");else for(flag=0,p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1)),isplusone(p3)||(n+=print_factor(p3),flag=1);iscons(p1);)p2=car(p1),is_denominator(p2)||(flag&&(n+=print_multiply_sign()),n+=print_factor(p2),flag=1),p1=cdr(p1);for(printMode===PRINTMODE_LATEX?n+=print_str("}{"):printMode===PRINTMODE_HUMAN&&!test_flag?n+=print_str(" / "):n+=print_str("/"),a>1&&printMode!==PRINTMODE_LATEX&&(n+=print_char("(")),flag=0,p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1)),isplusone(p4)||(n+=print_factor(p4),flag=1);iscons(p1);)p2=car(p1),is_denominator(p2)&&(flag&&(n+=print_multiply_sign()),n+=print_denom(p2,a),flag=1),p1=cdr(p1);return a>1&&printMode!==PRINTMODE_LATEX&&(n+=print_char(")")),printMode===PRINTMODE_LATEX&&(n+=print_str("}")),restore(),n},print_expr=function(t){var n;if(n="",isadd(t))for(t=cdr(t),sign_of_term(car(t))==="-"&&(n+=print_str("-")),n+=print_term(car(t)),t=cdr(t);iscons(t);)sign_of_term(car(t))==="+"?printMode===PRINTMODE_HUMAN&&!test_flag?n+=print_str(" + "):n+=print_str("+"):printMode===PRINTMODE_HUMAN&&!test_flag?n+=print_str(" - "):n+=print_str("-"),n+=print_term(car(t)),t=cdr(t);else sign_of_term(t)==="-"&&(n+=print_str("-")),n+=print_term(t);return n},sign_of_term=function(t){var n;return n="",car(t)===symbol(MULTIPLY)&&isNumericAtom(cadr(t))&&lessp(cadr(t),zero)||isNumericAtom(t)&&lessp(t,zero)?n+="-":n+="+",n},print_term=function(t){var n,a,s,l,u;if(n="",car(t)===symbol(MULTIPLY)&&any_denominators(t))return n+=print_a_over_b(t),n;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),isminusone(car(t))&&(t=cdr(t)),u=!1,isNumericAtom(car(t))&&(u=!0),s=!1,printMode===PRINTMODE_LATEX&&iscons(cdr(t))&&isNumberOneOverSomething(car(t))&&(s=!0,a=car(t).q.b.toString()),s?(l=n,n=""):n+=print_factor(car(t)),t=cdr(t);iscons(t);)printMode===PRINTMODE_LATEX&&u&&caar(t)===symbol(POWER)&&isNumericAtom(car(cdr(car(t))))&&(isfraction(car(cdr(cdr(car(t)))))||(n+=" \\cdot ")),n+=print_multiply_sign(),n+=print_factor(car(t),!1,!0),u=!1,isNumericAtom(car(t))&&(u=!0),t=cdr(t);s&&(n=l+"\\frac{"+n+"}{"+a+"}")}else n+=print_factor(t);return n},print_subexpr=function(t){var n;return n="",n+=print_char("("),n+=print_expr(t),n+=print_char(")"),n},print_factorial_function=function(t){var n;return n="",t=cadr(t),isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||car(t)===symbol(FACTORIAL)?n+=print_subexpr(t):n+=print_expr(t),n+=print_char("!"),n},print_ABS_latex=function(t){var n;return n="",n+=print_str("\\left |"),n+=print_expr(cadr(t)),n+=print_str(" \\right |"),n},print_BINOMIAL_latex=function(t){var n;return n="",n+=print_str("\\binom{"),n+=print_expr(cadr(t)),n+=print_str("}{"),n+=print_expr(caddr(t)),n+=print_str("} "),n},print_DOT_latex=function(t){var n;return n="",n+=print_expr(cadr(t)),n+=print_str(" \\cdot "),n+=print_expr(caddr(t)),n},print_DOT_codegen=function(t){var n;return n="dot(",n+=print_expr(cadr(t)),n+=", ",n+=print_expr(caddr(t)),n+=")",n},print_SIN_codegen=function(t){var n;return n="Math.sin(",n+=print_expr(cadr(t)),n+=")",n},print_COS_codegen=function(t){var n;return n="Math.cos(",n+=print_expr(cadr(t)),n+=")",n},print_TAN_codegen=function(t){var n;return n="Math.tan(",n+=print_expr(cadr(t)),n+=")",n},print_ARCSIN_codegen=function(t){var n;return n="Math.asin(",n+=print_expr(cadr(t)),n+=")",n},print_ARCCOS_codegen=function(t){var n;return n="Math.acos(",n+=print_expr(cadr(t)),n+=")",n},print_ARCTAN_codegen=function(t){var n;return n="Math.atan(",n+=print_expr(cadr(t)),n+=")",n},print_SQRT_latex=function(t){var n;return n="",n+=print_str("\\sqrt{"),n+=print_expr(cadr(t)),n+=print_str("} "),n},print_TRANSPOSE_latex=function(t){var n;return n="",n+=print_str("{"),iscons(cadr(t))&&(n+=print_str("(")),n+=print_expr(cadr(t)),iscons(cadr(t))&&(n+=print_str(")")),n+=print_str("}"),n+=print_str("^T"),n},print_TRANSPOSE_codegen=function(t){var n;return n="",n+=print_str("transpose("),n+=print_expr(cadr(t)),n+=print_str(")"),n},print_UNIT_codegen=function(t){var n;return n="",n+=print_str("identity("),n+=print_expr(cadr(t)),n+=print_str(")"),n},print_INV_latex=function(t){var n;return n="",n+=print_str("{"),iscons(cadr(t))&&(n+=print_str("(")),n+=print_expr(cadr(t)),iscons(cadr(t))&&(n+=print_str(")")),n+=print_str("}"),n+=print_str("^{-1}"),n},print_INV_codegen=function(t){var n;return n="",n+=print_str("inv("),n+=print_expr(cadr(t)),n+=print_str(")"),n},print_DEFINT_latex=function(t){var n,a,s,l,u,c,p,d,x;for(n="",a=car(cdr(t)),t=cdr(t),c=t,u=0;iscons(cdr(cdr(t)));)u++,d=cdr(cdr(t)),n+=print_str("\\int^{"),n+=print_expr(car(cdr(d))),n+=print_str("}_{"),n+=print_expr(car(d)),n+=print_str("} \\! "),t=cdr(d);for(n+=print_expr(a),n+=print_str(" \\,"),t=c,s=l=1,p=u;1<=p?l<=p:l>=p;s=1<=p?++l:--l)x=cdr(t),n+=print_str(" \\mathrm{d} "),n+=print_expr(car(x)),s<u&&(n+=print_str(" \\, ")),t=cdr(cdr(x));return n},print_tensor=function(t){var n;return n="",n+=print_tensor_inner(t,0,0)[1],n},print_tensor_inner=function(t,n,a){var s,l,u,c,p,d,x;if(s="",s+=print_str("["),n<t.tensor.ndim-1)for(l=u=0,p=t.tensor.dim[n];0<=p?u<p:u>p;l=0<=p?++u:--u)[a,x]=print_tensor_inner(t,n+1,a),s+=x,l!==t.tensor.dim[n]-1&&(s+=print_str(","));else for(l=c=0,d=t.tensor.dim[n];0<=d?c<d:c>d;l=0<=d?++c:--c)s+=print_expr(t.tensor.elem[a]),l!==t.tensor.dim[n]-1&&(s+=print_str(",")),a++;return s+=print_str("]"),[a,s]},print_tensor_latex=function(t){var n;return n="",t.tensor.ndim<=2&&(n+=print_tensor_inner_latex(!0,t,0,0)[1]),n},print_tensor_inner_latex=function(t,n,a,s){var l,u,c,p,d,x,_;if(l="",t&&(l+="\\begin{bmatrix} "),a<n.tensor.ndim-1)for(u=c=0,d=n.tensor.dim[a];0<=d?c<d:c>d;u=0<=d?++c:--c)[s,_]=print_tensor_inner_latex(0,n,a+1,s),l+=_,u!==n.tensor.dim[a]-1&&(l+=print_str(" \\\\ "));else for(u=p=0,x=n.tensor.dim[a];0<=x?p<x:p>x;u=0<=x?++p:--p)l+=print_expr(n.tensor.elem[s]),u!==n.tensor.dim[a]-1&&(l+=print_str(" & ")),s++;return t&&(l+=" \\end{bmatrix}"),[s,l]},print_SUM_latex=function(t){var n;return n="\\sum_{",n+=print_expr(caddr(t)),n+="=",n+=print_expr(cadddr(t)),n+="}^{",n+=print_expr(caddddr(t)),n+="}{",n+=print_expr(cadr(t)),n+="}",n},print_SUM_codegen=function(t){var n,a,s,l,u;return a=cadr(t),u=caddr(t),s=cadddr(t),l=caddddr(t),n="(function(){ var "+u+";  var holderSum = 0;  var lowerlimit = "+print_expr(s)+";  var upperlimit = "+print_expr(l)+";  for ("+u+" = lowerlimit; "+u+" < upperlimit; "+u+"++) {    holderSum += "+print_expr(a)+"; }  return holderSum;})()",n},print_TEST_latex=function(t){var n;for(n="\\left\\{ \\begin{array}{ll}",t=cdr(t);iscons(t);){if(cdr(t)===symbol(NIL)){n+="{",n+=print_expr(car(t)),n+="} & otherwise ",n+=" \\\\\\\\";break}n+="{",n+=print_expr(cadr(t)),n+="} & if & ",n+=print_expr(car(t)),n+=" \\\\\\\\",t=cddr(t)}return n=n.substring(0,n.length-4),n+="\\end{array} \\right."},print_TEST_codegen=function(t){var n,a;for(n="(function(){",t=cdr(t),a=0;iscons(t);){if(cdr(t)===symbol(NIL)){n+="else {",n+="return ("+print_expr(car(t))+");",n+="}";break}a&&(n+=" else "),n+="if ("+print_expr(car(t))+"){",n+="return ("+print_expr(cadr(t))+");",n+="}",a++,t=cddr(t)}return n+="})()",n},print_TESTLT_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" < ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTLE_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" \\leq ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTGT_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" > ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTGE_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" \\geq ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_TESTEQ_latex=function(t){var n;return n="{",n+=print_expr(cadr(t)),n+="}",n+=" = ",n+="{",n+=print_expr(caddr(t)),n+="}"},print_FOR_codegen=function(t){var n,a,s,l,u;return a=cadr(t),u=caddr(t),s=cadddr(t),l=caddddr(t),n="(function(){ var "+u+";  var lowerlimit = "+print_expr(s)+";  var upperlimit = "+print_expr(l)+";  for ("+u+" = lowerlimit; "+u+" < upperlimit; "+u+"++) {    "+print_expr(a)+" } })()",n},print_DO_codegen=function(t){var n;for(n="",t=cdr(t);iscons(t);)n+=print_expr(car(t)),t=cdr(t);return n},print_SETQ_codegen=function(t){var n;return n="",n+=print_expr(cadr(t)),n+=" = ",n+=print_expr(caddr(t)),n+="; ",n},print_PRODUCT_latex=function(t){var n;return n="\\prod_{",n+=print_expr(caddr(t)),n+="=",n+=print_expr(cadddr(t)),n+="}^{",n+=print_expr(caddddr(t)),n+="}{",n+=print_expr(cadr(t)),n+="}",n},print_PRODUCT_codegen=function(t){var n,a,s,l,u;return a=cadr(t),u=caddr(t),s=cadddr(t),l=caddddr(t),n="(function(){ var "+u+";  var holderProduct = 1;  var lowerlimit = "+print_expr(s)+";  var upperlimit = "+print_expr(l)+";  for ("+u+" = lowerlimit; "+u+" < upperlimit; "+u+"++) {    holderProduct *= "+print_expr(a)+"; }  return holderProduct;})()",n},print_power=function(t,n){var a,s,l,u;if(a="",DEBUG&&console.log("power base: "+t+"  exponent: "+n),isoneovertwo(n))if(equaln(t,2)){if(codeGen)return a+=print_str("Math.SQRT2"),a}else{if(printMode===PRINTMODE_LATEX)return a+=print_str("\\sqrt{"),a+=print_expr(t),a+=print_str("}"),a;if(codeGen)return a+=print_str("Math.sqrt("),a+=print_expr(t),a+=print_str(")"),a}if(equaln(get_binding(symbol(PRINT_LEAVE_E_ALONE)),1)&&t===symbol(E))return codeGen?(a+=print_str("Math.exp("),a+=print_expo_of_denom(n),a+=print_str(")"),a):(printMode===PRINTMODE_LATEX?(a+=print_str("e^{"),a+=print_expr(n),a+=print_str("}")):(a+=print_str("exp("),a+=print_expr(n),a+=print_str(")")),a);if(codeGen)return a+=print_str("Math.pow("),a+=print_base_of_denom(t),a+=print_str(", "),a+=print_expo_of_denom(n),a+=print_str(")"),a;if(equaln(get_binding(symbol(PRINT_LEAVE_X_ALONE)),0)||t.printname!=="x"){if(t!==symbol(E)){if(isminusone(n))return printMode===PRINTMODE_LATEX?a+=print_str("\\frac{1}{"):printMode===PRINTMODE_HUMAN&&!test_flag?a+=print_str("1 / "):a+=print_str("1/"),iscons(t)&&printMode!==PRINTMODE_LATEX?(a+=print_str("("),a+=print_expr(t),a+=print_str(")")):a+=print_expr(t),printMode===PRINTMODE_LATEX&&(a+=print_str("}")),a;if(isnegativeterm(n))return printMode===PRINTMODE_LATEX?a+=print_str("\\frac{1}{"):printMode===PRINTMODE_HUMAN&&!test_flag?a+=print_str("1 / "):a+=print_str("1/"),push(n),push_integer(-1),multiply(),l=pop(),iscons(t)&&printMode!==PRINTMODE_LATEX?(a+=print_str("("),a+=print_power(t,l),a+=print_str(")")):a+=print_power(t,l),printMode===PRINTMODE_LATEX&&(a+=print_str("}")),a}if(isfraction(n)&&printMode===PRINTMODE_LATEX)return a+=print_str("\\sqrt"),push(n),denominator(),s=pop(),isplustwo(s)||(a+=print_str("["),a+=print_expr(s),a+=print_str("]")),a+=print_str("{"),push(n),numerator(),u=pop(),n=u,a+=print_power(t,n),a+=print_str("}"),a}return printMode===PRINTMODE_LATEX&&isplusone(n)?a+=print_expr(t):(isadd(t)||isnegativenumber(t)?(a+=print_str("("),a+=print_expr(t),a+=print_str(")")):car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)?(printMode!==PRINTMODE_LATEX&&(a+=print_str("(")),a+=print_factor(t,!0),printMode!==PRINTMODE_LATEX&&(a+=print_str(")"))):isNumericAtom(t)&&(lessp(t,zero)||isfraction(t))?(a+=print_str("("),a+=print_factor(t),a+=print_str(")")):a+=print_factor(t),printMode===PRINTMODE_HUMAN&&!test_flag?a+=print_str(power_str):a+=print_str("^"),printMode===PRINTMODE_LATEX?print_expr(n).length>1?(a+=print_str("{"),a+=print_expr(n),a+=print_str("}")):a+=print_expr(n):iscons(n)||isfraction(n)||isNumericAtom(n)&&lessp(n,zero)?(a+=print_str("("),a+=print_expr(n),a+=print_str(")")):a+=print_factor(n)),a},print_index_function=function(t){var n;if(n="",t=cdr(t),caar(t)===symbol(ADD)||caar(t)===symbol(MULTIPLY)||caar(t)===symbol(POWER)||caar(t)===symbol(FACTORIAL)?n+=print_subexpr(car(t)):n+=print_expr(car(t)),n+=print_str("["),t=cdr(t),iscons(t))for(n+=print_expr(car(t)),t=cdr(t);iscons(t);)n+=print_str(","),n+=print_expr(car(t)),t=cdr(t);return n+=print_str("]"),n},print_factor=function(t,n,a){var s,l,u,c,p,d;if(s="",isNumericAtom(t))return a&&lessp(t,zero)&&(s+="("),s+=print_number(t,a),a&&lessp(t,zero)&&(s+=")"),s;if(isstr(t))return s+=print_str('"'),s+=print_str(t.str),s+=print_str('"'),s;if(istensor(t))return printMode===PRINTMODE_LATEX?s+=print_tensor_latex(t):s+=print_tensor(t),s;if(car(t)===symbol(MULTIPLY))return n||(sign_of_term(t)==="-"||printMode!==PRINTMODE_LATEX)&&(printMode===PRINTMODE_LATEX?s+=print_str(" \\left ("):s+=print_str("(")),s+=print_expr(t),n||(sign_of_term(t)==="-"||printMode!==PRINTMODE_LATEX)&&(printMode===PRINTMODE_LATEX?s+=print_str(" \\right ) "):s+=print_str(")")),s;if(isadd(t))return n||(s+=print_str("(")),s+=print_expr(t),n||(s+=print_str(")")),s;if(car(t)===symbol(POWER))return l=cadr(t),u=caddr(t),s+=print_power(l,u),s;if(car(t)===symbol(FUNCTION))return c=cadr(t),codeGen||(p=caddr(t),s+=print_str("function "),DEBUG&&console.log("emittedString from print_factor "+stringsEmittedByUserPrintouts),d=print_list(p),s+=d,s+=print_str(" -> ")),s+=print_expr(c),s;if(car(t)===symbol(PATTERN))return s+=print_expr(caadr(t)),printMode===PRINTMODE_LATEX?s+=print_str(" \\rightarrow "):printMode===PRINTMODE_HUMAN&&!test_flag?s+=print_str(" -> "):s+=print_str("->"),s+=print_expr(car(cdr(cadr(t)))),s;if(car(t)===symbol(INDEX)&&issymbol(cadr(t)))return s+=print_index_function(t),s;if(car(t)===symbol(FACTORIAL))return s+=print_factorial_function(t),s;if(car(t)===symbol(ABS)&&printMode===PRINTMODE_LATEX)return s+=print_ABS_latex(t),s;if(car(t)===symbol(SQRT)&&printMode===PRINTMODE_LATEX)return s+=print_SQRT_latex(t),s;if(car(t)===symbol(TRANSPOSE)){if(printMode===PRINTMODE_LATEX)return s+=print_TRANSPOSE_latex(t),s;if(codeGen)return s+=print_TRANSPOSE_codegen(t),s}else if(car(t)===symbol(UNIT)){if(codeGen)return s+=print_UNIT_codegen(t),s}else if(car(t)===symbol(INV)){if(printMode===PRINTMODE_LATEX)return s+=print_INV_latex(t),s;if(codeGen)return s+=print_INV_codegen(t),s}else{if(car(t)===symbol(BINOMIAL)&&printMode===PRINTMODE_LATEX)return s+=print_BINOMIAL_latex(t),s;if(car(t)===symbol(DEFINT)&&printMode===PRINTMODE_LATEX)return s+=print_DEFINT_latex(t),s;if(isinnerordot(t)){if(printMode===PRINTMODE_LATEX)return s+=print_DOT_latex(t),s;if(codeGen)return s+=print_DOT_codegen(t),s}else if(car(t)===symbol(SIN)){if(codeGen)return s+=print_SIN_codegen(t),s}else if(car(t)===symbol(COS)){if(codeGen)return s+=print_COS_codegen(t),s}else if(car(t)===symbol(TAN)){if(codeGen)return s+=print_TAN_codegen(t),s}else if(car(t)===symbol(ARCSIN)){if(codeGen)return s+=print_ARCSIN_codegen(t),s}else if(car(t)===symbol(ARCCOS)){if(codeGen)return s+=print_ARCCOS_codegen(t),s}else if(car(t)===symbol(ARCTAN)){if(codeGen)return s+=print_ARCTAN_codegen(t),s}else if(car(t)===symbol(SUM)){if(printMode===PRINTMODE_LATEX)return s+=print_SUM_latex(t),s;if(codeGen)return s+=print_SUM_codegen(t),s}else if(car(t)===symbol(PRODUCT)){if(printMode===PRINTMODE_LATEX)return s+=print_PRODUCT_latex(t),s;if(codeGen)return s+=print_PRODUCT_codegen(t),s}else if(car(t)===symbol(FOR)){if(codeGen)return s+=print_FOR_codegen(t),s}else if(car(t)===symbol(DO)){if(codeGen)return s+=print_DO_codegen(t),s}else if(car(t)===symbol(TEST)){if(codeGen)return s+=print_TEST_codegen(t),s;if(printMode===PRINTMODE_LATEX)return s+=print_TEST_latex(t),s}else if(car(t)===symbol(TESTLT)){if(codeGen)return s+="(("+print_expr(cadr(t))+") < ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTLT_latex(t),s}else if(car(t)===symbol(TESTLE)){if(codeGen)return s+="(("+print_expr(cadr(t))+") <= ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTLE_latex(t),s}else if(car(t)===symbol(TESTGT)){if(codeGen)return s+="(("+print_expr(cadr(t))+") > ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTGT_latex(t),s}else if(car(t)===symbol(TESTGE)){if(codeGen)return s+="(("+print_expr(cadr(t))+") >= ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTGE_latex(t),s}else if(car(t)===symbol(TESTEQ)){if(codeGen)return s+="(("+print_expr(cadr(t))+") === ("+print_expr(caddr(t))+"))",s;if(printMode===PRINTMODE_LATEX)return s+=print_TESTEQ_latex(t),s}else if(car(t)===symbol(FLOOR)){if(codeGen)return s+="Math.floor("+print_expr(cadr(t))+")",s;if(printMode===PRINTMODE_LATEX)return s+=" \\lfloor {"+print_expr(cadr(t))+"} \\rfloor ",s}else if(car(t)===symbol(CEILING)){if(codeGen)return s+="Math.ceiling("+print_expr(cadr(t))+")",s;if(printMode===PRINTMODE_LATEX)return s+=" \\lceil {"+print_expr(cadr(t))+"} \\rceil ",s}else if(car(t)===symbol(ROUND)){if(codeGen)return s+="Math.round("+print_expr(cadr(t))+")",s}else if(car(t)===symbol(SETQ))return codeGen?(s+=print_SETQ_codegen(t),s):(s+=print_expr(cadr(t)),s+=print_str("="),s+=print_expr(caddr(t)),s)}if(iscons(t)){if(s+=print_factor(car(t)),t=cdr(t),n||(s+=print_str("(")),iscons(t))for(s+=print_expr(car(t)),t=cdr(t);iscons(t);)s+=print_str(","),s+=print_expr(car(t)),t=cdr(t);return n||(s+=print_str(")")),s}return t===symbol(DERIVATIVE)?s+=print_char("d"):t===symbol(E)?codeGen?s+=print_str("Math.E"):s+=print_str("e"):t===symbol(PI)?printMode===PRINTMODE_LATEX?s+=print_str("\\pi"):s+=print_str("pi"):s+=print_str(get_printname(t)),s},print_list=function(t){var n;switch(n="",t.k){case CONS:if(n+="(",n+=print_list(car(t)),t===cdr(t)&&t!==symbol(NIL)){console.log("oh no recursive!");debugger}for(t=cdr(t);iscons(t);)if(n+=" ",n+=print_list(car(t)),t=cdr(t),t===cdr(t)&&t!==symbol(NIL)){console.log("oh no recursive!");debugger}t!==symbol(NIL)&&(n+=" . ",n+=print_list(t)),n+=")";break;case STR:n+=t.str;break;case NUM:case DOUBLE:n+=print_number(t,!0);break;case SYM:n+=get_printname(t);break;default:n+="<tensor>"}return n},print_multiply_sign=function(){var t;if(t="",printMode===PRINTMODE_LATEX)if(printMode===PRINTMODE_HUMAN&&!test_flag)t+=print_str(" ");else return t;return printMode===PRINTMODE_HUMAN&&!test_flag&&!codeGen?t+=print_str(" "):t+=print_str("*"),t},is_denominator=function(t){return car(t)===symbol(POWER)&&cadr(t)!==symbol(E)&&isnegativeterm(caddr(t))?1:0},any_denominators=function(t){var n;for(t=cdr(t);iscons(t);){if(n=car(t),is_denominator(n))return 1;t=cdr(t)}return 0},YMAX=1e4,glyph=(function(){class t{}return t.prototype.c=0,t.prototype.x=0,t.prototype.y=0,t}).call(this),chartab=[],charTabIndex=i1=0,ref1=YMAX;0<=ref1?i1<ref1:i1>ref1;charTabIndex=0<=ref1?++i1:--i1)chartab[charTabIndex]=new glyph;for(yindex=0,level=0,emit_x=0,expr_level=0,printchar_nowrap=function(t){var n;return n="",n+=t,n},printchar=function(t){return printchar_nowrap(t)},print2dascii=function(t){var n,a,s,l;if(a=0,s=0,l=0,save(),yindex=0,level=0,emit_x=0,emit_top_expr(t),[a,s,l]=get_size(0,yindex),s>100){printline(t),restore();return}return n=print_glyphs(),restore(),n},emit_top_expr=function(t){if(car(t)===symbol(SETQ)){emit_expr(cadr(t)),__emit_str(" = "),emit_expr(caddr(t));return}return istensor(t)?emit_tensor(t):emit_expr(t)},will_be_displayed_as_fraction=function(t){if(level>0)return 0;if(isfraction(t))return 1;if(car(t)!==symbol(MULTIPLY))return 0;if(isfraction(cadr(t)))return 1;for(;iscons(t);){if(isdenominator(car(t)))return 1;t=cdr(t)}return 0},emit_expr=function(t){if(expr_level++,car(t)===symbol(ADD))for(t=cdr(t),__is_negative(car(t))&&(__emit_char("-"),will_be_displayed_as_fraction(car(t))&&__emit_char(" ")),emit_term(car(t)),t=cdr(t);iscons(t);)__is_negative(car(t))?(__emit_char(" "),__emit_char("-"),__emit_char(" ")):(__emit_char(" "),__emit_char("+"),__emit_char(" ")),emit_term(car(t)),t=cdr(t);else __is_negative(t)&&(__emit_char("-"),will_be_displayed_as_fraction(t)&&__emit_char(" ")),emit_term(t);return expr_level--},emit_unsigned_expr=function(t){var n;if(car(t)===symbol(ADD)){for(t=cdr(t),emit_term(car(t)),t=cdr(t),n=[];iscons(t);)__is_negative(car(t))?(__emit_char(" "),__emit_char("-"),__emit_char(" ")):(__emit_char(" "),__emit_char("+"),__emit_char(" ")),emit_term(car(t)),n.push(t=cdr(t));return n}else return emit_term(t)},__is_negative=function(t){return isnegativenumber(t)||car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))?1:0},emit_term=function(t){var n;return car(t)===symbol(MULTIPLY)?(n=count_denominators(t),n&&level===0?emit_fraction(t,n):emit_multiply(t,n)):emit_factor(t)},isdenominator=function(t){return car(t)===symbol(POWER)&&cadr(t)!==symbol(E)&&__is_negative(caddr(t))?1:0},count_denominators=function(t){var n,a;for(n=0,t=cdr(t);iscons(t);)a=car(t),isdenominator(a)&&n++,t=cdr(t);return n},emit_multiply=function(t,n){var a;if(n===0){for(t=cdr(t),(isplusone(car(t))||isminusone(car(t)))&&(t=cdr(t)),emit_factor(car(t)),t=cdr(t),a=[];iscons(t);)__emit_char(" "),emit_factor(car(t)),a.push(t=cdr(t));return a}else return emit_numerators(t),__emit_char("/"),n>1||isfraction(cadr(t))?(__emit_char("("),emit_denominators(t),__emit_char(")")):emit_denominators(t)},emit_fraction=function(t,n){var a,s,l,u,c;for(a=0,s=0,l=0,u=0,c=0,save(),p3=one,p4=one,isrational(cadr(t))&&(push(cadr(t)),mp_numerator(),absval(),p3=pop(),push(cadr(t)),mp_denominator(),p4=pop()),isdouble(cadr(t))&&(push(cadr(t)),absval(),p3=pop()),isplusone(p3)?u=0:u=1,p1=cdr(t),isNumericAtom(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)||u++,p1=cdr(p1);for(c=emit_x,s=yindex,a=0,isplusone(p3)||(emit_number(p3,0),a++),p1=cdr(t),isNumericAtom(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)||(a>0&&__emit_char(" "),u===1?emit_expr(p2):emit_factor(p2),a++),p1=cdr(p1);for(a===0&&__emit_char("1"),l=yindex,a=0,isplusone(p4)||(emit_number(p4,0),a++,n++),p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)&&(a>0&&__emit_char(" "),emit_denominator(p2,n),a++),p1=cdr(p1);return fixup_fraction(c,s,l),restore()},emit_numerators=function(t){var n;for(save(),n=0,p1=one,t=cdr(t),isrational(car(t))?(push(car(t)),mp_numerator(),absval(),p1=pop(),t=cdr(t)):isdouble(car(t))&&(push(car(t)),absval(),p1=pop(),t=cdr(t)),n=0,isplusone(p1)||(emit_number(p1,0),n++);iscons(t);)isdenominator(car(t))||(n>0&&__emit_char(" "),emit_factor(car(t)),n++),t=cdr(t);return n===0&&__emit_char("1"),restore()},emit_denominators=function(t){var n;for(save(),n=0,t=cdr(t),isfraction(car(t))&&(push(car(t)),mp_denominator(),p1=pop(),emit_number(p1,0),n++,t=cdr(t));iscons(t);)isdenominator(car(t))&&(n>0&&__emit_char(" "),emit_denominator(car(t),0),n++),t=cdr(t);return restore()},emit_factor=function(t){if(istensor(t)){emit_flat_tensor(t);return}if(isdouble(t)){emit_number(t,0);return}if(car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)){emit_subexpr(t);return}if(car(t)===symbol(POWER)){emit_power(t);return}if(iscons(t)){emit_function(t);return}if(isNumericAtom(t)){level===0?emit_numerical_fraction(t):emit_number(t,0);return}if(issymbol(t)){emit_symbol(t);return}isstr(t)&&emit_string(t)},emit_numerical_fraction=function(t){var n,a,s;if(n=0,a=0,s=0,save(),push(t),mp_numerator(),absval(),p3=pop(),push(t),mp_denominator(),p4=pop(),isplusone(p4)){emit_number(p3,0),restore();return}return s=emit_x,n=yindex,emit_number(p3,0),a=yindex,emit_number(p4,0),fixup_fraction(s,n,a),restore()},isfactor=function(t){return iscons(t)&&car(t)!==symbol(ADD)&&car(t)!==symbol(MULTIPLY)&&car(t)!==symbol(POWER)||issymbol(t)?1:isfraction(t)||isnegativenumber(t)?0:isNumericAtom(t)?1:0},emit_power=function(t){var n,a,s;if(n=0,a=0,s=0,cadr(t)===symbol(E)){__emit_str("exp("),emit_expr(caddr(t)),__emit_char(")");return}if(level>0){isminusone(caddr(t))?(__emit_char("1"),__emit_char("/"),isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t))):(isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),__emit_char("^"),isfactor(caddr(t))?emit_factor(caddr(t)):emit_subexpr(caddr(t)));return}if(__is_negative(caddr(t))){s=emit_x,n=yindex,__emit_char("1"),a=yindex,emit_denominator(t,1),fixup_fraction(s,n,a);return}return n=yindex,isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),a=yindex,level++,emit_expr(caddr(t)),level--,fixup_power(n,a)},emit_denominator=function(t,n){var a,s;if(a=0,s=0,isminusone(caddr(t))){n===1?emit_expr(cadr(t)):emit_factor(cadr(t));return}return a=yindex,isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),s=yindex,level++,emit_unsigned_expr(caddr(t)),level--,fixup_power(a,s)},emit_function=function(t){if(car(t)===symbol(INDEX)&&issymbol(cadr(t))){emit_index_function(t);return}if(car(t)===symbol(FACTORIAL)){emit_factorial_function(t);return}if(car(t)===symbol(DERIVATIVE)?__emit_char("d"):emit_symbol(car(t)),__emit_char("("),t=cdr(t),iscons(t))for(emit_expr(car(t)),t=cdr(t);iscons(t);)__emit_char(","),emit_expr(car(t)),t=cdr(t);return __emit_char(")")},emit_index_function=function(t){if(t=cdr(t),caar(t)===symbol(ADD)||caar(t)===symbol(MULTIPLY)||caar(t)===symbol(POWER)||caar(t)===symbol(FACTORIAL)?emit_subexpr(car(t)):emit_expr(car(t)),__emit_char("["),t=cdr(t),iscons(t))for(emit_expr(car(t)),t=cdr(t);iscons(t);)__emit_char(","),emit_expr(car(t)),t=cdr(t);return __emit_char("]")},emit_factorial_function=function(t){return t=cadr(t),isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||car(t)===symbol(FACTORIAL)?emit_subexpr(t):emit_expr(t),__emit_char("!")},emit_subexpr=function(t){return __emit_char("("),emit_expr(t),__emit_char(")")},emit_symbol=function(t){var n,a,s,l,u;if(n=0,t===symbol(E)){__emit_str("exp(1)");return}for(s=get_printname(t),u=[],n=a=0,l=s.length;0<=l?a<l:a>l;n=0<=l?++a:--a)u.push(__emit_char(s[n]));return u},emit_string=function(t){var n,a,s,l;for(n=0,s=t.str,__emit_char('"'),n=a=0,l=s.length;0<=l?a<l:a>l;n=0<=l?++a:--a)__emit_char(s[n]);return __emit_char('"')},fixup_fraction=function(t,n,a){var s,l,u,c,p,d,x,_,S,T,A,R,D;for(s=0,l=0,_=0,A=0,u=0,S=0,R=0,c=0,T=0,D=0,[u,S,R]=get_size(n,a),[c,T,D]=get_size(a,yindex),T>S?s=(T-S)/2:s=0,s++,A=R+u-1,l=-A-1,move(n,a,s,l),T>S?s=-S:s=-S+(S-T)/2,s++,l=-D+1,move(a,yindex,s,l),T>S?_=T:_=S,_+=2,emit_x=t,x=[],p=0,d=_;0<=d?p<d:p>d;0<=d?++p:--p)x.push(__emit_char("-"));return x},fixup_power=function(t,n){var a,s,l,u,c,p,d;return a=0,s=0,u=0,p=0,l=0,c=0,d=0,[s,u,p]=get_size(t,n),[l,c,d]=get_size(n,yindex),a=-d-l+1,a+=p-1,move(n,yindex,0,a)},move=function(t,n,a,s){var l,u,c,p,d;for(l=0,d=[],l=u=c=t,p=n;c<=p?u<p:u>p;l=c<=p?++u:--u)chartab[l].x+=a,d.push(chartab[l].y+=s);return d},get_size=function(t,n){var a,s,l,u,c,p,d,x,_,S,T;for(s=0,p=chartab[t].x,u=chartab[t].x,d=chartab[t].y,c=chartab[t].y,s=l=x=t+1,_=n;x<=_?l<_:l>_;s=x<=_?++l:--l)chartab[s].x<p&&(p=chartab[s].x),chartab[s].x>u&&(u=chartab[s].x),chartab[s].y<d&&(d=chartab[s].y),chartab[s].y>c&&(c=chartab[s].y);return a=c-d+1,S=u-p+1,T=d,[a,S,T]},__emit_char=function(t){if(yindex!==YMAX){if(chartab[yindex]==null)debugger;return chartab[yindex].c=t,chartab[yindex].x=emit_x,chartab[yindex].y=0,yindex++,emit_x++}},__emit_str=function(t){var n,a,s,l;for(n=0,l=[],n=a=0,s=t.length;0<=s?a<s:a>s;n=0<=s?++a:--a)l.push(__emit_char(t[n]));return l},emit_number=function(t,n){var a,s,l,u,c,p,d,x,_,S;switch(S="",a=0,t.k){case NUM:for(S=t.q.a.toString(),S[0]==="-"&&n===0&&(S=S.substring(1)),a=s=0,c=S.length;0<=c?s<c:s>c;a=0<=c?++s:--s)__emit_char(S[a]);if(S=t.q.b.toString(),S==="1")break;for(__emit_char("/"),x=[],a=l=0,p=S.length;0<=p?l<p:l>p;a=0<=p?++l:--l)x.push(__emit_char(S[a]));return x;case DOUBLE:for(S=doubleToReasonableString(t.d),S[0]==="-"&&n===0&&(S=S.substring(1)),_=[],a=u=0,d=S.length;0<=d?u<d:u>d;a=0<=d?++u:--u)_.push(__emit_char(S[a]));return _}},cmpGlyphs=function(t,n){return t.y<n.y?-1:t.y>n.y?1:t.x<n.x?-1:t.x>n.x?1:0},print_glyphs=function(){var t,n,a,s,l,u,c;for(n=0,t="",l=chartab.slice(0,yindex),l.sort(cmpGlyphs),chartab=[].concat(l).concat(chartab.slice(yindex)),u=0,c=chartab[0].y,n=a=0,s=yindex;0<=s?a<s:a>s;n=0<=s?++a:--a){for(;chartab[n].y>c;)t+=printchar(`
`),u=0,c++;for(;chartab[n].x>u;)t+=printchar_nowrap(" "),u++;t+=printchar_nowrap(chartab[n].c),u++}return t},N=100,oneElement=(function(){class t{}return t.prototype.x=0,t.prototype.y=0,t.prototype.h=0,t.prototype.w=0,t.prototype.index=0,t.prototype.count=0,t}).call(this),elem=[],elelmIndex=j1=0;j1<1e4;elelmIndex=++j1)elem[elelmIndex]=new oneElement;SPACE_BETWEEN_COLUMNS=3,SPACE_BETWEEN_ROWS=1,emit_tensor=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j,Z,W,J;if(p=0,_=0,A=0,T=0,W=0,J=0,c=0,Z=0,a=0,s=0,l=0,u=0,j=0,n=0,t.tensor.ndim>2){emit_flat_tensor(t);return}if(A=t.tensor.dim[0],t.tensor.ndim===2?T=t.tensor.dim[1]:T=1,_=A*T,_>N){emit_flat_tensor(t);return}for(W=emit_x,p=d=0,D=_;0<=D?d<D:d>D;p=0<=D?++d:--d)elem[p].index=yindex,elem[p].x=emit_x,emit_expr(t.tensor.elem[p]),elem[p].count=yindex-elem[p].index,[elem[p].h,elem[p].w,elem[p].y]=get_size(elem[p].index,yindex);for(l=0,u=0,p=x=0,O=_;0<=O?x<O:x>O;p=0<=O?++x:--x)elem[p].h>l&&(l=elem[p].h),elem[p].w>u&&(u=elem[p].w);for(c=A*l+(A-1)*SPACE_BETWEEN_ROWS,Z=T*u+(T-1)*SPACE_BETWEEN_COLUMNS,J=-(c/2),j=S=0,F=A;0<=F?S<F:S>F;j=0<=F?++S:--S)for(n=R=0,z=T;0<=z?R<z:R>z;n=0<=z?++R:--R)p=j*T+n,a=W-elem[p].x,s=J-elem[p].y,move(elem[p].index,elem[p].index+elem[p].count,a,s),a=0,n>0&&(a=n*(u+SPACE_BETWEEN_COLUMNS)),s=0,j>0&&(s=j*(l+SPACE_BETWEEN_ROWS)),a+=(u-elem[p].w)/2,s+=(l-elem[p].h)/2,move(elem[p].index,elem[p].index+elem[p].count,a,s);return emit_x=W+Z},emit_flat_tensor=function(t){return emit_tensor_inner(t,0,0)},emit_tensor_inner=function(t,n,a){var s,l,u;for(s=0,__emit_char("("),s=l=0,u=t.tensor.dim[n];0<=u?l<u:l>u;s=0<=u?++l:--l)n+1===t.tensor.ndim?(emit_expr(t.tensor.elem[a]),a=a+1):a=emit_tensor_inner(t,n+1,a),s+1<t.tensor.dim[n]&&__emit_char(",");return __emit_char(")"),a},Eval_product=function(){var t,n,a,s,l,u,c,p,d;if(n=0,s=0,l=0,t=cadr(p1),a=caddr(p1),issymbol(a)||stop("sum: 2nd arg?"),push(cadddr(p1)),Eval(),s=pop_integer(),isNaN(s)){push(p1);return}if(push(caddddr(p1)),Eval(),l=pop_integer(),isNaN(l)){push(p1);return}for(c=get_binding(a),push_integer(1),n=u=p=s,d=l;p<=d?u<=d:u>=d;n=p<=d?++u:--u)push_integer(n),p5=pop(),set_binding(a,p5),push(t),Eval(),DEBUG&&(console.log("product - factor 1: "+stack[tos-1].toString()),console.log("product - factor 2: "+stack[tos-2].toString())),multiply(),DEBUG&&console.log("product - result: "+stack[tos-1].toString());return set_binding(a,c)},qadd=function(){var t,n,a,s,l,u,c,p;if(u=pop(),l=pop(),n=mmul(l.q.a,u.q.b),a=mmul(l.q.b,u.q.a),c=madd(n,a),MZERO(c)){push(zero);return}return s=mmul(l.q.b,u.q.b),t=mgcd(c,s),t=makeSignSameAs(t,s),p=new U,p.k=NUM,p.q.a=mdiv(c,t),p.q.b=mdiv(s,t),push(p)},qdiv=function(){var t,n,a;if(save(),p2=pop(),p1=pop(),MZERO(p2.q.a)&&stop("divide by zero"),MZERO(p1.q.a)){push(zero),restore();return}return t=mmul(p1.q.a,p2.q.b),n=mmul(p1.q.b,p2.q.a),a=mgcd(t,n),a=makeSignSameAs(a,n),p1=new U,p1.k=NUM,p1.q.a=mdiv(t,a),p1.q.b=mdiv(n,a),push(p1),restore()},qmul=function(){var t,n,a;if(save(),p2=pop(),p1=pop(),MZERO(p1.q.a)||MZERO(p2.q.a)){push(zero),restore();return}return t=mmul(p1.q.a,p2.q.a),n=mmul(p1.q.b,p2.q.b),a=mgcd(t,n),a=makeSignSameAs(a,n),p1=new U,p1.k=NUM,p1.q.a=mdiv(t,a),p1.q.b=mdiv(n,a),push(p1),restore()},qpow=function(){return save(),qpowf(),restore()},qpowf=function(){var t,n,a,s,l,u;if(a=0,p2=pop(),p1=pop(),isplusone(p1)||isZeroAtomOrTensor(p2)){push_integer(1);return}if(isminusone(p1)&&isoneovertwo(p2)){push(imaginaryunit);return}if(isZeroAtomOrTensor(p1)){isnegativenumber(p2)&&stop("divide by zero"),push(zero);return}if(isplusone(p2)){push(p1);return}if(isinteger(p2)){if(push(p2),a=pop_integer(),isNaN(a)){push_symbol(POWER),push(p1),push(p2),list(3);return}l=mpow(p1.q.a,Math.abs(a)),u=mpow(p1.q.b,Math.abs(a)),a<0&&(s=l,l=u,u=s,l=makeSignSameAs(l,u),u=makePositive(u)),p3=new U,p3.k=NUM,p3.q.a=l,p3.q.b=u,push(p3);return}if(isminusone(p1)){push(p2),normalize_angle();return}if(isnegativenumber(p1)){push(p1),negate(),push(p2),qpow(),push_integer(-1),push(p2),qpow(),multiply();return}if(!isinteger(p1)){push(p1),mp_numerator(),push(p2),qpow(),push(p1),mp_denominator(),push(p2),negate(),qpow(),multiply();return}if(is_small_integer(p1)){push(p1),push(p2),quickfactor();return}if(!isSmall(p2.q.a)||!isSmall(p2.q.b)){push_symbol(POWER),push(p1),push(p2),list(3);return}if(t=p2.q.a,n=p2.q.b,l=mroot(p1.q.a,n),l===0){push_symbol(POWER),push(p1),push(p2),list(3);return}return u=mpow(l,t),p3=new U,p3.k=NUM,p2.q.a.isNegative()?(p3.q.a=bigInt(1),p3.q.b=u):(p3.q.a=u,p3.q.b=bigInt(1)),push(p3)},normalize_angle=function(){if(save(),p1=pop(),isinteger(p1)){p1.q.a.isOdd()?push_integer(-1):push_integer(1),restore();return}return push(p1),bignum_truncate(),p2=pop(),isnegativenumber(p1)&&(push(p2),push_integer(-1),add(),p2=pop()),push(p1),push(p2),subtract(),p3=pop(),push_symbol(POWER),push_integer(-1),push(p3),list(3),p2.q.a.isOdd()&&negate(),restore()},is_small_integer=function(t){return isSmall(t.q.a)},quickfactor=function(){var t,n,a,s,l,u;for(n=0,save(),p2=pop(),p1=pop(),t=tos,push(p1),factor_small_number(),s=tos-t,u=t,n=a=0,l=s;a<l;n=a+=2)push(stack[u+n]),push(stack[u+n+1]),push(p2),multiply(),quickpower();return multiply_all(tos-t-s),p1=pop(),moveTos(t),push(p1),restore()},quickpower=function(){var t;if(t=0,save(),p2=pop(),p1=pop(),push(p2),bignum_truncate(),p3=pop(),push(p2),push(p3),subtract(),p4=pop(),isZeroAtomOrTensor(p4)||(push_symbol(POWER),push(p1),push(p4),list(3)),push(p3),t=pop_integer(),isNaN(t)){push_symbol(POWER),push(p1),push(p3),list(3),restore();return}if(t===0){restore();return}return push(p1),bignum_power_number(t),restore()},Eval_quotient=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p1=pop(),p1===symbol(NIL)&&(p1=symbol(SYMBOL_X)),push(p1),divpoly()},divpoly=function(){var t,n,a,s,l,u,c,p,d;for(a=0,s=0,u=0,c=0,d=0,save(),p3=pop(),p2=pop(),p1=pop(),a=tos,t=tos,u=coeff(p3,p1)-1,n=tos,c=coeff(p3,p2)-1,d=u-c,push_integer(0),p5=pop();d>=0;){for(push(stack[t+u]),push(stack[n+c]),divide(),p4=pop(),s=l=0,p=c;0<=p?l<=p:l>=p;s=0<=p?++l:--l)push(stack[t+d+s]),push(stack[n+s]),push(p4),multiply(),subtract(),stack[t+d+s]=pop();push(p5),push(p4),push(p3),push_integer(d),power(),multiply(),add(),p5=pop(),u--,d--}return moveTos(a),push(p5),restore()},DEBUG_RATIONALIZE=!1,Eval_rationalize=function(){return push(cadr(p1)),Eval(),rationalize()},rationalize=function(){var t;return t=expanding,yyrationalize(),expanding=t},yyrationalize=function(){var t,n,a;if(a=pop(),istensor(a)){__rationalize_tensor(a);return}if(expanding=0,car(a)!==symbol(ADD)){push(a);return}for(DEBUG_RATIONALIZE&&console.log("rationalize: this is the input expr: "+a),push(one),multiply_denominators(a),t=pop(),DEBUG_RATIONALIZE&&console.log("rationalize: this is the new denominator: "+t),push(zero),n=cdr(a);iscons(n);)DEBUG_RATIONALIZE&&console.log("term: "+car(n)),push(t),push(car(n)),multiply(),add(),n=cdr(n);if(DEBUG_RATIONALIZE&&console.log("rationalize: original terms times new denominator: "+stack[tos-1]),Condense(),DEBUG_RATIONALIZE&&console.log("rationalize: after factoring: "+stack[tos-1]),push(t),divide(),DEBUG_RATIONALIZE)return console.log("rationalize: after dividing by new denom. (and we're done): "+stack[tos-1])},multiply_denominators=function(t){var n;if(car(t)===symbol(ADD)){for(t=cdr(t),n=[];iscons(t);)multiply_denominators_term(car(t)),n.push(t=cdr(t));return n}else return multiply_denominators_term(t)},multiply_denominators_term=function(t){var n;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),n=[];iscons(t);)multiply_denominators_factor(car(t)),n.push(t=cdr(t));return n}else return multiply_denominators_factor(t)},multiply_denominators_factor=function(t){if(car(t)===symbol(POWER)){if(push(t),t=caddr(t),isnegativenumber(t)){inverse(),__lcm();return}if(car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))){inverse(),__lcm();return}return pop()}},__rationalize_tensor=function(t){var n,a,s,l;if(n=0,push(t),Eval(),t=pop(),!istensor(t)){push(t);return}for(s=t.tensor.nelem,n=a=0,l=s;0<=l?a<l:a>l;n=0<=l?++a:--a)push(t.tensor.elem[n]),rationalize(),t.tensor.elem[n]=pop();return check_tensor_dimensions(t),push(t)},__lcm=function(){return save(),p1=pop(),p2=pop(),push(p1),push(p2),multiply(),push(p1),push(p2),gcd(),divide(),restore()},Eval_real=function(){return push(cadr(p1)),Eval(),real()},real=function(){return save(),rect(),p1=pop(),push(p1),push(p1),conjugate(),add(),push_integer(2),divide(),restore()},DEBUG_RECT=!1,Eval_rect=function(){return push(cadr(p1)),Eval(),rect()},rect=function(){var t;if(save(),p1=pop(),t=p1,DEBUG_RECT&&console.log("RECT of "+t),DEBUG_RECT&&console.log("any clock forms in : "+t+" ? "+findPossibleClockForm(t)),issymbol(p1))DEBUG_RECT&&console.log(" rect: simple symbol: "+t),isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))?(push_symbol(YYRECT),push(p1),list(2)):push(p1);else if(!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))&&!findPossibleExponentialForm(p1)&&!findPossibleClockForm(p1)&&!(Find(p1,symbol(SIN))&&Find(p1,symbol(COS))&&Find(p1,imaginaryunit)))DEBUG_RECT&&console.log(" rect: simple symbol: "+t),push(p1);else if(car(p1)===symbol(MULTIPLY)&&isimaginaryunit(cadr(p1))&&!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES))))push(p1);else if(car(p1)===symbol(ADD))for(DEBUG_RECT&&console.log(" rect - "+t+" is a sum "),push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),rect(),add(),p1=cdr(p1);else DEBUG_RECT&&console.log(" rect - "+t+" is NOT a sum "),push(p1),abs(),DEBUG_RECT&&console.log(" rect - "+t+" abs: "+stack[tos-1].toString()),push(p1),arg(),DEBUG_RECT&&console.log(" rect - "+t+" arg of "+p1+" : "+stack[tos-1].toString()),p1=pop(),push(p1),cosine(),DEBUG_RECT&&console.log(" rect - "+t+" cosine: "+stack[tos-1].toString()),push(imaginaryunit),push(p1),sine(),DEBUG_RECT&&console.log(" rect - "+t+" sine: "+stack[tos-1].toString()),multiply(),DEBUG_RECT&&console.log(" rect - "+t+" i * sine: "+stack[tos-1].toString()),add(),DEBUG_RECT&&console.log(" rect - "+t+" cos + i * sine: "+stack[tos-1].toString()),multiply();if(restore(),DEBUG_RECT)return console.log("rect of "+t+" : "+stack[tos-1])},Eval_roots=function(){return p2=cadr(p1),car(p2)===symbol(SETQ)||car(p2)===symbol(TESTEQ)?(push(cadr(p2)),Eval(),push(caddr(p2)),Eval(),subtract()):(push(p2),Eval(),p2=pop(),car(p2)===symbol(SETQ)||car(p2)===symbol(TESTEQ)?(push(cadr(p2)),Eval(),push(caddr(p2)),Eval(),subtract()):push(p2)),push(caddr(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2)||stop("roots: 1st argument is not a polynomial in the variable "+p2),push(p1),push(p2),roots()},hasImaginaryCoeff=function(t){var n,a,s;for(a=!1,n=s=t;s>0;n=s+=-1)if(iscomplexnumber(stack[tos-n])){a=!0;break}return a},isSimpleRoot=function(t){var n,a,s;if(t>2){for(a=!0,isZeroAtomOrTensor(stack[tos-t])&&(a=!1),n=s=t-1;s>1;n=s+=-1)if(!isZeroAtomOrTensor(stack[tos-n])){a=!1;break}}else a=!1;return a},normalisedCoeff=function(t,n){var a,s,l,u,c,p,d,x;for(l=coeff(t,n),a=stack[tos-1],p=[],s=u=1,d=l;1<=d?u<=d:u>=d;s=1<=d?++u:--u)p.push(pop());for(s=c=x=l-1;x<=0?c<=0:c>=0;s=x<=0?++c:--c)push(p[s]),push(a),divide();return l},roots=function(){var t,n,a,s,l,u,c,p;if(t=0,n=0,c=0,DEBUG&&console.log("roots: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),save(),recursionLevelNestedRadicalsRemoval>1){pop(),pop(),push(symbol(NIL)),restore();return}if(t=tos-2,DEBUG&&console.log("roots checking if "+stack[tos-1].toString()+" is a case of simple roots"),p2=pop(),p1=pop(),push(p1),push(p2),a=normalisedCoeff(p2,p1),isSimpleRoot(a)?(DEBUG&&console.log("yes, "+stack[tos-1].toString()+" is a case of simple roots"),l=stack[tos-a],u=stack[tos-1],moveTos(tos-a),pop(),pop(),getSimpleRoots(a,u,l)):(moveTos(tos-a),roots2()),c=tos-t,c===0&&stop("roots: the polynomial is not factorable, try nroots"),c===1){restore();return}for(sort_stack(c),p1=alloc_tensor(c),p1.tensor.ndim=1,p1.tensor.dim[0]=c,n=s=0,p=c;0<=p?s<p:s>p;n=0<=p?++s:--s)p1.tensor.elem[n]=stack[t+n];return moveTos(t),push(p1),restore(),!1},getSimpleRoots=function(t,n,a){var s,l,u,c,p,d,x;if(DEBUG&&console.log("getSimpleRoots"),save(),t=t-1,push(a),push_rational(1,t),power(),push(n),push_rational(1,t),power(),divide(),l=pop(),t%2===0)for(x=u=1,p=t;u<=p;x=u+=2)push(l),push_integer(-1),push_rational(x,t),power(),multiply(),s=pop(),push(s),push(s),negate();else for(x=c=1,d=t;1<=d?c<=d:c>=d;x=1<=d?++c:--c)push(l),push_integer(-1),push_rational(x,t),power(),multiply(),x%2===0&&negate();return restore()},roots2=function(){var t;if(save(),DEBUG&&console.log("roots2: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),p2=pop(),p1=pop(),push(p1),push(p2),t=normalisedCoeff(p2,p1),hasImaginaryCoeff(t)?(moveTos(tos-t),pop(),pop()):(moveTos(tos-t),factorpoly(),p1=pop()),car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),roots3(),p1=cdr(p1);else push(p1),push(p2),roots3();return restore()},roots3=function(){var t;return save(),p2=pop(),p1=pop(),car(p1)===symbol(POWER)&&ispolyexpandedform(cadr(p1),p2)&&isposint(caddr(p1))?(t=normalisedCoeff(p2,cadr(p1)),mini_solve(t)):ispolyexpandedform(p1,p2)&&(t=normalisedCoeff(p2,p1),mini_solve(t)),restore()},mini_solve=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j,Z,W,J,en,tn,Ct,Q,on,gn,In,dn,ix,Cn,ax,sx,lx,ox,hx,_x,ux,px,dx,mx,gx,Sx,Ex,Cx,Ax,Tx,kx,Rx,$x,Gx,qx,Dx,lE,cE,nE,iE,_E,sE,ME,fx,yx,Ix,Nx,Fx,Px;if(save(),t===2){p3=pop(),p4=pop(),push(p4),push(p3),divide(),negate(),restore();return}if(t===3){p3=pop(),p4=pop(),p5=pop(),push(p4),push_integer(2),power(),push_integer(4),push(p3),multiply(),push(p5),multiply(),subtract(),push_rational(1,2),power(),p6=pop(),push(p6),push(p4),subtract(),push(p3),push_integer(2),multiply(),divide(),push(p6),push(p4),add(),negate(),push(p3),divide(),push_rational(1,2),multiply(),restore();return}if(t===4||t===5){if(p3=pop(),p4=pop(),p5=pop(),p6=pop(),push(p5),push(p5),multiply(),gn=pop(),push(gn),push(p5),multiply(),In=pop(),push(p4),push(p4),multiply(),tn=pop(),push(tn),push(p4),multiply(),Q=pop(),push(Q),push(p6),multiply(),on=pop(),push(on),push_integer(-4),multiply(),hx=pop(),push(Q),push_integer(2),multiply(),l=pop(),push(p3),push(p3),multiply(),F=pop(),push(F),push(p3),multiply(),Z=pop(),push_integer(3),push(p3),multiply(),u=pop(),push(F),push(p6),multiply(),z=pop(),push(z),push(p6),multiply(),j=pop(),push(z),push_integer(27),multiply(),s=pop(),push(j),push_integer(-27),multiply(),lx=pop(),push(u),push_integer(2),multiply(),pop(),push(p3),push(p5),multiply(),en=pop(),push(en),push(p4),multiply(),W=pop(),push(W),push(p6),multiply(),J=pop(),push(en),push_integer(3),multiply(),p=pop(),push_integer(-4),push(p3),push(In),multiply(),multiply(),ox=pop(),push(W),push_integer(9),multiply(),negate(),_x=pop(),push(J),push_integer(18),multiply(),a=pop(),push(tn),push(p),subtract(),A=pop(),push(tn),push(gn),multiply(),Ct=pop(),push(p4),negate(),push(u),divide(),ux=pop(),t===4){if(DEBUG&&console.log(">>>>>>>>>>>>>>>> actually using cubic formula <<<<<<<<<<<<<<< "),DEBUG&&console.log("cubic: D0: "+A.toString()),push(A),push_integer(3),power(),push_integer(4),multiply(),d=pop(),push(A),simplify(),absValFloat(),R=pop(),DEBUG&&console.log("cubic: D0 as float: "+R.toString()),push(a),push(hx),push(Ct),push(ox),push(lx),add(),add(),add(),add(),simplify(),absValFloat(),ix=pop(),DEBUG&&console.log("cubic: DETERMINANT: "+ix.toString()),push(l),push(_x),push(s),add(),add(),D=pop(),DEBUG&&console.log("cubic: D1: "+D.toString()),push(D),push_integer(2),power(),push(d),subtract(),push_rational(1,2),power(),simplify(),O=pop(),isZeroAtomOrTensor(ix))if(isZeroAtomOrTensor(R)){DEBUG&&console.log(" cubic: DETERMINANT IS ZERO and delta0 is zero"),push(ux),restore();return}else{DEBUG&&console.log(" cubic: DETERMINANT IS ZERO and delta0 is not zero"),push(p3),push(p6),push_integer(9),multiply(),multiply(),push(p4),push(p5),multiply(),subtract(),push(A),push_integer(2),multiply(),divide(),Nx=pop(),push(Nx),push(Nx),push(W),push_integer(4),multiply(),push(p3),push(p3),push(p6),push_integer(9),multiply(),multiply(),multiply(),negate(),push(Q),negate(),add(),add(),push(p3),push(A),multiply(),divide(),restore();return}for(n=!1,$x=!1;!n;)push(O),$x&&negate(),push(D),add(),push_rational(1,2),multiply(),push_rational(1,3),power(),simplify(),_=pop(),DEBUG&&console.log("cubic: C: "+_.toString()),push(_),simplify(),absValFloat(),T=pop(),DEBUG&&console.log("cubic: C as absval and float: "+T.toString()),isZeroAtomOrTensor(T)?(DEBUG&&console.log(" cubic: C IS ZERO flipping the sign"),$x=!0):n=!0;push(_),push(u),multiply(),c=pop(),push(c),push_integer(2),multiply(),x=pop(),push(imaginaryunit),push_integer(3),push_rational(1,2),power(),multiply(),Gx=pop(),push_integer(1),push(Gx),add(),sE=pop(),push_integer(1),push(Gx),subtract(),_E=pop(),push(_),push(u),divide(),S=pop(),push(ux),push(S),negate(),push(A),push(c),divide(),negate(),add(),add(),simplify(),push(ux),push(S),push(sE),multiply(),push_integer(2),divide(),push(_E),push(A),multiply(),push(x),divide(),add(),add(),simplify(),push(ux),push(S),push(_E),multiply(),push_integer(2),divide(),push(sE),push(A),multiply(),push(x),divide(),add(),add(),simplify(),restore();return}if(t===5){if(DEBUG&&console.log(">>>>>>>>>>>>>>>> actually using quartic formula <<<<<<<<<<<<<<< "),p7=pop(),isZeroAtomOrTensor(p4)&&isZeroAtomOrTensor(p6)&&!isZeroAtomOrTensor(p5)&&!isZeroAtomOrTensor(p7)){for(DEBUG&&console.log("biquadratic case"),push(p3),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push(p5),push(symbol(SECRETX)),multiply(),push(p7),add(),add(),push(symbol(SECRETX)),roots(),Ex=pop(),ME=Ex.tensor.elem,qx=0,Dx=ME.length;qx<Dx;qx++)Rx=ME[qx],push(Rx),push_rational(1,2),power(),simplify(),push(Rx),push_rational(1,2),power(),negate(),simplify();restore();return}if(push(p6),push(p6),multiply(),dn=pop(),push(p7),push(p7),multiply(),Cn=pop(),push(Cn),push(p7),multiply(),ax=pop(),push_integer(256),push(Z),push(ax),multiply(),multiply(),push_integer(-192),push(z),push(Cn),push(p4),multiply(),multiply(),multiply(),push_integer(-128),push(F),push(gn),push(Cn),multiply(),multiply(),multiply(),push_integer(144),push(j),push(p5),push(p7),multiply(),multiply(),multiply(),push(lx),push(dn),multiply(),push_integer(144),push(W),push(p4),push(Cn),multiply(),multiply(),multiply(),push_integer(-6),push(p3),push(tn),push(dn),push(p7),multiply(),multiply(),multiply(),multiply(),push_integer(-80),push(J),push(p5),push(p7),multiply(),multiply(),multiply(),push_integer(18),push(J),push(dn),multiply(),multiply(),push_integer(16),push(en),push(In),push(p7),multiply(),multiply(),multiply(),push_integer(-4),push(en),push(gn),push(dn),multiply(),multiply(),multiply(),push_integer(-27),push(Q),push(p4),push(Cn),multiply(),multiply(),multiply(),push_integer(18),push(on),push(p5),push(p7),multiply(),multiply(),multiply(),push(hx),push(dn),multiply(),push_integer(-4),push(Ct),push(p5),push(p7),multiply(),multiply(),multiply(),push(Ct),push(dn),multiply(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),ix=pop(),DEBUG&&console.log("R_determinant: "+ix.toString()),push(gn),push_integer(-3),push(p4),push(p6),multiply(),multiply(),push_integer(12),push(p3),push(p7),multiply(),multiply(),add(),add(),A=pop(),DEBUG&&console.log("R_DELTA0: "+A.toString()),push_integer(2),push(In),multiply(),push_integer(-9),push(p4),push(p5),push(p6),multiply(),multiply(),multiply(),push_integer(27),push(tn),push(p7),multiply(),multiply(),push_integer(27),push(p3),push(dn),multiply(),multiply(),push_integer(-72),push(en),push(p7),multiply(),multiply(),add(),add(),add(),add(),D=pop(),DEBUG&&console.log("R_DELTA1: "+D.toString()),push_integer(8),push(en),multiply(),push_integer(-3),push(tn),multiply(),add(),push_integer(8),push(F),multiply(),divide(),px=pop(),DEBUG&&console.log("p: "+px.toString()),push(Q),push_integer(-4),push(W),multiply(),push_integer(8),push(z),multiply(),add(),add(),push_integer(8),push(Z),multiply(),divide(),dx=pop(),DEBUG&&console.log("q: "+dx.toString()),DEBUG&&console.log("tos 1 "+tos),isZeroAtomOrTensor(p4)){for(px=p5,dx=p6,mx=p7,push_rational(5,2),push(px),multiply(),Cx=pop(),push_integer(2),push(px),push_integer(2),power(),multiply(),push(mx),subtract(),Ax=pop(),push(px),push_integer(3),power(),push_integer(2),divide(),push_rational(-1,2),push(px),push(mx),multiply(),multiply(),push_rational(-1,8),push(dx),push_integer(2),power(),multiply(),add(),add(),Tx=pop(),push(symbol(SECRETX)),push_integer(3),power(),push(Cx),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push(Ax),push(symbol(SECRETX)),multiply(),push(Tx),add(),add(),add(),DEBUG&&console.log("resolventCubic: "+stack[tos-1].toString()),push(symbol(SECRETX)),roots(),Ix=pop(),DEBUG&&console.log("resolventCubicSolutions: "+Ix),sx=null,yx=Ix.tensor.elem,iE=0,cE=yx.length;iE<cE;iE++)if(Rx=yx[iE],DEBUG&&console.log("examining solution: "+Rx),push(Rx),push_integer(2),multiply(),push(px),add(),absValFloat(),Px=pop(),DEBUG&&console.log("abs value is: "+Rx),!isZeroAtomOrTensor(Px)){sx=Rx;break}DEBUG&&console.log("chosen solution: "+sx),push(sx),push_integer(2),multiply(),push(px),add(),push_rational(1,2),power(),simplify(),Fx=pop(),push(dx),push_integer(2),multiply(),push(Fx),divide(),simplify(),Sx=pop(),push(px),push_integer(3),multiply(),push(sx),push_integer(2),multiply(),add(),gx=pop(),push(Fx),push(gx),push(Sx),add(),negate(),push_rational(1,2),power(),simplify(),add(),push_integer(2),divide(),push(Fx),push(gx),push(Sx),add(),negate(),push_rational(1,2),power(),simplify(),subtract(),push_integer(2),divide(),push(Fx),negate(),push(gx),push(Sx),subtract(),negate(),push_rational(1,2),power(),simplify(),add(),push_integer(2),divide(),push(Fx),negate(),push(gx),push(Sx),subtract(),negate(),push_rational(1,2),power(),simplify(),subtract(),push_integer(2),divide(),restore();return}else{for(DEBUG&&console.log("tos 2 "+tos),push_integer(8),push(p5),push(p3),multiply(),multiply(),push_integer(-3),push(p4),push_integer(2),power(),multiply(),add(),push_integer(8),push(p3),push_integer(2),power(),multiply(),divide(),px=pop(),DEBUG&&console.log("p for depressed quartic: "+px.toString()),push(p4),push_integer(3),power(),push_integer(-4),push(p3),push(p4),push(p5),multiply(),multiply(),multiply(),push_integer(8),push(p6),push(p3),push_integer(2),power(),multiply(),multiply(),add(),add(),push_integer(8),push(p3),push_integer(3),power(),multiply(),divide(),dx=pop(),DEBUG&&console.log("q for depressed quartic: "+dx.toString()),push(p4),push_integer(4),power(),push_integer(-3),multiply(),push_integer(256),push(Z),push(p7),multiply(),multiply(),push_integer(-64),push(z),push(p4),multiply(),multiply(),push_integer(16),push(tn),push(p3),push(p5),multiply(),multiply(),multiply(),add(),add(),add(),push_integer(256),push(p3),push_integer(4),power(),multiply(),divide(),mx=pop(),DEBUG&&console.log("r for depressed quartic: "+mx.toString()),DEBUG&&console.log("tos 4 "+tos),push(symbol(SECRETX)),push_integer(4),power(),DEBUG&&console.log("4 * x^4: "+stack[tos-1].toString()),push(px),push(symbol(SECRETX)),push_integer(2),power(),multiply(),DEBUG&&console.log("R_p * x^2: "+stack[tos-1].toString()),push(dx),push(symbol(SECRETX)),multiply(),DEBUG&&console.log("R_q * x: "+stack[tos-1].toString()),push(mx),DEBUG&&console.log("R_r: "+stack[tos-1].toString()),add(),add(),add(),simplify(),DEBUG&&console.log("solving depressed quartic: "+stack[tos-1].toString()),push(symbol(SECRETX)),roots(),kx=pop(),DEBUG&&console.log("depressedSolutions: "+kx),fx=kx.tensor.elem,nE=0,lE=fx.length;nE<lE;nE++)Rx=fx[nE],push(Rx),push(p4),push_integer(4),push(p3),multiply(),divide(),subtract(),simplify(),DEBUG&&console.log("solution from depressed: "+stack[tos-1].toString());restore();return}}}return moveTos(tos-t),restore()},Eval_round=function(){return push(cadr(p1)),Eval(),yround()},yround=function(){return save(),yyround(),restore()},yyround=function(){var t;if(t=0,p1=pop(),!isNumericAtom(p1)){push_symbol(ROUND),push(p1),list(2);return}if(isdouble(p1)){t=Math.round(p1.d),push_double(t);return}if(isinteger(p1)){push(p1);return}return push(p1),yyfloat(),p1=pop(),push_integer(Math.round(p1.d))},T_INTEGER=1001,T_DOUBLE=1002,T_SYMBOL=1003,T_FUNCTION=1004,T_NEWLINE=1006,T_STRING=1007,T_GTEQ=1008,T_LTEQ=1009,T_EQ=1010,T_NEQ=1011,T_QUOTASSIGN=1012,token="",newline_flag=0,meta_mode=0,input_str=0,scan_str=0,token_str=0,token_buf=0,lastFoundSymbol=null,symbolsRightOfAssignment=null,symbolsLeftOfAssignment=null,isSymbolLeftOfAssignment=null,scanningParameters=null,functionInvokationsScanningStack=null,skipRootVariableToBeSolved=!1,assignmentFound=null,scanned="",scan=function(t){return DEBUG&&console.log("#### scanning "+t),lastFoundSymbol=null,symbolsRightOfAssignment=[],symbolsLeftOfAssignment=[],isSymbolLeftOfAssignment=!0,scanningParameters=[],functionInvokationsScanningStack=[""],assignmentFound=!1,scanned=t,meta_mode=0,expanding++,input_str=0,scan_str=0,get_next_token(),token===""?(push(symbol(NIL)),expanding--,0):(scan_stmt(),expanding--,assignmentFound||(symbolsInExpressionsWithoutAssignments=symbolsInExpressionsWithoutAssignments.concat(symbolsLeftOfAssignment)),token_str-input_str)},scan_meta=function(t){return scanned=t,meta_mode=1,expanding++,input_str=0,scan_str=0,get_next_token(),token===""?(push(symbol(NIL)),expanding--,0):(scan_stmt(),expanding--,token_str-input_str)},scan_stmt=function(){var t,n,a,s,l,u,c,p,d;if(scan_relation(),t=!1,token===T_QUOTASSIGN&&(t=!0),(token===T_QUOTASSIGN||token==="=")&&(d=lastFoundSymbol,DEBUG&&console.log("assignment!"),assignmentFound=!0,isSymbolLeftOfAssignment=!1,get_next_token(),push_symbol(SETQ),swap(),t&&push_symbol(QUOTE),scan_relation(),t&&list(2),list(3),isSymbolLeftOfAssignment=!0,codeGen)){if(s=symbolsRightOfAssignment.indexOf(d),s!==-1&&(symbolsRightOfAssignment.splice(s,1),symbolsHavingReassignments.push(d)),DEBUG)for(console.log("locally, "+d+" depends on: "),l=0,u=symbolsRightOfAssignment.length;l<u;l++)a=symbolsRightOfAssignment[l],console.log("  "+a);for(symbolsDependencies[d]==null&&(symbolsDependencies[d]=[]),n=symbolsDependencies[d],p=0,c=symbolsRightOfAssignment.length;p<c;p++)a=symbolsRightOfAssignment[p],n.indexOf(a)===-1&&n.push(a);return symbolsRightOfAssignment=[]}},scan_relation=function(){switch(scan_expression(),token){case T_EQ:return push_symbol(TESTEQ),swap(),get_next_token(),scan_expression(),list(3);case T_NEQ:return push_symbol(NOT),swap(),push_symbol(TESTEQ),swap(),get_next_token(),scan_expression(),list(3),list(2);case T_LTEQ:return push_symbol(TESTLE),swap(),get_next_token(),scan_expression(),list(3);case T_GTEQ:return push_symbol(TESTGE),swap(),get_next_token(),scan_expression(),list(3);case"<":return push_symbol(TESTLT),swap(),get_next_token(),scan_expression(),list(3);case">":return push_symbol(TESTGT),swap(),get_next_token(),scan_expression(),list(3)}},scan_expression=function(){var t;switch(t=tos,token){case"+":get_next_token(),scan_term();break;case"-":get_next_token(),scan_term(),negate();break;default:scan_term()}for(;newline_flag===0&&(token==="+"||token==="-");)token==="+"?(get_next_token(),scan_term()):(get_next_token(),scan_term(),negate());if(tos-t>1)return list(tos-t),push_symbol(ADD),swap(),cons()},is_factor=function(){if((typeof token.charCodeAt=="function"?token.charCodeAt(0):void 0)===dotprod_unicode)return 1;switch(token){case"*":case"/":return 1;case"(":case T_SYMBOL:case T_FUNCTION:case T_INTEGER:case T_DOUBLE:case T_STRING:return newline_flag?(scan_str=token_str,0):1}return 0},simplify_1_in_products=function(t,n){if(t>n&&isrational(stack[t-1])&&equaln(stack[t-1],1))return pop()},multiply_consecutive_constants=function(t,n){if(t>n+1&&isNumericAtom(stack[t-2])&&isNumericAtom(stack[t-1]))return multiply()},scan_term=function(){var t;for(t=tos,scan_factor(),parse_time_simplifications&&simplify_1_in_products(tos,t);is_factor();)token==="*"?(get_next_token(),scan_factor()):token==="/"?(simplify_1_in_products(tos,t),get_next_token(),scan_factor(),inverse()):(typeof token.charCodeAt=="function"?token.charCodeAt(0):void 0)===dotprod_unicode?(get_next_token(),push_symbol(INNER),swap(),scan_factor(),list(3)):scan_factor(),parse_time_simplifications&&(multiply_consecutive_constants(tos,t),simplify_1_in_products(tos,t));if(t===tos)return push_integer(1);if(tos-t>1)return list(tos-t),push_symbol(MULTIPLY),swap(),cons()},scan_power=function(){if(token==="^")return get_next_token(),push_symbol(POWER),swap(),scan_factor(),list(3)},scan_index=function(t){for(get_next_token(),push_symbol(INDEX),swap(),scan_expression();token===",";)get_next_token(),scan_expression();return token!=="]"&&scan_error("] expected"),get_next_token(),list(tos-t)},scan_factor=function(){var t,n;for(n=tos,t=!1,token==="("?scan_subexpr():token===T_SYMBOL?scan_symbol():token===T_FUNCTION?scan_function_call_with_function_name():token==="["?scan_tensor():token===T_INTEGER?(t=!0,bignum_scan_integer(token_buf),get_next_token()):token===T_DOUBLE?(t=!0,bignum_scan_float(token_buf),get_next_token()):token===T_STRING?scan_string():scan_error("syntax error");token==="["||token==="("&&newline_flag===0&&!t;)token==="["?scan_index(n):token==="("&&scan_function_call_without_function_name();for(;token==="!";)get_next_token(),push_symbol(FACTORIAL),swap(),list(2);for(;(typeof token.charCodeAt=="function"?token.charCodeAt(0):void 0)===transpose_unicode;)get_next_token(),push_symbol(TRANSPOSE),swap(),list(2);return scan_power()},addSymbolRightOfAssignment=function(t){var n,a,s,l;if(predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(t)===-1&&symbolsRightOfAssignment.indexOf(t)===-1&&symbolsRightOfAssignment.indexOf("'"+t)===-1&&!skipRootVariableToBeSolved){for(DEBUG&&console.log("... adding symbol: "+t+" to the set of the symbols right of assignment"),s="",n=a=1,l=functionInvokationsScanningStack.length;1<=l?a<l:a>l;n=1<=l?++a:--a)functionInvokationsScanningStack[n]!==""&&(s+=functionInvokationsScanningStack[n]+"_"+n+"_");return t=s+t,symbolsRightOfAssignment.push(t)}},addSymbolLeftOfAssignment=function(t){var n,a,s,l;if(predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(t)===-1&&symbolsLeftOfAssignment.indexOf(t)===-1&&symbolsLeftOfAssignment.indexOf("'"+t)===-1&&!skipRootVariableToBeSolved){for(DEBUG&&console.log("... adding symbol: "+t+" to the set of the symbols left of assignment"),s="",n=a=1,l=functionInvokationsScanningStack.length;1<=l?a<l:a>l;n=1<=l?++a:--a)functionInvokationsScanningStack[n]!==""&&(s+=functionInvokationsScanningStack[n]+"_"+n+"_");return t=s+t,symbolsLeftOfAssignment.push(t)}},scan_symbol=function(){if(token!==T_SYMBOL&&scan_error("symbol expected"),meta_mode&&token_buf.length===1)switch(token_buf[0]){case"a":push(symbol(METAA));break;case"b":push(symbol(METAB));break;case"x":push(symbol(METAX));break;default:push(usr_symbol(token_buf))}else push(usr_symbol(token_buf));return scanningParameters.length===0?(DEBUG&&console.log("out of scanning parameters, processing "+token_buf),lastFoundSymbol=token_buf,isSymbolLeftOfAssignment&&addSymbolLeftOfAssignment(token_buf)):(DEBUG&&console.log("still scanning parameters, skipping "+token_buf),isSymbolLeftOfAssignment&&addSymbolRightOfAssignment("'"+token_buf)),DEBUG&&console.log("found symbol: "+token_buf+" left of assignment: "+isSymbolLeftOfAssignment),isSymbolLeftOfAssignment||addSymbolRightOfAssignment(token_buf),get_next_token()},scan_string=function(){return push(new_string(token_buf)),get_next_token()},scan_function_call_with_function_name=function(){var t,n,a,s,l,u;if(DEBUG&&console.log("-- scan_function_call_with_function_name start"),s=1,l=new U,l=usr_symbol(token_buf),push(l),t=token_buf,(t==="roots"||t==="defint"||t==="sum"||t==="product"||t==="for")&&functionInvokationsScanningStack.push(token_buf),lastFoundSymbol=token_buf,isSymbolLeftOfAssignment||addSymbolRightOfAssignment(token_buf),get_next_token(),get_next_token(),scanningParameters.push(!0),token!==")"){for(scan_stmt(),s++;token===",";)get_next_token(),s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("roots")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("sum")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("sum_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("product")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("product_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("for")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("for_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("defint")!==-1&&(s===2||s>2&&(s-2)%3===0)&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("defint_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(c)}),skipRootVariableToBeSolved=!0),scan_stmt(),skipRootVariableToBeSolved=!1,s++;s===2&&functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("roots")!==-1&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter(function(c){return!new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_x").test(c)}))}for(scanningParameters.pop(),n=a=0,u=symbolsRightOfAssignment.length;0<=u?a<=u:a>=u;n=0<=u?++a:--a)symbolsRightOfAssignment[n]!=null&&(t==="roots"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="defint"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("defint_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="sum"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("sum_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="product"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("product_"+(functionInvokationsScanningStack.length-1)+"_"),"")),t==="for"&&(symbolsRightOfAssignment[n]=symbolsRightOfAssignment[n].replace(new RegExp("for_"+(functionInvokationsScanningStack.length-1)+"_"),"")));if(token!==")"&&scan_error(") expected"),get_next_token(),list(s),(t==="roots"||t==="defint"||t==="sum"||t==="product"||t==="for")&&functionInvokationsScanningStack.pop(),t===symbol(PATTERN).printname&&(patternHasBeenFound=!0),DEBUG)return console.log("-- scan_function_call_with_function_name end")},scan_function_call_without_function_name=function(){var t;if(DEBUG&&console.log("-- scan_function_call_without_function_name start"),push_symbol(EVAL),swap(),list(2),t=1,get_next_token(),scanningParameters.push(!0),token!==")")for(scan_stmt(),t++;token===",";)get_next_token(),scan_stmt(),t++;if(scanningParameters.pop(),token!==")"&&scan_error(") expected"),get_next_token(),list(t),DEBUG)return console.log("-- scan_function_call_without_function_name end: "+stack[tos-1])},scan_subexpr=function(){return token!=="("&&scan_error("( expected"),get_next_token(),scan_stmt(),token!==")"&&scan_error(") expected"),get_next_token()},scan_tensor=function(){var t;for(t=0,token!=="["&&scan_error("[ expected"),get_next_token(),scan_stmt(),t=1;token===",";)get_next_token(),scan_stmt(),t++;return build_tensor(t),token!=="]"&&scan_error("] expected"),get_next_token()},scan_error=function(t){for(errorMessage="";input_str!==scan_str&&!((scanned[input_str]===`
`||scanned[input_str]==="\r")&&input_str+1===scan_str);)errorMessage+=scanned[input_str++];for(errorMessage+=" ? ";scanned[input_str]&&scanned[input_str]!==`
`&&scanned[input_str]!=="\r";)errorMessage+=scanned[input_str++];return errorMessage+=`
`,stop(t)},build_tensor=function(t){var n,a,s;for(n=0,save(),p2=alloc_tensor(t),p2.tensor.ndim=1,p2.tensor.dim[0]=t,n=a=0,s=t;0<=s?a<s:a>s;n=0<=s?++a:--a)p2.tensor.elem[n]=stack[tos-t+n];return check_tensor_dimensions(p2),moveTos(tos-t),push(p2),restore()},get_next_token=function(){for(newline_flag=0;get_token(),token===T_NEWLINE;)newline_flag=1;if(DEBUG)return console.log("get_next_token token: "+token)},get_token=function(){for(;isspace(scanned[scan_str]);){if(scanned[scan_str]===`
`||scanned[scan_str]==="\r"){token=T_NEWLINE,scan_str++;return}scan_str++}if(token_str=scan_str,scan_str===scanned.length){token="";return}if(isdigit(scanned[scan_str])||scanned[scan_str]==="."){for(;isdigit(scanned[scan_str]);)scan_str++;if(scanned[scan_str]==="."){for(scan_str++;isdigit(scanned[scan_str]);)scan_str++;if(scanned[scan_str]==="e"&&(scanned[scan_str+1]==="+"||scanned[scan_str+1]==="-"||isdigit(scanned[scan_str+1])))for(scan_str+=2;isdigit(scanned[scan_str]);)scan_str++;token=T_DOUBLE}else token=T_INTEGER;update_token_buf(token_str,scan_str);return}if(isalpha(scanned[scan_str])){for(;isalnumorunderscore(scanned[scan_str]);)scan_str++;scanned[scan_str]==="("?token=T_FUNCTION:token=T_SYMBOL,update_token_buf(token_str,scan_str);return}if(scanned[scan_str]==='"'){for(scan_str++;scanned[scan_str]!=='"';)scan_str===scanned.length-1&&(scan_str++,scan_error("runaway string"),scan_str--),scan_str++;scan_str++,token=T_STRING,update_token_buf(token_str+1,scan_str-1);return}if(scanned[scan_str]==="#"||scanned[scan_str]==="-"&&scanned[scan_str+1]==="-"){for(;scanned[scan_str]&&scanned[scan_str]!==`
`&&scanned[scan_str]!=="\r";)scan_str++;scanned[scan_str]&&scan_str++,token=T_NEWLINE;return}if(scanned[scan_str]===":"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_QUOTASSIGN;return}if(scanned[scan_str]==="="&&scanned[scan_str+1]==="="){scan_str+=2,token=T_EQ;return}if(scanned[scan_str]==="!"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_NEQ;return}if(scanned[scan_str]==="<"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_LTEQ;return}if(scanned[scan_str]===">"&&scanned[scan_str+1]==="="){scan_str+=2,token=T_GTEQ;return}return token=scanned[scan_str++]},update_token_buf=function(t,n){return token_buf=scanned.substring(t,n)},$.scan=scan,Eval_sgn=function(){return push(cadr(p1)),Eval(),sgn()},sgn=function(){return save(),yysgn(),restore()},yysgn=function(){if(p1=pop(),isdouble(p1))if(p1.d>0){push_integer(1);return}else if(p1.d===0){push_integer(1);return}else{push_integer(-1);return}if(isrational(p1))if(MSIGN(mmul(p1.q.a,p1.q.b))===-1){push_integer(-1);return}else if(MZERO(mmul(p1.q.a,p1.q.b))){push_integer(0);return}else{push_integer(1);return}if(iscomplexnumber(p1)){push_integer(-1),push(p1),absval(),power(),push(p1),multiply();return}if(isnegativeterm(p1)){push_symbol(SGN),push(p1),negate(),list(2),push_integer(-1),multiply();return}return push_symbol(SGN),push(p1),list(2)},Eval_shape=function(){return push(cadr(p1)),Eval(),shape()},shape=function(){var t,n,a,s,l,u,c,p;for(a=0,u=0,t=[],n=[],a=s=0,c=MAXDIM;0<=c?s<c:s>c;a=0<=c?++s:--s)t[a]=0,n[a]=0;if(save(),p1=pop(),!istensor(p1)){isZeroAtomOrTensor(p1)||stop("transpose: tensor expected, 1st arg is not a tensor"),push(zero),restore();return}for(u=p1.tensor.ndim,p2=alloc_tensor(u),p2.tensor.ndim=1,p2.tensor.dim[0]=u,a=l=0,p=u;0<=p?l<p:l>p;a=0<=p?++l:--l)push_integer(p1.tensor.dim[a]),p2.tensor.elem[a]=pop();return push(p2),restore()},simfac=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(ADD)){for(t=tos,p1=cdr(p1);p1!==symbol(NIL);)push(car(p1)),simfac_term(),p1=cdr(p1);add_all(tos-t)}else push(p1),simfac_term();return restore()},simfac_term=function(){var t;if(t=0,save(),p1=pop(),car(p1)!==symbol(MULTIPLY)){push(p1),restore();return}for(t=tos,p1=cdr(p1);p1!==symbol(NIL);)push(car(p1)),p1=cdr(p1);for(;yysimfac(t););return multiply_all_noexpand(tos-t),restore()},yysimfac=function(t){var n,a,s,l,u,c,p,d;for(n=0,a=0,n=s=u=t,c=tos;u<=c?s<c:s>c;n=u<=c?++s:--s)for(p1=stack[n],a=l=p=t,d=tos;p<=d?l<d:l>d;a=p<=d?++l:--l)if(n!==a){if(p2=stack[a],car(p1)===symbol(FACTORIAL)&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&equal(cadr(p1),cadr(p2)))return push(cadr(p1)),push(one),subtract(),factorial(),stack[n]=pop(),stack[a]=one,1;if(car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)&&equal(p1,cadadr(p2)))return push(p1),push_integer(-1),add(),factorial(),reciprocate(),stack[n]=pop(),stack[a]=one,1;if(car(p2)===symbol(FACTORIAL)&&(push(p1),push(cadr(p2)),subtract(),p3=pop(),isplusone(p3)))return push(p1),factorial(),stack[n]=pop(),stack[a]=one,1;if(car(p1)===symbol(POWER)&&isminusone(caddr(p1))&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)&&(push(cadr(p1)),push(cadr(cadr(p2))),subtract(),p3=pop(),isplusone(p3)))return push(cadr(p1)),factorial(),reciprocate(),stack[n]=pop(),stack[a]=one,1;if(car(p1)===symbol(FACTORIAL)&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)){if(push(cadr(p1)),push(cadr(cadr(p2))),subtract(),p3=pop(),isplusone(p3))return stack[n]=cadr(p1),stack[a]=one,1;if(isminusone(p3))return push(cadr(cadr(p2))),reciprocate(),stack[n]=pop(),stack[a]=one,1;if(equaln(p3,2))return stack[n]=cadr(p1),push(cadr(p1)),push_integer(-1),add(),stack[a]=pop(),1;if(equaln(p3,-2))return push(cadr(cadr(p2))),reciprocate(),stack[n]=pop(),push(cadr(cadr(p2))),push_integer(-1),add(),reciprocate(),stack[a]=pop(),1}}return 0},DEBUG_SIMPLIFY=!1,Eval_simplify=function(){return push(cadr(p1)),runUserDefinedSimplifications(),Eval(),simplify()},runUserDefinedSimplifications=function(){var t,n,a,s,l,u,c,p,d,x;if(userSimplificationsInListForm.length!==0&&!Find(cadr(p1),symbol(INTEGRAL))){for(d=expanding,expanding=!1,DEBUG_SIMPLIFY&&console.log("runUserDefinedSimplifications passed: "+stack[tos-1].toString()),Eval(),DEBUG_SIMPLIFY&&console.log("runUserDefinedSimplifications after eval no expanding: "+stack[tos-1].toString()),expanding=d,p1=stack[tos-1],DEBUG_SIMPLIFY&&console.log("patterns to be checked: "),s=0,l=userSimplificationsInListForm.length;s<l;s++)a=userSimplificationsInListForm[s],DEBUG_SIMPLIFY&&console.log("..."+a);for(t=!0,p=0;t&&p<MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES;)for(t=!1,p++,c=0,u=userSimplificationsInListForm.length;c<u;c++){for(a=userSimplificationsInListForm[c],x=!0,n=0;x&&n<MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE;)n++,DEBUG_SIMPLIFY&&console.log("simplify - tos: "+tos+" checking pattern: "+a+" on: "+p1),push_symbol(NIL),x=transform(a,!0),x&&(t=!0),p1=stack[tos-1],DEBUG_SIMPLIFY&&console.log("p1 at this stage of simplification: "+p1);n===MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE&&stop("maximum application of single transformation rule exceeded: "+a)}if(p===MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES&&stop("maximum application of all transformation rules exceeded "),DEBUG_SIMPLIFY&&console.log("METAX = "+get_binding(symbol(METAX))),DEBUG_SIMPLIFY&&console.log("METAA = "+get_binding(symbol(METAA))),DEBUG_SIMPLIFY)return console.log("METAB = "+get_binding(symbol(METAB)))}},simplifyForCodeGeneration=function(){return save(),runUserDefinedSimplifications(),codeGen=!0,simplify_main(),codeGen=!1,restore()},simplify=function(){return save(),simplify_main(),restore()},simplify_main=function(){var args,fbody;if(p1=pop(),codeGen&&car(p1)===symbol(FUNCTION)&&(fbody=cadr(p1),push(fbody),eval(),simplify(),p3=pop(),args=caddr(p1),push_symbol(FUNCTION),push(p3),push(args),list(3),p1=pop()),istensor(p1)){simplify_tensor();return}if(Find(p1,symbol(FACTORIAL))&&(push(p1),simfac(),p2=pop(),push(p1),rationalize(),simfac(),p3=pop(),count(p2)<count(p3)?p1=p2:p1=p3),f10(),DEBUG_SIMPLIFY&&console.log("f10: "+p1.toString()),f1(),DEBUG_SIMPLIFY&&console.log("f1: "+p1.toString()),f2(),DEBUG_SIMPLIFY&&console.log("f2: "+p1.toString()),f3(),DEBUG_SIMPLIFY&&console.log("f3: "+p1.toString()),f4(),DEBUG_SIMPLIFY&&console.log("f4: "+p1.toString()),f5(),DEBUG_SIMPLIFY&&console.log("f5: "+p1.toString()),f9(),DEBUG_SIMPLIFY&&console.log("f9: "+p1.toString()),simplify_polarRect(),do_simplify_nested_radicals&&simplify_nested_radicals()){DEBUG_SIMPLIFY&&console.log("de-nesting successful into: "+p1.toString()),push(p1),simplify();return}return simplify_rectToClock(),simplify_rational_expressions(),push(p1)},simplify_tensor=function(){var t,n,a,s,l;for(t=0,p2=alloc_tensor(p1.tensor.nelem),p2.tensor.ndim=p1.tensor.ndim,t=n=0,s=p1.tensor.ndim;0<=s?n<s:n>s;t=0<=s?++n:--n)p2.tensor.dim[t]=p1.tensor.dim[t];for(t=a=0,l=p1.tensor.nelem;0<=l?a<l:a>l;t=0<=l?++a:--a)push(p1.tensor.elem[t]),simplify(),p2.tensor.elem[t]=pop();return check_tensor_dimensions(p2),isZeroAtomOrTensor(p2)&&(p2=zero),push(p2)},f1=function(){if(car(p1)===symbol(ADD)&&(push(p1),rationalize(),p2=pop(),count(p2)<count(p1)))return p1=p2},f2=function(){if(car(p1)===symbol(ADD)&&(push(p1),Condense(),p2=pop(),count(p2)<=count(p1)))return p1=p2},f3=function(){if(push(p1),rationalize(),negate(),rationalize(),negate(),rationalize(),p2=pop(),count(p2)<count(p1))return p1=p2},f10=function(){var t,n,a,s;if(a=car(p1),cdr(p1),(a===symbol(MULTIPLY)||isinnerordot(p1))&&car(car(cdr(p1)))===symbol(TRANSPOSE)&&car(car(cdr(cdr(p1))))===symbol(TRANSPOSE)&&(DEBUG_SIMPLIFY&&console.log("maybe collecting a transpose "+p1),t=cadr(car(cdr(p1))),n=cadr(car(cdr(cdr(p1)))),a===symbol(MULTIPLY)?(push(t),push(n),multiply()):isinnerordot(p1)&&(push(n),push(t),inner()),push_integer(1),push_integer(2),s=expanding,expanding=!1,transpose(),expanding=s,p2=pop(),count(p2)<count(p1)&&(p1=p2),DEBUG_SIMPLIFY))return console.log("collecting a transpose "+p2)},f4=function(){if(!isZeroAtomOrTensor(p1)&&(push(p1),rationalize(),inverse(),rationalize(),inverse(),rationalize(),p2=pop(),count(p2)<count(p1)))return p1=p2},simplify_trig=function(){return save(),p1=pop(),f5(),push(p1),restore()},f5=function(){if(!(Find(p1,symbol(SIN))===0&&Find(p1,symbol(COS))===0)&&(p2=p1,trigmode=1,push(p2),Eval(),p3=pop(),trigmode=2,push(p2),Eval(),p4=pop(),trigmode=0,(count(p4)<count(p3)||nterms(p4)<nterms(p3))&&(p3=p4),count(p3)<count(p1)||nterms(p3)<nterms(p1)))return p1=p3},f9=function(){var t,n;if(car(p1)===symbol(ADD)){for(push_integer(0),p2=cdr(p1);iscons(p2);)push(car(p2)),simplify(),add(),t=p1,n=p2,p1=pop(),simplify_rational_expressions(),push(p1),p1=t,p2=n,p2=cdr(p2);if(p2=pop(),count(p2)<count(p1))return p1=p2}},simplify_rational_expressions=function(){var t,n,a,s;if(push(p1),denominator(),t=pop(),!isone(t)&&(push(p1),numerator(),n=pop(),!isone(n)&&(a=areunivarpolysfactoredorexpandedform(n,t))&&(push(n),push(t),gcd(),push(a),factor(),s=pop(),!isone(s)&&(push(n),push(a),factor(),push(s),inverse(),multiply_noexpand(),simplify(),stack[tos-1].toString(),push(t),push(a),factor(),push(s),inverse(),multiply_noexpand(),simplify(),stack[tos-1].toString(),divide(),Condense(),stack[tos-1].toString(),p2=pop(),count(p2)<count(p1)))))return p1=p2},simplify_rectToClock=function(){if(!(Find(p1,symbol(SIN))===0&&Find(p1,symbol(COS))===0)&&(push(p1),Eval(),clockform(),p2=pop(),DEBUG_SIMPLIFY&&console.log("before simplification clockform: "+p1+" after: "+p2),count(p2)<count(p1)))return p1=p2},simplify_polarRect=function(){if(push(p1),polarRectAMinusOneBase(),Eval(),p2=pop(),count(p2)<count(p1))return p1=p2},polarRectAMinusOneBase=function(){var t;if(save(),p1=pop(),isimaginaryunit(p1)){push(p1),restore();return}if(equal(car(p1),symbol(POWER))&&isminusone(cadr(p1)))push(one),negate(),push(caddr(p1)),polarRectAMinusOneBase(),power(),polar(),rect();else if(iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),polarRectAMinusOneBase(),p1=cdr(p1);list(tos-t)}else push(p1);restore()},nterms=function(t){return car(t)!==symbol(ADD)?1:length(t)-1},simplify_nested_radicals=function(){var t,n,a,s;return recursionLevelNestedRadicalsRemoval>0?(DEBUG_SIMPLIFY&&console.log("denesting bailing out because of too much recursion"),!1):(push(p1),s=take_care_of_nested_radicals(),a=stack[tos-1],t=expanding,expanding=0,yycondense(),expanding=t,n=pop(),countOccurrencesOfSymbol(symbol(POWER),a)<countOccurrencesOfSymbol(symbol(POWER),n)?push(a):push(n),p1=pop(),s)},take_care_of_nested_radicals=function(){var t,n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j,Z,W,J,en,tn,Ct,Q,on,gn,In,dn,ix,Cn,ax,sx,lx,ox,hx,_x;if(recursionLevelNestedRadicalsRemoval>0)return DEBUG_SIMPLIFY&&console.log("denesting bailing out because of too much recursion"),!1;if(save(),p1=pop(),equal(car(p1),symbol(POWER)))if(u=cadr(p1),S=caddr(p1),!isminusone(S)&&equal(car(u),symbol(ADD))&&isfraction(S)&&(equalq(S,1,3)||equalq(S,1,2))){for(T=cadr(u),push(T),take_care_of_nested_radicals(),pop(),lx=caddr(u),push(lx),take_care_of_nested_radicals(),pop(),Q=0,x=u;cdr(x)!==symbol(NIL);)Q++,x=cdr(x);if(Q>2)return push(p1),restore(),!1;if(d=null,p=[],hx=[],car(lx)===symbol(MULTIPLY)){if(ox=cdr(lx),iscons(ox))for(;iscons(ox);)Cn=car(ox),car(Cn)===symbol(POWER)?(D=cadr(Cn),O=caddr(Cn),equalq(O,1,2)&&(d==null?(d=O,p.push(D)):equal(O,d)&&p.push(D))):hx.push(Cn),ox=cdr(ox)}else car(lx)===symbol(POWER)&&(D=cadr(lx),O=caddr(lx),d==null&&equalq(O,1,2)&&(d=O,p.push(D)));if(p.length===0)return push(p1),restore(),!1;for(t=T,push_integer(1),F=0,z=p.length;F<z;F++)R=p[F],push(R),multiply();for(a=pop(),push_integer(1),tn=0,j=hx.length;tn<j;tn++)R=hx[tn],push(R),multiply();if(n=pop(),equalq(S,1,3)){if(push(t),negate(),push(a),multiply(),push(n),divide(),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return push(p1),restore(),!1;if(push(c),push_integer(3),push(a),multiply(),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),push(p1),restore(),!1;if(push(c),push(symbol(SECRETX)),multiply(),push_integer(-3),push(t),multiply(),push(n),divide(),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),pop(),push(p1),restore(),!1;push(c),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push_integer(1),push(symbol(SECRETX)),push_integer(3),power(),multiply(),add(),add(),add()}else if(equalq(S,1,2)){if(push(a),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return push(p1),restore(),!1;if(push(c),push_integer(-2),push(t),multiply(),push(n),divide(),c=pop(),push(c),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),push(p1),restore(),!1;push(c),push(symbol(SECRETX)),multiply(),push_integer(1),push(symbol(SECRETX)),push_integer(2),power(),multiply(),add(),add()}if(push(symbol(SECRETX)),recursionLevelNestedRadicalsRemoval++,roots(),recursionLevelNestedRadicalsRemoval--,equal(stack[tos-1],symbol(NIL)))return DEBUG_SIMPLIFY&&console.log("roots bailed out because of too much recursion"),pop(),push(p1),restore(),!1;for(ix=[],sx=stack[tos-1].tensor.elem,Ct=0,Z=sx.length;Ct<Z;Ct++)_=sx[Ct],Find(_,symbol(POWER))||ix.push(_);if(pop(),ix.length===0)return push(p1),restore(),!1;for(dn=[],ax=[],on=0,W=ix.length;on<W;on++)R=ix[on],push(R),real(),yyfloat(),dn.push(R),ax.push(pop().d);return _x=ax.indexOf(Math.max.apply(Math,ax)),s=dn[_x],equalq(S,1,3)?(push(t),push(s),push_integer(3),power(),push_integer(3),push(a),multiply(),push(s),multiply(),add(),divide(),push_rational(1,3),power()):equalq(S,1,2)&&(push(t),push(s),push_integer(2),power(),push(a),add(),divide(),push_rational(1,2),power()),en=pop(),en==null?(push(p1),restore(),!1):(push(en),push(s),multiply(),equalq(S,1,3)?(J=pop(),push(en),push(a),push_rational(1,2),power(),multiply(),push(J),add(),simplify()):equalq(S,1,2)&&(J=pop(),push(en),push(a),push_rational(1,2),power(),multiply(),push(J),add(),simplify(),gn=pop(),push(gn),real(),yyfloat(),In=pop(),isnegativenumber(In)?(push(en),negate(),en=pop(),push(J),negate(),J=pop(),push(en),push(a),push_rational(1,2),power(),multiply(),push(J),add(),simplify()):push(gn)),p1=pop(),push(p1),restore(),!0)}else return push(p1),restore(),!1;else if(iscons(p1)){for(A=tos,l=!1;iscons(p1);)push(car(p1)),l=l||take_care_of_nested_radicals(),p1=cdr(p1);return list(tos-A),restore(),l}else return push(p1),restore(),!1},Eval_sin=function(){return push(cadr(p1)),Eval(),sine()},sine=function(){return save(),p1=pop(),car(p1)===symbol(ADD)?sine_of_angle_sum():sine_of_angle(),restore()},sine_of_angle_sum=function(){for(p2=cdr(p1);iscons(p2);){if(p4=car(p2),isnpi(p4)){push(p1),push(p4),subtract(),p3=pop(),push(p3),sine(),push(p4),cosine(),multiply(),push(p3),cosine(),push(p4),sine(),multiply(),add();return}p2=cdr(p2)}return sine_of_angle()},sine_of_angle=function(){var t,n;if(car(p1)===symbol(ARCSIN)){push(cadr(p1));return}if(isdouble(p1)){t=Math.sin(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isnegative(p1)){push(p1),negate(),sine(),negate();return}if(car(p1)===symbol(ARCTAN)){push(cadr(p1)),push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),push_rational(-1,2),power(),multiply();return}if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),n=pop_integer(),n<0||isNaN(n)){push(symbol(SIN)),push(p1),list(2);return}switch(n%360){case 0:case 180:return push_integer(0);case 30:case 150:return push_rational(1,2);case 210:case 330:return push_rational(-1,2);case 45:case 135:return push_rational(1,2),push_integer(2),push_rational(1,2),power(),multiply();case 225:case 315:return push_rational(-1,2),push_integer(2),push_rational(1,2),power(),multiply();case 60:case 120:return push_rational(1,2),push_integer(3),push_rational(1,2),power(),multiply();case 240:case 300:return push_rational(-1,2),push_integer(3),push_rational(1,2),power(),multiply();case 90:return push_integer(1);case 270:return push_integer(-1);default:return push(symbol(SIN)),push(p1),list(2)}},Eval_sinh=function(){return push(cadr(p1)),Eval(),ysinh()},ysinh=function(){return save(),yysinh(),restore()},yysinh=function(){var t;if(t=0,p1=pop(),car(p1)===symbol(ARCSINH)){push(cadr(p1));return}if(isdouble(p1)){t=Math.sinh(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(zero);return}return push_symbol(SINH),push(p1),list(2)},subst=function(){var t,n,a,s,l,u,c,p,d;if(save(),l=pop(),c=pop(),c===symbol(NIL)||l===symbol(NIL)){restore();return}if(t=pop(),istensor(t)){for(u=alloc_tensor(t.tensor.nelem),u.tensor.ndim=t.tensor.ndim,n=a=0,p=t.tensor.ndim;0<=p?a<p:a>p;n=0<=p?++a:--a)u.tensor.dim[n]=t.tensor.dim[n];for(n=s=0,d=t.tensor.nelem;0<=d?s<d:s>d;n=0<=d?++s:--s)push(t.tensor.elem[n]),push(c),push(l),subst(),u.tensor.elem[n]=pop(),check_tensor_dimensions(u);push(u)}else equal(t,c)?push(l):iscons(t)?(push(car(t)),push(c),push(l),subst(),push(cdr(t)),push(c),push(l),subst(),cons()):push(t);return restore()},Eval_sum=function(){var t,n,a,s,l,u,c,p;if(n=0,s=0,l=0,t=cadr(p1),a=caddr(p1),issymbol(a)||stop("sum: 2nd arg?"),push(cadddr(p1)),Eval(),s=pop_integer(),isNaN(s)){push(p1);return}if(push(caddddr(p1)),Eval(),l=pop_integer(),isNaN(l)){push(p1);return}for(p4=get_binding(a),push_integer(0),n=u=c=s,p=l;c<=p?u<=p:u>=p;n=c<=p?++u:--u)push_integer(n),p5=pop(),set_binding(a,p5),push(t),Eval(),add();return set_binding(a,p4)},Eval_tan=function(){return push(cadr(p1)),Eval(),tangent()},tangent=function(){return save(),yytangent(),restore()},yytangent=function(){var t,n;if(n=0,t=0,p1=pop(),car(p1)===symbol(ARCTAN)){push(cadr(p1));return}if(isdouble(p1)){t=Math.tan(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isnegative(p1)){push(p1),negate(),tangent(),negate();return}if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),n=pop_integer(),n<0||isNaN(n)){push(symbol(TAN)),push(p1),list(2);return}switch(n%360){case 0:case 180:return push_integer(0);case 30:case 210:return push_rational(1,3),push_integer(3),push_rational(1,2),power(),multiply();case 150:case 330:return push_rational(-1,3),push_integer(3),push_rational(1,2),power(),multiply();case 45:case 225:return push_integer(1);case 135:case 315:return push_integer(-1);case 60:case 240:return push_integer(3),push_rational(1,2),power();case 120:case 300:return push_integer(3),push_rational(1,2),power(),negate();default:return push(symbol(TAN)),push(p1),list(2)}},Eval_tanh=function(){var t;if(t=0,push(cadr(p1)),Eval(),p1=pop(),car(p1)===symbol(ARCTANH)){push(cadr(p1));return}if(isdouble(p1)){t=Math.tanh(p1.d),Math.abs(t)<1e-10&&(t=0),push_double(t);return}if(isZeroAtomOrTensor(p1)){push(zero);return}return push_symbol(TANH),push(p1),list(2)},Eval_taylor=function(){return p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?guess():push(p2),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(24):push(p2),p1=cdr(p1),push(car(p1)),Eval(),p2=pop(),p2===symbol(NIL)?push_integer(0):push(p2),taylor()},taylor=function(){var t,n,a,s;if(t=0,n=0,save(),p4=pop(),p3=pop(),p2=pop(),p1=pop(),push(p3),n=pop_integer(),isNaN(n)){push_symbol(TAYLOR),push(p1),push(p2),push(p3),push(p4),list(5),restore();return}for(push(p1),push(p2),push(p4),subst(),Eval(),push_integer(1),p5=pop(),t=a=1,s=n;(1<=s?a<=s:a>=s)&&(push(p1),push(p2),derivative(),p1=pop(),!isZeroAtomOrTensor(p1));t=1<=s?++a:--a)push(p5),push(p2),push(p4),subtract(),multiply(),p5=pop(),push(p1),push(p2),push(p4),subst(),Eval(),push(p5),multiply(),push_integer(t),factorial(),divide(),add();return restore()},Eval_tensor=function(){var t,n,a,s,l,u,c,p,d;for(a=0,u=0,c=0,check_tensor_dimensions(p1),c=p1.tensor.nelem,u=p1.tensor.ndim,p2=alloc_tensor(c),p2.tensor.ndim=u,a=s=0,p=u;0<=p?s<p:s>p;a=0<=p?++s:--s)p2.tensor.dim[a]=p1.tensor.dim[a];for(t=p1.tensor.elem,n=p2.tensor.elem,check_tensor_dimensions(p2),a=l=0,d=c;0<=d?l<d:l>d;a=0<=d?++l:--l)push(t[a]),Eval(),n[a]=pop();return check_tensor_dimensions(p1),check_tensor_dimensions(p2),push(p2),promote_tensor()},tensor_plus_tensor=function(){var t,n,a,s,l,u,c,p,d,x,_,S;if(s=0,p=0,d=0,save(),p2=pop(),p1=pop(),p=p1.tensor.ndim,p!==p2.tensor.ndim){push(symbol(NIL)),restore();return}for(s=l=0,x=p;0<=x?l<x:l>x;s=0<=x?++l:--l)if(p1.tensor.dim[s]!==p2.tensor.dim[s]){push(symbol(NIL)),restore();return}for(d=p1.tensor.nelem,p3=alloc_tensor(d),p3.tensor.ndim=p,s=u=0,_=p;0<=_?u<_:u>_;s=0<=_?++u:--u)p3.tensor.dim[s]=p1.tensor.dim[s];for(t=p1.tensor.elem,n=p2.tensor.elem,a=p3.tensor.elem,s=c=0,S=d;0<=S?c<S:c>S;s=0<=S?++c:--c)push(t[s]),push(n[s]),add(),a[s]=pop();return push(p3),restore()},tensor_times_scalar=function(){var t,n,a,s,l,u,c,p,d;for(a=0,u=0,c=0,save(),p2=pop(),p1=pop(),u=p1.tensor.ndim,c=p1.tensor.nelem,p3=alloc_tensor(c),p3.tensor.ndim=u,a=s=0,p=u;0<=p?s<p:s>p;a=0<=p?++s:--s)p3.tensor.dim[a]=p1.tensor.dim[a];for(t=p1.tensor.elem,n=p3.tensor.elem,a=l=0,d=c;0<=d?l<d:l>d;a=0<=d?++l:--l)push(t[a]),push(p2),multiply(),n[a]=pop();return push(p3),restore()},scalar_times_tensor=function(){var t,n,a,s,l,u,c,p,d;for(a=0,u=0,c=0,save(),p2=pop(),p1=pop(),u=p2.tensor.ndim,c=p2.tensor.nelem,p3=alloc_tensor(c),p3.tensor.ndim=u,a=s=0,p=u;0<=p?s<p:s>p;a=0<=p?++s:--s)p3.tensor.dim[a]=p2.tensor.dim[a];for(t=p2.tensor.elem,n=p3.tensor.elem,a=l=0,d=c;0<=d?l<d:l>d;a=0<=d?++l:--l)push(p1),push(t[a]),multiply(),n[a]=pop();return push(p3),restore()},check_tensor_dimensions=function(t){if(t.tensor.nelem!==t.tensor.elem.length){console.log("something wrong in tensor dimensions");debugger}},d_tensor_tensor=function(){var t,n,a,s,l,u,c,p,d,x,_,S,T;if(s=0,l=0,d=0,x=0,d=p1.tensor.ndim,x=p1.tensor.nelem,d+1>=MAXDIM){push_symbol(DERIVATIVE),push(p1),push(p2),list(3);return}for(p3=alloc_tensor(x*p2.tensor.nelem),p3.tensor.ndim=d+1,s=u=0,_=d;0<=_?u<_:u>_;s=0<=_?++u:--u)p3.tensor.dim[s]=p1.tensor.dim[s];for(p3.tensor.dim[d]=p2.tensor.dim[0],t=p1.tensor.elem,n=p2.tensor.elem,a=p3.tensor.elem,s=c=0,S=x;0<=S?c<S:c>S;s=0<=S?++c:--c)for(l=p=0,T=p2.tensor.nelem;0<=T?p<T:p>T;l=0<=T?++p:--p)push(t[s]),push(n[l]),derivative(),a[s*p2.tensor.nelem+l]=pop();return push(p3)},d_scalar_tensor=function(){var t,n,a,s,l;for(p3=alloc_tensor(p2.tensor.nelem),p3.tensor.ndim=1,p3.tensor.dim[0]=p2.tensor.dim[0],t=p2.tensor.elem,n=p3.tensor.elem,a=s=0,l=p2.tensor.nelem;0<=l?s<l:s>l;a=0<=l?++s:--s)push(p1),push(t[a]),derivative(),n[a]=pop();return push(p3)},d_tensor_scalar=function(){var t,n,a,s,l,u,c;for(a=0,p3=alloc_tensor(p1.tensor.nelem),p3.tensor.ndim=p1.tensor.ndim,a=s=0,u=p1.tensor.ndim;0<=u?s<u:s>u;a=0<=u?++s:--s)p3.tensor.dim[a]=p1.tensor.dim[a];for(t=p1.tensor.elem,n=p3.tensor.elem,a=l=0,c=p1.tensor.nelem;0<=c?l<c:l>c;a=0<=c?++l:--l)push(t[a]),push(p2),derivative(),n[a]=pop();return push(p3)},compare_tensors=function(t,n){var a,s,l,u,c;if(a=0,t.tensor.ndim<n.tensor.ndim)return-1;if(t.tensor.ndim>n.tensor.ndim)return 1;for(a=s=0,u=t.tensor.ndim;0<=u?s<u:s>u;a=0<=u?++s:--s){if(t.tensor.dim[a]<n.tensor.dim[a])return-1;if(t.tensor.dim[a]>n.tensor.dim[a])return 1}for(a=l=0,c=t.tensor.nelem;0<=c?l<c:l>c;a=0<=c?++l:--l)if(!equal(t.tensor.elem[a],n.tensor.elem[a]))return lessp(t.tensor.elem[a],n.tensor.elem[a])?-1:1;return 0},power_tensor=function(){var t,n,a,s,l,u,c,p;if(t=0,n=0,l=0,n=p1.tensor.ndim-1,p1.tensor.dim[0]!==p1.tensor.dim[n]){push_symbol(POWER),push(p1),push(p2),list(3);return}if(push(p2),l=pop_integer(),isNaN(l)){push_symbol(POWER),push(p1),push(p2),list(3);return}if(l===0){for(p1.tensor.ndim!==2&&stop("power(tensor,0) with tensor rank not equal to 2"),l=p1.tensor.dim[0],p1=alloc_tensor(l*l),p1.tensor.ndim=2,p1.tensor.dim[0]=l,p1.tensor.dim[1]=l,t=a=0,u=l;0<=u?a<u:a>u;t=0<=u?++a:--a)p1.tensor.elem[l*t+t]=one;check_tensor_dimensions(p1),push(p1);return}for(l<0&&(l=-l,push(p1),inv(),p1=pop()),push(p1),p=[],t=s=1,c=l;(1<=c?s<c:s>c)&&(push(p1),inner(),!isZeroAtomOrTensor(stack[tos-1]));t=1<=c?++s:--s)p.push(void 0);return p},copy_tensor=function(){var t,n,a,s,l;for(t=0,save(),p1=pop(),p2=alloc_tensor(p1.tensor.nelem),p2.tensor.ndim=p1.tensor.ndim,t=n=0,s=p1.tensor.ndim;0<=s?n<s:n>s;t=0<=s?++n:--n)p2.tensor.dim[t]=p1.tensor.dim[t];for(t=a=0,l=p1.tensor.nelem;0<=l?a<l:a>l;t=0<=l?++a:--a)p2.tensor.elem[t]=p1.tensor.elem[t];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),push(p2),restore()},promote_tensor=function(){var t,n,a,s,l,u,c,p,d,x,_,S,T,A,R;if(t=0,n=0,a=0,p=0,c=0,save(),p1=pop(),!istensor(p1)){push(p1),restore();return}for(p2=p1.tensor.elem[0],t=s=1,_=p1.tensor.nelem;1<=_?s<_:s>_;t=1<=_?++s:--s)compatible(p2,p1.tensor.elem[t])||stop("Cannot promote tensor due to inconsistent tensor components.");if(!istensor(p2)){push(p1),restore();return}for(c=p1.tensor.ndim+p2.tensor.ndim,c>MAXDIM&&stop("tensor rank > "+MAXDIM),p=p1.tensor.nelem*p2.tensor.nelem,p3=alloc_tensor(p),p3.tensor.ndim=c,t=l=0,S=p1.tensor.ndim;0<=S?l<S:l>S;t=0<=S?++l:--l)p3.tensor.dim[t]=p1.tensor.dim[t];for(n=u=0,T=p2.tensor.ndim;0<=T?u<T:u>T;n=0<=T?++u:--u)p3.tensor.dim[t+n]=p2.tensor.dim[n];for(a=0,t=d=0,A=p1.tensor.nelem;0<=A?d<A:d>A;t=0<=A?++d:--d)for(p2=p1.tensor.elem[t],n=x=0,R=p2.tensor.nelem;0<=R?x<R:x>R;n=0<=R?++x:--x)p3.tensor.elem[a++]=p2.tensor.elem[n];return check_tensor_dimensions(p2),check_tensor_dimensions(p3),push(p3),restore()},compatible=function(t,n){var a,s,l;if(!istensor(t)&&!istensor(n))return 1;if(!istensor(t)||!istensor(n)||t.tensor.ndim!==n.tensor.ndim)return 0;for(a=s=0,l=t.tensor.ndim;0<=l?s<l:s>l;a=0<=l?++s:--s)if(t.tensor.dim[a]!==n.tensor.dim[a])return 0;return 1},Eval_test=function(){var t,n;for(n=p1,p1=cdr(p1);iscons(p1);){if(cdr(p1)===symbol(NIL)){push(car(p1)),Eval();return}if(t=isZeroLikeOrNonZeroLikeOrUndetermined(car(p1)),t==null){push(n);return}else if(t){push(cadr(p1)),Eval();return}else p1=cddr(p1)}return push_integer(0)},Eval_testeq=function(){var t,n,a;if(n=p1,push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),subtract(),a=pop(),t=isZeroLikeOrNonZeroLikeOrUndetermined(a),t){push_integer(0);return}else if(t!=null&&!t){push_integer(1);return}if(push(cadr(p1)),Eval(),simplify(),push(caddr(p1)),Eval(),simplify(),subtract(),a=pop(),t=isZeroLikeOrNonZeroLikeOrUndetermined(a),t){push_integer(0);return}else if(t!=null&&!t){push_integer(1);return}return push(n)},Eval_testge=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t>=0?push_integer(1):push_integer(0)},Eval_testgt=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t>0?push_integer(1):push_integer(0)},Eval_testle=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t<=0?push_integer(1):push_integer(0)},Eval_testlt=function(){var t,n;if(n=p1,t=cmp_args(),t==null){push(n);return}return t<0?push_integer(1):push_integer(0)},Eval_not=function(){var t,n;return n=p1,t=isZeroLikeOrNonZeroLikeOrUndetermined(cadr(p1)),t==null?push(n):push_integer(t?0:1)},Eval_and=function(){var t,n,a,s;for(s=p1,t=cdr(s),a=!1;iscons(t);)if(n=isZeroLikeOrNonZeroLikeOrUndetermined(car(t)),n==null)a=!0,t=cdr(t);else if(n)t=cdr(t);else if(!n){push_integer(0);return}return a?push(s):push_integer(1)},Eval_or=function(){var t,n,a,s;for(s=p1,n=cdr(s),a=!1;iscons(n);)if(t=isZeroLikeOrNonZeroLikeOrUndetermined(car(n)),t==null)a=!0,n=cdr(n);else if(t){push_integer(1);return}else t||(n=cdr(n));return a?push(s):push_integer(0)},cmp_args=function(){var t;if(t=0,push(cadr(p1)),Eval(),simplify(),push(caddr(p1)),Eval(),simplify(),subtract(),p1=pop(),p1.k!==NUM&&p1.k!==DOUBLE&&(push(p1),yyfloat(),Eval(),p1=pop()),isZeroAtomOrTensor(p1))return 0;switch(p1.k){case NUM:MSIGN(p1.q.a)===-1?t=-1:t=1;break;case DOUBLE:p1.d<0?t=-1:t=1;break;default:t=null}return t},transform=function(t,n){var a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z;if(O=0,save(),p1=null,p4=pop(),p3=pop(),DEBUG&&console.log("         !!!!!!!!!   transform on: "+p3),saveMetaBindings(),set_binding(symbol(METAX),p4),O=tos,push_integer(1),push(p3),push(p4),polyform(),push(p4),a=tos-2,decomp(n),_=tos-a,DEBUG)for(console.log("  "+_+" decomposed elements ====== "),l=u=0,S=_;0<=S?u<S:u>S;l=0<=S?++u:--u)console.log("  decomposition element "+l+": "+stack[tos-1-l]);if(F=!1,n){if(!isNumericAtom(p3))if(D=t,DEBUG&&console.log("applying transform: "+D),DEBUG&&console.log("scanning table entry "+D),push(D),push(symbol(SYMBOL_A_UNDERSCORE)),push(symbol(METAA)),subst(),push(symbol(SYMBOL_B_UNDERSCORE)),push(symbol(METAB)),subst(),push(symbol(SYMBOL_X_UNDERSCORE)),push(symbol(METAX)),subst(),p1=pop(),p5=car(p1),DEBUG&&console.log("template expression: "+p5),p6=cadr(p1),p7=cddr(p1),f_equals_a(O,n))F=!0;else{for(DEBUG&&console.log("p3 at this point: "+p3),z=[],DEBUG&&console.log("car(p3): "+car(p3)),T=p3,iscons(T)&&(z.push(car(p3)),T=cdr(p3));iscons(T);)A=car(T),T=cdr(T),DEBUG&&console.log("tos before recursive transform: "+tos),push(A),push_symbol(NIL),DEBUG&&console.log("testing: "+A),DEBUG&&console.log("about to try to simplify other term: "+A),R=transform(t,n),F=F||R,z.push(pop()),DEBUG&&console.log("tried to simplify other term: "+A+" ...successful?: "+R+" ...transformed: "+z[z.length-1]);if(z.length!==0){for(d=0,c=z.length;d<c;d++)l=z[d],push(l);list(z.length),p6=pop()}}}else for(x=0,p=t.length;x<p;x++){if(s=t[x],DEBUG&&(console.log("scanning table entry "+s),(s+"").indexOf("f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))")!==-1))debugger;if(s&&(scan_meta(s),p1=pop(),p5=cadr(p1),p6=caddr(p1),p7=cdddr(p1),f_equals_a(O,n))){F=!0;break}}return moveTos(O),F?(push(p6),Eval(),p1=pop(),F=!0):n?p1=p3:p1=symbol(NIL),restoreMetaBindings(),push(p1),restore(),F},saveMetaBindings=function(){return push(get_binding(symbol(METAA))),push(get_binding(symbol(METAB))),push(get_binding(symbol(METAX)))},restoreMetaBindings=function(){return set_binding(symbol(METAX),pop()),set_binding(symbol(METAB),pop()),set_binding(symbol(METAA),pop())},f_equals_a=function(t,n){var a,s,l,u,c,p,d,x,_;for(a=0,s=0,a=l=p=t,d=tos;p<=d?l<d:l>d;a=p<=d?++l:--l)for(set_binding(symbol(METAA),stack[a]),DEBUG&&console.log("  binding METAA to "+get_binding(symbol(METAA))),s=u=x=t,_=tos;x<=_?u<_:u>_;s=x<=_?++u:--u){for(set_binding(symbol(METAB),stack[s]),DEBUG&&console.log("  binding METAB to "+get_binding(symbol(METAB))),p1=p7;iscons(p1)&&(push(car(p1)),Eval(),p2=pop(),!isZeroAtomOrTensor(p2));)p1=cdr(p1);if(!iscons(p1)&&(push(p3),DEBUG&&console.log("about to evaluate template expression: "+p5+" binding METAA to "+get_binding(symbol(METAA))+" and binding METAB to "+get_binding(symbol(METAB))+" and binding METAX to "+get_binding(symbol(METAX))),push(p5),n&&(c=expanding,expanding=!1),Eval(),n&&(expanding=c),DEBUG&&console.log("  comparing "+stack[tos-1]+" to: "+stack[tos-2]),subtract(),p1=pop(),isZeroAtomOrTensor(p1)))return DEBUG&&(console.log("binding METAA to "+get_binding(symbol(METAA))),console.log("binding METAB to "+get_binding(symbol(METAB))),console.log("binding METAX to "+get_binding(symbol(METAX))),console.log("comparing "+p3+" to: "+p5)),1}return 0},Eval_transpose=function(){return push(cadr(p1)),Eval(),cddr(p1)===symbol(NIL)?(push_integer(1),push_integer(2)):(push(caddr(p1)),Eval(),push(cadddr(p1)),Eval()),transpose()},transpose=function(){var t,n,a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j,Z,W,J,en,tn,Ct,Q,on,gn,In;for(c=0,x=0,_=0,S=0,A=0,O=0,F=0,In=0,a=[],s=[],c=T=0,W=MAXDIM;0<=W?T<W:T>W;c=0<=W?++T:--T)a[c]=0,s[c]=0;if(save(),p3=pop(),p2=pop(),p1=pop(),isNumericAtom(p1)){push(p1),restore();return}if((isplusone(p2)&&isplustwo(p3)||isplusone(p3)&&isplustwo(p2))&&isidentitymatrix(p1)){push(p1),restore();return}if(istranspose(p1)&&(p=car(cdr(cdr(p1))),d=car(cdr(cdr(cdr(p1)))),equal(p,p3)&&equal(d,p2)||equal(d,p3)&&equal(p,p2)||equal(p,symbol(NIL))&&equal(d,symbol(NIL))&&(isplusone(p3)&&isplustwo(p2)||isplusone(p2)&&isplustwo(p3)))){push(car(cdr(p1))),restore();return}if(expanding&&isadd(p1)){for(p1=cdr(p1),push(zero);iscons(p1);)push(car(p1)),push(p2),push(p3),transpose(),add(),p1=cdr(p1);restore();return}if(expanding&&ismultiply(p1)){for(p1=cdr(p1),push(one);iscons(p1);)push(car(p1)),push(p2),push(p3),transpose(),multiply(),p1=cdr(p1);restore();return}if(expanding&&isinnerordot(p1)){for(p1=cdr(p1),n=[];iscons(p1);)n.push([car(p1),p2,p3]),p1=cdr(p1);for(u=R=J=n.length-1;J<=0?R<=0:R>=0;u=J<=0?++R:--R)push(n[u][0]),push(n[u][1]),push(n[u][2]),transpose(),u!==n.length-1&&inner();restore();return}if(!istensor(p1)){if(!isZeroAtomOrTensor(p1)){push_symbol(TRANSPOSE),push(p1),(!isplusone(p2)||!isplustwo(p3))&&(!isplusone(p3)||!isplustwo(p2))?(push(p2),push(p3),list(4)):list(2),restore();return}push(zero),restore();return}if(O=p1.tensor.ndim,F=p1.tensor.nelem,O===1){push(p1),restore();return}for(push(p2),S=pop_integer(),push(p3),A=pop_integer(),(S<1||S>O||A<1||A>O)&&stop("transpose: index out of range"),S--,A--,p2=alloc_tensor(F),p2.tensor.ndim=O,c=D=0,en=O;0<=en?D<en:D>en;c=0<=en?++D:--D)p2.tensor.dim[c]=p1.tensor.dim[c];for(p2.tensor.dim[S]=p1.tensor.dim[A],p2.tensor.dim[A]=p1.tensor.dim[S],t=p1.tensor.elem,l=p2.tensor.elem,c=z=0,tn=O;0<=tn?z<tn:z>tn;c=0<=tn?++z:--z)a[c]=0,s[c]=p1.tensor.dim[c];for(c=j=0,Ct=F;0<=Ct?j<Ct:j>Ct;c=0<=Ct?++j:--j){for(In=a[S],a[S]=a[A],a[A]=In,In=s[S],s[S]=s[A],s[A]=In,_=0,x=Z=0,Q=O;0<=Q?Z<Q:Z>Q;x=0<=Q?++Z:--Z)_=_*s[x]+a[x];for(In=a[S],a[S]=a[A],a[A]=In,In=s[S],s[S]=s[A],s[A]=In,l[_]=t[c],x=gn=on=O-1;(on<=0?gn<=0:gn>=0)&&!(++a[x]<s[x]);x=on<=0?++gn:--gn)a[x]=0}return push(p2),restore()},Eval_user_function=function(){var t,n;if(DEBUG&&console.log("Eval_user_function evaluating: "+car(p1)),car(p1)===symbol(SYMBOL_D)&&get_binding(symbol(SYMBOL_D))===symbol(SYMBOL_D)){Eval_derivative();return}if(push(car(p1)),Eval(),t=pop(),isNumericAtom(t)?stop("expected function invocation, found multiplication instead. Use '*' symbol explicitly for multiplication."):istensor(t)?stop("expected function invocation, found tensor product instead. Use 'dot/inner' explicitly."):isstr(t)&&stop("expected function, found string instead."),p3=car(cdr(t)),p4=car(cdr(cdr(t))),p5=cdr(p1),car(t)!==symbol(FUNCTION)||t===car(p1)){for(n=tos,push(t),p1=p5;iscons(p1);)push(car(p1)),Eval(),p1=cdr(p1);list(tos-n);return}for(p1=p4,p2=p5,n=tos;iscons(p1)&&iscons(p2);)push(car(p1)),push(car(p2)),p1=cdr(p1),p2=cdr(p2);return list(tos-n),p6=pop(),push(p3),iscons(p6)&&(push(p6),rewrite_args()),Eval()},rewrite_args=function(){var t,n;if(n=0,save(),p2=pop(),p1=pop(),istensor(p1))return n=rewrite_args_tensor(),restore(),n;if(iscons(p1)){for(t=tos,car(p1)===car(p2)?(push_symbol(EVAL),push(car(cdr(p2))),list(2)):push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),n+=rewrite_args(),p1=cdr(p1);return list(tos-t),restore(),n}if(!issymbol(p1))return push(p1),restore(),0;for(p3=p2;iscons(p3);){if(p1===car(p3))return push(cadr(p3)),restore(),1;p3=cddr(p3)}return p3=get_binding(p1),push(p3),p1!==p3&&(push(p2),n=rewrite_args(),n===0&&(pop(),push(p1))),restore(),n},rewrite_args_tensor=function(){var t,n,a,s;for(a=0,t=0,push(p1),copy_tensor(),p1=pop(),t=n=0,s=p1.tensor.nelem;0<=s?n<s:n>s;t=0<=s?++n:--n)push(p1.tensor.elem[t]),push(p2),a+=rewrite_args(),p1.tensor.elem[t]=pop();return check_tensor_dimensions(p1),push(p1),a},Eval_zero=function(){var t,n,a,s,l,u,c,p;for(t=0,n=[],s=0,u=0,t=a=0,c=MAXDIM;0<=c?a<c:a>c;t=0<=c?++a:--a)n[t]=0;for(s=1,u=0,p2=cdr(p1);iscons(p2);){if(push(car(p2)),Eval(),t=pop_integer(),t<1||isNaN(t)){push(zero);return}s*=t,n[u++]=t,p2=cdr(p2)}if(u===0){push(zero);return}for(p1=alloc_tensor(s),p1.tensor.ndim=u,t=l=0,p=u;0<=p?l<p:l>p;t=0<=p?++l:--l)p1.tensor.dim[t]=n[t];return push(p1)},allocatedId=0,alloc_tensor=function(t){var n,a,s,l;for(n=0,s=new U,s.k=TENSOR,s.tensor=new tensor,s.tensor.nelem=t,n=a=0,l=t;0<=l?a<l:a>l;n=0<=l?++a:--a)s.tensor.elem[n]=zero;return s.tensor.allocatedId=allocatedId,allocatedId++,check_tensor_dimensions(s),s},Find=function(t,n){var a,s,l;if(a=0,equal(t,n))return 1;if(istensor(t)){for(a=s=0,l=t.tensor.nelem;0<=l?s<l:s>l;a=0<=l?++s:--s)if(Find(t.tensor.elem[a],n))return 1;return 0}for(;iscons(t);){if(Find(car(t),n))return 1;t=cdr(t)}return 0},findPossibleClockForm=function(t){var n,a,s;if(n=0,isimaginaryunit(t))return 0;if(car(t)===symbol(POWER)&&!isinteger(caddr(p1))&&Find(cadr(t),imaginaryunit)||car(t)===symbol(POWER)&&equaln(cadr(t),-1)&&!isinteger(caddr(p1)))return 1;if(istensor(t)){for(n=a=0,s=t.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)if(findPossibleClockForm(t.tensor.elem[n]))return 1;return 0}for(;iscons(t);){if(findPossibleClockForm(car(t)))return 1;t=cdr(t)}return 0},findPossibleExponentialForm=function(t){var n,a,s;if(n=0,car(t)===symbol(POWER)&&cadr(t)===symbol(E))return Find(caddr(t),imaginaryunit);if(istensor(t)){for(n=a=0,s=t.tensor.nelem;0<=s?a<s:a>s;n=0<=s?++a:--a)if(findPossibleExponentialForm(t.tensor.elem[n]))return 1;return 0}for(;iscons(t);){if(findPossibleExponentialForm(car(t)))return 1;t=cdr(t)}return 0},$.Find=Find,init=function(){var t,n,a;if(t=0,flag=0,reset_after_error(),chainOfUserSymbolsNotFunctionsBeingEvaluated=[],!flag){for(flag=1,t=n=0,a=NSYM;0<=a?n<a:n>a;t=0<=a?++n:--n)symtab[t]=new U,symtab[t].k=SYM,binding[t]=symtab[t],isSymbolReclaimable[t]=!1;return defn()}},defn_str=['version="'+version+'"',"e=exp(1)","i=sqrt(-1)","autoexpand=1","assumeRealVariables=1","trange=[-pi,pi]","xrange=[-10,10]","yrange=[-10,10]","last=0","trace=0","forceFixedPrintout=1","maxFixedPrintoutDigits=6","printLeaveEAlone=1","printLeaveXAlone=0","cross(u,v)=[u[2]*v[3]-u[3]*v[2],u[3]*v[1]-u[1]*v[3],u[1]*v[2]-u[2]*v[1]]","curl(v)=[d(v[3],y)-d(v[2],z),d(v[1],z)-d(v[3],x),d(v[2],x)-d(v[1],y)]","div(v)=d(v[1],x)+d(v[2],y)+d(v[3],z)","ln(x)=log(x)"],defn=function(){var t,n,a,s,l;for(p0=symbol(NIL),p1=symbol(NIL),p2=symbol(NIL),p3=symbol(NIL),p4=symbol(NIL),p5=symbol(NIL),p6=symbol(NIL),p7=symbol(NIL),p8=symbol(NIL),p9=symbol(NIL),std_symbol("abs",ABS),std_symbol("add",ADD),std_symbol("adj",ADJ),std_symbol("and",AND),std_symbol("approxratio",APPROXRATIO),std_symbol("arccos",ARCCOS),std_symbol("arccosh",ARCCOSH),std_symbol("arcsin",ARCSIN),std_symbol("arcsinh",ARCSINH),std_symbol("arctan",ARCTAN),std_symbol("arctanh",ARCTANH),std_symbol("arg",ARG),std_symbol("atomize",ATOMIZE),std_symbol("besselj",BESSELJ),std_symbol("bessely",BESSELY),std_symbol("binding",BINDING),std_symbol("binomial",BINOMIAL),std_symbol("ceiling",CEILING),std_symbol("check",CHECK),std_symbol("choose",CHOOSE),std_symbol("circexp",CIRCEXP),std_symbol("clear",CLEAR),std_symbol("clearall",CLEARALL),std_symbol("clearpatterns",CLEARPATTERNS),std_symbol("clock",CLOCK),std_symbol("coeff",COEFF),std_symbol("cofactor",COFACTOR),std_symbol("condense",CONDENSE),std_symbol("conj",CONJ),std_symbol("contract",CONTRACT),std_symbol("cos",COS),std_symbol("cosh",COSH),std_symbol("decomp",DECOMP),std_symbol("defint",DEFINT),std_symbol("deg",DEGREE),std_symbol("denominator",DENOMINATOR),std_symbol("det",DET),std_symbol("derivative",DERIVATIVE),std_symbol("dim",DIM),std_symbol("dirac",DIRAC),std_symbol("divisors",DIVISORS),std_symbol("do",DO),std_symbol("dot",DOT),std_symbol("draw",DRAW),std_symbol("dsolve",DSOLVE),std_symbol("erf",ERF),std_symbol("erfc",ERFC),std_symbol("eigen",EIGEN),std_symbol("eigenval",EIGENVAL),std_symbol("eigenvec",EIGENVEC),std_symbol("eval",EVAL),std_symbol("exp",EXP),std_symbol("expand",EXPAND),std_symbol("expcos",EXPCOS),std_symbol("expsin",EXPSIN),std_symbol("factor",FACTOR),std_symbol("factorial",FACTORIAL),std_symbol("factorpoly",FACTORPOLY),std_symbol("filter",FILTER),std_symbol("float",FLOATF),std_symbol("floor",FLOOR),std_symbol("for",FOR),std_symbol("function",FUNCTION),std_symbol("Gamma",GAMMA),std_symbol("gcd",GCD),std_symbol("hermite",HERMITE),std_symbol("hilbert",HILBERT),std_symbol("imag",IMAG),std_symbol("component",INDEX),std_symbol("inner",INNER),std_symbol("integral",INTEGRAL),std_symbol("inv",INV),std_symbol("invg",INVG),std_symbol("isinteger",ISINTEGER),std_symbol("isprime",ISPRIME),std_symbol("laguerre",LAGUERRE),std_symbol("lcm",LCM),std_symbol("leading",LEADING),std_symbol("legendre",LEGENDRE),std_symbol("log",LOG),std_symbol("lookup",LOOKUP),std_symbol("mod",MOD),std_symbol("multiply",MULTIPLY),std_symbol("not",NOT),std_symbol("nroots",NROOTS),std_symbol("number",NUMBER),std_symbol("numerator",NUMERATOR),std_symbol("operator",OPERATOR),std_symbol("or",OR),std_symbol("outer",OUTER),std_symbol("pattern",PATTERN),std_symbol("patternsinfo",PATTERNSINFO),std_symbol("polar",POLAR),std_symbol("power",POWER),std_symbol("prime",PRIME),std_symbol("print",PRINT),std_symbol("print2dascii",PRINT2DASCII),std_symbol("printcomputer",PRINTFULL),std_symbol("printlatex",PRINTLATEX),std_symbol("printlist",PRINTLIST),std_symbol("printhuman",PRINTPLAIN),std_symbol("printLeaveEAlone",PRINT_LEAVE_E_ALONE),std_symbol("printLeaveXAlone",PRINT_LEAVE_X_ALONE),std_symbol("product",PRODUCT),std_symbol("quote",QUOTE),std_symbol("quotient",QUOTIENT),std_symbol("rank",RANK),std_symbol("rationalize",RATIONALIZE),std_symbol("real",REAL),std_symbol("rect",YYRECT),std_symbol("roots",ROOTS),std_symbol("round",ROUND),std_symbol("equals",SETQ),std_symbol("sgn",SGN),std_symbol("silentpattern",SILENTPATTERN),std_symbol("simplify",SIMPLIFY),std_symbol("sin",SIN),std_symbol("sinh",SINH),std_symbol("shape",SHAPE),std_symbol("sqrt",SQRT),std_symbol("stop",STOP),std_symbol("subst",SUBST),std_symbol("sum",SUM),std_symbol("symbolsinfo",SYMBOLSINFO),std_symbol("tan",TAN),std_symbol("tanh",TANH),std_symbol("taylor",TAYLOR),std_symbol("test",TEST),std_symbol("testeq",TESTEQ),std_symbol("testge",TESTGE),std_symbol("testgt",TESTGT),std_symbol("testle",TESTLE),std_symbol("testlt",TESTLT),std_symbol("transpose",TRANSPOSE),std_symbol("unit",UNIT),std_symbol("zero",ZERO),std_symbol("nil",NIL),std_symbol("autoexpand",AUTOEXPAND),std_symbol("bake",BAKE),std_symbol("assumeRealVariables",ASSUME_REAL_VARIABLES),std_symbol("last",LAST),std_symbol("lastprint",LAST_PRINT),std_symbol("last2dasciiprint",LAST_2DASCII_PRINT),std_symbol("lastfullprint",LAST_FULL_PRINT),std_symbol("lastlatexprint",LAST_LATEX_PRINT),std_symbol("lastlistprint",LAST_LIST_PRINT),std_symbol("lastplainprint",LAST_PLAIN_PRINT),std_symbol("trace",TRACE),std_symbol("forceFixedPrintout",FORCE_FIXED_PRINTOUT),std_symbol("maxFixedPrintoutDigits",MAX_FIXED_PRINTOUT_DIGITS),std_symbol("~",YYE),std_symbol("$DRAWX",DRAWX),std_symbol("$METAA",METAA),std_symbol("$METAB",METAB),std_symbol("$METAX",METAX),std_symbol("$SECRETX",SECRETX),std_symbol("version",VERSION),std_symbol("pi",PI),std_symbol("a",SYMBOL_A),std_symbol("b",SYMBOL_B),std_symbol("c",SYMBOL_C),std_symbol("d",SYMBOL_D),std_symbol("i",SYMBOL_I),std_symbol("j",SYMBOL_J),std_symbol("n",SYMBOL_N),std_symbol("r",SYMBOL_R),std_symbol("s",SYMBOL_S),std_symbol("t",SYMBOL_T),std_symbol("x",SYMBOL_X),std_symbol("y",SYMBOL_Y),std_symbol("z",SYMBOL_Z),std_symbol("I",SYMBOL_IDENTITY_MATRIX),std_symbol("a_",SYMBOL_A_UNDERSCORE),std_symbol("b_",SYMBOL_B_UNDERSCORE),std_symbol("x_",SYMBOL_X_UNDERSCORE),std_symbol("$C1",C1),std_symbol("$C2",C2),std_symbol("$C3",C3),std_symbol("$C4",C4),std_symbol("$C5",C5),std_symbol("$C6",C6),defineSomeHandyConstants(),s=codeGen,codeGen=!1,n=a=0,l=defn_str.length;0<=l?a<l:a>l;n=0<=l?++a:--a)t=defn_str[n],scan(t),DEBUG&&(console.log("... evaling "+t),console.log("top of stack:"),console.log(print_list(stack[tos-1]))),Eval(),pop();return codeGen=s},defineSomeHandyConstants=function(){return zero=new_integer(0),one=new_integer(1),push_double(1),one_as_double=pop(),push_symbol(POWER),DEBUG&&console.log(print_list(stack[tos-1])),push_integer(-1),DEBUG&&console.log(print_list(stack[tos-1])),push_rational(1,2),DEBUG&&console.log(print_list(stack[tos-1])),list(3),DEBUG&&console.log(print_list(stack[tos-1])),imaginaryunit=pop()},mcmp=function(t,n){return t.compare(n)},strcmp=function(t,n){return t===n?0:t>n?1:-1},doubleToReasonableString=function(t){var n,a;return codeGen?""+t:(isZeroAtomOrTensor(get_binding(symbol(FORCE_FIXED_PRINTOUT)))?(a=""+t,printMode===PRINTMODE_LATEX?/\d*\.\d*e.*/gm.test(a)?a=a.replace(/e(.*)/gm,"\\mathrm{e}{$1}"):a=a.replace(/(\d+)e(.*)/gm,"$1.0\\mathrm{e}{$2}"):/\d*\.\d*e.*/gm.test(a)?a=a.replace(/e(.*)/gm,"*10^($1)"):a=a.replace(/(\d+)e(.*)/gm,"$1.0*10^($2)")):(push(get_binding(symbol(MAX_FIXED_PRINTOUT_DIGITS))),n=pop_integer(),a=""+t.toFixed(n),a=a.replace(/(\.\d*?[1-9])0+$/gm,"$1"),a=a.replace(/\.0+$/gm,""),a.indexOf(".")===-1&&(a+=".0"),parseFloat(a)!==t&&(a=t.toFixed(n)+"...")),a)},clear_term=function(){},isspace=function(t){return t==null?!1:t===" "||t==="	"||t===`
`||t==="\v"||t==="\f"||t==="\r"},isdigit=function(t){return t==null?!1:/^\d+$/.test(t)},isalpha=function(t){return t==null?!1:t.search(/[^A-Za-z]/)===-1},isalphaOrUnderscore=function(t){return t==null?!1:t.search(/[^A-Za-z_]/)===-1},isalnumorunderscore=function(t){return t==null?!1:isalphaOrUnderscore(t)||isdigit(t)},count=function(t){var n;if(iscons(t))for(n=0;iscons(t);)n+=count(car(t))+1,t=cdr(t);else n=1;return n},countOccurrencesOfSymbol=function(t,n){var a;if(a=0,iscons(n))for(;iscons(n);)a+=countOccurrencesOfSymbol(t,car(n)),n=cdr(n);else equal(t,n)&&(a=1);return a},countsize=function(t){var n,a,s,l;if(s=0,istensor(t))for(n=a=0,l=t.tensor.nelem;0<=l?a<l:a>l;n=0<=l?++a:--a)s+=t.tensor.elem[n];else if(iscons(t))for(;iscons(t);)s+=count(car(t))+1,t=cdr(t);else s=1;return s},stop=function(t){var n;throw errorMessage+="Stop: ",errorMessage+=t,n=errorMessage,errorMessage="",moveTos(0),new Error(n)},findDependenciesInScript=function(t,n){var a,s,l,u,c,p,d,x,_,S,T,A,R,D,O,F,z,j,Z,W,J,en,tn,Ct,Q,on,gn,In,dn,ix,Cn,ax,sx,lx,ox,hx,_x,ux,px,dx,mx,gx,Sx,Ex,Cx,Ax,Tx,kx,Rx;for(DEBUG&&console.log("stringToBeParsed: "+t),Ex=new Date().getTime(),codeGen=!0,symbolsDependencies={},symbolsHavingReassignments=[],symbolsInExpressionsWithoutAssignments=[],patternHasBeenFound=!1,R=0,s="",a="",Q=0,p={affectsVariables:[],affectedBy:[]},mx=t;;){try{errorMessage="",check_stack(),DEBUG&&console.log("findDependenciesInScript: scanning"),Q=scan(t.substring(R)),DEBUG&&console.log("scanned"),pop(),check_stack()}catch($x){x=$x,PRINTOUTRESULT&&console.log(x),errorMessage=x+"",reset_after_error();break}if(Q===0)break;R+=Q}Sx="",DEBUG&&console.log("all local dependencies ----------------"),Sx+="All local dependencies: ";for(D in symbolsDependencies){for(kx=symbolsDependencies[D],DEBUG&&console.log("variable "+D+" depends on: "),p.affectsVariables.push(D),Sx+=" variable "+D+" depends on: ",O=0,F=kx.length;O<F;O++)T=kx[O],DEBUG&&console.log("    "+T),T[0]!=="'"&&p.affectedBy.push(T),Sx+=T+", ";Sx+="; "}for(Sx+=". ",DEBUG&&console.log("Symbols with reassignments ----------------"),Sx+="Symbols with reassignments: ",Ct=0,z=symbolsHavingReassignments.length;Ct<z;Ct++)D=symbolsHavingReassignments[Ct],p.affectedBy.indexOf(D)===-1&&(p.affectedBy.push(D),Sx+=D+", ");for(Sx+=". ",DEBUG&&console.log("Symbols in expressions without assignments ----------------"),Sx+="Symbols in expressions without assignments: ",on=0,j=symbolsInExpressionsWithoutAssignments.length;on<j;on++)D=symbolsInExpressionsWithoutAssignments[on],p.affectedBy.indexOf(D)===-1&&(p.affectedBy.push(D),Sx+=D+", ");if(Sx+=". ",p.affectedBy.push("PATTERN_DEPENDENCY"),patternHasBeenFound&&(p.affectsVariables.push("PATTERN_DEPENDENCY"),Sx+=" - PATTERN_DEPENDENCY inserted - "),DEBUG&&console.log("All dependencies recursively ----------------"),Sx+="All dependencies recursively: ",dx=["",""],S="",lx="",errorMessage===""&&!n){try{s="",a="",dx=run(t,!0),s="",a=""}catch($x){x=$x,PRINTOUTRESULT&&console.log(x),errorMessage=x+"",init()}if(errorMessage==="")for(D in symbolsDependencies){for(codeGen=!0,DEBUG&&console.log("  variable "+D+" is: "+get_binding(usr_symbol(D)).toString()),codeGen=!1,DEBUG&&console.log("  variable "+D+" depends on: "),Sx+=" variable "+D+" depends on: ",ox=[],Rx=[],u=[],recursiveDependencies(D,ox,[],Rx,[],u),In=0,Z=Rx.length;In<Z;In++)T=Rx[In],DEBUG&&console.log("    --> cycle through "+T);for(ax=0,W=ox.length;ax<W;ax++)T=ox[ax],DEBUG&&console.log("    "+T),Sx+=T+", ";for(Sx+="; ",sx=0,J=u.length;sx<J;sx++)T=u[sx],Sx+=" "+T+", ";for(DEBUG&&console.log("  code generation:"+D+" is: "+get_binding(usr_symbol(D)).toString()),push(get_binding(usr_symbol(D))),_x=[],ux=[],px=0,en=ox.length;px<en;px++)d=ox[px],d[0]==="'"&&(c=d.substring(1),ix=usr_symbol(c),gn=usr_symbol("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE"+c),_x.push(ix),ux.push(gn),push(ix),push(gn),subst(),DEBUG&&console.log("after substitution: "+stack[tos-1]));try{simplifyForCodeGeneration()}catch($x){x=$x,PRINTOUTRESULT&&console.log(x),errorMessage=x+"",init()}for(A=gx=0,hx=_x.length;0<=hx?gx<hx:gx>hx;A=0<=hx?++gx:--gx)push(ux[A]),push(_x[A]),subst();if(clearRenamedVariablesToAvoidBindingToExternalScope(),errorMessage===""){if(Cx=pop(),Tx=[],collectUserSymbols(Cx,Tx),s="",a="",codeGen=!0,_=Cx.toString(),codeGen=!1,dn=printMode,printMode=PRINTMODE_LATEX,l=Cx.toString(),printMode=dn,Rx.indexOf(D)!==-1)S+="// "+D+" is part of a cyclic dependency, no code generated.",lx+="#"+D+" is part of a cyclic dependency, no code generated.";else if(Tx=Tx.filter(function($x){return predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf($x+"")===-1}),Tx=Tx.filter(function($x){return ox.indexOf($x+"")!==-1||ox.indexOf("'"+$x)!==-1}),Tx.length!==0){for(Cn="(",Ax=0,tn=Tx.length;Ax<tn;Ax++)T=Tx[Ax],T.printname!==D&&(Cn+=T.printname+", ");Cn=Cn.replace(/, $/gm,""),Cn+=")",S+=D+" = function "+Cn+" { return ( "+_+" ); }",lx+=D+Cn+" = "+l}else S+=D+" = "+_+";",lx+=D+" = "+l;S+=`
`,lx+=`
`,DEBUG&&console.log("    "+S)}}}return S=S.replace(/\n$/gm,""),lx=lx.replace(/\n$/gm,""),symbolsDependencies={},symbolsHavingReassignments=[],patternHasBeenFound=!1,symbolsInExpressionsWithoutAssignments=[],DEBUG&&console.log("testable string: "+Sx),TIMING_DEBUGS&&console.log("findDependenciesInScript time for: "+mx+" : "+(new Date().getTime()-Ex)+"ms"),[Sx,dx[0],S,lx,dx[1],errorMessage,p]},recursiveDependencies=function(t,n,a,s,l,u){var c,p,d,x,_,S,T,A;if(a.push(t),symbolsDependencies[l[l.length-1]]!=null&&symbolsDependencies[l[l.length-1]].indexOf("'"+t)!==-1)return DEBUG&&console.log("can't keep following the chain of "+t+" because it's actually a variable bound to a parameter"),n.indexOf("'"+t)===-1&&n.indexOf(t)===-1&&n.push(t),n;if(l.push(t),symbolsDependencies[t]==null)return n.indexOf(t)===-1&&n.push(t),n;for(A=symbolsDependencies[t],x=0,_=A.length;x<_;x++)if(p=A[x],l.indexOf(p)!==-1){for(DEBUG&&console.log("  found cycle:"),c="",T=0,S=l.length;T<S;T++)d=l[T],s.indexOf(d)===-1&&s.push(d),DEBUG&&console.log(d+" --> "),c+=d+" --> ";DEBUG&&console.log(" ... then "+p+" again"),c+=" ... then "+p+" again",u.push(c),s.indexOf(p)===-1&&s.push(p)}else recursiveDependencies(p,n,a,s,l,u),l.pop();return n},inited=!1,latexErrorSign="\\rlap{\\large\\color{red}\\bigtriangleup}{\\ \\ \\tiny\\color{red}!}",turnErrorMessageToLatex=function(t){return t=t.replace(/\n/g,""),t=t.replace(/_/g,"} \\_ \\text{"),t=t.replace(new RegExp(String.fromCharCode(transpose_unicode),"g"),"}{}^{T}\\text{"),t=t.replace(new RegExp(String.fromCharCode(dotprod_unicode),"g"),"}\\cdot \\text{"),t=t.replace("Stop:","}  \\quad \\text{Stop:"),t=t.replace("->","}  \\rightarrow \\text{"),t=t.replace("?","}\\enspace "+latexErrorSign+" \\enspace  \\text{"),t="$$\\text{"+t.replace(/\n/g,"")+"}$$",t},normaliseDots=function(t){return t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("\uD800","g"),String.fromCharCode(dotprod_unicode)),t=t.replace(new RegExp("","g"),String.fromCharCode(dotprod_unicode)),t},TIMING_DEBUGS=!1,run=function(t,n=!1){var a,s,l,u,c,p,d,x,_,S,T;if(S=new Date().getTime(),t=normaliseDots(t),t==="selftest"){selftest();return}for(inited||(inited=!0,init()),d=0,p=0,s="",a="";;){try{errorMessage="",check_stack(),d=scan(t.substring(p)),p1=pop(),check_stack()}catch(A){c=A,PRINTOUTRESULT&&console.log(c),s+=c.message,n&&(_=turnErrorMessageToLatex(c.message),a+=_),reset_after_error();break}if(d===0)break;p+=d,push(p1);try{stringsEmittedByUserPrintouts="",top_level_eval(),p2=pop(),check_stack(),isstr(p2)&&(DEBUG&&console.log(p2.str),DEBUG&&console.log(`
`)),p2===symbol(NIL)?(u=stringsEmittedByUserPrintouts,n&&(l="$$"+stringsEmittedByUserPrintouts+"$$")):(u=print_expr(p2),u+=`
`,n&&(l="$$"+collectLatexStringFromReturnValue(p2)+"$$",DEBUG&&console.log("collectedLatexResult: "+l))),s+=u,n&&(a+=l),PRINTOUTRESULT&&(DEBUG&&console.log("printline"),DEBUG&&console.log(u)),PRINTOUTRESULT&&(DEBUG&&console.log("display:"),print2dascii(p2)),n&&(a+=`
`)}catch(A){c=A,u=c.message,n&&(l=turnErrorMessageToLatex(c.message)),PRINTOUTRESULT&&console.log(u),s+=u,u!==""&&(s+=`
`),n&&(a+=l,a+=`
`),init()}}return s[s.length-1]===`
`&&(s=s.substring(0,s.length-1)),n&&a[a.length-1]===`
`&&(a=a.substring(0,a.length-1)),n?(DEBUG&&console.log("allReturnedLatexStrings: "+a),x=[s,a]):x=s,TIMING_DEBUGS&&(T="run time on: "+t+" : "+(new Date().getTime()-S)+"ms",console.log(T)),s="",a="",x},check_stack=function(){if(tos!==0){debugger;stop("stack error")}if(frame!==TOS){debugger;stop("frame error")}if(chainOfUserSymbolsNotFunctionsBeingEvaluated.length!==0){debugger;stop("symbols evaluation still ongoing?")}if(evaluatingAsFloats!==0){debugger;stop("numeric evaluation still ongoing?")}if(evaluatingPolar!==0){debugger;return stop("evaluation of polar still ongoing?")}},top_level_eval=function(){var t,n,a;if(DEBUG&&console.log("#### top level eval"),trigmode=0,a=symbol(AUTOEXPAND),isZeroAtomOrTensor(get_binding(a))?expanding=0:expanding=1,n=top(),Eval(),t=top(),t!==symbol(NIL)&&(set_binding(symbol(LAST),t),isZeroAtomOrTensor(get_binding(symbol(BAKE)))||(bake(),t=top()),!((n===symbol(SYMBOL_I)||n===symbol(SYMBOL_J))&&isimaginaryunit(t)))){if(isimaginaryunit(get_binding(symbol(SYMBOL_J))))return push(imaginaryunit),push_symbol(SYMBOL_J),subst();if(isimaginaryunit(get_binding(symbol(SYMBOL_I))))return push(imaginaryunit),push_symbol(SYMBOL_I),subst()}},check_esc_flag=function(){if(esc_flag)return stop("esc key")},clearAlgebraEnvironment=function(){return do_clearall()},computeDependenciesFromAlgebra=function(t){var n,a,s,l,u,c,p;if(DEBUG&&console.log("computeDependenciesFromAlgebra!!!"),a=!0,t=normaliseDots(t),!a){for(userSimplificationsInListForm=[],p="",s=0,l=userSimplificationsInListForm.length;s<l;s++)n=userSimplificationsInListForm[s],p+="silentpattern("+car(n)+","+car(cdr(n))+","+car(cdr(cdr(n)))+`)
`;do_clearall(),t=p+t,DEBUG&&console.log("codeFromAlgebraBlock including patterns: "+t)}if(DEBUG){for(console.log("computeDependenciesFromAlgebra: patterns in the list --------------- "),c=0,u=userSimplificationsInListForm.length;c<u;c++)n=userSimplificationsInListForm[c],console.log(car(n)+","+cdr(n)+")");console.log("...end of list --------------- ")}return findDependenciesInScript(t,!0)[6]},computeResultsAndJavaScriptFromAlgebra=function(t){var n,a,s,l,u,c,p,d,x,_,S,T,A,R,D;if(l=!0,R=new Date().getTime(),TIMING_DEBUGS&&console.log(" --------- computeResultsAndJavaScriptFromAlgebra input: "+t+" at: "+new Date),t=normaliseDots(t),T=t,DEBUG){for(console.log("computeResultsAndJavaScriptFromAlgebra: patterns in the list --------------- "),u=0,p=userSimplificationsInListForm.length;u<p;u++)s=userSimplificationsInListForm[u],console.log(car(s)+","+cdr(s)+")");console.log("...end of list --------------- ")}if(!l){for(userSimplificationsInListForm=[],D="",x=0,d=userSimplificationsInListForm.length;x<d;x++)s=userSimplificationsInListForm[x],D+="silentpattern("+car(s)+","+car(cdr(s))+","+car(cdr(cdr(s)))+`)
`;do_clearall(),t=D+t,DEBUG&&console.log("codeFromAlgebraBlock including patterns: "+t)}return[A,S,n,_,c,errorMessage,a]=findDependenciesInScript(t),(_!==""||errorMessage!=="")&&(S+=`
`+_,errorMessage!==""&&(S+=`
`+errorMessage),S=S.replace(/\n/g,`

`),c+=`
$$`+_+"$$",errorMessage!==""&&(c+=turnErrorMessageToLatex(errorMessage)),c=c.replace(/\n/g,`

`)),c=c.replace(/\n*/,""),c=c.replace(/\$\$\$\$\n*/g,""),n=n.replace(/Math\./g,""),n=n.replace(/\n/g,`

`),TIMING_DEBUGS&&console.log("computeResultsAndJavaScriptFromAlgebra time (total time from notebook and back) for: "+T+" : "+(new Date().getTime()-R)+"ms"),{code:n,result:c,latexResult:c,dependencyInfo:a}},(exports!==null?exports:this).run=run,(exports!==null?exports:this).findDependenciesInScript=findDependenciesInScript,(exports!==null?exports:this).computeDependenciesFromAlgebra=computeDependenciesFromAlgebra,(exports!==null?exports:this).computeResultsAndJavaScriptFromAlgebra=computeResultsAndJavaScriptFromAlgebra,(exports!==null?exports:this).clearAlgebraEnvironment=clearAlgebraEnvironment,tos=0,nil_symbols=0,push=function(t){if(t==null)debugger;if(t.isZero!=null)debugger;return t===symbol(NIL)&&(nil_symbols++,DEBUG&&console.log("pushing symbol(NIL) #"+nil_symbols)),tos>=frame&&stop("stack overflow"),stack[tos++]=t},moveTos=function(t){if(tos<=t){tos=t;return}for(;tos>t;)stack[tos]=null,tos--},top=function(){return stack[tos-1]},pop=function(){var t;if(tos===0){debugger;stop("stack underflow")}if(stack[tos-1]==null)debugger;return t=stack[--tos],stack[tos]=null,t},push_frame=function(t){var n,a,s,l;if(n=0,frame-=t,frame<tos){debugger;stop("frame overflow, circular reference?")}for(l=[],n=a=0,s=t;0<=s?a<s:a>s;n=0<=s?++a:--a)l.push(stack[frame+n]=symbol(NIL));return l},pop_frame=function(t){if(frame+=t,frame>TOS)return stop("frame underflow")},save=function(){if(frame-=10,frame<tos){debugger;stop("frame overflow, circular reference?")}return stack[frame+0]=p0,stack[frame+1]=p1,stack[frame+2]=p2,stack[frame+3]=p3,stack[frame+4]=p4,stack[frame+5]=p5,stack[frame+6]=p6,stack[frame+7]=p7,stack[frame+8]=p8,stack[frame+9]=p9},restore=function(){return frame>TOS-10&&stop("frame underflow"),p0=stack[frame+0],p1=stack[frame+1],p2=stack[frame+2],p3=stack[frame+3],p4=stack[frame+4],p5=stack[frame+5],p6=stack[frame+6],p7=stack[frame+7],p8=stack[frame+8],p9=stack[frame+9],frame+=10},swap=function(){var t,n;return t=pop(),n=pop(),push(t),push(n)},dupl=function(){var t;return t=pop(),push(t),push(t)},$.dupl=dupl,$.swap=swap,$.restore=restore,$.save=save,$.push=push,$.pop=pop,Eval_symbolsinfo=function(){var t;return t=symbolsinfo(),t!==""?push(new_string(t)):push_symbol(NIL)},symbolsinfo=function(){var t,n,a,s,l,u,c;for(u="",n=a=s=NIL+1,l=symtab.length;s<=l?a<l:a>l;n=s<=l?++a:--a){if(symtab[n].printname===""){if(isSymbolReclaimable[n]===!1)break;continue}c=symtab[n]+"",t=(binding[n]+"").substring(0,4),u+="symbol: "+c+" size: "+countsize(binding[n])+" value: "+t+`...
`}return u},std_symbol=function(t,n,a){var s;if(s=symtab[n],s==null)debugger;return s.printname=t,a!=null?s.latexPrint=a:s.latexPrint=t},usr_symbol=function(t){var n,a,s;for(n=0,n=a=0,s=NSYM;0<=s?a<s:a>s;n=0<=s?++a:--a){if(t===symtab[n].printname)return symtab[n];if(symtab[n].printname==="")break}return n===NSYM&&stop("symbol table overflow"),symtab[n]=new U,symtab[n].k=SYM,symtab[n].printname=t,binding[n]=symtab[n],isSymbolReclaimable[n]=!1,symtab[n]},get_printname=function(t){return t.k!==SYM&&stop("symbol error"),t.printname},set_binding=function(t,n){var a;if(t.k!==SYM&&stop("symbol error"),a=symtab.indexOf(t),symtab.indexOf(t,a+1)!==-1){console.log("ops, more than one element!");debugger}return DEBUG&&console.log("lookup >> set_binding lookup "+a),isSymbolReclaimable[a]=!1,binding[a]=n},get_binding=function(t){var n;if(t.k!==SYM&&stop("symbol error"),n=symtab.indexOf(t),symtab.indexOf(t,n+1)!==-1){console.log("ops, more than one element!");debugger}return DEBUG&&console.log("lookup >> get_binding lookup "+n),binding[n]},is_usr_symbol=function(t){var n;return t.k!==SYM?!1:(n=symnum(t),n>PI&&n!==SYMBOL_I&&n!==SYMBOL_IDENTITY_MATRIX)},lookupsTotal=0,symnum=function(t){var n;if(lookupsTotal++,t.k!==SYM&&stop("symbol error"),n=symtab.indexOf(t),symtab.indexOf(t,n+1)!==-1){console.log("ops, more than one element!");debugger}return DEBUG&&console.log("lookup >> symnum lookup "+n+" lookup # "+lookupsTotal),n},push_symbol=function(t){return push(symtab[t])},clear_symbols=function(){var t,n,a,s,l;for(l=[],t=n=a=NIL+1,s=NSYM;a<=s?n<s:n>s;t=a<=s?++n:--n){if(symtab[t].printname===""){if(isSymbolReclaimable[t]===!1)break;continue}symtab[t]=new U,symtab[t].k=SYM,binding[t]=symtab[t],l.push(isSymbolReclaimable[t]=!1)}return l},collectUserSymbols=function(t,n=[]){var a,s,l;if(is_usr_symbol(t)&&n.indexOf(t)===-1){n.push(t);return}if(istensor(t)){for(a=s=0,l=t.tensor.nelem;0<=l?s<l:s>l;a=0<=l?++s:--s)collectUserSymbols(t.tensor.elem[a],n);return}for(;iscons(t);)collectUserSymbols(car(t),n),t=cdr(t)},$.get_binding=get_binding,$.set_binding=set_binding,$.usr_symbol=usr_symbol,$.symbolsinfo=symbolsinfo,$.collectUserSymbols=collectUserSymbols,inited||(inited=!0,init()),$.init=init,parse_internal=function(t){return typeof t=="string"?scan(t):typeof t=="number"?t%1===0?push_integer(t):push_double(t):t instanceof U?push(t):(console.warn("unknown argument type",t),push(symbol(NIL)))},parse=function(t){var n,a;try{parse_internal(t),n=pop(),check_stack()}catch(s){throw a=s,reset_after_error(),a}return n},exec=function(t,...n){var a,s,l,u,c,p;for(l=get_binding(usr_symbol(t)),check_stack(),push(l),u=0,c=n.length;u<c;u++)a=n[u],parse_internal(a);list(1+n.length),p1=pop(),push(p1);try{top_level_eval(),p=pop(),check_stack()}catch(d){throw s=d,reset_after_error(),s}return p},$.exec=exec,$.parse=parse,function(){var t,n,a,s,l;for(t=["abs","add","adj","and","approxratio","arccos","arccosh","arcsin","arcsinh","arctan","arctanh","arg","atomize","besselj","bessely","binding","binomial","ceiling","check","choose","circexp","clear","clearall","clearpatterns","clock","coeff","cofactor","condense","conj","contract","cos","cosh","decomp","defint","deg","denominator","det","derivative","dim","dirac","divisors","do","dot","draw","dsolve","eigen","eigenval","eigenvec","erf","erfc","eval","exp","expand","expcos","expsin","factor","factorial","factorpoly","filter","float","floor","for","Gamma","gcd","hermite","hilbert","imag","component","inner","integral","inv","invg","isinteger","isprime","laguerre","lcm","leading","legendre","log","mod","multiply","not","nroots","number","numerator","operator","or","outer","pattern","patternsinfo","polar","power","prime","print","print2dascii","printcomputer","printlatex","printlist","printhuman","product","quote","quotient","rank","rationalize","real","rect","roots","round","equals","shape","sgn","silentpattern","simplify","sin","sinh","sqrt","stop","subst","sum","symbolsinfo","tan","tanh","taylor","test","testeq","testge","testgt","testle","testlt","transpose","unit","zero"],l=[],a=0,s=t.length;a<s;a++)n=t[a],l.push($[n]=exec.bind(this,n));return l}()}).call(algebrite)}(algebrite)),algebrite}var algebriteExports=requireAlgebrite();function nthRoot(t,n){if(typeof t!="bigint"||typeof n!="number"||Math.floor(n)!==n||n<1||n>Number.MAX_SAFE_INTEGER)throw new RangeError;if(n===1)return t;const a=Number(t+0n);if(a===0)return 0n;if(a<0){if(n%2===0)throw new RangeError;return-BigInt(nthRoot(-t,n))}const s=Number.MAX_SAFE_INTEGER+1,l=Math.floor(s/(n===2?2:Math.pow(2,1+Math.ceil(Math.log2(Math.log2(s))))));if(a<l){const _=Math.floor(n===2?Math.sqrt(a+.5):Math.exp(Math.log(a+.5)/n));return BigInt(_)}const u=n===2?Math.sqrt(a):Math.exp(Math.log(a)/n);if(u<l){if(Math.floor(u-u/l)===Math.floor(u+u/l))return BigInt(Math.floor(u));const _=BigInt(Math.floor(u+.5));return t<_**BigInt(n)?_-1n:_}const c=t.toString(16).length*4;if(c<=n)return 1n;const p=Math.floor((Math.floor(c/n)+1)/2);let d=BigInt(nthRoot(t>>BigInt(p*n),n))+1n<<BigInt(p),x=-1n;do x=d,n===2?d=d+t/d>>1n:d=(BigInt(n-1)*d+t/d**BigInt(n-1))/BigInt(n);while(d<x);return x}function BitSet(t){const n=Math.ceil(t/256)*8;this.data=new Uint32Array(n),this.data64=new BigUint64Array(this.data.buffer),this.size=t}BitSet.prototype.nextSetBit=function(t){if((t|0)>=(this.size|0))return-1;const n=this.data;let a=t>>5,s=t&31;for(;n[a]>>s===0;){if(a+=1,a===n.length)return-1;s=0}return s+=31-Math.clz32(n[a]>>s&-(n[a]>>s)),a*32+s};BitSet.prototype.toggle=function(t){if((t|0)>=(this.size|0))throw new RangeError;this.data[t>>5]^=1<<(t&31)};BitSet.prototype.xor=function(t){const n=this.data64,a=t.data64,s=n.length|0;if(s!==a.length||s%2!==0)throw new RangeError;for(let l=0;l<s;l+=2)n[l+0]^=a[l+0],n[l+1]^=a[l+1]};BitSet.prototype.clear=function(){for(let t=0;t<this.data.length;t+=1)this.data[t]=0};BitSet.prototype.toString=function(){return this.data.map(t=>(t>>>0).toString(2).padStart(32,"0").split("").reverse().join("")).join("").slice(0,this.size)};function solve(t,n=!1){const a=new Array(t).fill(null),s=new Array(t).fill(void 0);let l=null,u=1;const c={next:function(d){for(;;){if(u===1)return u=0,{value:l,done:!1};u=1;const x=d[0],_=d[1];let S=null;if(n)S=x;else{S=new BitSet(t);for(let T=0;T<x.length;T++){const A=x[T],R=t-1-A;S.toggle(R)}}for(let T=S.nextSetBit(0);T!==-1&&S!=null;T=S==null?-1:S.nextSetBit(T+1)){const A=a[T];A!=null?(S.xor(A),S.toggle(T)):(s[T]=_,a[T]=S,S=null)}if(S!=null){const T=[];for(let A=S.nextSetBit(0);A!==-1;A=S.nextSetBit(A+1))T.push(s[A]);T.push(_),l=T}else l=null}}};return c[globalThis.Symbol.iterator]=function(){return this},c}function SparseGF2Matrix(t,n){this.rows=new Array(t).fill(null),this.columns=new Array(n).fill(null).map(a=>[])}SparseGF2Matrix.prototype.addRow=function(t,n){function a(l){const u=l.slice(0);u.sort((p,d)=>p-d);let c=-1;for(let p=0;p<u.length;p++)p===0||u[c]!==u[p]?(c+=1,u[c]=u[p]):c-=1;return u.slice(0,c+1)}const s=a(t);this.rows[n]=s;for(let l=0;l<s.length;l++)this.columns[s[l]].push(n)};SparseGF2Matrix.prototype.deleteColumn=function(t){const n=this.columns[t];if(n!=null){for(let a=0;a<n.length;a++){let s=n[a];const l=this.rows[s].indexOf(t);console.assert(l!==-1),this.rows[s].splice(l,1)}this.columns[t]=null}};SparseGF2Matrix.prototype.deleteRow=function(t){const n=this.rows[t];if(n!=null){for(let a=0;a<n.length;a++){const s=n[a];this.columns[s]=this.columns[s].filter(l=>l!=t)}this.rows[t]=null}};SparseGF2Matrix.prototype.reduce=function(t,n){const a=this.rows[t];console.assert(a.length===1);const s=a[0],l=this.columns[s];for(let u=l.length-1;u>=0;u--)if(l[u]!==t){const c=l[u],p=this.rows[c],d=p.indexOf(s);console.assert(d!==-1),p.splice(d,1),l.splice(u,1),n.push({a:c,b:t})}console.assert(l.length===1&&l[0]===t),this.columns[s]=null,this.rows[t]=null};function sparseSolve(t){if(t<1024*2)return solve(t);function n(A,R){return A.sort((D,O)=>D-O),A[Math.max(A.length-R,0)]}function a(A,R){const D=A.columns.map(F=>F==null?0:F.length),O=n(D,R);for(let F=0;F<A.columns.length;F++){const z=A.columns[F];z!=null&&z.length>=O&&A.deleteColumn(F)}}function s(A,R){const D=[];for(let O=0;O<A.rows.length;O++){const F=A.rows[O];F!=null&&F.length===1&&D.push(O)}for(let O=0;O<D.length;O++){const F=D[O],z=A.rows[F];z!=null&&z.length===1?(A.reduce(F,c),R[z[0]]=!0):console.assert(z!=null&&z.length===0)}return D.length}const l=[],u=[],c=[];let p=null,d=null,x=-1;function _(){const R=new SparseGF2Matrix(l.length,t);for(let Ct=0;Ct<l.length;Ct++)R.addRow(l[Ct].filter(Q=>Q>=2585),Ct);const D=new Array(t).fill(!1),O=128;let F=-1;do{F=R.columns.reduce((Q,on)=>Q+(on==null?0:1),0);const Ct=Math.ceil(R.rows.length/O)-s(R,D);Ct>0&&a(R,Ct)}while(F>0);const z=new Array(t).fill(0);let j=0;for(let Ct=0;Ct<R.columns.length;Ct++)D[Ct]?z[Ct]=-1:(z[Ct]=j,j+=1);const Z=j,W=[];function J(Ct){let Q=null;W.length>0?(Q=W.pop(),Q.clear()):Q=new BitSet(Z);for(let on=0;on<Ct.length;on++){const gn=z[Ct[on]];gn!==-1&&Q.toggle(Z-1-gn)}return Q}p=l.map(Ct=>null);const en=R.rows.map(Ct=>Ct!=null?1/0:-1);for(let Ct=c.length-1;Ct>=0;Ct-=1)en[c[Ct].a]!==-1?en[c[Ct].b]===-1&&(en[c[Ct].b]=Ct):c[Ct]=null;const tn=function(Ct,Q){return p[Ct]==null&&(console.assert(en[Ct]>=Q),p[Ct]=J(l[Ct])),p[Ct]};for(let Ct=0;Ct<c.length;Ct++)c[Ct]!=null&&(tn(c[Ct].a,Ct).xor(tn(c[Ct].b,Ct)),en[c[Ct].b]<=Ct&&(W.push(p[c[Ct].b]),p[c[Ct].b]=null));for(let Ct=0;Ct<R.rows.length;Ct++)R.rows[Ct]!=null?(console.assert(R.rows[Ct].length===0),p[Ct]=tn(Ct,1/0)):p[Ct]=null;d=solve(Z,!0),d.next()}let S=!0;const T={next:function(R){if(S)return S=!1,{value:null,done:!1};if(d==null){if(l.length<t+32)return l.push(R[0]),u.push(R[1]),{value:null,done:!1};_()}for(let D=x+1;D<p.length;D++){x=D;const O=p[D];if(O!=null){const F=d.next([O,D]).value;if(F!=null){const z=new Array(l.length).fill(0);for(let Z=0;Z<F.length;Z++){if(z[F[Z]]!==0)throw new RangeError;z[F[Z]]=1}for(let Z=c.length-1;Z>=0;Z--)c[Z]!=null&&z[c[Z].a]===1&&(z[c[Z].b]=1-z[c[Z].b]);const j=[];for(let Z=0;Z<z.length;Z++)z[Z]===1&&j.push(u[Z]);return{value:j,done:!1}}}}}};return T[globalThis.Symbol.iterator]=function(){return this},T}solve.solve=solve;solve.sparseSolve=sparseSolve;sparseSolve.solve=solve;sparseSolve.sparseSolve=sparseSolve;function modPowSmall$1(t,n,a){let s=1;for(;n!==0;)n%2===0?(n/=2,t=t*t,t=t-Math.floor(t/a)*a):(n-=1,s=s*t,s=s-Math.floor(s/a)*a);return s}function legendre$1(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;t=t|0,n=n|0,t=(t|0)%(n|0);for(var a=1,s=0;t!==0;){for(;(t&1)===0;)t>>=1,s=n&7,(s===3||s===5)&&(a=-a);s=n,n=t,t=s,(t&3)===3&&(n&3)===3&&(a=-a),t=(t|0)%(n|0)}return n===1?a:0}function sqrtMod(t,n){if(console.assert(n*n<=Number.MAX_SAFE_INTEGER),legendre$1(t,n)!==1)return-1;let a=n-1,s=0;for(;a%2===0;)a/=2,s+=1;if(s===1)return modPowSmall$1(t,(n+1)/4,n);let l=2;for(;l<=n&&legendre$1(l,n)!==-1;)l+=1;let u=modPowSmall$1(l,a,n),c=modPowSmall$1(t,(a+1)/2,n),p=modPowSmall$1(t,a,n),d=s,x=0;for(;(p-1)%n!==0;){x=p*p%n;let _=1;for(;_<=d&&(x-1)%n!==0;)x=x*x%n,_+=1;const S=modPowSmall$1(u,1<<d-_-1,n);c=c*S%n,u=S*S%n,p=p*u%n,d=_}return c}const wasmCode$2=new Uint8Array([0,97,115,109,1,0,0,0,1,28,4,96,2,126,126,1,126,96,4,126,126,126,126,1,126,96,3,126,126,127,1,126,96,2,126,127,1,126,3,5,4,0,1,2,3,7,29,2,9,103,99,100,66,105,110,97,114,121,0,0,13,80,111,108,108,97,114,100,115,82,104,111,54,52,0,3,10,246,6,4,98,2,2,126,1,127,32,0,80,4,64,32,1,15,11,32,1,80,4,64,32,0,15,11,32,0,32,1,132,122,33,3,32,0,32,0,122,136,33,0,32,1,32,1,122,136,33,1,3,64,32,1,32,0,125,32,0,32,1,125,32,0,32,1,84,34,4,27,33,2,32,0,32,1,32,4,27,33,1,32,2,32,2,122,136,34,0,66,0,82,13,0,11,32,1,32,3,134,11,174,1,1,4,126,32,0,66,32,136,34,5,32,1,66,255,255,255,255,15,131,34,4,126,32,0,66,255,255,255,255,15,131,34,6,32,4,126,66,32,136,124,33,7,32,1,66,32,136,34,4,32,5,126,32,7,66,32,136,124,32,4,32,6,126,32,7,66,255,255,255,255,15,131,124,66,32,136,124,34,4,32,0,32,1,126,32,3,126,34,0,66,32,136,34,1,32,2,66,32,136,34,3,126,32,2,66,255,255,255,255,15,131,34,5,32,1,126,32,0,66,255,255,255,255,15,131,34,0,32,5,126,66,32,136,124,34,1,66,32,136,124,32,0,32,3,126,32,1,66,255,255,255,255,15,131,124,66,32,136,124,34,0,125,32,2,66,0,32,0,32,4,86,27,124,11,160,4,2,8,126,5,127,32,0,33,4,65,2,33,13,3,64,32,13,65,192,0,72,4,64,32,4,66,2,32,0,32,4,126,125,126,33,4,32,13,32,13,106,33,13,12,1,11,11,32,4,33,6,66,2,33,7,66,127,32,0,130,66,1,124,33,4,3,64,32,7,66,0,82,4,64,32,7,66,1,131,167,4,64,32,3,32,0,32,4,125,34,8,125,32,0,66,0,32,3,32,8,84,27,124,33,3,11,32,4,32,0,32,4,125,34,8,125,32,0,66,0,32,4,32,8,84,27,124,33,4,32,7,66,1,136,33,7,12,1,11,11,66,127,32,0,130,66,1,124,33,7,3,64,32,1,66,0,82,4,64,32,1,66,1,131,167,4,64,32,5,32,0,32,7,125,34,4,125,32,0,66,0,32,4,32,5,86,27,124,33,5,11,32,7,32,0,32,7,125,34,4,125,32,0,66,0,32,4,32,7,86,27,124,33,7,32,1,66,1,136,33,1,12,1,11,11,65,1,33,13,66,1,33,4,32,3,33,1,3,64,32,2,32,11,79,4,64,32,1,33,7,3,64,32,1,32,1,32,0,32,6,16,1,34,1,32,0,32,5,125,34,8,125,32,0,66,0,32,1,32,8,84,27,124,33,1,32,11,65,1,106,34,11,32,13,65,3,108,65,2,118,77,4,126,66,1,33,4,32,11,33,12,32,1,5,32,7,32,1,125,32,1,32,7,125,32,1,32,7,84,27,33,8,32,4,66,1,81,4,126,32,8,5,32,4,32,8,32,0,32,6,16,1,11,33,4,32,11,65,255,0,113,69,32,11,32,13,70,114,32,14,114,4,126,2,126,32,0,32,4,80,13,0,26,32,4,32,0,80,13,0,26,32,0,32,4,132,122,33,9,32,4,32,4,122,136,33,8,32,0,32,0,122,136,33,4,3,64,32,4,32,8,125,32,8,32,4,125,32,4,32,8,86,34,15,27,33,10,32,8,32,4,32,15,27,33,4,32,10,32,10,122,136,34,8,66,0,82,13,0,11,32,4,32,9,134,11,34,4,66,1,82,4,64,32,0,32,4,82,4,64,32,4,15,11,32,14,4,64,32,0,15,11,65,1,33,14,32,12,33,11,32,3,33,1,11,66,1,33,4,32,11,33,12,32,1,5,32,3,11,11,33,3,32,11,32,13,71,13,0,11,32,13,65,1,116,33,13,12,1,11,11,66,0,11,63,1,2,126,32,0,66,2,88,4,64,66,0,15,11,32,0,66,1,131,80,4,64,66,2,15,11,3,64,32,2,66,1,124,34,2,66,42,86,4,64,66,0,15,11,32,0,32,2,32,1,16,2,34,3,32,0,81,13,0,11,32,3,11]),wasmModule$2=new WebAssembly.Module(wasmCode$2),exports$1=new WebAssembly.Instance(wasmModule$2).exports,PollardsRho64=exports$1.PollardsRho64,wasmCode$1=new Uint8Array([0,97,115,109,1,0,0,0,1,14,2,96,4,126,126,126,126,1,126,96,1,126,1,127,3,3,2,0,1,7,21,1,17,105,115,80,114,111,98,97,98,108,121,80,114,105,109,101,54,52,0,1,10,160,5,2,174,1,1,4,126,32,0,66,32,136,34,5,32,1,66,255,255,255,255,15,131,34,4,126,32,0,66,255,255,255,255,15,131,34,6,32,4,126,66,32,136,124,33,7,32,1,66,32,136,34,4,32,5,126,32,7,66,32,136,124,32,4,32,6,126,32,7,66,255,255,255,255,15,131,124,66,32,136,124,34,4,32,0,32,1,126,32,3,126,34,0,66,32,136,34,1,32,2,66,32,136,34,3,126,32,2,66,255,255,255,255,15,131,34,5,32,1,126,32,0,66,255,255,255,255,15,131,34,0,32,5,126,66,32,136,124,34,1,66,32,136,124,32,0,32,3,126,32,1,66,255,255,255,255,15,131,124,66,32,136,124,34,0,125,32,2,66,0,32,0,32,4,86,27,124,11,237,3,2,10,126,2,127,32,0,66,2,84,4,64,65,0,15,11,32,0,66,1,131,80,4,64,32,0,66,2,81,15,11,32,0,66,1,125,34,5,122,33,10,32,5,32,10,136,33,9,32,0,33,5,65,2,33,11,3,64,32,11,65,192,0,72,4,64,32,5,66,2,32,0,32,5,126,125,126,33,5,32,11,32,11,106,33,11,12,1,11,11,66,1,33,7,66,127,32,0,130,66,1,124,33,6,3,64,32,7,66,0,82,4,64,32,7,66,1,131,167,4,64,32,2,32,0,32,6,125,34,8,125,32,0,66,0,32,2,32,8,84,27,124,33,2,11,32,6,32,0,32,6,125,34,8,125,32,0,66,0,32,6,32,8,84,27,124,33,6,32,7,66,1,136,33,7,12,1,11,11,66,2,33,7,66,127,32,0,130,66,1,124,33,6,3,64,32,7,66,0,82,4,64,32,7,66,1,131,167,4,64,32,3,32,0,32,6,125,34,8,125,32,0,66,0,32,3,32,8,84,27,124,33,3,11,32,6,32,0,32,6,125,34,8,125,32,0,66,0,32,6,32,8,84,27,124,33,6,32,7,66,1,136,33,7,12,1,11,11,66,1,33,8,66,127,32,0,130,66,1,124,33,7,32,0,33,6,3,64,32,8,66,0,82,4,64,32,8,66,1,131,167,4,64,32,1,32,6,32,7,125,34,0,125,32,6,66,0,32,0,32,1,86,27,124,33,1,11,32,7,32,6,32,7,125,34,0,125,32,6,66,0,32,0,32,7,86,27,124,33,7,32,8,66,1,136,33,8,12,1,11,11,32,1,33,0,3,64,32,9,66,0,82,4,64,32,9,66,1,131,167,4,64,32,0,32,3,32,6,32,5,16,0,33,0,11,32,9,66,1,136,33,9,32,3,32,3,32,6,32,5,16,0,33,3,12,1,11,11,3,64,32,12,172,32,10,83,4,64,32,0,32,0,32,6,32,5,16,0,34,4,32,2,81,32,0,32,2,82,113,32,0,32,6,32,2,125,82,113,4,64,65,0,15,11,32,4,33,0,32,12,65,1,106,33,12,12,1,11,11,32,2,32,4,82,4,64,65,0,15,11,65,1,11]),wasmModule$1=new WebAssembly.Module(wasmCode$1),exports=new WebAssembly.Instance(wasmModule$1).exports,isProbablyPrime64=exports.isProbablyPrime64;function modInverse$1(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;if(Number(n)<=2**30-1)return BigInt(modInverseSmall$1(Number(t),Number(n)));if(t<0n||t>=n||n<=0n)throw new RangeError;let a=t,s=n,l=1n,u=0n;for(;s!==0n;){const c=(a-a%s)/s,p=a-c*s;a=s,s=p;const d=l-c*u;l=u,u=d}return a!==1n?0n:l<0n?l+n:l}function modInverseSmall$1(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;const a=1073741823;if(t<0||t>=n||n<=0||n>a)throw new RangeError;let s=t&a,l=n&a,u=1,c=0;for(;l!==0;){const p=Math.floor(s/l),d=s%l;s=l,l=d;const x=u-p*c;u=c,c=x}return s!==1?0:u<0?u+n:u}function ChineseRemainderTheorem$1(t,n,a,s){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint"||typeof s!="bigint")throw new TypeError;const l=modInverse$1(a%s,s);return t+(n-t)*l%s*a}function squareRootsModuloOddPrimesProduct(t,n,a=1){let s=[];s.push(0n);let l=1n;for(let u=0;u<n.length;u+=1){const c=BigInt(Math.pow(n[u],a));if(Number(c)>Number.MAX_SAFE_INTEGER)throw new RangeError;const p=BigInt(squareRootModuloOddPrime(Number(t%c),n[u],a)),d=[];for(let x=0;x<s.length;x+=1){const _=s[x];d.push(ChineseRemainderTheorem$1(_,p,l,c)),d.push(ChineseRemainderTheorem$1(_,-p,l,c))}l*=c,s=d}return s}function squareRootsModuloTwo(t,n=1){if(n>=3){if(t%8===1){const a=Math.pow(2,n),s=+squareRootsModuloTwo(t,n-1)[0],l=a/4-s,u=s*s%a!==t%a?l:s;return[u,a/2-u,a/2+u,a-u]}return[]}return n>=2?t%4===1?[1,3]:[]:n>=1?[1]:[]}function squareRootModuloOddPrime(t,n,a=1){if(typeof t!="number"||typeof n!="number"||typeof a!="number")throw new TypeError;const s=Math.pow(n,a);if(!(t>0&&t<s&&n>0&&n%2!==0&&a>=1&&+t%+n!==0&&s<Math.floor(Math.sqrt(Number.MAX_SAFE_INTEGER*4))))throw new RangeError;if(a>1){const u=squareRootModuloOddPrime(t%Math.pow(n,a-1),n,a-1);let c=modInverseSmall$1(2*u,s)%s,p=(t-u*u)%s;c=c>s/2?c-s:c,p=p>s/2?p-s:p;let d=u+p*c%s;return d>=s&&(d-=s),d<0&&(d+=s),Math.min(d,s-d)}const l=sqrtMod(t,n)|0;return Math.min(l,n-l)}function bitLength$2(t){return t.toString(16).length*4}function sqrt(t){if(t<BigInt((Number.MAX_SAFE_INTEGER+1)/2))return BigInt(Math.floor(Math.sqrt(Number(BigInt(t))+.5)));const n=BigInt(bitLength$2(t)>>2);let s=sqrt(t>>n*2n)+1n<<n,l=s+1n;for(;s<l;)l=s,s=l+t/l>>1n;return l}function getSmoothFactorization(t,n){let a=BigInt(t);if(a===0n)return[0];const s=[];a<0n&&(s.push(-1),a=-a);let l=0;for(;l<n.length;){const u=n[l];for(;a%BigInt(u)===0n;)a/=BigInt(u),s.push(u);l+=1}return a===1n?s:null}function CongruenceOfsquareOfXminusYmoduloN(t,n,a){this.X=t,this.Y=n,this.N=a}CongruenceOfsquareOfXminusYmoduloN.prototype.toString=function(){return"X**2  Y (mod N)".replaceAll("X",this.X).replaceAll("N",this.N).replaceAll("Y",this.Y.join(" * "))};function isQuadraticResidueModuloPrime(t,n){if(typeof t!="bigint"||typeof n!="number")throw new TypeError;if(n===2)return!0;const a=Number(BigInt(t)%BigInt(n));return a===0?!0:legendre(a,n)===1}function significand(t){const n=Number(t);if(Math.abs(n)<1/0)return n/2**Math.floor(Math.log2(Math.abs(n)));const a=Math.max(0,bitLength$2(t)-1023),s=Number(t>>BigInt(a));return s/2**Math.floor(Math.log2(Math.abs(s)))}function exponent(t){const n=Number(t);if(Math.abs(n)<1/0)return Math.floor(Math.log2(Math.abs(n)));const a=Math.max(0,bitLength$2(t)-1023),s=Number(t>>BigInt(a));return a+Math.floor(Math.log2(Math.abs(s)))}function log2$1(t){return Math.log2(significand(t))+exponent(t)}function L(t){const n=log2$1(t)*Math.log(2);return Math.exp(Math.sqrt(n*Math.log(n)))}function modPow$2(t,n,a){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint")throw new TypeError;let s=n,l=t,u=1n;for(;s!==0n;)BigInt.asUintN(1,s)===1n&&(s-=1n,u=u*l%a),s>>=1n,l=l*l%a;return u}function primes$1(t){const n=new Array(t+1).fill(!0),a=[];a.push(2);for(let s=3;s<=t;s+=2)if(n[s]&&(a.push(s),s<=Math.floor(t/s)))for(let l=s*s;l<=t;l+=2*s)n[l]=!1;return a}//!copy-paste
function FastModBigInt(t){const n=[];for(;t!==0n;){const a=Number(BigInt.asUintN(51,t));n.push(a),t>>=51n}return new Float64Array(n)}function FastMod(t,n,a){n=-0+n,a=-0+a;const s=t.length-1;let l=t[s];if(l=l-Math.floor(l*a)*n,s>0){const u=0x8000000000000-Math.floor(0x8000000000000*a)*n;let c=s;do c-=1,l=l*u+t[c],l=l-Math.floor(l*a)*n;while(c!==0)}return-0+l}function exp2(t){let n=Math.floor(Math.pow(2,Math.floor(t))*Math.exp(Math.LN2*(t-Math.floor(t))));return n%2===0&&(n+=1),n}function QuadraticPolynomial(t,n,a,s,l){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint")throw new TypeError;const u=n*n-a;if(l&&a%4n!==1n)throw new RangeError;if(u%((l?4n:1n)*t)!==0n)throw new TypeError;const c=u/(l?4n*t:t);this.A=t,this.B=n,this.C=c,this.AFactors=s;const p=significand(n)/significand(t)*Math.pow(2,exponent(n)-exponent(t)),d=Math.sqrt(significand(a)/Math.pow(significand(t),2))*Math.pow(2,exponent(a)/2-exponent(t));this.x1=(l?1/2:1)*(-p-d),this.x2=(l?1/2:1)*(-p+d),this.log2a=log2$1(t),this.useQ2Form=l}QuadraticPolynomial.generator=function(t,n,a){const s=function(z,j){return z.length===0?[]:j===0?[[]]:j===1?z.map(Z=>[Z]):s(z.slice(1),j-1).map(Z=>[z[0]].concat(Z)).concat(s(z.slice(1),j))},l=function(z,j){return Math.round(Math.pow(significand(z),1/j)*Math.pow(2,exponent(z)/j))},u=function(z,j){return z<j?j:z},c=a%8n===1n,p=u(1n,c?BigInt(sqrt(a/2n))/BigInt(t):BigInt(sqrt(2n*a))/BigInt(t)),d=log2$1(p),x=Math.log2(n[n.length-1]),_=2,S=Math.max(_,Math.ceil(d/Math.min(d<180?14.5:x,x)/_)*_);console.debug("k: ",S,"useQ2Form: ",c);const T=l(p,S);let A=0;const R=function(){let z=0;do if(z=T-T%2+1+(A%2===0?A:-1-A),A+=1,T+A>n[n.length-1]&&T-A<n[0])throw new RangeError;while(indexOf$1(n,z)===-1);return z};let D=[];const O=[],F=[];return QuadraticSieveFactorization.polynomialsCounter=0,{next:function(){for(;O.length===0;){for(;D.length===0;){const Ct=[];for(let Q=0;Q<_;Q+=1)Ct.push(R());console.assert(S%_===0),D=s(F,S/_-1).map(Q=>[Ct].concat(Q)),F.push(Ct)}const j=D.pop().reduce((Ct,Q)=>Ct.concat(Q),[]),Z=BigInt(j.reduce((Ct,Q)=>Ct*BigInt(Q),1n));if(modInverse$1(Z%a,a)===0n)return this.next();const J=Z;let en=squareRootsModuloOddPrimesProduct(a,j,1);for(let Ct=0;Ct<en.length;Ct+=1)if(en[Ct]=en[Ct]<0n?en[Ct]+J:en[Ct],en[Ct]<0n||en[Ct]>=J)throw new Error;c&&(en=en.map(Ct=>Ct%2n===0n?Ct-J:Ct)),en=en.slice(0,en.length/2);const tn=c?[2,2].concat(j):j.slice(0);tn.sort((Ct,Q)=>Ct-Q);for(let Ct=0;Ct<en.length;Ct+=1){const Q=en[Ct];O.push(new QuadraticPolynomial(J,Q,a,tn,c))}}return QuadraticSieveFactorization.polynomialsCounter+=1,O.shift()}}};QuadraticPolynomial.prototype.X=function(t){return this.A*BigInt((this.useQ2Form?2:1)*t)+this.B};QuadraticPolynomial.prototype.Y=function(t,n,a){if(typeof t!="number")throw new TypeError;const s=this.A*(t*t>=2**53?BigInt(t)*BigInt(t):BigInt(t*t))+this.B*BigInt((this.useQ2Form?1:2)*t)+this.C;if(n===void 0&&a===void 0)return s;if(s%n!==0n)return null;const l=getSmoothFactorization(s/n,a);return l==null?null:l.length===1&&l[0]===0?l:this.AFactors.concat(l)};QuadraticPolynomial.prototype.log2AbsY=function(t){if(typeof t!="number")throw new TypeError;return Math.log2(Math.abs((t-this.x1)*(t-this.x2)))+this.log2a};function thresholdApproximationInterval(t,n,a,s){let l=s>2048?s>262144?1024:256:1;for(;l>=2&&Math.abs(t.log2AbsY(n+l)-a)>.5;)l=Math.floor(l/2);return n+l}const wasmCode=typeof Uint8Array<"u"?new Uint8Array([0,97,115,109,1,0,0,0,1,28,3,96,8,127,127,127,127,127,127,127,127,1,127,96,2,127,127,1,127,96,6,127,127,127,127,127,127,0,2,15,1,3,101,110,118,6,109,101,109,111,114,121,2,0,0,3,5,4,0,1,2,0,7,85,4,16,115,105,110,103,108,101,66,108,111,99,107,83,105,101,118,101,0,0,15,102,105,110,100,83,109,111,111,116,104,69,110,116,114,121,0,1,24,117,112,100,97,116,101,87,104,101,101,108,115,73,110,116,101,114,110,97,108,78,101,120,116,0,2,17,104,97,110,100,108,101,83,109,97,108,108,87,104,101,101,108,115,0,3,10,154,8,4,226,1,1,4,127,32,2,32,5,106,33,8,32,0,32,4,106,33,0,32,1,32,4,106,33,1,32,2,32,4,106,33,2,32,3,32,4,65,2,117,106,33,3,3,64,32,2,32,8,71,4,64,32,0,40,2,0,33,5,32,1,40,2,0,33,4,32,2,40,2,0,33,10,32,3,45,0,0,33,11,3,64,32,4,32,6,72,4,64,32,4,45,0,0,32,11,106,33,9,32,5,32,5,45,0,0,32,11,106,58,0,0,32,4,32,9,58,0,0,32,5,32,10,106,33,5,32,4,32,10,106,33,4,12,1,11,11,32,5,32,6,72,4,64,32,5,32,5,45,0,0,32,11,106,58,0,0,32,5,32,10,106,33,9,32,4,33,5,32,9,33,4,11,32,0,32,5,32,7,107,54,2,0,32,1,32,4,32,7,107,54,2,0,32,0,65,4,106,33,0,32,1,65,4,106,33,1,32,2,65,4,106,33,2,32,3,65,1,106,33,3,12,1,11,11,65,0,11,42,1,1,123,32,0,253,15,33,2,32,1,65,16,107,33,1,3,64,32,1,65,16,106,34,1,253,0,4,0,32,2,253,44,253,100,69,13,0,11,32,1,11,173,1,2,5,123,1,127,32,5,253,17,33,6,3,64,32,11,32,0,65,2,116,72,4,64,32,3,32,3,253,0,4,0,34,8,32,1,253,0,4,0,34,7,32,6,253,177,1,32,7,32,6,253,55,32,2,253,0,4,0,34,9,253,78,253,174,1,34,7,253,177,1,32,8,32,7,253,57,32,9,253,78,253,174,1,34,8,32,4,253,0,4,0,34,10,32,7,253,177,1,32,10,32,7,253,57,32,9,253,78,253,174,1,34,7,253,182,1,253,11,4,0,32,4,32,8,32,7,253,184,1,253,11,4,0,32,1,65,16,106,33,1,32,2,65,16,106,33,2,32,3,65,16,106,33,3,32,4,65,16,106,33,4,32,11,65,16,106,33,11,12,1,11,11,11,217,4,2,10,127,5,123,32,6,32,7,70,4,64,0,11,32,5,33,8,3,64,32,13,32,0,65,2,116,72,4,64,32,1,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,1,253,0,4,16,65,16,253,171,1,253,80,33,20,32,2,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,2,253,0,4,16,65,16,253,171,1,253,80,33,21,32,3,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,3,253,0,4,16,65,16,253,171,1,253,80,33,19,32,4,253,0,4,0,65,16,253,171,1,65,16,253,173,1,32,4,253,0,4,16,65,16,253,171,1,253,80,33,22,32,6,65,4,107,33,10,253,12,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,33,18,3,64,32,18,32,20,32,10,65,4,106,34,10,253,8,1,0,34,18,253,145,1,32,19,253,149,1,32,21,32,18,253,145,1,32,19,253,149,1,253,151,1,253,151,1,33,18,32,7,32,10,74,13,0,11,32,18,32,22,253,52,253,100,4,64,32,6,33,10,3,64,32,7,32,10,74,4,64,32,20,32,10,253,8,1,0,34,18,253,145,1,32,19,253,149,1,32,21,32,18,253,145,1,32,19,253,149,1,253,151,1,32,22,253,52,253,100,34,11,4,64,65,0,33,9,3,64,32,11,65,3,32,11,104,34,12,116,115,33,11,32,9,65,1,32,12,65,1,118,34,9,65,1,113,65,2,116,32,9,65,1,117,114,116,115,33,9,32,11,13,0,11,32,9,33,11,32,10,40,2,0,33,14,3,64,32,11,104,34,9,65,2,116,33,15,32,11,65,1,32,9,116,115,33,11,32,4,32,15,106,40,2,0,34,12,32,3,32,15,106,40,2,0,34,9,32,2,32,15,106,40,2,0,34,16,32,14,107,108,79,32,12,32,9,32,1,32,15,106,40,2,0,34,17,32,14,107,108,79,114,65,0,65,1,32,16,32,17,27,27,4,64,32,8,65,2,116,32,13,32,15,106,65,2,117,34,12,54,2,0,32,8,65,1,106,65,2,116,32,10,32,6,107,65,2,117,34,9,54,2,0,32,8,65,2,106,33,8,32,16,32,17,70,4,64,32,8,65,2,116,32,12,54,2,0,32,8,65,1,106,65,2,116,32,9,54,2,0,32,8,65,2,106,33,8,11,11,32,11,13,0,11,11,32,10,65,4,106,33,10,12,1,11,11,11,32,1,65,32,106,33,1,32,2,65,32,106,33,2,32,3,65,32,106,33,3,32,4,65,32,106,33,4,32,13,65,32,106,33,13,12,1,11,11,32,8,32,5,107,11]):null;let wasmModule=null;function instantiateWasm(t){wasmModule==null&&(wasmModule=new WebAssembly.Module(wasmCode));const n=Math.ceil(t/2**16),a=new WebAssembly.Memory({initial:n,maximum:n}),s=a.buffer,l=new WebAssembly.Instance(wasmModule,{env:{memory:a}}).exports;return Object.assign({},l,{memory:{buffer:s}})}function congruencesUsingQuadraticSieve(t,n,a){if(typeof n!="bigint")throw new TypeError;let s=Number(a||0);s===0&&(s=3*2**14,s=Math.min(s,Math.ceil(Math.pow(+t[t.length-1],1.15))),s=Math.max(s,t[t.length-1]+1),Number(n)>2**285?s=Math.floor(s/3.2/1.5):Number(n)>2**240?s=Math.floor(s/1.6/1.5):s=Math.floor(s/1.5));const l=Math.ceil(s/(typeof navigator<"u"&&navigator.hardwareConcurrency===12?2.75*2**20:6*2**20));console.debug("q",l);const u=Math.ceil(Math.ceil(s/l)/2**15)*2**15,c=u*l;console.debug("sieveSize",c);const p=0,d=255,x=2**0,_=Math.log2(t.length===0?Math.sqrt(2):+t[t.length-1]),S=_+Math.min(Math.log2(n<2**240?50:n<2**285?400:1e3),_);console.debug("largePrimesThreshold",S);const T=new Map,A=Number(n)>2**285,R=Math.min(2*_+Math.min(Math.log2(200),_),64);A&&console.log("doubleLargePrimesThreshold",R);const D=[];for(let zx=0;zx<t.length;zx+=1){const Xx=+t[zx];for(let oE=1,Jx=Xx;Jx<=c||oE===1;oE+=1,Jx*=Xx){const fE=Number(n%BigInt(Jx));if(fE%Xx===0)oE===1&&D.push({step:Jx,p:Xx,root:0});else if(Xx===2){const pE=squareRootsModuloTwo(fE,oE);for(let vx=0;vx<Math.ceil(pE.length/2);vx+=1)D.push({step:Jx,p:Xx,root:pE[vx]|0})}else{const pE=squareRootModuloOddPrime(fE,Xx,oE);D.push({step:Jx,p:Xx,root:pE|0})}}}D.sort((zx,Xx)=>+zx.step-+Xx.step);const O=D.length;for(;D.length%16!==0;)D.push(D.at(-1));console.debug("wheels",D.length),console.debug("max wheel",D.at(-1).step);const F=new Float64Array(D.length);let z=0n;const j=[],Z=D.length;console.assert(u%4===0);let W=0;W+=u*1,W+=Z*4,W+=Z*4,W+=Z*4,W+=Z*1,W+=16*1024*4,W+=Z*4,W+=Z*4,W+=512*4,W+=30*Z*4,W+=Z*4,W+=Z*4;const J=instantiateWasm(W),en=J.singleBlockSieve,tn=J.findSmoothEntry,Ct=J.updateWheelsInternalNext,Q=J.handleSmallWheels,on=J.memory.buffer;let gn=0;const In=function(zx){return gn+=zx,new Uint8Array(on,gn-zx,zx)},dn=function(zx){return gn+=zx*4,new Int32Array(on,gn-zx*4,zx)},ix=In(u),Cn=dn(Z),ax=dn(Z),sx=dn(Z),lx=In(Z),ox=dn(16*1024),hx=dn(Z),_x=dn(Z),ux=dn(512),px=dn(30*Z),dx=dn(Z),mx=dn(Z);for(let zx=0;zx<Z;zx+=1){const Xx=D[zx],oE=zx>=O?0:Math.log2(Xx.p)*(Xx.step===2||Xx.root===0?.5:1),Jx=Math.round(oE*x)|0;if(Jx>=2**8||Xx.step>=2**32)throw new RangeError;sx[zx]=Xx.step,lx[zx]=Jx,hx[zx]=Xx.root,F[zx]=oE}const gx=function(zx,Xx,oE,Jx){const fE=T.get(zx);if(fE==null)T.set(zx,{polynomial:Xx,x:oE,pb:Jx.slice(0)}),QuadraticSieveFactorization.lpRels+=1;else{const pE=BigInt(zx),vx=modInverse$1(pE,n);if(vx===0n)return new CongruenceOfsquareOfXminusYmoduloN(pE,[0],n);{const xx=Xx.X(oE),Mx=Xx.Y(oE,pE,Jx),Lx=fE.polynomial.X(fE.x),Kx=fE.polynomial.Y(fE.x,pE,fE.pb),dE=vx*Lx*xx%n;if(Mx!=null&&Kx!=null){const vE=Mx.concat(Kx);return new CongruenceOfsquareOfXminusYmoduloN(dE,vE,n)}else console.count("bad lp")}}return null},Sx=QuadraticPolynomial.generator(c/2,t,n);let Ex=null;function Cx(zx){let Xx=zx;for(let oE=2;oE<32;oE+=oE)Xx=Math.imul(Xx,2-Math.imul(zx,Xx));return Xx}function Ax(zx,Xx){if(zx%2===0){if(zx!==2**Math.round(Math.log2(zx)))throw new RangeError;return{a:2**32/zx|0,b:0}}const oE=Cx(zx);let Jx=Math.floor(Xx/zx);return Jx=Jx<2**16?Jx:Jx|65535,console.assert(Jx<=Math.floor((2**32-1)/zx)),{a:oE,b:Jx}}for(let zx=0;zx<Z;zx+=1){const Xx=sx[zx],oE=Ax(Xx,D.at(-1).step+c);dx[zx]=oE.a,mx[zx]=oE.b}let Tx=0n,kx=[];const Rx=function(zx,Xx){if(Xx=-0+Xx,!(BigInt(zx.A)===BigInt(z))){const xx=FastModBigInt((zx.useQ2Form?2n:1n)*zx.A),Mx=zx.B<0n?-1:1,Lx=FastModBigInt(zx.B<0n?-zx.B:zx.B);j.length=0;for(let Kx=0;Kx<Z;Kx+=1){const dE=-0+sx[Kx],vE=(1+2**-52)/dE,mE=-0+FastMod(xx,dE,vE),yE=modInverseSmall$1(mE,dE)|0;_x[Kx]=yE,yE===0&&j.push(Kx);let CE=-0+FastMod(Lx,dE,vE);CE=Mx<0?-CE:CE;const NE=-0+hx[Kx];let RE=(dE-CE+(dE-NE))*yE-Xx,sS=(dE-CE+NE)*yE-Xx;RE=RE-Math.floor(RE*vE)*dE,sS=sS-Math.floor(sS*vE)*dE;const dS=Math.min(RE,sS),YE=Math.max(RE,sS);Cn[Kx]=dS,ax[Kx]=YE}Tx=0n,kx.length=0}if(Tx===0n)Tx=zx.B;else{let xx=zx.B-Tx;Tx=zx.B;let Mx=0;if(xx<0n&&(xx+=(zx.useQ2Form?2n:1n)*zx.A,Mx=1),xx<0n||xx>=zx.A*2n)throw new RangeError;let Lx=kx.indexOf(xx);if(Lx===-1){kx.push(xx);const Kx=FastModBigInt(xx<0n?-xx:xx);Lx=kx.length-1;const dE=Lx*Z;for(let vE=0;vE<Z;vE+=1){const mE=-0+sx[vE],yE=-0+_x[vE],CE=(1+2**-52)/mE,NE=FastMod(Kx,mE,CE);let RE=(mE-NE)*yE;RE=RE+c,RE=RE-Math.floor(RE*CE)*mE,RE=mE-RE,px[dE+vE]=RE}}Ct(Z,px.byteOffset+Lx*Z*4,sx.byteOffset,Cn.byteOffset,ax.byteOffset,Mx)}const Jx=Number(zx.A&BigInt(2**29-1)),fE=Number(zx.B&BigInt(2**29-1)),pE=Number(zx.C&BigInt(2**29-1)),vx=modInverseSmall$1(Jx,2**29);for(let xx=0;xx<j.length;xx+=1){const Mx=j[xx];if(Cn[Mx]=c,ax[Mx]=c,zx.useQ2Form){const Lx=sx[Mx];if(Lx%2===0){const Kx=hx[Mx];for(let dE=0;dE<(Lx===2?1:2);dE+=1){const vE=dE===0?Kx:Lx-Kx;console.assert((-fE-vE)%2===0),console.assert((-fE+vE)%2===0);let mE=Math.imul((-fE-vE)/2,vx)-Xx&Lx-1,yE=Math.imul((-fE+vE)/2,vx)-Xx&Lx-1,CE=Math.imul(Math.imul(Jx,mE+Xx)+fE,mE+Xx)+pE&Lx-1,NE=Math.imul(Math.imul(Jx,yE+Xx)+fE,yE+Xx)+pE&Lx-1;if(CE===0&&NE===0&&(Cn[Mx]=Math.min(mE,yE),ax[Mx]=Math.max(mE,yE)),Lx===2)if(mE!==yE)lx[Mx]=Math.round(1*x)|0,F[Mx]=1;else throw new Error}}}}z=zx.A},$x=function(zx,Xx){for(;Xx!==0;){const oE=+zx%+Xx;zx=Xx,Xx=oE}return zx},Gx=function(zx,Xx){return Math.floor(zx/$x(zx,Xx))*Xx},Dx=function(){let zx=1,Xx=0;for(;Xx<Z&&Gx(zx,sx[Xx])<=u/4;)zx=Gx(zx,sx[Xx]),Xx+=1;return Xx}(),lE=function(zx,Xx,oE){if(typeof oE!="number"||typeof Xx!="number")throw new TypeError;if(oE>zx.length)throw new RangeError;for(let Jx=Xx;Jx<oE;Jx+=Xx)zx.copyWithin(Jx,0,Math.min(oE-Jx,Xx))};QuadraticSieveFactorization.smallSegmentTime=0,QuadraticSieveFactorization.largeSegmentTime=0;const cE=function(zx){let Xx=1;ix[0]=p;for(let Mx=0;Mx<Dx;Mx+=1){const Lx=+Gx(Xx,sx[Mx]);lE(ix,Xx,Lx),Xx=Lx;const Kx=sx[Mx],dE=lx[Mx],vE=Cn[Mx]|0;if(vE!==c)for(let yE=(vE+Lx-zx%Lx)%Kx;yE<Lx;yE+=Kx)ix[yE]=ix[yE]+dE|0;const mE=ax[Mx]|0;if(mE!==c)for(let yE=(mE+Lx-zx%Lx)%Kx;yE<Lx;yE+=Kx)ix[yE]=ix[yE]+dE|0}lE(ix,Xx,u);const oE=typeof navigator<"u"&&navigator.hardwareConcurrency===12?1:1.5,Jx=Math.min(0+Z-Dx,Math.floor(64*3*oE*(n>2**285?4:n>2**240?2:1))),fE=Math.floor(32768*oE),pE=performance.now();let vx=0;for(;vx+fE<=u;)vx+=fE,en(Cn.byteOffset,ax.byteOffset,sx.byteOffset,lx.byteOffset,Dx*4,Dx*4+Jx*4,vx,0);QuadraticSieveFactorization.smallSegmentTime+=performance.now()-pE;const xx=performance.now();en(Cn.byteOffset,ax.byteOffset,sx.byteOffset,lx.byteOffset,Dx*4,Z*4,u,u),QuadraticSieveFactorization.largeSegmentTime+=performance.now()-xx},nE=[],iE=[],_E=[],sE=function(zx,Xx){if(typeof zx!="number")throw new TypeError;const oE=Math.max(p,(Math.round((Xx.log2AbsY(0)-(A?R:S))*x+p)|0)-9);let Jx=0,fE=0;for(;Jx<u;){fE=oE;const vx=u;for(;Jx<vx;){if(Jx<vx-1){const Mx=ix[vx-1];for(ix[vx-1]=d;(Jx&15)!==0&&fE>ix[Jx];)Jx+=1;if((Jx&15)===0){Jx=tn(fE,Jx);for(var pE=0;fE>ix[Jx];)Jx+=1,pE+=1;pE>=16&&console.error("too big c",pE)}ix[vx-1]=Mx}const xx=Xx.log2AbsY(Jx+zx)-(ix[Jx]-p)*(1/x);(xx<S||A&&xx>=_*2&&xx<R)&&(nE.push(Jx+zx),iE.push(-0+(ix[Jx]-p)*(1/x))),Jx+=1}}};function ME(zx){nE.length>512&&(console.warn("too many smooth entries: "+nE.length+" N = "+n),nE.length=512);for(let Jx=0;Jx<nE.length;Jx+=1)ux[Jx]=nE[Jx]-zx-c;for(let Jx=0;Jx<Dx;Jx+=1){const fE=sx[Jx];if(Cn[Jx]!==c){let pE=Cn[Jx]+(0-c)%fE;Cn[Jx]=pE<=0?pE+fE:pE}else Cn[Jx]=0;if(ax[Jx]!==c){let pE=ax[Jx]+(0-c)%fE;ax[Jx]=pE<=0?pE+fE:pE}else ax[Jx]=0}const Xx=nE.length===0?0:Q(Z,Cn.byteOffset,ax.byteOffset,dx.byteOffset,mx.byteOffset,ox.byteOffset>>2,ux.byteOffset,ux.byteOffset+nE.length*4),oE=new Float64Array(nE.length);for(let Jx=0;Jx<Xx;Jx+=2){const fE=ox[Jx],pE=ox[Jx+1],vx=sx[fE];oE[pE]+=+F[fE],_E[pE].push(vx)}for(let Jx=0;Jx<nE.length;Jx+=1){const fE=Math.abs(iE[Jx]-oE[Jx]);fE>=9&&fE<100&&console.error(fE),iE[Jx]=oE[Jx]}}function fx(){this.a=[],this.b=[],this.length=0}fx.prototype.push=function(zx){this.a.push(zx),this.length=this.a.length+this.b.length},fx.prototype.shift=function(Xx){if(this.b.length===0)for(;this.a.length>0;)this.b.push(this.a.pop());var Xx=this.b.pop();return this.length=this.a.length+this.b.length,Xx};function yx(){this.edges=0,this.components=0,this.vertices=0,this._edges=new Map,this._edgesArray=[],this._g=new Map}yx.prototype._insertVertex=function(zx){if(!this._g.has(zx))return this._g.set(zx,zx),this.vertices+=1,this.components+=1,zx;let Xx=this._g.get(zx);for(;this._g.get(Xx)!==Xx;)Xx=this._g.get(Xx);let oE=zx;for(;oE!==Xx;){const Jx=this._g.get(oE);this._g.set(oE,Xx),oE=Jx}return Xx};const Ix=function(zx,Xx){return BigInt.asUintN(64,(BigInt(Math.min(zx,Xx))<<32n)+BigInt(Math.max(zx,Xx)))};yx.prototype.insertEdge=function(zx,Xx,oE){const Jx=Ix(zx,Xx);if(this._edges.get(Jx)!==void 0){console.count("same p1p2");return}this._edges.set(Jx,oE),this._edgesArray.push({p1:zx,p2:Xx}),zx!==Xx&&this._edgesArray.push({p1:Xx,p2:zx}),this.edges+=1;const fE=this._insertVertex(zx),pE=this._insertVertex(Xx);fE<pE&&(this.components-=1,this._g.set(pE,fE)),fE>pE&&(this.components-=1,this._g.set(fE,pE))},yx.prototype.iterateCycles=function(zx){const Xx=new Map;this._edgesArray.sort((pE,vx)=>pE.p1-vx.p1||pE.p2-vx.p2);const oE=[];for(let pE of this._g.keys())this._g.get(pE)===pE&&oE.push(pE),Xx.set(pE,{explored:!1,finished:!1,parent:0});oE.sort((pE,vx)=>pE-vx);const Jx=this._edgesArray.map(pE=>pE.p1),fE=function(pE){const vx=[];for(;pE!==0;)vx.push(pE),pE=Xx.get(pE).parent;return vx};for(const pE of oE){const vx=new fx,xx=Xx.get(pE);for(console.assert(xx.explored===!1&&xx.parent===0),xx.explored=!0,xx.parent=0,vx.push(pE);vx.length>0;){const Mx=vx.shift(),Lx=indexOf$1(Jx,Mx);for(let Kx=Lx;Kx>=0&&this._edgesArray[Kx].p1===Mx;Kx-=1){const dE=this._edgesArray[Kx],vE=Xx.get(dE.p2);if(vE.explored){if(vE.finished)continue;const mE=fE(dE.p2),yE=fE(dE.p1);let CE=0;for(;mE.length-1-CE>=0&&yE.length-1-CE>=0&&mE[mE.length-1-CE]===yE[yE.length-1-CE];)CE+=1;console.assert(CE>0);const NE=mE.slice(0,mE.length-(CE-1)).reverse().concat(yE.slice(0,yE.length-(CE-1))),RE=[];for(let YE=1;YE<NE.length;YE+=1)RE.push({p1:NE[YE-1],p2:NE[YE]});const sS=this._edges,dS=RE.map(YE=>sS.get(Ix(YE.p1,YE.p2)));zx(RE,dS)}else vE.explored=!0,vE.parent=dE.p1,vx.push(dE.p2)}Xx.get(Mx).finished=!0}}};const Nx=function(zx,Xx){let oE=1n,Jx=1n,fE=[];for(let vx=0;vx<zx.length;vx+=1){const xx=zx[vx],Mx=Xx[vx],Lx=Mx.polynomial.X(Mx.x),Kx=Mx.polynomial.Y(Mx.x,BigInt(xx.p1)*BigInt(xx.p2),Mx.pb);Jx=Lx*Jx%n,fE==null||Kx==null?fE=null:fE=fE.concat(Kx),oE=oE*BigInt(xx.p2)%n}const pE=modInverse$1(oE,n);if(pE===0n)Px.push(new CongruenceOfsquareOfXminusYmoduloN(oE,[0],n));else if(fE!=null){Jx=pE*Jx%n;const vx=new CongruenceOfsquareOfXminusYmoduloN(Jx,fE,n);if((Jx**2n-fE.reduce((xx,Mx)=>xx*BigInt(Mx),1n))%n!==0n)throw new Error;Px.push(vx)}else console.count("BAD CYCLE")};let Fx=new yx;const Px=[];let Wx=0;function jx(zx,Xx,oE,Jx,fE){if(Fx==null)return;Fx.insertEdge(zx,Xx,{polynomial:Jx,x:oE,pb:fE.slice(0)});const pE=Fx.edges+Fx.components-Fx.vertices;Fx.edges%1e4===0&&console.debug("graph:",Fx.edges,Fx.components,Fx.vertices,pE),pE>t.length+64-Wx&&(console.debug("graph:",Fx.edges,Fx.components,Fx.vertices,pE),console.time("collectGraphRelations"),Fx.iterateCycles(Nx),console.timeEnd("collectGraphRelations"),console.log(Px.length),Fx=null)}function Qx(zx,Xx,oE){let Jx=abs$3(Xx.Y(zx));for(let Lx=oE.length-1;Lx>=0;Lx-=1){const Kx=oE[Lx];for(;Jx%BigInt(Kx)===0n;)Jx/=BigInt(Kx)}const fE=BigInt(Jx);if(Number(fE)>=2**64||isProbablyPrime64(fE))return;const pE=Number(PollardsRho64(fE,2**18));if(pE===0||pE===1){console.count("cannot factor");return}if(BigInt(fE)%BigInt(pE)!==BigInt(0)||!(pE>1&&BigInt(pE)<BigInt(fE)))throw new Error;const vx=Math.floor(Number(BigInt(fE)/BigInt(pE))),xx=Math.min(vx,pE),Mx=Math.max(vx,pE);Math.log2(xx)>_&&xx<=1073741823&&Mx<=1073741823&&jx(xx|0,Mx|0,zx,Xx,oE)}QuadraticSieveFactorization.lpCounter=0,QuadraticSieveFactorization.lpRels=0;let tE=-1,hE=0;const gE={next:function(){for(Wx+=1;hE<32||2*hE*c<=Math.pow(t[t.length-1],2);){if(Px.length!==0)return{value:Px.pop(),done:!1};tE===c&&(hE+=1,tE=-1);const Xx=-c/2;if(tE===-1){Ex=Sx.next(),Rx(Ex,Xx),nE.length=0,iE.length=0;for(let oE=0;oE<c;oE+=u)cE(oE),sE(Xx+oE,Ex);for(let oE=0;oE<nE.length;oE+=1)oE<_E.length?_E[oE].length=0:_E.push([]);ME(Xx)}for(let oE=tE+1;oE<nE.length;oE+=1){const Jx=nE[oE],fE=+iE[oE],pE=_E[oE],vx=+Ex.log2AbsY(Jx);let xx=null;if(vx-fE<=_){const Mx=Ex.X(Jx);let Lx=Ex.Y(Jx,1n,pE);Lx==null&&(Lx=Ex.Y(Jx,1n,pE.concat(j.map(Kx=>sx[Kx])))),Lx!=null?xx=new CongruenceOfsquareOfXminusYmoduloN(Mx,Lx,n):console.count("wrong entry",exp2(vx-fE))}else if(vx-fE<2*_){const Mx=exp2(vx-fE);xx=gx(Mx,Ex,Jx,pE),xx!=null?QuadraticSieveFactorization.lpCounter+=1:A&&Mx<=1073741823&&(Ex.Y(Jx,BigInt(Mx),pE)!=null?jx(1,Mx|0,Jx,Ex,pE):(console.count("wrong?"),console.log(Ex.Y(Jx),Mx)))}else A&&vx-fE<3*_?Qx(Jx,Ex,pE):console.count("too big",(vx-fE)/_);if(xx!=null)return tE=oE,{value:xx,done:!1}}tE=c}return{value:void 0,done:!0}}};return gE[globalThis.Symbol.iterator]=function(){return this},gE}function gcd$2(t,n){for(;n!==0n;){const a=BigInt(t)%BigInt(n);t=n,n=a}return t}function abs$3(t){if(typeof t!="bigint")throw new TypeError;return t<0n?-t:t}function indexOf$1(t,n){if(typeof n!="number"||(n|0)!==n)throw new TypeError;let a=0,s=t.length-1;for(;a<s;){const l=Math.ceil((a+s)/2);(t[l]|0)>(n|0)?s=l-1:a=l}return(t[a]|0)===(n|0)?a:-1}function computeY(t,n,a){const s=new Array(t.length+1).fill(0);for(let u=0;u<n.length;u+=1){const c=n[u].v;for(let p=0;p<c.length;p+=1)s[c[p]]+=1}let l=1n;for(let u=0;u<s.length;u+=1){if(s[u]%2!==0)throw new RangeError;if(u!==0){const c=t[u-1],p=s[u]/2;p>0&&(p<=2?l=l*BigInt(Math.pow(c,p))%a:l=l*modPow$2(BigInt(c),BigInt(p),a)%a)}}return l}function legendre(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;t=t|0,n=n|0,t=(t|0)%(n|0);for(var a=1,s=0;t!==0;){for(;(t&1)===0;)t>>=1,s=n&7,(s===3||s===5)&&(a=-a);s=n,n=t,t=s,(t&3)===3&&(n&3)===3&&(a=-a),t=(t|0)%(n|0)}return n===1?a:0}function getBestMultiplier(t,n){const a=new Array(150).fill(0);for(let c=1;c<a.length;c+=1)a[c]=-Math.log(c)/2;for(let c=0;c<n.length&&c<300;c+=1){const p=n[c];if(p===2)for(let d=1;d<a.length;d+=1)a[d]+=[0,3,0,.5,0,1,0,.5][d*Number(t%8n)%8]*Math.log(2);else{const d=legendre(Number(t%BigInt(p)),p),x=2/(p-1)*Math.log(p);for(let _=1;_<a.length;_+=1)a[_]+=d*legendre(_,p)===1?x:0}}let s=0,l=1;for(let c=1;c<=a.length;c+=1){var u=+a[c];+u>+s&&(s=u,l=c)}return l}function QuadraticSieveFactorization(t){if(typeof t!="bigint")throw new TypeError;const n=Math.floor(((performance.memory||{jsHeapSizeLimit:0}).jsHeapSizeLimit||0)/2**32<.99?2**23.5:2**23.75),a=Math.min(n,(1<<25)-1),l=Math.max(Math.min(Math.floor(Math.sqrt(L(t)/(Number(t)>2**285?24*2.5:Number(t)>2**240?12:6))),a),512),u=primes$1(l);let c=1n;for(c=Number(t)>2**64?BigInt(getBestMultiplier(t,u)):1n;;c+=1n){if(c!==1n&&console.debug("multiplier",c),c!==1n&&t%c===0n)return console.error("k"),BigInt(c);const p=c*t,d=u.filter(D=>isQuadraticResidueModuloPrime(p,D));for(let D=0;D<d.length;D+=1)if(Number(t%BigInt(d[D]))===0)return BigInt(d[D]);const x=congruencesUsingQuadraticSieve(d,p),_=solve.sparseSolve(1+d.length);_.next();let S=null;const T=performance.now();let A=0,R=T;for(;(S=x.next().value)!=null;)if(S.Y.length===1&&S.Y[0]===0){const D=BigInt(gcd$2(abs$3(S.X),t));if(D!==1n&&D!==t)return D}else{const D=function(){throw new TypeError(t)},O=S.Y.map(z=>z===-1?0:1+indexOf$1(d,z)||D()),F=_.next([O,{c:S,v:O}]).value;{const z=performance.now();A+=1,(z-R>5e3||F!=null)&&(console.debug("congruences found: ",A,"/",d.length,"expected time: ",Math.round((z-T)/A*d.length),"large prime congruences: ",QuadraticSieveFactorization.lpCounter+"("+QuadraticSieveFactorization.lpRels+")","polynomials used: ",QuadraticSieveFactorization.polynomialsCounter),R=z)}if(F!=null){let z=1n;for(let W=0;W<F.length;W+=1)z=z*F[W].c.X%t;let j=computeY(d,F,t);const Z=BigInt(gcd$2(abs$3(z+j),t));if(Z!==1n&&Z!==t)return Z}}}}QuadraticSieveFactorization.testables={congruencesUsingQuadraticSieve,squareRootModuloOddPrime,isQuadraticResidueModuloPrime,solve,QuadraticPolynomial,thresholdApproximationInterval};function log2(t){return BigInt(t.toString(16).length*4)}function modPow$1(t,n,a){let s=1n;for(;n!==0n;)BigInt.asUintN(1,n)===1n&&(n-=1n,s=s*t%a),n>>=1n,t=t*t%a;return s}function primes(t){const n=new Array(t+1).fill(!0),a=[];a.push(2);for(let s=3;s<=t;s+=2)if(n[s]&&(a.push(s),s<=Math.floor(t/s)))for(let l=s*s;l<=t;l+=2*s)n[l]=!1;return a}function getBases(t){if(typeof t!="bigint")throw new TypeError;if(t<2047n)return[2];if(t<1373653n)return[2,3];if(t<25326001n)return[2,3,5];if(t<3215031751n)return[2,3,5,7];if(t<2152302898747n)return[2,3,5,7,11];if(t<3474749660383n)return[2,3,5,7,11,13];if(t<341550071728321n)return[2,3,5,7,11,13,17];if(t<3825123056546413051n)return[2,3,5,7,11,13,17,19,23];if(t<318665857834031151167461n)return[2,3,5,7,11,13,17,19,23,29,31,37];if(t<3317044064679887385961981n)return[2,3,5,7,11,13,17,19,23,29,31,37,41];const n=Number(log2(t))*Math.log(2);return primes(Math.floor(1/Math.log(2)*n*Math.log(n)))}function isPrime$3(t){if(typeof t!="bigint")throw new RangeError;if(t<0n)throw new RangeError;if(t<2n)return!1;const n=[2,3,5,7,11,13,17,19,23,29,31,37,41],a=Number(t%304250263527210n);for(let c=0;c<n.length;c+=1){const p=n[c];if(a-Math.floor(a/p)*p===0)return t===BigInt(p)}if(t<43*43)return!0;let s=0,l=t-1n;for(;l%2n===0n;)l/=2n,s+=1;const u=getBases(t);for(const c of u){let p=modPow$1(BigInt(c),l,t);if(p!==1n){for(let d=s-1;d>0&&p!==t-1n;d-=1)p=p*p%t;if(p!==t-1n)return!1}}return!0}function bitLength$1(t){if(typeof t=="number"){var n=t|0;if(n===t&&n>=0)return 32-Math.clz32(n)}const a=t.toString(16),s=0+a.charCodeAt(0)-48;if(s<=0)throw new RangeError;return(a.length-1)*4+(32-Math.clz32(Math.min(s,8)))}const SPLIT=Math.pow(2,Math.ceil(Math.log2((Number.MAX_SAFE_INTEGER+1)*2)/2))+1;function fma(t,n,a){var s=SPLIT*t,l=s-(s-t),u=t-l,c=SPLIT*n,p=c-(c-n),d=n-p,x=l*p+a+l*d+u*p+u*d;return x}function modMultiplySmall(t,n,a){if(typeof t!="number"||typeof n!="number"||typeof a!="number")throw new TypeError;if(!(t>=0&&n>=0&&t<a&&n<a&&a<=Number.MAX_SAFE_INTEGER))throw new RangeError;var s=t*n;if(s<=Number.MAX_SAFE_INTEGER)return s-Math.floor(s/a)*a;var l=fma(t,n,-s),u=s/a-(1+Number.MAX_SAFE_INTEGER)+(1+Number.MAX_SAFE_INTEGER),c=0-fma(u,a,-s);l>0&&(l-=a),c<0&&(c+=a);var p=l+c;return p<0&&(p+=a),p}function modPowSmall(t,n,a){let s=1;for(;n!==0;){let l=Math.floor(n/2);n!==l+l&&(s=modMultiplySmall(s,t,a)),n=l,t=modMultiplySmall(t,t,a)}return s}function range(t,n){var a=[];for(let s=t;s<=n;s+=1)a.push(s);return a}function isPrimeSmall(t){if(typeof t!="number")throw new TypeError;if(t>Number.MAX_SAFE_INTEGER)throw new RangeError;if(t<2)throw new RangeError;if(+primeFactorUsingWheel(t,2*1024)<t)return!1;if(t<Math.pow(1024,2))return!0;let n=0,a=t-1;for(;a%2===0;)a/=2,n+=1;const s=[10,20,24,31,40,41,48,48,61,61,61,78,81],l=[2,3,5,7,11,13,17,17,19,19,19,23,29];let u=0;const c=Math.ceil(Math.log2(t));for(;c>s[u]&&u<s.length;)u+=1;let p=null;u<s.length?p=l.slice(0,u+1):p=range(2,Math.floor(1/Math.log(2)*Math.log(t)*Math.log(Math.log(t)))),console.assert(t>p[p.length-1]);for(const d of p){const x=modPowSmall(d,a,t);if(x!==1){for(let _=0,S=x;S!==t-1;_+=1,S=modMultiplySmall(S,S,t))if(_===n-1)return!1}}return!0}function factorByPollardRhoSmall(t){if(typeof t!="number")throw new TypeError;function n(c,p){for(;p!==0;){var d=c-Math.floor(c/p)*p;c=p,p=d}return c}function a(c,p,d){var x=modMultiplySmall(c,c,d)-p;return x<0?x+d:x}function s(c,p,d){if(c%p===0)return p;for(var x=p,_=2,S=p;;){for(var T=1,A=S,R=!1,D=1;R||D<=_;D+=1)if(S=a(S,d,c),D===_/2&&(A=S),D>_/2&&(T=R?Math.abs(S-x):modMultiplySmall(T,Math.abs(S-x),c),R||D===_||D%128===0)){var O=n(T,c);if(O!==1)if(!R)S=A,R=!0;else return O;T=1,A=S}_*=2,x=S}return 1}var l=1,u=t;do l+=1,u=s(t,l,1);while(u===t);return u}function factorByPollardRhoBig(t,n){function a(d){if(typeof d!="bigint")throw new TypeError;return d<0n?-d:d}function s(d,x){if(typeof d!="bigint"||typeof x!="bigint")throw new RangeError;for(;x!==0n;){var _=BigInt(d)%x;d=x,x=_}return d}function l(d,x,_){if(typeof d!="bigint"||typeof x!="bigint"||typeof _!="bigint")throw new RangeError;var S=d*d%_-x;return S<0n?S+_:S}function u(d,x,_,S){if(typeof d!="bigint"||typeof x!="bigint")throw new RangeError;if(d%x===0n)return x;for(var T=x,A=2,R=x;A<=Math.pow(2,S);){for(var D=1n,O=R,F=!1,z=1;F||z<=A;z+=1)if(R=l(R,_,d),z===A/2&&(O=R),z>A/2){const Z=a(BigInt(R)-T);if(D=F?Z:D*Z%d,F||z===A||z%128===0){var j=s(D,d);if(j!==1n)if(!F)R=O,F=!0;else return j;D=1n,O=R}}A*=2,T=R}return 1n}var c=1,p=t;do c+=1,p=u(t,BigInt(c),1n,n);while(BigInt(p)===BigInt(t));return p}var WHEEL3=[1,2,2,4,2,4,2,4,6,2,6];function remainder(t,n){return t-Math.floor(t/n)*n}function primeFactorUsingWheel(t,n=void 0){if(typeof t!="number")throw new RangeError;var a=WHEEL3,s=3;n==null&&(n=Math.floor(Math.sqrt(Number(t)+.5)));for(var l=2,u=0;l<=n;){if(remainder(t,l)===0)return l;l+=a[u],u+=1,u===a.length&&(u=s)}return t}function someFactor(t){var n=+(typeof t=="number"?t:Number(BigInt(t)));if(n<1)throw new TypeError("primeFactor cannot be called for numbers less than 2");if(n===1)return t;if(n<=Number.MAX_SAFE_INTEGER){var a=primeFactorUsingWheel(n,1024);if(a<n||n<=1024*1024)return BigInt(a);if(n%2===0)return 2n}//! optimize n = f**2
var s=BigInt(nthRoot(BigInt(t),2));if(s**2n===t)return s;if(n>5){var l=s+1n,u=l*l-BigInt(t),c=BigInt(nthRoot(BigInt(u),2));if(c*c===u)return l-c}//! optimize n = f**3
for(var p=bitLength$1(BigInt(t)),d=3;d<=p/10;d+=2){var x=BigInt(nthRoot(BigInt(t),d));if(x**BigInt(d)===BigInt(t))return x}var _=n<=Number.MAX_SAFE_INTEGER;if(_&&isPrimeSmall(n)||!_&&isPrime$3(t))return t;if(n<=Number.MAX_SAFE_INTEGER)return factorByPollardRhoSmall(n);{var S=Math.floor(Math.log(function(D){const O=Math.max(0,D.toString(16).length*4-48),F=(Math.log2(Number(BigInt(D)>>BigInt(O)))+O)*Math.LN2;return Math.exp(Math.sqrt(F*Math.log(F)))}(t)));n<2**64&&(S=1/0),globalThis.ArrayBuffer==null&&(S=1/0),n>=2**128?S-=3:n>=2**96?S-=2:S-=1;var T=factorByPollardRhoBig(t,S);if(T!==1n)return T;if(globalThis.onerror!=null){var p=bitLength$1(t),A=new TypeError("big size of someFactor bitLength("+t+") === "+p);globalThis.onerror(A.message,"",0,0,A)}return QuadraticSieveFactorization(t)}}function countTrailingZeros(t,n){t=BigInt(t);const a=BigInt(n);if(t<0n||a<0n)throw new RangeError;if(t===a)return 1;if(t===0n)throw new TypeError;if(a===2n){for(var l=32;BigInt.asUintN(l,t)===0n;)l*=2;for(var u=0,s=Math.floor(l/2);s>=32;s=Math.floor(s/2))BigInt.asUintN(s,t)===0n&&(u=+u+s,t>>=BigInt(s));const S=function(T){const A=+T;return 32-(Math.clz32(A&-A)+1)};return u=+u+S(Number(BigInt.asUintN(32,t))),u}for(var l=1;t%a**BigInt(l)===0n;)l*=2;for(var u=0,s=l/2;s>=1;s/=2){var c=a**BigInt(s),p=BigInt(t)/c,d=BigInt(t)-p*BigInt(c);d===0n&&(u=+u+s,t=p)}return u}primeFactor._rationalNumberToDecimalString=function(t,n,a){const s=function(A,R){if(A=BigInt(A),A%2n===0n||A%5n===0n)throw new RangeError("should be called with denominator not divible by 2 or 5");const D=A;let O=0;if(D!==1n){let F=1n;do O+=1,F=10n*F%D;while(O<=R&&F!==1n)}return O},l=function(A,R,D,O){let F=+R+A.length-1;A=A.replace(/0+$/g,"");const z=Math.max(0,Math.max(F+1,O)-A.length);return F<=-1&&(A=String("0".repeat(0-F))+String(A),F=0),A=String(A)+String("0".repeat(z)),A=String(A)+String("0".repeat(Math.max(D-(A.length-(F+1)),0))),A.slice(0,F+1)+(A.length>F+1?"."+A.slice(F+1):"")},u=function(A,R,D){const O=+R+A.length-1;return O<-6||O>=D?l(A,-(A.length-1),0,D)+"e"+(O<0?"-":"")+Math.abs(O).toString():l(A,R,0,D)},c=function(A,R,D){return D.significantDigits!=null?u(A,R,D.significantDigits):l(A,R,D.fractionDigits,0)};t=BigInt(t),n=BigInt(n);let p=1;n<0n&&(n=-BigInt(n),p=-p),t<0n&&(t=-BigInt(t),p=-p);const d=function(A,R){let D=Math.floor((bitLength$1(A)-1-bitLength$1(R))/Math.log2(10));for(;BigInt(D<0?10n**BigInt(-D)*A:A)>=BigInt(D>0?10n**BigInt(D)*R:R);)D+=1;return D-1},x=primeFactor._countTrailingZeros(n,2),_=primeFactor._countTrailingZeros(n,5);if(x>0&&t%2n===0n)throw new RangeError("not implemented");if(_>0&&t%5n===0n)throw new RangeError("not implemented");const S=n/(2n**BigInt(x)*5n**BigInt(_)),T=+Math.max(x,_);if((a.fractionDigits!=null&&T<=a.fractionDigits||a.significantDigits!=null&&T+(d(t,n)+1)-primeFactor._countTrailingZeros(t,10)<=a.significantDigits)&&t%S===0n){const A=T,R=(10n**BigInt(A)*t/n).toString(),D=a.fractionDigits!=null?{fractionDigits:T}:{significantDigits:T+(d(t,n)+1)<=a.significantDigits?T+(d(t,n)+1):T+(d(t,n)+1)-primeFactor._countTrailingZeros(t,10)};return(p<0?"-":"")+c(R,-A,D)}else{const A=+(a.fractionDigits!=null?a.fractionDigits:a.significantDigits-(d(t,n)+1)),R=A>0?10n**BigInt(A)*t:t,D=A<0?10n**BigInt(-A)*n:n,O=((R+D/2n)/D).toString();let F=(p<0?"-":"")+c(O,-A,a);const z=+s(S,F.length);if(z!==0&&z<=F.length){const j=F.indexOf(".");let Z=j+1+T-(F.indexOf("e")!==-1?-Number(String(F.slice(F.indexOf("e")+1)))-0:0)-primeFactor._countTrailingZeros(t,10);if(Z<j+1){Z=j+1;//!?
}const W=F.indexOf("e")!==-1?F.indexOf("e"):F.length;j!==-1&&(Z+z<W||Z+z===W&&+F.charCodeAt(Z)<53)&&(F=F.slice(0,Z)+"("+F.slice(Z,Z+z)+")"+F.slice(Z+z))}return!/[^0\.]/.test(F)&&p>=0&&t!==0n&&(F="+"+F),F}};function primeFactor(t){t=BigInt(t);var n=BigInt(someFactor(t));if(n===t)return n;var a=primeFactor(n);return a}function modInverseBig(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;console.assert(t>=0n),console.assert(n>0n),t>=n&&(t=t%n);let a=t,s=n,l=1n,u=0n;for(;s!==0n;){const p=BigInt(BigInt(a)/s),d=a-p*s;a=s,s=d;const x=l-p*u;l=u,u=x}let c=l;return c=c<0n?c+n:c,console.assert(c>=0n&&c<n),c}function modInverseSmall(t,n){if(typeof t!="number"||typeof n!="number")throw new TypeError;if(n<0)throw new RangeError;console.assert(t>=0),t>=n&&(t=t%n);let a=t,s=n,l=1,u=0;for(;s!==0;){const p=Math.floor(a/s),d=a-p*s;a=s,s=d;const x=l-p*u;l=u,u=x}let c=l;return c=c<0?c+n:c,console.assert(c>=0&&c<n),c}function modInverse(t,n){return typeof n=="number"?modInverseSmall(typeof t=="number"?t:Number(BigInt(t)%BigInt(n)),n):modInverseBig(BigInt(t),BigInt(n))}primeFactor._bitLength=bitLength$1;primeFactor._isPrime=function(t){var n=+(typeof t=="number"?t:Number(BigInt(t)));return n<=Number.MAX_SAFE_INTEGER?isPrimeSmall(n):isPrime$3(t)};primeFactor._countTrailingZeros=countTrailingZeros;primeFactor._someFactor=someFactor;primeFactor._modInverse=modInverse;primeFactor._integerNthRoot=function(t,n){return nthRoot(BigInt(t),n)};primeFactor.testables={factorByPollardRhoSmall,factorByPollardRhoBig};(function(){function t(){}t.BigInt=function(Ct){return BigInt(Ct)},t.asIntN=function(Ct,Q){return BigInt.asIntN(Ct,Q)},t.asUintN=function(Ct,Q){return BigInt.asUintN(Ct,Q)},t.toNumber=function(Ct){return Number(Ct)},t.add=function(Ct,Q){return Ct+Q},t.subtract=function(Ct,Q){return Ct-Q},t.multiply=function(Ct,Q){return Ct*Q},t.divide=function(Ct,Q){return Ct/Q},t.remainder=function(Ct,Q){return Ct%Q},t.unaryMinus=function(Ct){return-Ct},t.equal=function(Ct,Q){return Ct===Q},t.lessThan=function(Ct,Q){return Ct<Q},t.greaterThan=function(Ct,Q){return Ct>Q},t.notEqual=function(Ct,Q){return Ct!==Q},t.lessThanOrEqual=function(Ct,Q){return Ct<=Q},t.greaterThanOrEqual=function(Ct,Q){return Ct>=Q},t.exponentiate=function(Ct,Q){if(typeof Ct!="bigint"||typeof Q!="bigint")throw new TypeError;var on=Number(Q);if(on<0)throw new RangeError;if(on>Number.MAX_SAFE_INTEGER){var gn=Number(Ct);if(gn===0||gn===-1||gn===1)return gn===-1&&Number(Q%BigInt(2))===0?-Ct:Ct;throw new RangeError}if(Ct===BigInt(2))return BigInt(1)<<Q;if(on===0)return BigInt(1);for(var In=Ct;on%2===0;)on=Math.floor(on/2),In*=In;var dn=In;if(on-=1,on>=2){for(;on>=2;){var ix=Math.floor(on/2);ix*2!==on&&(dn*=In),on=ix,In*=In}dn*=In}return dn},t.signedRightShift=function(Ct,Q){return Ct>>Q},t.leftShift=function(Ct,Q){return Ct<<Q},Symbol.hasInstance!=null&&Object.defineProperty(t,Symbol.hasInstance,{value:function(Ct){return typeof Ct=="bigint"}});var n=Symbol.hasInstance!=null&&typeof BigInt<"u"&&BigInt(Number.MAX_SAFE_INTEGER)+BigInt(2)-BigInt(2)===BigInt(Number.MAX_SAFE_INTEGER);if(n&&(-BigInt("0xffffffffffffffffffffffffffffffff")>>BigInt(64)).toString()!=="-18446744073709551616"&&(t.signedRightShift=function(Ct,Q){var on=BigInt(1)<<Q;return Ct>=BigInt(0)?Ct/on:(Ct-on+BigInt(1))/on}),n)try{BigInt(Number.MAX_SAFE_INTEGER+1)}catch{t.BigInt=function(Q){if(typeof Q=="number"){for(var on=0,gn=Q;gn>=Number.MAX_SAFE_INTEGER+1;)gn/=Number.MAX_SAFE_INTEGER+1,on+=Math.round(Math.log2(Number.MAX_SAFE_INTEGER+1));if(on!==0)return BigInt(gn)<<BigInt(on)}return BigInt(Q)}}for(var a=t,s=function(Ct){return function(Q,on){return Ct(Q,on)}},l=new Array(16*2+1),u=0;u<l.length;u+=1)l[u]=void 0;function c(){this.a=void 0,this.aKey=0,this.b=void 0,this.bKey=0,this.last=0}c.prototype.get=function(Ct){if(this.aKey===Ct)return this.last=0,this.a;if(this.bKey===Ct)return this.last=1,this.b},c.prototype.set=function(Ct,Q){this.last===0?(this.bKey=Ct,this.b=Q,this.last=1):(this.aKey=Ct,this.a=Q,this.last=0)};var p=new c,d=s(function(Ct){return a.toNumber(Ct)}),x=function(Ct){if(typeof Ct=="number"){if(Ct>=-16&&Ct<=16){var Q=l[Ct+16];return Q==null&&(Q=a.BigInt(Ct),l[Ct+16]=Q),Q}var Q=p.get(Ct);return Q==null&&(Q=a.BigInt(Ct),p.set(Ct,Q)),Q}return Ct},_=void 0,S=void 0,T=function(){_=a.BigInt(-9007199254740991),S=a.BigInt(9007199254740991)},A=function(Ct){return!a.lessThan(Ct,_)&&!a.greaterThan(Ct,S)?a.toNumber(Ct):Ct},R=s(function(Ct,Q){if(typeof Ct=="string"||typeof Q=="string")return Ct+Q;if(typeof Ct=="number"&&Ct===0)return Q;if(typeof Q=="number"&&Q===0)return Ct;var on=x(Ct),gn=x(Q),In=a.add(on,gn);return typeof Ct=="number"&&typeof Q=="number"?In:A(In)}),D=s(function(Ct,Q){if(typeof Ct=="number"&&Ct===0)return Z(Q);if(typeof Q=="number"&&Q===0)return Ct;var on=x(Ct),gn=x(Q),In=a.subtract(on,gn);return typeof Ct=="number"&&typeof Q=="number"?In:A(In)}),O=s(function(Ct,Q){if(typeof Ct=="number"&&Ct===0)return 0;if(typeof Ct=="number"&&Ct===1)return Q;if(typeof Ct=="number"&&Ct===-1)return a.unaryMinus(Q);if(typeof Q=="number"&&Q===0)return 0;if(typeof Q=="number"&&Q===1)return Ct;if(typeof Q=="number"&&Q===-1)return a.unaryMinus(Ct);var on=x(Ct),gn=x(Q);return a.multiply(on,gn)}),F=s(function(Ct,Q){if(typeof Ct=="number")return 0;if(typeof Q=="number"&&Q===1)return Ct;if(typeof Q=="number"&&Q===-1)return a.unaryMinus(Ct);var on=x(Ct),gn=x(Q);return A(a.divide(on,gn))}),z=s(function(Ct,Q){if(typeof Ct=="number")return Ct;if(typeof Q=="number"&&Q===1||typeof Q=="number"&&Q===-1)return 0;var on=x(Ct),gn=x(Q);return A(a.remainder(on,gn))}),j=s(function(Ct,Q){if(typeof Q=="number"){if(Q===0)return 1;if(Q===1)return Ct;if(Q===2)return O(Ct,Ct);if(typeof Ct=="number"&&Math.abs(Ct)>2&&Q>=0){if(Q>42&&Ct%2===0)return O(j(2,Q),j(Ct/2,Q));var on=Math.floor(Math.log(9007199254740991)/Math.log(Math.abs(Ct)+.5));if(on>=2)return O(Math.pow(Ct,Q%on),j(Math.pow(Ct,on),Math.floor(Q/on)))}}var gn=x(Ct),In=x(Q),dn=a.exponentiate(gn,In);return typeof Ct=="number"&&Math.abs(Ct)<=1?A(dn):dn}),Z=s(function(Ct){var Q=x(Ct);return a.unaryMinus(Q)}),W=s(function(Ct,Q){return typeof Ct=="number"||typeof Q=="number"?!1:a.equal(Ct,Q)}),J=s(function(Ct,Q){return typeof Ct=="number"?Ct<a.toNumber(Q):typeof Q=="number"?a.toNumber(Ct)<Q:a.lessThan(Ct,Q)}),en=s(function(Ct,Q){return typeof Ct=="number"?Ct>a.toNumber(Q):typeof Q=="number"?a.toNumber(Ct)>Q:a.greaterThan(Ct,Q)});function tn(){}tn.BigInt=function(Ct){if(typeof Ct=="number"||typeof Ct=="string"||typeof Ct=="bigint"){var Q=0+(typeof Ct=="number"?Ct:Number(Ct));if(Q>=-9007199254740991&&Q<=9007199254740991)return Q}return A(a.BigInt(Ct))},tn.asIntN=function(Ct,Q){return A(a.asIntN(Ct,a.BigInt(Q)))},tn.asUintN=function(Ct,Q){if(typeof Q=="number"&&Q>=0&&Ct>=0&&Ct<=53){var on=Math.pow(2,Ct);return Q-Math.floor(Q/on)*on}return A(a.asUintN(Ct,a.BigInt(Q)))},tn.toNumber=function(Ct){return typeof Ct=="number"?Ct:d(Ct)},tn.add=function(Ct,Q){if(typeof Ct=="number"&&typeof Q=="number"){var on=Ct+Q;if(on>=-9007199254740991&&on<=9007199254740991)return on}return R(Ct,Q)},tn.subtract=function(Ct,Q){if(typeof Ct=="number"&&typeof Q=="number"){var on=Ct-Q;if(on>=-9007199254740991&&on<=9007199254740991)return on}return D(Ct,Q)},tn.multiply=function(Ct,Q){if(typeof Ct=="number"&&typeof Q=="number"){var on=0+Ct*Q;if(on>=-9007199254740991&&on<=9007199254740991)return on}return O(Ct,Q)},tn.divide=function(Ct,Q){return typeof Ct=="number"&&typeof Q=="number"&&Q!==0?Ct===0?0:Ct>0&&Q>0||Ct<0&&Q<0?0+Math.floor(Ct/Q):0-Math.floor((0-Ct)/Q):F(Ct,Q)},tn.remainder=function(Ct,Q){return typeof Ct=="number"&&typeof Q=="number"&&Q!==0?0+Ct%Q:z(Ct,Q)},tn.unaryMinus=function(Ct){return typeof Ct=="number"?0-Ct:Z(Ct)},tn.equal=function(Ct,Q){return typeof Ct=="number"&&typeof Q=="number"?Ct===Q:W(Ct,Q)},tn.lessThan=function(Ct,Q){return typeof Ct=="number"&&typeof Q=="number"?Ct<Q:J(Ct,Q)},tn.greaterThan=function(Ct,Q){return typeof Ct=="number"&&typeof Q=="number"?Ct>Q:en(Ct,Q)},tn.notEqual=function(Ct,Q){return!tn.equal(Ct,Q)},tn.lessThanOrEqual=function(Ct,Q){return!tn.greaterThan(Ct,Q)},tn.greaterThanOrEqual=function(Ct,Q){return!tn.lessThan(Ct,Q)},tn.exponentiate=function(Ct,Q){if(typeof Ct=="number"&&typeof Q=="number"&&Q>=0&&(Q<53||Ct>=-1&&Ct<=1)){var on=0+Math.pow(Ct,Q);if(on>=-9007199254740991&&on<=9007199254740991)return on}return j(Ct,Q)},tn.signedRightShift=function(Ct,Q){return A(a.signedRightShift(x(Ct),x(Q)))},tn.leftShift=function(Ct,Q){if(typeof Q=="number"&&Q>=0){if(typeof Ct=="number"){var on=Q===0?Ct:Ct*Math.pow(2,Q);if(on>=-9007199254740991&&on<=9007199254740991)return on}return a.leftShift(x(Ct),x(Q))}return A(a.leftShift(x(Ct),x(Q)))},Symbol.hasInstance!=null&&Object.defineProperty(tn,Symbol.hasInstance,{value:function(Ct){return typeof Ct=="number"||Ct instanceof a}}),globalThis.SmallBigInt=tn,globalThis.JSBI=n?t:globalThis.JSBI||globalThis.BigInteger,a=globalThis.JSBI,T()})();function Matrix$1(t){this.a=t}Matrix$1.Zero=function(t,n){for(var a=new Array(n),s=0;s<n;s+=1)a[s]=Expression.ZERO;for(var l=new Array(t),u=0;u<t;u+=1)l[u]=a;return new Matrix$1(l)};Matrix$1.I=function(t){return Matrix$1.Zero(t,t).map(function(n,a,s){return a===s?Expression.ONE:Expression.ZERO})};Matrix$1.prototype.rows=function(){return this.a.length};Matrix$1.prototype.cols=function(){return this.a.length>0?this.a[0].length:0};Matrix$1.prototype.e=function(t,n){return this.a[t][n]};Matrix$1.prototype.isSquare=function(){return this.rows()>0&&this.rows()===this.cols()};Matrix$1.prototype.map=function(t){for(var n=this.rows(),a=this.cols(),s=new Array(n),l=-1;++l<n;){for(var u=new Array(a),c=-1;++c<a;){var p=t.call(void 0,this.e(l,c),l,c,this);u[c]=p.simplifyExpression()}s[l]=u}return new Matrix$1(s)};Matrix$1.prototype.transpose=function(){var t=this;return Matrix$1.Zero(t.cols(),t.rows()).map(function(n,a,s){return t.e(s,a)})};Matrix$1.prototype.scale=function(t){return this.map(function(n,a,s){return n.multiply(t)})};Matrix$1.prototype.multiply=function(t){var n=this;if(n.cols()!==t.rows())throw new RangeError("DimensionMismatchException");return Matrix$1.Zero(n.rows(),t.cols()).map(function(a,s,l){for(var u=t.rows(),c=-1;++c<u;){//! this code is used to show not simplified expressions
var p=n.e(s,c).multiply(t.e(c,l));a=c===0?p:a.add(p)}return a})};Matrix$1.prototype.add=function(t){var n=this;if(n.rows()!==t.rows()||n.cols()!==t.cols())throw new RangeError("MatrixDimensionMismatchException");return n.map(function(a,s,l){return a.add(t.e(s,l))})};Matrix$1.prototype.augment=function(t){if(this.rows()!==t.rows())throw new RangeError("NonSquareMatrixException");var n=this;return Matrix$1.Zero(n.rows(),n.cols()+t.cols()).map(function(a,s,l){return l<n.cols()?n.e(s,l):t.e(s,l-n.cols())})};Matrix$1.prototype.rowReduce=function(t,n,a,s){for(var l=this.rows(),u=this.cols(),c=new Array(l),p=-1;++p<l;)if(t===p){for(var d=new Array(u),x=s==null?this.e(t,a).divide(this.e(n,a)):void 0,_=-1;++_<u;){var S=void 0;s==null?S=this.e(t,_).subtract(x.multiply(this.e(n,_))):S=this.e(n,a).multiply(this.e(t,_)).subtract(this.e(t,a).multiply(this.e(n,_))).divide(s),d[_]=S.simplifyExpression()}c[p]=d}else c[p]=this.a[p];return new Matrix$1(c)};Matrix$1.prototype.swapRows=function(t,n,a){var s=this;return s.map(function(l,u,c){return u===t?s.e(n,c):u===n?a?s.e(t,c).negate():s.e(t,c):l})};var notEqualsZero=function(t,n){if(n!=null){//!update from 2018-16-07
return n.andZero(t).isFalse()}return!t.equals(Expression.ZERO)};Matrix$1.check=function(t,n,a,s,l){for(var u=a;u<s;u+=1)if(t!=="solving"||notEqualsZero(n.e(u,n.cols()-1),l)){for(var c=t==="solving"?n.cols()-1:t==="determinant"?n.cols():t==="inverse"?Math.floor(n.cols()/2):-1,p=0;p<c&&n.e(u,p).equals(Expression.ZERO);)p+=1;if(p===c)return u}return-1};Matrix$1.toRowEchelonStep=function(t,n,a,s,l,u,c){var p=void 0,d=void 0,x=0;if(s!==n&&(p=t,t=t.swapRows(n,s,u.usage==="determinant"),u.callback!=null&&u.callback({previousPivot:void 0,newMatrix:t,oldMatrix:p,type:u.usage==="determinant"?"swap-negate":"swap",targetRow:n,pivotRow:s,pivotColumn:a})),u.method===Matrix$1.GaussJordan&&(t.e(n,a).equals(Expression.ONE)||(p=t,d=Expression.ONE.divide(t.e(n,a)),t=t.map(function(S,T,A){return T!==n?S:S.multiply(d)}),u.callback!=null&&u.callback({previousPivot:void 0,newMatrix:t,oldMatrix:p,type:"divide",targetRow:n,pivotRow:n,pivotColumn:a}))),u.method===Matrix$1.Gauss||u.method===Matrix$1.GaussJordan){for(x=n;++x<t.rows();)if(!t.e(x,a).equals(Expression.ZERO)){p=t,t=t.rowReduce(x,n,a),u.callback!=null&&u.callback({previousPivot:void 0,newMatrix:t,oldMatrix:p,type:"reduce",targetRow:x,pivotRow:n,pivotColumn:a});var _=Matrix$1.check(u.usage,t,x,x+1,c);if(_!==-1)return{stoppedAtRow:_,matrix:t}}}if(u.method===Matrix$1.GaussMontante){for(p=t,x=-1;++x<t.rows();)x!==n&&(t=t.rowReduce(x,n,a,l));u.callback!=null&&u.callback({previousPivot:l,newMatrix:t,oldMatrix:p,type:"pivot",targetRow:-1,pivotRow:n,pivotColumn:a});var _=Matrix$1.check(u.usage,t,0,t.rows(),c);if(_!==-1)return{stoppedAtRow:_,matrix:t}}return{stoppedAtRow:-1,matrix:t}};Matrix$1.toRowEchelonBackSubstitution=function(t,n,a){if(a.method===Matrix$1.GaussJordan)for(;--n>=0;){for(var s=0;s<t.cols()&&t.e(n,s).equals(Expression.ZERO);)s+=1;if(s<t.cols()){for(var l=n;--l>=0;)if(!t.e(l,s).equals(Expression.ZERO)){var u=t;t=t.rowReduce(l,n,s),a.callback!=null&&a.callback({previousPivot:void 0,newMatrix:t,oldMatrix:u,type:"reduce",targetRow:l,pivotRow:n,pivotColumn:s})}}}return t};var isConditionValid=function(t,n){for(var a=0;a<n.rows();a++)for(var s=0;s<n.cols();s++){var l=n.e(a,s);if(!Polynomial._isIntegerLike(l)){if(Polynomial._isIntegerLike(l.getNumerator())){//!!! for performance
l=l.getDenominator().inverse()}if(t.andZero(l).isFalse()&&t.andNotZero(l).isFalse())return!1}}return!0};Matrix$1.Gauss="Gauss";Matrix$1.GaussJordan="Gauss-Jordan";Matrix$1.GaussMontante="Gauss-Montante";function ToRowEchelonOptions(t,n,a){if(n!=="determinant"&&n!=="inverse"&&n!=="solving"&&n!=="LU-decomposition"&&n!==""&&n!=="row-reduction")throw new RangeError;if(t!==Matrix$1.Gauss&&t!==Matrix$1.GaussJordan&&t!==Matrix$1.GaussMontante)throw new RangeError;this.method=t,this.usage=n,this.callback=a}Matrix$1.ToRowEchelonOptions=ToRowEchelonOptions;var COLUMN_LOOP=0,ZERO=1,NOT_ZERO=2;Matrix$1.prototype.toRowEchelon=function(t,n,a){var s=new Matrix$1.ToRowEchelonOptions(t,n,a);return this.toRowEchelonInternal(s,0,-1,-1,Expression.ONE,COLUMN_LOOP,void 0)};Matrix$1.prototype.toRowEchelonXXX=function(t,n,a,s){var l=new Matrix$1.ToRowEchelonOptions(t,n,a);return this.toRowEchelonInternal(l,0,-1,-1,Expression.ONE,COLUMN_LOOP,s)};Matrix$1.prototype.toRowEchelonInternal=function(t,n,a,s,l,u,c){var p=this;c!=null&&!c.isTrue()&&(p=p.map(function(O,F,z){return c.updateExpression(O)}),l=c.updateExpression(l));var d=Matrix$1.check(t.usage,p,0,p.rows(),c);if(d!==-1)return{stoppedAtRow:d,matrix:p,condition:c};for(;;)switch(u){case COLUMN_LOOP:if(a+=1,a>=p.cols())return p=Matrix$1.toRowEchelonBackSubstitution(p,n,t),{stoppedAtRow:-1,matrix:p,condition:c};if(a>n&&(t.usage==="determinant"||t.usage==="inverse"))return a>=Math.floor(p.cols()/2)&&t.usage==="inverse"?(p=Matrix$1.toRowEchelonBackSubstitution(p,n,t),{stoppedAtRow:-1,matrix:p,condition:c}):{stoppedAtRow:n,matrix:p,condition:c};s=n-1,u=ZERO;break;case ZERO:if(c==null)s+=1,s<p.rows()?p.e(s,a).equals(Expression.ZERO)?u=ZERO:u=NOT_ZERO:u=COLUMN_LOOP;else{s>=n&&(p=n>=p.rows()||p.e(n,a).equals(Expression.ZERO)?p:p.map(function(F,z,j){return c.updateExpression(F)}),l=c.updateExpression(l));var x=!1;if(s===n-1){//!
for(var _=n;_<p.rows()&&!((c.andZero(p.e(_,a)).isFalse()||t.usage==="LU-decomposition")&&!p.e(_,a).equals(Expression.ZERO));)_+=1;_<p.rows()&&(s=_,x=!0)}//!
if(x)u=NOT_ZERO;else if(s+=1,s<p.rows()){var S=p.e(s,a),T=c.andNotZero(S),A=c.andZero(S);if(!A.isFalse()){//!new 2020-01-03
if(!isConditionValid(A,p)){debugger;A=Condition.FALSE;//!!!
c=T;//!
}//!
}if(A.isFalse())u=NOT_ZERO;else if(T.isFalse())u=ZERO;else{if(t.usage==="row-reduction"){var D=Matrix$1.toRowEchelonStep(p,n,a,s,l,Object.assign({},t,{callback:null}),c),R=D.matrix.slice(s+1,p.rows(),a,p.cols()).map(function(z,j,Z){return A.updateExpression(z)});if(R.eql(Matrix$1.Zero(R.rows(),R.cols())))return p.toRowEchelonInternal(t,n,a,s,l,NOT_ZERO,c)}return{matrix:p,c1:T,a1:function(){return p.toRowEchelonInternal(t,n,a,s,l,NOT_ZERO,T)},c2:A,a2:function(){return p.toRowEchelonInternal(t,n,a,s,l,ZERO,A)}}}}else u=COLUMN_LOOP}break;case NOT_ZERO:var D=Matrix$1.toRowEchelonStep(p,n,a,s,l,t,c),d=D.stoppedAtRow;if(p=D.matrix,d!==-1)return{stoppedAtRow:d,matrix:p,condition:c};l=p.e(n,a),n+=1,u=COLUMN_LOOP;break}};Matrix$1.prototype.determinant=function(){var t=this.rows();if(!this.isSquare()||t===0)throw new RangeError("NonSquareMatrixException");var n,a,s,n=this.toRowEchelon(Matrix$1.GaussMontante,"determinant",void 0),a=n.stoppedAtRow,s=n.matrix;return a!==-1?Expression.ZERO:s.e(t-1,t-1)};Matrix$1.prototype.rank=function(){for(var t=this.toRowEchelon(Matrix$1.GaussMontante,"",void 0).matrix,n=0,a=0,s=0;a<t.rows();){for(;s<t.cols()&&t.e(a,s).equals(Expression.ZERO);)s+=1;s<t.cols()&&(n+=1),a+=1}return n};Matrix$1.prototype.inverse=function(){if(!this.isSquare())throw new RangeError("NonSquareMatrixException");if(this.rows()===2){var t=this.e(0,0),n=this.e(0,1),a=this.e(1,0),s=this.e(1,1),l=t.multiply(s).subtract(n.multiply(a));if(l.equals(Expression.ZERO))throw new RangeError("SingularMatrixException");return Matrix$1.Zero(this.rows(),this.rows()).map(function(c,p,d){return(p===0?d===0?s:n.negate():d===0?a.negate():t).divide(l)})}var u=this.augment(Matrix$1.I(this.rows()));return u=u.toRowEchelon(Matrix$1.GaussMontante,"inverse",void 0).matrix,Matrix$1.Zero(u.rows(),u.rows()).map(function(c,p,d){var x=u.e(p,p);if(x.equals(Expression.ZERO))throw new RangeError("SingularMatrixException");var _=u.e(p,d+u.rows());return x.equals(Expression.ONE)?_:_.divide(x)})};Matrix$1.prototype.toString=function(t){var n="",a=this.rows(),s=this.cols();if(a===0&&s===0)throw new RangeError;var l=-1;for(n+="{";++l<a;){l!==0&&(n+=","),n+="{";for(var u=-1;++u<s;)u!==0&&(n+=","),n+=this.e(l,u).toString(t);n+="}"}return n+="}",n};Matrix$1.prototype.negate=function(){return this.map(function(t,n,a){return t.negate()})};Matrix$1.prototype.subtract=function(t){return this.add(t.negate())};Matrix$1.prototype.getElements=function(){for(var t=this.rows(),n=this.cols(),a=new Array(t),s=0;s<t;s+=1){for(var l=new Array(n),u=0;u<n;u+=1)l[u]=this.e(s,u).toString();a[s]=l}return a};Matrix$1.prototype.slice=function(t,n,a,s){var l=this;return Matrix$1.Zero(n-t,s-a).map(function(u,c,p){return l.e(c+t,p+a)})};Matrix$1.prototype.isExact=function(){for(var t=this.rows(),n=this.cols(),a=0;a<t;a+=1)for(var s=0;s<n;s+=1)if(!this.e(a,s).isExact())return!1;return!0};Matrix$1.prototype.eql=function(t){var n=this;if(n.rows()!==t.rows()||n.cols()!==t.cols())return!1;for(var a=0;a<n.rows();a+=1)for(var s=0;s<n.cols();s+=1)if(!n.e(a,s).equals(t.e(a,s)))return!1;return!0};Matrix$1.prototype.pow=function(t){if(!(t>=0&&t<=Number.MAX_SAFE_INTEGER))throw new RangeError;var n=function(a,s,l){return s<1?l:2*Math.floor(s/2)!==s?n(a,s-1,l.multiply(a)):n(a.multiply(a),Math.floor(s/2),l)};return n(this,t,Matrix$1.I(this.rows()))};Matrix$1.split=function(t){t=t.replace(/\b(sin|cos)\x20/g,"$1");var n=[],a=t;if(/^\s*\[[^\[\]]*\]\s*$/.exec(a)!=null){//!
a=a.replace(/\[/g," "),a=a.replace(/\]/g," ")}//!
if(a.replace(/^\s+|\s+$/g,"")!==""){a=a.replace(/;/g,`
`),a=a.replace(/\r/g,`
`);var s=[];n.push(s);for(var l=0,u=void 0;(u=/^\s*\S+/.exec(a.slice(l)))!=null;){var c=u[0];c.indexOf(`
`)!==-1&&s.length!==0&&(s=[],n.push(s),c=c.replace(/\n/g," ")),s.push(c),l+=c.length}}//!new 2023-05-07
for(var p=0;p<n.length;p++)n[p].length===1&&/,/.test(n[p][0])&&(n[p]=n[p][0].split(","));return n};Matrix$1.padRows=function(t,n){for(var a=t.length,s=0,l=0;l<t.length;l+=1)s=Math.max(s,t[l].length);for(var u=new Array(a),c=0;c<a;c+=1){for(var p=t[c],d=new Array(s),x=0;x<s;x+=1)d[x]=x<p.length?n!=null?n(p[x]):p[x]:Expression.ZERO;u[c]=d}return new Matrix$1(u)};Matrix$1.solveByGaussNext=function(t,n){for(var a=new Array(t.cols()-1),s=0;s<t.cols()-1;s+=1)a[s]=-1;for(var l=t.rows()-1;l>=0;l-=1){for(var u=0;u<t.cols()-1&&t.e(l,u).equals(Expression.ZERO);)u+=1;if(u<t.cols()-1){a[u]=l;for(var c=t,s=u+1;s<t.cols()-1;s+=1)if(!t.e(l,s).equals(Expression.ZERO)){var p=a[s];p!==-1&&(t=t.rowReduce(l,p,s))}var d=t;if(!t.e(l,u).equals(Expression.ONE)){var x=t.e(l,u);t=t.map(function(_,S,T){return S===l?_.divide(x):_})}n!=null&&n(t,c,d,l,u)}}return t};Matrix$1.getPivotRow=function(t,n){for(var a=t.rows()-1;a>=0&&t.e(a,n).equals(Expression.ZERO);)a-=1;if(a>=0){for(var s=n-1;s>=0&&t.e(a,s).equals(Expression.ZERO);)s-=1;if(s<0)return a}return-1};Matrix$1.getSolutionSet=function(t){for(var n={basisVectors:[],variables:[]},a=0;a<t.cols()-1;a+=1)if(Matrix$1.getPivotRow(t,a)===-1){for(var s=new Array(t.cols()-1),l=0;l<t.cols()-1;l+=1){var u=Matrix$1.getPivotRow(t,l);s[l]=u!==-1?t.e(u,a).negate():l===a?Expression.ONE:Expression.ZERO}var c=new Vector(s);n.basisVectors.push(c),n.variables.push(a)}return n};Matrix$1.prototype.minorMatrix=function(t,n){var a=this;return Matrix$1.Zero(this.rows()-1,this.cols()-1).map(function(s,l,u){return a.e(l<t?l:l+1,u<n?u:u+1)})};Matrix$1.toRowEchelonWithCallback=function(t,n,a,s,l){var u=t.toRowEchelonXXX(n,a,s,Condition.TRUE),c=function(p){p.c1==null&&p.c2==null?l(p):(c(p.a1()),c(p.a2()))};c(u)};Matrix$1.prototype.isDiagonal=function(){return this.eql(this.map(function(t,n,a){return n!==a?Expression.ZERO:t}))};Matrix$1.prototype.isScalar=function(){var t=this;return this.eql(this.map(function(n,a,s){return a!==s?Expression.ZERO:t.e(0,0)}))};Matrix$1.prototype.isNilpotent=function(){var t=this.map(function(n,a,s){return s<=a?Expression.ZERO:n});if(this.eql(t)){//! This method only tests if it nilpotent based on a property and so may return false for the positive result
return!0}return this.pow(this.cols()).eql(Matrix$1.Zero(this.cols(),this.cols()))};Matrix$1.prototype.isJordanMatrix=function(){var t=this;return this.eql(this.map(function(n,a,s){return a===s?n:s===a+1&&t.e(a,a).equals(t.e(a+1,a+1))&&!t.e(a,s).equals(Expression.ZERO)?Expression.ONE:Expression.ZERO}))};Matrix$1.prototype.isZero=function(){return this.eql(Matrix$1.Zero(this.rows(),this.cols()))};function Vector(t){this.elements=t}Vector.prototype.e=function(t){return this.elements[t]};Vector.prototype.dimensions=function(){return this.elements.length};Vector.prototype.rows=function(){return this.dimensions()};Vector.prototype.cols=function(){return 1};Vector.prototype.isExact=function(){for(var t=0;t<this.dimensions();t+=1)if(!this.e(t).isExact())return!1;return!0};Vector.prototype.toString=function(t){return Matrix$1.prototype.toString.call(this,t)};Vector.prototype.dot=function(t){let n=Expression.ZERO;for(let s=0;s<Math.max(this.dimensions(),t.dimensions());s+=1){var a=this.e(s).multiply(t.e(s).complexConjugate());n=n===Expression.ZERO?a:n.add(a)}return n};Vector.prototype.toUnitVector=function(){var t=this.dot(this).squareRoot();return this.scale(t.inverse())};Vector.prototype.scale=function(t){return new Vector(this.elements.map(n=>t.multiply(n)))};Vector.prototype.subtract=function(t){if(this.dimensions()!==t.dimensions())throw new RangeError("MatrixDimensionMismatchException");const n=this.dimensions(),a=new Array(n);for(let s=0;s<n;s+=1)a[s]=this.e(s).subtract(t.e(s));return new Vector(a)};Vector.prototype.eql=function(t){if(this.dimensions()!==t.dimensions())throw new RangeError("MatrixDimensionMismatchException");const n=this.dimensions();for(var a=0;a<n;a+=1)if(!this.e(a).equals(t.e(a)))return!1;return!0};Vector.Zero=function(t){return new Vector(new Array(t).fill(Expression.ZERO))};Matrix$1.Vector=Vector;Matrix$1.prototype.row=function(t){const n=new Array(this.cols());for(let a=0;a<this.cols();a+=1)n[a]=this.e(t,a);return new Vector(n)};Matrix$1.prototype.col=function(t){const n=new Array(this.rows());for(let a=0;a<this.rows();a+=1)n[a]=this.e(a,t);return new Vector(n)};function Heap(t){this.data=[],this.compareTo=t}Heap.prototype.push=function(t){var n=this.data,a=this.compareTo;n.push(t);for(var s=n.length,l=s-1,u=n[l],c=-1;l>0&&a(u,n[c=Math.floor((l-1)/2)])<0;)n[l]=n[c],l=c;n[l]=u};Heap.prototype.pop=function(){var t=this.data,n=this.compareTo,a=t.length;if(a!==0){if(a===1)return t.pop();var s=t[0];t[0]=t.pop(),--a;var l=0;if(l<a){var u=t[l];do{var c=a,p=u,d=l*2;++d<a&&n(t[d],p)<0&&(c=d,p=t[c]),++d<a&&n(t[d],p)<0&&(c=d,p=t[c]),t[l]=p,l=c}while(l<a)}return s}};Heap.prototype.peek=function(){var t=this.data;return t.length>0?t[0]:void 0};Heap.prototype.size=function(){var t=this.data;return t.length};Heap.prototype.replace=function(t){return this.data.push(t),this.pop()};const DefaultYField={ONE:1,sub:function(t,n){return t-n},mul:function(t,n){return t*n},div:function(t,n){return t/n},scale:function(t,n){return t*Number(n)}};let yField=DefaultYField;function NewtonInterpolation(){let t=function(){let d=[],x=[],_=!0,S=yField.ONE,T=yField.ONE,A=!0;const R={next:function(D){for(;;){if(A)return A=!1,{value:T,done:!1};const[O,F]=D;if(_&&d.length>=2&&d[d.length-1]-d[d.length-2]!==O-d[d.length-1]){const j=d[d.length-1]-d[d.length-2];S=yField.ONE;for(let Z=1;Z<x.length;Z+=1)S=yField.scale(S,j*Z),x[Z]=yField.div(x[Z],S);_=!1}let z=F;for(let j=0;j<x.length;j+=1){let Z=yField.sub(z,x[j]);_||(Z=yField.div(Z,yField.scale(yField.ONE,O-d[d.length-1-j]))),x[j]=z,z=Z}if(x.push(z),d.push(O),T=x[x.length-1],_&&d.length>=2){const j=x.length-1,Z=d[d.length-1]-d[d.length-2];S=yField.scale(S,Z*j),T=yField.div(T,S)}return{value:T,done:!1}}}};return R[globalThis.Symbol.iterator]=function(){return this},R};const n=yField.sub(yField.ONE,yField.ONE),a=yField.ONE;let s=t();s.next();let l=[a],u=[],c=!0;const p={next:function(d){for(;;){if(c)return c=!1,{value:u,done:!1};const[x,_]=d,S=yField.sub(n,s.next([x,_]).value);u.push(n);for(let T=l.length-1;T>=0;T-=1)u[T]=yField.sub(u[T],yField.mul(l[T],S));l.push(n);for(let T=l.length-1;T>=0;T-=1)l[T]=yField.sub(T>=1?l[T-1]:n,yField.scale(l[T],x));return{value:u,done:!1}}}};return p[globalThis.Symbol.iterator]=function(){return this},p}NewtonInterpolation.setField=function(t){yField=t||DefaultYField};globalThis.NewtonInterpolation=NewtonInterpolation;var seedrandom$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var seedrandom=seedrandom$1.exports,hasRequiredSeedrandom;function requireSeedrandom(){return hasRequiredSeedrandom||(hasRequiredSeedrandom=1,function(t){(function(n,a,s){var l=256,u=6,c=52,p="random",d=s.pow(l,u),x=s.pow(2,c),_=x*2,S=l-1,T;function A(Z,W,J){var en=[];W=W==!0?{entropy:!0}:W||{};var tn=F(O(W.entropy?[Z,j(a)]:Z??z(),3),en),Ct=new R(en),Q=function(){for(var on=Ct.g(u),gn=d,In=0;on<x;)on=(on+In)*l,gn*=l,In=Ct.g(1);for(;on>=_;)on/=2,gn/=2,In>>>=1;return(on+In)/gn};return Q.int32=function(){return Ct.g(4)|0},Q.quick=function(){return Ct.g(4)/4294967296},Q.double=Q,F(j(Ct.S),a),(W.pass||J||function(on,gn,In,dn){return dn&&(dn.S&&D(dn,Ct),on.state=function(){return D(Ct,{})}),In?(s[p]=on,gn):on})(Q,tn,"global"in W?W.global:this==s,W.state)}function R(Z){var W,J=Z.length,en=this,tn=0,Ct=en.i=en.j=0,Q=en.S=[];for(J||(Z=[J++]);tn<l;)Q[tn]=tn++;for(tn=0;tn<l;tn++)Q[tn]=Q[Ct=S&Ct+Z[tn%J]+(W=Q[tn])],Q[Ct]=W;(en.g=function(on){for(var gn,In=0,dn=en.i,ix=en.j,Cn=en.S;on--;)gn=Cn[dn=S&dn+1],In=In*l+Cn[S&(Cn[dn]=Cn[ix=S&ix+gn])+(Cn[ix]=gn)];return en.i=dn,en.j=ix,In})(l)}function D(Z,W){return W.i=Z.i,W.j=Z.j,W.S=Z.S.slice(),W}function O(Z,W){var J=[],en=typeof Z,tn;if(W&&en=="object")for(tn in Z)try{J.push(O(Z[tn],W-1))}catch{}return J.length?J:en=="string"?Z:Z+"\0"}function F(Z,W){for(var J=Z+"",en,tn=0;tn<J.length;)W[S&tn]=S&(en^=W[S&tn]*19)+J.charCodeAt(tn++);return j(W)}function z(){try{var Z;return T&&(Z=T.randomBytes)?Z=Z(l):(Z=new Uint8Array(l),(n.crypto||n.msCrypto).getRandomValues(Z)),j(Z)}catch{var W=n.navigator,J=W&&W.plugins;return[+new Date,n,J,n.screen,j(a)]}}function j(Z){return String.fromCharCode.apply(0,Z)}if(F(s.random(),a),t.exports){t.exports=A;try{T=require$$0}catch{}}else s["seed"+p]=A})(typeof self<"u"?self:seedrandom,[],Math)}(seedrandom$1)),seedrandom$1.exports}requireSeedrandom();function combinations(t,n){const a=t.length;let s=new Array(n+1).fill(-1),l=new Array(n).fill(void 0),u=0,c={next:function(){for(;u>=0;)if(u<n){const p=s[u];p<a-n+u?(s[u]=p+1,l[u]=t[p+1],u+=1,s[u]=p+1):u-=1}else return u-=1,{value:l.slice(0),done:!1};return{value:void 0,done:!0}}};return c[globalThis.Symbol.iterator]=function(){return this},c}function modulo(t,n){return t-Math.floor(t/n)*n}function check(t){if(typeof t!="number"||Math.abs(t)>Number.MAX_SAFE_INTEGER)throw new RangeError}function schoolbook(t,n){const a=new Array(t.length===0||n.length===0?0:t.length-1+n.length-1+1);for(let s=0;s<a.length;s+=1){const l=Math.max(0,s-(n.length-1)),u=Math.min(s,t.length-1);let c=t[l]*n[s-l];for(let p=l+1;p<=u;p+=1)c+=t[p]*n[s-p];a[s]=c}return a}function absMax(t){let n=0;for(let a=0;a<t.length;a+=1)n=Math.max(n,Math.abs(t[a]));return n}function multiply(t,n){return check(absMax(t)*absMax(n)*Math.min(t.length,n.length)),schoolbook(t,n)}function IntPolynomial(t){let n=t.length;for(;n>0&&t[n-1]==0;)n-=1;t.length=n,check(absMax(t)),this.coefficients=t}IntPolynomial.prototype.add=function(t){const n=this.coefficients,a=t.coefficients,s=new Array(Math.max(n.length,a.length));for(let l=0;l<s.length;l+=1)l<n.length&&l<a.length?s[l]=n[l]+a[l]:l<n.length?s[l]=n[l]:s[l]=a[l];return new IntPolynomial(s)};IntPolynomial.prototype.subtract=function(t){return this.add(t.negate())};IntPolynomial.prototype.multiply=function(t){const n=this.coefficients,a=t.coefficients;return new IntPolynomial(multiply(n,a))};IntPolynomial.prototype.divideAndRemainderModP=function(t,n){const a=this.coefficients,s=t.coefficients;if(a.length<s.length)return{quotient:new IntPolynomial([]),remainder:this.mod(n)};if(s.length===0)throw new RangeError;const l=s[s.length-1];if(l!=1)throw new RangeError;check(n*n*s.length);const u=new Array(a.length);for(let x=0;x<a.length;x+=1)u[x]=a[x];let c=u.length-1;const p=new Array(a.length-s.length+1),d=l-l;for(let x=0;x<p.length;x+=1)p[x]=d;for(;c>=s.length-1;){const x=c-s.length+1,_=modulo(u[c],n);if(p[x]=_,_!=0)if(_==1)for(let S=0;S<s.length;S+=1)u[S+x]-=s[S];else for(let S=0;S<s.length;S+=1)u[S+x]-=_*s[S];for(;c>=0&&modulo(u[c],n)==0;)u[c]=d,c-=1}for(let x=0;x<=c;x+=1)u[x]=modulo(u[x],n);return{quotient:new IntPolynomial(p),remainder:new IntPolynomial(u)}};IntPolynomial.prototype.negate=function(t){return new IntPolynomial(this.coefficients.map(n=>n-n-n))};IntPolynomial.prototype.scale=function(t){return new IntPolynomial(this.coefficients.map(n=>n*t))};IntPolynomial.prototype.getDegree=function(){return this.coefficients.length-1};IntPolynomial.prototype.getLeadingCoefficient=function(){if(this.coefficients.length===0)throw new RangeError;return this.coefficients[this.coefficients.length-1]};IntPolynomial.prototype.getCoefficient=function(t){if(t>=this.coefficients.length)throw new RangeError;return this.coefficients[t]};IntPolynomial.prototype.derive=function(t){let n=new Array(this.coefficients.length-1);for(let a=0;a<n.length;a+=1)n[a]=(a+1)*this.coefficients[a+1];return new IntPolynomial(n)};IntPolynomial.prototype.mod=function(t){return new IntPolynomial(this.coefficients.map(n=>modulo(n,t)))};IntPolynomial.prototype.toString=function(){let t="",n=this.coefficients;for(let a=n.length-1;a>=0;a-=1)t+=n[a]>=0&&a!==n.length?"+":"",t+=n[a].toString(),a===1?t+="x":a!==0&&(t+="x^",t+=a);return t};IntPolynomial.from=function(t){return new IntPolynomial(t)};function toInt(t,n){return n instanceof Expression.Integer?Expression.Integer.fromBigInt(t):t}function fromInt(t){return t instanceof Expression.Integer?t:Expression.Integer.fromBigInt(t)}function toIntPolynomial(t,n){if(n instanceof Expression.Integer)return t.mod(n);for(var a=Expression.Integer.fromBigInt(n),s=new Array(t.getDegree()+1),l=0;l<s.length;l+=1)s[l]=t.getCoefficient(l).modulo(a).toBigInt();return IntPolynomial.from(s)}function fromIntPolynomial(t){for(var n=new Array(t.getDegree()+1),a=0;a<n.length;a+=1)n[a]=Expression.Integer.fromBigInt(t.getCoefficient(a));return Polynomial$1.from(n)}const isPrime$2=primeFactor._isPrime;function ExtendedEuclideanAlgorithm(t,n,a){t=t.mod(a),n=n.mod(a);let[s,l]=[t,n];const u=Polynomial$1.of(Expression.ZERO),c=Polynomial$1.of(a.divide(a));let[p,d]=[c,u],[x,_]=[u,c];for(;l.getDegree()>=0;){const D=l.getLeadingCoefficient().modInverse(a),O=s.scale(D).mod(a).divideAndRemainderModP(l.scale(D).mod(a),a),F=O.quotient;[s,l]=[l,O.remainder.scale(l.getLeadingCoefficient()).mod(a)],[p,d]=[d,p.subtract(F.multiply(d)).mod(a)],[x,_]=[_,x.subtract(F.multiply(_)).mod(a)]}const S=s.getLeadingCoefficient().modInverse(a),T=s.scale(S).mod(a),A=p.scale(S).mod(a),R=x.scale(S).mod(a);return{U:A,V:R,gcd:T}}function modPow(t,n,a,s){let l=t,u=null;for(;!n.equals(Expression.ZERO);)n.remainder(Expression.TWO).equals(Expression.ZERO)?(n=n.truncatingDivide(Expression.TWO),l=l.multiply(l).mod(s).divideAndRemainderModP(a,s).remainder):(n=n.subtract(Expression.ONE),u==null?u=l:u=u.multiply(l).mod(s).divideAndRemainderModP(a,s).remainder);return u}function distinctDegreeFactorization(t,n){t=t.mod(n);let a=1;const s=[];let l=t;l=toMonic(l,n);const u=n,c=t.constructor.from([toInt(0,n),toInt(1,n)]);let p=modPow(c,fromInt(u),l,u);for(;l.getDegree()>=2*a;){const d=p.subtract(c).divideAndRemainderModP(l,u).remainder,x=gcdOfPolynomialsOverFiniteField(l,d,u);x.getDegree()!==0&&(s.push({factor:x,degree:a}),l=l.divideAndRemainderModP(x,u).quotient),a=a+1,p=modPow(p,fromInt(u),l,u)}return l.getDegree()>0&&s.push({factor:l,degree:l.getDegree()}),s.length===0&&s.push({factor:t,degree:1}),s}function randomBigInt0(t,n=Math.random){if(console.assert(Math.floor(t)===t),t<=52)return Math.floor(n()*2**t);const a=Math.ceil(t/(2*52))*52;return(BigInt(randomBigInt0(t-a,n))<<BigInt(a))+BigInt(randomBigInt0(a,n))}function randomBigInt(t,n=Math.random){if(Number(t)<=2**52)return Math.floor(n()*Number(t));var a=Expression.Integer.fromBigInt(t).bitLength();return BigInt(randomBigInt0(a,n))*BigInt(t)>>BigInt(a)}function CantorZassenhausAlgorithm(t,n,a){t=t.mod(n),t=toMonic(t,n);const s=t.getDegree(),l=a,u=s/l,c=n;let p=[];p.push(t);const d=Math.seedrandom!=null?new Math.seedrandom("hello."):Math.random;for(;p.length<u;){const x=t.constructor.from(new Array(s).fill(c).map(R=>toInt(randomBigInt(fromInt(R).toBigInt(),d),R))),_=t.constructor.from([toInt(1,n)]),S=fromInt(c)._pow(l).subtract(Expression.ONE).truncatingDivide(Expression.TWO),T=modPow(x,S,t,c).subtract(_).divideAndRemainderModP(t,c).remainder,A=[];for(const R of p){const D=gcdOfPolynomialsOverFiniteField(T,R,c);D.getDegree()!==0&&D.getDegree()!==R.getDegree()?(A.push(D),A.push(R.divideAndRemainderModP(D,c).quotient)):A.push(R)}p=A}return p}function factorizeOverTheFiniteField(t,n){if(!isFactorizationOverZpSquareFree(t,n))throw new RangeError("implemented only for square-free polynomials");let a=[];const s=distinctDegreeFactorization(t,n);for(const l of s){const u=CantorZassenhausAlgorithm(l.factor,n,l.degree);a=a.concat(u)}return a}function toMonic(t,n){if(t.getDegree()<0)return t;const a=toInt(fromInt(t.getLeadingCoefficient()).modInverse(fromInt(n)).toBigInt(),n);return t.scale(a).mod(n)}function gcdOfPolynomialsOverFiniteField(t,n,a){for(t=t.mod(a),n=n.mod(a),n=toMonic(n,a);n.getDegree()>=0;){let s=t.divideAndRemainderModP(n,a).remainder;s=toMonic(s,a),t=n,n=s}return t}function _gcdOfPolynomialsOverFiniteField0(t,n,a){return fromIntPolynomial(gcdOfPolynomialsOverFiniteField(toIntPolynomial(t,a),toIntPolynomial(n,a),a))}function isFactorizationOverZpSquareFree(t,n){const a=t;return gcdOfPolynomialsOverFiniteField(a,a.derive().mod(n),n).getDegree()===0}function factorizeOverTheIntegers(t,n=!0){const a=t;let s=null,l=null,u=null,c=!0,p=0,d=null,x=0,_=0,S=1,T=null;const A={next:function(){if(t.getDegree()===0)return{value:null,done:!0};for(;t.getDegree()>1&&t.getCoefficient(0).equals(Expression.ZERO);){const j=Polynomial$1.of(Expression.ZERO,Expression.ONE);return t=t.divideAndRemainder(j,"undefined").quotient,{value:j,done:!1}}if(t.getCoefficient(0).abs().bitLength()-t.getLeadingCoefficient().abs().bitLength()<-42){s==null&&(s=factorizeOverTheIntegers(t._exponentiateRoots(-1),n));const j=s.next().value;return j!=null?{value:j._exponentiateRoots(-1),done:!1}:{value:null,done:!0}}if(t.isEven()&&a.getDegree()>=4){l==null&&(l=factorizeOverTheIntegers(t._exponentiateRoots(2),n));const j=l.next().value;if(j!=null){const Z=j._exponentiateRoots(.5);return t=t.divideAndRemainder(Z,"undefined").quotient,{value:Z,done:!1}}}function R(j){return j-Math.log2(Math.sqrt(Math.PI*Math.ceil(j/2)))}function D(j){return R(j.getDegree())+j._log2hypot()}function O(j){return D(j)*.5}const F=function(j){return c?O(j):D(j)},z=function(j){let Z=j,W=Z;do{do Z=Expression.Integer.fromBigInt(Z).add(Expression.TWO).toBigInt();while(!isPrime$2(Z));n?W=Z:W=Expression.Integer.fromBigInt(Z)}while(t.getLeadingCoefficient().remainder(Expression.Integer.fromBigInt(Z)).equals(Expression.ZERO)||!isFactorizationOverZpSquareFree(toIntPolynomial(t,W),W));return W};if(d==null){const j=1+F(t.scale(t.getLeadingCoefficient().abs()));n?p=z(1):p=z(Expression.TWO._pow(Math.ceil(j)).add(Expression.ONE).toBigInt());const Z=n?2:0;if(Z!==0){let W=p,J=1/0;for(let en=0;en<Z&&J>1;en+=1){let tn=0;const Ct=distinctDegreeFactorization(toIntPolynomial(t,p),p);for(const Q of Ct)console.assert(Q.factor.getDegree()%Q.degree===0),tn+=Q.factor.getDegree()/Q.degree;J>tn&&(W=p,J=tn),p=z(p)}p=W}if(d=factorizeOverTheFiniteField(toIntPolynomial(t,p),p).map(W=>n?fromIntPolynomial(W):W),n&&d.length>15&&(c=!1),n){const W=Math.ceil(j/Math.log2(p)),J=Expression.Integer.fromNumber(p);d[d.length-1]=d[d.length-1].scale(t.getLeadingCoefficient().modulo(J)).mod(J),d=HenselLifting(t,d,J,W),x=J._pow(W),d=d.map(en=>en.scale(en.getLeadingCoefficient().modulo(x).modInverse(x)).mod(x))}else x=p}//!new 2022-07-27
if(t.isEven()&&a.getDegree()>=4){if(u==null){for(let j=0;j<d.length;j+=1)if(d[j]!=null){d[j].mod(x);const Z=d[j]._scaleRoots(Expression.ONE.negate()).mod(x);let W=!1;for(let J=j+1;J<d.length&&!W;J+=1)d[J]!=null&&d[J].mod(x).equals(Z)&&(d[J]=null,W=!0);if(!W)return{value:null,done:!0}}d=d.filter(j=>j!=null);for(let j=0;j<Math.pow(2,d.length-1)&&u==null;j+=1){const Z=d.map((J,en)=>Math.floor(j/2**en)%2===0?J:J._scaleRoots(Expression.ONE.negate()));let W=!0;{const J=t.getLeadingCoefficient();let en=Expression.ZERO,tn=Expression.ZERO,Ct=J;for(const on of Z){const gn=on.getCoefficient(2),In=on.getCoefficient(1),dn=on.getCoefficient(0);en=en.multiply(dn).add(tn.multiply(In)).add(Ct.multiply(gn)).modulo(x),tn=tn.multiply(dn).add(Ct.multiply(In)).modulo(x),Ct=Ct.multiply(dn).modulo(x)}let Q=Polynomial$1.of(Ct,tn,en).mod2(x);Q=Q.multiply(Q._scaleRoots(Expression.ONE.negate())),W=Q.getCoefficient(2).abs().equals(t.getCoefficient(2).multiply(t.getLeadingCoefficient()).abs())}if(W){const J=productModQ(Z,x).scale(t.getLeadingCoefficient()).mod2(x).primitivePart(),en=J._scaleRoots(Expression.ONE.negate());J.multiply(en).equals(t)&&(u=[],u.push(J),u.push(en))}}}if(u!=null)for(;u.length>0;)return{value:u.pop(),done:!1};return{value:null,done:!0}}//!!! (number of factors depends on the choise of prime numbers)
for(;S<=(c?d.length-1:Math.floor(d.length/2));S+=1){T=combinations(d,S);let j=null;for(;(j=T.next().value)!=null;){_+=1;const Z=t.getLeadingCoefficient();let W=Z;for(const J of j)W=W.multiply(J.getCoefficient(0)).modulo(x);if(W=Polynomial$1.of(W).mod2(x).getCoefficient(0),t.getCoefficient(0).multiply(Z).remainder(W).equals(Expression.ZERO)){let J=productModQ(j,x);console.assert(J.getLeadingCoefficient().equals(Expression.ONE)),J=J.scale(Z),J=J.mod2(x),console.assert(J.getDegree()<t.getDegree());const en=t.scale(Z).divideAndRemainder(J,"undefined");if(en!=null&&en.remainder.getDegree()<0){J=J.primitivePart(),d=d.filter(tn=>j.indexOf(tn)===-1),T=combinations(d,S);//!?
return t=en.quotient,_>16&&console.debug(_),{value:J,done:!1}}}}}if(_>16&&console.debug(_),a.getDegree()>t.getDegree()){const j=t.primitivePart();return t=Polynomial$1.of(t.getContent()),{value:j,done:!1}}return{value:null,done:!0}}};return A[globalThis.Symbol.iterator]=function(){return this},A}function HenselLift(t,n,a,s,l,u,c){console.assert(u.isDivisibleBy(c));const p=t.subtract(n.multiply(a)).scale(u.inverse()).mod(c),d=l.multiply(p).mod(c).divideAndRemainderModP(n.mod(c),c),x=d.quotient,_=d.remainder,S=s.multiply(p).add(a.mod(c).multiply(x)).mod(c),T=n.add(_.scale(u)),A=a.add(S.scale(u));return[T,A]}function QuadraticHenselLift(t,n,a,s,l){const u=l.divide(l),c=Polynomial$1.of(u).subtract(a.multiply(t)).subtract(s.multiply(n)).scale(l.inverse()).mod(l),p=s.multiply(c).mod(l).divideAndRemainderModP(t.mod(l),l),d=p.quotient,x=a.multiply(c).add(n.mod(l).multiply(d)).mod(l),_=p.remainder,S=a.add(x.scale(l)),T=s.add(_.scale(l));return[S,T]}function HenselLiftingOfTwoFactors(t,n,a,s,l){const u=ExtendedEuclideanAlgorithm(n,a,s);console.assert(u.gcd.getDegree()===0);let c=u.U,p=u.V;if(!(s instanceof Expression.Polynomial)){const _=s;let S=1;for(;S<l/4;){[n,a]=HenselLift(t,n,a,c,p,s,s),[c,p]=QuadraticHenselLift(n,a,c,p,s),s=s.multiply(s),S*=2;{let R=1;for(;S*R<l;)R*=2;(S-1)*R>=l&&(S-=1,s=s.divide(_))}}let T=S,A=s;for(;S<l;)[n,a]=HenselLift(t,n,a,c,p,A,s),A=A.multiply(s),S+=T;if(S!==l){const R=_._pow(l);n=n.mod(R),a=a.mod(R)}return[n,a]}let x=s;for(let _=1;_<l;_+=1)[n,a]=HenselLift(t,n,a,c,p,x,s),x=x.multiply(s);return[n,a]}function productModQ(t,n){return console.assert(t.length>0),t.length>1?productModQ(t.slice(0,Math.ceil(t.length/2)),n).multiply(productModQ(t.slice(Math.ceil(t.length/2)),n)).mod(n):t[0]}function HenselLifting(t,n,a,s){if(n.length===1)return[t];const l=Math.ceil(n.length/2),u=n.slice(0,l),c=n.slice(l),[p,d]=HenselLiftingOfTwoFactors(t,productModQ(u,a),productModQ(c,a),a,s);return HenselLifting(p,u,a,s).concat(HenselLifting(d,c,a,s))}factorizeOverTheIntegers._gcdOfPolynomialsOverFiniteField0=_gcdOfPolynomialsOverFiniteField0;function factorizeMultivariateIntegerPolynomial(t){function n(T){var A=[];T=T.primitivePart();var R=T.getDegree()>1?T.hasIntegerCoefficients()?factorizeOverTheIntegers(T).next().value:T.factorize():null;return R!=null?(A=A.concat(n(R)),A=A.concat(n(T.divideAndRemainder(R,"throw").quotient))):A.push(T),A}for(var a=0,s=0;s<=t.getDegree();s+=1)t.getCoefficient(s).equals(Expression.ZERO)||(a=Math.max(a,t.getCoefficient(s).polynomial.getDegree()));for(var l=0;;l+=1){var u=t.map(T=>T.polynomial.calcAt(Expression.Integer.fromNumber(l)));if(u.getDegree()===t.getDegree()&&u.isSquareFreePolynomial()){var c=Array.from(n(u)).map(A=>A.map(R=>new Expression.Polynomial(Polynomial$1.of(R))));if(c.length<2)return null;var p=new Expression.Polynomial(Polynomial$1.of(u.getContent()));c[c.length-1]=c[c.length-1].scale(p);const T=new Expression.Polynomial(Polynomial$1.of(Expression.Integer.fromNumber(0-l),Expression.ONE));var d=T._pow(a+1);c=HenselLifting(t,c,T,a+1),console.assert(t.subtract(productModQ(c,d)).mod(d).toString()==="0");for(var x=1;x<=c.length-1;x+=1)for(var _ of combinations(c,x)){var S=productModQ(_,d);if(S=S.scale(t.getLeadingCoefficient()).mod(d),S._hasIntegerLikeCoefficients()&&(S=S.primitivePart(),t.scale(t.getLeadingCoefficient()._pow(t.getDegree()-S.getDegree()+1)).isDivisibleBy(S)))return S}}}}factorizeOverTheIntegers._factorizeMultivariateIntegerPolynomial=factorizeMultivariateIntegerPolynomial;factorizeOverTheIntegers.testables={gcdOfPolynomialsOverFiniteField,distinctDegreeFactorization,CantorZassenhausAlgorithm,isFactorizationOverZpSquareFree,factorizeOverTheFiniteField,modPow,randomBigInt,ExtendedEuclideanAlgorithm,HenselLift,QuadraticHenselLift,HenselLiftingOfTwoFactors,HenselLifting,productModQ};const isPrime$1=primeFactor._isPrime,freeze=t=>t;function PolynomialData(t){this.degrees=new Array(t),this.coefficients=new Array(t),this.size=0}PolynomialData.prototype.add=function(t,n){const a=this.size;if(!(Math.floor(t)===t&&t>=0&&t<=Number.MAX_SAFE_INTEGER))throw new RangeError("NotSupportedError");if(a>0&&!(t<this.degrees[a-1])||a>=this.degrees.length||a>=this.coefficients.length)throw new RangeError;this.degrees[a]=t,this.coefficients[a]=n,this.size=a+1};PolynomialData.prototype.degree=function(t){return this.degrees[t]};PolynomialData.prototype.coefficient=function(t){return this.coefficients[t]};PolynomialData.prototype.trim=function(){return this.size<Math.max(this.degrees.length,this.coefficients.length)&&(this.degrees.length=this.size,this.coefficients.length=this.size),this};function Polynomial$1(t){this.a=t.trim()}Polynomial$1.of=function(){for(var t=new PolynomialData(arguments.length),n=arguments.length-1;n>=0;n-=1){var a=arguments[n];a.equals(Expression.ZERO)||t.add(n,a)}return new Polynomial$1(t)};Polynomial$1.from=function(t){for(var n=new PolynomialData(t.length),a=t.length-1;a>=0;a-=1){var s=a,l=t[a];l.equals(Expression.ZERO)||n.add(s,l)}return new Polynomial$1(n)};Polynomial$1.ZERO=Polynomial$1.of();Polynomial$1.prototype.getDegree=function(){return this.a.size===0?-1:this.a.degree(0)};Polynomial$1.prototype.getCoefficient=function(t){for(var n=0,a=this.a.size;n<a;){var s=n+Math.floor((a-n)/2),l=this.a.degree(s);if(l>t)n=s+1;else if(l<t)a=s;else return this.a.coefficient(s)}return Expression.ZERO};Polynomial$1.prototype.getLeadingCoefficient=function(){return this.a.size===0?Expression.ZERO:this.a.coefficient(0)};Polynomial$1.prototype.map=function(t){if(t.length!==1)throw new RangeError("deprecated");const n=new PolynomialData(this.a.size);for(let a=0;a<this.a.size;a+=1){const s=this.a.degree(a),l=this.a.coefficient(a),u=t(l);u.equals(Expression.ZERO)||n.add(s,u)}return new Polynomial$1(n)};Polynomial$1.prototype.equals=function(t){if(t===Expression.ZERO)return this.a.size===0;if(this.a.size!==t.a.size)return!1;for(var n=0,a=0;n<this.a.size&&a<t.a.size;){if(this.a.degree(n)!==t.a.degree(a)||!this.a.coefficient(n).equals(t.a.coefficient(a)))return!1;n+=1,a+=1}return!0};function _join(t,n,a){const s=new PolynomialData(t.a.size+n.a.size);let l=-1,u=-2,c=Expression.ZERO,p=-1,d=-2,x=Expression.ZERO;for(;u!==-1||d!==-1;){const _=Math.max(u,d);if(_!==-2){const S=a(u>=d?c:Expression.ZERO,d>=u?x:Expression.ZERO);(u!==d||!S.equals(Expression.ZERO))&&s.add(_,S)}u===_&&(l+=1,l<t.a.size?(u=t.a.degree(l),c=t.a.coefficient(l)):(u=-1,c=Expression.ZERO)),d===_&&(p+=1,p<n.a.size?(d=n.a.degree(p),x=n.a.coefficient(p)):(d=-1,x=Expression.ZERO))}return new Polynomial$1(s)}Polynomial$1.prototype.add=function(t){return t.a.size===0?this:this.a.size===0?t:_join(this,t,function(n,a){return n===Expression.ZERO?a:a===Expression.ZERO?n:n.add(a)})};function split_at(t,n){var a=t.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(n));return[a.quotient,a.remainder]}const KARATSUBA_THRESHOLD=12;function karatsuba(t,n){if(t.a.size<KARATSUBA_THRESHOLD||n.a.size<KARATSUBA_THRESHOLD)return t.multiply(n);const a=n.a.size>t.a.size?n.a.degree(Math.floor(n.a.size/2)):t.a.degree(Math.floor(t.a.size/2)),[s,l]=split_at(t,a),[u,c]=split_at(n,a),p=karatsuba(l,c),d=karatsuba(l.add(s),c.add(u)),x=karatsuba(s,u);return x.shift(a*2).add(d.subtract(x).subtract(p).shift(a)).add(p)}function coefficientsBound(t,n=!1){function a(c,p){if(p.a.size<4)return c+1;const d=Math.floor(p.a.size/2);return c===0?d:c===d?d+1:c===d+1?p.a.size-1:c+1}let s=Expression.ZERO,l=Expression.ZERO;for(let c=0;c<t.a.size;c=n?a(c,t):c+1){const p=t.a.coefficient(c);p.compareTo(s)>0?s=p:p.compareTo(l)<0&&(l=p)}return(l.negate().compareTo(s)<0?s:l.negate()).bitLength()}let supportsLargeBigintCache;function supportsLargeBigint(){if(supportsLargeBigintCache==null)try{supportsLargeBigintCache=Expression.ONE.leftShift(2**20).compareTo(Expression.ZERO)>0}catch{supportsLargeBigintCache=!1}return supportsLargeBigintCache}function hasFastBigIntMultiplication(){return supportsLargeBigint()}function multiplyByKroneckerSubstitution(t,n){function a(S,T){function A(F,z,j){const Z=j-z;if(Z>=2){const W=Math.ceil(Z/2);return A(F,z+W,j).leftShift(T*W).add(A(F,z,z+W))}else return Z===1?F[z]:Expression.ZERO}const R=new Array(S.getDegree()+1);for(let F=0;F<=S.getDegree();F+=1)R[F]=S.getCoefficient(F);const D=Expression.ONE.leftShift(T),O=Expression.ONE.negate();for(let F=0;F<R.length;F+=1)R[F].compareTo(Expression.ZERO)<0&&(R[F]=D.add(R[F]),R[F+1]=R[F+1].add(O));return A(R,0,R.length)}function s(S,T,A){const R=A,D=new Array(R);function O(Z,W,J){const en=J-W;if(en>=2){const tn=Math.ceil(en/2),Ct=Z.leftShift(0-T*tn),Q=Z.asUintN(T*tn);O(Q,W,W+tn),O(Ct,W+tn,J)}else console.assert(en===1),D[W]=Z}O(S,0,R);const F=Expression.ONE.leftShift(T),z=F.negate(),j=F.leftShift(-1);for(let Z=0;Z<D.length;Z+=1){let W=D[Z];W.compareTo(j)>=0&&(D[Z]=W.add(z),D[Z+1]=D[Z+1].add(Expression.ONE))}return Polynomial$1.from(D)}const l=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());l>1&&(t=t._exponentiateRoots(l),n=n._exponentiateRoots(l));let u=!1;if(t.getLeadingCoefficient().sign()<=0){if(t.getLeadingCoefficient().sign()===0)return t.multiply(n);t=t.negate(),u=!u}if(n.getLeadingCoefficient().sign()<=0){if(n.getLeadingCoefficient().sign()===0)return t.multiply(n);n=n.negate(),u=!u}const c=coefficientsBound(t),p=coefficientsBound(n),d=Math.ceil((Math.max(c,p)*2+Math.ceil(Math.log2(Math.min(t.getDegree()+1,n.getDegree()+1)))+1)/1)*1;let x=Expression.ZERO;const _=(t.getDegree()+n.getDegree()+1)*d;return _>=2**30||_>=2**20&&!supportsLargeBigint()?x=karatsuba(t,n):x=s(a(t,d).multiply(a(n,d)),d,t.getDegree()+n.getDegree()+1),l>1&&(x=x._exponentiateRoots(1/l)),u&&(x=x.negate()),x}function multiplyInternal(t,n,a){var s=t.getDegree()+n.getDegree()+1;if((t.a.size+n.a.size+Math.min(t.a.size,n.a.size))*4>=s){for(var l=new Array(s).fill(Expression.ZERO),u=0;u<t.a.size;u+=1)for(var c=t.a.degree(u),p=t.a.coefficient(u),d=0;d<n.a.size;d+=1){var x=n.a.degree(d),_=n.a.coefficient(d),S=c+x,T=a?p.multiply(_):_.multiply(p);l[S]=l[S].add(T)}return Polynomial$1.from(l)}else{for(var l=new FastAdditionPolynomial,u=0;u<t.a.size;u+=1){var c=t.a.degree(u),p=t.a.coefficient(u);l.add(p,c,n,a)}return l.toPolynomial()}}globalThis.counter9=0;Polynomial$1.prototype.multiply=function(t){if(this.a.size===0||t.a.size===0)return Polynomial$1.ZERO;if(t.a.size===1&&t.a.coefficient(0)instanceof Expression.Integer)return this.shift(t.a.degree(0)).scale(t.a.coefficient(0));if(this.a.size>=16&&t.a.size>=16&&this.hasIntegerCoefficients()&&t.hasIntegerCoefficients()){var n=this,a=t,s=Math.gcd(n.getGCDOfTermDegrees(),a.getGCDOfTermDegrees()),l=Math.min(n.getDegree(),a.getDegree()),u=Math.min((n.a.size-1)/n.getDegree(),(a.a.size-1)/a.getDegree());const c=coefficientsBound(n,!0),p=coefficientsBound(a,!0);if(Math.max(c,p)>=32&&Math.max(c,p)<=256&&u>=.8&&l>=16||hasFastBigIntMultiplication()&&l*u>=64||hasFastBigIntMultiplication()&&l*u*Math.min(c,p)*Math.pow(u*s,2)>=64*1024)return globalThis.counter9+=1,multiplyByKroneckerSubstitution(n,a)}return t.a.size>=KARATSUBA_THRESHOLD&&this.a.size>=KARATSUBA_THRESHOLD?karatsuba(this,t):this.a.size<=t.a.size?multiplyInternal(this,t,!0):multiplyInternal(t,this,!1)};Polynomial$1.prototype.shift=function(t){if(!(t>=0))throw new TypeError;if(t===0)return this;for(var n=new PolynomialData(this.a.size),a=0;a<this.a.size;a+=1)n.add(this.a.degree(a)+t,this.a.coefficient(a));return new Polynomial$1(n)};function FastAdditionPolynomial(){this.maxHeap=new Heap((t,n)=>n.degree-t.degree),this.degree=-1,this.leadingCoefficient=Expression.ZERO}FastAdditionPolynomial.prototype.add=function(t,n,a,s){let l=0;var u={next:function(){if(l===a.a.size)return;const x=a.a.degree(l),_=a.a.coefficient(l);return l+=1,freeze({degree:x+n,coefficient:_===Expression.ONE?t:t===Expression.ONE?_:s?t.multiply(_):_.multiply(t),iterator:u})}},c=u.next();if(c.degree>this.degree&&this.degree!==-1)throw new RangeError;if(c.degree<this.degree)this.maxHeap.push(c);else{for(this.degree===-1?(this.leadingCoefficient=c.coefficient,this.degree=c.degree):this.leadingCoefficient=this.leadingCoefficient.add(c.coefficient),c=c.iterator.next(),c!=null&&this.maxHeap.push(c);this.maxHeap.size()>0&&(this.degree===this.maxHeap.peek().degree||this.leadingCoefficient.equals(Expression.ZERO));){var p=this.maxHeap.peek();this.leadingCoefficient=this.leadingCoefficient.add(p.coefficient),this.degree=p.degree;var d=p.iterator.next();d!=null?this.maxHeap.replace(d):this.maxHeap.pop()}this.maxHeap.size()===0&&this.leadingCoefficient.equals(Expression.ZERO)&&(this.degree=-1)}};FastAdditionPolynomial.prototype.getDegree=function(){return this.degree};FastAdditionPolynomial.prototype.getLeadingCoefficient=function(){return this.leadingCoefficient};FastAdditionPolynomial.prototype.toPolynomial=function(){for(var t=[],n=Polynomial$1.of(Expression.ONE);this.getDegree()>=0;){var a=this.getDegree(),s=this.getLeadingCoefficient();this.add(s.negate(),a,n,!0),t.push({degree:a,coefficient:s})}return Polynomial$1.fromTerms(t)};Polynomial$1.prototype.divideAndRemainder=function(t,n,a){if(n=n||void 0,t.equals(Polynomial$1.ZERO))throw new TypeError("ArithmeticException");if(this.getDegree()<t.getDegree())return{quotient:Polynomial$1.ZERO,remainder:this};if(t.a.size===1&&t.a.coefficient(0).equals(Expression.ONE)&&(n==null||this._hasIntegerLikeCoefficients())){if(t.a.degree(0)===0)return{quotient:this,remainder:Polynomial$1.ZERO};for(var s=t.a.degree(0),l=0;this.a.degree(l)>=s&&l<this.a.size;)l+=1;for(var u=new PolynomialData(l),c=0;c<l;c+=1)u.add(this.a.degree(c)-s,this.a.coefficient(c));for(var p=new PolynomialData(this.a.size-l),c=l;c<this.a.size;c+=1)p.add(this.a.degree(c),this.a.coefficient(c));return{quotient:new Polynomial$1(u),remainder:new Polynomial$1(p)}}const d=t.getLeadingCoefficient(),x=d instanceof Expression.ExpressionWithPolynomialRoot?d.inverse():void 0;if(t.a.size===1&&t.a.degree(0)===0&&x==null&&(n==null||n==="throw"))return{quotient:this.map(function(O){var F=O.divide(d);if(n!=null&&F instanceof Expression.Division)throw new RangeError;return F}),remainder:Polynomial$1.ZERO};var _=[],S=this.a.size/this.getDegree()<1/4&&a==null,T=this;S&&(T=new FastAdditionPolynomial,T.add(Expression.ONE,0,this,!0));const A=t.negate();for(;T.getDegree()>=t.getDegree();){var R=T.getDegree()-t.getDegree(),D=T.getLeadingCoefficient(),u=x==null?D.divide(d):D.multiply(x);if(a!=null&&(u=a(u)),n!=null&&u instanceof Expression.Division){if(n==="throw")throw new TypeError(this.toString()+" "+t.toString());if(n==="undefined")return;throw new TypeError}if(_.push({degree:R,coefficient:u}),S?T.add(u,R,A,!0):u instanceof Expression.Integer?T=T.add(A.shift(R).scale(u)):T=T.add(Polynomial$1.of(u).shift(R).multiply(A)),a!=null)for(;T.getDegree()>=0&&a(T.getLeadingCoefficient()).equals(Expression.ZERO);)T=T.subtract(Polynomial$1.of(T.getLeadingCoefficient()).shift(T.getDegree()));if(T.getDegree()-t.getDegree()===R){throw new TypeError("there is a some problem with the expression evaluation");//!
}}return S&&(T=T.toPolynomial()),{quotient:Polynomial$1.fromTerms(_),remainder:T}};Polynomial$1.prototype.divideAndRemainderModP=function(t,n){const a=t.getLeadingCoefficient();if(!(a instanceof Expression.Polynomial)&&!a.equals(Expression.ONE)||a instanceof Expression.Polynomial&&a.polynomial.getDegree()!==0)throw new RangeError;const s=this.divideAndRemainder(t,"throw",l=>l.modulo(n));return{quotient:s.quotient,remainder:s.remainder.mod(n)}};Polynomial$1.pseudoRemainder=function(t,n){var a=t.getDegree()-n.getDegree();if(a<0)throw new RangeError;return t.scale(n.getLeadingCoefficient()._pow(a+1)).divideAndRemainder(n,"throw").remainder};Polynomial$1.polynomialGCD=function(t,n){let a=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(a>1)return Polynomial$1.polynomialGCD(t._exponentiateRoots(a),n._exponentiateRoots(a))._exponentiateRoots(1/a);//!optimization 2021-03-15
if(n.getDegree()>0&&t.getDegree()>0){var s=function(A){for(var R=0;A.getCoefficient(R).equals(Expression.ZERO);)R+=1;return R},l=s(n),u=s(t);if(l!==0||u!==0)return Polynomial$1.polynomialGCD(t.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(u),void 0).quotient,n.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(l),void 0).quotient).shift(Math.min(l,u))}//!
if(t.getDegree()<n.getDegree()){//!!!
var c=t;t=n,n=c}if(n.equals(Polynomial$1.ZERO))return t;//!
if(t.getDegree()===1&&n.getDegree()===0)return Polynomial$1.of(n.getCoefficient(0).gcd(t.getCoefficient(0)).gcd(t.getCoefficient(1)));//!
var p=t.getContent(),d=n.getContent(),x=t.divideAndRemainder(Polynomial$1.of(p),"throw").quotient,_=n.divideAndRemainder(Polynomial$1.of(d),"throw").quotient,S=gcdOfPrimitivePolynomials(x,_),T=p.gcd(d);return Polynomial$1.of(T).multiply(S)};function hasQuadraticInteger(t){return t instanceof Expression.NthRoot?!(t instanceof Expression.Integer):t instanceof Expression.ExponentiationOfMinusOne?!0:t instanceof Expression.BinaryOperation?hasQuadraticInteger(t.a)||hasQuadraticInteger(t.b):(t instanceof Expression.Integer||t instanceof Expression.Symbol||t instanceof Expression.Complex,!1)}var getY=function(t,n){for(var a={},s=0;s<t.a.size;s++){var l=t.a.coefficient(s),u=Expression.getVariable(l,{avoidNthRoots:!0});if(u!=null){if(u instanceof Expression.ExpressionWithPolynomialRoot){return null;//!?
}if(Expression.isConstant(u)&&u!==Expression.E&&u!==Expression.PI)return null;if(u instanceof Expression.Polynomial){return null;//!?
}u instanceof Expression.Symbol&&(a[u.symbol]?u=null:a[u.symbol]=!0);for(var c=0;c<t.a.size&&u!=null;c+=1)Expression._getReplacement(t.a.coefficient(c),u).equals(u)||(u=null);for(var c=0;c<n.a.size&&u!=null;c+=1)Expression._getReplacement(n.a.coefficient(c),u).equals(u)||(u=null);if(u!=null)return u}}return null};Polynomial$1._getY=getY;function gcdOfPrimitivePolynomials(t,n){return console.assert(t.getDegree()>=n.getDegree()),t.hasIntegerCoefficients()&&n.hasIntegerCoefficients()&&n.getDegree()>2?t.isDivisibleBy(n)?n:gcdByModularAlgorithm(t,n):n.getDegree()>1&&(getY(t,n)!=null||getY(n,t)!=null)?gcdByMultivariateModularAlgorithm(t,n):n.getDegree()>2?gcdUsingPseudoRemainderSequence(t,n,"subresultant").primitivePart():!t._testCoefficients(a=>hasQuadraticInteger(a))&&!n._testCoefficients(a=>hasQuadraticInteger(a))&&n.getDegree()>0?gcdUsingPseudoRemainderSequence(t,n,"primitive"):n.getDegree()===0?Polynomial$1.of(Expression.ONE):gcdUsingRemainderSequence(t,n).primitivePart()}function gcdUsingRemainderSequence(t,n){for(;!n.equals(Polynomial$1.ZERO);){const a=t.divideAndRemainder(n).remainder;t=n,n=a}return t}function gcdUsingPseudoRemainderSequence(t,n,a){let s=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(s>1)return gcdUsingPseudoRemainderSequence(t._exponentiateRoots(s),n._exponentiateRoots(s),a)._exponentiateRoots(1/s);for(var l of Polynomial$1._pseudoRemainderSequence(t,n,a)){var u=l.R;t=n,n=u}var c=t;return c}Polynomial$1._gcdUsingPseudoRemainderSequence=gcdUsingPseudoRemainderSequence;function ChineseRemainderTheorem(t,n){const a=t.remainder(n).modInverse(n);return function(s,l){return s.add(l.subtract(s.modulo(n)).multiply(a).modulo(n).multiply(t))}}globalThis.ChineseRemainderTheorem=ChineseRemainderTheorem;function ChineseRemainderTheoremForPolynomialCoefficients(t,n,a,s){const l=ChineseRemainderTheorem(a,s);return _join(t,n,(u,c)=>l(u,c))}globalThis.ChineseRemainderTheoremForPolynomialCoefficients=ChineseRemainderTheoremForPolynomialCoefficients;Polynomial$1.prototype._exponentiateRoots=function(t){if(t===-1){if(this.getCoefficient(0).equals(Expression.ZERO))throw new RangeError;for(var n=new PolynomialData(this.a.size),a=this.a.size-1;a>=0;a-=1)n.add(this.getDegree()-this.a.degree(a),this.a.coefficient(a));var s=new Polynomial$1(n);if(s.getLeadingCoefficient()instanceof Expression.Integer&&s.getLeadingCoefficient().sign()<0){s=s.negate();//!!!
}return s}const l=Math.floor(1/t+.5);if(Math.floor(t)===t&&t>=2||1/l===t&&l>=2){for(var n=new PolynomialData(this.a.size),u=0;u<this.a.size;u+=1){if(Math.floor(t)===t&&this.a.degree(u)%t!==0)throw new RangeError;n.add(Math.floor(t)===t?this.a.degree(u)/t:this.a.degree(u)*l,this.a.coefficient(u))}return new Polynomial$1(n)}throw new RangeError(t)};Polynomial$1.prototype._scaleRoots=function(t){const n=t.getNumerator(),a=t.getDenominator(),s=this.getDegree();let l=Expression.ONE,u=0;const c=new PolynomialData(this.a.size);for(let p=0;p<this.a.size;p+=1){const d=this.a.degree(p),x=this.a.coefficient(p);l=l.multiply(n._pow(s-d-u)),u=s-d,c.add(d,l.multiply(a._pow(d)).multiply(x))}return new Polynomial$1(c)};Polynomial$1.prototype._translateRoots=function(t){if(t.equals(Expression.ONE.negate())){const a=this,s=a.getDegree(),l=new Array(s+1);for(let u=0;u<=s;u+=1)l[u]=a.getCoefficient(u);for(let u=0;u<=s-1;u+=1)for(let c=s-1;c>=u;c-=1)l[c]=l[c].add(l[c+1]);return Polynomial$1.from(l)}if(t.equals(Expression.ZERO))return this;var n=t.getNumerator()._pow(this.getDegree());return this._scaleRoots(t.negate().inverse())._translateRoots(Expression.ONE.negate())._scaleRoots(t.negate()).map(a=>a.divide(n))};Polynomial$1.prototype.mod=function(t){return this.map(n=>n.modulo(t))};Polynomial$1.prototype.mod2=function(t){return this.mod(t).map(n=>n.subtract(t).add(n).compareTo(Expression.ZERO)<0?n:n.subtract(t))};Polynomial$1.prototype._pow=function(t){var n=function(a,s,l){if(s<0)throw new RangeError;if(s>Number.MAX_SAFE_INTEGER)throw new RangeError("NotSupportedError");return s<1?l:2*Math.floor(s/2)!==s?n(a,s-1,l.multiply(a)):n(a.multiply(a),Math.floor(s/2),l)};return n(this,t,Polynomial$1.of(Expression.ONE))};function gcdByModularAlgorithm(t,n){{const d=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(d>1)return console.debug("g > 1"),gcdByModularAlgorithm(t._exponentiateRoots(d),n._exponentiateRoots(d))._exponentiateRoots(1/d)}//! https://www3.risc.jku.at/education/courses/ws2011/ca/3-gcd.pdf
const a=t.getLeadingCoefficient().abs().gcd(n.getLeadingCoefficient().abs());if(t.getCoefficient(0).equals(Expression.ZERO)||n.getCoefficient(0).equals(Expression.ZERO))throw new RangeError;if(a.compareTo(t.getCoefficient(0).abs().gcd(n.getCoefficient(0).abs()))>0)return gcdByModularAlgorithm(t._exponentiateRoots(-1),n._exponentiateRoots(-1))._exponentiateRoots(-1);console.assert(t.hasIntegerCoefficients()&&t.getContent().abs().equals(Expression.ONE)&&t.getDegree()>0),console.assert(n.hasIntegerCoefficients()&&n.getContent().abs().equals(Expression.ONE)&&n.getDegree()>0);let s=Math.min(t.getDegree(),n.getDegree());const l=function(){const d=a,x=Math.min(t._log2OfBoundForCoefficientsOfFactor(s,d),n._log2OfBoundForCoefficientsOfFactor(s,d));return Expression.TWO._pow(1+Math.ceil(x))};let u=l(),c=Expression.Integer.fromBigInt(Math.min(Math.max(u.toNumber(),1024),Math.floor(Math.sqrt((Number.MAX_SAFE_INTEGER+1)/(1+Math.min(t.getDegree(),n.getDegree())))))),p=0;for(;;){let d=null,x=Expression.ZERO;for(;x.compareTo(u)<0;){if(p+=1,p>50&&c._pow(p-50).compareTo(u)>=0)throw new TypeError("!!!");do c=c.subtract(Expression.ONE);while(!isPrime$1(c.toBigInt())||a.remainder(c).equals(Expression.ZERO));const _=factorizeOverTheIntegers._gcdOfPolynomialsOverFiniteField0(t,n,c.toBigInt());console.assert(_.getLeadingCoefficient().equals(Expression.ONE));const S=_.scale(a.remainder(c)).mod(c);if(S.getDegree()<1)return Polynomial$1.of(Expression.ONE);if(S.getDegree()>2/3*t.getDegree(),!(S.getDegree()>s)){if(d!=null&&S.getDegree()<d.getDegree()&&(d=null),d==null)d=S.mod2(c),x=c,s=S.getDegree(),u=l();else if(S.getDegree()===d.getDegree()){const T=d;if(d=ChineseRemainderTheoremForPolynomialCoefficients(d,S,x,c),x=x.multiply(c),d=d.mod2(x),x.compareTo(u)<0&&T.equals(d)){if(d=d.primitivePart(),t.isDivisibleBy(d)&&n.isDivisibleBy(d))return d;d=T}}}}if(d=d.primitivePart(),t.isDivisibleBy(d)&&n.isDivisibleBy(d))return d}}Polynomial$1._gcdByModularAlgorithm=gcdByModularAlgorithm;function gcdByMultivariateModularAlgorithm(t,n){{const F=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(F>1)return console.debug("g > 1"),gcdByMultivariateModularAlgorithm(t._exponentiateRoots(F),n._exponentiateRoots(F))._exponentiateRoots(1/F)}if(!t.getContent().equals(Expression.ONE)||!n.getContent().equals(Expression.ONE))return Polynomial$1.polynomialGCD(t,n);const a=getY(t,n)||getY(n,t);if(a==null)return Polynomial$1.polynomialGCD(t,n);//! https://www3.risc.jku.at/education/courses/ws2011/ca/3-gcd.pdf
const s=Math.min(t.getDegree(),n.getDegree());t=t.map(F=>new Expression.Polynomial(Polynomial$1.toPolynomial(F,a))),n=n.map(F=>new Expression.Polynomial(Polynomial$1.toPolynomial(F,a)));const l=function(F){const z=new Expression.Polynomial(Polynomial$1.of(new Expression.Polynomial(Polynomial$1.of(Expression.ZERO,Expression.ONE))));return F.map(j=>new Expression.Polynomial(j.polynomial.map(Z=>new Expression.Polynomial(Polynomial$1.of(Z))))).calcAt(z).polynomial},u=l(t),c=l(n),p=u.getContent().gcd(c.getContent()).polynomial.primitivePart();if(!p.equals(Polynomial$1.of(Expression.ONE))){const F=function(z){return z.map(j=>new Expression.Polynomial(j.polynomial.divideAndRemainder(p,p._hasIntegerLikeCoefficients()?"throw":void 0).quotient)).calcAt(new Expression.Polynomial(Polynomial$1.of(a))).polynomial};return gcdByMultivariateModularAlgorithm(F(u),F(c)).multiply(p)}if(console.assert(p.equals(Polynomial$1.of(Expression.ONE))),u.getDegree()===0||c.getDegree()===0)return Polynomial$1.of(Expression.ONE);const d=Polynomial$1.polynomialGCD(u.getLeadingCoefficient().polynomial,c.getLeadingCoefficient().polynomial),x=function(){NewtonInterpolation.setField(Expression._FIELD);const F=NewtonInterpolation();return F.next(),F},_=t._hasIntegerLikeCoefficients()&&n._hasIntegerLikeCoefficients();let S=Expression.ZERO,T=0,A=null,R=1/0,D=null;for(;;){do S=Expression.Integer.fromNumber(S.toNumber()+1),S.toNumber()-s>2&&console.error("!",S.toNumber()-s);while(d.calcAt(S).equals(Expression.ZERO));var O=Polynomial$1.polynomialGCD(t.calcAt(S).polynomial,n.calcAt(S).polynomial);if(O.getDegree()===0)return Polynomial$1.of(Expression.ONE);if(O.getDegree()>R)continue;const F=d.calcAt(S);if(O=O.scale(F).scale(O.getLeadingCoefficient().inverse()),_&&!O._hasIntegerLikeCoefficients())continue;(T===s+1||O.getDegree()<R)&&(T=0,D=x());const z=A;if(A=Polynomial$1.from(D.next([S.toNumber(),new Expression.Polynomial(O)]).value),T+=1,R=O.getDegree(),_&&A!=null&&!A._hasIntegerLikeCoefficients())debugger;if(z!=null&&z.equals(A)||T===s+1)if(!_||A._hasIntegerLikeCoefficients()){if(A=l(l(A).primitivePart()),(!_||A.getContent().equals(Expression.ONE))&&t.isDivisibleBy(A)&&n.isDivisibleBy(A))return A=A.map(j=>j.polynomial.calcAt(a)),A.getLeadingCoefficient().isNegative()&&(A=A.negate()),_||(A=A.primitivePart()),A;A=z}else debugger}}Polynomial$1._gcdByMultivariateModularAlgorithm=gcdByMultivariateModularAlgorithm;Polynomial$1.prototype.calcAt=function(t){//!!!
if(t instanceof Expression.Division&&t.getNumerator()instanceof Expression.Integer&&t.getDenominator()instanceof Expression.Integer&&this.hasIntegerCoefficients()){var c=this.getDegree(),n=this._scaleRoots(t.getDenominator());return n.calcAt(t.getNumerator()).divide(t.getDenominator()._pow(c))}if((t instanceof Expression.Symbol||t instanceof Expression.NthRoot)&&this.hasIntegerCoefficients()){for(var a=Expression.ZERO,s=0;s<this.a.size;s+=1){var l=this.a.degree(s),u=this.a.coefficient(s);a=a.add(u.multiply(t._pow(l)))}return a}for(var c=Expression.ZERO,p=-1,s=0;s<this.a.size;s+=1){var l=this.a.degree(s),u=this.a.coefficient(s);c.equals(Expression.ZERO)?c=u:c=Expression.pow(t,p-l).multiply(c).add(u),p=l}return c.equals(Expression.ZERO)||(c=Expression.pow(t,p-0).multiply(c)),c};Polynomial$1.prototype.getContent=function(){if(this.a.size===0)return Expression.ONE;for(var t=Expression.ONE,n=Expression.ZERO,a=0;a<this.a.size;a+=1){const c=a%2===0?a/2:this.a.size-(a+1)/2;var s=this.a.coefficient(c);t=t.lcm(s.getDenominator()),n=n.gcd(s.getNumerator())}var l=n.divide(t),u=this.a.coefficient(0);return u.isNegative()&&!n.isNegative()||n.isNegative()&&!u.isNegative()?l.negate():l};Polynomial$1.prototype.negate=function(){return this.map(t=>t.negate())};Polynomial$1.prototype.subtract=function(t){return this.add(t.negate())};Polynomial$1.prototype.scale=function(t){if(t.equals(Expression.ONE))return this;if(Expression.has(t,Expression.Matrix)||Expression.has(t,Expression.MatrixSymbol))throw new TypeError;return this.map(n=>n.multiply(t))};Polynomial$1.fromTerms=function(t){for(var n=new PolynomialData(t.length),a=0;a<t.length;a+=1){var s=t[a];n.add(s.degree,s.coefficient)}return new Polynomial$1(n)};Polynomial$1.toPolynomial=function(t,n){if(t instanceof Expression.Division)throw new RangeError;var a=Expression.getCoefficients(t,n);return Polynomial$1.fromTerms(a)};Polynomial$1.prototype.toExpression=function(t){for(var n=void 0,a=0;a<this.a.size;a+=1){var s=this.a.degree(a),l=this.a.coefficient(a),u=s===0?void 0:s===1?t:new Expression.Exponentiation(t,Expression.Integer.fromNumber(s)),c=u==null?l:l.equals(Expression.ONE)?u:new Expression.Multiplication(l,u);n=n==null?c:new Expression.Addition(n,c)}return n??Expression.ZERO};Polynomial$1.prototype.doRationalRootTest=function(){var t=this;if(t.getCoefficient(0).equals(Expression.ZERO)){return Expression.ZERO;//!TODO: test
}var n=t.getLeadingCoefficient(),a=t.getCoefficient(0);a=Expression._expandTrigonometry(a);//!
if(t.getDegree()===1)return a.negate().divide(n);var s=t.hasIntegerCoefficients(),l=null,u=null;if(s){if(l=t.calcAt(Expression.ONE),l.equals(Expression.ZERO))return Expression.ONE;if(u=t.calcAt(Expression.ONE.negate()),u.equals(Expression.ZERO))return Expression.ONE.negate()}var c=function(T,A){return!(l!=null&&(A.subtract(T).equals(Expression.ZERO)||!l.remainder(A.subtract(T)).equals(Expression.ZERO))||u!=null&&(A.add(T).equals(Expression.ZERO)||!u.remainder(A.add(T)).equals(Expression.ZERO)))};//!new 2020-01-13
if(s&&n.abs().bitLength()+a.abs().bitLength()>8){const T=function(R,D){D.compareTo(Expression.ZERO)<0&&(D=D.negate(),R=R.negate());var O=D.truncatingDivide(Expression.TWO);return R.compareTo(Expression.ONE)<0&&(O=O.negate()),R.add(O).truncatingDivide(D)},A=function(R,D){const O=R instanceof Expression.ExpressionPolynomialRoot?R.root._root.toDecimal(D.abs().bitLength()):R.toDecimal(D.abs().bitLength()),F=O.a.add(O.b).divide(Expression.TWO);return T(D.multiply(F.getNumerator()),F.getDenominator())};for(var p=t.getZeros(),d=0;d<p.length;d+=1){var x=p[d];if(d===0||x!==p[d-1]){var _=x.root!=null?A(x,n).divide(n):x.getNumerator()instanceof Expression.Integer&&x.getDenominator()instanceof Expression.Integer?x:Expression.ZERO;if(c(_.getNumerator(),_.getDenominator())&&t.calcAt(_).equals(Expression.ZERO))return _}}return null}var S=null;return Expression.everyDivisor(a,function(T){return Expression.everyDivisor(n,function(A){for(var R=-3;(R+=2)<3;){var D=R===-1?T.negate():T;if(c(D,A)){var O=Polynomial$1.of(D.negate(),A),F=t.divideAndRemainder(O,"undefined"),z=F==null?void 0:F.remainder.map(function(j){return j.simplifyExpression()});if(z!=null&&z.equals(Polynomial$1.ZERO))return S=D.divide(A),!1}}return!0})}),S};Polynomial$1.prototype._testCoefficients=function(t){for(var n=0;n<this.a.size;n+=1)if(!t(this.a.coefficient(n)))return!1;return!0};Polynomial$1.prototype.hasIntegerCoefficients=function(){return this._testCoefficients(t=>t instanceof Expression.Integer)};Polynomial$1.prototype.hasComplexCoefficients=function(){return this._testCoefficients(t=>t instanceof Expression.Complex||t instanceof Expression.Integer)};const isIntegerLike=function(t){return t instanceof Expression.Integer?!0:t instanceof Expression.Symbol?t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.ExpressionPolynomialRoot?!1:(t instanceof Expression.PolynomialRootSymbol,!0):t instanceof Expression.Addition||t instanceof Expression.Multiplication?isIntegerLike(t.a)&&isIntegerLike(t.b):t instanceof Expression.Exponentiation?isIntegerLike(t.a)&&t.b instanceof Expression.Integer&&t.b.compareTo(Expression.TWO)>=0:t instanceof Expression.Polynomial?t.polynomial._hasIntegerLikeCoefficients():!1};Polynomial$1._isIntegerLike=isIntegerLike;Polynomial$1.prototype._hasIntegerLikeCoefficients=function(){return this._testCoefficients(t=>Polynomial$1._isIntegerLike(t))};Polynomial$1.prototype._canBeFactored=function(t){if(!this.hasIntegerCoefficients()||this.getCoefficient(0).equals(Expression.ZERO))return!0;var n=this.getContent();if(!n.equals(Expression.ONE)&&!n.equals(Expression.ONE.negate()))return this.scale(n.inverse())._canBeFactored();var a=this.subtract(Polynomial$1.of(this.getLeadingCoefficient()).shift(this.getDegree())).getContent(),s=null;do s=a.gcd(this.getLeadingCoefficient()),a=a.truncatingDivide(s);while(!s.equals(Expression.ONE));var s=null;for(a=a.abs();!a.equals(Expression.ONE);){var l=a.primeFactor();if(!this.getCoefficient(0).remainder(l._pow(2)).equals(Expression.ZERO))return!1;a=a.truncatingDivide(l)}return!(t==null&&!this._translateRoots(Expression.Integer.fromNumber(3).negate())._canBeFactored(1))};Polynomial$1.prototype.isEven=function(){return this.getGCDOfTermDegrees()%2===0};var counter=0;Polynomial$1.prototype.getGCDOfTermDegrees=function(){if(this.equals(Polynomial$1.ZERO))return 0;for(var t=this.getDegree(),n=1;n<=this.getDegree()&&t>=2;n+=1)this.getCoefficient(n).equals(Expression.ZERO)||(t=Math.gcd(t,n));return t};Polynomial$1.prototype.getroots=function(t){t=t||void 0;var n=this,a=[];//!new 2018-12-24
for(var s=Expression.ONE,l=Expression.ZERO;l!=null;){var l=Expression.getConjugate(n.getLeadingCoefficient());l!=null&&(n=n.scale(l),s=s.multiply(l))}//!
//!new 2020-07-11
n=n.map(function(bE){return bE.simplifyExpression()});//!
var u=n.getContent();for(u.equals(Expression.ONE)||(n=n.scale(u.getDenominator()).divideAndRemainder(Polynomial$1.of(u.getNumerator()),"throw").quotient),s.equals(Expression.ONE)||(u=u.divide(s));n.getCoefficient(0).equals(Expression.ZERO);)n=n.divideAndRemainder(Polynomial$1.of(Expression.ZERO,Expression.ONE),"throw").quotient,a.push(Expression.ZERO);if((!u.equals(Expression.ONE)&&!u.equals(Expression.ONE.negate())||a.length>0)&&(a.length>0&&typeof hit=="function"&&hit({getroots:{special:"0"}}),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"factorOutTheGreatestCommonFactor"})),n.getDegree()===1)return a.push(n.getCoefficient(0).negate().divide(n.getCoefficient(1))),n=Polynomial$1.of(n.getLeadingCoefficient()),typeof hit=="function"&&hit({getroots:{linear:""}}),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"solveLinearEquation"}),a;var c=function(bE,uE){if(!(uE instanceof Expression.ExpressionWithPolynomialRoot)){if(uE instanceof Expression.ExpressionPolynomialRoot)return uE._nthRoot(bE);if(uE instanceof Expression.Division){var SE=c(bE,uE.a),tS=c(bE,uE.b);return SE==null||tS==null?void 0:SE.divide(tS)}if(uE instanceof Expression.Exponentiation){var WE=Expression.Integer.fromNumber(bE);if(uE.b instanceof Expression.Integer&&uE.b.remainder(WE).equals(Expression.ZERO)||uE.a instanceof Expression.Integer||uE.a===Expression.E||uE.b instanceof Expression.Division&&uE.b.a instanceof Expression.Integer&&uE.b.a.remainder(WE).equals(Expression.ZERO))return uE.a.pow(uE.b.divide(WE))}if(uE instanceof Expression.Multiplication){var qE=c(bE,uE.a),$E=c(bE,uE.b);return qE==null||$E==null?void 0:qE.multiply($E)}if(uE instanceof Expression.Complex||Expression.isConstant(uE)&&Expression.has(uE,Expression.Complex)){var kE=Expression.getComplexNumberParts(uE),TS=kE.real,QE=kE.imaginary;if(bE===2){var _S=TS.multiply(TS).add(QE.multiply(QE)).squareRoot(),gS=c(2,TS.add(_S).divide(Expression.TWO));if(gS!=null){var XS=QE.divide(Expression.TWO.multiply(gS)),iS=gS.add(XS.multiply(Expression.I));return iS}}if(TS.equals(Expression.ZERO)&&bE%2===0){var kE=c(Math.floor(bE/2),uE);if(kE!=null)return c(2,kE)}if(TS.equals(Expression.ZERO)&&bE%2===1){var kE=c(bE,QE);if(kE!=null)return kE.multiply(bE%4===1?Expression.I:Expression.I.negate())}//!new 2020-07-24
if(uE instanceof Expression.Complex&&!QE.equals(Expression.ZERO)){var US=TS._pow(2).add(QE._pow(2)).squareRoot();try{var kC=Expression.TWO.multiply(QE.divide(US.add(TS)).arctan());return US._nthRoot(bE).multiply(Expression.I.multiply(kC.divide(Expression.Integer.fromNumber(bE))).exp())}catch(zA){console.debug(zA)}}}if(uE instanceof Expression.Addition){for(var PS=void 0,AS=0,iS=Expression.ONE,KS=Expression.ONE,oT=uE;!oT.equals(Expression.ONE)&&!oT.equals(Expression.ONE.negate());){var zT=Expression.simpleDivisor(oT);AS===0?(PS=zT,AS+=1):zT.equals(PS)?(AS+=1,AS===bE&&(AS=0,iS=iS.multiply(PS))):AS!==0&&(KS=KS.multiply(Expression.pow(PS,AS)),PS=zT,AS=1),oT=oT.divide(zT)}if(iS!==Expression.ONE){AS!==0&&(KS=KS.multiply(Expression.pow(PS,AS))),oT.equals(Expression.ONE.negate())&&(KS=KS.multiply(oT));var SS=c(bE,KS);if(SS!=null)return iS.multiply(SS)}}if(uE instanceof Expression.Exponentiation&&uE.a instanceof Expression.Symbol){var XS=uE.b.divide(Expression.Integer.fromNumber(bE));return XS.equals(Expression.ONE)?uE.a:new Expression.Exponentiation(uE.a,XS)}if(!Expression.isConstant(uE)&&uE.isNegative()&&(bE===2||bE%2!==0)){uE=uE.negate();var kE=c(bE,uE);return kE==null?null:Expression.ONE.negate()._nthRoot(bE).multiply(kE)}if((uE instanceof Expression.Integer||uE instanceof Expression.Complex)&&uE.isNegative()&&bE%2===0){var kE=uE instanceof Expression.Integer?uE._nthRoot(2):c(2,uE);return kE==null?null:c(bE/2,kE)}if(Expression.has(uE,Expression.Sin)||Expression.has(uE,Expression.Cos)){var VT=c(2,Expression._replaceSinCos(uE));if(VT!=null)return Expression._replaceBySinCos(VT).simplifyExpression()}var GA=void 0;try{GA=uE._nthRoot(bE)}catch(zA){console.error(zA)}if(GA==null){var gS=uE,sA=Expression.getConjugateExpression(gS.getNumerator());if((bE===3||bE===2)&&sA instanceof Expression.Integer){if(bE===2&&Expression._isPositive(uE.negate()))return Expression.I.multiply(c(2,uE.negate()));var gS=uE,VT=new Expression.Symbol("x")._pow(bE).subtract(gS).getNumerator(),FC=Polynomial$1.toPolynomial(Expression.getConjugateExpression(VT),new Expression.Symbol("x")),lA=FC.getZeros();for(const VA of lA)if(VA._pow(bE).equals(uE))return VA;return null}}return GA}},p=function(bE,uE,SE){if(bE===1)return uE;var tS=c(bE,uE);return tS==null&&(uE instanceof Expression.Integer||typeof hit=="function"&&hit({nthRoot:(bE===2?"squareRoot":bE+"-root")+":"+uE.toString()+":"+SE.toString()})),tS},d=function(bE,uE,SE){for(var tS=uE.getroots(t!=null?function(qE){var $E=Object.assign({},qE,{content:u.multiply(qE.content),roots:bE.concat(qE.roots),newPolynomialVariable:SE});t($E)}:void 0),WE=0;WE<tS.length;WE+=1)bE.push(tS[WE])};if(n.getDegree()>=2){var x=n.getGCDOfTermDegrees();if(x>=2){var _=x===n.getDegree();typeof hit=="function"&&(x===n.getDegree()?hit({getroots:{allZeros:""}}):hit({getroots:x%2===0?n.getDegree()===4?{biquadratic:""}:{even:""}:{xyz:n.toString()}}));for(var S=new Array(Math.floor((n.getDegree()+x)/x)),T=0,A=0;A<=n.getDegree();A+=x)S[T]=n.getCoefficient(A),T+=1;var R=Polynomial$1.from(S),D=[];_?D=R.getroots():(t!=null&&t({content:u,roots:a,newPolynomial:R,type:"t = x^g",g:x,newPolynomialVariable:new Expression.Symbol("t")}),d(D,R,new Expression.Symbol("t")));for(var O=n.getDegree(),T=0;T<D.length;T+=1){var F=D[T],z=p(x,F,n);if(z!=null){var j=null;if((!_||x>=5||!n.hasIntegerCoefficients())&&(x<=24&&(17896830>>x)%2===1||x===48)){j=Polynomial$1.of(Expression.ONE).shift(x).add(Polynomial$1.of(F.negate()));for(var Z=Expression.E.pow(Expression.I.multiply(Expression.TWO.multiply(Expression.PI)).divide(Expression.Integer.fromNumber(x))),W=Expression.ONE,A=0;A<x;A+=1){var J=W.multiply(z);W=W.multiply(Z),a.push(J)}}else a.push(z),j=Polynomial$1.of(z.negate(),Expression.ONE),x%2===0&&(a.push(z.negate()),j=Polynomial$1.of(z.multiply(z).negate(),Expression.ZERO,Expression.ONE));var en=n.divideAndRemainder(j).quotient;console.assert(n.subtract(en.multiply(j)).map(uE=>uE.simplifyExpression()).getDegree()<0),n=en}}if(!_)t!=null&&t({content:u,roots:a,newPolynomial:n,type:"x = t^(1/g)",g:x});else{var tn=x===2?"applyDifferenceOfSquaresRule":x===3?"applyDifferenceOfCubesRule":"applyDifferenceOfNthPowersRule";t!=null&&t({content:u,roots:a,newPolynomial:n,type:tn,g:x})}var Ct=!0;return O!==n.getDegree()&&Ct&&n.getDegree()>0&&d(a,n),a}}//! new: solution of quadratic equations
if(n.getDegree()===2){var Q=n.getCoefficient(2),on=n.getCoefficient(1),Z=n.getCoefficient(0),gn=on.multiply(on).subtract(Expression.TWO.multiply(Expression.TWO).multiply(Q).multiply(Z));gn=gn.simplifyExpression();var In=p(2,gn,n);if(typeof hit=="function"&&hit({getroots:{quadratic:In==null?gn instanceof Expression.Integer?gn.compareTo(Expression.ZERO):"?"+gn.toString():"OK"}}),In!=null){if(In.equals(Expression.ZERO)){var dn=on.negate().divide(Expression.TWO.multiply(Q));a.push(dn),a.push(dn)}else{var ix=on.negate().subtract(In).divide(Expression.TWO.multiply(Q)),Cn=on.negate().add(In).divide(Expression.TWO.multiply(Q));a.push(ix),a.push(Cn)}return n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"solveQuadraticEquation"}),a}}if(n.getDegree()>=4&&n.getDegree()%2===0){for(var ax=Math.floor(n.getDegree()/2),sx=1;sx<ax+1&&n.getCoefficient(ax+sx).equals(Expression.ZERO)&&n.getCoefficient(ax-sx).equals(Expression.ZERO);)sx+=1;if(sx<ax+1&&!n.getCoefficient(ax+sx).equals(Expression.ZERO)&&!n.getCoefficient(ax-sx).equals(Expression.ZERO)){for(var lx=Expression.Integer.fromNumber(sx),ox=n.getCoefficient(ax+sx).divide(n.getCoefficient(ax-sx)),hx=!0,A=2;A<ax+1&&hx;A+=1)hx=hx&&n.getCoefficient(ax+A).pow(lx).subtract(n.getCoefficient(ax-A).pow(lx).multiply(ox.pow(Expression.Integer.fromNumber(A)))).equals(Expression.ZERO);if(hx&&typeof hit=="function"&&hit({getroots:{quasiPalindromic:n.getDegree()}}),hx&&n.getDegree()<=Math.log2(Number.MAX_SAFE_INTEGER+1)){for(var _x=function(bE,uE){var SE=function(qE,$E){return $E===0?1:Math.floor(qE*SE(qE-1,$E-1)/$E)},tS=function(qE,$E,kE){return qE-2*$E>=0?tS(qE-2*$E,1,bE).scale(Expression.Integer.fromNumber(SE(qE,$E)).multiply(kE).negate()).add(tS(qE,$E+1,kE.multiply(bE))):Polynomial$1.of(Expression.ONE).shift(qE)},WE=function(qE,$E){return $E<=qE?tS(qE-$E,1,bE).scale(uE.getCoefficient($E)).add(WE(qE,$E+1)):Polynomial$1.ZERO};return WE(Math.floor(uE.getDegree()/2),0)},ux=sx===1?ox:p(sx,ox,n),px=_x(ux,n),dx=px.getroots(),A=0;A<dx.length;A+=1){for(var mx=dx[A],gx=Polynomial$1.of(Expression.ONE,mx.negate(),ux),Sx=gx.getroots(),sx=0;sx<Sx.length;sx+=1){var J=Sx[sx];a.push(J)}n=n.divideAndRemainder(gx.scale(gx.getLeadingCoefficient().inverse())).quotient}return t!=null&&t({content:u,roots:a,newPolynomial:n,type:"solvePalindromicEquaion"}),a}}}if(n.getDegree()>=2){var O=n.getDegree(),Ex=function(uE){for(var SE=0;SE<=uE.getDegree();SE+=1)if(uE.getCoefficient(SE).equals(Expression.ZERO))return!0;return!1};if(!Ex(n)){for(var x=n.getCoefficient(O-1).divide(n.getCoefficient(O)).divide(Expression.Integer.fromNumber(O)),Ct=!0,T=n.getDegree()-1;T>=1&&Ct;T-=1)Ct=x.equals(n.getCoefficient(T-1).divide(n.getCoefficient(T)).multiply(Expression.Integer.fromNumber(O-T+1)).divide(Expression.Integer.fromNumber(T)));if(Ct){for(var J=x.negate(),T=0;T<O;T+=1)a.push(J);return n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"(ax+b)**n"}),a}}}if(n.getDegree()>=2){var J=n.doRationalRootTest();if(J!=null)return n=n.divideAndRemainder(Polynomial$1.of(J.negate(),Expression.ONE)).quotient,a.push(J),typeof hit=="function"&&hit({getroots:{rational:""}}),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"useTheRationalRootTest"}),n.getDegree()>0&&d(a,n),a}if(!n.hasIntegerCoefficients()&&n.getDegree()===3){var Cx=n._getShiftToDepressed();if(!Cx.equals(Expression.ZERO)){var Ax=n._translateRoots(Cx);if(Ax.hasIntegerCoefficients()){var Tx=Ax.getroots();if(Tx.length===0){Tx=Ax.getZeros();debugger}if(Tx.length===n.getDegree()){for(const bE of Tx)a.push(bE.subtract(Cx));return n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else debugger}}}if(n.hasIntegerCoefficients()){var O=n.getDegree(),Q=n.getLeadingCoefficient(),on=n.getCoefficient(O-1);if(!on.equals(Expression.ZERO)){var Cx=on.divide(Expression.Integer.fromNumber(O).multiply(Q)),kx=n._translateRoots(Cx),Rx=[];if(t!=null){var $x=t;t=function(WE){$x({content:u.multiply(kx.getLeadingCoefficient().divide(n.getLeadingCoefficient()).inverse()),roots:a,newPolynomial:kx,type:"eliminationOfTheSubDominantTerm",b:on,n:O,a:Q,newPolynomialVariable:new Expression.Symbol("t")}),$x(WE),t=$x}}if(d(Rx,kx,new Expression.Symbol("t")),Rx.length>0){for(const WE of Rx)a.push(WE.subtract(Cx));Rx.length===kx.getDegree()?n=Polynomial$1.of(n.getLeadingCoefficient()):console.warn("TODO:")}return a}}if(n.getDegree()===3){var Q=n.getCoefficient(3),on=n.getCoefficient(2),Z=n.getCoefficient(1),j=n.getCoefficient(0),Gx=Expression.Integer.fromNumber(3),Cx=on.divide(Gx.multiply(Q)),_x=function(QE){return QE.subtract(Cx)},qx=n._translateRoots(Cx),kx=qx.scale(qx.getLeadingCoefficient().inverse()),Ax=kx.getCoefficient(1),R=kx.getCoefficient(0),Dx=Ax.divide(Gx)._pow(3).add(R.divide(Expression.TWO)._pow(2));typeof hit=="function"&&hit({getroots:{cubic:(Dx instanceof Expression.Integer?Dx.compareTo(Expression.ZERO):"?")+"-"+(Ax instanceof Expression.Integer?Ax.compareTo(Expression.ZERO):"?")}});var lE=Expression.ONE.negate().divide(Expression.TWO),cE=Expression.I.multiply(Gx.squareRoot()).divide(Expression.TWO),nE=lE.subtract(cE),iE=lE.add(cE);if(R.equals(Expression.ZERO)&&Ax.equals(Expression.ZERO)){var J=_x(Expression.ZERO);return a.push(J),a.push(J),a.push(J),n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else if(R.equals(Expression.ZERO)){a.push(_x(Expression.ZERO));var qx=p(2,Ax.negate(),n);return a.push(_x(qx)),a.push(_x(qx.negate())),n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else if(Ax.equals(Expression.ZERO)){var qx=p(3,R.negate(),n);return a.push(_x(qx)),a.push(_x(qx.multiply(nE))),a.push(_x(qx.multiply(iE))),n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else if(Dx.equals(Expression.ZERO)){var _E=Gx.multiply(R).divide(Expression.TWO.multiply(Ax)).negate(),sE=_x(_E);a.push(sE),a.push(sE);var ME=_E.multiply(Expression.TWO).negate(),fx=_x(ME);return a.push(fx),n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}else{var qx=p(2,Dx,n);if(qx!=null){var yx=p(3,R.negate().divide(Expression.TWO).add(qx),n);if(yx!=null&&!(yx instanceof Expression.ExpressionPolynomialRoot)&&!(yx instanceof Expression.ExpressionWithPolynomialRoot)){var Ix=function(_S){return _x(_S.subtract(Ax.divide(Gx.multiply(_S))))};return a.push(Ix(yx)),a.push(Ix(yx.multiply(nE))),a.push(Ix(yx.multiply(iE))),n=Polynomial$1.of(n.getLeadingCoefficient()),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"solveCubicEquation"}),a}}}}//!2018-12-23
if(n.getDegree()>2){var qx=n.squareFreeFactors(),Nx=qx.a0,Fx=qx.a1;if(Nx.getDegree()>0){for(var Px=Nx,Wx=Nx.getroots(function(uE){Px=uE.newPolynomial}),jx=null,A=0;A<Wx.length;A+=1){var J=Wx[A];a.push(J),(jx==null||!jx.equals(J))&&a.push(J),jx=J}for(var Qx=Fx,tE=Fx.getroots(function(uE){Qx=uE.newPolynomial}),A=0;A<tE.length;A+=1)a.push(tE[A]);if(Px!=null&&(n=Qx.multiply(Px).multiply(Polynomial$1.polynomialGCD(Px,n))),Wx.length>0||tE.length>0)return typeof hit=="function"&&hit({getroots:{squareFreeFactorization:n.toString()}}),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"squareFreeFactorization"}),a}}//!
if(n.getDegree()>=4){var x=n.factorize();if(x!=null){for(var Cx=n.divideAndRemainder(x).quotient,hE=null,gE=x.getroots(function(SE){hE=SE.newPolynomial.scale(SE.content)}),A=0;A<gE.length;A+=1)a.push(gE[A]);gE.length>0&&(n=n.divideAndRemainder(x.divideAndRemainder(hE).quotient).quotient);for(var zx=null,Xx=Cx.getroots(function(SE){zx=SE.newPolynomial.scale(SE.content)}),A=0;A<Xx.length;A+=1)a.push(Xx[A]);return Xx.length>0&&(n=n.divideAndRemainder(Cx.divideAndRemainder(zx).quotient).quotient),(Xx.length>0||gE.length>0)&&(typeof hit=="function"&&hit({getroots:{methodOfKronecker:n.toString()}}),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"methodOfKronecker"})),a}}if(n.getDegree()>=3){for(var A=0;A<=n.getDegree();A+=1)if(Expression.has(n.getCoefficient(A),Expression.SquareRoot)){var Z=null;if(Expression._map(function(SE){return Z==null&&SE instanceof Expression.SquareRoot&&SE.a instanceof Expression.Integer&&(Z=SE),SE},n.getCoefficient(A)),Z!=null){var qx=new Expression.Symbol("_t"),Ax=n.map(function($E){var kE=Expression.ZERO;for(var TS of $E.summands()){var QE=Expression.ONE;for(var _S of TS.factors())if(_S.equals(Z))QE=QE.multiply(qx);else if(_S instanceof Expression.Integer){for(var gS=0;_S.gcd(Z.a).equals(Z.a);)gS+=2,_S=_S.divide(Z.a);QE=QE.multiply(_S.multiply(qx._pow(gS)))}else QE=QE.multiply(_S);kE=kE.add(QE)}return kE}),Q="_x"+ ++counter,oE=Polynomial$1.toPolynomial(Ax.calcAt(new Expression.Symbol(Q)),qx);//!2020-12-11
var x=oE.getGCDOfTermDegrees();if(x>=2){for(var S=new Array(Math.floor((oE.getDegree()+x)/x)),T=0,Jx=0;Jx<=oE.getDegree();Jx+=x)S[T]=oE.getCoefficient(Jx).multiply(Z._pow(Jx-T)),T+=1;oE=Polynomial$1.from(S)}//!
if(oE.getDegree()>1){for(var fE=[],pE=null;(pE=oE.doRationalRootTest())!=null;)fE.push(pE),oE=oE.divideAndRemainder(Polynomial$1.of(pE.negate(),Expression.ONE),"throw").quotient;for(var vx=a.length,sx=0;sx<fE.length;sx+=1)for(var xx=Polynomial$1.toPolynomial(fE[sx].subtract(Z).getNumerator(),new Expression.Symbol(Q)).getroots(),T=0;T<xx.length;T+=1){var J=xx[T];a.push(J),n=n.divideAndRemainder(Polynomial$1.of(J.negate(),Expression.ONE)).quotient}if(a.length>vx)return typeof hit=="function"&&hit({getroots:{methodOfIntroducingANewVariable:""}}),t!=null&&t({content:u,roots:a,newPolynomial:n,type:"methodOfIntroducingANewVariable",t:Z}),d(a,n),a}}}}if(n.getDegree()===4){var Mx=n.getCoefficient(4),Ax=n.scale(Mx.inverse()),on=Ax.getCoefficient(3),Lx=new Expression.Symbol("$y"),_x=function($E){return $E.subtract(on.divide(Expression.Integer.fromNumber(4)))},Kx=Ax.calcAt(_x(Lx)),dE=Polynomial$1.toPolynomial(Kx.getNumerator(),Lx),Ax=dE.getCoefficient(2),R=dE.getCoefficient(1),vE=dE.getCoefficient(0);const WE=Polynomial$1.of(R._pow(2).negate(),Ax._pow(2).subtract(Expression.TWO.add(Expression.TWO).multiply(vE)),Expression.TWO.multiply(Ax),Expression.ONE),qE=WE.getCoefficient(1).equals(Expression.ZERO)&&WE.getCoefficient(2).equals(Expression.ZERO)||WE.getCoefficient(0).equals(Expression.ZERO)?WE.getroots():[WE.doRationalRootTest()||Expression.ZERO];for(const $E of qE){const kE=c(2,$E);if(!$E.equals(Expression.ZERO)&&kE!=null){const TS=kE.negate(),QE=Ax.add(kE._pow(2)).add(R.divide(kE)).divide(Expression.TWO),_S=Ax.add(kE._pow(2)).subtract(R.divide(kE)).divide(Expression.TWO),gS=Polynomial$1.of(QE,TS,Expression.ONE),XS=Polynomial$1.of(_S,kE,Expression.ONE);var mE=Polynomial$1.of(Expression.ONE);for(const iS of gS.getroots()){const US=_x(iS);a.push(US),mE=mE.multiply(Polynomial$1.of(US.negate(),Expression.ONE))}for(const iS of XS.getroots()){const US=_x(iS);a.push(US),mE=mE.multiply(Polynomial$1.of(US.negate(),Expression.ONE))}if(mE.getDegree()>0)return n=n.divideAndRemainder(mE).quotient,t!=null&&t({content:u,roots:a,newPolynomial:n,type:"solveQuarticEcuation"}),d(a,n),a}}}if(!n.hasIntegerCoefficients()&&n.getDegree()>2){var yE=new Expression.Symbol("$$"),Kx=n.calcAt(yE),Z=Expression.getConjugate(Kx);if(Z!=null){for(var CE=Polynomial$1.toPolynomial(Z.multiply(Kx),yE).getSquareFreePolynomial().getroots(function(SE){SE.newPolynomial}),A=0;A<CE.length;A+=1){var J=CE[A];n.calcAt(J).equals(Expression.ZERO)?(a.push(J),n=n.divideAndRemainder(Polynomial$1.of(J.negate(),Expression.ONE)).quotient):console.debug(J)}return CE.length>0&&(t!=null&&t({content:u,roots:a,newPolynomial:n,type:"multiplyByConjugates",t:Z}),d(a,n)),a}}n.getDegree()>=0&&typeof hit=="function"&&hit({getroots:{other:n.getDegree()}});//!2023-05-08 new TODO: !?
if(n.hasIntegerCoefficients()&&n.getDegree()>=4&&n.getDegree()%2===0&&n.getDegree()<=12){var gx=new Expression.Symbol("u"),NE=new Expression.Symbol("v"),RE=n.calcAt(gx.add(NE)),sS=n.calcAt(gx.subtract(NE)),dS=Polynomial$1.resultant(Polynomial$1.toPolynomial(RE,gx),Polynomial$1.toPolynomial(sS,gx));dS=Polynomial$1.toPolynomial(dS,NE);for(var YE=function(uE){for(var SE=[],tS=uE.factorize();tS!=null&&uE.getDegree()>1;)tS.getDegree()<=2&&(SE=SE.concat(tS.getroots())),uE=uE.divideAndRemainder(tS).quotient,tS=uE.factorize();return SE},xS=Expression.unique(YE(dS.primitivePart())),A=0;A<xS.length;A++){var NE=xS[A],x=Polynomial$1.polynomialGCD(n._translateRoots(NE),n._translateRoots(NE.negate()));if(x.getDegree()<=3){var hS=x.getroots();if(hS.length>0){for(var bS=Polynomial$1.of(Expression.ONE),A=0;A<hS.length;A+=1){var gx=hS[A],J=gx.add(NE);a.push(J),bS=bS.multiply(Polynomial$1.of(J.negate(),Expression.ONE))}var qx=n.divideAndRemainder(bS);if(!qx.remainder.equals(Polynomial$1.ZERO))throw new TypeError;return n=qx.quotient,d(a,n),a}}}}return a};Polynomial$1.prototype.derive=function(){for(var t=new PolynomialData(this.a.size),n=0;n<this.a.size;n+=1){var a=this.a.degree(n),s=this.a.coefficient(n);if(a>=1){var l=Expression.Integer.fromNumber(a).multiply(s);l.equals(Expression.ZERO)||t.add(a-1,l)}}return new Polynomial$1(t)};Polynomial$1.prototype.getSquareFreePolynomial=function(){return this.divideAndRemainder(this.squareFreeFactors().a0).quotient};Polynomial$1.prototype.isSquareFreePolynomial=function(){return this.squareFreeFactors().a0.equals(Polynomial$1.of(Expression.ONE))};Polynomial$1.prototype.squareFreeFactors=function(){for(var t=this,n=0;t.getCoefficient(n).equals(Expression.ZERO);)n+=1;if(t=t.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(n),"throw").quotient,t.getDegree()!==0){var a=t,s=a.derive(),l=Polynomial$1.polynomialGCD(a,s);if(l.getDegree()!==0){Expression.isConstant(l.getLeadingCoefficient())&&(l=l.scale(l.getLeadingCoefficient().inverse())),a.hasIntegerCoefficients()&&(l=l.scale(l.getContent().inverse()));var u=a.divideAndRemainder(l,a._hasIntegerLikeCoefficients()?"throw":void 0).quotient,c=Polynomial$1.polynomialGCD(u,l),p=u.divideAndRemainder(c,u._hasIntegerLikeCoefficients()?"throw":void 0).quotient;return{a1:p.shift(n===1?1:0),a0:l.shift(n>1?n-1:0)}}}return{a1:t.shift(n===1?1:0),a0:Polynomial$1.of(Expression.ONE).shift(n>1?n-1:0)}};Polynomial$1.testables={multiplyByKroneckerSubstitution};Polynomial$1.prototype._findGoodSubstitution=function(){var t=function(a){for(var s=a.getCoefficient(0).abs(),l=0;l<a.getDegree();l+=1)s=s.gcd(a.getCoefficient(l).abs());s=s.abs();for(var u=Expression.ONE;!s.equals(Expression.ONE);){var c=s.primeFactor();if(!a.getLeadingCoefficient().remainder(c).equals(Expression.ZERO)){for(var p=!0,l=0;l<a.getDegree()&&p;l+=1){var d=c._pow(a.getDegree()-l);p=a.getCoefficient(l).gcd(d).abs().equals(d)}p&&(u=u.multiply(c),a=a._scaleRoots(c.inverse()).primitivePart())}s=s.truncatingDivide(c)}return u},n=t(this);return n.divide(t(this._scaleRoots(n.inverse())._exponentiateRoots(-1)))};Polynomial$1.prototype._tryGoodSubstitution=function(){return this._scaleRoots(this._findGoodSubstitution())};Polynomial$1.prototype._getShiftToDepressed=function(){var t=this.getDegree(),n=this.getLeadingCoefficient(),a=this.getCoefficient(t-1),s=a.divide(Expression.Integer.fromNumber(t).multiply(n));return s};Polynomial$1.prototype._factorizeOverTheIntegers=function(){return factorizeOverTheIntegers(this)};Polynomial$1.prototype._factorizeMultivariateIntegerPolynomial=function(){var t=Polynomial$1._getY(this,this),n=Date.now();const a=function(u,c){return u.map(p=>new Expression.Polynomial(Polynomial$1.toPolynomial(p,new Expression.Symbol(c))))};var s=factorizeOverTheIntegers._factorizeMultivariateIntegerPolynomial(a(this,t.symbol)),l=Date.now();return l-n>4&&console.log("_factorizeMultivariateIntegerPolynomial",l-n,this.toString()),s==null?null:(s=s.map(u=>u.polynomial.calcAt(t)),s.getLeadingCoefficient().isNegative()&&(s=s.negate()),s)};Polynomial$1.prototype.factorize=function(){if(this.getCoefficient(0).equals(Expression.ZERO))return Polynomial$1.of(Expression.ZERO,Expression.ONE);var t=this.getContent();if(!t.equals(Expression.ONE)&&!t.equals(Expression.ONE.negate()))throw new RangeError;if(this.getDegree()===1)return null;if(this.getDegree()===2){var n=function(D){console.assert(D.getDegree()===2);var O=D.getCoefficient(2),F=D.getCoefficient(1),z=D.getCoefficient(0);return F.multiply(F).subtract(Expression.Integer.fromNumber(4).multiply(O).multiply(z))}(this);if(n instanceof Expression.Integer&&!n._isPerfectSquare())return null}var a=this.squareFreeFactors();if(a.a0.getDegree()>0)return a.a1.getDegree()>0?a.a1:a.a0;if(this.getDegree()<2)return null;//!new
var s,l;this.hasIntegerCoefficients();var u=this.getDegree(),c=this.getCoefficient(u-1);if(!c.equals(Expression.ZERO)&&!this.hasIntegerCoefficients()){var p=this.getLeadingCoefficient(),d=c.divide(Expression.Integer.fromNumber(u).multiply(p)),x=this._translateRoots(d);if(x.hasIntegerCoefficients()){x=x.primitivePart();var _=x.factorize();return _!=null?_._translateRoots(d.negate()).primitivePart():null}else console.warn("???")}//!
//!new
if(this.isEven()&&this.hasIntegerCoefficients()&&(!this.getCoefficient(0).abs()._isPerfectSquare()||!this.getCoefficient(this.getDegree()).abs()._isPerfectSquare())){var l=this._exponentiateRoots(2).factorize();return l!=null?l._exponentiateRoots(1/2):null}var S=this.getGCDOfTermDegrees();if(S>2){var l=this._exponentiateRoots(S).factorize();if(l!=null)return l._exponentiateRoots(1/S)}//!
if(!this.hasIntegerCoefficients()||this.getDegree()<4&&this.getLeadingCoefficient().abs().bitLength()+this.getCoefficient(0).abs().bitLength()<9){var T=this.doRationalRootTest();if(T!=null)return Polynomial$1.of(T.getNumerator(),T.getDenominator().negate());if(this.getDegree()<4)return null}//!
var A=this;return A.hasIntegerCoefficients()?A._factorizeOverTheIntegers().next().value:A._hasIntegerLikeCoefficients()&&Polynomial$1._getY(A,A)!=null?A._factorizeMultivariateIntegerPolynomial():null};Polynomial$1.prototype.primitivePart=function(){return this.scale(this.getContent().inverse())};Polynomial$1.prototype.modularInverse=function(t){if(t.getDegree()<9&&this.getDegree()<t.getDegree()&&!1||this.getDegree()<t.getDegree()&&t.getDegree()<=3){for(var n=t.getDegree(),a=this,s=Polynomial$1.of(n%2===1?Expression.ONE:Expression.ONE.negate());a.getDegree()>0;){var l=function(en,tn){for(var Ct=en,Q=Polynomial$1.ZERO;Ct.getDegree()>=tn.getDegree();){var on=Ct.getLeadingCoefficient();Q=Q.scale(tn.getLeadingCoefficient()),Ct=Ct.scale(tn.getLeadingCoefficient());var gn=Polynomial$1.of(on.negate()).shift(Ct.getDegree()-tn.getDegree());Q=Q.add(gn),Ct=Ct.add(tn.multiply(gn))}return{Q,R:Ct}},u=l(t.negate(),a);a=u.R,s=s.multiply(u.Q)}s=s.divideAndRemainder(t).remainder;var c,_,p=s;if(t.getDegree()<=3)return s}var d=t,x=Math.gcd(this.getGCDOfTermDegrees(),d.getGCDOfTermDegrees());if(x>1)return this._exponentiateRoots(x).modularInverse(d._exponentiateRoots(x)).primitivePart()._exponentiateRoots(1/x);this.hasIntegerCoefficients()&&d.hasIntegerCoefficients();var _=this,S=d,W=_.getDegree()>=d.getDegree()?Polynomial$1.pseudoRemainder(_,d).primitivePart():_,T=Polynomial$1.of(Expression.ZERO),A=Polynomial$1.of(Expression.ONE),R=(_._hasIntegerLikeCoefficients()&&d._hasIntegerLikeCoefficients(),"primitive");for(var u of Polynomial$1._pseudoRemainderSequence(S,W,R)){var D=W.getLeadingCoefficient()._pow(S.getDegree()-W.getDegree()+1),O=u.q,F=u.,z=T.scale(D).subtract(O.multiply(A));{var x=z.getContent().gcd(F);z=z.divideAndRemainder(Polynomial$1.of(x),"throw").quotient,A=A.scale(F.divide(x))}[T,A]=[A,z];var j=u.R;[S,W]=[W,j]}var Z=S;if(Z.getDegree()!==0)throw new TypeError;T=T.primitivePart().scale(d.getLeadingCoefficient()._pow(Math.max(T.getDegree()+_.getDegree()-d.getDegree()+1,0)));var W=T.multiply(_).divideAndRemainder(d,"throw").remainder;if(W.getDegree()!==0)throw new TypeError;return p!=null&&console.log("!",p.toString(),T.toString()),T};const SUBQUADRATIC_GCD_THRESHOLD=32*1024,SUBQUADRATIC_HALFGCD_THRESHOLD=4096;let SMALL_GCD_MAX=0n,DIGITSIZE=0,smallgcd=null,smallgcdext=null,wasmHelper=null,jsHelper=null;if(typeof WebAssembly<"u"){const t=new Uint8Array([0,97,115,109,1,0,0,0,1,20,3,96,0,1,126,96,2,126,126,1,126,96,5,126,126,126,126,127,1,127,3,8,7,1,1,2,0,0,0,0,6,21,4,126,1,66,0,11,126,1,66,0,11,126,1,66,0,11,126,1,66,0,11,7,47,7,6,117,54,52,103,99,100,0,0,9,117,54,52,103,99,100,101,120,116,0,1,6,104,101,108,112,101,114,0,2,1,65,0,3,1,66,0,4,1,67,0,5,1,68,0,6,10,141,4,7,37,1,1,126,32,1,66,0,82,4,64,3,64,32,0,32,1,130,33,2,32,1,33,0,32,2,34,1,66,0,82,13,0,11,11,32,0,11,97,1,6,126,66,1,33,6,66,1,33,3,32,1,66,0,82,4,64,3,64,32,0,32,0,32,1,128,34,7,32,1,126,125,33,4,32,1,33,0,32,6,32,2,32,7,126,125,33,1,32,5,32,3,32,7,126,125,33,7,32,2,33,6,32,3,33,5,32,1,33,2,32,7,33,3,32,4,34,1,66,0,82,13,0,11,11,32,6,36,0,32,5,36,1,32,0,11,238,2,2,7,126,2,127,66,1,33,9,66,1,33,7,32,0,66,127,82,32,2,66,127,82,113,4,64,3,64,32,0,32,6,124,33,8,32,0,32,9,124,33,6,32,2,32,5,124,33,5,32,2,32,7,124,33,7,32,12,65,1,113,4,64,32,8,33,9,32,6,33,8,32,9,33,6,32,5,33,9,32,7,33,5,32,9,33,7,11,3,64,32,5,32,6,32,8,32,7,128,34,11,32,5,126,125,34,9,86,4,64,32,12,65,1,106,33,12,32,8,32,7,32,11,126,125,33,10,32,0,32,2,32,11,126,125,33,11,32,5,33,8,32,7,33,6,32,2,33,0,32,10,33,5,32,9,33,7,32,11,33,2,12,1,11,11,32,6,32,0,125,33,9,32,8,32,0,125,33,6,32,5,32,2,125,33,5,32,7,32,2,125,33,7,32,12,65,1,113,4,64,32,9,33,8,32,6,33,9,32,8,33,6,32,5,33,8,32,7,33,5,32,8,33,7,11,32,4,32,0,32,9,124,34,8,32,0,32,6,124,34,10,32,8,32,10,86,27,121,167,34,13,32,4,32,13,72,27,34,13,4,64,32,1,32,1,32,4,32,13,107,34,4,172,34,8,136,34,10,32,8,134,125,33,1,32,3,32,3,32,8,136,34,11,32,8,134,125,33,3,32,9,32,10,126,32,6,32,11,126,124,32,0,32,13,172,34,8,134,124,33,0,32,5,32,10,126,32,7,32,11,126,124,32,2,32,8,134,124,33,2,11,32,13,13,0,11,11,32,9,36,0,32,6,36,1,32,5,36,2,32,7,36,3,65,0,11,4,0,35,0,11,4,0,35,1,11,4,0,35,2,11,4,0,35,3,11]);try{const n=new WebAssembly.Instance(new WebAssembly.Module(t)).exports;n.helper(1n,0n,1n,0n)!=null&&(wasmHelper=function(a,s,l,u,c){return n.helper(a,s,l,u,c),[n.A(),n.B(),n.C(),n.D()]},DIGITSIZE=64,SMALL_GCD_MAX=BigInt.asUintN(64,-1n)),n.u64gcd(0n,0n)===0n&&(smallgcd=n.u64gcd),n.u64gcdext(0n,0n)===0n&&(smallgcdext=function(a,s){const l=n.u64gcdext(a,s);return[n.A(),n.B(),l]})}catch(n){console.log(n)}}function AsmModule(t){var n=t.Math.floor,a=t.Math.max,s=t.Math.clz32,l=-0,u=-0,c=-0,p=-0;function d(F,z){F=+F,z=+z;for(var j=-0,Z=-0;z>-0;)Z=+n(F/z),j=F-Z*z,F=z,z=j;return+F}function x(F,z){F=+F,z=+z;for(var j=-0,Z=-0,W=1,J=-0,en=-0,tn=1,Ct=-0,Q=-0;z>-0;)Z=+n(F/z),j=F-Z*z,F=z,z=j,Ct=W-Z*en,Q=J-Z*tn,W=en,J=tn,en=Ct,tn=Q;return l=W,u=J,+F}function _(F){F=+F;for(var z=0;F>=4294967296;)F=F*23283064365386963e-26,z=z+32|0;return z=z+(32-(s(~~F)|0))|0,z|0}function S(F){F=F|0;for(var z=1;(F|0)<0;)F=F+32|0,z=z*23283064365386963e-26;for(;(F|0)>=32;)F=F-32|0,z=z*4294967296;return z=z*+(1<<F>>>0),+z}function T(F,z,j,Z,W){F=+F,z=+z,j=+j,Z=+Z,W=W|0;var J=1,en=-0,tn=-0,Ct=1,Q=0,on=0,gn=-0,In=-0,dn=-0,ix=-0,Cn=-0,ax=-0,sx=0,lx=-0,ox=-0,hx=-0,_x=-0,ux=-0;if(j!=-0)do{do gn=n(F/j),In=F-gn*j,dn=tn,ix=Ct,Cn=J-gn*tn,ax=en-gn*Ct,on=-0<=In+Cn&In+Cn<j+tn&-0<=In+ax&In+ax<j+Ct,on&&(F=j,j=In,J=dn,en=ix,tn=Cn,Ct=ax);while(on);sx=53-(_(F+a(J,en))|0)|0,Q=(sx|0)<0?sx:(sx|0)>(W|0)?W:sx,(sx|0)!=0&&(lx=+S(W-Q|0),ox=+S(Q-W|0),hx=+n(z*ox),_x=+n(Z*ox),z=z-hx*lx,Z=Z-_x*lx,W=W-Q|0,ux=+S(Q),F=J*hx+en*_x+F*ux,j=tn*hx+Ct*_x+j*ux)}while((Q|0)!=0);return l=J,u=en,c=tn,p=Ct,0}function A(){return l}function R(){return u}function D(){return c}function O(){return p}return{f64gcdext:x,f64gcd:d,helper:T,A,B:R,C:D,D:O}}if(DIGITSIZE===0){const t=AsmModule(globalThis);jsHelper=function(n,a,s,l,u){return t.helper(n,a,s,l,u),[BigInt(t.A()),BigInt(t.B()),BigInt(t.C()),BigInt(t.D())]},DIGITSIZE=53,SMALL_GCD_MAX=BigInt.asUintN(53,-1n),smallgcd=function(n,a){return BigInt(t.f64gcd(Number(BigInt(n)),Number(BigInt(a))))},smallgcdext=function(n,a){const s=t.f64gcdext(Number(BigInt(n)),Number(BigInt(a)));return[BigInt(t.A()),BigInt(t.B()),BigInt(s)]}}function bitLength(t){const n=t.toString(16),a=n.charCodeAt(0)-0-48;if(a<=0)throw new RangeError;return(n.length-1)*4+(32-Math.clz32(Math.min(a,8)))}const frexpf64=typeof Float64Array<"u"?new Float64Array(1):null,frexpi32=typeof Float64Array<"u"?new Int32Array(frexpf64.buffer):null;let previousValue=0;function bitLength2(t){if(previousValue<=1024){const a=-0+Number(BigInt(t));if(frexpf64!=null){frexpf64[0]=a;const u=(frexpi32[1]>>20)-1023;if(u<1024&&frexpi32[0]!==0||(frexpi32[1]&1048575)!==0)return previousValue=u+1,previousValue}const s=Math.log2(a)+1024*4-1024*4,l=Math.ceil(s);if(s!==l)return previousValue=l,previousValue}previousValue<DIGITSIZE&&(previousValue=DIGITSIZE);const n=-0+Number(t>>BigInt(previousValue-DIGITSIZE));if(n>=1&&n<=9007199254740992){let a=+n,s=0;for(;a>1073741824;)a=Math.floor(a/1073741824),s+=30;return s+=32-Math.clz32(a),previousValue=previousValue-DIGITSIZE+s,previousValue}return previousValue=bitLength(t),previousValue}function helper$1(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;if(wasmHelper!=null){if(DIGITSIZE!==64)throw new RangeError;const a=BigInt.asUintN(64,t>>64n),s=BigInt.asUintN(64,t),l=BigInt.asUintN(64,n>>64n),u=BigInt.asUintN(64,n);return wasmHelper(a,s,l,u,64)}else{if(DIGITSIZE!==53)throw new RangeError;const a=-0+Number(t>>53n),s=-0+Number(BigInt.asUintN(53,t)),l=-0+Number(n>>53n),u=-0+Number(BigInt.asUintN(53,n));return jsHelper(a,s,l,u,53)}}function abs$2(t){if(typeof t!="bigint")throw new TypeError;return t<0n?-t:t}function max$2(t,n){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;return t<n?n:t}function halfgcd(t,n,a=!0,s=!0,l=!1){if(typeof t!="bigint"||typeof n!="bigint")throw new TypeError;a=a||s;let u=1n,c=0n,p=0n,d=1n,x=0;if(t<0n&&(t=-t,a&&(u=-u,c=-c,x+=1)),n<0n&&(n=-n,a&&(p=-p,d=-d,x+=1)),t<n){const A=t;if(t=n,n=A,a){const R=u;u=p,p=R;const D=c;c=d,d=D,x+=1}}let _=!1;s&&BigInt.asUintN(SUBQUADRATIC_HALFGCD_THRESHOLD,t)===t&&(_=!0);let S=!1,T=0;for(;(s||t>SMALL_GCD_MAX)&&n!==0n;){if(!_&&!s&&BigInt.asUintN(SUBQUADRATIC_GCD_THRESHOLD*(a?1/16:1),n)===n){_=!0;continue}if(x+=1,!_){s&&x===1&&(T=bitLength(t));const D=s?bitLength(max$2(abs$2(p),abs$2(d))):0;let O=s?Math.max(0,Math.ceil((T-D-D)*(1/2))):a?0:Math.floor(bitLength(t)*2/3),F=BigInt(O);if(x!==1&&s){if(O<256){_=!0;continue}let dn=8;for(;t+u>>F!==t+c>>F||n+p>>F!==n+d>>F;)O+=dn,F=BigInt(O),dn+=dn}const[z,j,Z,W,J,en]=halfgcd(t>>F,n>>F),[tn,Ct,Q,on,gn,In]=[BigInt(z),BigInt(j),BigInt(Z),BigInt(W),BigInt(J),BigInt(en)];if(Ct!==0n){if(a)if(x===1)u=tn,c=Ct,p=Q,d=on;else{const sx=tn*c+Ct*d,lx=Q*c+on*d;if(c=sx,d=lx,s){const ox=tn*u+Ct*p,hx=Q*u+on*p;u=ox,p=hx}}const dn=BigInt.asUintN(O,t),ix=BigInt.asUintN(O,n),Cn=tn*dn+Ct*ix+(gn<<F),ax=Q*dn+on*ix+(In<<F);if(t=Cn,n=ax,t<0n||n<0n)throw new TypeError("assertion");continue}}if(_&&!S){let D=Math.max(0,bitLength2(t)-DIGITSIZE*2),O=D===0?0n:BigInt(D);if(x!==1&&s&&(t+u>>O!==t+c>>O||n+p>>O!==n+d>>O)){if(!l)break;do D+=8,O=BigInt(D);while(t+u>>O!==t+c>>O||n+p>>O!==n+d>>O);if(n>>O===0n){S=!0;continue}}const[F,z,j,Z]=helper$1(D===0?t:t>>O,D===0?n:n>>O),[W,J,en,tn]=[BigInt(F),BigInt(z),BigInt(j),BigInt(Z)];if(J!==0n){if(a)if(x===1)u=W,c=J,p=en,d=tn;else{const on=W*c+J*d,gn=en*c+tn*d;if(c=on,d=gn,s){const In=W*u+J*p,dn=en*u+tn*p;u=In,p=dn}}const Ct=W*t+J*n,Q=en*t+tn*n;if(t=Ct,n=Q,t<0n||n<0n)throw new TypeError("assertion");continue}}const A=t/n,R=t-A*n;if(a){const D=u-A*p,O=c-A*d;if(s&&!(0n<=R+D&&R+D<n+p&&0n<=R+O&&R+O<n+d))break;u=p,c=d,p=D,d=O}t=n,n=R}return[u,c,p,d,t,n]}function LehmersGCD(t,n){const[a,s,l,u,c,p]=halfgcd(t,n,!1,!1);return t=BigInt(c),n=BigInt(p),n!==0n&&(t=BigInt.asUintN(64,smallgcd(t,n))),t}function LehmersGCDExt(t,n){const[a,s,l,u,c,p]=halfgcd(t,n,!0,!1),d=t,x=n;let _=BigInt(a),S=BigInt(s);BigInt(l);let T=BigInt(u);if(t=BigInt(c),n=BigInt(p),p!==0n){const[A,R,D]=smallgcdext(t,n);t=BigInt.asUintN(64,D),n=0n,S=A*S+R*T}return _=d===0n?0n:(t-S*x)/d,[_,S,t]}function gcd$1(t,n){return LehmersGCD(BigInt(t),BigInt(n))}function gcdext(t,n){return LehmersGCDExt(BigInt(t),BigInt(n))}function invmod(t,n){const[a,s,l,u,c,p]=halfgcd(n,t,!0,!1);if(BigInt(p)!==0n){const[x,_,S]=smallgcdext(c,p);if(BigInt.asUintN(64,S)!==1n)return 0n;const T=x*BigInt(s)+_*BigInt(u);return T<0n?T+n:T}if(BigInt(c)!==1n)return 0n;const d=BigInt(s);return d<0n?d+n:d}function halfgcdWrapper(t,n){return halfgcd(t,n,!0,!0,!0)}gcd$1.halfgcd=halfgcdWrapper;gcd$1.gcdext=gcdext;gcd$1.invmod=invmod;function abs$1(t){return t<0n?0n-t:t}function ngcd(t,n){return BigInt(gcd$1(BigInt(t),BigInt(n)))}function QuadraticInteger(t,n,a,s=!1){let l=BigInt(t),u=BigInt(n);const c=typeof a=="number"?a:Number(BigInt(a));if(s&&c%4===0)throw new RangeError;if(s&&l%2n===0n&&u%2n===0n&&(s=!1,l/=2n,u/=2n),s&&(l%2n===0n||u%2n===0n))throw new RangeError;this.a=l,this.b=u,this.D=c,this.overTwo=s}QuadraticInteger.prototype.multiply=function(t){var n=this;if(+n.D!=+t.D)throw new TypeError;for(var a=BigInt(n.a)*t.a+BigInt(n.b)*t.b*BigInt(t.D),s=BigInt(n.a)*t.b+BigInt(n.b)*t.a,l=(n.overTwo?1:0)+(t.overTwo?1:0);l>0&&a%2n===0n&&s%2n===0n;)a/=2n,s/=2n,l-=1;return new QuadraticInteger(a,s,n.D,l===1)};QuadraticInteger.prototype.conjugate=function(t){return new QuadraticInteger(this.a,-BigInt(this.b),this.D,this.overTwo)};QuadraticInteger.prototype.norm=function(){const t=BigInt(this.a),n=BigInt(this.b),a=+this.D;var s=t*t,l=n*n,u=s-l*BigInt(a);if(this.overTwo){if(u%4n!==0n)throw new RangeError("assertion");u/=4n}return u};QuadraticInteger.prototype.truncatingDivideInteger=function(t){return new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D).truncatingDivide(this)};QuadraticInteger.prototype.truncatingDivide=function(t){if(!(t instanceof QuadraticInteger)){if(!t instanceof Expression.Integer)throw new RangeError;t=new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D)}var n=this;if(+n.D!=+t.D)throw new TypeError;for(var a=n.multiply(t.conjugate()),s=t.norm();s%2n===0n&&a.a%2n===0n&&a.b%2n===0n;)a=new QuadraticInteger(a.a/2n,a.b/2n,a.D,a.overTwo),s/=2n;return!a.overTwo&&a.D%4===1&&a.a%2n!==0n&&a.b%2n!==0n&&s%2n===0n&&(a=new QuadraticInteger(a.a,a.b,a.D,!0),s/=2n),BigInt(a.a)%s===0n&&BigInt(a.b)%s===0n?new QuadraticInteger(BigInt(a.a)/s,BigInt(a.b)/s,n.D,a.overTwo):null};QuadraticInteger.prototype.negate=function(){return new QuadraticInteger(-BigInt(this.a),-BigInt(this.b),this.D,this.overTwo)};function factors(t){if(t<1n)throw new TypeError;var n=t>1n?BigInt(primeFactor(t)):1n,a=1n,s=1n,l=null,u=1n,c={done:!1,value:null,next:function(){if(n===1n)return this.value=null,this.done=!0,this;if(l==null){if(t%n===0n)return a=a*n,t=t/n,this.value=a,this.done=!1,this;l=factors(t),u=a}return u===a?(u=1n,s=l.next().value):u=u*n,this.value=s==null?null:s*u,this.done=s==null,this}};return c[Symbol.iterator]=function(){return this},c}QuadraticInteger._factors=function(t){return factors(BigInt(t))};QuadraticInteger._complexIntegerPrimeFactor=function(t,n){t=BigInt(t),n=BigInt(n);function a(d){var x=33751571,_=(x>>Number(d%32n))%2;return _===1}function s(d,x){if(typeof d!="bigint"||typeof x!="bigint")throw new TypeError;return d*d+x*x}function l(d,x,_,S){if(typeof _!="bigint"||typeof S!="bigint")throw new TypeError;var T=_*_+S*S,A=d*_+x*S,R=x*_-d*S;return A%T===0n&&R%T===0n}var u=s(t,n);for(var c of QuadraticInteger._factors(u)){let d=0n;for(var p=c;p>0n;){if(a(p)){const x=BigInt(nthRoot(BigInt(p),2));if(x*x===BigInt(p)&&s(x,d)>1n&&l(t,n,x,d))return d===0n?new Expression.Complex(Expression.ZERO,Expression.Integer.fromBigInt(x)):new Expression.Complex(Expression.Integer.fromBigInt(x),Expression.Integer.fromBigInt(d))}d=d+1n,p=c-d*d}}if(u>1n)throw new TypeError;return new Expression.Complex(Expression.Integer.fromBigInt(t),Expression.Integer.fromBigInt(n))};function jacobiSymbol(t,n){if(t<0||n%2==0)throw new Error("Invalid value. k = "+t+", n = "+n);t%=n;for(var a=1;t>0;){for(;t%2==0;){t/=2;var s=n%8;(s==3||s==5)&&(a=-a)}var l=n;n=t,t=l,t%4==3&&n%4==3&&(a=-a),t%=n}return n==1?a:0}function LegendreSymbol(t,n){return jacobiSymbol(t,n)}function quadraticIntegers(t,n,a){if(typeof t!="bigint"||typeof n!="bigint"||typeof a!="bigint")throw new TypeError;const s=Number(BigInt(n))%4===1;for(;;){var l=BigInt(a)*a*n;const p=-t*(s?4n:1n)+l,d=t*(s?4n:1n)+l;if(Number(d)>Number.MAX_SAFE_INTEGER||Number(p)>Number.MAX_SAFE_INTEGER)throw new RangeError(t);var c=p;if(c>=0n){var u=BigInt(nthRoot(BigInt(c),2));if(c===u**2n)return new QuadraticInteger(u,a,n,s)}var c=d;if(c>=0n){var u=BigInt(nthRoot(BigInt(c),2));if(c===u**2n)return new QuadraticInteger(u,a,n,s)}a=a+1n}}QuadraticInteger._fundamentalUnit=function(t){return quadraticIntegers(1n,t,1n)};QuadraticInteger.prototype.primeFactor=function(){var t=this.a,n=this.b,a=BigInt(this.D),l=ngcd(t,a),s=ngcd(t,n);if(s!==1n&&s!==-1n)return s!==a?Expression.Integer.fromBigInt(s).primeFactor():new QuadraticInteger(0n,1n,a);if(l===a)return new QuadraticInteger(0n,1n,a);var l=s,u=this.norm();if(u===1n||u===-1n){var c=QuadraticInteger._fundamentalUnit(a),p=c.conjugate(),d=this;return BigInt(d.b)*d.a<1n?d.a<0n?p.negate():p:c}for(var x=this,_=QuadraticInteger._factors(abs$1(u)),S=_.next().value;S!=null;S=_.next().value){if(a%4n===1n&&S===2n||a===37n&&(S===7n||S===14n||S===3n||S===11n)||isPrime(S)&&a%S!==0n&&S!==2n&&LegendreSymbol(Number(a),Number(BigInt(S)))!==1)continue;var T=quadraticIntegers(S,a,0n),d=x.truncatingDivide(T);if(d!=null)return this.equals(T)?T:T.primeFactor();const A=T.conjugate();var d=x.truncatingDivide(A);if(d!=null)return this.equals(A)?A:A.primeFactor()}return this};QuadraticInteger.prototype.toString=function(){var t=this.a.toString()+"+"+this.b.toString()+"sqrt("+this.D+")";return this.overTwo&&(t="("+t+")/2"),t};QuadraticInteger.prototype.isUnit=function(){var t=this.norm();return t===1n||t===-1n};QuadraticInteger.prototype.equals=function(t){var n=this;if(!(t instanceof QuadraticInteger)){if(t.equals(Expression.ZERO))return n.a===0n&&n.b===0n;if(t.equals(Expression.ONE))return n.a===1n&&n.b===0n;throw new TypeError}return BigInt(n.a)===t.a&&BigInt(n.b)===t.b&&+n.D==+t.D&&!!n.overTwo==!!t.overTwo};QuadraticInteger.prototype.subtract=function(t){var n=this;if(+n.D!=+t.D)throw new TypeError;var a=BigInt(n.a),s=BigInt(n.b),l=BigInt(t.a),u=BigInt(t.b);return!!n.overTwo!=!!t.overTwo&&(n.overTwo&&(l*=2n,u*=2n),t.overTwo&&(a*=2n,s*=2n)),new QuadraticInteger(a-l,s-u,n.D,n.overTwo||t.overTwo)};QuadraticInteger.prototype.isDivisibleBy=function(t){return this.truncatingDivide(t)!=null};QuadraticInteger.prototype.isDivisibleByInteger=function(t){return t.truncatingDivide(this)!=null};QuadraticInteger.prototype.remainder=function(t){if(!(t instanceof QuadraticInteger)){if(t instanceof Expression.Multiplication&&t.a instanceof Expression.Integer&&t.b instanceof Expression.SquareRoot)return this.remainder(new QuadraticInteger(Expression.ZERO.toBigInt(),t.a.toBigInt(),t.b.a.toBigInt()));if(!(t instanceof Expression.Integer))throw new RangeError;t=new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D)}var n=this;if(+n.D!=+t.D)throw new TypeError;var a=n.multiply(t.conjugate()),s=t.norm();if(s===1n||s===-1n)return n.subtract(n);var l=(a.a-BigInt(a.a)%s)/s,u=(a.b-BigInt(a.b)%s)/s;const c=BigInt(n.a),p=BigInt(t.a);if(l===0n&&u===0n){if(c>p&&p>0n)return n.subtract(t.multiply(new QuadraticInteger((c-c%p)/p,0n,n.D)));if(c>-p&&p<0n)return n.subtract(t.multiply(new QuadraticInteger((c-c%-p)/-p,0n,n.D)));if(t.b===0n)return new QuadraticInteger(1n,0n,n.D)}var d=new QuadraticInteger(l,u,n.D),x=n.subtract(t.multiply(d));return x};QuadraticInteger.prototype.remainderInteger=function(t){return new QuadraticInteger(t.toBigInt(),Expression.ZERO.toBigInt(),this.D).remainder(this)};QuadraticInteger.prototype.toExpression=function(){return Expression.Integer.fromBigInt(this.a).add(Expression.Integer.fromBigInt(this.b).multiply(Expression.Integer.fromNumber(this.D).squareRoot())).divide(this.overTwo?Expression.TWO:Expression.ONE)};QuadraticInteger.prototype.abs=function(){return this.a<=0n&&this.b<=0n||this.a<0n&&this.norm()>0n||this.b<0n&&this.norm()<0n?this.negate():this};QuadraticInteger.prototype.isValid=function(){return this.D,this.D,!(this.D===6||this.D%4===1||[2,3,5,6,7,11,13,17,19,21,29,33,37,41,57,73].indexOf(this.D)===-1)};QuadraticInteger.prototype.isPositive=function(){var t=this;return t.a>0n&&t.b>0n||t.a>0n&&t.norm()>0n||t.b>0n&&t.norm()<0n};function toQuadraticInteger(t){if(t instanceof Expression.Addition&&t.b instanceof Expression.Integer&&t.a instanceof Expression.SquareRoot&&t.a.a instanceof Expression.Integer)return new QuadraticInteger(t.b.toBigInt(),Expression.ONE.toBigInt(),t.a.a.toBigInt());if(t instanceof Expression.Addition&&t.b instanceof Expression.Integer&&t.a instanceof Expression.Multiplication&&t.a.a instanceof Expression.Integer&&t.a.b instanceof Expression.SquareRoot&&t.a.b.a instanceof Expression.Integer)return new QuadraticInteger(t.b.toBigInt(),t.a.a.toBigInt(),t.a.b.a.toBigInt());if(t instanceof Expression.Division&&t.getDenominator().equals(Expression.TWO)){var n=toQuadraticInteger(t.getNumerator());if(n!=null)return n.truncatingDivide(new QuadraticInteger(2,0,n.D))}}//!
QuadraticInteger.toQuadraticInteger=toQuadraticInteger;QuadraticInteger.gcd=function(t,n){for(var a=t,s=n;!s.equals(Expression.ZERO);){var l=a.remainder(s);if(!(BigInt(abs$1(l.norm()))<=BigInt(abs$1(s.norm()))))throw new TypeError("norm");a=s,s=l}return a};function isPrime(t){return BigInt(primeFactor(t))===BigInt(t)}globalThis.QuadraticInteger=QuadraticInteger;QuadraticInteger._checkFactorization=function t(n){typeof n=="string"&&(n=QuadraticInteger.toQuadraticInteger(RPN(n)));for(var a=[],s=n;Math.abs(Number(BigInt(s.norm())))>1;){var l=s.primeFactor();a.push(l),s=s.truncatingDivide(l)}(s.a.toString()!=="1"||s.b.toString()!=="0")&&a.unshift(s),console.log(n+"="+a.map(u=>"("+u.toString()+")").join(""))};const factory=function(t){const n=BigInt(t),a=Math.log2(t),s=1/Math.log2(t),l=Math.floor(Math.log2(Number.MAX_SAFE_INTEGER+1)),u=/^\s*([+\-])?(\d+)?\.?(\d+)?(?:e([+\-]?\d+))?\s*$/;function c(ux,px){this.significand=ux,this.exponent=px}c.BigFloat=c.BigDecimal=function(ux){if(ux instanceof c)return ux;if(typeof ux=="string"){if(t!==10)throw new Error;const dx=u.exec(ux);if(dx==null)throw new RangeError(ux);const mx=Number(dx[4]||"0");return p(BigInt((dx[1]||"")+(dx[2]||"")+(dx[3]||"")),A(Math.abs(mx)<Number.MAX_SAFE_INTEGER?mx:BigInt(dx[4]||"0"),(dx[3]||"").length))}if(typeof ux=="number"&&Math.floor(ux)!==ux&&t===2){const dx=ax(ux),gx=ux/2**dx*(Number.MAX_SAFE_INTEGER+1)/2,Sx=dx-(l-1);return p(BigInt(gx),Sx)}return p(BigInt(ux),0)},c.toNumber=function(ux){return Number(BigInt(c.toBigInt(ux)))},c.toBigInt=function(ux){const px=ux.exponent,dx=typeof px=="number"?px:Number(BigInt(px));if(dx===0)return ux.significand;if(dx<0){const mx=J(ux.significand,0-dx);if(W(mx,0-dx)!==BigInt(ux.significand))throw new RangeError("The BigDecimal "+ux.toString()+" cannot be converted to a BigInt because it is not an integer");return mx}return W(ux.significand,dx)};function p(ux,px){return new c(ux,px)}function d(ux){return ux<0n?0n-ux:ux}function x(ux){const px=ux.toString(16),dx=+px.charCodeAt(0)-48;if(dx<=0)throw new RangeError;return(px.length-1)*4+(32-Math.clz32(Math.min(dx,8)))}function _(ux){const px=x(ux)-l,dx=Number(ux>>BigInt(px));return Math.log2(dx)+px}function S(ux){if(ux=d(ux),t===2)return x(ux);const px=Number(BigInt(ux));if(px<(Number.MAX_SAFE_INTEGER+1)/16)return Math.floor(Math.log2(px+.5)*s)+1;const dx=(px<1/0?Math.log2(px):_(ux))*s;if(Math.floor(dx*(1-32/(Number.MAX_SAFE_INTEGER+1)))===Math.floor(dx)&&Math.floor(dx*(1+32/(Number.MAX_SAFE_INTEGER+1)))===Math.floor(dx))return Math.floor(dx)+1;const mx=Math.floor(dx+.5);return ux>=BigInt(j(mx))?mx+1:mx}function T(ux,px){if(typeof ux=="number"&&typeof px=="number"){const gx=ux+px;if(Math.abs(gx)<=+Number.MAX_SAFE_INTEGER)return gx}const dx=BigInt(ux)+BigInt(px),mx=Number(dx);return Math.abs(mx)<=+Number.MAX_SAFE_INTEGER?mx:dx}function A(ux,px){return T(ux,typeof px=="number"?0-px:-BigInt(px))}const R=Math.ceil(.5*Math.log2(Number.MAX_SAFE_INTEGER+1)/Math.log2(t)-1),D=BigInt(t**R);function O(ux,px){if(px==null||px.maximumSignificantDigits!=null){if(ux.significand===0n)return ux.exponent===0?ux:p(0n,0);const dx=ux.significand;let mx=R,gx=D;if(dx%gx===0n){for(;dx%(gx*gx)===0n;)gx*=gx,mx*=2;const Sx=dx/gx;return p(Sx,T(ux.exponent,mx))}}return ux}function F(ux){let px={},dx=0;return function(mx){let gx=px[mx];return gx==null&&(dx>100&&(px={},dx=0),gx=ux(mx),px[mx]=gx,dx+=1),gx}}const z=F(function(ux){return BigInt(ux)}),j=F(function(ux){return n**BigInt(ux)});function Z(ux,px){if(px!=null){let dx=0;const mx=BigInt(ux.significand),gx=ux.exponent,Sx=px.maximumSignificantDigits;if(Sx!=null){if(!(Sx>0))throw new RangeError("maximumSignificantDigits should be positive");if(mx===0n)return p(0n,0);dx=S(mx)-Sx}const Ex=px.maximumFractionDigits;if(Ex!=null){if(!(Ex>=0))throw new RangeError("maximumFractionDigits should be non-negative");dx=0-T(gx,Ex)}if(dx>0){const Cx=px.roundingMode;let Ax=0n;if(Cx==="floor")t===2?Ax=mx>>z(dx):mx>=0n?Ax=mx/j(dx):Ax=(mx+1n)/j(dx)-1n;else if(Cx==="down")t===2?mx>=0n?Ax=mx>>z(dx):Ax=-(-mx>>z(dx)):Ax=mx/j(dx);else if(Cx==="ceil")t===2?Ax=-(-mx>>z(dx)):mx<0n?Ax=mx/j(dx):Ax=(mx-1n)/j(dx)+1n;else if(Cx==="up")t===2?mx>=0n?Ax=-(-mx>>z(dx)):Ax=mx>>z(dx):mx>=0n?Ax=(mx-1n)/j(dx)+1n:Ax=(mx+1n)/j(dx)-1n;else{let Tx=0n,kx=0n;if(t===2){const Rx=z(dx);Tx=1n<<Rx,mx>=0n?Ax=mx>>Rx:Ax=-(-mx>>Rx),kx=(mx-(Ax<<Rx))*2n}else Tx=j(dx),Ax=mx/Tx,kx=(mx-Tx*Ax)*2n;if(kx!==0n){if(Cx==="half-up")kx+=kx<0n?-1n:1n;else if(Cx==="half-down")kx+=0n;else if(Cx==="half-even")kx+=Ax%2n;else throw new RangeError("supported roundingMode (floor/ceil/up/down/half-even/half-up/half-down) is not given");kx>Tx&&(Ax+=1n),-kx>Tx&&(Ax-=1n)}}return p(Ax,T(gx,dx))}}return ux}c.unaryMinus=function(ux){return p(-BigInt(ux.significand),ux.exponent)},c.add=function(ux,px,dx=null){const mx=BigInt(ux.significand),gx=BigInt(px.significand),Sx=ux.exponent,Ex=px.exponent,Cx=A(Sx,Ex),Ax=typeof Cx=="number"?Cx:Number(BigInt(Cx));if(Ax!==0){if(mx===0n)return Z(px,dx);if(gx===0n)return Z(ux,dx);const Tx=dx!=null?dx.maximumSignificantDigits+1:0;if(Ax>0)return Tx!==0&&Ax>S(gx)+Tx?Z(p(W(mx,Tx)+(gx<0n?-1n:1n),A(Sx,Tx)),dx):Z(p(W(mx,Ax)+gx,Ex),dx);if(Ax<0)return Tx!==0&&0-Ax>S(mx)+Tx?Z(p((mx<0n?-1n:1n)+W(gx,Tx),A(Ex,Tx)),dx):Z(p(mx+W(gx,0-Ax),Sx),dx)}return Z(p(mx+gx,Sx),dx)},c.subtract=function(ux,px,dx=null){return c.add(ux,c.unaryMinus(px),dx)},c.multiply=function(ux,px,dx=null){return O(Z(p(BigInt(ux.significand)*BigInt(px.significand),T(ux.exponent,px.exponent)),dx),dx)};function W(ux,px){if(typeof ux!="bigint")throw new TypeError;return t===2?ux<<z(px):j(px)*ux}function J(ux,px){if(typeof ux!="bigint")throw new TypeError;return t===2?ux>>z(px):ux/j(px)}c.divide=function(ux,px,dx=null){if(ux.significand===0n)return ux;const mx=A(ux.exponent,px.exponent);let gx=0;dx!=null&&dx.maximumSignificantDigits!=null?gx=dx.maximumSignificantDigits+(S(px.significand)-S(ux.significand)):dx!=null&&dx.maximumFractionDigits!=null?gx=T(dx.maximumFractionDigits,mx):gx=Math.ceil(S(px.significand)*a)+1;let Sx=BigInt(gx>0?W(ux.significand,gx):ux.significand),Ex=BigInt(gx<0?W(px.significand,0-gx):px.significand);Ex<0n&&(Sx=-Sx,Ex=-Ex);let Cx=0n;if(dx!=null&&dx.roundingMode==="floor")Sx>=0n?Cx=Sx/Ex:Cx=(Sx+1n)/Ex-1n;else if(dx!=null&&dx.roundingMode==="ceil")Sx<=0n?Cx=Sx/Ex:Cx=(Sx-1n)/Ex+1n;else{Sx<0n?Cx=(Sx+1n)/Ex-1n:Cx=Sx/Ex;const Ax=Sx-Ex*Cx;if(console.assert(Ax>=0n),Ax!==0n){if(dx==null)throw new RangeError("rounding is not given for inexact operation");Cx*=n**2n,gx=T(gx,2),Ax*2n<Ex?Cx+=1n:Ax*2n===Ex?Cx+=n**2n/2n:Cx+=n**2n/2n+1n}}return Z(p(Cx,A(mx,gx)),dx)};function en(ux,px){const dx=BigInt(ux.significand),mx=BigInt(px.significand),gx=ux.exponent,Sx=px.exponent,Ex=A(gx,Sx),Cx=typeof Ex=="number"?+Ex:Number(BigInt(Ex));if(Cx===0)return dx<mx?-1:dx>mx?1:0;if(dx<=0n&&mx>=0n)return dx===0n&&mx===0n?0:-1;if(dx>=0n&&mx<=0n)return dx===0n&&mx===0n?0:1;if(t!==2||Cx>=9007199254740992||Cx<=-9007199254740992){const kx=T(Ex,S(dx)-S(mx)),Rx=typeof kx=="number"?kx:Number(BigInt(kx));if(Rx!==0)return dx<0n&&mx<0n?Rx>0?-1:1:Rx<0?-1:1}else{const kx=Cx>=0?dx:dx>>z(0-Cx),Rx=Cx<=0?mx:mx>>z(Cx);if(kx<Rx)return-1;if(Rx<kx)return 1}const Ax=Cx<=0?dx:W(dx,Cx),Tx=Cx>=0?mx:W(mx,0-Cx);return Ax<Tx?-1:Ax>Tx?1:0}c.lessThan=function(ux,px){return en(ux,px)<0},c.greaterThan=function(ux,px){return en(ux,px)>0},c.equal=function(ux,px){return en(ux,px)===0},c.round=function(ux,px){return Z(ux,px)},c.prototype.toString=function(){//! https://tc39.es/ecma262/#sec-number.prototype.tostring
if(t!==10)throw new Error;if(arguments.length!==0)throw new RangeError("not implemented");const ux=c.BigDecimal(this);let px=ux.significand.toString();//! https://tc39.es/ecma262/#sec-numeric-types-number-tostring
if(px==="0")return"0";let dx="";px.charCodeAt(0)===45&&(px=px.slice(1),dx="-");const mx=T(ux.exponent,px.length-1),gx=typeof mx=="number"?mx:Number(BigInt(mx));return gx>-7&&gx<21?dx+tn(px,gx+1-px.length,0,0):dx+tn(px,-(px.length-1),0,0)+"e"+(gx>=0?"+":"")+mx.toString()};function tn(ux,px,dx,mx){let gx=ux.length-1+px;gx<=-1&&(ux=String("0".repeat(0-gx))+ux,mx+=0-gx,gx=0);let Sx=ux.length-(gx+1),Ex=ux.length;for(;Sx>dx&&Ex>=mx&&Ex>=1&&0+ux.charCodeAt(Ex-1)===48;)Ex-=1,Sx-=1;Ex<ux.length&&(ux=ux.slice(0,Ex));const Cx=Math.max(Math.max(0,dx-Sx),Math.max(0,mx-ux.length));return Cx!==0&&(ux+=String("0".repeat(Cx))),ux.length>gx+1?ux.slice(0,gx+1)+"."+ux.slice(gx+1):ux}function Ct(ux,px,dx){const mx=T(px,ux.length-1),gx=typeof mx=="number"?mx:Number(BigInt(mx));return gx<-6||gx>=+dx?tn(ux,-(ux.length-1),0,dx)+"e"+(gx<0?"":"+")+mx.toString():tn(ux,typeof px=="number"?px:Number(BigInt(px)),0,dx)}function Q(ux,px,dx){return tn(ux,px,dx,0)}function on(ux,px,dx){const mx=T(px,ux.length-1),gx=typeof mx=="number"?mx:Number(BigInt(mx));return tn(ux,-(ux.length-1),0,dx+1)+"e"+(gx<0?"":"+")+mx.toString()}c.prototype.toFixed=function(ux,px="half-up"){if(Math.floor(ux)!==ux)throw new RangeError;const dx=t===10?p(this.significand,T(this.exponent,ux)):c.multiply(c.BigDecimal(10n**BigInt(ux)),this),mx=dx.significand<0n?"-":"",gx=c.round(dx,{maximumFractionDigits:0,roundingMode:px}),Sx=c.abs(gx);return mx+Q(c.toBigInt(Sx).toString(),0-ux,ux)};function gn(ux,px,dx){if(t===10){const $x=c.round(c.abs(ux),{maximumSignificantDigits:px,roundingMode:dx});return{significand:$x.significand.toString(),exponent:BigInt($x.exponent)}}const mx=function($x,Gx,qx){if(Gx<0n)return c.divide(c.BigDecimal(1),mx($x,-BigInt(Gx),qx),qx);let Dx;for(;Gx>=1n;)Gx%2n===0n?($x=c.multiply($x,$x,qx),Gx/=2n):(Dx=Dx==null?$x:c.multiply($x,Dx,qx),Gx-=1n);return Dx??c.BigDecimal(1)},gx=function($x,Gx,qx){if(!c.greaterThan($x,c.BigDecimal(0)))throw new RangeError;if(c.lessThan($x,c.BigDecimal(1)))return 0n-gx(c.divide(c.BigDecimal(1),$x,qx),Gx,qx);const Dx=ix($x),lE=BigInt(Math.max(0,x(Dx)-l)),cE=BigInt(Math.floor(Number(Dx>>lE)/Math.log2(Gx)*a))<<lE;return cE<3n?cE:cE+gx(c.divide($x,mx(c.BigDecimal(Gx),cE,qx),qx),Gx,qx)},Sx=ux.significand<0n?-1:1,Ex=function($x){return c.round(Sx>=0?$x:c.unaryMinus($x),{maximumFractionDigits:0,roundingMode:dx})};if(c.equal(ux,c.BigDecimal(0)))return{significand:"0",exponent:0n};const Cx=c.BigDecimal(10),Ax=Math.pow(2,Math.ceil(Math.log2(x(d(BigInt(ux.exponent))+1n)*s)));let Tx={maximumSignificantDigits:Math.max(Ax,t===2?32:8),roundingMode:"half-even"},kx,Rx=0n;do{let $x=c.abs(ux);if(Rx=0n-gx($x,10,Tx),$x=c.multiply(mx(Cx,Rx,Tx),$x,Tx),c.lessThan($x,Cx)||(Rx-=1n,$x=c.divide($x,Cx,Tx)),c.lessThan($x,c.BigDecimal(1))&&(Rx+=1n,$x=c.multiply($x,Cx,Tx)),!c.lessThan($x,c.BigDecimal(1))&&c.lessThan($x,Cx))if(Rx+=BigInt(px-1),Tx.maximumSignificantDigits>(Math.abs(Number(Rx))+px)*Math.log2(10)+S(ux.significand))$x=c.abs(ux),$x=c.multiply($x,mx(Cx,Rx,Tx),Tx),kx=c.toBigInt(c.abs(Ex($x))).toString();else{$x=c.multiply($x,mx(Cx,BigInt(px-1),Tx),Tx),$x=c.abs($x);const Gx=c.multiply(c.multiply(c.BigDecimal(d(Rx)+BigInt(px)),dn(t,0-Tx.maximumSignificantDigits)),$x);c.equal(Ex(c.add($x,Gx)),Ex(c.subtract($x,Gx)))&&(kx=c.toBigInt(c.abs(Ex($x))).toString())}Tx={maximumSignificantDigits:Tx.maximumSignificantDigits*2,roundingMode:"half-even"}}while(kx==null);return{significand:kx,exponent:-Rx}}c.prototype.toPrecision=function(ux,px="half-up"){const dx=gn(this,ux,px);return(c.lessThan(this,c.BigDecimal(0))?"-":"")+Ct(dx.significand,dx.exponent,ux)},c.prototype.toExponential=function(ux,px="half-up"){const dx=gn(this,ux+1,px);return(c.lessThan(this,c.BigDecimal(0))?"-":"")+on(dx.significand,dx.exponent,ux)};function In(ux,px){if(+ux!==t)throw new RangeError("a should be BASE");return p(1n,px)}function dn(ux,px){return In(ux,px)}function ix(ux){if(ux.significand===0n)throw new RangeError;return BigInt(S(ux.significand))+BigInt(ux.exponent)}c.abs=function(ux){return ux.significand<0n?c.unaryMinus(ux):ux},c.sign=function(ux){return ux.significand<0n?-1:ux.significand>0n?1:0},c.max=function(ux,px){if(arguments.length>2)throw new RangeError("not implemented");return c.lessThan(ux,px)?px:ux},c.min=function(ux,px){if(arguments.length>2)throw new RangeError("not implemented");return c.greaterThan(ux,px)?px:ux};function Cn(ux){let px=1;for(;!c.equal(c.round(ux,{maximumSignificantDigits:px,roundingMode:"half-even"}),ux);)px*=2;let dx=px/2,mx=px;for(;mx-1>dx;){const gx=dx+Math.floor((mx-dx)/2);c.equal(c.round(ux,{maximumSignificantDigits:gx,roundingMode:"half-even"}),ux)?mx=gx:dx=gx}return mx}function ax(ux){const px=Math.floor(Math.log(Math.abs(ux))/Math.log(2))-1;return Math.abs(ux)/2**px>=2?px+1:px}function sx(ux,px,dx){function mx(gx){return dx==="exp"?Math.ceil(Number(BigInt(c.toBigInt(c.round(gx,{maximumFractionDigits:0,roundingMode:"half-even"}))))/Math.log(t)):dx==="log"?Math.ceil(Math.log2(Math.ceil(Math.max(Number(ix(gx)),1)*Math.log(t)))*s):1}return function(gx,Sx){if(c.equal(gx,c.BigDecimal(ux)))return px(gx,{maximumSignificantDigits:1,roundingMode:"half-even"});let Ex=c.BigDecimal(0),Cx=0,Ax=c.BigDecimal(0);do{if(Cx>4*(10/t)&&Sx.maximumSignificantDigits!=null&&Sx.roundingMode==="half-even"&&dx!=="sin"&&dx!=="cos")throw console.error(gx,Sx),new Error;Cx+=1;const Tx={maximumSignificantDigits:Math.ceil(Math.max(Sx.maximumSignificantDigits||Sx.maximumFractionDigits+1+mx(gx)-1,Cn(gx))*Math.pow(2,Math.ceil((Cx-1)/3)))+2+(t===2?1:0),roundingMode:"half-even"};if(Ex=void 0,t===2&&Math.max(Tx.maximumSignificantDigits+2,Cn(gx)+1)<=Math.log2(Number.MAX_SAFE_INTEGER+1)){const kx=gx.exponent,Rx=typeof kx=="number"?kx:Number(BigInt(kx)),$x=Number(BigInt(gx.significand))*t**Rx;if(dx!=="sin"&&dx!=="cos"&&dx!=="tan"||Math.abs($x)<=Math.PI/4){const Gx=Math[dx]($x),qx=(Number.MIN_VALUE*1.25>Number.MIN_VALUE?Number.MIN_VALUE:Number.MIN_VALUE*(Number.MAX_SAFE_INTEGER+1)/2)||2**-1022,Dx=Math.abs(Gx);Dx<1/0&&Dx>qx&&(Ex=c.BigDecimal(Gx))}}Ex==null&&(Ex=px(gx,Tx)),Ax=c.multiply(In(t,-BigInt(Tx.maximumSignificantDigits)),c.abs(Ex))}while(!c.equal(c.round(c.subtract(Ex,Ax),Sx),c.round(c.add(Ex,Ax),Sx)));return c.round(Ex,Sx)}}function lx(ux,px){let dx=c.add(ux,c.BigDecimal(1)),mx=ux;for(;c.lessThan(mx,dx);)dx=mx,mx=c.divide(c.add(c.divide(ux,mx,px),mx),c.BigDecimal(2),px);return mx}c.log=sx(1,function(px,dx){if(!c.greaterThan(px,c.BigDecimal(0)))throw new RangeError;const mx={maximumSignificantDigits:dx.maximumSignificantDigits+Math.ceil(Math.log2(dx.maximumSignificantDigits+.5)*s),roundingMode:"half-even"};{//! ln(f * BASE**k) = ln(f) + k * ln(BASE), where (1/BASE) <= f <= BASE
let kx=ix(px)-1n,Rx=c.multiply(In(t,-kx),px),$x=c.round(c.multiply(Rx,Rx),{maximumSignificantDigits:3,roundingMode:"half-even"});if(c.greaterThan($x,In(t,1n))&&(kx+=1n,Rx=c.multiply(In(t,-1n),Rx)),c.lessThan($x,In(t,-1n))&&(kx-=1n,Rx=c.multiply(In(t,1n),Rx)),kx!==0n)return c.add(c.log(Rx,mx),c.multiply(c.BigDecimal(2n*kx),c.log(lx(c.BigDecimal(t),mx),mx)))}//! log(x) = log((1 + g) / (1 - g)) = 2*(g + g**3/3 + g**5/5 + ...)
const gx=c.divide(c.subtract(px,c.BigDecimal(1)),c.add(px,c.BigDecimal(1)),mx);let Sx=1,Ex=c.BigDecimal(1),Cx=Ex,Ax=c.BigDecimal(0);const Tx=c.multiply(gx,gx,mx);for(;!c.equal(Ax,Cx);)Sx+=2,Ex=c.multiply(Ex,c.BigDecimal(Sx-2)),Ex=c.multiply(Ex,Tx),Ex=c.divide(Ex,c.BigDecimal(Sx),mx),Ax=Cx,Cx=c.add(Cx,Ex,mx);return c.multiply(c.multiply(c.BigDecimal(2),gx),Cx)},"log");function ox(ux){return c.divide(c.BigDecimal(Math.floor(ux*(Number.MAX_SAFE_INTEGER+1))),c.add(c.BigDecimal(Number.MAX_SAFE_INTEGER),c.BigDecimal(1)),{maximumSignificantDigits:Math.floor(Math.log2(Number.MAX_SAFE_INTEGER+1)*s+.5),roundingMode:"half-even"})}c.exp=sx(0,function(px,dx){//! k = round(x / ln(BASE));
//! exp(x) = exp(x - k * ln(BASE) + k * ln(BASE)) = exp(x - k * ln(BASE)) * BASE**k
const mx={maximumSignificantDigits:dx.maximumSignificantDigits+Math.ceil(Math.log2(dx.maximumSignificantDigits+.5)*s),roundingMode:"half-even"};if(!c.equal(px,c.BigDecimal(0))){const Ax=ox(Math.log(t)),Tx=c.round(c.divide(px,Ax,{maximumSignificantDigits:Math.max(Number(ix(px)),1),roundingMode:"half-even"}),{maximumFractionDigits:0,roundingMode:"half-even"});if(!c.equal(Tx,c.BigDecimal(0))){const kx=c.log(c.BigDecimal(t),{maximumSignificantDigits:mx.maximumSignificantDigits+Number(ix(Tx)),roundingMode:"half-even"}),Rx=c.round(c.divide(px,kx,{maximumSignificantDigits:Math.max(Number(ix(px)),1),roundingMode:"half-even"}),{maximumFractionDigits:0,roundingMode:"half-even"});if(!c.equal(Rx,c.BigDecimal(0))){const $x=c.subtract(px,c.multiply(Rx,kx));return c.multiply(In(t,c.toBigInt(Rx)),c.exp($x,mx))}}}let gx=0,Sx=c.BigDecimal(1),Ex=Sx,Cx=c.BigDecimal(0);for(;!c.equal(Cx,Ex);)gx+=1,Sx=c.multiply(Sx,px),Sx=c.divide(Sx,c.BigDecimal(gx),mx),Cx=Ex,Ex=c.add(Ex,Sx,mx);return Ex},"exp");function hx(ux,px){const dx=ox(Math.PI/4);if(c.greaterThan(c.abs(ux),dx)){const mx={maximumSignificantDigits:px.maximumSignificantDigits+Cn(ux)+Number(ix(ux))+1+Math.ceil(42*s),roundingMode:"half-even"},gx=c.multiply(c.BigDecimal(2),c.atan(c.BigDecimal(1),mx)),Sx=c.round(c.divide(ux,gx,{maximumSignificantDigits:Math.max(Number(ix(ux)),1),roundingMode:"half-even"}),{maximumFractionDigits:0,roundingMode:"half-even"});return{remainder:c.subtract(ux,c.multiply(Sx,gx)),k:(Number(c.toBigInt(Sx)%4n)+4)%4}}return{remainder:ux,k:0}}function _x(ux,px,dx){const mx=hx(ux,px),gx=mx.remainder,Sx=(mx.k+(dx?3:0))%4,Ex={maximumSignificantDigits:px.maximumSignificantDigits+Math.ceil(Math.log2(px.maximumSignificantDigits+.5)*s),roundingMode:"half-even"};let Cx=Sx===1||Sx===3?1:0,Ax=c.BigDecimal(1),Tx=Ax,kx=c.BigDecimal(0);const Rx=c.multiply(gx,gx);for(;!c.equal(kx,Tx);)Cx+=2,Ax=c.multiply(Ax,Rx),Ax=c.divide(Ax,c.BigDecimal(-Cx*(Cx-1)),Ex),kx=Tx,Tx=c.add(Tx,Ax,Ex);return(Sx===1||Sx===2)&&(Tx=c.unaryMinus(Tx)),Sx===1||Sx===3?c.multiply(gx,Tx):Tx}return c.sin=sx(0,function(ux,px){return _x(ux,px,!0)},"sin"),c.cos=sx(0,function(ux,px){return _x(ux,px,!1)},"cos"),c.atan=sx(0,function(ux,px){if(c.greaterThan(c.abs(ux),c.BigDecimal(1))){const Tx={maximumFractionDigits:px.maximumSignificantDigits+1,roundingMode:"half-even"},kx=c.multiply(c.atan(c.BigDecimal(1),Tx),c.BigDecimal(2));return c.multiply(c.BigDecimal(c.lessThan(ux,c.BigDecimal(0))?-1:1),c.subtract(kx,c.atan(c.divide(c.BigDecimal(1),c.abs(ux),Tx),Tx)))}const dx={maximumSignificantDigits:px.maximumSignificantDigits+Math.ceil(Math.log2(px.maximumSignificantDigits+.5)*s),roundingMode:"half-even"};let mx=0;const gx=c.multiply(ux,ux),Sx=c.add(c.BigDecimal(1),gx);let Ex=c.divide(c.BigDecimal(1),Sx,dx),Cx=Ex,Ax=c.BigDecimal(0);for(;!c.equal(Ax,Cx);)mx+=1,Ex=c.multiply(Ex,c.multiply(c.BigDecimal(2*mx),gx)),Ex=c.divide(Ex,c.multiply(c.BigDecimal(2*mx+1),Sx),dx),Ax=Cx,Cx=c.add(Cx,Ex,dx);return c.multiply(ux,Cx)},"atan"),c.sqrt=function(ux,px){if(c.lessThan(ux,c.BigDecimal(0)))throw new RangeError;if(c.equal(ux,c.BigDecimal(0)))return ux;const dx=ix(ux)/2n,mx=In(t,dx),gx=c.multiply(ux,In(t,-(2n*dx))),Sx=Math.floor(Math.log2(Number.MAX_SAFE_INTEGER+1)*s)-1,Ex=c.toNumber(c.round(c.multiply(gx,In(t,Sx)),{maximumFractionDigits:0,roundingMode:"half-even"}))/t**Sx,Cx=Math.sqrt(Ex),Ax=2*(px.maximumSignificantDigits||px.maximumFractionDigits+Math.ceil(Cn(ux)/2)||1);let Tx=c.multiply(c.BigDecimal(Math.sign(Cx)*Math.floor(Math.abs(Cx)*t**Sx+.5)),In(t,-Sx));const kx=function(Rx,$x){return c.divide(c.add(gx,c.multiply(Rx,Rx)),c.multiply(c.BigDecimal(2),Rx),$x)};for(let Rx=Math.max(Sx-1,1);Rx<=Ax;Rx*=2)Tx=kx(Tx,{maximumSignificantDigits:Rx,roundingMode:"half-even"});return Tx=kx(Tx,px),c.multiply(Tx,mx)},c},BigDecimal=factory(10),BigFloat=factory(2),BASE=2;function MakeMath(t,n){function a(){}a.nextAfter=function(l,u){if(u==null)throw new RangeError;if(u.roundingMode!=="floor"&&u.roundingMode!=="ceil")throw new RangeError;var c=t.round(l,u);if(!t.equal(l,c))return c;var p=function(d,x,_,S){var T=t.multiply(t.BigDecimal(S.roundingMode==="floor"?-1:1),s(-x)),A=t.multiply(t.abs(_),T);return t.add(d,A,S)};if(u.maximumFractionDigits!=null)return p(l,u.maximumFractionDigits,t.BigDecimal(1),u);if(u.maximumSignificantDigits!=null)return p(l,u.maximumSignificantDigits,l,u);throw new RangeError};var s=function(l){var u=t.round(t.BigDecimal(n),{maximumSignificantDigits:1,roundingMode:"half-even"}),c=u;if(l<0)return t.divide(t.BigDecimal(1),s(-l),null);for(var p=t.BigDecimal(1);l>=1;)l%2===0?(c=t.multiply(c,c),l=l/2):(p=p==null?c:t.multiply(c,p),l=l-1);return p};return a}const BigDecimalMath=MakeMath(BigDecimal,10),BigFloatMath=MakeMath(BigFloat,2);function Interval(t,n){if(BigFloat.greaterThan(t,n))throw new TypeError;this.a=t,this.b=n}Interval._rounding=function(t,n){return t==null?null:t.maximumFractionDigits!=null?{maximumFractionDigits:t.maximumFractionDigits,roundingMode:n}:{maximumSignificantDigits:t.maximumSignificantDigits,roundingMode:n}};Interval.unaryMinus=function(t){return new Interval(BigFloat.unaryMinus(t.b),BigFloat.unaryMinus(t.a))};Interval.add=function(t,n,a=null){return new Interval(BigFloat.add(t.a,n.a,Interval._rounding(a,"floor")),BigFloat.add(t.b,n.b,Interval._rounding(a,"ceil")))};Interval.subtract=function(t,n,a=null){return new Interval(BigFloat.subtract(t.a,n.b,Interval._rounding(a,"floor")),BigFloat.subtract(t.b,n.a,Interval._rounding(a,"ceil")))};Interval._multiply=function(t,n,a,s,l){const u=BigFloat.sign,c=u(t),p=u(n),d=u(a),x=u(s);if(c>=0)return d>=0?l(t,a,n,s):x<=0?l(n,a,t,s):l(n,a,n,s);if(p<=0)return x<=0?l(n,s,t,a):d>=0?l(t,s,n,a):l(t,s,t,a);if(d>=0)return l(t,s,n,s);if(x<=0)return l(n,a,t,a);var _=l(t,s,t,a),S=l(n,a,n,s);return new Interval(BigFloat.min(_.a,S.a),BigFloat.max(_.b,S.b))};Interval.multiply=function(t,n,a=null){var s=Interval._rounding(a,"floor"),l=Interval._rounding(a,"ceil");if(BigFloat.equal(t.a,t.b)&&BigFloat.equal(n.a,n.b)){var u=BigFloat.multiply(t.a,n.a);return new Interval(BigFloat.round(u,s),BigFloat.round(u,l))}var c=function(p,d,x,_){return new Interval(BigFloat.multiply(p,d,s),BigFloat.multiply(x,_,l))};return Interval._multiply(t.a,t.b,n.a,n.b,c)};Interval.divide=function(t,n,a){var s=Interval._rounding(a,"floor"),l=Interval._rounding(a,"ceil");if(BigFloat.sign(n.a)<=0&&BigFloat.sign(n.b)>=0){if(BigFloat.equal(n.a,n.b))throw new RangeError;return"CANNOT_DIVIDE"}if(BigFloat.equal(t.a,t.b)&&BigFloat.equal(n.a,n.b)){var u=BigFloat.divide(t.a,n.a,s),c=BigFloat.subtract(t.a,BigFloat.multiply(n.a,u));return new Interval(u,BigFloat.equal(c,BigFloat.BigFloat(0))?u:BigFloatMath.nextAfter(u,l))}var p=function(d,x,_,S){return new Interval(BigFloat.divide(d,S,s),BigFloat.divide(_,x,l))};return Interval._multiply(t.a,t.b,n.a,n.b,p)};Interval.sqrt=function(t,n){if(BigFloat.sign(t.a)<0&&BigFloat.sign(t.b)>=0)return"CANNOT_DIVIDE";if(BigFloat.equal(t.a,t.b)){var a=BigFloat.sqrt(t.a,Interval._rounding(n,"floor")),s=BigFloat.equal(BigFloat.multiply(a,a),t.b)?a:BigFloatMath.nextAfter(a,Interval._rounding(n,"ceil"));return new Interval(a,s)}return Interval._map(t,function(l,u){return BigFloat.sqrt(l,u)},n)};Interval.exp=function(t,n){return Interval._map(t,BigFloat.exp,n)};Interval.log=function(t,n){return BigFloat.sign(t.a)<=0&&BigFloat.sign(t.b)>0?"CANNOT_DIVIDE":BigFloat.equal(t.a,t.b)&&BigFloat.equal(t.b,BigFloat.BigFloat(1))?new Interval(BigFloat.BigFloat(0),BigFloat.BigFloat(0)):Interval._map(t,BigFloat.log,n)};Interval.atan=function(t,n){return Interval._map(t,BigFloat.atan,n)};Interval._mapValue=function(t,n,a){var s=n(t,Interval._rounding(a,"floor")),l=s,u=s;return BigFloat.equal(t,BigFloat.BigFloat(0))||(u=BigFloatMath.nextAfter(s,Interval._rounding(a,"ceil"))),new Interval(l,u)};Interval._map=function(t,n,a){if(BigFloat.equal(t.a,t.b))return Interval._mapValue(t.a,n,a);var s=n(t.a,Interval._rounding(a,"floor")),l=n(t.b,Interval._rounding(a,"ceil"));return new Interval(s,l)};Interval._trigonometry=function(t,n,a){if(BigFloat.equal(t.a,t.b))return Interval._mapValue(t.a,n==="sin"?BigFloat.sin:BigFloat.cos,a);var s=Object.assign({},Interval._rounding(a,"floor"),{roundingMode:"half-even"}),l=BigFloat.multiply(BigFloat.BigFloat(8),BigFloat.atan(BigFloat.BigFloat(1),s));if(!BigFloat.lessThan(BigFloat.subtract(t.b,t.a),l))return new Interval(BigFloat.BigFloat(-1),BigFloat.BigFloat(1));var u=function(R,D){return n==="sin"?BigFloat.sin(R,D):BigFloat.cos(R,D)},c=BigFloat.divide(BigFloat.add(t.a,t.b),BigFloat.BigFloat(2),s),p=function(R){var D=BigFloat.multiply(BigFloat.divide(BigFloat.BigFloat(R),BigFloat.BigFloat(4),s),l),O=BigFloat.round(BigFloat.divide(BigFloat.subtract(c,D,s),l,s),{maximumFractionDigits:0,roundingMode:"half-even"});return BigFloat.add(BigFloat.multiply(l,O),D)},d=p(n==="sin"?3:2),x=p(n==="sin"?1:0);const _=Interval._rounding(a,"floor"),S=Interval._rounding(a,"ceil");var T=BigFloat.lessThan(d,t.a)?u(t.a,_):BigFloat.greaterThan(d,t.b)?u(t.b,_):BigFloat.BigFloat(-1),A=BigFloat.lessThan(x,t.a)?u(t.a,S):BigFloat.greaterThan(x,t.b)?u(t.b,S):BigFloat.BigFloat(1);return new Interval(T,A)};Interval.sin=function(t,n){return Interval._trigonometry(t,"sin",n)};Interval.cos=function(t,n){return Interval._trigonometry(t,"cos",n)};Interval.fromIntegers=function(t,n){var a=BigFloat.BigFloat(t),s=BigFloat.BigFloat(n);return console.assert(!BigFloat.lessThan(s,a)),new Interval(a,s)};Interval.abs=function(t){return BigFloat.lessThan(t.a,BigFloat.BigFloat(0))?BigFloat.lessThan(t.b,BigFloat.BigFloat(0))?new Interval(BigFloat.unaryMinus(t.b),BigFloat.unaryMinus(t.a)):new Interval(BigFloat.BigFloat(0),BigFloat.max(BigFloat.unaryMinus(t.a),t.b)):t};Interval.exponentiate=function(t,n,a){for(var s=void 0;n>=1;)n===2*Math.floor(n/2)?(t=Interval.multiply(t,t,a),n=Math.floor(n/2)):(s=s==null?t:Interval.multiply(t,s,a),n-=1);return s};Interval.formatToDecimal=function(t,n){var a=BigFloat.sign(t.a),s=BigFloat.sign(t.b),l=(a||s)===(s||a)?a||s:0;t=Interval.abs(t);var u=function(x,_){return n.fractionDigits!=null?x.toFixed(n.fractionDigits,_):x.toPrecision(n.significantDigits,_)},c=u(t.a,"half-up"),p=BigFloat.equal(t.a,t.b)?c:u(t.b,"half-down"),d=function(x){return!/[^0\.]/.test(x)};if(c===p&&(l!==0||d(c)&&d(p)))return(l<0?"-":l>0&&d(c)&&d(p)?"+":"")+c};Interval.prototype.toString=function(){return"["+this.a.toString()+";"+this.b.toString()+"]"};var calcAt=function(t,n,a){for(var s=evaluateExpression(Expression.ZERO,a),l=t.getDegree();l>=0;l--){s=Interval.multiply(s,n,a);var u=evaluateExpression(t.getCoefficient(l),a);if(u==="CANNOT_DIVIDE"||u==null)return u;s=Interval.add(s,u,a)}return s},evaluateExpression=function(t,n){if(t instanceof Expression.Integer){var a=t.value;return Interval.fromIntegers(a,a)}else if(t instanceof Expression.NthRoot){var s=t.a,a=t.n,l=evaluateExpression(s,n);return l==="CANNOT_DIVIDE"||l==null?l:a==2?Interval.sqrt(l,n):Interval.exp(Interval.divide(Interval.log(l,n),Interval.fromIntegers(a,a),n),n)}else if(t instanceof Expression.BinaryOperation){if(t instanceof Expression.Addition&&Expression.has(t,Expression.PolynomialRootSymbol)){var u=Expression.getVariable(t),c=Polynomial.toPolynomial(t,u);if(c.hasIntegerCoefficients()){var p=evaluateExpression(u,n);return calcAt(c,p,n)}}if(t.a===Expression.E&&t.getS()==="^"){var d=evaluateExpression(t.b,n);return d==="CANNOT_DIVIDE"||d==null?d:Interval.exp(d,n)}var s=evaluateExpression(t.a,n);if(s==="CANNOT_DIVIDE"||s==null)return s;var d=evaluateExpression(t.b,n);if(d==="CANNOT_DIVIDE"||d==null)return d;var x=t.getS();if(x==="+")return Interval.add(s,d,n);if(x==="-")return Interval.subtract(s,d,n);if(x==="*")return Interval.multiply(s,d,n);if(x==="/")return Interval.divide(s,d,n);if(x==="^"){if(!(t.b instanceof Expression.Integer)||t.b.toNumber()<=0||t.b.toNumber()>Number.MAX_SAFE_INTEGER){var _=Interval.log(s,n);return _==="CANNOT_DIVIDE"?_:Interval.exp(Interval.multiply(_,d,n),n)}var a=t.b.toNumber();return Interval.exponentiate(s,a,n)}}else if(t instanceof Expression.PolynomialRootSymbol||t instanceof Expression.ExpressionPolynomialRoot){var S=(t instanceof Expression.ExpressionPolynomialRoot?t.root:t).toDecimal(n.maximumSignificantDigits||n.maximumFractionDigits);const A=S.a.getDenominator().multiply(S.b.getDenominator()).value;return Interval.divide(Interval.fromIntegers(S.b.getDenominator().multiply(S.a.getNumerator()).value,S.a.getDenominator().multiply(S.b.getNumerator()).value),Interval.fromIntegers(A,A),n)}else{if(t===Expression.E)return Interval.exp(Interval.fromIntegers(1,1),n);if(t===Expression.PI)return Interval.multiply(Interval.fromIntegers(4,4),Interval.atan(Interval.fromIntegers(1,1),n));if(t instanceof Expression.Function){var T=evaluateExpression((t instanceof Expression.Sin||t instanceof Expression.Cos)&&t.a instanceof Expression.Radians?t.a.value:t.a,n);if(T==="CANNOT_DIVIDE"||T==null)return T;if(t instanceof Expression.Sin)return Interval.sin(T,n);if(t instanceof Expression.Cos)return Interval.cos(T,n);if(t instanceof Expression.Logarithm)return Interval.log(T,n);if(t instanceof Expression.Arctan)return Interval.atan(T,n)}else if(t instanceof Expression.ExpressionWithPolynomialRoot)return evaluateExpression(t.e,n)}},decimalToString=function(t){return t.replace(/[eE]/g,"*10^")},complexToString=function(t,n){return t+(/^[\-\+]/.test(n)?n.replace(/^([\-\+])[\s\S]+/g,"$1"):t!==""?"+":"")+(n!=="1"&&n!=="-1"?n.replace(/^[\-\+]/g,"")+"*i":"i")},toDecimalStringInternal$1=function(t,n,a,s){if(a=a||decimalToString,s=s||complexToString,n.fractionDigits==null&&n.significantDigits==null||n.fractionDigits!=null&&n.significantDigits!=null)throw new RangeError;if(n.fractionDigits!=null&&(n.fractionDigits<0||n.fractionDigits>Number.MAX_SAFE_INTEGER)||n.significantDigits!=null&&(n.significantDigits<1||n.significantDigits>Number.MAX_SAFE_INTEGER)||n.roundingMode!=null)throw new RangeError;if(t instanceof Expression.Complex||Expression.has(t,Expression.Complex)){var l=t.getNumerator(),u=t.getDenominator();if((u instanceof Expression.Integer||Expression.has(u,Expression.PolynomialRootSymbol)||Expression.has(u,Expression.ExpressionPolynomialRoot)||Expression._isPositive(u))&&(l instanceof Expression.Addition||l instanceof Expression.Multiplication||l instanceof Expression.Complex)){const R=Expression.getComplexNumberParts(l);let D=R.real,O=R.imaginary;if(!O.equals(Expression.ZERO)){D=D.divide(u),O=O.divide(u);var c=D.equals(Expression.ZERO)?"":toDecimalStringInternal$1(D,n,a,s),p=toDecimalStringInternal$1(O,n,a,s);return s(c,p)}}}if(t instanceof Expression.Integer||t instanceof Expression.Division&&t.a instanceof Expression.Integer&&t.b instanceof Expression.Integer)return a(primeFactor._rationalNumberToDecimalString(t.getNumerator().toBigInt(),t.getDenominator().toBigInt(),n));console.assert(BASE%2===0);var d=void 0,x=1;//!new
//!
for(var _=Expression.has(t,Expression.Function)||Expression.has(t,Expression.Exponentiation);d==null;){if(x>6e4&&x>(n.fractionDigits||n.significantDigits)*4*Math.log2(10)){debugger;throw new TypeError}const R=_?{maximumSignificantDigits:x}:{maximumFractionDigits:x-1};var S=evaluateExpression(t,R);if(S==null)return;if(S!=="CANNOT_DIVIDE"&&(d=Interval.formatToDecimal(S,n)),S!=="CANNOT_DIVIDE"&&d==null&&n.fractionDigits!=null&&x===1){var T=BigFloat.max(BigFloat.abs(S.a),BigFloat.abs(S.b)).toFixed(0).length;x=Math.max(Math.ceil((T+n.fractionDigits+1)*Math.log2(10)/2),2)}if(S!=="CANNOT_DIVIDE"&&d==null&&n.significantDigits!=null&&x===1&&BigFloat.sign(S.a)===BigFloat.sign(S.b)){var A=BigFloat.log(BigFloat.min(BigFloat.abs(S.a),BigFloat.abs(S.b)),{maximumSignificantDigits:1,roundingMode:"half-even"}).toFixed(0).length;x=Math.max(Math.ceil(A*Math.log2(10)/2),1)}x*=2}return a(d)};toDecimalStringInternal$1.testables={BigDecimalMath,BigDecimal,BigFloat,Interval};function gcdOfSafeIntegers(t,n){for(t=Math.abs(t),n=Math.abs(n);n!==0;){const a=t-Math.floor(t/n)*n;t=n,n=a}return t}Math.gcd=function(t,n){if(typeof t!="number"&&typeof n!="number")throw new RangeError;const a=1073741823;if((t|0)===t&&Math.abs(t)<=a&&(n|0)===n&&Math.abs(n)<=a){let s=Math.abs(t),l=Math.abs(n);for(;l!==0;){const u=s%l;s=l,l=u}return s}return gcdOfSafeIntegers(t,n)};function integerMin(t,n){return t.compareTo(n)<0?t:n}function bigIntGCDWrapper2(t,n){if(Math.abs(SmallBigInt.toNumber(t))>=1/0&&Math.abs(SmallBigInt.toNumber(n))>=1/0){var a=integerMin(Expression.Integer.fromBigInt(t).abs(),Expression.Integer.fromBigInt(n).abs()).bitLength();if(a=Math.pow(2,Math.ceil(Math.log2(a))),a>=128*1024&&a>lastMaxSize){lastMaxSize=a;var s=new TypeError("big size of gcd "+a);globalThis.onerror!=null&&globalThis.onerror(s.message,"",0,0,s)}}return gcd$1(SmallBigInt.BigInt(t),SmallBigInt.BigInt(n))}function bigIntGCDWrapper(t,n){return typeof t=="number"&&typeof n=="number"?Math.gcd(t,n):bigIntGCDWrapper2(t,n)}var pow=function(t,n,a){if(!(n>=0))throw new RangeError;if(n>Number.MAX_SAFE_INTEGER)throw new RangeError("NotSupportedError");return n<1?a:2*Math.floor(n/2)!==n?pow(t,n-1,a.multiply(t)):pow(t.multiply(t),Math.floor(n/2),a)},binomialCoefficient=function(t,n){return n===0?Expression.ONE:t.multiply(binomialCoefficient(t.subtract(Expression.ONE),n-1)).divide(Integer$2.fromNumber(n))},matrixInN=function(t,n){var a=-1;//!
var s=t.map(function(Z,W,J){return W===J?Z:Expression.ZERO}),l=t.subtract(s);if(l.isNilpotent()&&s.multiply(l).eql(l.multiply(s))){for(var u=0;u<s.cols();u+=1)if(s.e(u,u).equals(Expression.ZERO)){for(var c=1;!l.pow(c).map(function(W,J,en){return J!==u?Expression.ZERO:W}).isZero();){if(c>=l.cols())throw new TypeError("assertion");c+=1}a=Math.max(a,c-1)}for(var p=Matrix$1.Zero(l.cols(),l.cols()),u=0;u<l.cols()&&(u===0||!l.isZero());u+=1){var d=s.map(function(J,en,tn){return en===tn?J.equals(Expression.ZERO)?Expression.ZERO:J.pow(n.subtract(Expression.Integer.fromNumber(u))):Expression.ZERO});p=p.add(d.multiply(l.pow(u)).scale(binomialCoefficient(n,u)))}var O=new Expression.Matrix(p);if(a>0){var x=[];x.push(new ExpressionWithCondition(O,Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))));for(var _=1;_<=a;_+=1)x.push(new ExpressionWithCondition(new Expression.Matrix(t.pow(_)),Condition.TRUE.andZero(n.subtract(Integer$2.fromNumber(_)))));return new Expression.Cases(x)}return a!==-1?new ExpressionWithCondition(O,Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))):O}//!
for(var S=function(Z){return Z instanceof Expression.Symbol||Z instanceof Exponentiation$1&&getBase(Z)instanceof Integer$2&&getBase(Z).compareTo(Expression.ONE)>0&&isIntegerOrN(getExponent(Z).inverse())?!0:isConstant$1(Z)||isConstant$1(Z.divide(Expression.E))},T=t,A="aa",R=t.map(function(Z,W,J){return new Expression.Symbol(A+"_("+W+","+J+")")}),D=R.map(function(Z,W,J){return Expression.ZERO}),O=void 0,F=-1;!R.eql(D);)F+=1,D=R,O=R.multiply(T),R=O.map(function(Z,W,J){var en=R.e(W,J)instanceof Expression.Symbol&&R.e(W,J).symbol.slice(0,A.length)===A;if(!en)return R.e(W,J);if(!(Z instanceof Integer$2)){var tn=Polynomial$1.toPolynomial(Z.getNumerator(),n).getDegree(),Ct=R.e(W,J),Q=Polynomial$1.toPolynomial(Z.getNumerator(),Ct),on=Q.getLeadingCoefficient().divide(Z.getDenominator());if(tn!==0&&Q.getDegree()===1&&T.e(W,J).equals(Expression.ZERO)&&(on instanceof Integer$2||on instanceof Expression.Complex||S(on))){var gn=on.pow(n).divide(on.pow(Integer$2.fromNumber(tn+1))).multiply(binomialCoefficient(n.subtract(Expression.ONE),tn)),In=Z.subtract(on.multiply(Ct)).divide(gn);if(In instanceof Integer$2)return console.log("!",Z.toString()),In.multiply(on.pow(n).divide(on.pow(Integer$2.fromNumber(tn+2))).multiply(binomialCoefficient(n.subtract(Expression.ONE),tn+1)))}}if(Z.equals(R.e(W,J)))return T.e(W,J);if(R.e(W,J)instanceof Expression.Symbol&&R.e(W,J).symbol===A+"_("+W+","+J+")"&&!Z.equals(Expression.ZERO)){var Ct=R.e(W,J),Q=Polynomial$1.toPolynomial(Z.getNumerator(),Ct),on=Q.getLeadingCoefficient().divide(Z.getDenominator()),dn=Q.getCoefficient(0).divide(Z.getDenominator());if(!Expression.has(dn,Expression.Symbol)&&Z.equals(on.multiply(Ct).add(dn))){var ix=on.equals(Expression.ONE)?dn.multiply(n.subtract(Expression.TWO)):dn.multiply(Expression.ONE.subtract(on.pow(n.subtract(Expression.TWO))).divide(Expression.ONE.subtract(on)));return on.pow(n.subtract(Expression.TWO)).multiply(T.e(W,J)).add(ix)}}if(R.e(W,J)instanceof Expression.Symbol&&R.e(W,J).symbol===A+"_("+W+","+J+")"&&Z.equals(Expression.ZERO)){//!TODO: conditions.push(iteration); //? n > 0 && n <= 3 , n > 3 - ?
return a=F,Expression.ZERO}var Cn=Z.subtract(R.e(W,J));if(Cn instanceof Integer$2)return T.e(W,J).add(Cn.multiply(n.subtract(Expression.TWO)));var ax=function(lx){if(!S(lx))return Expression.ZERO;var ox=R.e(W,J);return lx.pow(n.subtract(Expression.ONE)).add(lx.multiply(ox))};if(!Z.equals(Expression.ZERO)){var Ct=R.e(W,J),Q=Polynomial$1.toPolynomial(Z.getNumerator(),Ct),on=Q.getLeadingCoefficient().divide(Z.getDenominator()),sx=on;if(Z.equals(ax(sx)))return sx.pow(n.subtract(Expression.TWO)).multiply(n.subtract(Expression.TWO).add(T.e(W,J)));var sx=on.negate();if(Z.equals(ax(sx)))return sx.pow(n.subtract(Expression.TWO)).multiply(n.subtract(Expression.TWO).add(T.e(W,J)))}return R.e(W,J)});for(var _=0;_<R.rows();_+=1)for(var z=0;z<R.cols();z+=1){var j=R.e(_,z);if(j instanceof Expression.Symbol&&j.symbol.slice(0,A.length)===A)return}if(a>0){var x=[];x.push(new ExpressionWithCondition(new Expression.Matrix(O),Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))));for(var _=1;_<=a;_+=1)x.push(new ExpressionWithCondition(new Expression.Matrix(T.pow(_)),Condition.TRUE.andZero(n.subtract(Integer$2.fromNumber(_)))));return new Expression.Cases(x)}var j=new Expression.Matrix(O);return a!==-1?new ExpressionWithCondition(j,Condition.TRUE.andGreaterZero(n.subtract(Integer$2.fromNumber(a)))):j},isPositiveQuick=function(t){return t instanceof Integer$2?t.compareTo(Expression.ZERO)>0:t instanceof NthRoot?isPositiveQuick(t.a):(t instanceof Multiplication$1||t instanceof Division$1)&&!t.a.equals(Expression.ONE.negate())&&!t.b.equals(Expression.ONE.negate())?isPositiveQuick(t.a)&&isPositiveQuick(t.b)||isPositiveQuick(t.a.negate())&&isPositiveQuick(t.b.negate()):t instanceof Addition$1?isPositiveQuick(t.a)&&isPositiveQuick(t.b):t instanceof Expression.PolynomialRootSymbol?isPositiveQuick(t.interval.a)&&isPositiveQuick(t.interval.b):t instanceof Expression.Multiplication&&t.a.equals(Expression.ONE.negate())&&t.b instanceof Expression.PolynomialRootSymbol?!isPositiveQuick(t.b.interval.a)&&!isPositiveQuick(t.b.interval.b):t instanceof Expression.Abs},isPositive=function(t){if(t.equals(Expression.ZERO))return!1;if(isPositiveQuick(t))return!0;if(isPositiveQuick(t.negate()))return!1;if(t instanceof Expression.Symbol&&!(t instanceof Expression.PolynomialRootSymbol)&&!(t instanceof Expression.ExpressionPolynomialRoot)&&!(t instanceof Expression.ExpressionWithPolynomialRoot))return t===Expression.PI||t===Expression.E;if(t instanceof Expression.Complex||Expression.has(t,Expression.Complex))return!1;if(t instanceof Addition$1||t instanceof Expression.Cos||t instanceof Expression.Sin||t instanceof Expression.Exponentiation||t instanceof Expression.Multiplication||t instanceof Expression.PolynomialRootSymbol||t instanceof Expression.ExpressionPolynomialRoot||t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.Division){var n=toDecimalStringInternal$1(t,{significantDigits:1}),a=n==null?NaN:Number(n.replace(/\((\d+)\)/g,"$1").replace(/\*10\^/g,"e"));if(!Number.isNaN(a))return a>0}if(t instanceof Expression.ExponentiationOfMinusOne)return!1;if(t instanceof Expression.Exponentiation&&getExponent(t)instanceof Expression.Integer)return isPositive(t.a);if(Expression.has(t,Expression.Symbol))return!1;if(t instanceof Expression.Logarithm)return isPositive(t.a.subtract(Expression.ONE));throw new TypeError("!"+t)};Expression._isPositive=isPositive;var isIntegerOrN=function(t){return t instanceof Integer$2||t instanceof Expression.Symbol&&(t.symbol==="n"||t.symbol==="k")?!0:t instanceof Expression.Addition||t instanceof Expression.Multiplication||t instanceof Expression.Exponentiation?isIntegerOrN(t.a)&&isIntegerOrN(t.b):!1},isGoodPolynomial=function(t){if(t instanceof Expression.Exponentiation)return!1;var n=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if(n instanceof Expression.Symbol){var a=Polynomial$1.toPolynomial(t,n);if(a.getDegree()===1&&a.getCoefficient(0)instanceof Expression.Integer&&a.getCoefficient(1)instanceof Expression.Integer&&a.getContent().equals(Expression.ONE))return!0}return!1};const isMatrixSymbolTranspose=function(t){if(t instanceof Expression.Exponentiation&&getBase(t)instanceof Expression.MatrixSymbol){const n=getExponent(t);if(n instanceof Expression.Symbol&&n.symbol==="T"||n instanceof Expression.Multiplication&&n.a instanceof Expression.Integer&&n.b instanceof Expression.Symbol&&n.b.symbol==="T")return!0}return!1};Expression.prototype.powExpression=function(t){var n=this;if(n===Expression.INFINITY&&Expression.isScalar(t)){if(Expression.isReal(t)){if(t.compareTo(Expression.ONE)>0)throw new RangeError("NotSupportedError");if(t.compareTo(Expression.ONE)===0)return Expression.ONE;if(t.compareTo(Expression.ONE.negate())>0)return Expression.ZERO;throw new RangeError("NotSupportedError")}var a=Expression.getComplexNumberParts(t);if(Expression.isReal(a.real)&&Expression.isReal(a.imaginary)){var s=a.real._pow(2).add(a.imaginary._pow(2));if(s.compareTo(Expression.ONE)<0)return Expression.ZERO}}if(n instanceof Expression.Symbol&&(n.symbol==="t"||n.symbol==="T")&&(Expression.has(t,MatrixSymbol)||Expression.has(t,Expression.Matrix)))return t.transpose();if(n instanceof Expression.Multiplication&&n.a instanceof Expression.Integer&&n.b instanceof Expression.Symbol&&(n.b.symbol==="t"||n.b.symbol==="T")&&(Expression.has(t,MatrixSymbol)||Expression.has(t,Expression.Matrix)))return t.pow(n.a).transpose();//!
if(n instanceof Division$1&&n.a instanceof Integer$2&&n.b instanceof Integer$2&&t!==Expression.E&&!(t instanceof Expression.Symbol)&&!Expression.has(t,Expression.Symbol)){typeof hit=="function"&&hit({powExpression:n.toString()});var l=n.b.toNumber(),u=n.a.truncatingDivide(n.b),c=n.a.subtract(u.multiply(n.b));return u.equals(Expression.ZERO)?t.pow(c)._nthRoot(l):t.pow(u).multiply(t.pow(c)._nthRoot(l))}//!
if(t instanceof Expression.Integer&&n===Expression.CIRCLE)return new Expression.Degrees(t);//!new 2017-05-08
{if(t===Expression.E||t instanceof Integer$2&&t.compareTo(Expression.ONE)>0&&integerPrimeFactor(t).compareTo(t)===0){var p=function(gn){if(gn instanceof Expression.Symbol)return!0;if(gn instanceof Addition$1)return p(gn.a)&&p(gn.b);if((gn instanceof Integer$2||gn instanceof NthRoot)&&(t===Expression.E||t instanceof Integer$2&&gn instanceof NthRoot))return!0;if(gn instanceof Multiplication$1||gn instanceof Exponentiation$1){for(var In of gn.factors()){var dn=getBase(In);if(!(dn instanceof Integer$2||dn instanceof NthRoot||dn instanceof Expression.Symbol)&&!p(dn))return!1}return!0}if((t===Expression.E||t instanceof Integer$2&&t.compareTo(Expression.ONE)>0)&&gn instanceof Division$1&&gn.b instanceof Integer$2){//!new 2019-08-08
return p(gn.a)}return!1};if(n.getNumerator()instanceof Addition$1&&(n.getNumerator().a.isNegative()||n.getNumerator().b.isNegative()))return Expression.ONE.divide(t.pow(n.getNumerator().a.negate().divide(n.getDenominator())).divide(t.pow(n.getNumerator().b.divide(n.getDenominator()))));if(p(n)){if(n.isNegative())return Expression.ONE.divide(new Expression.Exponentiation(t,n.negate()));//!new
return n instanceof Expression.ExpressionWithPolynomialRoot?t.pow(n.upgrade()):new Expression.Exponentiation(t,n)}}if(t instanceof Integer$2&&t.compareTo(Expression.ONE)>0){if(n instanceof Addition$1&&(n.a instanceof Integer$2||n.b instanceof Integer$2))return t.pow(n.a).multiply(t.pow(n.b));var d=integerPrimeFactor(t);if(d.equals(t)){if(n instanceof Division$1&&n.b instanceof Integer$2){var l=n.b.toNumber();if(l>=2&&l<=Number.MAX_SAFE_INTEGER)return t.pow(n.a)._nthRoot(l)}//!new 2020-18-01
if(n instanceof Division$1&&isIntegerOrN(n.a)&&isIntegerOrN(n.b)&&t.compareTo(Expression.ONE)>0)return new Expression.Exponentiation(t,n);//!
}else if(!Expression.has(n,Expression.Logarithm)){var x=primeFactor._countTrailingZeros(t.toBigInt(),d.toBigInt());return d.pow(n.multiply(Integer$2.fromNumber(x))).multiply(t.divide(d._pow(x)).pow(n))}}}//!
{if(t instanceof Integer$2&&t.equals(Expression.ONE))return Expression.ONE;if(t instanceof Division$1||t instanceof Multiplication$1&&(n.getDenominator().equals(Expression.ONE)||isPositive(t.a)||isPositive(t.b))){if(t instanceof Division$1)return t.a.pow(n).divide(t.b.pow(n));if(t instanceof Multiplication$1)return t.a.pow(n).multiply(t.b.pow(n))}}var _=n.getNumerator(),S=n.getDenominator();if(t===Expression.E&&_ instanceof Multiplication$1&&_.a instanceof Expression.Complex&&_.a.real.equals(Expression.ZERO)&&_.b instanceof Expression.Symbol){var T=n.multiply(Expression.I.negate());return T.cos().add(Expression.I.multiply(T.sin()))}if(t===Expression.E&&getConstant$1(_)instanceof Expression.Complex&&S instanceof Expression.Integer){var A=getConstant$1(_);if(A.real.equals(Expression.ZERO)){var T=n.multiply(Expression.I.negate());return T=Expression.has(n,Expression.Symbol)?T:new Expression.Radians(T),T.cos().add(Expression.I.multiply(T.sin()))}return t.pow(A.real.divide(S)).multiply(t.pow(A.imaginary.multiply(Expression.I).multiply(_.divide(A)).divide(S)))}if(t===Expression.E&&_ instanceof Expression.Addition&&S instanceof Expression.Integer)return t.pow(_.a.divide(S)).multiply(t.pow(_.b.divide(S)));if(t instanceof Expression.Matrix&&(isIntegerOrN(n)||n===Expression.INFINITY)){if(!t.matrix.isSquare())throw new RangeError("NonSquareMatrixException");var R=matrixInN(t.matrix,n);if(R!=null){var D=t.matrix.map(function(gn,In,dn){return In===dn?gn:Expression.ZERO}),O=t.matrix.subtract(D);return t.matrix.isDiagonal()||O.isNilpotent()&&D.multiply(O).eql(O.multiply(D))&&Expression.callback!=null&&Expression.callback(new Expression.Event("DpN-matrix-pow",t)),R}//! 2018-08-26
{var F=Expression.getEigenvalues(t.matrix);if(F.length===t.matrix.cols()){var z=Expression.getEigenvectors(t.matrix,F);if(z.filter(gn=>gn!=null).length===t.matrix.cols()){var a=Expression.diagonalize(t.matrix,F,z),j=a.L,Z=matrixInN(j,n);if(Z!=null)return Expression.callback!=null&&Expression.callback(new Expression.Event("pow-using-diagonalization",t)),Expression.callback!=null&&Expression.callback(new Expression.Event("diagonalize",t)),new Expression.Matrix(a.T).multiply(Z).multiply(new Expression.Matrix(a.T_INVERSED))}else{var a=Expression.getFormaDeJordan(t.matrix,F),W=matrixInN(a.J,n);if(W!=null)return Expression.callback!=null&&Expression.callback(new Expression.Event("pow-using-Jordan-normal-form",t)),Expression.callback!=null&&Expression.callback(new Expression.Event("Jordan-decomposition",t)),new Expression.Matrix(a.P).multiply(W).multiply(new Expression.Matrix(a.P_INVERSED))}}}//!
}if(Expression.ExponentiationOfMinusOne!=null&&(t instanceof Integer$2&&t.compareTo(Expression.ZERO)<0||t.equals(Expression.E.negate()))){if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k"))return new Expression.ExponentiationOfMinusOne(Expression.ONE.negate(),n).multiply(t.negate().pow(n));if(n instanceof Addition$1&&n.a instanceof Expression.Symbol&&(n.a.symbol==="n"||n.a.symbol==="k")&&n.b instanceof Integer$2)return new Expression.ExponentiationOfMinusOne(Expression.ONE.negate(),n.a).multiply(Expression.ONE.negate().pow(n.b)).multiply(t.negate().pow(n));if(n instanceof Multiplication$1)return t.pow(n.a).pow(n.b);if(n instanceof Addition$1&&n.b instanceof Integer$2)return t.pow(n.a).multiply(t.pow(n.b))}if(Expression.ExponentiationOfImaginaryUnit!=null){if(t instanceof Expression.Complex&&t.equals(Expression.I.negate()))return Expression.ONE.negate().pow(n).multiply(t.negate().pow(n));if(t instanceof Expression.Complex&&(t.equals(Expression.I)||t.real.compareTo(Expression.ZERO)>0&&t.primeFactor().equals(t))){if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k"))return new Expression.ExponentiationOfImaginaryUnit(t,n);if(n instanceof Addition$1&&n.a instanceof Expression.Symbol&&(n.a.symbol==="n"||n.a.symbol==="k")&&n.b instanceof Integer$2)return t.pow(n.a).multiply(t.pow(n.b));if(n instanceof Multiplication$1)return t.pow(n.a).pow(n.b);if(n instanceof Addition$1&&n.b instanceof Integer$2)return t.pow(n.a).multiply(t.pow(n.b))}if(t instanceof Expression.Complex&&t.real.equals(Expression.ZERO)&&!t.imaginary.equals(Expression.ONE)){if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k"))return t.imaginary.pow(n).multiply(Expression.I.pow(n));if(n instanceof Multiplication$1)return t.pow(n.a).pow(n.b);if(n instanceof Addition$1)return t.pow(n.a).multiply(t.pow(n.b))}if(t instanceof Expression.Complex){var J=t.primeFactor();return t.divide(J).pow(n).multiply(J.pow(n))}if(t instanceof Expression.Integer&&n instanceof Division$1&&n.getDenominator()instanceof Integer$2&&n.getNumerator()instanceof Expression.Symbol&&(n.getNumerator().symbol==="n"||n.getNumerator().symbol==="k")||t instanceof Expression.Integer&&n instanceof Division$1&&n.getDenominator()instanceof Integer$2&&n.getNumerator()instanceof Addition$1)return t.pow(Expression.ONE.divide(n.getDenominator())).pow(n.getNumerator())}if(t===Expression.E&&n instanceof Expression.Matrix){if(!n.matrix.isSquare())throw new RangeError("NonSquareMatrixException");var F=Expression.getEigenvalues(n.matrix);if(F.length===n.matrix.cols()){var a=Expression.getFormaDeJordan(n.matrix,F),D=a.J.map(function(Cn,ax,sx){return ax===sx?Cn:Expression.ZERO}),O=a.J.map(function(Cn,ax,sx){return ax!==sx?Cn:Expression.ZERO}),en=function(Cn){for(var ax=Matrix$1.Zero(Cn.cols(),Cn.cols()),sx=ax,lx=Matrix$1.I(Cn.cols()),ox=0,hx=1;!lx.eql(ax);){var _x=lx.scale(Expression.ONE.divide(Integer$2.fromNumber(hx)));sx=sx.add(_x),lx=lx.multiply(Cn),ox+=1,hx*=ox}return sx};return Expression.callback!=null&&Expression.callback(new Expression.Event("exponential-using-Jordan-canonical-form",n)),new Expression.Matrix(a.P.multiply(D.map(function(Cn,ax,sx){return ax===sx?Expression.E.pow(Cn):Expression.ZERO}).multiply(en(O))).multiply(a.P_INVERSED))}}//!2019-04-22
if(t instanceof NthRoot&&t.a instanceof Integer$2)return t.a.pow(n.divide(Expression.Integer.fromNumber(t.n)));{if(t===Expression.E&&isConstant$1(n)&&!has$2(n,Expression.Complex)&&!has$2(n,Expression.Logarithm))return new Expression.Exponentiation(t,n);if((t instanceof Expression.Symbol||Expression.has(t,Expression.Symbol))&&n instanceof Expression.Division&&n.getDenominator()instanceof Integer$2)return t.pow(n.getNumerator())._nthRoot(n.getDenominator().toNumber());if(t instanceof Expression.Symbol&&n instanceof Expression.Division&&isIntegerOrN(n.getNumerator())&&isIntegerOrN(n.getDenominator()))return new Expression.Exponentiation(t,n);if(t===Expression.E&&n instanceof Expression.Addition)return t.pow(n.a).multiply(t.pow(n.b));if(t instanceof Exponentiation$1&&getBase(t)===Expression.E)return getBase(t).pow(getExponent(t).multiply(n));if(isGoodPolynomial(t)&&n instanceof Expression.Division&&isIntegerOrN(n.getNumerator())&&isIntegerOrN(n.getDenominator()))return new Expression.Exponentiation(t,n)}if(t instanceof Expression.Matrix&&n instanceof Expression.Addition)return t.pow(n.a).multiply(t.pow(n.b));if(t instanceof Expression.Matrix&&n instanceof Expression.Multiplication&&n.a instanceof Expression.Integer)return t.pow(n.a).pow(n.b);if(t instanceof Expression.Matrix&&n instanceof Expression.Division){if(n.getNumerator().equals(Expression.ONE)&&n.getDenominator()instanceof Expression.Symbol&&(n.getDenominator().symbol==="n"||n.getDenominator().symbol==="k"))return t._nthRoot(n.getDenominator());if(isIntegerOrN(n.getNumerator())&&isIntegerOrN(n.getDenominator()))return t.pow(n.getNumerator()).pow(Expression.ONE.divide(n.getDenominator()))}if(n instanceof Expression.Symbol&&(n.symbol==="n"||n.symbol==="k")){var tn=QuadraticInteger.toQuadraticInteger(t);if(tn!=null&&Number(tn.a.toString())>0&&tn.D>0&&(tn.isValid()||!0)){if(Number(tn.b.toString())>0)return new Expression.ExponentiationOfQuadraticInteger(t,n);if(Number(tn.b.toString())<0){var Ct=tn.conjugate().toExpression();return t.multiply(Ct).pow(n).divide(Ct.pow(n))}}if(tn!=null&&Number(tn.a.toString())<0)return Expression.ONE.negate().pow(n).multiply(tn.toExpression().negate().pow(n))}{if(isIntegerOrN(n)){if(n instanceof Addition$1){for(var Q of n.summands())if(Q.isNegative())return t.pow(n.subtract(Q)).divide(t.pow(Q.negate()))}if(n.isNegative())return Expression.ONE.divide(t.pow(n.negate()));if(Expression.isConstant(t)&&!getConstant$1(n).equals(Expression.ONE))return t.pow(getConstant$1(n)).pow(n.divide(getConstant$1(n)));var on=t instanceof Expression.Symbol||t instanceof Expression.Addition&&!(Expression.has(t,Expression.Sin)||Expression.has(t,Expression.Cos));if(on)return new Expression.Exponentiation(t,n)}if(t instanceof Exponentiation$1&&getBase(t)instanceof Integer$2&&getBase(t).compareTo(Expression.ONE)>0&&isIntegerOrN(getExponent(t).getNumerator())&&isIntegerOrN(getExponent(t).getDenominator())||t instanceof Exponentiation$1&&isGoodPolynomial(getBase(t))&&isIntegerOrN(getExponent(t))&&isIntegerOrN(n)||t instanceof Exponentiation$1&&isGoodPolynomial(getBase(t))&&isIntegerOrN(getExponent(t).inverse())&&isIntegerOrN(n.inverse()))return getBase(t).pow(getExponent(t).multiply(n))}if(Expression.has(t,Expression.Sin)||Expression.has(t,Expression.Cos))return Expression._replaceBySinCos(Expression._replaceSinCos(t).pow(n));if(t===Expression.E&&n instanceof Expression.Logarithm)return n.a;if(t===Expression.E&&n instanceof Expression.Multiplication&&n.a instanceof Integer$2&&n.b instanceof Expression.Logarithm||t===Expression.E&&n instanceof Expression.Multiplication&&n.a instanceof Expression.Symbol&&n.b instanceof Expression.Logarithm)return t.pow(n.b).pow(n.a);if(t instanceof Expression.Integer&&Expression.has(n,Expression.Logarithm))return Expression.E.pow(t.logarithm().multiply(n));//!new 2020-12-11
if(t instanceof Exponentiation$1&&getBase(t)instanceof Integer$2&&getBase(t).compareTo(Expression.TWO)>=0&&isIntegerOrN(n))return getBase(t).pow(getExponent(t).multiply(n));//!
//!new 2022-07-26
if(t===Expression.E&&n instanceof Expression.ComplexConjugate&&n.a instanceof Expression.Symbol)return new Expression.Exponentiation(t,n);throw new RangeError("NotSupportedError")};Expression.prototype.compare4Addition=function(t){var n=this;if(n instanceof Integer$2&&t instanceof Integer$2)return n.compareTo(t);if(n instanceof Expression.Symbol&&t instanceof Integer$2)return 1;if(n instanceof Integer$2&&t instanceof Expression.Symbol)return-1;if(n instanceof Expression.Symbol&&t instanceof Expression.Symbol)return n.symbol<t.symbol?-1:t.symbol<n.symbol?1:0;//!
if(n instanceof Expression.Matrix&&t instanceof MatrixSymbol)return 1;if(n instanceof MatrixSymbol&&t instanceof Expression.Matrix)return-1;if(n instanceof Expression.Matrix&&t instanceof Expression.Matrix)return 0;//!new 2016-12-17
if(n instanceof Addition$1||t instanceof Addition$1)return Addition$1.compare4Addition(n,t);//!new 2016-10-09
if(n instanceof Multiplication$1||t instanceof Multiplication$1)return Multiplication$1.compare4Addition(n,t);//!new 2018-10-11
if(n instanceof Integer$2&&t instanceof Expression.Function)return-1;//!new 2018-11-12
if(n instanceof Division$1&&t instanceof Division$1)return n.a.compare4Addition(t.a)||n.b.compare4Addition(t.b);if(n instanceof Expression&&t instanceof Division$1)return 1;if(n instanceof Division$1&&t instanceof Expression||n instanceof Expression.Matrix)return-1;if(t instanceof Expression.Matrix)return 1;//!2019-02-18
if(n instanceof Integer$2&&t instanceof Expression.Complex)return-1;if(n instanceof Expression.Complex&&t instanceof Integer$2)return 1;//!
if(n.equals(t)){return 0;//!
}if(n instanceof Expression.Exponentiation||t instanceof Expression.Exponentiation)return getBase(n).compare4Addition(getBase(t))||0-getExponent(n).compare4Addition(getExponent(t));//!new 2017-02-10
if(t instanceof Expression.Symbol)return-1;//!
throw new RangeError};var compare$1=function(t,n){return t.compare4Addition(n)},compare4Multiplication=function(t,n){return t.compare4Multiplication(n)},getBase=function(t){return t instanceof Exponentiation$1?t.a:t},getExponent=function(t){return t instanceof Exponentiation$1?t.b:Expression.ONE},getConstant$1=function(t,n=void 0){if(t instanceof Integer$2)return t;if(t instanceof Expression.Complex)return t;if(t instanceof Expression.ExpressionPolynomialRoot){if(n)return t}else if(t instanceof Multiplication$1){var a=void 0,s=t;for(var l of s.factors()){var u=getConstant$1(l,n);a=a==null?u:u.multiply(a)}if(a!=null)return a}else if(t instanceof Addition$1){var a=void 0;for(var s of t.summands()){var u=getConstant$1(s,n);a=a==null?u:complexGCD(u,a)}if(a!=null)return a}return Expression.ONE},getTerm=function(t,n){if(!(t instanceof Integer$2)){{if(t instanceof Expression.Complex)return;if(t instanceof Expression.ExpressionPolynomialRoot){if(n)return}else if(t instanceof Multiplication$1){var a=[];for(var s of t.factors()){var l=getTerm(s,n);l!=null&&a.push(l)}for(var u=void 0,c=a.length-1;c>=0;c-=1)u=u==null?a[c]:new Multiplication$1(u,a[c]);return u}else if(t instanceof Addition$1)return t.divide(getConstant$1(t))}return t}};Expression.getConstant=getConstant$1;var multiplyByInteger=function(t,n){return t.compareTo(Expression.ZERO)===0?t:t.compareTo(Expression.ONE)===0?n:new Multiplication$1(t,n)};Expression.prototype.multiplyExpression=function(t){var n=this;if(t instanceof Expression&&n instanceof Multiplication$1)return t.multiply(n.a).multiply(n.b);if(t instanceof Multiplication$1&&n instanceof Expression){var a=compare4Multiplication2(t.b,n);return a===0?t.a.multiply(t.b.multiply(n)):a>0?t.a.multiply(n).multiply(t.b):new Multiplication$1(t,n)}//!
//!
var a=0;if(t instanceof Integer$2&&n instanceof Expression.Symbol)return multiplyByInteger(t,n);if(t instanceof Expression.Symbol&&n instanceof Integer$2)return multiplyByInteger(n,t);if(t instanceof Expression.Symbol&&n instanceof Expression.Symbol)return a=compare4Multiplication(t,n),a===0?t.pow(Expression.TWO):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof Integer$2&&n instanceof Exponentiation$1)return multiplyByInteger(t,n);if(t instanceof Exponentiation$1&&n instanceof Integer$2)return multiplyByInteger(n,t);//!new 2022-06-20
if((getBase(t)instanceof Expression.MatrixSymbol||getBase(n)instanceof Expression.MatrixSymbol)&&(a=compare4Multiplication(getBase(t),getBase(n)),a===0&&(getExponent(t).equals(new Expression.Symbol("T"))||getExponent(n).equals(new Expression.Symbol("T")))))return new Multiplication$1(t,n);if(t instanceof Exponentiation$1&&n instanceof Expression.Symbol)return a=compare4Multiplication(getBase(t),n),a===0?n.pow(getExponent(t).add(Expression.ONE)):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof Expression.Symbol&&n instanceof Exponentiation$1)return a=compare4Multiplication(t,getBase(n)),a===0?t.pow(getExponent(n).add(Expression.ONE)):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof Exponentiation$1&&n instanceof Exponentiation$1)return a=compare4Multiplication(getBase(t),getBase(n)),a===0?getBase(t).pow(getExponent(t).add(getExponent(n))):a>0?new Multiplication$1(n,t):new Multiplication$1(t,n);if(t instanceof SquareRoot&&n instanceof SquareRoot){if(t.a instanceof Integer$2&&n.a instanceof Exponentiation$1)return new Multiplication$1(t,n);var s=t.a.gcd(n.a);return s.multiply(t.a.divide(s).multiply(n.a.divide(s)).squareRoot())}if(t instanceof NthRoot&&t.n===3&&n instanceof NthRoot&&n.n===3)return t.a.multiply(n.a)._nthRoot(3);if(t instanceof NthRoot&&n instanceof NthRoot){//!2021-02-02 - hack
if(t.a instanceof Integer$2&&!(n.a instanceof Integer$2)&&t.n<n.n&&getVariable(n.a)._pow(2).gcd(t.a).equals(t.a)&&Expression.isConstant(t)&&Expression.isConstant(n))return n.multiply(t);//!
var l=Math.gcd(t.n,n.n);if(!(t.a instanceof Integer$2)&&(!(n.a instanceof Integer$2)||!t.a._pow(2).gcd(n.a).equals(Expression.ONE)||getVariable(t.a)._pow(2).gcd(n.a).equals(getVariable(t.a)._pow(2)))||!t.a.gcd(n.a).equals(Expression.ONE)){var u=Expression.pow(t.a,n.n/l).multiply(Expression.pow(n.a,t.n/l)),c=t.n/l*n.n;return u._nthRoot(c)}return!(t.a instanceof Integer$2)&&t.n===2&&n.a instanceof Integer$2&&n.n===4&&!(getConstant$1(t.a.getNumerator()).multiply(n.a)._nthRoot(n.n)instanceof NthRoot)?t.a.multiply(n.a._nthRoot(2))._nthRoot(2):t.n<n.n?new Multiplication$1(t,n):t.n>n.n?new Multiplication$1(n,t):t.a.multiply(n.a)._nthRoot(t.n)}//!
if(t instanceof MatrixSymbol&&n instanceof Expression.Matrix)return new Multiplication$1(t,n);if(t instanceof Expression.Matrix&&n instanceof MatrixSymbol)return new Multiplication$1(t,n);if(has$2(t,MatrixSymbol)&&n instanceof Expression.Matrix)return new Multiplication$1(t,n);if(t instanceof Expression.Matrix&&has$2(n,MatrixSymbol))return new Multiplication$1(t,n);//!
if(t instanceof Integer$2&&n instanceof Expression){if(t.compareTo(Expression.ZERO)===0)return t;if(t.compareTo(Expression.ONE)===0)return n}if(t instanceof Expression&&n instanceof Integer$2){if(n.compareTo(Expression.ZERO)===0)return n;if(n.compareTo(Expression.ONE)===0)return t}var p=t instanceof Expression.Complex&&n instanceof Expression.ExponentiationOfImaginaryUnit?-1:t instanceof Expression.ExponentiationOfImaginaryUnit&&n instanceof Expression.Complex?1:compare4Multiplication(getBase(t),getBase(n));if(p===0)return getBase(t).pow(getExponent(t).add(getExponent(n)));if(p<0)return new Multiplication$1(t,n);if(p>0)return new Multiplication$1(n,t)};function Iterator(){}Object.defineProperty(Iterator.prototype,"done",{get:function(){return this.value==null}});Iterator.prototype[globalThis.Symbol.iterator]=function(){return this};function TermFactorsIterator(t){this.value=void 0,this.e=t,this.hasPolynomialRoot=!1}TermFactorsIterator.prototype=Object.create(Iterator.prototype);TermFactorsIterator.prototype.next=function(){return this.value=this.e instanceof Multiplication$1?this.e.b:this.e instanceof Integer$2||this.e instanceof Expression.Complex||this.e instanceof Expression.ExpressionPolynomialRoot?null:this.e,this.hasPolynomialRoot=this.e instanceof Expression.ExpressionPolynomialRoot,this.e=this.e instanceof Multiplication$1?this.e.a:void 0,this};function termFactors(t){return new TermFactorsIterator(t)}var compare4Addition=function(t,n){for(var a=termFactors(t),s=termFactors(n),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=0-compare$1(getBase(l),getBase(u));if(c===0&&(c=compare$1(getExponent(l),getExponent(u))),c!==0)return c;l=a.next().value,u=s.next().value}for(;l==null&&a.hasPolynomialRoot&&Expression.isRealAlgebraicNumber(u);)u=s.next().value;for(;u==null&&s.hasPolynomialRoot&&Expression.isRealAlgebraicNumber(l);)l=a.next().value;//!new 2020-02-13
if(l instanceof Expression.Matrix||u instanceof Expression.Matrix)return n instanceof Integer$2&&t instanceof Multiplication$1?1:t instanceof Integer$2&&n instanceof Multiplication$1?-1:l!=null&&a.next().value!=null?1:u!=null&&s.next().value!=null?-1:0;//!
return l!=null?1:u!=null?-1:0},addSimilar=function(t,n){if(t instanceof Expression.Matrix&&n instanceof Expression.Matrix)return t.add(n);for(var a=getConstant$1(t),s=getConstant$1(n),l=termFactors(getTerm(t)),u=termFactors(getTerm(n)),c=l.next().value,p=u.next().value,d=Expression.ONE,x=!1;c!=null||p!=null;){var _=null;if(c instanceof Expression.Matrix&&c.matrix.isScalar()&&isScalar(c.matrix.e(0,0))&&!c.matrix.e(0,0).equals(Expression.ZERO)&&p instanceof Expression.Matrix&&p.matrix.isScalar()&&isScalar(p.matrix.e(0,0))&&!p.matrix.e(0,0).equals(Expression.ZERO)&&c.matrix.rows()===p.matrix.rows()&&c.matrix.cols()===p.matrix.cols()&&!c.equals(p)){var _=function(T,A){return T.matrix.e(0,0).multiply(A).multiply(T.inverse())};return addSimilar(_(c,t),_(p,n))}else if(!x&&(c instanceof Expression.Matrix||p instanceof Expression.Matrix)&&(c==null||p==null||!c.equals(p)))x=!0,_=(c==null?a:c.multiply(a)).add(p==null?s:p.multiply(s)),a=Expression.ONE,s=Expression.ONE;else{if(!c.equals(p))return null;_=c}d=_.multiply(d);//!TODO: depends on the iteration order !!!
c=l.next().value,p=u.next().value}return x||(d=a.add(s).multiply(d)),d};Expression.getComplexNumberParts=function(t){if(t instanceof Expression.Division){var n=Expression.getComplexNumberParts(t.getNumerator());return{real:n.real.divide(t.getDenominator()),imaginary:n.imaginary.divide(t.getDenominator())}}if(!Expression.has(t,Expression.Complex))return{real:t,imaginary:Expression.ZERO};var a=[],s=[];for(var l of t.summands()){var u=void 0;for(let d of l.factors())u==null&&d instanceof Expression.Complex&&(u=d);if(u==null)a.push(l);else if(u.real.equals(Expression.ZERO))s.push(l.multiply(Expression.I.negate()));else{var c=null;if(l!==u)for(var p of l.factors())p!==u&&(c=c==null?p:c.multiply(p));c==null?(a.push(u.real),s.push(u.imaginary)):(a.push(c.multiply(u.real)),s.push(c.multiply(u.imaginary)))}}return{real:_sum(a),imaginary:_sum(s)}};Expression.prototype.addExpression=function(t){var n=this;if(t.equals(Expression.ZERO))return n;if(n.equals(Expression.ZERO))return t;//!2019-02-16
if(t instanceof Multiplication$1&&t.b instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(n);if(a!=null)return t.a.add(a).multiply(t.b)}else if(t instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(n);if(a!=null)return Expression.ONE.add(a).multiply(t)}if(n instanceof Multiplication$1&&n.b instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(t);if(a!=null)return a.add(n.a).multiply(n.b)}else if(n instanceof IdentityMatrix){var a=getIdentityMatrixCoefficient(t);if(a!=null)return a.add(Expression.ONE).multiply(n)}//!2019-02-16
//!new 2019-09-30
//!new 2020-12-26
if((has2(t,Expression.Complex)||has2(n,Expression.Complex))&&(has2(t,Expression.ExpressionPolynomialRoot)||has2(n,Expression.ExpressionPolynomialRoot))){var s=Expression.getComplexNumberParts(t),l=Expression.getComplexNumberParts(n),u=s.real.add(l.real),c=s.imaginary.add(l.imaginary);if(c.equals(Expression.ZERO))return u;if(!(c instanceof Expression.Addition))return u.equals(Expression.ZERO)?c.multiply(Expression.I):!has2(u,Expression.ExpressionPolynomialRoot)&&!has2(c,Expression.ExpressionPolynomialRoot)?u.add(c.multiply(Expression.I)):new Expression.Addition(u,c.multiply(Expression.I))}//!
for(var p=t.summands(),d=n.summands(),x=p.next().value,_=0,S=d.next().value,T=[];x!=null&&S!=null;){var A=compare4Addition(x,S);if(A<0)T.push(x),x=p.next().value;else if(A>0)T.push(S),S=d.next().value;else{if(has2(x,Expression.Matrix)||has2(S,Expression.Matrix)){var R=addSimilar(x,S);R!=null?R.equals(Expression.ZERO)||T.push(R):(T.push(x),T.push(S))}else{const z=getConstant$1(x,!0),j=getConstant$1(S,!0),Z=getTerm(x,!0)||Expression.ONE,W=getTerm(S,!0)||Expression.ONE,J=(Z.equals(W)?z:z.multiply(Z.divide(W))).add(j),en=W===Expression.ONE?J:J instanceof Expression.Addition?new Expression.Multiplication(J,W):J.multiply(W);_=0,en.equals(Expression.ZERO)||(Expression.has(en,Expression.ExpressionPolynomialRoot)?Expression.has(x,Expression.ExpressionPolynomialRoot)?(x=en,_=1):(S=en,_=2):T.push(en))}_!==1&&(x=p.next().value),_!==2&&(S=d.next().value)}}for(;x!=null;)T.push(x),x=p.next().value;for(;S!=null;)T.push(S),S=d.next().value;if(T.length===0)return Expression.ZERO;for(var D=T[T.length-1],O=T.length-2;O>=0;O-=1){var F=T[O];D=new Addition$1(D,F)}return D};var divideByInteger=function(t,n){if(n.equals(Expression.ZERO))throw new TypeError("ArithmeticException");var a=[];for(var s of t.summands()){var l=Expression.ONE,u=void 0;for(var c of s.factors()){var p=c;p instanceof Integer$2||p instanceof Expression.Complex||p instanceof Expression.ExpressionPolynomialRoot?u!=null?(console.warn("!"),u=u.multiply(p)):u=p:l===Expression.ONE?l=p:l=p.multiply(l)}if(!(u instanceof Expression.Complex)&&!(u instanceof Integer$2)&&!(u instanceof Expression.ExpressionPolynomialRoot))throw new RangeError;var d=null;u instanceof Expression.ExpressionPolynomialRoot?d=u.divide(n).multiply(l):d=u.truncatingDivide(n).multiply(l),a.push(d)}return _sum(a)};Expression.getCoefficients=function(t,n){if(t.equals(Expression.ZERO))return[];var a=[];for(var s of t.summands()){var l=Expression.ZERO,u=Expression.ONE;for(var c of s.factors()){var p=c;for(var d of getVariableInternal(p))d.v.equals(n)?l=l.add(d.e):u=u.multiply(d.e===Expression.ONE?d.v:d.v.pow(d.e))}var x=l.toNumber();a.push({degree:x,coefficient:u})}a.sort((T,A)=>A.degree-T.degree);for(var _=-1,S=0;S<a.length;S+=1){var s=a[S];(_===-1||s.degree!==a[_].degree)&&(_+=1,a[_]={degree:s.degree,coefficient:[]}),a[_].coefficient.push(s.coefficient)}a.length=_+1;for(var S=0;S<a.length;S+=1)a[S]={degree:a[S].degree,coefficient:_sum(a[S].coefficient)};return a};var getFirstAdditionOperand=function(t){for(var n=t;n instanceof Addition$1;)n=n.a;return n},getLastMultiplicationOperand=function(t){for(var n=t;n instanceof Multiplication$1;)n=n.b;return n};function VIterator(t){if(t==null)throw new TypeError;this.value=void 0,this.v=t}VIterator.prototype=Object.create(Iterator.prototype);VIterator.prototype.next=function(){return this.value=this.v,this.v=void 0,this};function VariablesIterator(t,n){if(n==null)throw new TypeError;this.value=void 0,this.v=t,this.additions=n}VariablesIterator.prototype=Object.create(Iterator.prototype);VariablesIterator.prototype.next=function(){var t=this.additions.next().value,n=null;if(t==null)n=null;else if(t instanceof Expression.Symbol)n={v:new Exponentiation$1(this.v,t),e:Expression.ONE};else if(t instanceof Expression.NthRoot){//!new 2019-11-30
n={v:new Exponentiation$1(this.v,t),e:Expression.ONE}}else if(t instanceof Expression.Exponentiation){//!new 2019-12-01
n={v:new Exponentiation$1(this.v,t),e:Expression.ONE}}else if(t instanceof Multiplication$1&&t.a instanceof Integer$2)n={v:new Exponentiation$1(this.v,t.b),e:t.a};else if(t instanceof Multiplication$1)n={v:new Exponentiation$1(this.v,getTerm(t)),e:getConstant$1(t)};else if(t instanceof Integer$2)n={v:this.v,e:t};else if(t instanceof Expression.Division&&t.a instanceof Integer$2&&t.b instanceof Integer$2){//!new 2019-06-16
n={v:this.v,e:t}}else if(t instanceof Expression.Division&&t.a instanceof NthRoot&&t.b instanceof Integer$2){//!new 2019-12-01
n={v:new Exponentiation$1(this.v,t.getNumerator()),e:Expression.ONE.divide(t.getDenominator())}}else if(t instanceof Expression.Division&&t.a instanceof Multiplication$1&&t.a.a instanceof Integer$2&&t.b instanceof Integer$2){//!new 2019-06-16
this.v instanceof Integer$2?n={v:new Exponentiation$1(this.v,t.a.b),e:t.divide(t.a.b)}:n={v:this.v,e:t}}else if(t instanceof Division$1&&t.b instanceof Integer$2){var a=getTerm(t.a);n={v:new Exponentiation$1(this.v,a),e:t.divide(a)}}else if(t instanceof Division$1&&t.a instanceof Integer$2&&t.b instanceof Expression.Symbol&&(this.v instanceof Integer$2||this.v instanceof Expression.Symbol||isGoodPolynomial(this.v))){var a=Expression.ONE.divide(t.b);n={v:new Exponentiation$1(this.v,a),e:t.divide(a)}}else throw new RangeError;return this.value=n,this};function NumeratorSummandsIterator(t){this.value=void 0,this.internal=t.getNumerator().summands(),this.denominator=t.getDenominator()}NumeratorSummandsIterator.prototype=Object.create(Iterator.prototype);NumeratorSummandsIterator.prototype.next=function(){var t=this.internal.next().value;return this.value=t==null?null:t.divide(this.denominator),this};var getVariableInternal=function(t){if(t instanceof Expression.ExponentiationOfMinusOne)return new VIterator({v:t,e:Expression.ONE});if(t instanceof Expression.ExponentiationOfImaginaryUnit)return new VIterator({v:t,e:Expression.ONE});var n=getBase(t),a=getExponent(t);//!new 2017-05-08
if(!(a instanceof Integer$2)){var s=new NumeratorSummandsIterator(a);return new VariablesIterator(n,s)}//!
return new VIterator({v:n,e:a})},getVariable=function(t,n=null){if(n==null||!n.avoidNthRoots){for(var a of t.summands())for(var s of a.factors())if(s instanceof NthRoot)return s}var l=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;//!?
if(!(l instanceof Expression.Complex)&&!(l instanceof Integer$2)&&!(n!=null&&n.avoidNthRoots&&l instanceof NthRoot))return l};Expression.getVariable=getVariable;var lastMaxSize=1,integerGCD=function(t,n){if(t instanceof Expression.Complex&&t.real.equals(Expression.ZERO)&&(t=t.imaginary),n instanceof Expression.Complex&&n.real.equals(Expression.ZERO)&&(n=n.imaginary),t instanceof Expression.Integer&&n instanceof Expression.Integer)return Expression.Integer.fromBigInt(bigIntGCDWrapper(t.value,n.value));for(var a=t,s=n;!s.equals(Expression.ZERO);){var l=a.remainder(s);a=s,s=l}return a},complexGCD=function(t,n){if(t instanceof Expression.ExpressionPolynomialRoot){var a=t.root.getAlphaExpression();return complexGCD(Expression.getConstant(a.getNumerator()),n)}if(n instanceof Expression.ExpressionPolynomialRoot){var a=n.root.getAlphaExpression();return complexGCD(t,Expression.getConstant(a.getNumerator()))}var a=integerGCD(t,n);return a instanceof Expression.Complex&&a.real.compareTo(Expression.ZERO)===0?a.imaginary:(a instanceof Expression.Integer&&a.compareTo(Expression.ZERO)<0&&(a=a.negate()),a)},nthRootCommonFactor=function(t,n){if(t instanceof Expression.NthRoot&&n instanceof Expression.NthRoot){var a=t.n/Math.gcd(t.n,n.n)*n.n,s=t.radicand.gcd(n.radicand),l=Math.min(a/t.n,a/n.n),u=Math.gcd(a,l);return s._pow(l/u)._nthRoot(a/u)}return null},gcd=function(t,n,a){if(a==null){//!TODO: (2020-06-13)
return getTerm(t)instanceof Expression.NthRoot&&getTerm(n)instanceof Expression.NthRoot?gcd(getConstant$1(t),getConstant$1(n)).multiply(gcd(t.divide(getConstant$1(t)),n.divide(getConstant$1(n)))):complexGCD(getConstant$1(t,!0),getConstant$1(n,!0))}var s=getReplacement(t,getReplacement(n,a));//!new 2023-03-11
var s=getReplacement(t,getReplacement(n,a,"any"),"any");if(s instanceof Replacement){var l=s.apply(t),u=s.apply(n);if(!l.getDenominator().equals(Expression.ONE)){if(!(l.getDenominator()instanceof Expression.Integer))throw new TypeError;l=l.getNumerator()}if(!u.getDenominator().equals(Expression.ONE)){if(!(u.getDenominator()instanceof Expression.Integer))throw new TypeError;u=u.getNumerator()}var c=Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(l,a),Polynomial$1.toPolynomial(u,a)).calcAt(a),p=s.undo(c);return getTerm(p)==null||(p=getTerm(p),console.log("c1",p.toString(),getTerm(p))),p}return s.equals(a)?Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(t,a),Polynomial$1.toPolynomial(n,a)).calcAt(a):substitute(substitute(t,a,s,inverseReplacement(s,a)).gcd(substitute(n,a,s,inverseReplacement(s,a))),a,inverseReplacement(s,a),s)},getConjugateFactor=function(t){var n=-1/0;for(var a of t.summands())for(var s of a.factors())if(s instanceof NthRoot){var l=s.degree;n<l&&(n=l),s.a instanceof Integer$2||(n=1/0)}var u=void 0;for(var a of t.summands())for(var s of a.factors())if(s instanceof NthRoot){var l=s.degree,c=s.a instanceof Integer$2?s.a:null;if(c==null&&(c=QuadraticInteger.toQuadraticInteger(s.a),c!=null&&u==null)){for(var p=c.primeFactor();p.toExpression()instanceof Expression.SquareRoot;)c=c.truncatingDivide(p),p=c.primeFactor();c=p}if(c==null)throw new TypeError;if(n===1/0&&!(s.a instanceof Integer$2)&&(n=l),n%l===0)if(u==null&&(u=c),c!=null){var d=integerGCD(u,c);if(!d.isUnit()){u=d;//!
}d.isUnit()&&!(d instanceof Integer$2)&&(u.isUnit()||c.isUnit())&&(u=d)}else throw new TypeError}//!new 2020-12-16 - ExpressionParser.parse('1/(x+cbrt(18)+cbrt(12))')
u!=null&&u instanceof Integer$2&&(u=u.primeFactor());//!
return{p:u,degree:n}},getConjugate=function(t){var n=void 0;if(n=Expression.getComplexNumberParts(t),n!=null&&!n.imaginary.equals(Expression.ZERO))return n.real.subtract(n.imaginary.multiply(Expression.I));if(n=Expression.getNthRootConjugate(t),n!=null){if(n.equals(t)&&t instanceof Addition$1)throw new TypeError;return n}};Expression.getConjugate=getConjugate;Expression.getConjugateExpression=function(t){try{var n=Expression.getConjugate(t);return n!=null?Expression.getConjugateExpression(n.multiply(t)):t}catch(a){console.error(a)}return null};var getPolynomialRelativeToNthRoot=function(t,n,a){var s=Polynomial$1.of();for(var l of t.summands()){var u=0,c=Expression.ONE;for(var p of l.factors())if(p instanceof NthRoot&&(a===p.degree||a%p.degree===0&&n instanceof Integer$2)){var d=p.a instanceof Integer$2?p.a:null;if(d==null&&(d=QuadraticInteger.toQuadraticInteger(p.a)),d!=null){var x=0,_=d;if(n.isUnit()){if(_.isUnit())for(x=1,_=_.truncatingDivide(n);_.primeFactor().equals(n);)x+=1,_=_.truncatingDivide(n);else if(!(_ instanceof Integer$2)){var S=_.truncatingDivide(n);if(!(S instanceof Expression.Integer)&&Number.isNaN(Number(S.a.toString())*Number(S.b.toString())))throw new TypeError;(S instanceof Expression.Integer||Number(S.a.toString())*Number(S.b.toString())>=0)&&(x=1,_=S)}}else for(;_.isDivisibleBy(n)&&x<p.degree;)_=_.truncatingDivide(n),x+=1;_=_.toExpression(),c=c.multiply(_._nthRoot(p.degree)),u+=x*(a/p.degree)}else throw new TypeError}else c=c.multiply(p);s=s.add(Polynomial$1.of(c).shift(u))}return s};Expression.getNthRootConjugate=function(t){if(t instanceof Integer$2)return null;if(t instanceof NthRoot)return t._pow(t.n-1);if(t instanceof Multiplication$1&&t.a instanceof Integer$2)return Expression.getNthRootConjugate(t.b);//!2019-10-20 a workaround
if(t instanceof Addition$1&&t.a instanceof Multiplication$1&&t.a.a instanceof Integer$2&&t.a.b instanceof NthRoot&&t.a.b.n===3&&t.b instanceof Multiplication$1&&t.b.a instanceof Integer$2&&t.b.b instanceof NthRoot&&t.b.b.n===3)return t.a._pow(2).subtract(t.a.multiply(t.b)).add(t.b._pow(2));//!
var n=getConjugateFactor(t),a=n.p,s=n.degree;if(a==null)return;var l=getPolynomialRelativeToNthRoot(t,a,s);l=l.divideAndRemainder(Polynomial$1.of(l.getContent()),"throw").quotient;//!new
const u=a.toExpression(),c=Polynomial$1.of(Expression.ONE).shift(s).subtract(Polynomial$1.of(u));return l.modularInverse(c).primitivePart().calcAt(u._nthRoot(s))};Expression.collectLinearEquationVariables=function(t){if(t instanceof Division$1)throw new RangeError;var n=[];for(var a of t.summands()){var s=void 0,l=Expression.ONE,u="";for(var c of a.factors())c instanceof Expression.Symbol&&s==null?s=c:(!(c instanceof Integer$2)&&!(c instanceof NthRoot)&&s==null&&(s=u),l=l.multiply(c));s==null&&(s=u);var p=s===u?"":s.toString();n.push({c:l,v:p})}return n};var has$2=function(t,n){if(t instanceof n)return!0;if(t instanceof BinaryOperation$1){if(t instanceof Addition$1){for(;t instanceof Addition$1;){if(has$2(t.b,n))return!0;t=t.a}return has$2(t,n)}return has$2(t.b,n)?!0:has$2(t.a,n)}return t instanceof Negation?has$2(t.b,n):t instanceof Expression.Function?has$2(t.a,n):!1};Expression.has=has$2;var has2=function(t,n){do{var a=null;t instanceof Addition$1?(a=t.b,t=t.a):(a=t,t=null);do{var s=null;if(a instanceof Multiplication$1?(s=a.b,a=a.a):(s=a,a=null),s instanceof n)return!0}while(a!=null)}while(t!=null);return!1},inverseReplacement=function(t,n){for(var a=n;!t.equals(n);)if(t instanceof Expression.Exponentiation&&t.b instanceof Multiplication$1&&n instanceof Exponentiation$1)a=a.pow(t.b.a.inverse()),t=t.pow(t.b.a.inverse());else if(t instanceof Expression.Exponentiation)a=a.pow(getExponent(t).inverse()),t=getBase(t);else if(t instanceof Addition$1){if(!(t.b instanceof Integer$2))throw new RangeError;a=a.subtract(t.b),t=t.a}else if(t instanceof Multiplication$1){if(!(t.a instanceof Integer$2))throw new RangeError;a=a.divide(t.a),t=t.b}else if(t instanceof Division$1){if(!(t.b instanceof Integer$2))throw new RangeError;a=a.multiply(t.b),t=t.a}else if(Expression.E===t||t instanceof Integer$2&&t.compareTo(Expression.ONE)>0&&getBase(n).equals(t)){//!new 2019-09-23
a=a.pow(getExponent(n)),t=n}else throw new TypeError;return a},h$1=function(t,n,a){for(var s of t.summands())for(var l of s.factors())getBase(a).equals(getBase(l))&&(n=n.lcm(getExponent(l).getDenominator()));return n};Replacement._counter=0;function Replacement(t){this.from=getBase(t),this.to=new Expression.Symbol("$t"+ ++Replacement._counter).pow(getExponent(t).getDenominator())}Replacement.prototype.apply=function(t){var n=this.from,a=this.to,s=getVariable(n),l=Polynomial$1.toPolynomial(n.subtract(a),s);return Expression._map(function(u){if(!Expression.has(u,Expression.Division)){var c=Polynomial$1.toPolynomial(u,s);return c.divideAndRemainder(l).remainder.calcAt(s)}return u},t)};Replacement.prototype.undo1=function(t){var n=this.from,a=this.to,s=getBase(this.to),l=Polynomial$1.toPolynomial(n.subtract(a),s);return Polynomial$1.toPolynomial(t,s).divideAndRemainder(l).remainder.calcAt(s)};Replacement.prototype.undo=function(t){var n=getBase(this.to),a=this.from.pow(getExponent(this.to).inverse());return Expression._map(function(s){return s.equals(n)?a:s},t)};Replacement.prototype.equals=function(){return!0};var getReplacement=function(t,n,a){if(n instanceof Replacement)return n;for(var s of t.summands())for(var l of s.factors())if(l instanceof Expression.Exponentiation&&(Expression.has(l.a,Expression.Symbol)||l.a instanceof Integer$2&&l.a.compareTo(Expression.ONE)>0)&&l.b instanceof Expression.Division){if(getBase(n).equals(l.a))n=new Expression.Exponentiation(l.a,getConstant$1(l.b.b).lcm(getExponent(n).getNumerator()).divide(getExponent(n).getDenominator()));else if(getBase(n)instanceof Expression.Symbol){if(l.a instanceof Expression.Addition&&l.a.a.divide(getBase(n))instanceof Integer$2&&l.a.b instanceof Integer$2&&l.b instanceof Division$1&&l.b.a instanceof Integer$2&&l.b.b instanceof Integer$2){var u=l.b.getDenominator();u=h$1(t,u,l);//!
var c=getBase(n).pow(u).subtract(l.a.b).divide(l.a.a.divide(getBase(n)));return c}else if(a==="any"||a!=null&&a.equals(l.a))return new Replacement(l)}}return n};Expression._getReplacement=getReplacement;var substitute=function(t,n,a,s){if(t.equals(n))return a;if(t instanceof Expression.Exponentiation){if(t.equals(s))return n;if(getBase(t).equals(getBase(s))){//!new 2019-09-23
return n.pow(getExponent(t).divide(getExponent(s)))}}if(t instanceof Expression.Addition)return substitute(t.a,n,a,s).add(substitute(t.b,n,a,s));if(t instanceof Expression.Multiplication)return substitute(t.a,n,a,s).multiply(substitute(t.b,n,a,s));if(t instanceof Expression.Exponentiation){var l=substitute(t.a,n,a,s),u=substitute(t.b,n,a,s);return l instanceof Expression.Exponentiation&&getBase(l).equals(getBase(s))&&getExponent(s).getDenominator().remainder(Expression.TWO).equals(Expression.ZERO)?getBase(l).pow(getExponent(l).multiply(u)):l.pow(u)}//! for sin.js:
return t instanceof Division$1?substitute(t.a,n,a,s).divide(substitute(t.b,n,a,s)):t instanceof Expression.Sin?substitute(t.a,n,a,s).sin():t instanceof Expression.Cos?substitute(t.a,n,a,s).cos():t};Expression._substitute=substitute;Expression.prototype.divideExpression=function(t){var n=this;if(simplifyIdentityMatrixPower){if(t instanceof Multiplication$1&&t.b instanceof IdentityMatrix)return t.b.equals(n)?t.a:t.a.divide(n).multiply(t.b);if(t instanceof IdentityMatrix)return Expression.ONE.divide(n).multiply(t);if(n instanceof Multiplication$1&&n.b instanceof IdentityMatrix)return t.divide(n.a).multiply(n.b);if(n instanceof IdentityMatrix)return t.multiply(n)}if(has$2(n,MatrixSymbol)){//!?
var a=getBase(n)instanceof MatrixSymbol?n.pow(Expression.ONE.negate()):new Expression.Exponentiation(n,Expression.ONE.negate());if(t.equals(Expression.ONE)){if(n instanceof Multiplication$1){//!?
return Expression.callback!=null&&Expression.callback(new Expression.Event("property-inverse-of-multiplication",{matrix:"{{0}}"})),t.multiply(Expression.ONE.divide(n.b).multiply(Expression.ONE.divide(n.a)))}if(n instanceof Addition$1&&!has$2(n,Expression.Matrix)){var s=Expression.simpleDivisor(n);if(s!=null&&!s.equals(Expression.ONE)&&isScalar(s)&&!gcd(s,n).equals(Expression.ONE))return t.multiply(Expression.ONE.divide(s).multiply(Expression.ONE.divide(n.divide(s))))}return a}}if(t instanceof Expression.Matrix&&n instanceof Expression.Matrix)return new Expression.Matrix(t.matrix.multiply(n.matrix.inverse()));if(t instanceof Expression.Matrix&&n instanceof Expression)return t.multiply(n.inverse());if(t instanceof Expression&&n instanceof Expression.Matrix)return Expression.callback!=null&&Expression.callback(new Expression.Event(n.matrix.getDeterminantEventType("inverse").type,n)),new Expression.Matrix(n.matrix.inverse()).multiply(t);if(n.equals(Expression.ZERO))throw new TypeError("ArithmeticException");if(t.equals(Expression.ZERO))return Expression.ZERO;if(n.equals(Expression.ONE))return t;//!!! new (2021-04-05)
var l=getTerm(n);if(l instanceof Expression.Exponentiation&&getBase(l)===Expression.E&&getExponent(l)instanceof Expression.ExpressionPolynomialRoot){if(getTerm(t)instanceof Expression.Exponentiation&&getExponent(getTerm(t))instanceof Expression.ExpressionPolynomialRoot&&(t instanceof Expression.Exponentiation||t instanceof Expression.Multiplication)&&(n instanceof Expression.Exponentiation||n instanceof Expression.Multiplication))return getExponent(getTerm(t)).subtract(getExponent(getTerm(n))).exp().multiply(getConstant$1(t).divide(getConstant$1(n)));if(getExponent(getTerm(n)).isNegative())return t.multiply(l.inverse()).divide(n.divide(l))}//!!!
//!!! new (21.12.2013)
{var u=getConjugate(n);if(u!=null){if(u.equals(Expression.ONE)){//!
if(Expression.isConstant(n))return t.multiply(Expression._map(function(J){return J instanceof NthRoot?Expression.toPolynomialRoot(J):J},n).inverse());//!
throw new TypeError}return u instanceof Expression.Multiplication&&u.a instanceof Expression.Complex&&(u=u.a),t.multiply(u).divide(n.multiply(u))}}if(Expression.has(t,Expression.Complex)){//!new 2017-11-25
var a=Expression.getComplexNumberParts(t);if(a!=null&&!a.imaginary.equals(Expression.ZERO)){var c=a.real,p=a.imaginary,d=(c.equals(Expression.ZERO)?n:c.gcd(n)).gcd(p)._abs();return d.equals(Expression.ONE)||(t=c.divide(d).add(p.divide(d).multiply(Expression.I)),n=n.divide(d)),n.isNegative()&&(t=t.negate(),n=n.negate()),n.equals(Expression.ONE)?t:new Division$1(t,n)}}//!
//!2020-06-07
if(!getConstant$1(n).equals(n)&&t.divide(getConstant$1(t)).equals(n.divide(getConstant$1(n))))return getConstant$1(t).divide(getConstant$1(n));var x=n instanceof Integer$2?void 0:getVariable(t);has$2(x,MatrixSymbol)&&isScalar(n)&&(x=getVariable(n));//!2019-06-16
if(x!=null){var _=x;x=getVariable(x);var S=getReplacement(n,getReplacement(t,x,_),"any");if(S instanceof Replacement){var c=S.apply(t),p=S.apply(n),T=c.divide(p),A=S.undo1(T.getNumerator()),R=S.undo1(T.getDenominator());//!new 2023-03-11:
var d=A.gcd(R);return d.equals(Expression.ONE)||(A=A.divide(d),R=R.divide(d)),A=S.undo(A),R=S.undo(R),R.equals(Expression.ONE)?A:new Expression.Division(A,R)}if(!S.equals(x)){var D=inverseReplacement(S,x),c=substitute(t,x,S,D),p=substitute(n,x,S,D),O=c.divide(p);return c=substitute(O.getNumerator(),x,D,S),p=substitute(O.getDenominator(),x,D,S),p.equals(Expression.ONE)?c:new Expression.Division(c,p)}}var F=void 0,z=void 0;if(x!=null&&(F=Polynomial$1.toPolynomial(t,x),z=Polynomial$1.toPolynomial(n,x),F.getDegree()===0&&z.getDegree()===0&&(x=void 0)),x==null){var d=complexGCD(getConstant$1(t,!0),getConstant$1(n,!0));if(!d.equals(Expression.ONE))return t=divideByInteger(t,d),n=divideByInteger(n,d),t.divide(n)}else{//!TODO: remove - performance optimization
var O=F.divideAndRemainder(z,"undefined");if(O!=null&&O.remainder.equals(Polynomial$1.ZERO))return O.quotient.calcAt(x);//!
var d=Polynomial$1.polynomialGCD(F,z);if(d.getDegree()!==0||!d.getLeadingCoefficient().equals(Expression.ONE)){var j=F.divideAndRemainder(d,"throw").quotient,Z=z.divideAndRemainder(d,"throw").quotient;return j.calcAt(x).divide(Z.calcAt(x))}}var W=getConstant$1(getFirstAdditionOperand(n));return W.compareTo(Expression.ZERO)<0?t.negate().divide(n.negate()):has$2(n,MatrixSymbol)?new Expression.Multiplication(t,new Expression.Exponentiation(n,Expression.ONE.negate())):new Division$1(t,n)};function Expression(){throw new TypeError("Do not call for better performance")}Expression.callback=void 0;Expression.Event=function(t,n,a){a=a??void 0,this.type=t,this.data=n,this.second=a};Expression.prototype.compare4Multiplication=function(t){throw new TypeError(this.toString())};Expression.prototype.compare4MultiplicationInteger=function(t){throw new TypeError};Expression.prototype.compare4MultiplicationSymbol=function(t){throw new TypeError};Expression.prototype.compare4MultiplicationNthRoot=function(t){throw new TypeError};Expression.prototype.negate=function(){return Expression.ONE.negate().multiply(this)};Expression.prototype.add=function(t){return t.addExpression(this)};Expression.prototype.subtract=function(t){return this.add(t.negate())};Expression.prototype.divide=function(t){//!2019-04-22
if(!(t instanceof Expression.Matrix)){if(this.equals(t)){//!TODO: remove - a hack to avoid some exceptions
return Expression.ONE}if(this.equals(t.negate()))return Expression.ONE.negate()}return t.divideExpression(this)};Expression.prototype.multiply=function(t){return t.multiplyExpression(this)};Expression.prototype.pow=function(t){return t.powExpression(this)};Expression.prototype.getDenominator=function(){return this instanceof Division$1?this.b:Expression.ONE};Expression.prototype.getNumerator=function(){return this instanceof Division$1?this.a:this};Expression.prototype.inverse=function(){return Expression.ONE.divide(this)};Expression.prototype.exp=function(){return Expression.E.pow(this)};var variables=function(t){var n=[];for(var a of t.summands())for(var s of a.factors())for(var l of getVariableInternal(s))l.v instanceof Integer$2||n.push(l.v);return n},getCommonVariable=function(t,n){for(var a=variables(t),s=variables(n),l=0;l<a.length;l+=1)if(a[l]instanceof NthRoot)return a[l];for(var l=0;l<s.length;l+=1)if(s[l]instanceof NthRoot)return s[l];for(var l=0;l<a.length;l+=1)a[l]instanceof Addition$1&&(a=a.concat(variables(a[l])),a[l]=null);for(var l=0;l<s.length;l+=1)s[l]instanceof Addition$1&&(s=s.concat(variables(s[l])),s[l]=null);for(var l=0;l<a.length;l+=1)for(var u=0;u<s.length;u+=1)if(a[l]!=null&&s[u]!=null&&a[l].equals(s[u]))return a[l];return null};Expression.prototype.gcd=function(t){if(this.equals(Expression.ONE))return this;if(this instanceof Integer$2&&t instanceof Integer$2)return integerGCD(this,t);if(!(this instanceof Integer$2)&&!(t instanceof Integer$2)){var n=getTerm(this),a=getTerm(t);if(n!=null&&a!=null&&n.equals(a))return getConstant$1(this).gcd(getConstant$1(t)).multiply(a);//!2020-11-05 more workarounds:
if(n=getTerm(getFirstAdditionOperand(this)),a=getTerm(getFirstAdditionOperand(t)),n!=null&&a!=null&&n.equals(a)){var s=getConstant$1(getFirstAdditionOperand(this)),l=getConstant$1(getFirstAdditionOperand(t));if(s instanceof Integer$2&&l instanceof Integer$2){var u=s.truncatingDivide(l);if(u instanceof Expression.Integer&&u.multiply(l).equals(s))return this.subtract(t.multiply(u)).gcd(t);var u=l.truncatingDivide(s);if(u instanceof Expression.Integer&&u.multiply(s).equals(l))return this.gcd(t.subtract(this.multiply(u)))}}}if(this.equals(Expression.ZERO)||t.equals(Expression.ZERO))return this.add(t);//!
var c=gcd(this,t,getCommonVariable(this,t));return c};Expression.prototype.lcm=function(t){return t.equals(Expression.ONE)?this:this.divide(this.gcd(t)).multiply(t)};//!new 2020-07-21
Expression.prototype.polynomialGCD=function(t){var n=this,a=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(n))).next().value.v;if(a instanceof Expression.Symbol){var s=getReplacement(n,getReplacement(t,a));return s.equals(a)?Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(n,a),Polynomial$1.toPolynomial(t,a)).calcAt(a):substitute(substitute(n,a,s,inverseReplacement(s,a)).polynomialGCD(substitute(t,a,s,inverseReplacement(s,a))),a,inverseReplacement(s,a),s)}return n.gcd(t)};var precedence={binary:{".^":5,"^":5,"*":3,"/":3,"+":2,"-":2},unary:{"-":5}};Expression.Symbol=function(t){this.symbol=t};Expression.Symbol.prototype=Object.create(Expression.prototype);Expression.Symbol.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationSymbol(this)};Expression.Symbol.prototype.compare4MultiplicationInteger=function(t){return-1};Expression.Symbol.prototype.compare4MultiplicationSymbol=function(t){return t.symbol<this.symbol?-1:this.symbol<t.symbol?1:0};Expression.Symbol.prototype.compare4MultiplicationNthRoot=function(t){return-1};Expression.Symbol.prototype.toString=function(t){if(this.symbol===""){return"e";//!
}return this.symbol};Expression.Symbol.prototype._pow=function(t){return t>1?new Expression.Exponentiation(this,Expression.Integer.fromNumber(t)):Expression.prototype._pow.call(this,t)};Expression.prototype.addInteger=function(t){return this.addExpression(t)};Expression.prototype.multiplyInteger=function(t){return t===Expression.ONE?this:this.multiplyExpression(t)};Expression.prototype.divideInteger=function(t){return this.divideExpression(t)};var simplifyIdentityMatrixPower=!0;//! TODO:
function Integer$2(t){this.value=t}Integer$2.prototype=Object.create(Expression.prototype);Integer$2.prototype.powExpression=function(t){var n=this;if(t instanceof IdentityMatrix)return new IdentityMatrix(t.symbol);if(t instanceof MatrixSymbol)return n.equals(Expression.ZERO)?Expression.ONE:n.equals(Expression.ONE)?t:new Exponentiation$1(t,n);//!new 2019-12-16
if(t instanceof Exponentiation$1&&getExponent(t)instanceof Integer$2&&n instanceof Integer$2)return getBase(t).pow(getExponent(t).multiply(n));//!
//!new 2020-03-02
if(t instanceof Exponentiation$1&&getTerm(getExponent(t))instanceof Expression.Symbol)return getBase(t).pow(getExponent(t).multiply(n));//!
if(n.compareTo(Expression.ZERO)<0)return Expression.ONE.divide(t.pow(n.negate()));if(t instanceof Expression.Matrix){n.compareTo(Expression.ONE)>0&&(t.matrix.isDiagonal()||Expression.callback!=null&&Expression.callback(new Expression.Event("pow",t,new Expression.Matrix(Matrix$1.I(1).map(function(){return n})))));var a=function(u,c){return c.toNumber()>Number.MAX_SAFE_INTEGER?a(u,c.truncatingDivide(Expression.TWO)).pow(2).multiply(u.pow(c.remainder(Expression.TWO).toNumber())):u.pow(c.toNumber())};return new Expression.Matrix(a(t.matrix,n))}if(n.equals(Expression.ZERO))return Expression.ONE;if(n.equals(Expression.ONE))return t;if(t instanceof Expression.Symbol)return new Exponentiation$1(t,n);if(t instanceof Exponentiation$1){var s=t.b.multiply(n);if(s.getNumerator()instanceof Integer$2&&s.getDenominator()instanceof Integer$2){var l=s.getNumerator().truncatingDivide(s.getDenominator());if(l.compareTo(Expression.ZERO)>0)return t.a.pow(l).multiply(t.a.pow(s.subtract(l)))}return t.a.pow(t.b.multiply(n))}return t instanceof Integer$2&&(t.compareTo(Expression.ZERO)===0||t.compareTo(Expression.ONE)===0||t.compareTo(Expression.ONE.negate())===0)?n.remainder(Expression.TWO).compareTo(Expression.ZERO)===0?t.multiply(t):t:(t.equals(Expression.I)&&(n=n.remainder(Expression.TWO.add(Expression.TWO))),Expression.pow(t,n.toNumber()))};Integer$2.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationInteger(this)};Integer$2.prototype.compare4MultiplicationInteger=function(t){return t.compareTo(this)};Integer$2.prototype.compare4MultiplicationSymbol=function(t){return 1};Integer$2.prototype.compare4MultiplicationNthRoot=function(t){return 1};Integer$2.prototype.negate=function(){return new Integer$2(SmallBigInt.unaryMinus(this.value))};Integer$2.prototype.isUnit=function(){return this.equals(Expression.ONE)||this.equals(Expression.ONE.negate())};Expression.prototype.toExpression=function(){return this};Integer$2.prototype.compareTo=function(t){if(t instanceof Expression.Integer){var n=t.value,a=this.value;return SmallBigInt.lessThan(a,n)?-1:SmallBigInt.lessThan(n,a)?1:0}return Expression.prototype.compareTo.call(this,t)};Integer$2.prototype.abs=function(){return SmallBigInt.toNumber(this.value)<0?this.negate():this};Integer$2.prototype.sign=function(){return Math.sign(SmallBigInt.toNumber(this.value))};Integer$2.prototype.add=function(t){return this===Expression.ZERO?t:t.addInteger(this)};Integer$2.prototype.addInteger=function(t){return new Integer$2(SmallBigInt.add(t.value,this.value))};Integer$2.prototype.multiply=function(t){return t.multiplyInteger(this)};Integer$2.prototype.multiplyInteger=function(t){return t===Expression.ONE?this:new Integer$2(SmallBigInt.multiply(t.value,this.value))};Integer$2.prototype.divide=function(t){return t.divideInteger(this)};//! for performance only
Integer$2.prototype.divideInteger=function(t){var n=this,a=t.value,s=n.value;if(SmallBigInt.toNumber(s)===0)throw new TypeError("ArithmeticException");if(typeof s=="number"&&s===1){return t;//!!!
}var l=SmallBigInt.divide(a,s),u=SmallBigInt.subtract(a,SmallBigInt.multiply(l,s));if(SmallBigInt.toNumber(u)===0)return new Integer$2(l);var c=SmallBigInt.BigInt(bigIntGCDWrapper(u,s));return a=SmallBigInt.divide(a,c),s=SmallBigInt.divide(s,c),SmallBigInt.toNumber(s)<0&&(a=SmallBigInt.unaryMinus(a),s=SmallBigInt.unaryMinus(s)),new Division$1(new Integer$2(a),new Integer$2(s))};Integer$2.prototype.truncatingDivide=function(t){return t.equals(Expression.ONE)?this:t.truncatingDivideInteger(this)};Integer$2.prototype.truncatingDivideInteger=function(t){var n=this;return new Integer$2(SmallBigInt.divide(t.value,n.value))};Integer$2.prototype.isDivisibleBy=function(t){return t.isDivisibleByInteger(this)};Integer$2.prototype.isDivisibleByInteger=function(t){return t.remainder(this).equals(Expression.ZERO)};Integer$2.prototype.remainder=function(t){return t.remainderInteger(this)};Integer$2.prototype.remainderInteger=function(t){var n=this,a=SmallBigInt.remainder(t.value,n.value);return a===1?Expression.ONE:new Integer$2(a)};Integer$2.prototype.primeFactor=function(){return integerPrimeFactor(this)};Integer$2.prototype.toNumber=function(){return SmallBigInt.toNumber(this.value)};Integer$2.prototype.toBigInt=function(){return this.value};Integer$2.prototype.toString=function(t){return this.value.toString()};Integer$2.prototype.valueOf=function(){return console.error("!"),this};Integer$2.prototype.leftShift=function(t){return new Integer$2(SmallBigInt.leftShift(this.value,t))};Integer$2.prototype.asUintN=function(t){return new Integer$2(SmallBigInt.asUintN(t,this.value))};Integer$2.fromNumber=function(t){return new Integer$2(SmallBigInt.BigInt(t))};Integer$2.fromString=function(t){return new Integer$2(SmallBigInt.BigInt(t))};Integer$2.fromBigInt=function(t){return new Integer$2(SmallBigInt.BigInt(t))};Expression.ZERO=Integer$2.fromNumber(0);Expression.ONE=Integer$2.fromNumber(1);Expression.TWO=Integer$2.fromNumber(2);Expression.TEN=Integer$2.fromNumber(10);Expression.Matrix=function(t){this.matrix=t};Expression.Matrix.fromArray=function(t){return new Expression.Matrix(Matrix$1.padRows(t,null))};Expression.Matrix.prototype=Object.create(Expression.prototype);Expression.Matrix.prototype.augment=function(t){return t instanceof Expression.IdentityMatrix?new Expression.Matrix(this.matrix.augment(Matrix$1.I(this.matrix.cols()))):new Expression.Matrix(this.matrix.augment(t.matrix))};Expression.Matrix.prototype.equals=function(t){//!new 2019-12-03
if(t===Expression.ZERO)return this.matrix.isSquare()&&this.matrix.eql(this.matrix.map(function(n,a,s){return Expression.ZERO}));//!
return t instanceof Expression.Matrix?this.matrix.eql(t.matrix):!1};Expression.Matrix.prototype.compare4Multiplication=function(t){if(t instanceof Expression.Matrix)return 0;if(t instanceof MatrixSymbol){if(this.matrix.isSquare()&&this.matrix.isDiagonal()){const n=this.matrix.e(0,0);if(this.matrix.eql(Matrix$1.Zero(this.matrix.rows(),this.matrix.cols()).map((a,s,l)=>s===l?n:Expression.ZERO)))return 1}return-1}return 1};Expression.Matrix.prototype.compare4MultiplicationNthRoot=function(t){return 1};Expression.Matrix.prototype.multiply=function(t){return t.multiplyMatrix(this)};Expression.prototype.multiplyMatrix=function(t){var n=getIdentityMatrixCoefficient(this);if(n!=null)return new Expression.Matrix(t.matrix.scale(n));if(t.equals(Expression.ZERO)){//!TODO: TEST, TODO: sizes are lost
return t}return this.multiplyExpression(t)};Expression.Matrix.prototype.multiplyExpression=function(t){var n=getIdentityMatrixCoefficient(t);return n!=null?new Expression.Matrix(this.matrix.scale(n)):Expression.prototype.multiplyExpression.call(this,t)};Expression.Matrix.prototype.multiplyMatrix=function(t){return Expression.callback!=null&&Expression.callback(new Expression.Event("multiply",t,this)),new Expression.Matrix(t.matrix.multiply(this.matrix))};Expression.Matrix.prototype.compare4MultiplicationSymbol=function(t){return 1};Expression.Matrix.prototype.multiplyDivision=Expression.Matrix.prototype.multiplyExpression;Expression.Matrix.prototype.add=function(t){return t.addMatrix(this)};Expression.Matrix.prototype.addMatrix=function(t){return Expression.callback!=null&&Expression.callback(new Expression.Event("add",t,this)),new Expression.Matrix(t.matrix.add(this.matrix))};var isScalar=function(t){return t instanceof Integer$2||t instanceof Expression.Complex?!0:t instanceof MatrixSymbol?!1:t instanceof Expression.ExpressionWithPolynomialRoot?isScalar(t.e):t instanceof Expression.Symbol?!0:t instanceof BinaryOperation$1?isScalar(t.a)&&isScalar(t.b):t instanceof Negation?isScalar(t.b):t instanceof Expression.Function?isScalar(t.a):t instanceof Expression.NonSimplifiedExpression?isScalar(t.unwrap()):!1};Expression.isScalar=isScalar;var getIdentityMatrixCoefficient=function(t){var n=void 0;if(t instanceof Multiplication$1&&t.b instanceof IdentityMatrix)n=t.a;else if(t instanceof IdentityMatrix)n=Expression.ONE;else if(isScalar(t))n=t;else if(t instanceof Addition$1&&Expression.has(t,IdentityMatrix)){var a=getIdentityMatrixCoefficient(t.a),s=getIdentityMatrixCoefficient(t.b);a!=null&&s!=null&&(n=a.add(s))}return n};Expression.prototype.addMatrix=function(t){var n=getIdentityMatrixCoefficient(this);if(n!=null){if(t.matrix.isSquare())return new Expression.Matrix(Matrix$1.I(t.matrix.rows()).scale(n)).add(t);throw new RangeError("NonSquareMatrixException")}return this.addExpression(t)};Expression.Matrix.prototype.addExpression=function(t){var n=getIdentityMatrixCoefficient(t);if(n!=null){if(this.matrix.isSquare())return this.add(new Expression.Matrix(Matrix$1.I(this.matrix.rows()).scale(n)));throw new RangeError("NonSquareMatrixException")}return Expression.prototype.addExpression.call(this,t)};Expression.Matrix.prototype.toString=function(t){return this.matrix.toString(setTopLevel(!0,t))};Expression.Matrix.prototype.isExact=function(){return this.matrix.isExact()};function BinaryOperation$1(t,n){this.a=t,this.b=n}BinaryOperation$1.prototype=Object.create(Expression.prototype);BinaryOperation$1.prototype.isNegation=function(){return this instanceof Multiplication$1&&this.a instanceof Integer$2&&this.a.equals(Expression.ONE.negate())};var setTopLevel=function(t,n){return n==null?{isTopLevel:t}:Object.assign({},n,{isTopLevel:t})};Expression.setTopLevel=setTopLevel;BinaryOperation$1.prototype.toString=function(t){var n=this.a,a=this.b,s=!1;this instanceof Addition$1&&a.isNegative()&&(s=!0,a=a.negateCarefully());var l=n.getPrecedence()+(n.isRightToLeftAssociative()?-1:0)<this.getPrecedence(),u=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=a.getPrecedence();t!=null&&t.isTopLevel!=null&&t.isTopLevel===!1&&(l=l||n.isUnaryPlusMinus()),u=u||a.isUnaryPlusMinus(),u=u||this.unwrap()instanceof Exponentiation$1&&a.unwrap()instanceof Exponentiation$1,l=l||this.unwrap()instanceof Exponentiation$1&&n.unwrap()instanceof Expression.Function;var c=s?"-":this.getS();return this.isNegation()?"-"+(u?"(":"")+a.toString(setTopLevel(u,t))+(u?")":""):(l?"(":"")+n.toString(setTopLevel(l||t==null||t.isTopLevel,t))+(l?")":"")+c+(u?"(":"")+a.toString(setTopLevel(u,t))+(u?")":"")};Expression.prototype.unwrap=function(){return this};function Exponentiation$1(t,n){BinaryOperation$1.call(this,t,n)}Exponentiation$1.prototype=Object.create(BinaryOperation$1.prototype);Exponentiation$1.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationExponentiation(this)};Exponentiation$1.prototype.compare4MultiplicationInteger=function(t){return-1};Exponentiation$1.prototype.compare4MultiplicationExponentiation=function(t){var n=this;return getBase(t).compare4Multiplication(getBase(n))||getExponent(t).compare4Multiplication(getExponent(n))};BinaryOperation$1.prototype.compare4MultiplicationExponentiation=function(){return-1};function Multiplication$1(t,n){BinaryOperation$1.call(this,t,n)}Multiplication$1.prototype=Object.create(BinaryOperation$1.prototype);Multiplication$1.prototype.multiply=function(t){return t.multiplyExpression(this)};var compare4Multiplication2=function(t,n){if(t instanceof NthRoot&&n instanceof NthRoot){var a=t.multiply(n);if(a instanceof Expression.Multiplication){if(a.equals(new Expression.Multiplication(t,n)))return-1;if(a.equals(new Expression.Multiplication(n,t)))return 1}return 0}return t instanceof Integer$2&&n instanceof Exponentiation$1?-1:t instanceof Exponentiation$1&&n instanceof Integer$2?1:t instanceof Expression.Complex&&n instanceof Exponentiation$1?-1:t instanceof Exponentiation$1&&n instanceof Expression.Complex?1:compare4Multiplication(getBase(t),getBase(n))};function Negation(t){this.b=t}Negation.prototype=Object.create(Expression.prototype);Expression.prototype.equalsNegation=function(t){return!1};Negation.prototype.equalsNegation=function(t){return this.b.equals(t.b)};Negation.prototype.equals=function(t){return t.equalsNegation()};Negation.prototype.toString=function(t){var n=this.b,a=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=n.getPrecedence();return a=a||n.isUnaryPlusMinus(),"-"+(a?"(":"")+n.toString(setTopLevel(a,t))+(a?")":"")};function Subtraction(t,n){BinaryOperation$1.call(this,t,n)}Subtraction.prototype=Object.create(BinaryOperation$1.prototype);Subtraction.prototype.getS=function(){return"-"};function Addition$1(t,n){BinaryOperation$1.call(this,t,n)}Addition$1.prototype=Object.create(BinaryOperation$1.prototype);Addition$1.prototype.multiply=function(t){return t.multiplyAddition(this)};var _multiplyAddition=function(t,n,a){var s=[];for(var l of n.summands()){var u=a?t.multiply(l):l.multiply(t);s.push(u)}return _sum(s)},_sum=function(t){var n=t.length;if(n===0)return Expression.ZERO;for(;n>1;){for(var a=0;2*a<n;a+=1)t[a]=2*a+1<n?t[2*a+1].add(t[2*a]):t[2*a];n=Math.ceil(n/2)}return t[0]};Expression.prototype.multiplyAddition=function(t){return _multiplyAddition(this,t,!1)};Addition$1.prototype.multiplyExpression=function(t){return _multiplyAddition(t,this,!0)};function Division$1(t,n){BinaryOperation$1.call(this,t,n)}Division$1.prototype=Object.create(BinaryOperation$1.prototype);Division$1.prototype.multiply=function(t){return t.multiplyDivision(this)};Expression.prototype.multiplyDivision=function(t){return t.a.multiply(this).divide(t.b)};Division$1.prototype.multiplyDivision=function(t){return t.a.multiply(this.a).divide(t.b.multiply(this.b))};Division$1.prototype.multiplyExpression=function(t){return t.multiply(this.a).divide(this.b)};Division$1.prototype.add=function(t){return t.addDivision(this)};Expression.prototype.addDivision=function(t){return t.a.add(this.multiply(t.b)).divide(t.b)};Division$1.prototype.addDivision=function(t){return t.b.equals(this.b)?t.a.add(this.a).divide(this.b):t.a.multiply(this.b).add(t.b.multiply(this.a)).divide(t.b.multiply(this.b))};Division$1.prototype.addExpression=function(t){return t.multiply(this.b).add(this.a).divide(this.b)};Division$1.prototype.divide=function(t){return this.a.divide(this.b.multiply(t))};Division$1.prototype.divideExpression=function(t){return t.multiply(this.b).divide(this.a)};Division$1.prototype.multiplyAddition=function(t){return t.multiply(this.a).divide(this.b)};Expression.prototype.equals=function(t){throw new RangeError};Expression.prototype.equalsInteger=function(t){return this instanceof Expression.ExpressionWithPolynomialRoot||this instanceof Expression.ExpressionPolynomialRoot?this.equals(t):!1};const _isNumberTypeUsedForSmall=SmallBigInt.BigInt(0)===0;Integer$2.prototype.equals=function(t){return t===Expression.ZERO&&_isNumberTypeUsedForSmall?typeof this.value=="number"&&this.value===0:t===Expression.ONE&&_isNumberTypeUsedForSmall?typeof this.value=="number"&&this.value===1:t.equalsInteger(this)};Integer$2.prototype.equalsInteger=function(t){return t.compareTo(this)===0};Expression.Symbol.prototype.equals=function(t){return t instanceof Expression.Symbol&&this.symbol===t.symbol};BinaryOperation$1.prototype.equals=function(t){if(t instanceof Addition$1&&Expression.has(t,Expression.ExpressionPolynomialRoot))return this.subtract(t).equals(Expression.ZERO);if(t instanceof Addition$1&&this instanceof Multiplication$1&&Expression.has(this,Expression.ExpressionPolynomialRoot)||this instanceof Addition$1&&t instanceof Multiplication$1&&Expression.has(t,Expression.ExpressionPolynomialRoot))return this.subtract(t).equals(Expression.ZERO);if(this instanceof Addition$1&&t instanceof Addition$1){for(var n=this,a=t,s=n.summands(),l=a.summands(),u=s.next().value,t=l.next().value;u!=null&&t!=null;){if(!u.equals(t))return!1;u=s.next().value,t=l.next().value}return u!=null?!1:t==null}return t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.ExpressionPolynomialRoot?t.equals(this):t instanceof BinaryOperation$1&&this.getS()===t.getS()&&this.a.equals(t.a)&&this.b.equals(t.b)};function MatrixSymbol(t){Expression.Symbol.call(this,t)}MatrixSymbol.prototype=Object.create(Expression.Symbol.prototype);Exponentiation$1.prototype.inverse=function(){return this.pow(Expression.ONE.negate())};MatrixSymbol.prototype.inverse=function(){return this.pow(Expression.ONE.negate())};MatrixSymbol.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationMatrixSymbol(this)};Expression.prototype.compare4MultiplicationMatrixSymbol=function(t){return 1};Addition$1.prototype.compare4MultiplicationMatrixSymbol=function(t){return-1};Expression.Matrix.prototype.compare4MultiplicationMatrixSymbol=function(t){return t instanceof IdentityMatrix?1:-1};MatrixSymbol.prototype.compare4MultiplicationMatrixSymbol=function(t){var n=Expression.Symbol.prototype.compare4MultiplicationSymbol.call(this,t);return n===1?-1:n};MatrixSymbol.prototype.compare4MultiplicationSymbol=function(t){return-1};MatrixSymbol.prototype.equals=function(t){return t instanceof MatrixSymbol&&Expression.Symbol.prototype.equals.call(this,t)};MatrixSymbol.prototype.transpose=function(){return new Expression.Exponentiation(this,new Expression.Symbol("T"))};Expression.MatrixSymbol=MatrixSymbol;function IdentityMatrix(t){MatrixSymbol.call(this,t)}IdentityMatrix.prototype=Object.create(MatrixSymbol.prototype);IdentityMatrix.prototype.multiplyAddition=function(t){return isScalar(t)?new Multiplication$1(t,this):Expression.prototype.multiplyAddition.call(this,t)};IdentityMatrix.prototype.addMatrix=function(t){return t.add(new Expression.Matrix(Matrix$1.I(t.matrix.rows())))};IdentityMatrix.prototype.add=function(t){return t.addIdentityMatrix(this)};Expression.prototype.addIdentityMatrix=function(t){return this.addExpression(t)};Expression.Matrix.prototype.addIdentityMatrix=function(t){return new Expression.Matrix(Matrix$1.I(this.matrix.rows())).add(this)};IdentityMatrix.prototype.multiplyDivision=function(t){return isScalar(t)?new Multiplication$1(t,this):Expression.prototype.multiplyExpression.call(this,t)};IdentityMatrix.prototype.compare4MultiplicationMatrixSymbol=function(t){var n=this;return t instanceof IdentityMatrix?t.symbol<n.symbol?-1:n.symbol<t.symbol?1:0:1};Expression.IdentityMatrix=IdentityMatrix;BinaryOperation$1.prototype.getS=function(){throw new TypeError("abstract")};Exponentiation$1.prototype.getS=function(){return"^"};Multiplication$1.prototype.getS=function(){return"*"};Negation.prototype.getS=function(){return"-"};Addition$1.prototype.getS=function(){return"+"};Division$1.prototype.getS=function(){return"/"};Expression.Function=function(t,n){this.name=t,this.a=n};Expression.Function.prototype=Object.create(Expression.prototype);Expression.Function.prototype.toString=function(t){return this.name+"("+this.a.toString(setTopLevel(!0,t))+")"};Expression.Function.prototype.equals=function(t){return t instanceof Expression.Function&&this.name===t.name&&this.a.equals(t.a)};Negation.prototype.isUnaryPlusMinus=function(){return!0};BinaryOperation$1.prototype.isUnaryPlusMinus=function(){return this.isNegation()};Expression.Function.prototype.isUnaryPlusMinus=function(){return!1;//!
};Expression.prototype.isUnaryPlusMinus=function(){return!1};Integer$2.prototype.isUnaryPlusMinus=function(){return this.compareTo(Expression.ZERO)<0};Negation.prototype.getPrecedence=function(){return precedence.unary["-"]};BinaryOperation$1.prototype.getPrecedence=function(){return this.isNegation()?precedence.unary["-"]:precedence.binary[this.getS()]};Expression.Function.prototype.getPrecedence=function(){return precedence.unary["-"]};Expression.prototype.getPrecedence=function(){return 1e3};Integer$2.prototype.getPrecedence=function(){return this.compareTo(Expression.ZERO)<0?precedence.unary["-"]:1e3};//! Note: this function is more for canonical order(?) or output(?), to check if a numeric expression is negative you should use Expression#sign()
Expression.prototype.isNegative=function(){var t=this;if(t instanceof Integer$2)return t.compareTo(Expression.ZERO)<0;if(t instanceof Expression.Complex)return t.real.compareTo(Expression.ZERO)<0||t.real.compareTo(Expression.ZERO)===0&&t.imaginary.compareTo(Expression.ZERO)<0;if(t instanceof Addition$1){var n=t;do n=n.a;while(n instanceof Addition$1);return n.isNegative()}return t instanceof Multiplication$1||t instanceof Division$1?t.a.isNegative()!==t.b.isNegative():t instanceof Negation?!0:t instanceof Expression.Radians?t.value.isNegative():!1};Expression.prototype.negateCarefully=function(){if(this instanceof Integer$2)return this.negate();if(this instanceof Addition$1)return new Addition$1(this.a.negateCarefully(),this.b.negateCarefully());if(this instanceof Multiplication$1)return this.b.isNegative()?new Multiplication$1(this.a,this.b.negateCarefully()):this.a.negateCarefully().equals(Expression.ONE)?this.b:new Multiplication$1(this.a.negateCarefully(),this.b);if(this instanceof Division$1)return this.b.isNegative()?new Division$1(this.a,this.b.negateCarefully()):new Division$1(this.a.negateCarefully(),this.b);if(this instanceof Negation){return this.b;//!
}return this.negate()};function NthRoot(t,n,a){Expression.Function.call(this,t,n),this.n=a,this.degree=a,this.radicand=n,console.assert(t===(a===2?"sqrt":a+"-root"))}NthRoot.prototype=Object.create(Expression.Function.prototype);NthRoot.prototype.compare4Multiplication=function(t){return t.compare4MultiplicationNthRoot(this)};NthRoot.prototype.compare4MultiplicationInteger=function(t){return-1};NthRoot.prototype.compare4MultiplicationSymbol=function(t){return 1};NthRoot.prototype.compare4MultiplicationNthRoot=function(t){return t.n<this.n?-1:t.n>this.n?1:0};NthRoot.prototype.toString=function(t){var n=this.a.getPrecedence()<=this.getPrecedence();return(n?"(":"")+this.a.toString(setTopLevel(n||t==null||t.isTopLevel,t))+(n?")":"")+"^"+(this.n===2?"0.5":"(1/"+this.n+")")};var isCommutative=function(t){return!Expression.has(t,Expression.Matrix)&&!Expression.has(t,Expression.MatrixSymbol)};NthRoot.prototype.getDegree=function(){return console.error("deprecated"),this.n};NthRoot.prototype.multiplyExpression=function(t){if(t instanceof Multiplication$1&&isCommutative(this)&&this.a instanceof Expression.Integer){for(var n of t.factors())if(n instanceof NthRoot&&n.a instanceof Expression.Integer&&compare4Multiplication2(n,this)===0){var a=!1,s=Expression.ONE;for(var l of t.factors()){var u=l;!a&&n===l&&(u=n.multiply(this),a=!0),s=s.multiply(u)}return s}}return Expression.prototype.multiplyExpression.call(this,t)};NthRoot.prototype.equals=function(t){return t instanceof Expression.ExpressionWithPolynomialRoot||t instanceof Expression.ExpressionPolynomialRoot?t.equals(this):Expression.Function.prototype.equals.call(this,t)};//!new
NthRoot.prototype._pow=function(t){var n=Math.gcd(this.n,t);return n>1?this.n===n?this.a._pow(t/n):this.a._nthRoot(this.n/n)._pow(t/n):Expression.prototype._pow.call(this,t)};function isPerfectCube(t){return SmallBigInt.toNumber(SmallBigInt.subtract(SmallBigInt.exponentiate(t._integerNthRoot(3).toBigInt(),SmallBigInt.BigInt(3)),t.toBigInt()))===0}function isPerfectSquare(t){return SmallBigInt.toNumber(SmallBigInt.subtract(SmallBigInt.exponentiate(t._integerNthRoot(2).toBigInt(),SmallBigInt.BigInt(2)),t.toBigInt()))===0}var makeRoot=function(t,n){return n===1?t:n===2?new SquareRoot(t):new NthRoot(n+"-root",t,n)};NthRoot.makeRoot=makeRoot;Expression.prototype._nthRoot=function(t){if(typeof t=="number"){if(t<1||t>Number.MAX_SAFE_INTEGER||Math.floor(t)!==t)throw new RangeError("NotSupportedError")}else if(!(this instanceof Expression.Matrix))throw new RangeError("NotSupportedError");var n=this;if(t===2&&n instanceof Addition$1){if((n.a instanceof SquareRoot||n.a instanceof Multiplication$1&&n.a.a instanceof Integer$2&&n.a.b instanceof SquareRoot)&&n.b instanceof Integer$2){var a=n.a,mx=n.b,s=mx.multiply(mx).subtract(a.multiply(a));s instanceof Integer$2&&!isPerfectSquare(s.abs())&&(s=null);var l=s instanceof Integer$2&&s.compareTo(Expression.ZERO)>=0?s.squareRoot():void 0;if(l!=null&&l instanceof Integer$2){var u=mx.add(l),c=u.compareTo(Expression.ZERO)>=0?u.squareRoot().divide(Expression.TWO.squareRoot()):void 0;if(c!=null){var p=a.divide(Expression.TWO.multiply(c));return c.add(p)}}}if((n.a instanceof SquareRoot||n.a instanceof Multiplication$1&&n.a.a instanceof Integer$2&&n.a.b instanceof SquareRoot)&&(n.b instanceof SquareRoot||n.b instanceof Multiplication$1&&n.b.a instanceof Integer$2&&n.b.b instanceof SquareRoot)){var c=n.a,p=n.b,u=c.multiply(c),d=p.multiply(p),x=u.gcd(d).squareRoot();if(!x.equals(Expression.ONE)){var mx=c.divide(x).add(p.divide(x)).squareRoot().multiply(x.squareRoot());return typeof hit=="function"&&hit({rootFromAddition:n.toString()}),mx}}if(Expression._isPositive(n)){var _=getConjugateFactor(n);if(_.p!=null){var l=_.p.toExpression()._nthRoot(_.degree),S=getPolynomialRelativeToNthRoot(n,_.p,_.degree),a=S.getCoefficient(1).multiply(l.toExpression()),mx=S.getCoefficient(0),T=mx.multiply(mx).subtract(a.multiply(a)),A=function(Rx){var $x=Rx.divide(getConstant$1(Rx)),Gx=Expression.getConjugate($x);return Gx!=null&&Gx.multiply($x)instanceof Integer$2&&isPerfectSquare(Gx.multiply($x).abs())};if(T instanceof Integer$2||A(T)){var R=T.squareRoot(),u=mx.add(R);if(u instanceof Integer$2||A(u)){var c=u.squareRoot().divide(Expression.TWO.squareRoot()),p=a.divide(Expression.TWO.multiply(c));return c.add(p)}}}}else if(Expression._isPositive(n.negate())&&t===2)return Expression.I.multiply(n.negate()._nthRoot(2))}if(t===3&&n instanceof Addition$1&&(n.a instanceof SquareRoot&&n.a.a instanceof Integer$2||n.a instanceof Multiplication$1&&n.a.a instanceof Integer$2&&n.a.b instanceof SquareRoot)&&n.b instanceof Integer$2){var a=n.a,mx=n.b,D=a.multiply(a).subtract(mx.multiply(mx));if(isPerfectCube(D)){var l=new Expression.Symbol("t"),O=Expression.Integer.fromNumber(9),F=Expression.Integer.fromNumber(27),z=Expression.pow(O.multiply(l).add(mx.subtract(l)),2).multiply(mx.subtract(l)).subtract(F.multiply(l).multiply(Expression.pow(a,2))),j=Polynomial$1.toPolynomial(z,l);j=j.scale(j.getContent().inverse());var l=j.doRationalRootTest();if(l!=null){var c=l._nthRoot(3),p=a.divide(a.abs()).multiply(mx.subtract(l).divide(Expression.Integer.fromNumber(3).multiply(c))._nthRoot(2));return c.add(p)}}}if(n instanceof NthRoot)return typeof hit=="function"&&hit({rootFromRoot:""}),n.a._nthRoot(n.n*t);if((n instanceof Division$1||n instanceof Multiplication$1)&&(t%2!==0||n.a instanceof Integer$2&&n.a.compareTo(Expression.ZERO)>0||n.b instanceof Integer$2&&n.b.compareTo(Expression.ZERO)>0||n.a instanceof Integer$2&&isConstant$1(n.b)||isConstant$1(n)||isPositive(n.a)||isPositive(n.b)||isPositive(n.b.negate()))){if(n instanceof Division$1)return n.a._nthRoot(t).divide(n.b._nthRoot(t));if(n instanceof Multiplication$1)return n.a._nthRoot(t).multiply(n.b._nthRoot(t))}var Z=n instanceof Integer$2?n:null,W=QuadraticInteger.toQuadraticInteger(n);//!
if(W==null&&n instanceof Expression.Addition&&n.a instanceof Multiplication$1&&n.b instanceof Multiplication$1){var x=n.a.pow(Expression.TWO).gcd(n.b.pow(Expression.TWO)).squareRoot();if(!x.equals(Expression.ONE))return x._nthRoot(t).multiply(n.divide(x)._nthRoot(t))}//!
if(W!=null){if(t!==2&&t%2===0){var _=n.squareRoot();if(!(_ instanceof Expression.SquareRoot))return _._nthRoot(t/2)}if((t===2||t===3)&&W.isValid())if(W.isPositive()){Z=W;//!new 2020-12-31
if(W.norm!=null&&Math.abs(Number(W.norm().toString()))>Number.MAX_SAFE_INTEGER&&t!==3){Z=null;//!
}//!
}else return Expression.ONE.negate()._nthRoot(t).multiply(this.negate()._nthRoot(t))}if(Z!=null){if(n=Z,n instanceof Integer$2&&n.compareTo(Expression.ZERO)<0){if(t%2===0){if(t===2)return Expression.I.multiply(this.negate()._nthRoot(t));throw new RangeError("NotSupportedError")}return this.negate()._nthRoot(t).negate()}if(n.equals(Expression.ZERO))return this;for(var J=[],en=n;!en.equals(Expression.ONE);){var D=en.primeFactor();if(D instanceof QuadraticInteger){if(t!==2&&t!==3)throw new TypeError;if(Number(D.a.toString())<0&&Number(D.b.toString())>0||Number(D.a.toString())>0&&Number(D.b.toString())<0){var c=t%2===0?D.abs():D;return n.toExpression().divide(c.toExpression()._pow(t))._nthRoot(t).multiply(c.toExpression())}var tn=D.norm();if(Number(D.b.toString())!==0&&Number(D.a.toString())!==0&&Number(tn.toString())>=0&&isPerfectSquare(Integer$2.fromBigInt(tn))&&t===2)return n.toExpression().divide(D.toExpression())._nthRoot(2).multiply(D.toExpression()._nthRoot(2))}var Ct=en instanceof Expression.Integer&&D instanceof Expression.Integer?primeFactor._countTrailingZeros(en.value,D.value):-1,Q=0;if(Ct!==-1)Q=Ct,en=en.truncatingDivide(D._pow(Ct));else if(en.isUnit())for(;!en.equals(Expression.ONE);)en=en.truncatingDivide(D),Q+=1;else for(;en.isDivisibleBy(D);)en=en.truncatingDivide(D),Q+=1;D=D.toExpression();var on=t;D instanceof NthRoot&&(on*=D.n,D=D.a);var l=Math.gcd(on,Q);for(on/=l,Q/=l;Q!==0;){var x=Q>=on?on:1,gn=Math.floor(Q/x),dn=Math.floor(on/x);J.push(Object.freeze({degree:dn,radicand:Expression.pow(D,gn)})),Q=Q-x*gn}}var In=Expression.ONE;J.sort((Ax,Tx)=>Ax.degree-Tx.degree);for(var dn=-1,en=0;en<J.length;en+=1)dn===-1||J[en].degree!==J[dn].degree?(dn+=1,J[dn]=J[en]):J[dn]=Object.freeze({degree:J[en].degree,radicand:J[dn].radicand.multiply(J[en].radicand)});J.length=dn+1;for(var ix=null,Cn=0;Cn<J.length;Cn+=1){var ax=J[Cn].degree;if(ax!==1){var sx=J[Cn].radicand,n=makeRoot(sx,ax);In!==Expression.ONE?In=new Expression.Multiplication(In,n):In=n}else ix=J[Cn].radicand}return ix!=null&&(In=ix.multiply(In)),In}if(n instanceof Expression.Matrix){typeof hit=="function"&&hit(t===2?{squareRoot:"matrix"}:{nthRoot:"Matrix^(1/"+t+")"});var lx=Expression.getEigenvalues(n.matrix),ox=typeof t=="number"?Expression.Integer.fromNumber(t):t;if(lx.length===n.matrix.cols()){var hx=Expression.getEigenvectors(n.matrix,lx);if(hx.filter(Ax=>Ax!=null).length===n.matrix.cols()){n.matrix.isDiagonal()||(Expression.callback!=null&&Expression.callback(new Expression.Event("nth-root-using-diagonalization",n)),Expression.callback!=null&&Expression.callback(new Expression.Event("diagonalize",n)));var _=Expression.diagonalize(n.matrix,lx,hx),_x=_.L,ux=_x.map(function(Tx,kx,Rx){return kx===Rx?Tx.pow(Expression.ONE.divide(ox)):Tx});return new Expression.Matrix(_.T.multiply(ux).multiply(_.T_INVERSED))}else{n.matrix.isJordanMatrix()?Expression.callback!=null&&Expression.callback(new Expression.Event("Jordan-matrix-nth-root",n)):(Expression.callback!=null&&Expression.callback(new Expression.Event("nth-root-using-Jordan-normal-form",n)),Expression.callback!=null&&Expression.callback(new Expression.Event("Jordan-decomposition",n)));var px=function(Tx,kx){var Rx=Tx.map(function($x,Gx,qx){if(Gx>qx)return Expression.ZERO;if(Gx===qx)return Tx.e(Gx,qx).pow(Expression.ONE.divide(kx));if(Tx.e(Gx,Gx+1).equals(Expression.ZERO))return Expression.ZERO;if(!Tx.e(Gx,Gx+1).equals(Expression.ONE))throw new TypeError("assertion");for(var Dx=qx-Gx,lE=0;lE<Dx;lE+=1)if(!Tx.e(qx-1-lE,qx-lE).equals(Expression.ONE))return Expression.ZERO;for(var cE=Expression.ONE,lE=0;lE<Dx;lE+=1)cE=cE.multiply(Expression.ONE.divide(kx).subtract(Expression.Integer.fromNumber(lE))).divide(Expression.Integer.fromNumber(lE+1));return cE.divide(Tx.e(Gx,Gx)._pow(Dx)).multiply(Tx.e(Gx,Gx).pow(Expression.ONE.divide(kx)))});return Rx},_=Expression.getFormaDeJordan(n.matrix,lx),dx=px(_.J,ox);return new Expression.Matrix(_.P.multiply(dx).multiply(_.P_INVERSED))}}}//!2019-04-22
if(n instanceof Exponentiation$1&&n.a instanceof Integer$2&&n.a.compareTo(Expression.ZERO)>0)if(n.b instanceof Expression.Symbol){if(n.a instanceof Expression.Integer&&integerPrimeFactor(n.a).equals(n.a))return new Expression.Exponentiation(n.a,n.b.divide(Expression.Integer.fromNumber(t)))}else return n.a.pow(n.b.divide(Expression.Integer.fromNumber(t)));//!2019-16-06
if(n instanceof Exponentiation$1&&n.a===Expression.E||n instanceof Exponentiation$1&&getBase(n)instanceof Expression.Logarithm&&getBase(n).a instanceof Expression.Integer)return n.a.pow(n.b.divide(Expression.Integer.fromNumber(t)));if(n instanceof IdentityMatrix)return n;//!2019-17-06
if(n instanceof Expression.Symbol)return new Expression.Exponentiation(n,Expression.ONE.divide(Expression.Integer.fromNumber(t)));if(n instanceof Exponentiation$1&&(n.a instanceof Expression.Symbol||isGoodPolynomial(n.a))&&(t%2===1||n.b.getNumerator()instanceof Integer$2&&n.b.getNumerator().remainder(Expression.TWO).equals(Expression.ONE))){var p=n.b.divide(Expression.Integer.fromNumber(t));return p.equals(Expression.ONE)?n.a:new Expression.Exponentiation(n.a,p)}//!2019-06-20
var mx=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(n))).next().value.v;if(mx instanceof Expression.Symbol||mx instanceof Expression.Logarithm&&mx.a instanceof Expression.Integer&&(t===2||t===3||!0)){var j=Polynomial$1.toPolynomial(n,mx),gx=j.getContent();if(gx.isNegative()&&(gx=gx.negate()),isPositive(gx)&&!gx.equals(Expression.ONE))return n.divide(gx)._nthRoot(t).multiply(gx._nthRoot(t));if(j.getDegree()===1&&j.getCoefficient(0)instanceof Integer$2&&!j.getCoefficient(0).equals(Expression.ZERO)&&j.getCoefficient(1)instanceof Integer$2)if(j.getCoefficient(1).compareTo(Expression.ZERO)>0){var ox=t instanceof Expression.Symbol?t:Expression.Integer.fromNumber(t);return new Expression.Exponentiation(n,Expression.ONE.divide(ox))}else{//!TODO: fix
if(t%2!==0)return Expression.ONE.negate()._nthRoot(t).multiply(new Expression.Exponentiation(n.negate(),Expression.ONE.divide(Expression.Integer.fromNumber(t))))}if(j.getDegree()>1&&!j.getCoefficient(0).equals(Expression.ZERO)){var ox=j.getDegree(),l=mx.multiply(j.getCoefficient(ox)._nthRoot(ox)).add(j.getCoefficient(0)._nthRoot(ox));if(n.equals(l._pow(ox))){//!TODO: remove
if(ox>=t&&(t%2!==0||Expression._isPositive(mx)))return l.pow(Expression.ONE).multiply(l._pow(ox-t)._nthRoot(t));//!
if(t%2!==0||Expression._isPositive(mx))return new Expression.Exponentiation(l,Expression.Integer.fromNumber(ox).divide(Expression.Integer.fromNumber(t)))}if(j.getDegree()>1&&j.getSquareFreePolynomial().equals(j)&&t===2)return new Expression.Exponentiation(n,Expression.ONE.divide(Expression.Integer.fromNumber(t)));if(j.getDegree()>1&&t===3){var D=simpleDivisor(n);return n.divide(D)._nthRoot(t).multiply(D._nthRoot(t))}}}if(t%2!==0&&n instanceof Expression.ExponentiationOfMinusOne)return getBase(n).pow(getExponent(n).divide(Expression.Integer.fromNumber(t)));if(n instanceof Addition$1&&n.b instanceof NthRoot&&n.a instanceof NthRoot){var x=nthRootCommonFactor(n.a,n.b);if(!x.equals(Expression.ONE))return x._nthRoot(t).multiply(n.divide(x)._nthRoot(t))}if(n instanceof Exponentiation$1&&t===3&&getExponent(n).equals(Integer$2.fromNumber(3)))return getBase(n);if(n instanceof Exponentiation$1&&t===2&&getExponent(n).equals(Integer$2.fromNumber(2))){if(isPositive(getBase(n)))return getBase(n);if(isPositive(getBase(n).negate()))return getBase(n).negate()}if(t===2&&!(n.getDenominator()instanceof Expression.Integer)){var Sx=simpleDivisor(n.getDenominator());if(Sx.complexConjugate().multiply(Sx).equals(n.getDenominator()))return n.getNumerator()._nthRoot(t).divide(Sx.abs())}var Sx=simpleDivisor(n);if(!Sx.equals(n)&&(console.log(Sx.toString()),isPositive(Sx)&&(!(Sx instanceof Addition$1)||!(n.divide(Sx)instanceof Addition$1))&&!(Sx._nthRoot(t)instanceof NthRoot)))return Sx._nthRoot(t).multiply(n.divide(Sx)._nthRoot(t));const Ex=!0,Cx=function(Ax){return Expression.isConstant(Ax)&&!Expression.has(Ax,Expression.Sin)&&!Expression.has(Ax,Expression.Cos)};if(typeof t=="number"&&!isPositive(n)&&Ex&&Cx(n)&&t===2){const Ax=Expression.getComplexNumberParts(n),Tx=Ax.real,kx=Ax.imaginary,Rx=Tx._pow(2).add(kx._pow(2)).squareRoot(),$x=Tx.add(Rx).divide(Expression.TWO).squareRoot(),Gx=Expression.Integer.fromNumber(kx.sign()).multiply(Tx.negate().add(Rx).divide(Expression.TWO).squareRoot());return $x.add(Gx.multiply(Expression.I))}if(typeof t=="number"&&(isPositive(n)||Cx(n)&&t===2)){var _=Expression.toPolynomialRoot(makeRoot(n,t));if(_!=null)return _}if(typeof t=="number"&&isPositive(n.negate())){var _=Expression.toPolynomialRoot(makeRoot(n.negate(),t));if(_!=null)return _.negate()}if(getBase(n)instanceof Expression.Symbol&&getBase(n).symbol.startsWith("$t")&&typeof t=="number")return getBase(n).pow(getExponent(n).divide(Expression.Integer.fromNumber(t)));//!new
if(Expression.isReal(n)&&typeof t=="number"&&isPositive(n))return new Expression.Exponentiation(n,Expression.Integer.fromNumber(t).inverse());//!
if(t===2&&!(this instanceof Expression.Exponentiation)){var D=simpleDivisor(this);if(D.complexConjugate().multiply(D).equals(this))return D.abs()}if(t===2&&!(this instanceof Expression.Exponentiation))return console.log(this.toString()),Expression.has(this,Expression.Symbol)?new Expression.Exponentiation(n,Expression.Integer.fromNumber(t).inverse()):NthRoot.makeRoot(this,t);throw new RangeError("NotSupportedError")};function SquareRoot(t){NthRoot.call(this,"sqrt",t,2)}SquareRoot.prototype=Object.create(NthRoot.prototype);//!
SquareRoot.prototype.divideInteger=function(t){return t.multiply(this).divide(this.a)};Expression.prototype.squareRoot=function(){return this._nthRoot(2)};Expression.Rank=function(t){Expression.Function.call(this,"rank",t)};Expression.Rank.prototype=Object.create(Expression.Function.prototype);Expression.prototype.rank=function(){var t=this;if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");//!
Expression.callback!=null&&Expression.callback(new Expression.Event("rank",t));var n=[],a=void 0;if(Matrix$1.toRowEchelonWithCallback(t.matrix,Matrix$1.GaussMontante,"",void 0,function(s){var l=s.condition;if(l.isTrue())a=s.matrix.rank();else{var u=s.matrix;n.push(new ExpressionWithCondition(Integer$2.fromNumber(u.rank()),l))}}),n.length!==0)return new Expression.Cases(n);//!
return Integer$2.fromNumber(a)};Expression.Determinant=function(t){Expression.Function.call(this,"determinant",t)};Expression.Determinant.prototype=Object.create(Expression.Function.prototype);function isSquareMatrix(t){return!!(t instanceof Expression.Matrix&&t.matrix.isSquare()||t instanceof Expression.Exponentiation&&t.a instanceof Expression.MatrixSymbol&&isIntegerOrN(t.b))}Expression.prototype.determinant=function(){var t=this;if(t instanceof Expression.Multiplication&&(isSquareMatrix(t.a)||isSquareMatrix(t.b)))return Expression.callback!=null&&Expression.callback(new Expression.Event("property-determinant-of-multiplication",{matrix:"{{0}}"})),t.a.determinant().multiply(t.b.determinant());if(t instanceof Expression.Exponentiation&&t.a instanceof Expression.MatrixSymbol&&isIntegerOrN(t.b))return Expression.callback!=null&&Expression.callback(new Expression.Event("property-determinant-of-multiplication",{matrix:"{{0}}"})),t.a.determinant().pow(t.b);if(t instanceof Expression.MatrixSymbol)return new Expression.Determinant(t);if(isMatrixSymbolTranspose(t))return t.transpose().determinant();if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");//!
return Expression.callback!=null&&Expression.callback(new Expression.Event(t.matrix.getDeterminantEventType("determinant").type,t)),t.matrix.determinant()};Expression.RowReduce=function(t){Expression.Function.call(this,"row-reduce",t)};Expression.RowReduce.prototype=Object.create(Expression.Function.prototype);Expression.prototype.rowReduce=function(){var t=this;if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");//!
return Expression.callback!=null&&Expression.callback(new Expression.Event("row-reduce".type,t)),new Expression.Matrix(t.matrix.toRowEchelon(Matrix$1.GaussJordan,"",null).matrix)};Expression.Transpose=function(t){Expression.Function.call(this,"transpose",t)};Expression.Transpose.prototype=Object.create(Expression.Function.prototype);Expression.prototype.transpose=function(){var t=this;if(t instanceof Expression.Multiplication)return Expression.callback!=null&&Expression.callback(new Expression.Event("property-transpose-of-multiplication",{matrix:"{{0}}"})),t.b.transpose().multiply(t.a.transpose());if(t instanceof Expression.Addition)return t.a.transpose().add(t.b.transpose());if(isScalar(t))return t;if(!(getBase(t)instanceof MatrixSymbol)&&t instanceof Expression.Exponentiation&&t.b.equals(Expression.ONE.negate()))return t.a.transpose().pow(t.b);if(t instanceof Expression.Exponentiation&&t.b.equals(new Expression.Symbol("T")))return t.a;if(getBase(t)instanceof MatrixSymbol){var n=getExponent(t).multiply(new Expression.Symbol("T")),a=Polynomial$1.toPolynomial(n,new Expression.Symbol("T"));return a.getDegree()>=2&&(n=n.subtract(a.getCoefficient(2).multiply(new Expression.Symbol("T")._pow(2))).add(a.getCoefficient(2))),new Expression.Exponentiation(getBase(t),n)}if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return new Expression.Matrix(t.matrix.transpose())};Expression.Adjugate=function(t){Expression.Function.call(this,"adjugate",t)};Expression.Adjugate.prototype=Object.create(Expression.Function.prototype);Expression.prototype.adjugate=function(){var t=this;const n=function(){Expression.callback!=null&&Expression.callback(new Expression.Event("property-adjugate-of-multiplication",{matrix:"{{0}}"}))};if(t instanceof Expression.Multiplication&&(isSquareMatrix(t.a)||isSquareMatrix(t.b)))return n(),t.b.adjugate().multiply(t.a.adjugate());if(t instanceof Expression.Exponentiation&&t.a instanceof Expression.MatrixSymbol&&isIntegerOrN(t.b))return n(),t.a.adjugate().pow(t.b);if(isMatrixSymbolTranspose(t))return n(),t.transpose().adjugate().transpose();if(t instanceof Expression.MatrixSymbol)return t.determinant().multiply(t.inverse());if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError:matrixArgExpected");if(Expression.callback!=null&&Expression.callback(new Expression.Event("adjugate",t)),t.matrix.rows()===1&&t.matrix.cols()===1)return new Expression.Matrix(Matrix$1.I(1));var a=t.matrix.determinant();if(Expression.isScalar(a)&&!a.equals(Expression.ZERO))return new Expression.Matrix(t.matrix.inverse().scale(a));var s=t.matrix.map(function(u,c,p,d){return(c+p-2*Math.floor((c+p)/2)===1?Expression.ONE.negate():Expression.ONE).multiply(d.minorMatrix(c,p).determinant())}),l=new Expression.Matrix(s.transpose());return l};Expression.NoAnswerExpression=function(t,n,a){Expression.Function.call(this,n,t),this.second=a};Expression.NoAnswerExpression.prototype=Object.create(Expression.Function.prototype);Expression.prototype.transformNoAnswerExpression=function(t,n){if(n=n??void 0,!(this instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return t==="solve"&&Expression.callback!=null&&Expression.callback(new Expression.Event("solve",this)),new Expression.NoAnswerExpression(this,t,n)};Expression.NoAnswerExpression.prototype.multiply=function(){throw new RangeError("NotSupportedError")};Expression.NoAnswerExpression.prototype.add=function(){throw new RangeError("NotSupportedError")};Expression.NoAnswerExpression.prototype.toString=function(t){return this.second==null?Expression.Function.prototype.toString.call(this,t):this.a.toString(setTopLevel(!0,t))+" "+this.name+" "+this.second.toString(setTopLevel(!0,t))};Expression.ElementWisePower=function(t,n){BinaryOperation$1.call(this,t,n)};Expression.ElementWisePower.prototype=Object.create(BinaryOperation$1.prototype);Expression.ElementWisePower.prototype.getS=function(){return".^"};Expression.prototype.elementWisePower=function(t){if(!(this instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return new Expression.Matrix(this.matrix.map(function(n,a,s){return n.pow(t)}))};Expression.prototype.isRightToLeftAssociative=function(){var t=this;return t instanceof Integer$2?t.compareTo(Expression.ZERO)<0:t instanceof Negation?!0:t instanceof BinaryOperation$1?t.isNegation()?!0:t instanceof Exponentiation$1:!1};var integerPrimeFactor=function(t){return Integer$2.fromBigInt(primeFactor(t.value))},simpleDivisor=function(t){if(t instanceof Division$1)throw new RangeError;if(t instanceof Expression.Matrix)throw new RangeError;if(t instanceof Expression.Symbol)return t;if(t instanceof Integer$2){var n=t,a=n.compareTo(Expression.ZERO)<0?n.negate():n;return a.compareTo(Expression.ONE)>0?integerPrimeFactor(a):null}if(t instanceof Expression.Complex){var s=t.primeFactor();return!s.equals(t)&&t.divide(s)instanceof Expression.Integer&&(s=s.multiply(Expression.I)),s}var l=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if(l instanceof NthRoot&&l.a instanceof Integer$2&&l.n===2){var u=getPolynomialRelativeToNthRoot(t,l.a,l.n),s=u.getContent();if(!s.equals(Expression.ONE)&&!s.equals(Expression.ONE.negate()))return simpleDivisor(s)}if(l!=null){l=getVariable(l);//!?TODO: FIX
var c=getReplacement(t,l);if(!c.equals(l))return substitute(simpleDivisor(substitute(t,l,c,inverseReplacement(c,l))),l,inverseReplacement(c,l),c);var p=Polynomial$1.toPolynomial(t,l),d=p.getContent(),x=simpleDivisor(d);if(x!=null)return x;var _=getConstant$1(p.getLeadingCoefficient());if(_ instanceof Expression.Complex&&_.real.equals(Expression.ZERO)){return Expression.I;//!?
}if(p.getCoefficient(0).equals(Expression.ZERO))return l;if(p.getDegree()>=2){var S=p.doRationalRootTest();if(S!=null){var x=l.multiply(S.getDenominator()).subtract(S.getNumerator());return x}}if(p.getDegree()>=2&&p._hasIntegerLikeCoefficients()){var x=p.factorize();if(x!=null)return simpleDivisor(x.calcAt(l))}if(p.getDegree()>=2&&!p._hasIntegerLikeCoefficients()){var x=p.squareFreeFactors();if(x.a0.getDegree()!==0)return x.a0.scale(x.a0.getLeadingCoefficient().inverse()).calcAt(l)}if(t=p.calcAt(l),t.isNegative()){t=t.negate();//!?
}return t}throw new RangeError};Expression.simpleDivisor=simpleDivisor;Expression.everyDivisor=function(t,n){if(t.equals(Expression.ZERO))return!0;if(!n(Expression.ONE))return!1;for(var a=[],s=function(u,c,p){if(c>=0){for(var d=a[c],x=u;x<=d.e;x+=1)if(!s(0,c-1,p.multiply(Expression.pow(d.d,x))))return!1}else if(!n(p))return!1;return!0};!t.equals(Expression.ONE)&&!t.equals(Expression.ONE.negate());){var l=simpleDivisor(t);if((a.length===0||!a[a.length-1].d.equals(l))&&a.push({d:l,e:0}),a[a.length-1].e+=1,!s(a[a.length-1].e,a.length-1,Expression.ONE))return!1;t=t.divide(l)}return!0};Expression.Integer=Integer$2;Expression.NthRoot=NthRoot;Expression.SquareRoot=SquareRoot;Expression.Negation=Negation;Expression.Subtraction=Subtraction;Expression.BinaryOperation=BinaryOperation$1;Expression.Exponentiation=Exponentiation$1;Expression.Multiplication=Multiplication$1;Expression.Addition=Addition$1;Expression.Division=Division$1;Expression.pow=function(t,n){return t._pow(n)};Expression.prototype._pow=function(t){return pow(this,t,Expression.ONE)};Expression.Integer.prototype._pow=function(t){return typeof t=="number"&&Math.floor(t)===t&&t>=0&&t<=Number.MAX_SAFE_INTEGER?new Integer$2(SmallBigInt.exponentiate(this.value,SmallBigInt.BigInt(t))):Expression.prototype._pow.call(this,t)};Expression.Integer.prototype._nthRoot=function(t){if(typeof t=="number"&&t===2&&this.equals(this.abs())&&isPerfectSquare(this))return this._integerNthRoot(2);if(typeof t=="number"&&t===3&&isPerfectCube(this))return this._integerNthRoot(3);if(typeof t=="number"&&t===2&&this.equals(this.abs())){for(var n=this,a=Expression.ONE,s=Expression.ONE;!isPerfectSquare(n);){var l=Integer$2.fromBigInt(primeFactor(n.toBigInt())),u=primeFactor._countTrailingZeros(n.toBigInt(),l.toBigInt());n=n.divide(l._pow(u)),u%2===1&&(s=s.multiply(l),u-=1),a=a.multiply(l._pow(u/2))}return n.squareRoot().multiply(a).multiply(new SquareRoot(s))}return Expression.prototype._nthRoot.call(this,t)};Expression.Integer.prototype._isPerfectSquare=function(){return this.sign()<0?!1:isPerfectSquare(this)};Integer$2.prototype._integerNthRoot=function(t){return new Integer$2(SmallBigInt.BigInt(primeFactor._integerNthRoot(this.toBigInt(),t)))};Integer$2.prototype.bitLength=function(){return primeFactor._bitLength(this.toBigInt())};Integer$2.prototype.modInverse=function(t){return Expression.Integer.fromBigInt(primeFactor._modInverse(this.toBigInt(),t.toBigInt()))};Integer$2.prototype.modulo=function t(n){const a=this.remainder(n);return a.compareTo(Expression.ZERO)<0?a.add(n):a};Expression.Equality=function(t,n){BinaryOperation$1.call(this,t,n)};Expression.Equality.prototype=Object.create(BinaryOperation$1.prototype);Expression.Equality.prototype.getS=function(){return"="};Expression.Inequality=function(t,n,a){BinaryOperation$1.call(this,t,n),this.sign=a};Expression.Inequality.prototype=Object.create(BinaryOperation$1.prototype);Expression.Inequality.prototype.getS=function(){return this.sign};function AdditionIterator(t){if(t==null)throw new TypeError;this.value=void 0,this.e=t}AdditionIterator.prototype=Object.create(Iterator.prototype);AdditionIterator.prototype.next=function(){return this.value=this.e instanceof Addition$1?this.e.b:this.e,this.e=this.e instanceof Addition$1?this.e.a:void 0,this};function MultiplicationIterator(t){if(t==null)throw new TypeError;this.value=void 0,this.e=t}MultiplicationIterator.prototype=Object.create(Iterator.prototype);MultiplicationIterator.prototype.next=function(){return this.value=this.e instanceof Multiplication$1?this.e.b:this.e,this.e=this.e instanceof Multiplication$1?this.e.a:null,this};Expression.prototype.summands=function(){return new AdditionIterator(this)};Expression.prototype.factors=function(){return new MultiplicationIterator(this)};var splitX=function(t){var n=void 0,a=void 0,s=void 0,l=void 0;for(var u of t.summands()){var c=0;for(var p of u.factors()){var d=p,x=getBase(p);getExponent(p);var _=x instanceof Expression.Symbol?x.toString():"";_==="X"&&c===0?(c=1,l=d):isScalar(d)?n=n==null?d:d.multiply(n):(c===0&&(s=s==null?d:d.multiply(s)),c===1&&(a=a==null?d:d.multiply(a)))}}return n=n??Expression.ONE,{s:n,l:a,r:s,x:l}};Expression.splitX=splitX;var groupX=function(t,n){var a=splitX(t),s=splitX(n),l=a.s,u=a.l,c=a.r,p=s.s,d=s.l,x=s.r;if(c==null&&x==null&&a.x.equals(s.x))return u=u??new IdentityMatrix("I"),d=d??new IdentityMatrix("I"),new Multiplication$1(l.multiply(u).add(p.multiply(d)),a.x);if(u==null&&d==null&&a.x.equals(s.x))return c=c??new IdentityMatrix("I"),x=x??new IdentityMatrix("I"),new Multiplication$1(a.x,l.multiply(c).add(p.multiply(x)))},getExpressionWithX=function(t){if(t instanceof Division$1)if(t.getDenominator()instanceof Expression.Integer){t=t.getNumerator();//!
}else return{withX:void 0,withoutX:void 0};var n=void 0,a=void 0;for(var s of t.summands()){var l=s,u=!1;for(var c of s.factors()){var p=c,d=getBase(p);//!new2019-12-03
if(d instanceof Addition$1&&getExponent(p).isNegative()){var x=null;for(var _ of t.summands())_!==s&&(x=x==null?_:x.add(_));var S=getExponent(p).negate(),T=x.multiply(d.pow(S)).add(s.multiply(new Expression.Exponentiation(d,S))),A=T.transformEquality(Expression.ZERO),R=getExponent(A.a)instanceof Expression.Symbol?A.a:getBase(A.a),D=Polynomial$1.toPolynomial(d,R).divideAndRemainder(Polynomial$1.toPolynomial(A.a.subtract(A.b),R)).remainder.calcAt(R),O=D instanceof Expression.Matrix?D.determinant():null;if(!Expression.isConstant(O))return{withX:void 0,withoutX:void 0};if(O.equals(Expression.ZERO))return{withX:Expression.ZERO,withoutX:Expression.ONE};return getExpressionWithX(T);//!hack
}//!
//!2020-06-14
if(d instanceof MatrixSymbol&&getExponent(p).isNegative()){var S=getExponent(p).negate(),T=s.b.equals(p)?t.multiply(d.pow(S)):Array.from(d.pow(S).multiply(s).factors()).length<Array.from(s.factors()).length?d.pow(S).multiply(t):null;if(T!=null)return getExpressionWithX(T)}if(d instanceof Expression.Division){//! 2023-02-12  (X/9) TODO: ???
if(d.getDenominator()instanceof Expression.Integer)return getExpressionWithX(d.getDenominator().multiply(t))}//!
if(!(d instanceof Integer$2)&&!(d instanceof Expression.Symbol)&&!(d instanceof Expression.Matrix)&&!(d instanceof NthRoot)){if(d instanceof Expression.Determinant&&d.a.toString()==="X")return{withX:null,withoutX:null};if(Expression.has(d,Expression.MatrixSymbol))throw new RangeError("NotSupportedError")}if(d instanceof Expression.Symbol){var F=d.toString();if(F==="X"){if(u)return{withX:null,withoutX:null};u=!0}}}if(u)if(n!=null){if(n=groupX(n,l),n==null)return{withX:null,withoutX:null}}else n=l;u||(a=a==null?l.negate():a.subtract(l))}return{withX:n,withoutX:a}},isConstant$1=function(t){return t instanceof Expression.BinaryOperation?isConstant$1(t.b)&&isConstant$1(t.a):t instanceof Expression.Integer||t instanceof Expression.PolynomialRootSymbol?!0:t instanceof Expression.ExpressionWithPolynomialRoot?isConstant$1(t.e):t instanceof Expression.ExpressionPolynomialRoot?!0:t instanceof Expression.Symbol?t===Expression.E||t===Expression.PI:t instanceof Expression.Complex?!0:t instanceof Expression.NthRoot||t instanceof Expression.Sin||t instanceof Expression.Cos||t instanceof Expression.Arctan?isConstant$1(t.a):t instanceof Expression.Radians?isConstant$1(t.value):t instanceof Expression.Logarithm?isConstant$1(t.a):t===Expression.E||t===Expression.PI};Expression.isConstant=isConstant$1;Expression.getMultivariatePolynomial=function(t){if(!(t instanceof Expression.Division)){var n=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if((n instanceof NthRoot||n instanceof Integer$2||n instanceof Expression.Complex)&&(n=void 0),n!=null){n instanceof Expression.Addition&&(n=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(n))).next().value.v);var a=getReplacement(t,n);if(!a.equals(n)&&(t=substitute(t,n,a,inverseReplacement(a,n)),t instanceof Expression.Division&&t.b instanceof Expression.Integer)){t=t.a;//!
}var s=Polynomial$1.toPolynomial(t,n);if(s.getDegree()===0){console.warn("Expression.getMultivariatePolynomial");return}for(var l=0;l<=s.getDegree();l+=1){var u=s.getCoefficient(l);if(!isConstant$1(u)){var c=Expression.getMultivariatePolynomial(u);if(c==null)return}}return{p:s.map(function(p){return substitute(p,n,inverseReplacement(a,n),a)}),v:inverseReplacement(a,n)}}}};Expression.isSingleVariablePolynomial=function(t){var n=Expression.getMultivariatePolynomial(t);if(n==null)return!1;for(var a=n.p,s=0;s<=a.getDegree();s+=1){var l=a.getCoefficient(s);if(!isConstant$1(l))return!1}return!0};Expression.prototype.transformEquality=function(t){var n=this.subtract(t),a=getExpressionWithX(n),s=a.withX,l=a.withoutX;if(s==null){if(n.getDenominator()instanceof Integer$2&&!(n.getNumerator()instanceof Expression.Matrix)&&!Expression.has(n,Expression.MatrixSymbol)&&!n.equals(Expression.ZERO)){typeof n.upgrade=="function"&&(n=n.upgrade());var u=new Expression.Symbol("x"),a={p:Polynomial$1.toPolynomial(n.getNumerator(),u),v:u};if((a.p.getDegree()===0||Expression.has(n,Expression.Function))&&(a=Expression.getMultivariatePolynomial(n.getNumerator())),a!=null&&a.v instanceof Expression.Symbol){var c=a.p,p=a.v,d=Matrix$1.Zero(1,c.getDegree()+1).map(function(Z,W,J){return c.getCoefficient(c.getDegree()-J)});return new Expression.NoAnswerExpression(new Expression.Matrix(d),"polynomial-roots",{polynomial:c,variable:p})}}if(n instanceof Expression.Matrix&&this instanceof Expression.Matrix&&(t instanceof Expression.Matrix||t instanceof Expression.IdentityMatrix))return Expression.SystemOfEquations.from([{left:this,right:t}]);{//!new 2019-11-27
return Expression.SystemOfEquations.from([{left:this,right:t}])}}l==null&&(l=Expression.ZERO);var x=s,_=l,S=!1,T=s;for(var A of T.factors()){var R=A,D=getBase(R),O=!1;if(D instanceof Expression.Symbol){var F=D.toString();F==="X"&&(O=!0,S=!0)}if(O)x=R;else{if(R instanceof Expression.Matrix&&(R.matrix.cols()!==R.matrix.rows()||R.determinant().equals(Expression.ZERO)))return Expression.SystemOfEquations.from([{left:s,right:l}]);var z=R.inverse();S?_=z.multiply(_):_=_.multiply(z)}}return x instanceof Expression.Exponentiation&&getExponent(x).equals(Expression.ONE.negate())&&_ instanceof Expression.Matrix&&!_.determinant().equals(Expression.ZERO)&&(x=x.inverse(),_=_.inverse()),new Expression.Equality(x,_)};Expression.prototype.transformInequality=function(t,n){var a=this;return new Expression.Inequality(a,t,n)};Expression.simplifications=[];Expression.prototype.simplifyExpression=function(){for(var t=this,n=0;n<Expression.simplifications.length;n+=1)t=Expression.simplifications[n](t);return t};Expression.prototype.isExact=function(){return!Expression.has(this,Expression.PolynomialRootSymbol)&&!Expression.has(this,Expression.ExpressionPolynomialRoot)};Expression.PI=new Expression.Symbol("");Expression.E=new Expression.Symbol("");Expression.I=new Expression.Symbol("");Expression.CIRCLE=new Expression.Symbol("");Expression.INFINITY=new Expression.Symbol("");Expression.prototype.addPosition=function(){return this};//! 2018-09-30
Expression.SystemOfEquations=function(t){throw new TypeError};Expression.SystemOfEquations.from=function(t){return new Expression.NoAnswerExpression({matrix:null},"system-of-equations",{equations:t})};Expression.ExponentiationOfMinusOne=function(t,n){Expression.Exponentiation.call(this,t,n)};Expression.ExponentiationOfMinusOne.prototype=Object.create(Expression.Exponentiation.prototype);Expression.ExponentiationOfMinusOne.prototype.divideExpression=function(t){return t.multiply(this)};Expression.ExponentiationOfImaginaryUnit=function(t,n){Expression.Exponentiation.call(this,t,n)};Expression.ExponentiationOfImaginaryUnit.prototype=Object.create(Expression.Exponentiation.prototype);Expression.ExponentiationOfImaginaryUnit.prototype.divideExpression=function(t){var n=getConjugate(getBase(this)).pow(getExponent(this));return t.multiply(n).divide(this.multiply(n))};Expression.ExponentiationOfQuadraticInteger=function(t,n){Expression.Exponentiation.call(this,t,n)};Expression.ExponentiationOfQuadraticInteger.prototype=Object.create(Expression.ExponentiationOfImaginaryUnit.prototype);Expression.ExponentiationOfQuadraticInteger.prototype.divideExpression=function(t){return Expression.Exponentiation.prototype.divideExpression.call(this,t)};//!
Expression.Division.prototype.negate=function(){return new Expression.Division(this.a.negate(),this.b)};Expression.Polynomial=function(t){this.polynomial=t};Expression.Polynomial.prototype=Object.create(Expression.prototype);Expression.Polynomial.prototype.gcd=function(t){if(t instanceof Expression.Polynomial)return new Expression.Polynomial(Polynomial$1.polynomialGCD(this.polynomial,t.polynomial));if(t.equals(Expression.ZERO))return this;throw new TypeError};Expression.Polynomial.prototype.equals=function(t){return t.equalsPolynomial(this)};Expression.Polynomial.prototype.equalsPolynomial=function(t){return t.polynomial.equals(this.polynomial)};Expression.prototype.equalsPolynomial=function(t){return t.polynomial.equals(Polynomial$1.ZERO)&&this.equals(Expression.ZERO)||t.polynomial.getDegree()===0&&this.equals(t.polynomial.getCoefficient(0))};Expression.Polynomial.prototype.multiply=function(t){return t===Expression.ONE?this:t.multiplyPolynomial(this)};Expression.Polynomial.prototype.multiplyPolynomial=function(t){return new Expression.Polynomial(t.polynomial.multiply(this.polynomial))};Expression.Division.prototype.multiplyPolynomial=function(t){return this.multiplyExpression(t)};Expression.Integer.prototype.multiplyPolynomial=function(t){return new Expression.Polynomial(t.polynomial.scale(this))};Expression.Polynomial.prototype.multiplyInteger=function(t){return new Expression.Polynomial(this.polynomial.scale(t))};Expression.Polynomial.prototype.divide=function(t){return t.equals(Expression.ONE)?this:t.equals(Expression.ONE.negate())?this.negate():t instanceof Expression.Integer?new Expression.Polynomial(this.polynomial.scale(t.inverse())):t.dividePolynomial(this)};Expression.Division.prototype.dividePolynomial=function(t){return this.divideExpression(t)};Expression.Polynomial.prototype.dividePolynomial=function(t){var n=this,a=t.polynomial,s=n.polynomial;if(a.getDegree()<0&&s.getDegree()>=0)return new Expression.Polynomial(a);var l=a.divideAndRemainder(s);if(l.remainder.equals(Polynomial$1.ZERO))return new Expression.Polynomial(l.quotient);var u=a.getContent();if(!u.getDenominator().equals(Expression.ONE))return n.multiply(u.getDenominator()).dividePolynomial(t.multiply(u.getDenominator()));var c=s.getContent();if(!c.getDenominator().equals(Expression.ONE))return n.multiply(c.getDenominator()).dividePolynomial(t.multiply(c.getDenominator()));var p=Polynomial$1.polynomialGCD(a,s);return n.polynomial.equals(p)?new Expression.Polynomial(t.polynomial.divideAndRemainder(p).quotient):new Expression.Division(new Expression.Polynomial(t.polynomial.divideAndRemainder(p).quotient),new Expression.Polynomial(n.polynomial.divideAndRemainder(p).quotient))};Expression.Polynomial.prototype.negate=function(){return new Expression.Polynomial(this.polynomial.negate())};Expression.Polynomial.prototype.add=function(t){return t.addPolynomial(this)};Expression.Polynomial.prototype.addPolynomial=function(t){return new Expression.Polynomial(t.polynomial.add(this.polynomial))};Expression.prototype.addPolynomial=function(t){if(this.equals(Expression.ZERO))return t;throw new RangeError};Expression.Polynomial.prototype.getPrecedence=function(){for(var t=this.polynomial.getDegree(),n=0,a=0;a<=t;a+=1)this.polynomial.getCoefficient(a).equals(Expression.ZERO)||(n+=1);return(n<2?this.polynomial.getLeadingCoefficient().equals(Expression.ONE)?new Expression.Symbol("x"):new Expression.Multiplication(Expression.ONE,Expression.ONE):new Expression.Addition(Expression.ONE,Expression.ONE)).getPrecedence()};Expression.Polynomial.prototype.modulo=function(t){if(t instanceof Expression.Polynomial)return new Expression.Polynomial(this.polynomial.divideAndRemainder(t.polynomial).remainder);throw new TypeError};Expression.Polynomial.prototype.modInverse=function(t){if(t instanceof Expression.Polynomial)return new Expression.Polynomial(this.polynomial.primitivePart().modularInverse(t.polynomial).primitivePart().scale(this.polynomial.getContent().inverse()));throw new TypeError};Expression.Polynomial.prototype.isDivisibleBy=function(t){if(t instanceof Expression.Polynomial)return this.polynomial.isDivisibleBy(t.polynomial);throw new TypeError};Expression.unique=function(t){for(var n=[],a=0;a<t.length;a+=1){for(var s=t[a],l=!1,u=0;u<n.length;u+=1)n[u]===s&&(l=!0);l||n.push(s)}return n};Expression.Multiplication.prototype.compare4Multiplication=function(t){var n=this;if(t instanceof Addition$1)return 0-t.compare4Multiplication(n);for(var a=n.factors(),s=t.factors(),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=l.compare4Multiplication(u);if(c!==0)return c;l=a.next().value,u=s.next().value}return l!=null?1:u!=null?-1:0};Expression.Multiplication.compare4Addition=function(t,n){for(var a=t.factors(),s=n.factors(),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=l.compare4Addition(u);if(c!==0)return c;l=a.next().value,u=s.next().value}return l!=null?1:u!=null?-1:0};Expression.Multiplication.prototype.compare4MultiplicationSymbol=function(t){return 0-this.compare4Multiplication(t)};Expression.Function.prototype.compare4Addition=function(t){if(t instanceof Expression.Function)return this.name<t.name?-1:t.name<this.name?1:this.a.compare4Addition(t.a);if(t instanceof Multiplication$1){var n=this;return Multiplication$1.compare4Addition(n,t)}if(t instanceof Addition$1){var n=this;return Addition$1.compare4Addition(n,t)}return 1};Expression.NthRoot.prototype.compare4Addition=function(t){return t.compare4AdditionNthRoot(this)};Expression.prototype.compare4AdditionNthRoot=function(t){return Expression.Function.prototype.compare4Addition.call(t,this)};Expression.NthRoot.prototype.compare4AdditionNthRoot=function(t){return this.n-t.n||t.a.compare4Addition(this.a)};Expression.prototype.compare4AdditionSymbol=function(t){var n=this;return n instanceof Expression.Function?-1:Expression.prototype.compare4Addition.call(t,n)};Expression.Symbol.prototype.compare4Addition=function(t){return t.compare4AdditionSymbol(this)};Expression.Symbol.prototype.compare4AdditionSymbol=function(t){var n=this;return t.symbol<n.symbol?-1:n.symbol<t.symbol?1:0};Expression.Function.prototype.compare4Multiplication=function(t){return t instanceof Expression.NthRoot?1:t instanceof Expression.Function?this.name<t.name?-1:t.name<this.name?1:getBase(this.a).compare4Multiplication(getBase(t.a))||getExponent(this.a).compare4AdditionSymbol(getExponent(t.a)):t instanceof Expression.MatrixSymbol?-1:1};Expression.Function.prototype.compare4MultiplicationInteger=function(t){return 0-this.compare4Multiplication(t)};Expression.Function.prototype.compare4MultiplicationSymbol=function(t){return-1};Expression.Function.prototype.compare4MultiplicationNthRoot=function(t){return 0-this.compare4Multiplication(t)};Expression.Function.prototype.pow=function(t){if(this instanceof Expression.NthRoot)return Expression.prototype.pow.call(this,t);if(t instanceof Expression.Integer)return t.compareTo(Expression.ONE)>0?new Expression.Exponentiation(this,t):Expression.prototype.pow.call(this,t);if(isIntegerOrN(t)&&t instanceof Expression.Symbol)return new Expression.Exponentiation(this,t);throw new RangeError("NotSupportedError")};function ExpressionWithCondition(t,n){this.e=t,this.condition=n}ExpressionWithCondition.prototype=Object.create(Expression.prototype);ExpressionWithCondition.prototype.toString=function(){return this.e.toString()+"; "+this.condition.toString()};ExpressionWithCondition.prototype.toMathML=function(t){return this.e.toMathML(t)+"<mtext>; </mtext>"+this.condition.toMathML(t)};ExpressionWithCondition.prototype.multiplyExpression=ExpressionWithCondition.prototype.multiplyMatrix=function(t){return new ExpressionWithCondition(t.multiply(this.e),this.condition)};ExpressionWithCondition.prototype.multiply=function(t){return t.multiplyExpressionWithCondition(this)};ExpressionWithCondition.prototype.multiplyExpressionWithCondition=function(t){throw new TypeError("TODO:")};Expression.prototype.multiplyExpressionWithCondition=function(t){return new ExpressionWithCondition(t.e.multiply(this),t.condition)};ExpressionWithCondition.prototype.add=function(t){return t.addExpressionWithCondition(this)};ExpressionWithCondition.prototype.addExpressionWithCondition=function(t){throw new TypeError("TODO:")};Expression.prototype.addExpressionWithCondition=function(t){return new ExpressionWithCondition(t.e.add(this),t.condition)};Expression.ExpressionWithCondition=ExpressionWithCondition;Addition$1.prototype.compare4MultiplicationNthRoot=function(t){return 1};Multiplication$1.prototype.compare4MultiplicationNthRoot=function(t){return-1};function Cases(t){this.cases=t}Cases.prototype=Object.create(Expression.prototype);Cases.prototype._cross=function(t,n){for(var a=this,s=[],l=0;l<t.cases.length;l+=1)for(var u=0;u<a.cases.length;u+=1){var c=t.cases[l].condition.and(a.cases[u].condition);if(!c.isFalse()){var p=n(t.cases[l].e,a.cases[u].e);s.push(new ExpressionWithCondition(p,c))}}return new Expression.Cases(s)};Cases.prototype.multiply=function(t){return t.multiplyCases(this)};Cases.prototype.multiplyCases=function(t){return this._cross(t,function(n,a){return n.multiply(a)})};Cases.prototype.toString=function(){for(var t="",n=0;n<this.cases.length;n+=1)t+="("+this.cases[n].toString()+"),";return"{{"+t.slice(0,-1)+"}}"};Expression.prototype.multiplyCases=function(t){var n=this;return new Cases(t.cases.map(function(a){return a.multiply(n)}))};Cases.prototype.multiplyExpression=Cases.prototype.multiplyMatrix=function(t){return new Cases(this.cases.map(function(n){return t.multiply(n)}))};Cases.prototype.add=function(t){return t.addCases(this)};Cases.prototype.addCases=function(t){return this._cross(t,function(n,a){return n.add(a)})};Expression.prototype.addCases=function(t){var n=this;return new Cases(t.cases.map(function(a){return a.add(n)}))};Cases.prototype.equals=function(t){var n=this;if(n===t)return!0;if(!(t instanceof Cases))return!1;throw new TypeError};Cases.prototype.toMathML=function(t){var n="";n+="<mrow>",n+="<mo>{</mo>",n+='<mtable columnalign="left">';for(var a=0;a<this.cases.length;a+=1){var s=this.cases[a];n+="<mtr>",n+="<mtd>",n+=s.e.toMathML(t),n+="</mtd>",n+="<mtd>",n+=s.condition.toMathML(t),n+="</mtd>",n+="</mtr>"}return n+="</mtable>",n+="</mrow>",n};Expression.Cases=Cases;Expression.Factorial=function(t){this.n=t};Expression.Factorial.prototype=Object.create(Expression.prototype);Expression.prototype.factorial=function(){var t=this;if(!(t instanceof Expression.Integer))throw new TypeError("NotSupportedError");if(t.compareTo(Expression.ZERO)<0)throw new TypeError("NotSupportedError");for(var n=Expression.ONE,a=t;a.compareTo(Expression.ONE)>=0;a=a.subtract(Expression.ONE))n=n.multiply(a);return n};Expression.prototype._abs=function(){return this.isNegative()?this.negate():this};Expression.Comma=function(t,n){BinaryOperation$1.call(this,t,n)};Expression.Comma.prototype=Object.create(BinaryOperation$1.prototype);Expression.Comma.prototype.getS=function(){return", "};Expression.prototype.transformComma=function(t){var n=this,a=function(u){if(u instanceof Expression.Equality)return[{left:u.a,right:u.b}];if(u instanceof Expression.NoAnswerExpression&&u.name==="system-of-equations")return u.second.equations;if(u instanceof Expression.Inequality)return[{left:u.a,right:u.b,sign:u.sign}];if(u instanceof Expression.NoAnswerExpression&&u.name==="polynomial-roots"){var c=u.second.polynomial.calcAt(u.second.variable);return[{left:c,right:Expression.ZERO}]}return null},s=a(n),l=a(t);if(s!=null&&l!=null)return Expression.SystemOfEquations.from(s.concat(l));if(s==null&&l==null)return new Expression.List((n instanceof Expression.List?n.list:[n]).concat(t instanceof Expression.List?t.list:[t]));throw new TypeError("NotSupportedError")};Expression.List=function(t){this.list=t};Expression.List.prototype=Object.create(Expression.prototype);Expression.List.prototype.min=function(){return this.list.reduce((t,n)=>t.compareTo(n)>0?n:t)};Expression.List.prototype.max=function(){return this.list.reduce((t,n)=>t.compareTo(n)<0?n:t)};Expression.List.prototype.gcd=function(){return this.list.reduce((t,n)=>t.gcd(n))};function atan2(t,n){if(n.equals(Expression.ZERO)){if(t.equals(Expression.ZERO))throw new RangeError;const s=Expression.PI.divide(Expression.TWO);return t.isNegative()?s.negate():s}const a=t.divide(n).arctan();return n.isNegative()?t.isNegative()?a.subtract(Expression.PI):a.add(Expression.PI):a}Expression.prototype.complexArgument=function(){var t=Expression.getComplexNumberParts(this);if(t==null)throw new TypeError;return atan2(t.imaginary,t.real)};Expression.Logarithm=function(t){Expression.Function.call(this,"log",t)};Expression.Logarithm.prototype=Object.create(Expression.Function.prototype);Expression.prototype.logarithm=function(){var t=this;if(t instanceof Expression.Integer){if(t.compareTo(Expression.ZERO)<=0){if(t.compareTo(Expression.ZERO)===0)throw new TypeError("ArithmeticException");return t.equals(Expression.ONE.negate())?Expression.I.multiply(Expression.PI):t.abs().logarithm().add(t.divide(t.abs()).logarithm())}if(t.compareTo(Expression.ONE)===0)return Expression.ZERO;var n=integerPrimeFactor(t);if(n.equals(t))return new Expression.Logarithm(t);var a=primeFactor._countTrailingZeros(t.toBigInt(),n.toBigInt());return n.logarithm().multiply(Integer$2.fromNumber(a)).add(t.truncatingDivide(n._pow(a)).logarithm())}if(t instanceof Expression.Division){var s=t.getNumerator(),l=t.getDenominator();if(l instanceof Integer$2||isConstant$1(s))return s.logarithm().subtract(l.logarithm())}if(t instanceof Expression.Multiplication){var W=t.a;if(isConstant$1(W))return W.logarithm().add(t.divide(W).logarithm());var W=getConstant$1(t);if(W instanceof Integer$2&&!W.equals(Expression.ONE))return W.logarithm().add(t.divide(W).logarithm());if(t.b instanceof Expression.MatrixSymbol)return t.a.logarithm().add(t.b.logarithm())}if(t instanceof Expression.ExpressionWithPolynomialRoot&&(t=t.upgrade()),t instanceof Expression.ExpressionPolynomialRoot){var u=t.root.upgrade().getAlpha().polynomial.getGCDOfTermDegrees();if(u>1)return t._pow(u).logarithm().divide(Expression.Integer.fromNumber(u))}if(t instanceof Expression.Symbol)return t===Expression.E?Expression.ONE:new Expression.Logarithm(t);if(t instanceof Expression.NthRoot){var c=t.a,s=t.n;if(c instanceof Expression.Integer&&c.compareTo(Expression.ONE)>0||isPositive(c))return c.logarithm().divide(Expression.Integer.fromNumber(s))}if(t instanceof Expression.Exponentiation){var p=getBase(t),d=getExponent(t);if(p===Expression.E)return d;if(p instanceof Expression.MatrixSymbol&&d instanceof Integer$2||p instanceof Expression.Integer)return p.logarithm().multiply(d)}if(t instanceof Expression.Matrix){var x=t.matrix;if(x.isDiagonal())return new Expression.Matrix(x.map(function(en,tn,Ct){return tn===Ct?en.logarithm():Expression.ZERO}));var _=Expression.getEigenvalues(x);if(_.length===x.cols()){var S=Expression.getEigenvectors(x,_);if(S.filter(en=>en!=null).length===x.cols()){Expression.callback!=null&&Expression.callback(new Expression.Event("logarithm-using-diagonalization",new Expression.Matrix(x)));var T=Expression.diagonalize(x,_,S);return new Expression.Matrix(T.T).multiply(new Expression.Matrix(T.L).logarithm()).multiply(new Expression.Matrix(T.T_INVERSED))}else{var T=Expression.getFormaDeJordan(x,_),A=T.J,R=function(tn){for(var Ct=tn.map(function(dn,ix,Cn){return ix!==Cn?dn.divide(tn.e(ix,ix)):Expression.ZERO}),Q=tn.map(function(dn,ix,Cn){return ix===Cn?dn.logarithm():Expression.ZERO}),on=tn.cols(),gn=1;gn<on;gn+=1){var In=Ct.pow(gn).scale(Expression.ONE.divide(Expression.Integer.fromNumber(gn)));Q=gn%2===1?Q.add(In):Q.subtract(In)}return Q},D=R(A);return Expression.callback!=null&&Expression.callback(new Expression.Event("logarithm-using-Jordan-canonical-form",new Expression.Matrix(x))),new Expression.Matrix(T.P).multiply(new Expression.Matrix(D)).multiply(new Expression.Matrix(T.P_INVERSED))}}}if(t instanceof Expression.Addition){var W=getConstant$1(t);if(!W.equals(Expression.ONE))return W.logarithm().add(t.divide(W).logarithm());if(t.a instanceof Expression.Symbol&&t.b instanceof Expression.Integer)return new Expression.Logarithm(t);var O=getVariableInternal(getLastMultiplicationOperand(getFirstAdditionOperand(t))).next().value.v;if(O instanceof Expression.Symbol){var n=Polynomial$1.toPolynomial(t,O),W=n.getContent();if(W.isNegative()&&(W=W.negate()),isPositive(W)&&!W.equals(Expression.ONE))return t.divide(W).logarithm().add(W.logarithm());var F=n.getSquareFreePolynomial(),s=Math.floor(n.getDegree()/F.getDegree());if(s>1&&F.calcAt(O)._pow(s).equals(t))return Expression.Integer.fromNumber(s).multiply(F.calcAt(O).logarithm())}if(isGoodPolynomial(t))return new Expression.Logarithm(t)}var z=QuadraticInteger.toQuadraticInteger(t);if(z!=null&&(Number(z.a.toString())>0||Number(z.b.toString())>0)&&z.D>0&&(z.isValid()||z.D===5||z.D===37)){var j=z.primeFactor();if(j.toExpression().equals(Expression.TWO)&&(z=z.truncatingDivide(j),j=z.primeFactor()),!j.equals(z))return j.toExpression().logarithm().add(t.divide(j.toExpression()).logarithm());if(Number(z.a.toString())>0&&Number(z.b.toString())>0)return new Expression.Logarithm(t);if(Number(z.a.toString())<0||Number(z.b.toString())<0){var Z=z.conjugate().toExpression();return Z.isNegative()&&(Z=Z.negate()),t.multiply(Z).logarithm().subtract(Z.logarithm())}}if(t instanceof Addition$1&&t.b instanceof NthRoot&&t.a instanceof NthRoot){var u=nthRootCommonFactor(t.a,t.b);if(!u.equals(Expression.ONE)&&isPositive(u))return u.logarithm().add(t.divide(u).logarithm())}var W=Expression.getComplexNumberParts(t);if(W!=null&&!W.imaginary.equals(Expression.ZERO)){const en=atan2(W.imaginary,W.real);return t.divide(Expression.I.multiply(en).exp()).logarithm().add(Expression.I.multiply(en))}if(Expression.isConstant(t)){var J=simpleDivisor(t);if(!J.equals(t))return J.logarithm().add(t.divide(J).logarithm())}throw new TypeError("NotSupportedError")};//!new
NthRoot.prototype.compare4MultiplicationExponentiation=Exponentiation$1.prototype.compare4MultiplicationExponentiation;Expression.Symbol.prototype.compare4MultiplicationExponentiation=Exponentiation$1.prototype.compare4MultiplicationExponentiation;//!new
Expression.prototype.complexConjugate=function(){throw new TypeError("NotSupportedError")};Expression.Integer.prototype.complexConjugate=function(){return this};Expression.Division.prototype.complexConjugate=function(){return this.getNumerator().complexConjugate().divide(this.getDenominator().complexConjugate())};Expression.Multiplication.prototype.complexConjugate=function(){return this.a.complexConjugate().multiply(this.b.complexConjugate())};Expression.Addition.prototype.complexConjugate=function(){return this.a.complexConjugate().add(this.b.complexConjugate())};Expression.Function.prototype.complexConjugate=function(){if(this.a instanceof Integer$2||Expression.isReal(this))return this;throw new TypeError("NotSupportedError")};Expression.Matrix.prototype.complexConjugate=function(){var t=this;return new Expression.Matrix(t.matrix.map(n=>n.complexConjugate()))};Expression.Symbol.prototype.complexConjugate=function(){return this===Expression.E||this===Expression.PI||Expression.isReal(this)?this:new Expression.ComplexConjugate(this)};Expression.Exponentiation.prototype.complexConjugate=function(){if(getBase(this)===Expression.E)return getBase(this).pow(getExponent(this).complexConjugate());if(isIntegerOrN(getExponent(this)))return getBase(this).complexConjugate().pow(getExponent(this));if(isMatrixSymbolTranspose(this))return new Expression.Exponentiation(getBase(this).complexConjugate(),getExponent(this));if(Expression.isReal(this))return this;throw new TypeError("NotSupportedError")};Expression.Logarithm.prototype.complexConjugate=function(){return this.a.complexConjugate().logarithm()};Expression.ComplexConjugate=function(t){Expression.Function.call(this,"conjugate",t)};Expression.ComplexConjugate.prototype=Object.create(Expression.Function.prototype);Expression.ComplexConjugate.prototype.complexConjugate=function(){return this.a};Expression.ComplexArgument=function(t){Expression.Function.call(this,"arg",t)};Expression.ComplexArgument.prototype=Object.create(Expression.Function.prototype);Expression.AugmentedMatrix=function(t,n){Expression.Function.call(this,"augment",null),this.a=t,this.b=n};Expression.AugmentedMatrix.prototype=Object.create(Expression.Function.prototype);Expression.AugmentedMatrix.prototype.toString=function(t){return"("+this.a.toString(t)+"|"+this.b.toString(t)+")"};Expression.AugmentedMatrix.prototype.toMathML=function(t){return"<mrow><mo>(</mo>"+this.a.toMathML(t)+"<mo>|</mo>"+this.b.toMathML(t)+"<mo>)</mo></mrow>"};Expression.Abs=function(t){Expression.Function.call(this,"abs",t)};Expression.Abs.prototype=Object.create(Expression.Function.prototype);Expression.Abs.prototype.toMathML=function(t){return'<mrow><mo stretchy="false">|</mo>'+this.a.toMathML(t)+'<mo stretchy="false">|</mo></mrow>'};Expression.Abs.prototype.complexConjugate=function(){return this};Expression.Abs.prototype.pow=function(t){return t instanceof Expression.Integer?this.a.pow(t).abs():Expression.Function.prototype.pow.call(this,t)};Expression.Matrix.prototype.pseudoinverse=function(){if(this.matrix.isSquare()){const n=this.matrix.determinant();if(Expression.isConstant(n)&&!n.equals(Expression.ZERO))return new Expression.Matrix(this.matrix.inverse())}Expression.callback!=null&&Expression.callback(new Expression.Event("pseudoinverse",this));const t=Expression.SVD(this.matrix);return new Expression.Matrix(t.Vstar.conjugateTranspose().multiply(t.Sigma.map(n=>n.equals(Expression.ZERO)?Expression.ZERO:n.inverse()).transpose()).multiply(t.U.conjugateTranspose()))};Expression.Pseudoinverse=function(t){Expression.Function.call(this,"pseudoinverse",t)};Expression.Pseudoinverse.prototype=Object.create(Expression.Function.prototype);Expression.prototype.factor=function(){var t=this,n=new Expression.Symbol("x"),a=Polynomial$1.toPolynomial(t,n),s=[];s.push(Polynomial$1.of(a.getContent())),a=a.primitivePart();function l(u){for(var c=null;u.getDegree()>1&&(c=u.factorize())!=null&&!c.equals(u);)l(c),u=u.divideAndRemainder(c,"throw").quotient;u.getDegree()>=0&&s.push(u)}return l(a),s.map(u=>new Expression.Polynomial(u)).reduce((u,c)=>new Expression.Multiplication(u,c))};function Derivative(t,n){Expression.Symbol.call(this,t),this.variable=n}Derivative.prototype=Object.create(Expression.Symbol.prototype);Expression.Derivative=Derivative;Expression.prototype.derivative=function(t=void 0){if(t==null)throw new RangeError;var n=this;if(n instanceof Expression.Matrix)return new Expression.Matrix(n.matrix.map(l=>l.derivative(t)));if(n instanceof Expression.Exponentiation){if(getBase(n)===Expression.E)return n.multiply(getExponent(n).derivative(t));if(getExponent(n)instanceof Expression.Integer)return getExponent(n).multiply(getBase(n).pow(getExponent(n).subtract(Expression.ONE))).multiply(getBase(n).derivative(t));if(getExponent(n).equals(t)&&Expression.isConstant(getBase(n)))return n.multiply(getBase(n).logarithm())}if(n instanceof Expression.Symbol)return n.symbol.toLowerCase()===n.symbol?n.equals(t)?Expression.ONE:Expression.ZERO:new Expression.Derivative(n);if(n instanceof Expression.Multiplication)return n.a.derivative(t).multiply(n.b).add(n.a.multiply(n.b.derivative(t)));if(n instanceof Expression.Addition)return n.a.derivative(t).add(n.b.derivative(t));if(n instanceof Expression.Division){var a=n.getNumerator(),s=n.getDenominator();return s.multiply(a.derivative(t)).subtract(a.multiply(s.derivative(t))).divide(s.multiply(s))}if(n instanceof Expression.Sin)return n.a.cos().multiply(n.a.derivative(t));if(n instanceof Expression.Cos)return n.a.sin().negate().multiply(n.a.derivative(t));if(n instanceof Expression.Logarithm)return n.a.derivative(t).divide(n.a);if(Expression.isConstant(n))return Expression.ZERO;throw new RangeError("NotSupportedError")};function GF2(t){this.a=t}GF2.prototype=Object.create(Expression.prototype);Expression.GF2=GF2;Expression.GF2.prototype.toString=function(t){return"GF2("+this.a.toString(Expression.setTopLevel(!0,t))+")"};function GF2Value(t){this.value=t}Expression.GF2Value=GF2Value;GF2Value.prototype=Object.create(Expression.prototype);Expression.GF2Value.prototype.equals=function(t){if(Expression.ZERO===t){return this.value===0;//!
}return!1};Expression.GF2Value.prototype.negate=function(){return new GF2Value(this.value===0?0:2-this.value)};GF2Value.prototype.add=function(t){if(t===Expression.ZERO)return new GF2Value(this.value);if(!(t instanceof GF2Value))throw new RangeError;var n=this.value-2+t.value;return new GF2Value(n>=0?n:n+2)};GF2Value.prototype.multiply=function(t){if(t===Expression.ZERO)return new GF2Value(0);if(!(t instanceof GF2Value))throw new RangeError;var n=this.value*t.value;return new GF2Value(n-2*Math.floor(n/2))};GF2Value.prototype.divide=function(t){return new GF2Value(this.value)};Expression.prototype.GF2=function(){var t=this;if(!(t instanceof Expression.Matrix))throw new RangeError("NotSupportedError");return new Expression.Matrix(t.matrix.map(function(n,a,s){if(!(n.equals(Expression.ZERO)||n.equals(Expression.ONE)))throw new TypeError;return new Expression.GF2Value(n.equals(Expression.ZERO)?0:1)}))};GF2Value.prototype.toString=function(t){return this.value.toString()};var Integer$1=Expression.Integer,Addition=Expression.Addition,Multiplication=Expression.Multiplication,Division=Expression.Division,Exponentiation=Expression.Exponentiation,BinaryOperation=Expression.BinaryOperation,separateSinCos=function(t){if(!(t instanceof Multiplication))throw new TypeError;var n=void 0,a=void 0,s=t;for(var l of s.factors()){var u=l;u instanceof Sin||u instanceof Cos||u instanceof Exponentiation&&(u.a instanceof Sin||u.a instanceof Cos)?n=n==null?u:n.multiply(u):a=a==null?u:a.multiply(u)}return{sinCos:n??Expression.ONE,other:a??Expression.ONE}},expandMainOp=function(t){return t},contractTrigonometryInternal=function(t,n){var a=t.a,s=n.a;if(t instanceof Sin&&n instanceof Sin)return a.subtract(s).cos().divide(Expression.TWO).subtract(a.add(s).cos().divide(Expression.TWO));if(t instanceof Sin&&n instanceof Cos)return a.add(s).sin().divide(Expression.TWO).add(a.subtract(s).sin().divide(Expression.TWO));if(t instanceof Cos&&n instanceof Sin)return a.add(s).sin().divide(Expression.TWO).subtract(a.subtract(s).sin().divide(Expression.TWO));if(t instanceof Cos&&n instanceof Cos)return a.subtract(s).cos().divide(Expression.TWO).add(a.add(s).cos().divide(Expression.TWO));throw new TypeError},contractTrigonometryPower=function(t){var n=t.a;if(!(n instanceof Sin)&&!(n instanceof Cos))return t;var a=contractTrigonometryInternal(n,n).multiply(t.divide(n.multiply(n)));return contractTrigonometryRules(a.getNumerator()).divide(a.getDenominator())},contractTrigonometryProduct=function(t){for(var n=t.factors(),a=n.next().value,s=n.next().value,l=Expression.ONE,u=n.next().value;u!=null;)l=u.multiply(l),u=n.next().value;if(a instanceof Exponentiation)return a=contractTrigonometryPower(a),contractTrigonometryRules(a.multiply(s).multiply(l));if(s instanceof Exponentiation)return s=contractTrigonometryPower(s),contractTrigonometryRules(a.multiply(s).multiply(l));var c=contractTrigonometryInternal(a,s);return contractTrigonometryRules(c.multiply(l))},contractTrigonometryRules=function(t){var n=expandMainOp(t);if(n instanceof Exponentiation)return contractTrigonometryPower(n);if(n instanceof Multiplication){var a=separateSinCos(n),s=a.other,l=a.sinCos;if(l.equals(Expression.ONE)||l instanceof Sin||l instanceof Cos)return n;if(l instanceof Exponentiation)return expandMainOp(s.multiply(contractTrigonometryPower(l)));if(l instanceof Multiplication)return expandMainOp(s.multiply(contractTrigonometryProduct(l)));throw new TypeError}if(n instanceof Addition){var u=Expression.ZERO,c=n;for(var p of c.summands())p instanceof Multiplication||p instanceof Exponentiation?u=u.add(contractTrigonometryRules(p)):u=u.add(p);return u}return n},map$3=function(t,n){if(n instanceof Integer$1)return t(n);if(n instanceof Addition)return t(map$3(t,n.a).add(map$3(t,n.b)));if(n instanceof Multiplication)return t(map$3(t,n.a).multiply(map$3(t,n.b)));if(n instanceof Division)return t(map$3(t,n.a).divide(map$3(t,n.b)));if(n instanceof Exponentiation)return t(map$3(t,n.a).pow(map$3(t,n.b)));if(n instanceof Sin)return t(map$3(t,n.a).sin());if(n instanceof Cos)return t(map$3(t,n.a).cos());if(n instanceof Expression.Matrix)return new Expression.Matrix(n.matrix.map(function(a,s,l){return map$3(t,a)}));if(n instanceof Expression.Polynomial)return new Expression.Polynomial(n.polynomial.map(function(a,s){return map$3(t,a)}));if(n instanceof Expression.GF2Value)return n;if(n instanceof Expression.NthRoot)return t(n);if(n instanceof Expression.Negation||n instanceof Expression.Complex||n instanceof Expression.NonSimplifiedExpression||n instanceof Expression.Degrees||n instanceof Expression.Radians)return n;if(n instanceof Expression.Symbol)return t(n);if(n instanceof Expression.Arctan)return t(map$3(t,n.a).arctan());if(n instanceof Expression.Logarithm)return t(map$3(t,n.a).logarithm());if(n instanceof Expression.Determinant)return t(map$3(t,n.a).determinant());if(n instanceof Expression.Inequality)return t(map$3(t,n.a).transformInequality(map$3(t,n.b),n.sign));if(n instanceof Expression.ComplexConjugate)return t(map$3(t,n.a).complexConjugate());if(n instanceof Expression.Abs)return t(map$3(t,n.a).abs());throw new TypeError};Expression._map=map$3;var expandTrigonometryRulesInternal=function(t,n,a){if(a==="cos")return expandTrigonometryRules(t,"cos").multiply(expandTrigonometryRules(n,"cos")).subtract(expandTrigonometryRules(t,"sin").multiply(expandTrigonometryRules(n,"sin")));if(a==="sin")return expandTrigonometryRules(t,"sin").multiply(expandTrigonometryRules(n,"cos")).add(expandTrigonometryRules(t,"cos").multiply(expandTrigonometryRules(n,"sin")));throw new TypeError(a)},expandTrigonometryRules=function(t,n){if(t instanceof Addition)return expandTrigonometryRulesInternal(t.a,t.b,n);if(t instanceof Multiplication){var a=Expression.ONE;for(var s of t.factors())s instanceof Expression.Integer&&(a=a.multiply(s));var l=a,u=t.divide(a);if(!(l instanceof Integer$1))throw new TypeError;if(l.equals(Expression.ONE)){if(n==="cos")return t.cos();if(n==="sin")return t.sin()}if(l.compareTo(Expression.ONE.negate())===0){if(n==="cos")return expandTrigonometryRules(u,n);if(n==="sin")return expandTrigonometryRules(u,n).negate()}var c=l.compareTo(Expression.ZERO)>0?Expression.ONE:Expression.ONE.negate();return expandTrigonometryRulesInternal(c.multiply(u),l.subtract(c).multiply(u),n)}else if(t instanceof Division){var p=simplifyConstantValue(t,n);if(p!=null)return p;var l=t.a,u=t.b;if(l instanceof Addition)return expandTrigonometryRulesInternal(l.a.divide(u),l.b.divide(u),n)}if(t instanceof Expression.Symbol||t instanceof Expression.Exponentiation&&t.a instanceof Expression.Symbol&&Expression.isScalar(t.a)&&t.b instanceof Expression.Integer&&t.b.compareTo(Expression.ONE)>0||t instanceof Expression.Degrees||t instanceof Expression.Radians||t instanceof Expression.Complex||t instanceof Expression.Arctan){if(n==="cos")return t.cos();if(n==="sin")return t.sin()}throw new TypeError},expandTrigonometry=function(t){return map$3(function(n){return n instanceof Sin?expandTrigonometryRules(n.a,"sin"):n instanceof Cos?expandTrigonometryRules(n.a,"cos"):n},t)};Expression._expandTrigonometry=expandTrigonometry;//!
var contractTrigonometry=function(t){return map$3(function(n){if(n instanceof Multiplication||n instanceof Exponentiation||n instanceof Addition){//! Addition - ?
return contractTrigonometryRules(n)}return n instanceof Division?contractTrigonometryRules(n.getNumerator()).divide(n.getDenominator()):n},t)},hasTrigonometry=function(t){return t instanceof BinaryOperation?hasTrigonometry(t.a)||hasTrigonometry(t.b):t instanceof Cos||t instanceof Sin},simplifyTrigonometry=function(t){if(!hasTrigonometry(t))return t;//!new
var n=null,a=null;if(Expression._map(function(u){if(u instanceof Expression.Sin||u instanceof Expression.Cos){var c=u.a;if(c instanceof Division){var p=c.getNumerator(),d=c.getDenominator();if(!d.equals(Expression.ONE))for(var x of p.summands()){var _=x.gcd(d);if(!_.equals(d))for(var S of x.factors())S instanceof Expression.Symbol&&S!==Expression.PI&&(a=d.divide(_),n=S)}}}return u},t),n!=null&&a!=null)return t=Expression._substitute(t,n,n.multiply(a),n.divide(a)),t=simplifyTrigonometry(t),t=Expression._substitute(t,n,n.divide(a),n.multiply(a)),t;//!
var s=t.getNumerator();s=expandTrigonometry(s),s=contractTrigonometry(s);var l=t.getDenominator();return l=expandTrigonometry(l),l=contractTrigonometry(l),s.divide(l)};Expression.Division.prototype.compare4Multiplication=function(t){return t instanceof Division?this.a.compare4Multiplication(t.a)||this.b.compare4Multiplication(t.b):-1};Expression.Division.prototype.compare4MultiplicationSymbol=function(){return 1};Expression.Division.prototype.compare4MultiplicationInteger=function(){return 1};Expression.Division.prototype.compare4MultiplicationNthRoot=function(){return 1};Expression.simplifyTrigonometry=simplifyTrigonometry;function Sin(t){Expression.Function.call(this,"sin",t)}Sin.prototype=Object.create(Expression.Function.prototype);var simplifyConstantValueInternal=function(t,n){if(n=n||Expression.ZERO,t>=360||t<=-360)throw new RangeError;if(t<0&&(t=0-t,n=n.negate()),t>=180){t=t-180;var a=simplifyConstantValueInternal(t,n);return a==null?null:a.negate()}if(t>90){t=0-t,n=n.negate(),t=t+180;var a=simplifyConstantValueInternal(t,n);return a==null?null:a.negate()}console.assert(t>=0&&t<=90),console.assert(n.getNumerator().abs().compareTo(n.getDenominator())<0);function s(O){var F=simplifyConstantValueInternal(O*2);return F==null?null:Expression.TWO.add(Expression.TWO.multiply(F)).squareRoot().divide(Expression.TWO)}function l(O,F){var z=simplifyConstantValueInternal(O),j=simplifyConstantValueInternal(F),Z=simplifyConstantValueInternal(90-O),W=simplifyConstantValueInternal(90-F);return z.multiply(j).subtract(Z.multiply(W))}function u(){return Expression.ONE.add(Expression.TWO.add(Expression.TWO).add(Expression.ONE).squareRoot()).divide(Expression.TWO)}if(n.equals(Expression.ZERO)){if(t===0)return Expression.ONE;if(t===30)return Expression.ONE.add(Expression.TWO).squareRoot().divide(Expression.TWO);if(t===45)return Expression.ONE.divide(Expression.TWO.squareRoot());if(t===60)return Expression.ONE.divide(Expression.TWO);if(t===90)return Expression.ZERO;if(t===15||t===75)return s(t);if(t===36)return u().divide(Expression.TWO);if(t===72)return u().subtract(Expression.ONE).divide(Expression.TWO);if(t===18)return Expression.TWO.add(u()).squareRoot().divide(Expression.TWO);if(t===54)return Expression.TWO.add(Expression.ONE).subtract(u()).squareRoot().divide(Expression.TWO);if(t%3===0){var c=90-Math.floor(t/3)%6*15,p=-(c-t);return l(c,p)}}if(n.multiply(Expression.TWO).getDenominator().equals(Expression.ONE)){var d=t+n.multiply(Expression.TWO).toNumber()/2;if(d===7.5)return l(30,-22.5);if(d===22.5)return s(d);if(d===37.5)return l(60,-22.5);if(d===52.5)return l(30,22.5);if(d===67.5)return s(d);if(d===82.5)return l(60,22.5)}if(t%1===0){var x=Integer$1.fromNumber(t).add(n).divide(Integer$1.fromNumber(60)),_=x.getDenominator().toNumber(),c=x.getNumerator().toNumber();if(_>Number.MAX_SAFE_INTEGER||c>Number.MAX_SAFE_INTEGER)return;var S=function(z){const j=Polynomial.of(Expression.ZERO,Expression.ONE);let Z=Polynomial.of(Expression.ONE),W=j,J=1;for(;J<z;){let en=Polynomial.of(Expression.TWO).multiply(j).multiply(W).subtract(Z);Z=W,W=en,J+=1}return W},T=S(_).subtract(Polynomial.of(simplifyConstantValueInternal(60*(c%6),Expression.ZERO)));T=T.scale(T.getContent().inverse());var A=Math.cos((t+n.getNumerator().toNumber()/n.getDenominator().toNumber())/180*Math.PI),a=Math.floor(A*2**24+.5),R=Expression.Integer.fromNumber(2**24),D={a:Expression.Integer.fromNumber(a-1).divide(R),b:Expression.Integer.fromNumber(a+1).divide(R)};return Expression.ExpressionPolynomialRoot.create(T,D)}},simplifyConstantValue=function(t,n){var a=void 0,s=void 0;if(t instanceof Integer$1&&t.compareTo(Expression.ZERO)===0)a=Expression.ZERO,s=Expression.ONE;else if(t===Expression.PI)a=Expression.ONE,s=Expression.ONE;else if(t instanceof Multiplication&&t.a instanceof Integer$1&&t.b===Expression.PI)a=t.a,s=Expression.ONE;else if(t instanceof Division&&t.b instanceof Integer$1&&t.a===Expression.PI)a=Expression.ONE,s=t.b;else if(t instanceof Division&&t.b instanceof Integer$1&&t.a instanceof Multiplication&&t.a.a instanceof Integer$1&&t.a.b===Expression.PI)a=t.a.a,s=t.b;else if(t instanceof Expression.Degrees){var l=t.value.simplify();if(l=l.multiply(Expression.PI).divide(Integer$1.fromNumber(180)),n==="sin")return l.sin();if(n==="cos")return l.cos()}if(a!=null&&s!=null){var u=a.multiply(Integer$1.fromNumber(180)).truncatingDivide(s),c=a.multiply(Integer$1.fromNumber(180)).subtract(u.multiply(s)).divide(s),p=u.remainder(Integer$1.fromNumber(360)).toNumber();if(n==="sin")p=90-p,c=c.negate(),p>=270&&(p-=360);else if(n!=="cos")throw new TypeError;return simplifyConstantValueInternal(p,c)}if(t instanceof Expression.Radians&&t.value.equals(Expression.ZERO))return simplifyConstantValue(t.value,n);if(Expression.has(t,Expression.Complex)){if(n==="sin")return Expression.I.multiply(t.divide(Expression.I).sinh());if(n==="cos")return t.divide(Expression.I).cosh()}if(t instanceof Expression.Arctan){Expression.callback!=null&&Expression.callback(new Expression.Event("trigonometric-function-of-inverse-trigonometric-function-arg",new Expression.Matrix(Matrix.I(1))));var a=t.a;if(n==="sin")return a.getNumerator().divide(a.getDenominator()._pow(2).add(a.getNumerator()._pow(2)).squareRoot());if(n==="cos")return a.getDenominator().divide(a.getDenominator()._pow(2).add(a.getNumerator()._pow(2)).squareRoot())}if(t instanceof Expression.ExpressionWithPolynomialRoot)return simplifyConstantValue(t.upgrade(),n)};Expression.prototype.cosh=function(){var t=this;return t.exp().add(t.negate().exp()).divide(Expression.TWO)};Expression.prototype.sinh=function(){var t=this;return t.exp().subtract(t.negate().exp()).divide(Expression.TWO)};Expression.prototype.tanh=function(){var t=this;return t.exp().subtract(t.negate().exp()).divide(t.exp().add(t.negate().exp()))};Expression.prototype.coth=function(){var t=this;return t.exp().add(t.negate().exp()).divide(t.exp().subtract(t.negate().exp()))};Expression.prototype.arccos=function(){var t=this;return t.arcsin().subtract(Expression.PI.divide(Expression.TWO)).negate()};Expression.prototype.arcsin=function(){var t=this;return t.divide(t.pow(Expression.TWO).subtract(Expression.ONE).negate().squareRoot()).arctan()};Expression.prototype.arccot=function(){var t=this;return t.arctan().subtract(Expression.PI.divide(Expression.TWO)).negate()};Expression.prototype.arcosh=function(){var t=this;return t.add(t.multiply(t).subtract(Expression.ONE).squareRoot()).logarithm()};Expression.prototype.arsinh=function(){var t=this;return t.add(t.multiply(t).add(Expression.ONE).squareRoot()).logarithm()};Expression.prototype.artanh=function(){var t=this;return t.add(Expression.ONE).divide(t.subtract(Expression.ONE).negate()).logarithm().divide(Expression.TWO)};Expression.prototype.arcoth=function(){var t=this;return t.add(Expression.ONE).divide(t.subtract(Expression.ONE)).logarithm().divide(Expression.TWO)};Expression.isRealAlgebraicNumber=function t(n){return n instanceof Expression.Integer||n instanceof Expression.NthRoot&&typeof n.n=="number"&&n.n%1===0&&t(n.a)&&(n.n%2!==0||Expression._isPositive(n.a))||n instanceof Expression.Division&&t(n.getNumerator())&&t(n.getDenominator())||n instanceof Expression.Addition&&t(n.a)&&t(n.b)||n instanceof Expression.Multiplication&&t(n.a)&&t(n.b)};var isArgumentValid=function(t,n){if(t instanceof Expression.Radians)return Expression.isRealAlgebraicNumber(t.value);if(t instanceof Expression.Degrees)return simplifyConstantValue(t,n)!=null;if(t instanceof Expression.Symbol)return Expression.isScalar(t);if(t instanceof Expression.Exponentiation)return t.a instanceof Expression.Symbol&&Expression.isScalar(t.a)&&t.b instanceof Expression.Integer&&t.b.compareTo(Expression.ONE)>0;if(t instanceof Addition)return isArgumentValid(t.a,n)&&isArgumentValid(t.b,n);if(t instanceof Expression.Arctan)return!0;if(t instanceof Multiplication){if(t.a instanceof Integer$1&&Expression.isScalar(t.b)&&t.b instanceof Expression.Symbol||t.a instanceof Integer$1&&Expression.isScalar(t.b)&&t.b instanceof Expression.Arctan||Expression.isScalar(t.b)&&t.b instanceof Expression.Symbol&&(t.a instanceof Expression.NthRoot&&t.a.a instanceof Integer$1||t.a instanceof Multiplication&&t.a.a instanceof Integer$1&&t.a.b instanceof Expression.NthRoot&&t.a.b.a instanceof Integer$1))return!0;var a=Expression.getConstant(t),s=t.divide(a);if(Expression.isScalar(t)&&(a instanceof Integer$1||a instanceof Expression.Complex)&&(s instanceof Multiplication||s instanceof Expression.Symbol||s instanceof Expression.Exponentiation)){for(var l of s.factors())if(!(l instanceof Expression.NthRoot)&&!(l instanceof Expression.Symbol)&&!(l instanceof Expression.Exponentiation&&l.a instanceof Expression.Symbol&&Expression.isScalar(l.a)&&l.b instanceof Expression.Integer&&l.b.compareTo(Expression.ONE)>0))return!1;return!0;//!?
}}return t instanceof Division&&t.b instanceof Integer$1?isArgumentValid(t.a):t instanceof Expression.Complex};Expression.prototype.sin=function(){var t=this,n=simplifyConstantValue(t,"sin");if(n!=null)return n;if(t.isNegative())return t.negate().sin().negate();if(!isArgumentValid(t,"sin"))throw new RangeError("NotSupportedError");return new Sin(t)};function Cos(t){Expression.Function.call(this,"cos",t)}Cos.prototype=Object.create(Expression.Function.prototype);Expression.prototype.cos=function(){var t=this,n=simplifyConstantValue(t,"cos");if(n!=null)return n;if(t.isNegative())return t.negate().cos();if(!isArgumentValid(t,"cos"))throw new RangeError("NotSupportedError");return new Cos(t)};Expression.simplifications.push(Expression.simplifyTrigonometry);Expression.Sin=Sin;Expression.Cos=Cos;Expression.Addition.prototype.compare4Addition=function(t){var n=this;return Expression.Addition.compare4Addition(n,t)};Expression.Multiplication.prototype.compare4MultiplicationInteger=function(t){return-1};//!!!
Expression.Addition.prototype.compare4Multiplication=function(t){if(t instanceof Integer$1)return-1;if(t instanceof Expression.MatrixSymbol)return 1;for(var n=this,a=n.summands(),s=t.summands(),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=l.compare4Multiplication(u);if(c!==0)return c;l=a.next().value,u=s.next().value}return l!=null?1:u!=null?-1:0};Expression.Addition.prototype.compare4MultiplicationSymbol=function(t){return 0-this.compare4Multiplication(t)};Expression.Addition.prototype.compare4MultiplicationInteger=function(t){return 1};Expression.Addition.compare4Addition=function(t,n){for(var a=t.summands(),s=n.summands(),l=a.next().value,u=s.next().value;l!=null&&u!=null;){var c=l.compare4Addition(u);if(c!==0)return c;l=a.next().value,u=s.next().value}return l!=null?1:u!=null?-1:0};//!!!
Expression.Unit=function(t){this.value=t};Expression.Unit.prototype=Object.create(Expression.prototype);Expression.Unit.prototype.toString=function(t){var n=this.value,a=!(n instanceof Expression.Integer);return(a?"(":"")+n.toString(t)+(a?")":"")+this.unitSymbol()};Expression.Unit.prototype.equals=function(t){return t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()&&this.value.equals(t.value)};Expression.Unit.prototype.compare4AdditionSymbol=function(t){return t.compare4Addition(this.value)};Expression.Unit.prototype.compare4Addition=function(t){return this.value.compare4Addition(t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()?t.value:t)};Expression.Unit.prototype.compare4Multiplication=function(t){return this.value.compare4Multiplication(t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()?t.value:t)};Expression.Unit.prototype.compare4MultiplicationSymbol=function(t){return t.compare4Multiplication(this.value)};Expression.Unit.prototype.compare4MultiplicationInteger=function(t){return 1};Expression.Unit.prototype.negate=function(){return this.create(this.value.negate())};Expression.Unit.prototype.multiply=function(t){return this.create(this.value.multiply(t))};Expression.Unit.prototype.multiplyInteger=function(t){return this.create(t.multiply(this.value))};Expression.Unit.prototype.add=function(t){if(t instanceof Expression.Unit&&this.unitSymbol()===t.unitSymbol()){var n=this.value.add(t.value);if(n.equals(Expression.ZERO)){return n;//!?
}return this.create(n);//!?
}return Expression.prototype.add.call(this,t)};//!new 2017-04-26
Expression.Degrees=function(t){Expression.Unit.call(this,t)};Expression.Degrees.prototype=Object.create(Expression.Unit.prototype);Expression.Degrees.prototype.unitSymbol=function(){return""};Expression.Degrees.prototype.create=function(t){return new Expression.Degrees(t)};//!new 2019-12-27
Expression.Radians=function(t){this.value=t};Expression.Radians.prototype=Object.create(Expression.Unit.prototype);Expression.Radians.prototype.unitSymbol=function(){return" rad"};Expression.Radians.prototype.create=function(t){return new Expression.Radians(t)};//!new 2019-11-23
Expression.Matrix.prototype.sin=function(){var t=this,n=Expression.I,a=Expression.TWO;return n.multiply(t).exp().subtract(n.negate().multiply(t).exp()).divide(a.multiply(n))};Expression.Matrix.prototype.cos=function(){var t=this,n=Expression.I,a=Expression.TWO;return n.multiply(t).exp().add(n.negate().multiply(t).exp()).divide(a)};//!
(function(){var t=new Expression.Symbol("_i");function n(s){return Expression._map(function(l){if(l instanceof Expression.Sin){var u=l.a;return t.multiply(u).exp().subtract(t.multiply(u).negate().exp()).divide(Expression.TWO.multiply(Expression.I))}if(l instanceof Expression.Cos){var u=l.a;return t.multiply(u).exp().add(t.multiply(u).negate().exp()).divide(Expression.TWO)}return l},s)}function a(s){return Expression._map(function(l){if(l instanceof Expression.Exponentiation&&l.a===Expression.E){var u=l.b,c=Polynomial.toPolynomial(u.getNumerator(),t).scale(u.getDenominator().inverse());if(c.getDegree()===1){var p=c.getCoefficient(0),d=c.getCoefficient(1);return d.cos().add(Expression.I.multiply(d.sin())).multiply(p.exp())}if(c.getDegree()>1)throw new TypeError("!?")}return l},s)}Expression._replaceSinCos=n,Expression._replaceBySinCos=a})();function Arctan(t){Expression.Function.call(this,"arctan",t)}Arctan.prototype=Object.create(Expression.Function.prototype);Expression.Arctan=Arctan;function getlowestfraction(t){var n=1e-15,a,s,l,u,c,p,d,x;for(x=t,d=Math.floor(x),s=1,c=0,a=d,u=1;x-d>n*u*u;)x=1/(x-d),d=Math.floor(x),l=s,s=a,p=c,c=u,a=l+d*s,u=p+d*c;return a+"/"+u}Expression.prototype.arctan=function(){var t=this;if(t.isNegative())return t.negate().arctan().negate();if(Expression.isConstant(t)&&!(t instanceof Expression.Logarithm)){if(t instanceof Expression.Complex)return Expression.I.subtract(t).divide(Expression.I.add(t)).logarithm().divide(Expression.TWO.multiply(Expression.I));var n=Number(toDecimalStringInternal$1(t,{fractionDigits:15}));console.assert(!Number.isNaN(n));var a=getlowestfraction(Math.atan(n)/Math.PI).split("/"),s=Expression.Integer.fromNumber(Number(a[0])).divide(Expression.Integer.fromNumber(a[1])).multiply(Expression.PI);if(s.getDenominator().toNumber()<1e4&&s.tan().subtract(t).equals(Expression.ZERO))return s;throw new RangeError("NotSupportedError")}if(t instanceof Division){var l=t.getNumerator(),u=t.getDenominator();if(u.subtract(Expression.ONE).subtract(l).multiply(u.subtract(Expression.ONE).add(l)).subtract(Expression.ONE).equals(Expression.ZERO)){var c=Expression.TWO.multiply(t).divide(Expression.ONE.subtract(t._pow(2)));return new Arctan(c).divide(Expression.TWO)}}return t instanceof Expression.Matrix?t.matrix.isDiagonal()?new Expression.Matrix(t.matrix.map(function(p,d,x){return d===x?p.arctan():Expression.ZERO})):Expression.I.subtract(t).divide(Expression.I.add(t)).logarithm().divide(Expression.TWO.multiply(Expression.I)):new Arctan(t)};Expression.prototype.tan=function(){var t=this,n=t.multiply(Expression.TWO);return n.sin().divide(n.cos().add(Expression.ONE))};Expression.prototype.cot=function(){var t=this;if(t instanceof Expression.Matrix)return t.cos().divide(t.sin());var n=t.multiply(Expression.TWO);return n.cos().add(Expression.ONE).divide(n.sin())};Expression.Radians.prototype.complexConjugate=function(){return new Expression.Radians(this.value.complexConjugate())};Expression.Sin.prototype.complexConjugate=function(){return this.a.complexConjugate().sin()};Expression.Cos.prototype.complexConjugate=function(){return this.a.complexConjugate().cos()};Expression.Sin.prototype.compare4MultiplicationExponentiation=function(){return-1};var Integer=Expression.Integer;function Complex(t,n){if(!(t instanceof Integer)||!(n instanceof Integer)||n.compareTo(Expression.ZERO)===0)throw new RangeError;this.real=t,this.imaginary=n}Complex.prototype=Object.create(Expression.prototype);Expression.I=new Complex(Expression.ZERO,Expression.ONE);Expression.Complex=Complex;Complex.prototype.add=function(t){return t.addComplex(this)};Expression.prototype.addComplex=function(t){return this.addExpression(t)};Integer.prototype.addComplex=function(t){return new Complex(t.real.add(this),t.imaginary)};Complex.prototype.addComplex=function(t){var n=t.real.add(this.real),a=t.imaginary.add(this.imaginary);return a.compareTo(Expression.ZERO)===0?n:new Complex(n,a)};Complex.prototype.addInteger=function(t){return new Complex(t.add(this.real),this.imaginary)};Complex.prototype.equals=function(t){return!!(t instanceof Complex&&this.real.equals(t.real)&&this.imaginary.equals(t.imaginary))};Complex.prototype.compare4AdditionSymbol=function(t){return 1};Complex.prototype.compare4MultiplicationNthRoot=function(t){return 1};Complex.prototype.compare4Addition=function(t){return t instanceof Complex?this.equals(t)?0:this.real.compareTo(t.real)||this.imaginary.compareTo(t.imaginary):t instanceof Integer?1:t instanceof Expression.Division?Expression.prototype.compare4Addition.call(this,t):t instanceof Expression.Exponentiation?Expression.prototype.compare4Addition.call(this,t):t instanceof Expression.Matrix?Expression.prototype.compare4Addition.call(this,t):-1};Complex.prototype.compare4Multiplication=function(t){return t instanceof Complex?t.equals(this)?0:this.real.abs().compareTo(t.real.abs())||this.imaginary.abs().compareTo(t.imaginary.abs()):t.compare4MultiplicationComplex(this)};Expression.prototype.compare4MultiplicationComplex=function(t){return-1};Complex.prototype.compare4MultiplicationSymbol=function(t){return 1};Complex.prototype.multiply=function(t){return t.multiplyComplex(this)};Complex.prototype.multiplyComplex=function(t){var n=t.real.multiply(this.real).subtract(t.imaginary.multiply(this.imaginary)),a=t.real.multiply(this.imaginary).add(t.imaginary.multiply(this.real));return a.compareTo(Expression.ZERO)===0?n:new Complex(n,a)};Expression.prototype.multiplyComplex=function(t){return this.multiplyExpression(t)};Integer.prototype.multiplyComplex=function(t){return this.compareTo(Expression.ZERO)===0?this:new Complex(t.real.multiply(this),t.imaginary.multiply(this))};Complex.prototype.multiplyInteger=function(t){return t.compareTo(Expression.ZERO)===0?t:new Complex(t.multiply(this.real),t.multiply(this.imaginary))};Complex.prototype.conjugate=function(){return new Complex(this.real,this.imaginary.negate())};Complex.prototype.getPrecedence=function(){return this.real.equals(Expression.ZERO)?this.imaginary.equals(Expression.ONE)?1e3:3:2};Complex.prototype.truncatingDivide=function(t){return t instanceof Integer?new Complex(this.real.truncatingDivide(t),this.imaginary.truncatingDivide(t)):this.multiply(t.conjugate()).truncatingDivide(t.multiply(t.conjugate()))};Complex.prototype.toStringInternal=function(t,n,a,s,l,u,c,p){if(this.real.equals(Expression.ZERO))return this.imaginary.equals(Expression.ONE)?a:this.imaginary.equals(Expression.ONE.negate())?u+s+a+c:u+p(this.imaginary,t)+n+a+c;var d=this.imaginary.isNegative(),x=d?this.imaginary.negateCarefully():this.imaginary,_=x.equals(Expression.ONE)?a:u+p(x,t)+n+a+c,S=p(this.real,t);return u+S+(d?s:l)+_+c};Complex.prototype.toString=function(t){return this.toStringInternal(t,"","i","-","+","","",function(n,a){return n.toString(a)})};Complex.prototype.compare4MultiplicationInteger=function(t){return 1};Complex.prototype.remainderInteger=function(t){return Complex.prototype.remainder.call(t,this)};Complex.prototype.remainder=function(t){function n(_){return _ instanceof Expression.Integer?_.multiply(_):_.multiply(_.conjugate())}function a(_,S){S.compareTo(Expression.ZERO)<0&&(S=S.negate(),_=_.negate());var T=S.truncatingDivide(Expression.TWO);return _.compareTo(Expression.ONE)<0&&(T=T.negate()),_.add(T).truncatingDivide(S)}var s=this,l=t instanceof Expression.Integer?s:s.multiply(t.conjugate()),u=t instanceof Expression.Integer?t:t.multiply(t.conjugate()),c=a(l instanceof Complex?l.real:l,u),p=a(l instanceof Complex?l.imaginary:Expression.ZERO,u),d=p.compareTo(Expression.ZERO)===0?c:new Complex(c,p),x=s.subtract(t.multiply(d));if(n(x).compareTo(n(t))>=0)throw new TypeError;return x};Complex.prototype.primeFactor=function(){return QuadraticInteger._complexIntegerPrimeFactor(this.real.toBigInt(),this.imaginary.toBigInt())};Expression.Complex=Complex;Expression.Complex.prototype.complexConjugate=function(){return this.conjugate()};Expression.Complex.prototype.compare4MultiplicationExponentiation=function(){return 1};function SomePolynomialRoot(t,n,a){this.e=t,this.polynomial=n,this.rootSymbol=a}SomePolynomialRoot.prototype=Object.create(Expression.Symbol.prototype);function alpha(){return new Expression.Symbol("alpha")}function isSameRoot(t,n){return t.polynomial.equals(n.polynomial)&&t.rootSymbol===n.rootSymbol}SomePolynomialRoot.create=function(t){const n=alpha();return new SomePolynomialRoot(n,t,n)};SomePolynomialRoot.prototype.isExact=function(){return!1};function simplifyExpressionWithPolynomialRoot$1(t,n){if(t instanceof Expression.Integer)return t;var a=Polynomial$1.toPolynomial(t.getNumerator(),alpha()),s=Polynomial$1.toPolynomial(t.getDenominator(),alpha()),l=!1;if(s.getDegree()>=n.getDegree()*2&&(a=a.divideAndRemainder(n).remainder,l=!0),s.getDegree()>=n.getDegree()*2&&(s=s.divideAndRemainder(n).remainder,l=!0),a.isDivisibleBy(n))return Expression.ZERO;if(s.getDegree()>0){var u=s.modularInverse(n).primitivePart();s=s.multiply(u).divideAndRemainder(n).remainder,a=a.multiply(u).divideAndRemainder(n).remainder,l=!0}if(!l)return new SomePolynomialRoot(t,n);var c=a.calcAt(alpha()).divide(s.calcAt(alpha()));return c instanceof Expression.Integer?c:new SomePolynomialRoot(c,n)}SomePolynomialRoot.prototype.negate=function(){return new SomePolynomialRoot(this.e.negate(),this.polynomial)};SomePolynomialRoot.prototype.equals=function(t){return t===Expression.ZERO?!1:this.subtract(t).equals(Expression.ZERO)};SomePolynomialRoot.prototype.simplifyExpression=function(){return this};SomePolynomialRoot.prototype.toString=function(t){throw new TypeError};SomePolynomialRoot.prototype.toMathML=function(t){throw new TypeError};SomePolynomialRoot.prototype.multiply=function(t){if(t instanceof SomePolynomialRoot){if(!isSameRoot(this,t))throw new TypeError;return simplifyExpressionWithPolynomialRoot$1(this.e.multiply(t.e),this.polynomial)}return simplifyExpressionWithPolynomialRoot$1(this.e.multiply(t),this.polynomial)};SomePolynomialRoot.prototype.add=function(t){if(t instanceof SomePolynomialRoot){if(!isSameRoot(this,t))throw new TypeError;return simplifyExpressionWithPolynomialRoot$1(this.e.add(t.e),this.polynomial)}return simplifyExpressionWithPolynomialRoot$1(this.e.add(t),this.polynomial)};SomePolynomialRoot.prototype.inverse=function(){return simplifyExpressionWithPolynomialRoot$1(this.e.inverse(),this.polynomial)};SomePolynomialRoot.prototype.divide=function(t){return t instanceof SomePolynomialRoot&&isSameRoot(this,t)?simplifyExpressionWithPolynomialRoot$1(this.e.divide(t.e),this.polynomial):this.multiply(t.inverse())};SomePolynomialRoot.prototype.divideExpression=function(t){return simplifyExpressionWithPolynomialRoot$1(t.divide(this.e),this.polynomial)};SomePolynomialRoot.prototype.multiplyExpression=function(t){return simplifyExpressionWithPolynomialRoot$1(t.multiply(this.e),this.polynomial)};SomePolynomialRoot.prototype.addExpression=function(t){return simplifyExpressionWithPolynomialRoot$1(t.add(this.e),this.polynomial)};SomePolynomialRoot.prototype.getPrecedence=function(){throw new TypeError};SomePolynomialRoot.prototype.isRightToLeftAssociative=function(){throw new TypeError};SomePolynomialRoot.prototype.isUnaryPlusMinus=function(){throw new TypeError};SomePolynomialRoot.prototype.isNegative=function(){throw new TypeError};SomePolynomialRoot.prototype._nthRoot=function(t){throw new TypeError};SomePolynomialRoot.prototype.pow=function(t){throw new TypeError};SomePolynomialRoot.prototype._pow=function(t){throw new TypeError};SomePolynomialRoot.prototype.calcAt=function(t,n){var a=function(u){for(var c=Polynomial$1.toPolynomial(u,alpha()),p=Expression.ZERO,d=Date.now();n.length<=c.getDegree();)n.push(n[n.length-1].multiply(t));var x=Date.now();x-d>10&&console.log("xPows",x-d);for(var _=0;_<=c.getDegree();_+=1)p=p.add(c.getCoefficient(_).multiply(n[_]));return p},s=this.e,l=a(s.getNumerator()).divide(a(s.getDenominator()));return l};var LEFT_TO_RIGHT=0,RIGHT_TO_LEFT=1,COMMA_PRECEDENCE=1,EQUALITY_PRECEDENCE=2,ADDITIVE_PRECEDENCE=3,MULTIPLICATIVE_PRECEDENCE=4,UNARY_PRECEDENCE=6,UNARY_PRECEDENCE_PLUS_ONE=UNARY_PRECEDENCE+1,UNARY_PRECEDENCE_PLUS_TWO=UNARY_PRECEDENCE+2;function Operator(t,n,a,s,l){this.name=t,this.arity=n,this.rightToLeftAssociative=a,this.precedence=s,this.i=l}Operator.trigonometry=function(t){return new Operator(t,1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(n){return n=prepareTrigonometricArgument(n),n[t]()})};Operator.simple=function(t){return new Operator(t,1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(n){return n[t]()})};var UNARY_PLUS=new Operator("+",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t}),UNARY_MINUS=new Operator("-",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.negate()}),prepareTrigonometricArgument=function(t){if(t instanceof Expression.Integer)return new Expression.Degrees(t);if(t instanceof Expression.NonSimplifiedExpression){const n=function(a){return a instanceof Expression.NonSimplifiedExpression?n(a.e):a instanceof Expression.Integer?!0:a instanceof Expression.Negation?n(a.b):a instanceof Expression.Multiplication||a instanceof Expression.Addition?n(a.a)&&n(a.b):!1};if(n(t))return toDegrees(t)}return t},toDegrees=function(t){return t instanceof Expression.NonSimplifiedExpression?new Expression.NonSimplifiedExpression(new Expression.Degrees(t)):new Expression.Degrees(t)},toRadians=function(t){return t instanceof Expression.NonSimplifiedExpression?new Expression.NonSimplifiedExpression(new Expression.Radians(t)):new Expression.Radians(t)},notSupported=function(t){throw new TypeError},conjugateTranspose=function(t){return t.transpose().complexConjugate()},inequalityOperator=function(t,n){return new Operator(t,2,LEFT_TO_RIGHT,EQUALITY_PRECEDENCE,function(a,s){return a.transformInequality(s,n)})},operations=[new Operator("=",2,LEFT_TO_RIGHT,EQUALITY_PRECEDENCE,function(t,n){return t.transformEquality(n)}),inequalityOperator("","!="),inequalityOperator("!=","!="),inequalityOperator(">",">"),inequalityOperator("<","<"),inequalityOperator("",">="),inequalityOperator("","<="),new Operator(";",2,LEFT_TO_RIGHT,COMMA_PRECEDENCE,function(t,n){return t.transformComma(n)}),new Operator(",",2,LEFT_TO_RIGHT,COMMA_PRECEDENCE,function(t,n){return t.transformComma(n)}),new Operator("+",2,LEFT_TO_RIGHT,ADDITIVE_PRECEDENCE,function(t,n){return t.add(n)}),new Operator("-",2,LEFT_TO_RIGHT,ADDITIVE_PRECEDENCE,function(t,n){return t.subtract(n)}),new Operator("*",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.multiply(n)}),new Operator("/",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.divide(n)}),new Operator("\\",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.inverse().multiply(n)}),new Operator("^",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t,n){return t.pow(n)}),new Operator("**",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t,n){return t.pow(n)}),new Operator(".^",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t,n){return t.elementWisePower(n)}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.squareRoot()}),new Operator("sqrt",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.squareRoot()}),new Operator("radical",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.squareRoot()}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t._nthRoot(3)}),new Operator("cbrt",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t._nthRoot(3)}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t._nthRoot(4)}),new Operator("rank",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.rank()}),new Operator("adj",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.adjugate()}),new Operator("adjugate",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.adjugate()}),new Operator("inverse",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.inverse()}),new Operator("det",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.determinant()}),new Operator("determinant",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.determinant()}),new Operator("row-reduce",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.rowReduce()}),new Operator("transpose",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.transpose()}),new Operator("'",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,function(t){if(Expression.isScalar(t)){var n=null;if(Expression._map(function(s){return s instanceof Expression.Symbol&&!Expression.isConstant(s)&&(n=s),s},t.simplify()),n!=null)return t.simplify().derivative(n)}return t.transpose()}),new Operator("^*",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,conjugateTranspose),new Operator("^{*}",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,conjugateTranspose),new Operator("",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,conjugateTranspose),new Operator("solve",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.transformNoAnswerExpression("solve")}),new Operator("GF2",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.GF2()}),new Operator("",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_TWO,function(t){return toDegrees(t)}),new Operator("deg",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_TWO,function(t){return toDegrees(t)}),new Operator("rad",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_TWO,function(t){return toRadians(t)}),new Operator("exp",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.exp()}),new Operator("log",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.logarithm()}),new Operator("lg",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.logarithm().divide(Expression.TEN.logarithm())}),new Operator("ln",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.logarithm()}),new Operator("abs",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.abs()}),new Operator("min",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.min()}),new Operator("max",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.max()}),new Operator("gcd",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.gcd()}),new Operator("conjugate",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.complexConjugate()}),new Operator("overline",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.complexConjugate()}),new Operator("arg",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.complexArgument()}),new Operator("\\left",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("\\right",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("\\mathrm",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t}),new Operator("frac",2,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t,n){return t.divide(n)}),new Operator("\\cdot",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.multiply(n)}),new Operator("\\times",2,LEFT_TO_RIGHT,MULTIPLICATIVE_PRECEDENCE,function(t,n){return t.multiply(n)}),new Operator("!",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,function(t){return t.factorial()}),new Operator("!!",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,notSupported),new Operator("!!!",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE,notSupported),new Operator("pseudoinverse",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(t){return t.pseudoinverse()}),new Operator("root of",1,RIGHT_TO_LEFT,EQUALITY_PRECEDENCE,function(t){var n=Expression.getMultivariatePolynomial(t.simplify());return SomePolynomialRoot.create(n.p)}),new Operator("near",2,RIGHT_TO_LEFT,COMMA_PRECEDENCE,function(t,n){if(t instanceof Expression.Integer)return t;if(t instanceof SomePolynomialRoot&&t.e.toString()==="alpha"){const d=n.simplify(),x=t.polynomial;var a=x.getZeros(),s=1/0,l=null,u=function(S,T){return S.subtract(T)};for(var c of a){var p=Math.abs(Number(u(d,c).toString({rounding:{fractionDigits:2*x.getDegree()+Math.ceil(x._log2hypot())}})));(l==null||p<s)&&(s=p,l=c)}const _=l.upgrade();return n instanceof Expression.NonSimplifiedExpression?new Expression.NonSimplifiedExpression(_):_}throw new TypeError}),new Operator("factor",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.simplify().factor()}),new Operator("derivative",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){if(t=t.simplify(),t instanceof Expression.List){if(t.list.length!==2)throw new RangeError;return t.list[0].derivative(t.list[1])}return t.derivative()}),new Operator("'(x)",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.derivative(new Expression.Symbol("x"))}),new Operator("'(t)",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.derivative(new Expression.Symbol("t"))}),new Operator("'_{x}",1,LEFT_TO_RIGHT,UNARY_PRECEDENCE_PLUS_ONE,function(t){return t.derivative(new Expression.Symbol("x"))}),new Operator("resultant",1,RIGHT_TO_LEFT,UNARY_PRECEDENCE_PLUS_ONE,function(t){if(t=t.simplify(),t instanceof Expression.List){if(t.list.length!==2)throw new RangeError;var n=new Expression.Symbol("x"),a=Polynomial.toPolynomial(t.list[0],n),s=Polynomial.toPolynomial(t.list[1],n);return new Expression.Polynomial(Polynomial.resultant(a,s))}})];function OperationSearchCache(){this.map={},this.re=null}OperationSearchCache.prototype.append=function(t){this.map[t.name.toLowerCase()]=t,this.re=null};OperationSearchCache.prototype.getByName=function(t){return this.map[t.toLowerCase()]};OperationSearchCache.prototype.getRegExp=function(){var t=function(s){return s.replace(/[\/\\^$*+?.()|[\]{}]/g,"\\$&")};if(this.re==null){var n=[];for(var a in this.map)Object.prototype.hasOwnProperty.call(this.map,a)&&n.push(a);n.sort(function(l,u){return l<u&&u.lastIndexOf(l,0)!==0||l.lastIndexOf(u,0)===0?-1:1});const s="\0";this.re=new RegExp("^(?:"+t(n.join(s)).split(s).join("|").replace(/\|ch\|/g,"|ch(?!i)|").replace(/\|th\|/g,"|th(?!eta)|")+")","i")}return this.re};var operationSearchCache=new OperationSearchCache,trigonometryFunctions={},i$1=-1;for(;++i$1<operations.length;)operationSearchCache.append(operations[i$1]);for(const t of"cos sin tan cot".split(" "))operationSearchCache.append(Operator.trigonometry(t)),trigonometryFunctions[t]=!0;for(const t of"cosh sinh tanh coth arccos arcsin arctan arccot arcosh arsinh artanh arcoth".split(" "))operationSearchCache.append(Operator.simple(t));var nextToken=function(t){var n=null;do n=t.next();while(n.type==="whitespace");return n},parsePunctuator=function(t,n,a){if(n.type!=="punctuator"||n.value!==a)throw ExpressionParser.startPosition=t.previousPosition,ExpressionParser.endPosition=t.position,ExpressionParser.input=t.input,n.type==="EOF"?new RangeError("UserError: unexpected end of input, '"+a+"' expected"):new RangeError("UserError: unexpected '"+t.input.slice(t.previousPosition,t.position)+"', '"+a+"' expected");return n=nextToken(t),n};function ParseResult(t,n){this.result=t,this.token=n}var parseMatrix=function(t,n,a){for(var s="{",l="}",u=[],c=!0;c;){n=parsePunctuator(t,n,s);for(var p=[],d=!0;d;){var x=parseExpression(t,n,a,COMMA_PRECEDENCE,void 0);n=x.token,p.push(x.result),n.type==="punctuator"&&n.value===","?(d=!0,n=nextToken(t)):d=!1}n=parsePunctuator(t,n,l),u.push(p),n.type==="punctuator"&&n.value===","?(c=!0,n=nextToken(t)):c=!1}return n=parsePunctuator(t,n,"}"),new ParseResult(a.wrap(Expression.Matrix.fromArray(u)),n)},parseLaTeXMatrix=function(t,n,a,s){for(var l=[],u=!0;u||n.type==="punctuator"&&n.value===s;){u?u=!1:n=nextToken(t);for(var c=[],p=!0;p||n.type==="punctuator"&&n.value==="&";){p?p=!1:n=nextToken(t);var d=parseExpression(t,n,a,COMMA_PRECEDENCE,void 0);n=d.token,c.push(d.result)}l.push(c)}return new ParseResult(a.wrap(Expression.Matrix.fromArray(l)),n)},parseLaTeXArgument=function(t,n,a){return parseExpression(t,n,a,0,void 0)},getVulgarFraction=function(t){var n=normalizeVulgarFractions(t).replace(/[\u2044]/g,"/"),a=Expression.Integer.fromString(n.slice(0,n.indexOf("/"))).divide(Expression.Integer.fromString(n.slice(n.indexOf("/")+1)));return a},getDecimalFraction=function(t,n,a,s){var l=Expression.ZERO,u=Expression.ONE;if(t!=null&&(l=Expression.Integer.fromString(t)),n!=null){var c=Expression.pow(Expression.TEN,n.length);l=l.multiply(c).add(Expression.Integer.fromString(n)),u=u.multiply(c)}if(a!=null){var c=Expression.pow(Expression.TEN,a.length).subtract(Expression.ONE);l=l.multiply(c).add(Expression.Integer.fromString(a)),u=u.multiply(c)}if(s!=null){var p=0+Number(s),c=Expression.pow(Expression.TEN,p<0?-p:p);p<0?u=u.multiply(c):l=l.multiply(c)}var d=l.divide(u);return d};ExpressionParser._getDecimalFraction=getDecimalFraction;var parseDecimalFraction=function(t,n,a){var s=!0,l=void 0;if(n.type==="integerLiteral")l=Expression.Integer.fromString(n.value),l=a.wrap(l),n=nextToken(t);else if(n.type==="numericLiteral"){var u=n.value,c=decimalFractionWithGroups.exec(u);s=!1,a.needsWrap?l=new Expression.DecimalFraction(c[1],c[2],c[3],c[4]):l=getDecimalFraction(c[1],c[2],c[3],c[4]),l=a.wrap(l),n=nextToken(t)}//!
if((s||l==null)&&n.type==="vulgarFraction"){var p=a.wrap(getVulgarFraction(n.value));l!=null?l=l.add(p).addPosition(t.previousPosition,t.previousPosition,t.input):l=p,n=nextToken(t)}return l!=null?new ParseResult(l,n):void 0},whiteSpaces=/^\s+/,punctuators=/^(?:[,&(){}|@]|\\\\|(?:\\begin|\\end)(?:\{(?:[bvp]?matrix|gathered)\})?)/,integerLiteral=/^\d+(?![\d.])(?!(?:(?:[eE]|)[\+\-]?\d+))(?!,(?:\d|\(\d+\)))/,integerLiteralWithoutComma=/^\d+(?![\d.])(?!(?:(?:[eE]|)[\+\-]?\d+))/,decimalFraction=/^(?=[.,]?\d)\d*(?:(?:[.]|[.,](?=\d|\(\d+\)))\d*(?:\(\d+\))?)?(?:(?:[eE]|)[\+\-]?\d+)?/,decimalFractionWithoutComma=new RegExp(decimalFraction.source.replace(/,/g,""));const greek="alpha beta gamma delta epsilon zeta eta theta iota kappa lambda mu nu xi omicron pi rho varsigma sigma tau upsilon phi chi psi omega".split(" "),ARABIC_MATHEMATIC_LETTER=/(?:[\u0627\u066E\u062D\u062F\u0633\u0634\u0635\u0639\u0637\u06BE\u062A]|\u062d\u0640\u0640\u0640\u0640)(?![\u0600-\u06FF])/;var symbols=new RegExp(/^(?:GREEK|circ||[a-zA-Z---]|ARABIC_MATHEMATIC_LETTER)(?:\_[0-9]+|\_\([a-z0-9]+,[a-z0-9]+\)|[\u2080-\u2089]+)?/.source.replace(/GREEK/g,greek.join("|")).replace(/ARABIC_MATHEMATIC_LETTER/g,ARABIC_MATHEMATIC_LETTER.source)),superscripts=/^[\u00B2\u00B3\u00B9\u2070\u2071\u2074-\u207F]+/,vulgarFractions=/^[\u00BC-\u00BE\u2150-\u215E]/,other=/^(?:[\uD800-\uDBFF][\uDC00-\uDFFF]|\S)/,decimalFractionWithGroups=/^(\d+)?(?:[.,](\d+)?(?:\((\d+)\))?)?(?:(?:[eE]|)([\+\-]?\d+))?$/,normalizeSuperscripts=function(t){return t.replace(/[\u00B2\u00B3\u00B9\u2070\u2071\u2074-\u207F]/g,function(n){var a=n.charCodeAt(0);if(a===178)return"2";if(a===179)return"3";if(a===185)return"1";var s=a-8304;return"0i  456789+-=()n".slice(s,s+1)})},normalizeVulgarFractions=function(t){return t.replace(/[\u00BC-\u00BE\u2150-\u215E]/g,function(n){var a=n.charCodeAt(0),s=a-8528<0?(a-188)*2:(3+a-8528)*2;return"141234171911132315253545165618385878".slice(s,s+2).replace(/^\S/g,"$&").replace(/1\u20441/g,"110")})},normalizeSubscripts=function(t){for(var n=t.length-1;n>=0&&t.charCodeAt(n)>=8320&&t.charCodeAt(n)<=8329;)n-=1;return n===t.length-1?t:t.slice(0,n+1)+"_"+t.slice(n+1).replace(/[\u2080-\u2089]/g,function(a){return String.fromCharCode(a.charCodeAt(0)-8320+48)})},normalizeGreek=function(t){var n=t.indexOf("_"),a=n===-1?t.length:n;if(a>1){var s=t.slice(0,a),l=greek.indexOf(s);if(l!==-1)return String.fromCharCode(945+l)+t.slice(a)}return t},parseExpression=function(t,n,a,s,l){var u=!0,c=!1,p=void 0,d=void 0;//!
for(;n.type!=="EOF"&&u;){var x=void 0,_=void 0,S=n.type==="operator"||n.type==="punctuator"&&n.value===","?operationSearchCache.getByName(n.value):null;if(S!=null&&(x=l==null&&S.name==="+"?UNARY_PLUS:l==null&&S.name==="-"?UNARY_MINUS:S),x!=null&&x.name==="frac")if(!(l==null&&s<=UNARY_PRECEDENCE_PLUS_ONE||s<MULTIPLICATIVE_PRECEDENCE))u=!1;else{n=nextToken(t),p=parseExpression(t,n,a,MULTIPLICATIVE_PRECEDENCE,void 0);var T=p.result;n=p.token,p=parseExpression(t,n,a,MULTIPLICATIVE_PRECEDENCE,void 0);var A=p.result;n=p.token,_=x.i(T,A),u=!0}else if(x!=null)if(!(l!=null&&(x.arity!==1||x.rightToLeftAssociative!==RIGHT_TO_LEFT||s<MULTIPLICATIVE_PRECEDENCE)||l==null&&x.arity===1&&x.rightToLeftAssociative===RIGHT_TO_LEFT)||s>x.precedence+(x.rightToLeftAssociative===RIGHT_TO_LEFT?0:-1))u=!1;else{var R=t.previousPosition;if(n=nextToken(t),x.arity===1&&x.rightToLeftAssociative!==RIGHT_TO_LEFT)ExpressionParser.startPosition=R,ExpressionParser.endPosition=R+x.name.length,ExpressionParser.input=t.input,l=x.i(l).addPosition(R,x.name.length,t.input);else if(x.arity===1&&x.rightToLeftAssociative===RIGHT_TO_LEFT&&x.precedence===UNARY_PRECEDENCE_PLUS_ONE&&x.name.length>1&&trigonometryFunctions[x.name]===!0&&(n.type==="operator"&&n.value==="^"||n.type==="superscript"&&/^\d+$/.test(normalizeSuperscripts(n.value)))){//!new 2017-11-04
var D=t.position,O=0,F=null;n.type==="superscript"?(F=Expression.Integer.fromString(normalizeSuperscripts(n.value)),O=t.position-t.previousPosition,n=nextToken(t)):(O=1,n=nextToken(t),n.type!=="integerLiteral"&&!(n.type==="punctuator"&&(n.value==="{"||n.value==="("))?u=!1:(p=parseExpression(t,n,a,UNARY_PRECEDENCE,void 0),F=p.result,n=p.token)),u&&(p=parseExpression(t,n,a,x.precedence,void 0),d=p.result,n=p.token,_=x.i(d).addPosition(R,x.name.length,t.input).pow(F).addPosition(D,O,t.input))}else if(p=parseExpression(t,n,a,x.precedence,void 0),d=p.result,n=p.token,ExpressionParser.startPosition=R,ExpressionParser.endPosition=R+x.name.length,ExpressionParser.input=t.input,x.arity===1)_=x.i(d).addPosition(R,x.name.length,t.input);else if(x.arity===2)l=x.i(l,d).addPosition(R,x.name.length,t.input);else throw new RangeError}else if(l==null||s<MULTIPLICATIVE_PRECEDENCE||s===UNARY_PRECEDENCE_PLUS_ONE&&c&&n.type==="symbol")if((p=parseDecimalFraction(t,n,a))!=null)_=p.result,n=p.token,c=!0;else if(n.type==="punctuator"&&n.value==="(")n=parsePunctuator(t,n,"("),p=parseExpression(t,n,a,0,void 0),_=p.result,n=p.token,n=parsePunctuator(t,n,")");else if(n.type==="punctuator"&&n.value==="{")n=parsePunctuator(t,n,"{"),n.type==="punctuator"&&n.value==="{"?(p=parseMatrix(t,n,a),_=p.result,n=p.token):(p=parseLaTeXArgument(t,n,a),_=p.result,n=p.token,n=parsePunctuator(t,n,"}"));else if(n.type==="punctuator"&&(n.value==="\\begin{bmatrix}"||n.value==="\\begin{vmatrix}"||n.value==="\\begin{pmatrix}"||n.value==="\\begin{matrix}"||n.value==="\\begin{gathered}")){var z=n.value.slice(7,-1);if(n=nextToken(t),p=parseLaTeXMatrix(t,n,a,"\\\\"),_=p.result,n=p.token,n.type==="punctuator"&&n.value==="\\end{"+z+"}"&&(n=nextToken(t)),z==="vmatrix"){_=_.determinant();//!
}}else if(n.type==="symbol"){var j=n.value;j=normalizeSubscripts(j),j=normalizeGreek(j),_=a.get(j),_=a.wrap(_),n=nextToken(t)}else if(n.type==="punctuator"&&n.value==="|")if(l==null||Expression.isScalar(l)){//!
if(n=parsePunctuator(t,n,"|"),p=parseExpression(t,n,a,COMMA_PRECEDENCE,void 0),_=p.result,n=p.token,n=parsePunctuator(t,n,"|"),Expression.isScalar(_))_=_.abs();else{_=_.determinant();//!
}}else s<COMMA_PRECEDENCE?(n=parsePunctuator(t,n,"|"),p=parseExpression(t,n,a,0,void 0),_=p.result,n=p.token,_=l.augment(_),l=void 0):u=!1;else n.type==="punctuator"&&n.value===""?(n=nextToken(t),n=parsePunctuator(t,n,"("),p=parseLaTeXMatrix(t,n,a,"@"),_=p.result,n=p.token,n=parsePunctuator(t,n,")")):u=!1;else u=!1;//!TODO: fix
if(!u&&l!=null&&s<=UNARY_PRECEDENCE+0&&n.type==="superscript"){var Z=ExpressionParser.parse(normalizeSuperscripts(n.value),a);l=l.pow(Z).addPosition(t.previousPosition,t.previousPosition,t.input),n=nextToken(t),u=!0;//!
}if(!u&&n.type==="operator"&&n.value==="\\"&&(u=!0,n=nextToken(t)),_!=null)if(l!=null){var W=t.position;p=parseExpression(t,n,a,MULTIPLICATIVE_PRECEDENCE,_);var J=p.result;n=p.token,l=l.multiply(J).addPosition(W,1,t.input)}else l=_}if(l==null)throw ExpressionParser.startPosition=t.previousPosition,ExpressionParser.endPosition=t.position,ExpressionParser.input=t.input,n.type==="EOF"?new RangeError("UserError: unexpected end of input"):new RangeError("UserError: unexpected '"+t.input.slice(t.previousPosition,t.position)+"'");return new ParseResult(l,n)};const decimalNumberRegExp$1=new RegExp("\\p{Decimal_Number}","u"),replaceSimpleDigit$1=function(t){let n=0;for(;decimalNumberRegExp$1.test(String.fromCodePoint(t-n));)n+=1;return n===0?-1:(n-1)%10},map$2={":":"/","[":"(","]":")","":"*","":"*","":"/","":"^",:"",:"A",:"B",:"C",:"T",:"A",:"B",:"C",:"T","":",","":",","":" ","":"-","":"-","":"-","":"-","":"-","":"-","":"*","":" ","":"*","":",","":" ","":"e","":"i","":"-","":"/","":"*","":"","":"","":"*","":"|","":"","":"","":"0","":"(","":")",:"-",:"1",:"7",:"3",:"9",:"2",:"5",:"8",:"6",:"4"},isBidiControl=function(t){return t===1564||t===8206||t===8207||t>=8234&&t<=8238||t>=8294&&t<=8297};var getCodePointReplacement=function(t){if(t>=65281&&t<=65374)return t-65281+33;var n=replaceSimpleDigit$1(t);if(n!==-1)return n+48;if(isBidiControl(t))return 32;if(t>=0&&t<=65535){var a=map$2[String.fromCharCode(t)];if(a!=null&&a.length===1)return a.charCodeAt(0)}return-1},replaceSomeChars=function(t){for(var n=0,a="",s=0;s<t.length;){const c=t.codePointAt(s);var l=c<=65535?1:2;if(c>127||c===58||c===91||c===93){var u=getCodePointReplacement(c);if(u!==-1){if(!(u>=0&&u<=65535))throw new RangeError;a+=t.slice(n,s),a+=String.fromCharCode(u),n=s+l}}s+=l}return a+=t.slice(n),a},config=[{type:"integerLiteral",re:integerLiteral,state:0},{type:"integerLiteral",re:integerLiteralWithoutComma,state:1},{type:"numericLiteral",re:decimalFraction,state:0},{type:"numericLiteral",re:decimalFractionWithoutComma,state:1},{type:"whitespace",re:whiteSpaces,state:-1},{type:"punctuator",re:punctuators,state:-1},{type:"operator",re:null,state:-1},{type:"symbol",re:symbols,state:-1},{type:"vulgarFraction",re:vulgarFractions,state:-1},{type:"superscript",re:superscripts,state:-1},{type:"OTHER",re:other,state:-1}],stateConfigs=[{start:"(",end:")"},{start:"{",end:"}"}];function Token(t,n){this.type=t,this.value=n}Token.EOF=new Token("EOF","");function Tokenizer(t,n,a){this._preparedInput=replaceSomeChars(t.slice(n)),this.input=t,this._preparedInputPosition=0,this.previousPosition=n,this.position=n,this.states=a}Tokenizer.prototype.next=function(){if(this.previousPosition=this.position,this.position>=this.input.length)return Token.EOF;for(var t=0;t<config.length;t+=1){var n=config[t],a=n.type,s=n.re,l=n.state;if(s==null&&a==="operator"&&(s=operationSearchCache.getRegExp()),l===-1||l===(this.states==null?0:this.states.value)){var u=s.exec(this._preparedInput.slice(this._preparedInputPosition));if(u!=null){var c=u[0];if(a==="punctuator")for(var p=0;p<stateConfigs.length;p+=1){var l=stateConfigs[p];c===l.start?this.states={previous:this.states,value:p}:c===l.end&&this.states!=null&&this.states.value===p&&(this.states=this.states.previous)}for(var p=0;p<c.length;p+=c.codePointAt(p)<=65535?1:2)this.position+=this.input.codePointAt(this.position)<=65535?1:2;return this._preparedInputPosition+=c.length,new Token(a,c)}}}throw new TypeError};var fs={};//!TODO: remove!!!
function ExpressionParser(){}ExpressionParser.parse=function(t,n){if(n=n??new ExpressionParser.Context(void 0,!1),ExpressionParser.startPosition=-1,ExpressionParser.endPosition=-1,ExpressionParser.input=t,typeof t!="string")throw new RangeError;if(typeof hit=="function"&&n.getter!=null)for(var a=/[a-z][a-z][a-z\-]+/gi,s=null;(s=a.exec(t))!=null;){var l=s[0];!(l in fs)&&l.indexOf("-")===-1&&(fs[l]=!0,hit({fs:l}))}var u=new Tokenizer(t,0,null),c=nextToken(u),p=parseExpression(u,c,n,0,void 0);if(c=p.token,c.type!=="EOF")throw ExpressionParser.startPosition=u.previousPosition,ExpressionParser.endPosition=u.position,ExpressionParser.input=u.input,new RangeError("UserError: unexpected '"+u.input.slice(u.previousPosition,u.position)+"'");return p.result};globalThis.Tokenizer=Tokenizer;ExpressionParser.startPosition=-1;ExpressionParser.endPosition=-1;ExpressionParser.input="";var getConstant=function(t){return t==="pi"||t===""||t===""?Expression.PI:t==="e"||t===""?Expression.E:t==="i"||t===""?Expression.I:t==="I"||t==="U"||t==="E"?new Expression.IdentityMatrix(t):t==="circ"?Expression.CIRCLE:t===""?Expression.INFINITY:new Expression.Symbol(t)};ExpressionParser.Context=function(t,n){this.getter=t,this.needsWrap=n??!0};ExpressionParser.Context.prototype.get=function(t){if(this.getter!=null){var n=this.getter(t);if(n!=null)return n}return getConstant(t)};ExpressionParser.Context.prototype.wrap=function(t){return this.needsWrap?new Expression.NonSimplifiedExpression(t):t};ExpressionParser.addOperation=function(t,n){var a=n===1?new Operator(t,n,RIGHT_TO_LEFT,UNARY_PRECEDENCE,function(s){return s.transformNoAnswerExpression(t)}):new Operator(t,n,RIGHT_TO_LEFT,MULTIPLICATIVE_PRECEDENCE,function(s,l){return s.transformNoAnswerExpression(t,l)});operationSearchCache.append(a)};ExpressionParser.addDenotations=function(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=t[n],s=operationSearchCache.getByName(n),l={};l[n]=!0;for(var u in a)if(Object.prototype.hasOwnProperty.call(a,u)){var c=a[u];if(l[c]==null){l[c]=!0;var p=new Operator(c,s.arity,s.rightToLeftAssociative,s.precedence,s.i);operationSearchCache.append(p),trigonometryFunctions[n]&&(trigonometryFunctions[c]=!0)}}}};var idCounter=0;function NonSimplifiedExpression(t,n,a,s){this.e=t,this.position=n??-1,this.length=a??-1,this.input=s??"",this.id=idCounter+=1}NonSimplifiedExpression.prototype=Object.create(Expression.prototype);NonSimplifiedExpression.prototype.negate=function(){return new NonSimplifiedExpression(new Expression.Negation(this))};NonSimplifiedExpression.prototype.add=function(t){return new NonSimplifiedExpression(new Expression.Addition(this,t))};NonSimplifiedExpression.prototype.subtract=function(t){return new NonSimplifiedExpression(new Expression.Subtraction(this,t))};NonSimplifiedExpression.prototype.divide=function(t){return new NonSimplifiedExpression(new Expression.Division(this,t))};NonSimplifiedExpression.prototype.multiply=function(t){return new NonSimplifiedExpression(new Expression.Multiplication(this,t))};NonSimplifiedExpression.prototype.pow=function(t){return new NonSimplifiedExpression(new Expression.Exponentiation(this,t))};NonSimplifiedExpression.prototype.exp=function(){return new NonSimplifiedExpression(Expression.E).pow(this)};NonSimplifiedExpression.prototype.logarithm=function(){return new NonSimplifiedExpression(new Expression.Logarithm(this))};NonSimplifiedExpression.prototype.inverse=function(){return new NonSimplifiedExpression(new Expression.Exponentiation(this,Expression.ONE.negate()))};NonSimplifiedExpression.prototype.factorial=function(){return new NonSimplifiedExpression(new Expression.Factorial(this))};NonSimplifiedExpression.prototype.addExpression=function(t){throw new TypeError};NonSimplifiedExpression.prototype.squareRoot=function(){return new NonSimplifiedExpression(new Expression.SquareRoot(this))};NonSimplifiedExpression.prototype._nthRoot=function(t){return new NonSimplifiedExpression(new Expression.NthRoot(t+"-root",this,t))};NonSimplifiedExpression.prototype.abs=function(){return new NonSimplifiedExpression(new Expression.Function("abs",this))};NonSimplifiedExpression.prototype.cos=function(){return new NonSimplifiedExpression(new Expression.Function("cos",this))};NonSimplifiedExpression.prototype.sin=function(){return new NonSimplifiedExpression(new Expression.Function("sin",this))};NonSimplifiedExpression.prototype.tan=function(){return new NonSimplifiedExpression(new Expression.Function("tan",this))};NonSimplifiedExpression.prototype.cot=function(){return new NonSimplifiedExpression(new Expression.Function("cot",this))};NonSimplifiedExpression.prototype.cosh=function(){return new NonSimplifiedExpression(new Expression.Function("cosh",this))};NonSimplifiedExpression.prototype.sinh=function(){return new NonSimplifiedExpression(new Expression.Function("sinh",this))};NonSimplifiedExpression.prototype.tanh=function(){return new NonSimplifiedExpression(new Expression.Function("tanh",this))};NonSimplifiedExpression.prototype.coth=function(){return new NonSimplifiedExpression(new Expression.Function("coth",this))};NonSimplifiedExpression.prototype.arccos=function(){return new NonSimplifiedExpression(new Expression.Function("arccos",this))};NonSimplifiedExpression.prototype.arcsin=function(){return new NonSimplifiedExpression(new Expression.Function("arcsin",this))};NonSimplifiedExpression.prototype.arctan=function(){return new NonSimplifiedExpression(new Expression.Function("arctan",this))};NonSimplifiedExpression.prototype.arccot=function(){return new NonSimplifiedExpression(new Expression.Function("arccot",this))};NonSimplifiedExpression.prototype.arcosh=function(){return new NonSimplifiedExpression(new Expression.Function("arcosh",this))};NonSimplifiedExpression.prototype.arsinh=function(){return new NonSimplifiedExpression(new Expression.Function("arsinh",this))};NonSimplifiedExpression.prototype.artanh=function(){return new NonSimplifiedExpression(new Expression.Function("artanh",this))};NonSimplifiedExpression.prototype.arcoth=function(){return new NonSimplifiedExpression(new Expression.Function("arcoth",this))};NonSimplifiedExpression.prototype.rank=function(){return new NonSimplifiedExpression(new Expression.Rank(this))};NonSimplifiedExpression.prototype.determinant=function(){return new NonSimplifiedExpression(new Expression.Determinant(this))};Expression.Pseudoinverse.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).pseudoinverse()};NonSimplifiedExpression.prototype.pseudoinverse=function(){return new NonSimplifiedExpression(new Expression.Pseudoinverse(this))};NonSimplifiedExpression.prototype.rowReduce=function(){return new NonSimplifiedExpression(new Expression.RowReduce(this))};NonSimplifiedExpression.prototype.GF2=function(){return new NonSimplifiedExpression(new Expression.GF2(this))};NonSimplifiedExpression.prototype.transpose=function(){return new NonSimplifiedExpression(new Expression.Transpose(this))};NonSimplifiedExpression.prototype.complexConjugate=function(){return new NonSimplifiedExpression(new Expression.ComplexConjugate(this))};NonSimplifiedExpression.prototype.complexArgument=function(){return new NonSimplifiedExpression(new Expression.ComplexArgument(this))};NonSimplifiedExpression.prototype.adjugate=function(){return new NonSimplifiedExpression(new Expression.Adjugate(this))};NonSimplifiedExpression.prototype.elementWisePower=function(t){return new NonSimplifiedExpression(new Expression.ElementWisePower(this,t))};NonSimplifiedExpression.prototype.transformNoAnswerExpression=function(t,n){return new NonSimplifiedExpression(new Expression.NoAnswerExpression(this,t,n))};NonSimplifiedExpression.prototype.transformEquality=function(t){return new NonSimplifiedExpression(new Expression.Equality(this,t))};NonSimplifiedExpression.prototype.transformInequality=function(t,n){return new NonSimplifiedExpression(new Expression.Inequality(this,t,n))};NonSimplifiedExpression.prototype.transformComma=function(t){return new NonSimplifiedExpression(new Expression.Comma(this,t))};NonSimplifiedExpression.prototype.derivative=function(t){return new NonSimplifiedExpression(new Expression.Derivative(this,t))};NonSimplifiedExpression.prototype.addPosition=function(t,n,a){return new NonSimplifiedExpression(this.e,t,n,a)};var prepare$1=function(t,n){var a=t.simplify();return ExpressionParser.startPosition=n.position,ExpressionParser.endPosition=n.position+n.length,ExpressionParser.input=n.input,a};Expression.prototype.simplifyInternal=function(t){return this};Expression.Exponentiation.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).pow(prepare$1(this.b,t))};Expression.Multiplication.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).multiply(prepare$1(this.b,t))};Expression.Addition.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).add(prepare$1(this.b,t))};Expression.Division.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).divide(prepare$1(this.b,t))};Expression.SquareRoot.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).squareRoot()};Expression.NthRoot.prototype.simplifyInternal=function(t){return prepare$1(this.a,t)._nthRoot(this.n)};Expression.Function.prototype.simplifyInternal=function(t){return prepare$1(this.a,t)[this.name]()};Expression.Logarithm.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).logarithm()};Expression.Rank.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).rank()};Expression.Determinant.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).determinant()};Expression.RowReduce.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).rowReduce()};Expression.GF2.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).GF2()};Expression.Transpose.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transpose()};Expression.ComplexConjugate.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).complexConjugate()};Expression.ComplexArgument.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).complexArgument()};Expression.Adjugate.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).adjugate()};Expression.NoAnswerExpression.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformNoAnswerExpression(this.name,this.second==null?void 0:prepare$1(this.second,t))};Expression.Equality.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformEquality(prepare$1(this.b,t))};Expression.Inequality.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformInequality(prepare$1(this.b,t),this.sign)};Expression.Matrix.prototype.simplifyInternal=function(t){return new Expression.Matrix(this.matrix.map(function(n,a,s){return prepare$1(n,t)}))};Expression.Radians.prototype.simplifyInternal=function(t){return new Expression.Radians(prepare$1(this.value,t))};Expression.Comma.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).transformComma(prepare$1(this.b,t))};Expression.Derivative.prototype.simplifyInternal=function(t){return prepare$1(this.symbol,t).derivative(this.variable)};Expression.prototype.simplify=function(){return this};NonSimplifiedExpression.prototype.simplify=function(){return this.e.simplify().simplifyInternal(this).simplifyExpression()};NonSimplifiedExpression.prototype.toString=function(t){return this.e.toString(t)};NonSimplifiedExpression.prototype.equals=function(t){return this.simplify().equals(t.simplify())};//!
NonSimplifiedExpression.prototype.unwrap=function(){return this.e};Expression.Negation.prototype.simplifyInternal=function(t){return prepare$1(this.b,t).negate()};Expression.Subtraction.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).subtract(prepare$1(this.b,t))};NonSimplifiedExpression.prototype.isUnaryPlusMinus=function(){return this.e.isUnaryPlusMinus()};NonSimplifiedExpression.prototype.getPrecedence=function(){return this.e.getPrecedence()};Expression.ElementWisePower.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).elementWisePower(prepare$1(this.b,t))};Expression.Factorial.prototype.simplifyInternal=function(t){return prepare$1(this.n,t).factorial()};NonSimplifiedExpression.prototype.getId=function(){return"e"+this.id.toString()};Expression.prototype.getIds=function(){return""};Expression.BinaryOperation.prototype.getIds=function(){var t=this.a.getIds(),n=this.b.getIds();return t===""?n:n===""?t:t+", "+n};NonSimplifiedExpression.prototype.getIds=function(){var t=this.getId(),n=this.e.getIds();return t===""?n:n===""?t:t+", "+n};NonSimplifiedExpression.prototype.isNegative=function(){return!1};NonSimplifiedExpression.prototype.negateCarefully=function(){return new NonSimplifiedExpression(this.e.negateCarefully())};NonSimplifiedExpression.prototype.isRightToLeftAssociative=function(){return this.e.isRightToLeftAssociative()};NonSimplifiedExpression.prototype.isExact=function(){return this.e.isExact()};Expression.DecimalFraction=function(t,n,a,s){this.integer=t,this.transient=n,this.repetend=a,this.exponent=s};Expression.DecimalFraction.prototype=Object.create(Expression.prototype);Expression.DecimalFraction.prototype.getPrecedence=function(){return 1e3};Expression.DecimalFraction.prototype.simplifyInternal=function(){return ExpressionParser._getDecimalFraction(this.integer,this.transient,this.repetend,this.exponent)};Expression.DecimalFraction.prototype.toString=function(){return(this.integer||"0")+"."+(this.transient||"")+(this.repetend!=null?"("+this.repetend+")":"")+(this.exponent!=null?"E"+this.exponent:"")};NonSimplifiedExpression.prototype.augment=function(t){return new NonSimplifiedExpression(new Expression.AugmentedMatrix(this,t))};Expression.AugmentedMatrix.prototype.simplifyInternal=function(t){return prepare$1(this.a,t).augment(prepare$1(this.b,t))};Expression.NonSimplifiedExpression=NonSimplifiedExpression;function SimpleFloat(t,n){this.significand=t,this.exponent=n}SimpleFloat.create=function(t){var n=t.getNumerator(),a=t.getDenominator();if(!(n instanceof Expression.Integer)||!(a instanceof Expression.Integer))throw new TypeError;var s=0;if(a!==Expression.ONE&&(s=a.bitLength()-1,!Expression.TWO._pow(s).equals(a)))throw new TypeError;return new SimpleFloat(n,0-s)};SimpleFloat.prototype.toExpression=function(){return this.significand.multiply(this.exponent>=0?Expression.TWO._pow(this.exponent):Expression.TWO._pow(-this.exponent).inverse())};SimpleFloat.prototype.multiply=function(t){return new SimpleFloat(this.significand.multiply(t.significand),this.exponent+t.exponent)};SimpleFloat.prototype.add=function(t){const n=Math.min(this.exponent,t.exponent);return new SimpleFloat(this.significand.leftShift(this.exponent-n).add(t.significand.leftShift(t.exponent-n)),n)};SimpleFloat.prototype.negate=function(){return new SimpleFloat(this.significand.negate(),this.exponent)};SimpleFloat.prototype.sign=function(){return this.significand.sign()};SimpleFloat.prototype.toString=function(){return this.significand.toString()+"*2**"+this.exponent};SimpleFloat.prototype.round=function(t,n){if(this.exponent!==0-n){if(t==="floor"){var a=new SimpleFloat(this.significand.leftShift(this.exponent+n),0-n);if(a.add(this.negate()).sign()>0)throw new Error;return a}if(t==="ceil"){var a=new SimpleFloat(this.significand.negate().leftShift(this.exponent+n).negate(),0-n);if(a.add(this.negate()).sign()<0)throw new Error;return a}throw new RangeError}return this};var isRational=function(t){return t.getNumerator()instanceof Expression.Integer&&t.getDenominator()instanceof Expression.Integer},isPowerOf2=function(t){return Expression.TWO._pow(t.bitLength()-1).equals(t)};function SimpleInterval(t,n){if(!(t instanceof SimpleFloat)||!(n instanceof SimpleFloat)||t.add(n.negate()).sign()>0)throw new TypeError;this.a=t,this.b=n}SimpleInterval.from=function(t){return new SimpleInterval(SimpleFloat.create(t.a),SimpleFloat.create(t.b))};SimpleInterval.prototype.toExpressionsInterval=function(){return{a:this.a.toExpression(),b:this.b.toExpression()}};SimpleInterval.prototype.negate=function(){return new SimpleInterval(this.b.negate(),this.a.negate())};SimpleInterval.prototype.add=function(t){return new SimpleInterval(this.a.add(t.a),this.b.add(t.b))};SimpleInterval.prototype.multiply=function(t){var n=function(j){return j.sign()};const a=function(j,Z,W,J){return new SimpleInterval(j.multiply(Z),W.multiply(J))},s=this.a,l=this.b,u=t.a,c=t.b,p=n(s),d=n(l),x=n(u),_=n(c);if(p>=0)return x>=0?a(s,u,l,c):_<=0?a(l,u,s,c):a(l,u,l,c);if(d<=0)return _<=0?a(l,c,s,u):x>=0?a(s,c,l,u):a(s,c,s,u);if(x>=0)return a(s,c,l,c);if(_<=0)return a(l,u,s,u);const S=s.multiply(u),T=l.multiply(u),A=s.multiply(c),R=l.multiply(c);var D=function(j,Z){return j.subtract(Z).sign()<0?j:Z},O=function(j,Z){return j.subtract(Z).sign()<0?Z:j};const F=D(D(S,T),D(A,R)),z=O(O(S,T),O(A,R));return new SimpleInterval(F,z)};SimpleInterval.prototype.scale=function(t){return this.multiply(SimpleInterval.from({a:t,b:t}))};SimpleInterval.prototype.inverse=function(t){var n=function(c){return c.sign()};if(n(this.a)<0&&n(this.b)>0)throw new TypeError;if(t==null){debugger;throw new TypeError}var a=this.toExpressionsInterval();//!TODO: REMOVE
var s=Expression.TWO._pow(t+Math.max(a.b.getNumerator().abs().bitLength(),a.a.getNumerator().abs().bitLength())),l=function(c,p,d){if(d==="floor")return p.sign()<0&&(c=c.negate(),p=p.negate()),c.sign()>=0?c.truncatingDivide(p):c.add(Expression.ONE).truncatingDivide(p).subtract(Expression.ONE);if(d==="ceil")return l(c.negate(),p,"floor").negate();throw new TypeError},u=function(c,p,d){return l(c,p.getNumerator(),d).divide(c).multiply(p.getDenominator())};return SimpleInterval.from({a:u(s,a.b,"floor"),b:u(s,a.a,"ceil")})};SimpleInterval.prototype._pow=function(t){return t%2===0?t===0?SimpleInterval.from({a:Expression.ONE,b:Expression.ONE}):this.multiply(this)._pow(t/2):new SimpleInterval(this.a._pow(t),this.b._pow(t))};SimpleInterval.prototype.toString=function(){return"["+this.a.toString()+";"+this.b.toString()+"]"};SimpleInterval.prototype.round=function(t){return new SimpleInterval(this.a.round("floor",t),this.b.round("ceil",t))};const intersection=function(t,n){var a=function(u,c){return u.subtract(c).getNumerator().sign()},s=function(u,c){return a(u,c)<0?c:u},l=function(u,c){return a(u,c)<0?u:c};return a(n.a,t.b)>0||a(t.a,n.b)>0?null:{a:s(t.a,n.a),b:l(t.b,n.b)}},toSimpleInterval=function(t,n){if(t instanceof Expression.Integer)return SimpleInterval.from({a:t,b:t});if(t instanceof Expression.BinaryOperation){var a=toSimpleInterval(t.a,n),s=toSimpleInterval(t.b,n),l=t.getS();if(l==="+")return a.add(s);if(l==="-")return a.add(s.negate());if(l==="*")return a.multiply(s);if(l==="/")return a.multiply(s.inverse(n));if(l==="^"){if(t.b instanceof Expression.Integer){var u=t.b.toBigInt();return a._pow(u)}}else debugger}else if(t instanceof Expression.NthRoot){const _=t.n;if(console.assert(_>=2&&_%1===0),t.a instanceof Expression.Integer&&t.a.sign()>0){var a=t.a,c=Expression.TWO._pow(n),p=a.multiply(c._pow(_))._integerNthRoot(_);return SimpleInterval.from({a:p.divide(c),b:p.add(Expression.ONE).divide(c)})}var a=toSimpleInterval(t.a,n);if(_%2===0)for(var d=2;a.a.sign()<0&&a.b.sign()>0;)a=toSimpleInterval(t.a,n*d),d*=2;var x=function(T,A,R){var D=Expression.TWO._pow(n),O=R==="floor"?T.getNumerator().sign()>=0?Expression.ZERO:Expression.ONE.negate():T.getNumerator().sign()<0?Expression.ZERO:Expression.ONE;return T.getNumerator().multiply(T.getDenominator()._pow(A-1)).multiply(D._pow(A))._integerNthRoot(A).add(O).divide(D.multiply(T.getDenominator()))};return a=a.toExpressionsInterval(),SimpleInterval.from({a:x(a.a,_,"floor"),b:x(a.b,_,"ceil")})}if(t instanceof PolynomialRoot||t instanceof Expression.PolynomialRootSymbol)return SimpleInterval.from(t.toDecimal(n));if(t instanceof Expression.ExpressionPolynomialRoot)return SimpleInterval.from(t.root.toDecimal(n));debugger;throw new TypeError("?")};function Helper(t){this.squareFreeFactors=[];var n=null;const a=Polynomial$1.of(Expression.ONE);do n=t.squareFreeFactors(),n.a1.equals(a)||this.squareFreeFactors.push(n.a1),n.a0.getDegree()!==0?t=n.a0:t=null;while(t!=null)}Helper.prototype.calcAt=function(t){var n=Expression.ONE;for(var a of this.squareFreeFactors)n=n.multiply(a.calcAt(t));return n};Helper.prototype.numberOfRoots=function(t){var n=0,a=[];for(var s of this.squareFreeFactors){var l=s.numberOfRoots(t.toExpressionsInterval());n+=l,l>0&&a.push(s)}return this.squareFreeFactors=a,n};Helper.get=function(t,n){return t.squareFreeFactors.length===1?t.squareFreeFactors[0]:null};var calculateNewInterval=function(t,n,a){if(!t.hasIntegerCoefficients())throw new RangeError("just a check");t=new Helper(t);//!?!?TODO: REMOVE
var s=8,l=n(s);for(l=l.round(s);l.a.sign()!==l.b.sign()&&!t.calcAt(Expression.ZERO).equals(Expression.ZERO)||t.numberOfRoots(l)>1;)if(s*=2,l=n(s),l=l.round(s),s>1024)throw new Error;var u=l;return t=Helper.get(t,l),new PolynomialRoot(t,u.toExpressionsInterval(),a)};function PolynomialRoot(t,n,a={}){if(!t.hasIntegerCoefficients())throw new TypeError;if(t.getLeadingCoefficient().sign()<0)return new PolynomialRoot(t.negate(),n);var s=t.getContent();if(!s.equals(Expression.ONE))return new PolynomialRoot(t.scale(s.inverse()),n);if(!a.skipFactorization){//!
var l=function(){const p=t._factorizeOverTheIntegers();for(let d=p.next().value;d!=null;d=p.next().value)if(d.numberOfRoots(n)!==0)return d;return null};let c=t.isSquareFreePolynomial()?l():t.factorize();if(c!=null&&!c.equals(t)){if(c.numberOfRoots(n)!==0)return new PolynomialRoot(c,n);var u=t.divideAndRemainder(c,"throw").quotient;return new PolynomialRoot(u,n)}}if(n instanceof SimpleInterval)throw new TypeError;if(n.a.subtract(n.b).getNumerator().sign()>0)throw new TypeError;if(!a.skipFactorization){//!
if(t.numberOfRoots(n)!==1)throw new TypeError}if(!t.getContent().equals(Expression.ONE))throw new TypeError;this.polynomial=t,this.interval=n}PolynomialRoot.prototype.toDecimal=function(t){return t<=0?this.interval:this.polynomial.getZero(this.interval,t)};PolynomialRoot.prototype.toString=function(){return"[root of "+this.polynomial+" near "+this.interval.a.add(this.interval.b).divide(Expression.TWO).toString()+"]"};PolynomialRoot.prototype.scale=function(t){var n=this.polynomial._scaleRoots(t).primitivePart();if(!isRational(t)){var a=this;return n=toPolynomialWithIntegerCoefficients(n),calculateNewInterval(n,function(l){return toSimpleInterval(a,l).multiply(toSimpleInterval(t,l))})}if(!isPowerOf2(t.getDenominator())){var a=this;return calculateNewInterval(n,function(u){return toSimpleInterval(a,u).multiply(toSimpleInterval(t,u))})}var s=SimpleInterval.from(this.interval).scale(t).toExpressionsInterval();return new PolynomialRoot(n,s,{skipFactorization:!0})};PolynomialRoot.prototype.translate=function(t){var n=this.polynomial._translateRoots(t).primitivePart(),a=this;return isRational(t)?calculateNewInterval(n,function(s){return toSimpleInterval(a,s).add(toSimpleInterval(t,s))},{skipFactorization:!0}):(n=toPolynomialWithIntegerCoefficients(n),calculateNewInterval(n,function(s){return toSimpleInterval(a,s).add(toSimpleInterval(t,s))}))};PolynomialRoot.prototype.multiply=function(t){var n=this;{let p=Math.gcd(n.polynomial.getGCDOfTermDegrees(),t.polynomial.getGCDOfTermDegrees());if(p>1){var a=n._pow(p).multiply(t._pow(p))._nthRoot(p);return p%2===0&&n.sign()*t.sign()<0&&(a=a.negate()),a}}const s=new Expression.Polynomial(Polynomial$1.of(Expression.ONE).shift(1)),l=p=>new Expression.Polynomial(Polynomial$1.of(p));var u=t.polynomial._exponentiateRoots(-1).map(l)._scaleRoots(s),c=Polynomial$1.resultant(n.polynomial.map(l),u).polynomial.primitivePart();return calculateNewInterval(c,function(p){return toSimpleInterval(n,p).multiply(toSimpleInterval(t,p))})};PolynomialRoot.prototype.add=function(t){var n=this;if(n.polynomial.isEven()&&n.polynomial.equals(t.polynomial)&&n.equals(t.negate()))return new PolynomialRoot(Polynomial$1.of(Expression.ONE).shift(1),{a:Expression.ONE.negate(),b:Expression.ONE});const a=new Expression.Polynomial(Polynomial$1.of(Expression.ONE).shift(1)),s=c=>new Expression.Polynomial(Polynomial$1.of(c));var l=t.polynomial._scaleRoots(Expression.ONE.negate()).map(s)._translateRoots(a),u=Polynomial$1.resultant(n.polynomial.map(s),l).polynomial.primitivePart();return calculateNewInterval(u,function(c){return toSimpleInterval(n,c).add(toSimpleInterval(t,c))})};PolynomialRoot.prototype.negate=function(){return new PolynomialRoot(this.polynomial._scaleRoots(Expression.ONE.negate()),{b:this.interval.a.negate(),a:this.interval.b.negate()})};PolynomialRoot.prototype.inverse=function(){var t=this.polynomial._exponentiateRoots(-1);console.assert(this.interval.a.getNumerator().sign()===this.interval.b.getNumerator().sign());var n=this;return calculateNewInterval(t,function(a){return toSimpleInterval(n,a).inverse(a)})};PolynomialRoot.prototype.sign=function(){if(this.polynomial.getCoefficient(0).equals(Expression.ZERO)&&this.interval.a.getNumerator().sign()<=0&&this.interval.b.getNumerator().sign()>=0)return 0;if(this.interval.a.getNumerator().sign()>=0)return 1;if(this.interval.b.getNumerator().sign()<=0)return-1;throw new TypeError("should not happen")};PolynomialRoot.prototype._pow=function(t){var n=function(l,u,c){if(!(u>=0))throw new RangeError;if(u>Number.MAX_SAFE_INTEGER)throw new RangeError("NotSupportedError");return u<1?c:2*Math.floor(u/2)!==u?n(l,u-1,c.multiply(l)):n(l._pow(2),Math.floor(u/2),c)};if(t===0)return new PolynomialRoot(Polynomial$1.of(Expression.ONE.negate(),Expression.ONE),SimpleInterval.from({a:Expression.ZERO,b:Expression.TWO}));var a=Math.gcd(t,this.polynomial.getGCDOfTermDegrees());if(a===1)return n(this,t-1,this);if(a<t)return this._pow(a)._pow(t/a);var s=void 0;return t%2===0&&this.interval.b.getNumerator().sign()<=0?s={a:this.interval.b._pow(t),b:this.interval.a._pow(t)}:s={a:this.interval.a._pow(t),b:this.interval.b._pow(t)},new PolynomialRoot(this.polynomial._exponentiateRoots(t),s)};const $=function(){return new Expression.Symbol("")};PolynomialRoot.prototype._nthRoot=function(t){var n=this.polynomial._exponentiateRoots(1/t),a=this;return calculateNewInterval(n,function(s){return toSimpleInterval(Expression.NthRoot.makeRoot(new Expression.ExpressionPolynomialRoot(new LazyPolynomialRoot(Polynomial$1.of(Expression.ZERO,Expression.ONE),Polynomial$1.of(Expression.ONE),a)),t),s)})};PolynomialRoot.prototype.equals=function(t){if(this===t)return!0;if(this.polynomial.getDegree()!==t.polynomial.getDegree())return!1;if(this.polynomial.equals(t.polynomial)&&this.interval.a.equals(t.interval.a)&&this.interval.b.equals(t.interval.b))return!0;const n=intersection(this.interval,t.interval);if(n==null)return!1;if(this.polynomial.equals(t.polynomial)){const s=this.polynomial.numberOfRoots(n);if(s===1)return!0;if(s===0)return!1;throw new TypeError}if(Polynomial$1.polynomialGCD(this.polynomial,t.polynomial).getDegree()===0)return!1;var a=this.add(t.negate()).interval;return a.a.getNumerator().sign()<=0&&a.b.getNumerator().sign()>=0};PolynomialRoot._calculateNewInterval=calculateNewInterval;LazyPolynomialRoot._calculateNewInterval=calculateNewInterval;PolynomialRoot._toSimpleInterval=toSimpleInterval;LazyPolynomialRoot._toSimpleInterval=toSimpleInterval;var _isSimpleForUpgrade=function(t,n){if(t instanceof Expression.Multiplication){return!0;//!?
}return t instanceof Expression.Addition&&!(t.a instanceof Expression.Addition)?_isSimpleForUpgrade(t.a,n)&&_isSimpleForUpgrade(t.b,n):t.equals(n)||t instanceof Expression.Integer||t instanceof Expression.Complex||t instanceof Expression.NthRoot||t instanceof Expression.Exponentiation&&_isSimpleForUpgrade(t.a,n)&&t.b instanceof Expression.Integer||t instanceof Expression.Multiplication&&_isSimpleForUpgrade(t.a,n)&&_isSimpleForUpgrade(t.b,n)||t instanceof Expression.Division&&_isSimpleForUpgrade(t.getNumerator(),n)&&t.b instanceof Expression.Integer};PolynomialRoot._isSimpleForUpgrade=_isSimpleForUpgrade;LazyPolynomialRoot._isSimpleForUpgrade=_isSimpleForUpgrade;function LazyPolynomialRoot(t,n,a){if(!(t instanceof Polynomial$1))throw new TypeError;if(!(n instanceof Polynomial$1)||n.getDegree()!==0)throw new TypeError;if(!t._testCoefficients(s=>!(s instanceof Expression.Division)))throw new TypeError;console.assert(a instanceof PolynomialRoot),this._p1=t,this._p2=n,this._root=a}LazyPolynomialRoot.prototype.toDecimal=function(t){var n=function(d,x,_){for(var S=toSimpleInterval(Expression.ZERO,_),T=d.getDegree();T>=0;T--){S=S.multiply(x);var A=toSimpleInterval(d.getCoefficient(T),Math.max(1,_));S=S.add(A)}return S},a=toSimpleInterval(this._root,t),s=this._p1,l=this._p2,u=n(s,a,t),c=n(l,a,t),p=u.multiply(c.inverse(t));return p.toExpressionsInterval()};LazyPolynomialRoot.prototype.toString=function(){return"["+this.getAlphaExpression()+", where "+this._root+"]"};function makeExpressionWithPolynomialRoot(t,n,a){var s=a;if(n.getDegree()!==0||!(n.getCoefficient(0)instanceof Expression.Integer)){const x=n.modularInverse(a.polynomial).primitivePart(),_=n.multiply(x).divideAndRemainder(a.polynomial).remainder;if(n.getDegree()>0){var u=_.getContent().getDenominator();return makeExpressionWithPolynomialRoot(t.multiply(x).scale(u),_.scale(u),a)}}var l=function(x,_){if(!(_.getLeadingCoefficient()instanceof Expression.Integer)){var S=Expression.getConjugate(_.getLeadingCoefficient());return l(x.scale(S),_.scale(S))}var T=x.getContent().gcd(_.getContent());return T.equals(Expression.ONE)||(x=x.scale(T.inverse()),_=_.scale(T.inverse())),[x,_]};if(t.equals(Polynomial$1.ZERO))return[Polynomial$1.ZERO,Polynomial$1.of(Expression.ONE)];if(t.getDegree()===0&&n.getDegree()===0)return l(t,n);//!
var u=function(x){return x.divideAndRemainder(s.polynomial).remainder};t=u(t),n=u(n);var c=t.map(x=>x.getDenominator().inverse()).getContent().getDenominator();if(t=t.scale(c),n=n.scale(c),!t.hasIntegerCoefficients()){var p=!0;if(a instanceof PolynomialRoot){var d=new LazyPolynomialRoot(t,Polynomial$1.of(Expression.ONE),a).toDecimal(53);//!new - trying to optimize (!)
p=d.b.sign()>=0&&d.a.sign()<=0}if(p&&t.hasRoot(s))return[Polynomial$1.ZERO,Polynomial$1.of(Expression.ONE)]}return l(t,n)}PolynomialRoot._makeExpressionWithPolynomialRoot=makeExpressionWithPolynomialRoot;LazyPolynomialRoot._makeExpressionWithPolynomialRoot=makeExpressionWithPolynomialRoot;function simplifyExpressionWithPolynomialRoot(t,n,a){const s=makeExpressionWithPolynomialRoot(t,n,a);return new LazyPolynomialRoot(s[0],s[1],a)}PolynomialRoot.create=function(t,n,a){return new PolynomialRoot(t,n,a)};LazyPolynomialRoot.create=function(t,n,a){return fromRoot(new PolynomialRoot(t,n,a))};function fromRoot(t){return new LazyPolynomialRoot(Polynomial$1.of(Expression.ZERO,Expression.ONE),Polynomial$1.of(Expression.ONE),t)}LazyPolynomialRoot.prototype.scale=function(t){console.assert(Expression.isRealAlgebraicNumber(t));var n=this._p1.scale(t.getNumerator()),a=this._p2.scale(t.getDenominator());return t instanceof Expression.Integer?new LazyPolynomialRoot(n,a,this._root):simplifyExpressionWithPolynomialRoot(n,a,this._root)};LazyPolynomialRoot.prototype.translate=function(t){return console.assert(Expression.isRealAlgebraicNumber(t)),simplifyExpressionWithPolynomialRoot(this._p1.scale(t.getDenominator()).add(this._p2.scale(t.getNumerator())),this._p2.scale(t.getDenominator()),this._root)};var toPolynomialWithIntegerCoefficients=function(t){if(!t.hasIntegerCoefficients()){var n=new Expression.Symbol("$$"),a=t.calcAt(n),s=Expression.getConjugateExpression(a);if(s!=null&&!s.equals(a))return Polynomial$1.toPolynomial(s,n)}return t};function upgrade(t,n,a){if(n.getDegree()===1&&n.getCoefficient(0).equals(Expression.ZERO)&&n.getCoefficient(1).equals(Expression.ONE)&&a.getDegree()===0)return a.getCoefficient(0).equals(Expression.ONE)?t:t.scale(a.getCoefficient(0).inverse());if(n.equals(Polynomial$1.ZERO))return PolynomialRoot.create(Polynomial$1.of(Expression.ZERO,Expression.ONE),{a:Expression.ZERO,b:Expression.ZERO});if(n.getDegree()===0&&a.getDegree()===0&&a.getCoefficient(0).equals(Expression.ONE)){const p=n.getCoefficient(0);return PolynomialRoot.create(Polynomial$1.of(p.negate(),Expression.ONE),{a:p,b:p})}if(a.getDegree()===0&&a.getCoefficient(0).equals(Expression.ONE)&&n.getDegree()===n.getGCDOfTermDegrees()&&n.getLeadingCoefficient().equals(Expression.ONE)&&n.getCoefficient(0).equals(Expression.ZERO)&&n.getDegree()===t.polynomial.getGCDOfTermDegrees())return t._pow(n.getDegree());if(a.getDegree()===0&&a.getCoefficient(0).equals(Expression.ONE)&&n.getDegree()===1&&n.getCoefficient(1).equals(Expression.ONE))return t.translate(n.getCoefficient(0));if(a.getDegree()===0&&n.getDegree()===1&&n.getCoefficient(0).equals(Expression.ZERO))return t.scale(n.getCoefficient(1).divide(a.getCoefficient(0)));var s=Expression.ONE;a.getDegree()===0&&a.hasIntegerCoefficients()&&(s=a.getLeadingCoefficient(),a=Polynomial$1.of(Expression.ONE));var l=n.subtract(Polynomial$1.of(new Expression.Symbol("")).multiply(a));l=toPolynomialWithIntegerCoefficients(l);const u=p=>new Expression.Polynomial(Polynomial$1.of(p));l=l.map(p=>new Expression.Polynomial(Polynomial$1.toPolynomial(p,new Expression.Symbol(""))));var c=Polynomial$1.resultant(l,t.polynomial.map(u)).polynomial.primitivePart();return s!==Expression.ONE&&(c=c._scaleRoots(s.inverse()).primitivePart()),PolynomialRoot._calculateNewInterval(c,function(p){return toSimpleInterval(new Expression.ExpressionPolynomialRoot(new LazyPolynomialRoot(n,a.scale(s),t)),p)})}LazyPolynomialRoot.prototype.multiply=function(t){if(this._root.equals(t._root))return simplifyExpressionWithPolynomialRoot(this._p1.multiply(t._p1),this._p2.multiply(t._p2),this._root);var n=upgrade(this._root,this._p1,this._p2).multiply(upgrade(t._root,t._p1,t._p2));return fromRoot(n)};LazyPolynomialRoot.prototype.add=function(t){if(this._root.equals(t._root)){var n=t._p2.getContent().gcd(this._p2.getContent());return simplifyExpressionWithPolynomialRoot(this._p1.multiply(t._p2.scale(n.inverse())).add(t._p1.multiply(this._p2.scale(n.inverse()))),this._p2.scale(n.inverse()).multiply(t._p2.scale(n.inverse())).scale(n),this._root)}var a=upgrade(this._root,this._p1,this._p2).add(upgrade(t._root,t._p1,t._p2));return fromRoot(a)};LazyPolynomialRoot.prototype.negate=function(){return new LazyPolynomialRoot(this._p1.negate(),this._p2,this._root)};LazyPolynomialRoot.prototype.inverse=function(){return simplifyExpressionWithPolynomialRoot(this._p2,this._p1,this._root)};LazyPolynomialRoot.prototype.sign=function(){if(this._p1.equals(Polynomial$1.ZERO))return 0;let t=1;for(;;){var n=this.toDecimal(t);if(n.a.getNumerator().sign()>=0)return 1;if(n.b.getNumerator().sign()<=0)return-1;t*=2,t>8&&console.debug("hm...")}};LazyPolynomialRoot.prototype._pow=function(t){return simplifyExpressionWithPolynomialRoot(this._p1._pow(t),this._p2._pow(t),this._root)};LazyPolynomialRoot.prototype._nthRoot=function(t){if(this._p2.getDegree()===0&&this._p2.getCoefficient(0).equals(Expression.ONE)&&this._p1.getDegree()===1&&this._p1.getCoefficient(0).equals(Expression.ZERO)&&this._p1.getCoefficient(1).equals(Expression.ONE)){var n=this._root._nthRoot(t);return new LazyPolynomialRoot(Polynomial$1.of(Expression.ZERO,Expression.ONE),Polynomial$1.of(Expression.ONE),n)}var a=function(u,c){var p=u.getSquareFreePolynomial();return p._pow(c).equals(u)?p:null},s=a(this._p1,t);const l=this._p2.getCoefficient(0);return s!=null&&this._p2.getDegree()===0&&l instanceof Expression.Integer&&l.sign()>0?simplifyExpressionWithPolynomialRoot(s,Polynomial$1.of(l._nthRoot(t)),this._root):this.upgrade()._nthRoot(t)};LazyPolynomialRoot.prototype.equals=function(t){if(this._root.equals(t._root))return this._p1.equals(t._p1)&&this._p2.equals(t._p2)||this.add(t.negate()).sign()===0;//!TODO: remove (hack to avoid error)
if(toDecimalStringInternal(new Expression.ExpressionPolynomialRoot(this),{significantDigits:3})!==toDecimalStringInternal(new Expression.ExpressionPolynomialRoot(t),{significantDigits:3}))return!1;//!
var n=upgrade(this._root,this._p1,this._p2).equals(upgrade(t._root,t._p1,t._p2));return n};PolynomialRoot.prototype.upgrade=function(){return this};LazyPolynomialRoot.prototype.upgrade=function(){return fromRoot(upgrade(this._root,this._p1,this._p2))};PolynomialRoot.prototype._calc=function(t){return upgrade(this,t.calcAt($()))};LazyPolynomialRoot.prototype._calc=function(t){var n=t.calcAt(this.getAlphaExpression());return simplifyExpressionWithPolynomialRoot(Polynomial$1.toPolynomial(n.getNumerator(),$()),Polynomial$1.toPolynomial(n.getDenominator(),$()),this._root)};PolynomialRoot.prototype.getAlpha=function(t){return{polynomial:this.polynomial,interval:this.interval}};LazyPolynomialRoot.prototype.getAlpha=function(t){return this._root.getAlpha()};PolynomialRoot.prototype.getAlphaExpression=function(t){return $()};LazyPolynomialRoot.prototype.getAlphaExpression=function(t){return this._p1.calcAt($()).divide(this._p2.calcAt($()))};PolynomialRoot.prototype.getAlphaPolynomial=function(t){return Polynomial$1.of(Expression.ZERO,Expression.ONE)};LazyPolynomialRoot.prototype.getAlphaPolynomial=function(t){return[this._p1,this._p2]};globalThis.testables=globalThis.testables||{};globalThis.testables.LazyPolynomialRoot=LazyPolynomialRoot;globalThis.testables.PolynomialRoot=PolynomialRoot;globalThis.testables.toSimpleInterval=toSimpleInterval;globalThis.testables.SimpleInterval=SimpleInterval;console.assert(Object.keys(PolynomialRoot).join(" ")===Object.keys(LazyPolynomialRoot).join(" ")),console.assert(Object.keys(PolynomialRoot.prototype).join(" ")===Object.keys(LazyPolynomialRoot.prototype).join(" ")),console.assert(PolynomialRoot.prototype.__proto__===LazyPolynomialRoot.prototype.__proto__);Expression.PolynomialRootSymbol=function(){throw new TypeError};function ExpressionWithPolynomialRoot(){throw new TypeError}Expression.ExpressionWithPolynomialRoot=ExpressionWithPolynomialRoot;function ExpressionPolynomialRoot(t){const n=t.getAlpha(),[a,s]=t.getAlphaPolynomial(),l=n.polynomial,u=n.interval;if(a.getDegree()<=0&&s.getDegree()<=0)return a.getCoefficient(0).divide(s.getCoefficient(0));if(l.getDegree()===1||l.getDegree()===2||l.getDegree()===4&&!1||l.getDegree()===l.getGCDOfTermDegrees()){var c=l.getDegree()===l.getGCDOfTermDegrees()&&l.getDegree()%2===1?[l.getCoefficient(0).negate().divide(l.getLeadingCoefficient())._nthRoot(l.getDegree())]:l.getroots();for(var p of c)if(!Expression.has(p,ExpressionPolynomialRoot)&&(Expression._isPositive(p.subtract(u.a))&&Expression._isPositive(p.subtract(u.b).negate())||p.equals(u.b)||p.equals(u.a))){if(a.getDegree()===1&&a.getCoefficient(0).equals(Expression.ZERO)&&a.getCoefficient(1).equals(Expression.ONE)&&s.getDegree()===0&&s.getCoefficient(0).equals(Expression.ONE))return p;var d=a.calcAt(p),x=s.calcAt(p);return d.divide(x)}}if(l.getDegree()<3)throw new TypeError;if(l.getDegree()/l.getGCDOfTermDegrees()>64*2*32)throw new Error;Expression.Symbol.call(this,null),this.root=t,Object.freeze(this)}ExpressionPolynomialRoot.prototype=Object.create(Expression.Symbol.prototype);ExpressionPolynomialRoot.create=function(t,n,a){return new ExpressionPolynomialRoot(LazyPolynomialRoot.create(t,n,a))};ExpressionPolynomialRoot.prototype.multiplyInteger=function(t){return t.multiplyPolynomialRoot(this)};ExpressionPolynomialRoot.prototype.multiply=function(t){return t.multiplyPolynomialRoot(this)};ExpressionPolynomialRoot.prototype.multiplyExpression=function(t){return t.equals(Expression.ONE)?this:Expression.isConstant(t)&&!Expression.has(t,Expression.Complex)?this.multiply(t):Expression.Symbol.prototype.multiplyExpression.call(this,t)};ExpressionPolynomialRoot.prototype.multiplyAddition=function(t){return Expression.isConstant(t)&&!Expression.has(t,Expression.Complex)?this.multiplyExpression(t):Expression.Symbol.prototype.multiplyAddition.call(this,t)};ExpressionPolynomialRoot.prototype.multiplyComplex=function(t){return this.multiply(t)};Expression.prototype.multiplyPolynomialRoot=function(t){if(Expression.isRealAlgebraicNumber(this)&&!Expression.has(this,Expression.ExpressionWithPolynomialRoot)){const n=this;return n.equals(Expression.ZERO)?n:n.equals(Expression.ONE)?t:new ExpressionPolynomialRoot(t.root.scale(n))}return this instanceof Expression.Complex&&!this.imaginary.equals(Expression.ONE)?this.imaginary.multiply(t).multiply(Expression.I).add(this.real.multiply(t)):this.multiplyExpression(t)};ExpressionPolynomialRoot.prototype._pow=function(t){return new ExpressionPolynomialRoot(this.root._pow(t))};ExpressionPolynomialRoot.prototype.pow=function(t){return t instanceof Expression.Integer?this._pow(t.toNumber()):t instanceof Expression.Division&&t.getDenominator()instanceof Expression.Integer?this._nthRoot(t.getDenominator().toNumber()).pow(t.getNumerator()):Expression.Symbol.prototype.pow.call(this,t)};ExpressionPolynomialRoot.prototype.multiplyPolynomialRoot=function(t){var n=this;return new ExpressionPolynomialRoot(t.root.multiply(n.root))};ExpressionPolynomialRoot.prototype.add=function(t){return t.addPolynomialRoot(this)};ExpressionPolynomialRoot.prototype.addPolynomialRoot=function(t){var n=this;return new ExpressionPolynomialRoot(t.root.add(n.root))};Expression.prototype.addPolynomialRoot=function(t){if(Expression.isRealAlgebraicNumber(this)&&!Expression.has(this,Expression.ExpressionWithPolynomialRoot)){const n=this;return n.equals(Expression.ZERO)?t:new ExpressionPolynomialRoot(t.root.translate(n))}return this.addExpression(t)};ExpressionPolynomialRoot.prototype.addExpression=function(t){return this.add(t);//!?
};ExpressionPolynomialRoot.prototype.divide=function(t){return t instanceof Expression.Exponentiation?t.divideExpression(this):t instanceof Expression.Multiplication&&t.a instanceof Expression.Integer&&t.b instanceof Expression.Exponentiation?this.multiply(t.a.inverse()).divide(t.b):this.multiply(t.inverse())};ExpressionPolynomialRoot.prototype.divideExpression=function(t){return t.equals(Expression.ZERO)?t:t.multiply(this.inverse())};ExpressionPolynomialRoot.prototype.inverse=function(){return new ExpressionPolynomialRoot(this.root.inverse())};ExpressionPolynomialRoot.prototype.sign=function(){return this.root.sign()};var toRadicalExpression=function(t){t=t.upgrade();const n=t.getAlpha();if(n.polynomial.getDegree()===1)return n.polynomial.getroots()[0];var a=n.polynomial.getGCDOfTermDegrees();if(a>1){const u=toRadicalExpression(t._pow(a));if(u!=null){const c=Expression.NthRoot.makeRoot(u,a);return a%2===1||t.sign()>0?c:new Expression.Negation(c)}}var s=n.polynomial._getShiftToDepressed();if(!s.equals(Expression.ZERO)){var l=toRadicalExpression(t.translate(s));if(l!=null)return new Expression.Addition(l,s.negate())}return null};function EmptyMap(){}EmptyMap.prototype.has=function(){return!1};EmptyMap.prototype.set=function(){};EmptyMap.prototype.get=function(){return null};function weakMap(){return typeof WeakMap<"u"?new WeakMap:new EmptyMap}const cache2rounding=weakMap(),DEFAULT_ROUNDING={fractionDigits:3};ExpressionPolynomialRoot.prototype._toDecimalString=function(t){t=t||{};const n=t.rounding||DEFAULT_ROUNDING;let a=cache2rounding.get(n);a==null&&(a=weakMap(),cache2rounding.set(n,a));var s=a.get(this);return s!=null||(s=toDecimalStringInternal$1(this,n),a.set(this,s)),s};ExpressionPolynomialRoot.prototype.toString=function(t){if(t=t||null,t==null||t.rounding==null){var n=this._toRadicalExpression();if(n!=null)return n.toString(t)}return this._toDecimalString(t)};ExpressionPolynomialRoot.prototype.equals=function(t){return t instanceof ExpressionPolynomialRoot?this.root.equals(t.root):t instanceof Expression.Integer&&t.equals(Expression.ZERO)||!Expression.isRealAlgebraicNumber(t)?!1:this.subtract(t).equals(Expression.ZERO)};ExpressionPolynomialRoot.prototype.compare4MultiplicationComplex=function(t){return-1};ExpressionPolynomialRoot.prototype.compare4MultiplicationNthRoot=function(t){return 0};ExpressionPolynomialRoot.prototype.compare4Multiplication=function(t){return t instanceof Expression.Complex||t instanceof Expression.Integer?1:t instanceof ExpressionPolynomialRoot||t instanceof Expression.NthRoot?0:t instanceof Expression.Symbol?-1:Expression.Symbol.prototype.compare4Multiplication.call(this,t)};ExpressionPolynomialRoot.prototype.compare4MultiplicationSymbol=function(t){return 1};ExpressionPolynomialRoot.prototype.compare4Addition=function(t){return t instanceof ExpressionPolynomialRoot?0:t instanceof Expression.Symbol?1:t instanceof Expression.NthRoot||Expression.isRealAlgebraicNumber(t)?0:Expression.Symbol.prototype.compare4Addition.call(this,t)};ExpressionPolynomialRoot.prototype.compare4AdditionSymbol=function(t){return-1};ExpressionPolynomialRoot.prototype.compare4AdditionNthRoot=function(t){return 0};ExpressionPolynomialRoot.prototype._nthRoot=function(t){if(this.root.sign()<0&&t%2===0){if(t!==2)throw new RangeError("NotSupportedError");return Expression.I.multiply(this.negate()._nthRoot(t))}return new ExpressionPolynomialRoot(this.root._nthRoot(t))};ExpressionPolynomialRoot.prototype.upgrade=function(){return new ExpressionPolynomialRoot(this.root.upgrade())};ExpressionPolynomialRoot.prototype.isNegative=function(){return this.root.sign()<0};Expression.prototype.upgrade=function(){return this};ExpressionPolynomialRoot.prototype.isExact=function(){{var t=this._toRadicalExpression();if(t!=null)return!0}return!1};ExpressionPolynomialRoot.prototype.negate=function(){return new ExpressionPolynomialRoot(this.root.negate())};ExpressionPolynomialRoot.prototype.simplifyExpression=function(){return this};ExpressionPolynomialRoot.prototype.toMathML=function(t){if(t=t||null,t==null||t.rounding==null){var n=this._toRadicalExpression();if(n!=null)return n.toMathML(t)}return Expression._decimalToMathML(this._toDecimalString(t))};const cache=weakMap();ExpressionPolynomialRoot.prototype._toRadicalExpression=function(){if(cache.has(this))return cache.get(this);var t=this.root.getAlpha().polynomial;if(t.getDegree()/t.getGCDOfTermDegrees()<10&&LazyPolynomialRoot._isSimpleForUpgrade(this.root.getAlphaExpression(),new Expression.Symbol(""))){var n=toRadicalExpression(this.root);if(n!=null)return cache.set(this,n),n}cache.set(this,null)};ExpressionPolynomialRoot.prototype.getPrecedence=function(){{var t=this._toRadicalExpression();if(t!=null)return t.getPrecedence()}return 1e3};ExpressionPolynomialRoot.prototype.isRightToLeftAssociative=function(){return!0};ExpressionPolynomialRoot.prototype.isUnaryPlusMinus=function(){return!0};ExpressionPolynomialRoot.prototype._calc=function(t){return new ExpressionPolynomialRoot(this.root._calc(t))};Expression.ExpressionPolynomialRoot=ExpressionPolynomialRoot;Expression.toPolynomialRoot=function(t){var n=t instanceof Expression.NthRoot?t.a:t,a=t instanceof Expression.NthRoot?t.n:1,s=new Expression.Symbol("x");if(!(n.getDenominator()instanceof Expression.Integer))throw new TypeError;var l=Polynomial$1.toPolynomial(Expression.getConjugateExpression(s._pow(a).subtract(n).getNumerator()),s);if(l.getDegree()<=8){var u=l.factorize();if(u!=null&&u.getDegree()<l.getDegree()&&u.getDegree()===4){var c=Polynomial$1.polynomialGCD(u,Polynomial$1.toPolynomial(s._pow(a).subtract(n),s)).getroots();for(const x of c)if(x._pow(a).equals(n))return Expression._isPositive(x)||a%2!==0?x:x.negate()}}for(;l.getDegree()>0;){var u=l.factorize()||l;const _=a===2&&Expression.has(t.radicand,Expression.Complex);var p=u.getZeros(_);if(a%2===0&&p.length===2&&Expression._isPositive(p[1])&&Expression._isPositive(n))return p[1];for(var d of p)if((d.root!=null&&Expression._isPositive(d)||_&&Expression._isPositive(Expression.getComplexNumberParts(d).real))&&d._pow(a).equals(n))return d;l=l.divideAndRemainder(u,"throw").quotient}console.error(t.toString())};Polynomial$1.prototype.signVariations=function(){let t=0,n=0;for(let a=this.a.size-1;a>=0;a-=1){const s=this.a.coefficient(a).sign();s!==0&&(n===0?n=s:n!==s&&(n=s,t+=1))}return t};Polynomial$1.prototype._getNonNegativeRealRootIntervals=function(){const t=this.getPositiveRealRootsBound();if(t.equals(Expression.ZERO))return[];const n=this._scaleRoots(t.inverse()),a=(this.getCoefficient(0).equals(Expression.ZERO)?1:0)+this.signVariations(),s=function(l,u,c){const p=c.getCoefficient(0).equals(Expression.ZERO),x=(p?c.divideAndRemainder(Polynomial$1.of(Expression.ZERO,Expression.ONE),"throw").quotient:c)._exponentiateRoots(-1)._translateRoots(Expression.ONE.negate());let _=x.signVariations();if(_===1&&p){_=NaN;//!?
}if(_===0&&p)return[{a:l,b:l}];if(_===1&&x.getCoefficient(0).equals(Expression.ZERO)){_=NaN;//!?
}if(_===1)return[{a:l,b:u}];if(_!==0){var S=c._scaleRoots(Expression.TWO),T=l.add(u).divide(Expression.TWO),A=s(l,T,S);if(A.length>=a){return A;//!
}var R=S._translateRoots(Expression.ONE.negate()),D=s(T,u,R);return A.concat(D)}return[]};return s(Expression.ZERO,Expression.ONE,n).map(l=>({a:l.a.multiply(t),b:l.b.multiply(t)}))};Polynomial$1.prototype.getRootIntervals=function(){return this._scaleRoots(Expression.ONE.negate())._getNonNegativeRealRootIntervals().map(t=>({a:t.b.negate(),b:t.a.negate()})).reverse().concat(this._getNonNegativeRealRootIntervals())};Polynomial$1.prototype.getPositiveRealRootsBound=function(){let t=null;const n=this.getDegree(),a=this.getLeadingCoefficient();for(let s=0;s<=this.getDegree()-1;s+=1){const l=this.getCoefficient(s).negate().truncatingDivide(a);if(l.sign()>=0){const u=Expression.TWO.multiply(l._integerNthRoot(n-s).add(Expression.ONE));(t==null||t.compareTo(u)<0)&&(t=u)}}if(t==null)return Expression.ZERO;//!2020-12-19
t=Expression.TWO._pow(t.getNumerator().bitLength()-t.getDenominator().bitLength()+1);//!
return t};Polynomial$1.prototype.getZero=function(t,n){var a=function(Z,W){return W.compareTo(Expression.ZERO)<0&&(Z=Z.negate(),W=W.negate()),Z.compareTo(Expression.ZERO)>=0?Z.truncatingDivide(W):Z.add(Expression.ONE).truncatingDivide(W).subtract(Expression.ONE)},s=function(Z,W){var J=Z.getNumerator().multiply(W),en=Z.getDenominator();return a(J,en)};const l=function(Z){return Math.sign(Z.getNumerator().compareTo(Expression.ZERO))},u=Expression.TWO,c=Expression.pow(u,n);if(!(c instanceof Expression.Integer))throw new RangeError("epsilon^-1 is not an integer");var p=t.a,d=t.b;if(c.multiply(p.getDenominator().multiply(d.getNumerator()).subtract(d.getDenominator().multiply(p.getNumerator()))).compareTo(d.getDenominator().multiply(p.getDenominator()))>0){var x=n>=16/Math.log10(u.toNumber())?this.getZero(t,Math.floor(n/4)):t;p=x.a,d=x.b,this.getDegree();var _=this._scaleRoots(c);_=_.primitivePart();const Z=s(p,c).add(Expression.ONE),W=s(d,c);console.assert(Z.multiply(p.getDenominator()).subtract(p.getNumerator().multiply(c)).compareTo(Expression.ZERO)>=0),console.assert(W.multiply(d.getDenominator()).subtract(d.getNumerator().multiply(c)).compareTo(Expression.ZERO)<=0);let J=_.calcAt(Z),en=_.calcAt(W);const tn=l(en),Ct=l(J);if(Ct===0)return{a:Z.divide(c),b:Z.divide(c)};if(tn===0)return{a:W.divide(c),b:W.divide(c)};if(Ct===tn){if(Ct!==(l(this.calcAt(p))||l(this.calcAt(d).negate())||Ct))return{a:p,b:Z.divide(c)};if(tn!==l(this.calcAt(d)))return{a:W.divide(c),b:d};throw new RangeError}p=Z,d=W;for(var S=0,T=_.derive(),A=d.subtract(p);A.compareTo(Expression.ONE)>0;){var R=p.add(A.truncatingDivide(Expression.TWO));if(S%3!==2&&A.compareTo(p.abs())<0){var D=S%3===1?p:d,O=D===p?J:D===d?en:void 0,F=T.calcAt(D);F.equals(Expression.ZERO)||(D=D.subtract(O.truncatingDivide(F)),D.compareTo(p)<=0&&(D=p.add(Expression.ONE)),D.compareTo(d)>=0&&(D=d.subtract(Expression.ONE)),R=D)}S+=1;var z=_.calcAt(R),j=l(z);j===tn?(d=R,en=z):j===Ct?(p=R,J=z):(p=R,d=R,J=z,en=z),A=d.subtract(p)}p=p.divide(c),d=d.divide(c)}return{a:p,b:d}};Polynomial$1.prototype.hasRoot=function(t){var n=this;if(n.equals(Polynomial$1.ZERO))return!0;//!new 2021-02-20 (TODO: CHECK)
if(!n.hasIntegerCoefficients()&&n.hasComplexCoefficients())return n.map(S=>S instanceof Expression.Integer?S:S.real).hasRoot(t)&&n.map(S=>S instanceof Expression.Integer?Expression.ZERO:S.imaginary).hasRoot(t);//!
if(!n.hasIntegerCoefficients()&&!n.hasComplexCoefficients()&&!n._testCoefficients(S=>!Expression.has(S,Expression.Complex))&&n._testCoefficients(S=>Expression.isConstant(S)))return n.map(S=>Expression.getComplexNumberParts(S).real).hasRoot(t)&&n.map(S=>Expression.getComplexNumberParts(S).imaginary).hasRoot(t);var a=t.polynomial,s=null;//!
if(!n.hasIntegerCoefficients()){var l=new Expression.Symbol("~"),u=n.calcAt(l),c=Expression.getMultivariatePolynomial(u);c!=null&&!c.v.equals(l)&&c.v instanceof Expression.Symbol&&(s=Polynomial$1.polynomialGCD(Polynomial$1.toPolynomial(c.p.getContent(),l),a))}s==null&&(s=Polynomial$1.polynomialGCD(n,a));//!
if(s.getDegree()<1)return!1;var p=t.interval;if(!s.hasIntegerCoefficients()){var l=new Expression.Symbol("$$"),d=s.calcAt(l),x=Expression.getComplexNumberParts(d);x!=null&&!x.imaginary.equals(Expression.ZERO)&&(s=Polynomial$1.toPolynomial(x.real.subtract(x.imaginary.multiply(Expression.I)).multiply(d),l).getSquareFreePolynomial())}var _=s._translateRoots(p.a.negate()).signVariations()-s._translateRoots(p.b.negate()).signVariations();return _%2===1};Polynomial$1.prototype.numberOfRoots=function(t=null){if(!this.hasIntegerCoefficients())throw new RangeError;t==null&&(t={a:this._scaleRoots(Expression.ONE.negate()).getPositiveRealRootsBound().negate(),b:this.getPositiveRealRootsBound()});var n=this;t.a.equals(Expression.ZERO)||(n=n._scaleRoots(t.a.inverse())._translateRoots(Expression.ONE.negate()),t={a:Expression.ZERO,b:t.b.divide(t.a).subtract(Expression.ONE)},t.b.getNumerator().sign()<0&&(t={a:t.a,b:t.b.negate()},n=n._scaleRoots(Expression.ONE.negate()))),console.assert(t.a.equals(Expression.ZERO));for(var a=0;n.getCoefficient(a).equals(Expression.ZERO);)a+=1;if(a>1)throw new RangeError;return a>0&&(n=n.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(a),"throw").quotient),(a>0?1:0)+n._exponentiateRoots(-1)._scaleRoots(t.b)._translateRoots(Expression.ONE.negate())._getNonNegativeRealRootIntervals().length};Polynomial$1.prototype.getZeros=function(t=!1){if(this.getCoefficient(0).equals(Expression.ZERO)){if(this.getLeadingCoefficient().equals(Expression.ZERO))throw new TypeError;for(var n=0;this.getCoefficient(n).equals(Expression.ZERO);)n+=1;var l=this.divideAndRemainder(Polynomial$1.of(Expression.ONE).shift(n)).quotient.getZeros(t);return l.concat(new Array(n).fill(Expression.ZERO))}var a=this.getContent(),s=this.scale(a.getDenominator()).divideAndRemainder(Polynomial$1.of(a.getNumerator()),"throw").quotient,l=s.squareFreeFactors(),u=l.a0,c=l.a1;if(u.getDegree()!==0){for(var p=c.getZeros(t),d=u.getZeros(t),z=[],x=void 0,n=0;n<d.length;n+=1){var _=d[n];_!==x&&(z.push(_),x=_),z.push(_)}return p.concat(z)}var S=s;if(S.getDegree()===0)return[];//!
S=S.scale(S.getContent().inverse());//!
if(!s.hasIntegerCoefficients()){var T=function(ux){if(!ux.hasIntegerCoefficients()){var px=new Expression.Symbol("$$"),dx=ux.calcAt(px),mx=Expression.getConjugateExpression(dx);if(mx!=null&&!mx.equals(dx))return Polynomial$1.toPolynomial(mx,px);for(var gx=0;gx<ux.getDegree();gx+=1){var mx=ux.getCoefficient(gx);if(mx instanceof Expression.ExpressionPolynomialRoot){var Sx=mx.root.upgrade().getAlpha(),Ex=new Expression.Symbol("$a"),Cx=Polynomial$1.toPolynomial(ux.map(Rx=>Rx===mx?Ex:Rx).calcAt(new Expression.Symbol("$$")),Ex),Ax=Sx.polynomial,Tx=Polynomial$1.toPolynomial(Polynomial$1.resultant(Cx,Ax),new Expression.Symbol("$$")).primitivePart();return T(Tx)}}}return ux};const _x=T(s);if(!_x.equals(s)){var z=[],l=_x.getZeros(t);console.time("checking roots");for(var n=0;n<l.length;n+=1){var _=l[n];(_ instanceof ExpressionPolynomialRoot&&_.root.getAlphaExpression().equals(new Expression.Symbol(""))?s.hasRoot(_.root.getAlpha()):_ instanceof ExpressionWithPolynomialRoot&&_.e===_.root?s.hasRoot(_.root):(_ instanceof ExpressionWithPolynomialRoot?_._calc(s):s.calcAt(_)).equals(Expression.ZERO))?z.push(_):console.debug(_.root)}return console.timeEnd("checking roots"),z}//!new
var A=Polynomial$1.of(Expression.ONE).shift(s.getDegree()).subtract(Polynomial$1.of(s.getLeadingCoefficient())).getroots();if(A.length!==0){A=A[0];var R=s.getCoefficient(s.getDegree()-1).divide(A._pow(s.getDegree()-1)).subtract(Expression.ZERO).divide(Expression.Integer.fromNumber(s.getDegree())),D=new Expression.Symbol("$$"),O=Polynomial$1.toPolynomial(S.calcAt(D.subtract(R).divide(A)).getNumerator(),D);if(O.hasIntegerCoefficients())return O.getZeros(t).map(function(ux){return ux.subtract(R).divide(A)})}//!
return console.debug("not all roots were found!!!"),[]}//!new
S.getDegree();//!
for(var F=S.getRootIntervals(),z=new Array(F.length),n=0;n<F.length;n+=1){var _=S.getZero(F[n],0);if(_.a.equals(_.b))z[n]=_.a;else{//! p, not f, as f may have roots with multiplicity > 1
{const px=ExpressionPolynomialRoot.create(S,_,{skipFactorization:!0});z[n]=px}}}//!new
if(F.length!==S.getDegree()&&t){//!new
if(S.getDegree()>=4){var j=S.factorize();if(j!=null)return j.getZeros(t).concat(S.divideAndRemainder(j,"throw").quotient.getZeros(t))}//!
if(S.isEven()){const dx=S._exponentiateRoots(2).getZeros(t);for(var _ of dx){var Z=function(gx){var kx=Expression.getComplexNumberParts(gx),Sx=kx.real,Ex=kx.imaginary,Cx=Sx._pow(2).add(Ex._pow(2)).squareRoot(),Ax=Sx.add(Cx).divide(Expression.TWO).squareRoot(),Tx=Ex.compareTo(Expression.ZERO)>0?Expression.ONE:Expression.ONE.negate(),kx=Sx.negate().add(Cx).divide(Expression.TWO),Rx=Tx.multiply(kx.squareRoot());return Ax.add(Rx.multiply(Expression.I))};if(!Expression._isPositive(_)){var W=Z(_.e!=null?_.upgrade():_);z.push(W),z.push(W.negate())}}return z}var J=S.calcAt(new Expression.Symbol("a").add(new Expression.Symbol("b").multiply(Expression.I))),en=Expression.getComplexNumberParts(J);const _x=en.real,ux=en.imaginary.divide(new Expression.Symbol("b")),px=function(dx){var mx=dx.squareFreeFactors();if(mx.a0.getDegree()!==0)return px(mx.a0).concat(px(mx.a1));var gx=dx.factorize();if(gx!=null){var mx=px(gx),Sx=dx.divideAndRemainder(gx,"throw").quotient;return Sx._getNonNegativeRealRootIntervals().length===0?mx:mx.concat(px(Sx))}return dx.getZeros(!1)};//!TODO: 
//!new 2021-01-03
if(z.length<S.getDegree()){var tn=function(dx,mx){var gx=Polynomial$1.toPolynomial(_x,new Expression.Symbol(dx)),Sx=Polynomial$1.toPolynomial(ux,new Expression.Symbol(dx));return Polynomial$1.toPolynomial(Polynomial$1.resultant(gx,Sx),new Expression.Symbol(mx)).primitivePart()},Ct=px(tn("a","b"));Ct=Ct.filter(dx=>Expression._isPositive(dx));//!?
Ct=Ct.map(dx=>dx instanceof ExpressionWithPolynomialRoot&&dx.root.polynomial.getDegree()/dx.root.polynomial.getGCDOfTermDegrees()<=2?dx.upgrade():dx);//!new
{var Q=Polynomial$1.toPolynomial(_x,new Expression.Symbol("a")).map(dx=>Polynomial$1.toPolynomial(dx,new Expression.Symbol("b"))),on=Polynomial$1.toPolynomial(ux,new Expression.Symbol("a")).map(dx=>Polynomial$1.toPolynomial(dx,new Expression.Symbol("b"))),gn=void 0,In=Polynomial$1.ZERO;for(var dn of Ct){var ix=null;if((!(dn instanceof ExpressionWithPolynomialRoot)||!dn.e.equals(dn.root))&&(!(dn instanceof ExpressionPolynomialRoot)||!dn.root.getAlphaExpression().equals(new Expression.Symbol("")))){var Cn=Q.map(mx=>mx.calcAt(dn)),ax=on.map(mx=>mx.calcAt(dn));ix=Polynomial$1.polynomialGCD(Cn,ax)}else{const mx=(dn instanceof ExpressionPolynomialRoot?dn.root.upgrade().getAlpha():dn.root).polynomial;In.equals(mx)||(gn=polynomialGCDModuloPolynomial(Q,on,mx),gn=gn.map(gx=>gx.polynomial),In=mx),ix=gn.map(gx=>dn._calc(gx))}if(ix.getDegree()>=3){console.log("g!!!",ix.toString());var sx=this;window.setTimeout(function(){throw new TypeError("good test: "+sx.toString())},0)}const dx=function(mx){var gx=mx.getCoefficient(1).divide(mx.getCoefficient(2)),Sx=mx.getCoefficient(0).divide(mx.getCoefficient(2)),Ex=gx.divide(Expression.TWO).negate(),Cx=Ex._pow(2).subtract(Sx).squareRoot(),Ax=Ex.subtract(Cx),Tx=Ex.add(Cx);return[Ax,Tx]};if(ix.getDegree()<=2){const mx=ix.getDegree()===2?dx(ix):ix.getroots();for(var lx of mx)if(!Expression.has(lx,Expression.Complex)){var ox=lx.add(dn.multiply(Expression.I));z.push(ox),z.push(ox.complexConjugate())}}}}if(z.length<S.getDegree()){z=z.filter(dx=>Expression.isReal(dx));var hx=px(tn("b","a"));//!
for(var lx of hx)for(var dn of Ct){var ox=lx.add(dn.multiply(Expression.I));S.calcAt(ox).equals(Expression.ZERO)&&(z.push(ox),z.push(ox.complexConjugate()))}}}}//!
return z};function pseudoRemainderSequence(t,n,a="primitive",s=!1){Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees())>1&&console.error("g > 1");let u=!0,c=Expression.ONE;var p={next:function(){if(console.assert(t.getDegree()>=n.getDegree()),!n.equals(Polynomial$1.ZERO)){const d=t.getDegree()-n.getDegree(),x=n.getLeadingCoefficient()._pow(d+1),_=t.scale(s?x.abs():x).divideAndRemainder(n,n._hasIntegerLikeCoefficients()?"throw":void 0),S=_.quotient,T=_.remainder;let A=Expression.ONE;if(a==="trivial")A=Expression.ONE;else if(a==="primitive")A=T.getContent();else if(a==="subresultant")A=u?Expression.ONE:t.getLeadingCoefficient().multiply(c._pow(d)),u=!1,c=d===0?c:n.getLeadingCoefficient()._pow(d).divide(c._pow(d).divide(c));else throw new RangeError(a);const R=T.map(O=>O.divide(s?A.abs().negate():A)),D={R,q:S,:A};return t=n,n=R,{value:D,done:!1}}return{value:void 0,done:!0}}};return p[globalThis.Symbol.iterator]=function(){return this},p}Polynomial$1._pseudoRemainderSequence=pseudoRemainderSequence;Polynomial$1._resultantUsingSubresultantPseudoRemainderSequence=function(t,n){function a(O,F){if(O.getLeadingCoefficient()instanceof Expression.Polynomial||F.getLeadingCoefficient()instanceof Expression.Polynomial)return{variables:[],A:O,B:F};for(var z={},j=[],Z=function(en){for(var tn of en.summands())for(var Ct of tn.factors())Ct instanceof Expression.Exponentiation&&(Ct=Ct.a),Ct instanceof Expression.Symbol&&Object.getPrototypeOf(Ct)===Expression.Symbol.prototype&&z[Ct.symbol]==null&&(j.push(Ct),z[Ct.symbol]=!0)},W=0;W<O.a.size;W+=1)Z(O.a.coefficient(W));for(var W=0;W<F.a.size;W+=1)Z(F.a.coefficient(W));var J=function(en,tn){if(tn===j.length)return console.assert(en.hasIntegerCoefficients()),en;var Ct=j[tn];return en.map(Q=>new Expression.Polynomial(J(Polynomial$1.toPolynomial(Q,Ct),tn+1)))};return{variables:j,A:J(O,0),B:J(F,0)}}function s(O,F){if(F.equals(Expression.ZERO)){return F;//!?
}return O.length===0?F:F.polynomial.map(z=>s(O.slice(1),z)).calcAt(O[0])}if(t.getDegree()===Polynomial$1.ZERO.getDegree()||n.getDegree()===Polynomial$1.ZERO.getDegree())return Expression.ZERO;var l=Math.gcd(t.getGCDOfTermDegrees(),n.getGCDOfTermDegrees());if(l>1){var u=Polynomial$1._resultantUsingSubresultantPseudoRemainderSequence(t._exponentiateRoots(l),n._exponentiateRoots(l));return u._pow(l)}var c=a(t,n);t=c.A,n=c.B;var p=t,d=n,x=Date.now(),_=1;if(t.getDegree()<n.getDegree()){const O=t;t=n,n=O,_*=Math.pow(Math.pow(-1,t.getDegree()),n.getDegree())}const S=[];for(var u of Polynomial$1._pseudoRemainderSequence(t,n,"subresultant")){var T=u.R,A=u.;if(n.getDegree()>0)if(T.getDegree()<0){for(;S.length>0;)S.pop();S.push({base:Expression.ZERO,exponent:1})}else{if(!A.equals(Expression.ONE))if(S.length>0){const F=S.pop();S.push({base:F.base,exponent:F.exponent+2*n.getDegree()}),S.push({base:A.divide(F.base._pow(2)),exponent:n.getDegree()})}else S.push({base:A,exponent:n.getDegree()});S.push({base:n.getLeadingCoefficient(),exponent:t.getDegree()-T.getDegree()-n.getDegree()*(t.getDegree()-n.getDegree()+1)}),_*=Math.pow(Math.pow(-1,t.getDegree()),n.getDegree())}else console.assert(n.getDegree()===0&&T.getDegree()<0),S.push({base:n.getLeadingCoefficient(),exponent:t.getDegree()});t=n,n=T}let R=_===-1?Expression.ONE.negate():Expression.ONE;for(const O of S)O.exponent<0?R=R.divide(O.base._pow(-O.exponent)):O.exponent>0&&(R=R.multiply(O.base._pow(O.exponent)));var D=Date.now();return D-x>250&&console.log(D-x,p.toString(),d.toString()),R=s(c.variables,R),R};Expression._FIELD={ONE:Expression.ONE,sub:function(t,n){return t.subtract(n)},mul:function(t,n){return t.multiply(n)},div:function(t,n){return t.divide(n)},scale:function(t,n){return t.multiply(Expression.Integer.fromBigInt(n))}};Polynomial$1.resultant=function(t,n){return Polynomial$1._resultantUsingSubresultantPseudoRemainderSequence(t,n)};function GramSchmidtOrthogonalization$1(t){for(var n=Matrix$1.fromVectors(t).transpose(),a=n,s=a.multiply(a.conjugateTranspose()).augment(a).toRowEchelon(Matrix$1.Gauss,"row-reduction").matrix,l=s.slice(0,s.rows(),a.rows(),s.cols()),u=new Array(l.rows()),c=0;c<l.rows();c+=1)u[c]=l.row(c);return u}globalThis.GramSchmidtOrthogonalization=GramSchmidtOrthogonalization$1;Expression.Complex.prototype.abs=function(){return this.multiply(this.conjugate()).squareRoot()};Expression.Division.prototype.abs=function(){return this.getNumerator().abs().divide(this.getDenominator().abs())};Expression.prototype.abs=function(){const t=function(l){if(l instanceof Expression.Addition){for(var u of l.summands())for(var c of u.factors())if(!(c instanceof Expression.Symbol&&!(c instanceof Expression.MatrixSymbol)||c instanceof Expression.Integer))return!1;return!0}return!1},n=this;if(n instanceof Expression.Symbol&&!(n instanceof Expression.PolynomialRootSymbol)&&!(n instanceof Expression.ExpressionPolynomialRoot)&&!(n instanceof Expression.ExpressionWithPolynomialRoot))return n===Expression.PI||n===Expression.E?n:new Expression.Abs(this);if(this instanceof Expression.ComplexConjugate)return this.a.abs();if(this instanceof Expression.Multiplication)return this.a.abs().multiply(this.b.abs());if(this instanceof Expression.Abs)return this;if(this.isNegative())return this.negate().abs();if(this instanceof Expression.Exponentiation&&(this.a instanceof Expression.Symbol||t(this.a))&&this.b instanceof Expression.Integer)return this.a.multiply(this.a.complexConjugate()).multiply(this.a.pow(this.b.subtract(Expression.TWO)).abs());var a=Expression.simpleDivisor(this);if(a!=null&&!a.equals(Expression.ONE)&&!a.equals(this))return this.divide(a).divide(a)instanceof Expression.Division?a.abs().multiply(this.divide(a).abs()):new Expression.Exponentiation(a,Expression.TWO).abs().multiply(this.divide(a).divide(a).abs());if(t(this))return new Expression.Abs(this);if(t(this.complexConjugate()))return this.complexConjugate().abs();if(Expression.isConstant(this)){var s=Expression.getComplexNumberParts(this);if(!s.imaginary.equals(Expression.ZERO))return this.multiply(this.complexConjugate()).squareRoot()}return this.compareTo(Expression.ZERO)<0?this.negate():this};Expression.prototype.compareTo=function(t){if(t.equals(Expression.ZERO)){if(Expression._isPositive(this))return 1;if(Expression._isPositive(this.negate()))return-1;throw new TypeError(this.toString())}return this.subtract(t).getNumerator().compareTo(Expression.ZERO)};Expression.prototype.sign=function(){return this.compareTo(Expression.ZERO)};Expression.prototype.round=function(){return ExpressionParser.parse(toDecimalStringInternal$1(this,{fractionDigits:0}))};Polynomial$1.prototype._log2hypot=function(){let t=Expression.ZERO;for(let l=0;l<this.a.size;l+=1){const u=this.a.coefficient(l).abs();u.compareTo(t)>0&&(t=u)}const n=Math.max(t.bitLength()-970/2,0),a=Expression.TWO._pow(n);let s=0;for(let l=0;l<this.a.size;l+=1)s+=Math.pow(this.a.coefficient(l).truncatingDivide(a).toNumber(),2);return n+Math.log2(Math.sqrt(s))};Polynomial$1.prototype._log2OfBoundForCoefficientsOfFactor=function(t,n){if(t==null&&(t=this.getDegree()),t===0)return 0;n==null&&(n=this.getLeadingCoefficient().abs());var a=function(c){var p=c.bitLength();return p<=53?Math.log2(c.toNumber()):p-53+Math.log2(c.truncatingDivide(Expression.TWO._pow(p-53)).toNumber())},s=function(c){return c-Math.log2(Math.sqrt(Math.PI*Math.ceil(c/2)))},l=t,u=s(l)+(a(n.abs())-a(this.getLeadingCoefficient().abs()))+this._log2hypot();return u};Polynomial$1.prototype.isDivisibleBy=function(t){var n=void 0,a=Expression.ONE;this._hasIntegerLikeCoefficients()&&t._hasIntegerLikeCoefficients()&&(n="undefined",a=t.getContent());var s=this.scale(a).divideAndRemainder(t,n);return s!=null&&s.remainder.equals(Polynomial$1.ZERO)};function polynomialGCDModuloPolynomial(t,n,a){function s(p,d){var x=p.map(S=>new Expression.Polynomial(S.polynomial.divideAndRemainder(d).remainder)),_=x.map(S=>S.polynomial.getContent()).getContent().inverse();return x.scale(new Expression.Polynomial(Polynomial$1.of(_)))}function l(p,d){return p.getDegree()<0?p:s(p.scale(new Expression.Polynomial(p.getLeadingCoefficient().polynomial.primitivePart().modularInverse(d).primitivePart())),d)}if(t=t.map(p=>new Expression.Polynomial(p)),n=n.map(p=>new Expression.Polynomial(p)),t.getDegree()<n.getDegree()){var u=t;t=n,n=u}if(n.getDegree()>=0&&s(Polynomial$1.of(n.getLeadingCoefficient()),a).equals(Polynomial$1.ZERO))return polynomialGCDModuloPolynomial(s(t,a).map(p=>p.polynomial),s(n,a).map(p=>p.polynomial),a);for(var u of Polynomial$1._pseudoRemainderSequence(t,n,"subresultant")){var c=u.R;if(t=n,n=c,n.getDegree()>=0&&s(Polynomial$1.of(n.getLeadingCoefficient()),a).equals(Polynomial$1.ZERO))return polynomialGCDModuloPolynomial(s(t,a).map(d=>d.polynomial),s(n,a).map(d=>d.polynomial),a)}return l(s(t,a),a)}globalThis.testables=globalThis.testables||{};globalThis.testables.polynomialGCDModuloPolynomial=polynomialGCDModuloPolynomial;Expression.getSolutionSet=function t(n){var a=n.augment(Matrix$1.Zero(n.cols(),1)),s=a.toRowEchelon(Matrix$1.GaussMontante,"solving",void 0),l=Matrix$1.solveByGaussNext(s.matrix),u=Matrix$1.getSolutionSet(l).basisVectors;return u};Expression.getFormaDeJordan=function(t,n,a){function s(gn){for(var In=0,dn=Matrix$1.Zero(_,_),ix=0;ix<gn.length;ix+=1){var Cn=gn[ix];dn=dn.map(function(ax,sx,lx){return sx>=In&&sx<In+Cn.size?sx===lx?Cn.eigenvalue:sx!==In+Cn.size-1&&lx===sx+1?Expression.ONE:Expression.ZERO:ax}),In+=Cn.size}return dn}function l(gn,In){var dn=gn.multiply(In);return dn.eql(Matrix$1.Zero(dn.rows(),1))}function u(gn,In){return Matrix$1.fromVectors(gn.concat(In)).rank()===gn.length+In.length}if(arguments.length>3||arguments[2]!==!0&&arguments[2]!==void 0)throw new TypeError;var c=Expression.unique(n);//!TODO: remove
if(c.length===t.rows()){var p=Expression.getEigenvectors(t,n),d=Expression.diagonalize(t,n,p),Q=d.T,Ct=d.L,on=d.T_INVERSED;return{P:Q,J:Ct,P_INVERSED:on}}//!
for(var x=t,_=x.rows(),S=[],T=[],A=0;A<c.length;A+=1){for(var R=[],D=c[A],O=n.reduce((gn,In)=>gn+(In===D?1:0),0),F=x.subtract(Matrix$1.I(_).scale(D)),z=1;F.pow(z).rank()>_-O;)z+=1;for(z+=1;--z>=1;)for(var j=Expression.getSolutionSet(F.pow(z)),Z=0;Z<j.length;Z+=1){var W=j[Z];if(!l(F.pow(z-1),W)){for(var J=[],en=W,tn=0;tn<z;tn+=1)J.push(en),en=F.multiply(en).col(0);J.reverse(),u(R,J)&&(S=S.concat(J),R=R.concat(J),T.push({size:z,eigenvalue:D}))}}}var Ct=s(T);if(S.length!==_)throw new TypeError("assertion failed");var Q=Matrix$1.fromVectors(S),on=Q.isExact()?Q.inverse():a?null:getInverse$1(x,n,Q);if(!a&&Q.isExact()&&x.toString()!==Q.multiply(Ct).multiply(on).toString())throw new TypeError("assertion failed");return{P:Q,J:Ct,P_INVERSED:on}};var getInverse$1=function(t,n,a){var s=t.transpose(),l=Expression.getFormaDeJordan(s,n,!0),u=l.J,c=l.P,p=t.cols(),d=Matrix$1.Zero(p,p).map(function(_,S,T){function A(){for(var D=S;D-1>=0&&D<p&&u.e(D-1,D).equals(Expression.ONE);)D-=1;for(var O=S;O+1<p&&u.e(O,O+1).equals(Expression.ONE);)O+=1;return{s:D,e:O}}var R=A();return R.s+R.e===S+T?Expression.ONE:Expression.ZERO}),x=c.multiply(d).transpose();return Expression._unscaleInverseMatrix(x,a)};Expression._getInverse=getInverse$1;globalThis.factorsMap=new Map;Expression.getPolynomialRootsWithSteps=function(t,n){var a=t.getroots(n);//!2018-05-28
//!2018-07-11
var s=[];if(typeof t.getZeros=="function"&&a.length!==t.getDegree()){for(var l=Polynomial$1.of(Expression.ONE),u=0;u<a.length;u+=1)l=l.multiply(Polynomial$1.of(a[u].negate(),Expression.ONE));var c=t.divideAndRemainder(l).quotient;globalThis.factorsMap=new Map;const x=function(_){var S=_.primitivePart();if(!S.hasIntegerCoefficients())return _.getZeros(!0);_=S;var T=_.squareFreeFactors(),A=T.a0,R=T.a1;if(A.getDegree()!==0){for(var D=x(R),O=x(A),F=[],z=void 0,j=0;j<O.length;j+=1){var Z=O[j];Z!==z&&(F.push(Z),z=Z),F.push(Z)}return D.concat(F)}var W=_.factorize();if(W==null&&(W=_),!W.equals(_))return x(W).concat(x(_.divideAndRemainder(W,"throw").quotient));const J=W.getZeros(!0);for(const en of J)globalThis.factorsMap.set(en,W);return J};s=x(c),n!=null&&s.length===c.getDegree()&&n({content:Expression.ONE,roots:a.concat(s),newPolynomial:Polynomial$1.of(t.getLeadingCoefficient()),type:"realRootIsolationAndNewton'sMethod"})}//!
for(var u=0;u<a.length;u+=1)for(var p=a[u],d=0;d<a.length;d+=1)a[d].equals(p)&&(a[d]=p);return a.concat(s)};Expression.getEigenvalues=function(t,n){if(!t.isSquare())throw new RangeError("NonSquareMatrixException");var a=function(d){var x=Expression.ZERO,_=Expression.ONE;return d.map(function(S){return Expression.isScalar(S)&&(x=x.gcd(S.getNumerator()),_=_.lcm(S.getDenominator())),Expression.ZERO}),x.divide(_)},s=Expression.ONE,l=Expression.ONE;n==null&&(s=a(t),s.equals(Expression.ZERO)?s=Expression.ONE:(l=s.inverse(),t=t.scale(l)));var u=t.map(function(d,x,_){var S=x===_?Polynomial$1.of(d,Expression.ONE.negate()):d.equals(Expression.ZERO)?Polynomial$1.ZERO:Polynomial$1.of(d);return new Expression.Polynomial(S)}).determinant();u=u.polynomial,u=u._scaleRoots(s),u=u.scale(s._pow(t.cols()));//!new (sin/cos)
u=u.map(function(d){return d.simplifyExpression()});var c=u;//!TODO: fix
n!=null&&n(c),console.time("p3");var p=Expression.getPolynomialRootsWithSteps(c,n);return console.timeEnd("p3"),p};Expression.isRational=function(t){return t instanceof Expression.Integer||t instanceof Expression.BinaryOperation&&Expression.isRational(t.a)&&Expression.isRational(t.b)};Expression.isRationalMatrix=function(t){for(var n=0;n<t.rows();n+=1)for(var a=0;a<t.cols();a+=1)if(!Expression.isRational(t.e(n,a)))return!1;return!0};Expression.getEigenvectors=function(t,n,a=!1){n==null&&(n=Expression.getEigenvalues(t));const s=new Array(n.length).fill(null),l=Expression.unique(n),u=function(A,R){for(var D=0,O=0;O<n.length&&D<R.length;O+=1)n[O]===A&&(s[O]=R[D],D+=1);if(D<R.length)throw new TypeError("wrong eigenvalues argument: the eigenvalue should appear multiple times")};if(!a&&t.isSquare()&&Expression.isRationalMatrix(t)){const A=new Map;for(const R of l){const D=globalThis.factorsMap.get(R);if(D==null||D.getDegree()<=1){const O=Expression.getEigenvectors(t,n.filter(F=>F===R),!0);u(R,O)}else{var c=A.get(D);if(c==null){const F=SomePolynomialRoot.create(D);c=Expression.getEigenvectors(t,n.filter(z=>z===R).map(z=>F),!0),A.set(D,c)}var p=[];p.push(Expression.ONE);const O=function(F){return F instanceof SomePolynomialRoot?F.calcAt(R,p):F};u(R,c.map(F=>new Matrix$1.Vector(F.elements.map(z=>O(z)))))}}return s}var d=function(A){var R=Expression.ZERO,D=Expression.ONE;return A.map(function(O){return Expression.isScalar(O)&&(R=R.gcd(O.getNumerator()),D=D.lcm(O.getDenominator())),Expression.ZERO}),R.divide(D)},x=Expression.ONE,_=Expression.ONE;x=d(t),x.equals(Expression.ZERO)&&(x=Expression.ONE),_=x.inverse();for(var S=0;S<l.length;S+=1){const A=l[S];var T=t.cols(),c=Expression.getSolutionSet(t.scale(_).subtract(Matrix$1.I(T).scale(A.multiply(_))));u(A,c);let D=null;if(S+1<l.length)try{D=A.complexConjugate()}catch(O){console.error(O)}if(S+1<l.length&&D!=null&&D.equals(l[S+1])&&t.eql(t.map(O=>O.complexConjugate()))){const O=function(F){return new Matrix$1.Vector(F.elements.map(z=>z.complexConjugate()))};u(l[S+1],c.map(F=>O(F))),S+=1}}return s};var getInverse=function(t,n,a){var s=t.transpose(),l=Expression.getEigenvectors(s,n),u=Matrix$1.fromVectors(l).transpose();return _unscaleInverseMatrix(u,a)},_unscaleInverseMatrix=function(t,n){var a=function(u,c){var p=u.rows();return Matrix$1.Zero(p,p).map(function(d,x,_){if(x!==_)return Expression.ZERO;for(var S=p,T=-1;++T<S;){var A=u.e(x,T).multiply(c.e(T,_));d=T===0?A:d.add(A)}return d})},s=a(t,n),l=s.map(function(u,c,p){return c===p?u.inverse():Expression.ZERO});return l.multiply(t)};Expression._unscaleInverseMatrix=_unscaleInverseMatrix;Expression.diagonalize=function(t,n,a){if(arguments.length>3)throw new TypeError;if(!t.isSquare())throw new RangeError("NonSquareMatrixException");if(n.length!==t.cols())throw new RangeError;if(a.filter(p=>p!=null).length!==t.cols())throw new RangeError;//!!!
var s=Matrix$1.I(t.cols()).map(function(p,d,x){return d===x?n[d]:Expression.ZERO}),l=Matrix$1.fromVectors(a),u=function(){return n.map(p=>!Expression.has(p,Expression.Exponentiation)).reduce((p,d)=>p||d)},c=l.isExact()&&u()?l.inverse():getInverse(t,n,l);return{T:l,L:s,T_INVERSED:c}};Expression.LUDecomposition=function(t){for(var n=t.rows(),a=t,s=Matrix$1.I(n),l=Matrix$1.I(n),u=!1,c=0,p=0;p<t.cols();p+=1)if(c<n){var d=c;if(a.e(c,p).equals(Expression.ZERO)){for(var x=c+1;x<n&&d===c;x+=1)a.e(x,p).equals(Expression.ZERO)||(d=x);if(d!==c){var _=Matrix$1.I(n);_=_.map(function(T,A,R){return A===c?_.e(d,R):A===d?_.e(c,R):T}),a=_.multiply(a),s=_.multiply(s.subtract(Matrix$1.I(n))).add(Matrix$1.I(n)),l=_.multiply(l),u=!0}}if(!a.e(c,p).equals(Expression.ZERO)){var S=Matrix$1.I(n).map(function(T,A,R){return R===c&&A>=c+1?a.e(A,p).divide(a.e(c,p)).negate():T});a=S.multiply(a),s=s.multiply(S),c+=1}}return s=s.map(function(T,A,R){return A===R?T:T.negate()}),{swapFlag:u,P:new Expression.Matrix(l),A:new Expression.Matrix(t),L:new Expression.Matrix(s),U:new Expression.Matrix(a)}};Expression.isReal=function(t){var n=function(a){return a instanceof Expression.Integer?!0:a instanceof Expression.NthRoot?n(a.a):a instanceof Expression.BinaryOperation&&n(a.a)&&n(a.b)||a===Expression.E||a===Expression.PI?!0:a instanceof Expression.Function?n(a.a):a instanceof Expression.PolynomialRootSymbol?!0:a instanceof Expression.ExpressionWithPolynomialRoot?n(a.e):!!(a instanceof Expression.ExpressionPolynomialRoot||!(a instanceof Expression.Symbol)&&!(a instanceof Expression.Exponentiation)&&a.complexConjugate().equals(a))};return n(t)};Expression.isRealMatrix=function(t){for(var n=0;n<t.rows();n+=1)for(var a=0;a<t.cols();a+=1)if(!Expression.isReal(t.e(n,a)))return!1;return!0};Expression.CholeskyDecomposition=function(t){var n=t;if(!n.isSquare())throw new RangeError("NonSquareMatrixException");for(var a=n.rows(),s=Expression.isRealMatrix(n),l=0;l<a;l+=1)for(var u=l;u<a;u+=1)if(!n.e(l,u).equals(n.e(u,l).complexConjugate()))throw s?new RangeError("NonSymmetricMatrixException"):new RangeError("NonHermitianMatrixException");for(var c=new Array(a),l=0;l<a;l+=1){c[l]=new Array(a);for(var u=0;u<a;u+=1)c[l][u]=Expression.ZERO}for(var u=0;u<a;u+=1)for(var l=u;l<a;l+=1){var p=null;if(u===l){for(var d=null,x=0;x<u;x+=1){var _=c[u][x].multiply(c[u][x].complexConjugate());d=d==null?_:d.add(_)}var S=d==null?n.e(u,u):n.e(u,u).subtract(d);if(!Expression._isPositive(S))throw new RangeError("NonPositiveDefiniteMatrix");p=S.squareRoot()}else{for(var d=null,x=0;x<u;x+=1){var S=c[l][x].multiply(c[u][x].complexConjugate());d=d==null?S:d.add(S)}p=(d==null?n.e(l,u):n.e(l,u).subtract(d)).divide(c[u][u])}c[l][u]=p,console.log("l_%d%d = %s",l+1,u+1,c[l][u].toString())}return{L:Matrix$1.padRows(c,null)}};Matrix$1.prototype.conjugateTranspose=function(){return this.transpose().map(t=>t.complexConjugate())};Matrix$1.fromVectors=function(t){if(t.length===0)throw new RangeError;for(var n=t[0].dimensions(),a=0;a<t.length;a+=1)if(t[a].dimensions()!==n)throw new RangeError;return Matrix$1.Zero(n,t.length).map((s,l,u)=>t[u].e(l))};Expression.SVD=function(t){var n=function(Z,W){return W.length>1&&(W=GramSchmidtOrthogonalization(W)),W.map(J=>J.toUnitVector())},a=t.conjugateTranspose().multiply(t),s=Expression.getEigenvalues(a);//!
var l=Expression.unique(s),u=l.map(Z=>Z instanceof Expression.ExpressionWithPolynomialRoot||Z instanceof Expression.ExpressionPolynomialRoot?Z.upgrade():Z);s=s.map(Z=>u[l.indexOf(Z)]);//!
s=s.slice(0).reverse().sort(function(Z,W){var J=Z.subtract(W);return Expression.isReal(J)?Expression._isPositive(J.negate())?1:-1:NaN});var c=[],p=[];const d=Expression.unique(s);var x=Expression.getEigenvectors(a,s);for(var _ of d){var S=x.filter((Z,W)=>s[W]===_);c=c.concat(n(a,S));var T=_.squareRoot(),A=c.length-p.length;p=p.concat(new Array(A).fill(T))}var R=Matrix$1.Zero(t.rows(),t.cols()).map((Z,W,J)=>W===J&&W<p.length?p[W]:Expression.ZERO);console.time("U");for(var D=[],O=0;O<R.rows()&&O<R.cols()&&!R.e(O,O).equals(Expression.ZERO);O+=1){var F=t.multiply(c[O]).col(0).scale(R.e(O,O).inverse());D.push(F)}if(D.length<t.rows()){console.time("U1");var z=t.multiply(t.conjugateTranspose()),x=Expression.getEigenvectors(z,new Array(t.rows()).fill(Expression.ZERO),!0).filter(W=>W!=null),j=n(z,x);console.timeEnd("U1"),console.assert(D.length+j.length===t.rows()),D=D.concat(j)}return console.timeEnd("U"),D=Matrix$1.fromVectors(D),c=Matrix$1.fromVectors(c),{U:D,Sigma:R,Vstar:c.conjugateTranspose()}};Expression.QRDecomposition=function(t){for(var n=t,a=new Array(n.cols()),s=0;s<n.cols();s+=1)a[s]=n.col(s);var l=GramSchmidtOrthogonalization(a).filter(p=>!p.eql(Matrix$1.Vector.Zero(p.dimensions()))),u=Matrix$1.fromVectors(l.map(p=>p.toUnitVector())),c=u.conjugateTranspose().multiply(n);return console.log(u),{Q:u,R:c}};function Condition$1(t){Object.freeze(t),this.array=t}Condition$1.NEZ=" != 0";Condition$1.EQZ=" == 0";Condition$1.GTZ=" > 0";Condition$1.prototype._and=function(t,n){if(t!==Condition$1.NEZ&&t!==Condition$1.EQZ&&t!==Condition$1.GTZ)throw new TypeError;if(n==null)throw new RangeError;if(this===Condition$1.FALSE)return this;var a=function(d,x,_){for(var S=0;S<d.length;S+=1)if(d[S].operator===x&&d[S].expression.equals(_))return!0;return!1};if(n instanceof Expression.GF2Value)return this._and(t,n.value===0?Expression.ZERO:Expression.ONE);var s=function(d,x){if(a(d,x.operator,x.expression)){//!TODO: it should work even without this (?)
return d}if(a(d,x.operator===Condition$1.EQZ?Condition$1.NEZ:Condition$1.EQZ,x.expression))return null;var _=x.expression;//!
//!new 2019-12-15:
//!substitute:  x = 0, sin(x) != 0
(Expression.has(_,Expression.Sin)||Expression.has(_,Expression.Cos)||Expression.has(_,Expression.Exponentiation)||Expression.has(_,Expression.Arctan)||Expression.has(_,Expression.Logarithm)||Expression.has(_,Expression.Abs))&&d.length>0&&(_=Expression._map(function(Rx){if(Rx instanceof Expression.Function&&!(Rx instanceof Expression.NthRoot)||Rx instanceof Expression.Exponentiation&&(!(Rx.b instanceof Expression.Integer)||!(Rx.a instanceof Expression.Symbol))){var $x=Rx instanceof Expression.Exponentiation?Rx.b:Rx.a,Gx=null,qx=null;if($x instanceof Expression.Symbol)Gx=$x,qx=d;else if(Gx=new Expression.Symbol("arg"),qx=s(d,{expression:Gx.subtract($x),operator:Condition$1.EQZ}),qx==null){//! TODO: fix, should not happen
return Rx}for(var Dx=0;Dx<qx.length;Dx+=1){var lE=qx[Dx];if(lE.operator===Condition$1.EQZ){var cE=Polynomial$1.toPolynomial(lE.expression,Gx);if(cE.getDegree()===1){var nE=cE.getCoefficient(0).negate().divide(cE.getCoefficient(1));if(!Expression.has(nE,Expression.Function)&&(nE.compare4Addition(Gx)<0&&!(nE instanceof Expression.Division)||Expression.isConstant(nE)||Expression.isConstant(nE.divide(Expression.PI)))){if(Rx instanceof Expression.Exponentiation)return Rx.a.pow(nE);if(Rx instanceof Expression.Arctan)return nE.arctan();if(Rx instanceof Expression.Logarithm)return nE.logarithm();if(Rx instanceof Expression.Abs)return nE.abs();if(nE=Expression.isConstant(nE)&&!nE.equals(Expression.ZERO)&&!(nE instanceof Expression.Radians)&&!Expression.has(nE,Expression.Symbol)?new Expression.Radians(nE):nE,Rx instanceof Expression.Sin)return nE.sin();if(Rx instanceof Expression.Cos)return nE.cos();throw new TypeError("NotSupportedError")}}}}return Rx}return Rx},_),x={expression:_,operator:x.operator});//!
//!new
if(_.isNegative()&&(x.operator===Condition$1.EQZ||x.operator===Condition$1.NEZ))return s(d,{expression:_.negate(),operator:x.operator});if(_ instanceof Expression.Exponentiation&&(x.operator===Condition$1.EQZ||x.operator===Condition$1.NEZ))return s(d,{expression:_.a,operator:x.operator});if(_ instanceof Expression.Addition&&_.a instanceof Expression.Exponentiation&&Expression.isConstant(_.b)&&_.a.b.getDenominator()instanceof Expression.Integer&&!_.a.b.getDenominator().equals(Expression.ONE))return _.a.b.getDenominator().remainder(Expression.TWO).equals(Expression.ZERO)&&!_.b.isNegative()?s(d,{expression:Expression.ONE,operator:x.operator}):s(d,{expression:_.a.a.pow(_.a.b.getNumerator()).subtract(_.b.negate().pow(_.a.b.getDenominator())),operator:x.operator});if(x.expression instanceof Expression.Multiplication&&x.expression.b instanceof Expression.IdentityMatrix)return s(d,{expression:x.expression.a,operator:x.operator});if(x.expression instanceof Expression.Division){var S=d;return S=s(S,{expression:x.expression.a,operator:x.operator}),S==null?null:(S=s(S,{expression:x.expression.b,operator:Condition$1.NEZ}),S)}if(x.expression instanceof Expression.Integer||x.expression instanceof Expression.Complex)return x.operator===Condition$1.NEZ&&x.expression.equals(Expression.ZERO)||x.operator===Condition$1.EQZ&&!x.expression.equals(Expression.ZERO)||x.operator===Condition$1.GTZ&&x.expression.equals(Expression.ZERO)||x.operator===Condition$1.GTZ&&x.expression instanceof Expression.Integer&&x.expression.compareTo(Expression.ZERO)<0?null:d;if(Expression.isConstant(x.expression)&&!x.expression.equals(Expression.ZERO)){if(x.operator===Condition$1.NEZ)return d;if(x.operator===Condition$1.EQZ)return null}if(x.expression instanceof Expression.Matrix&&x.expression.matrix.isZero()){if(x.operator===Condition$1.EQZ)return d;if(x.operator===Condition$1.NEZ)return null}if(x.expression instanceof Expression.NthRoot)return s(d,{expression:x.expression.a,operator:x.operator});if(Expression.has(x.expression,Expression.Abs)){if(x.expression instanceof Expression.Abs&&(x.operator===Condition$1.EQZ||x.operator===Condition$1.NEZ))return s(d,{expression:x.expression.a,operator:x.operator});if(x.expression instanceof Expression.Abs&&x.operator===Condition$1.GTZ)return d;if(x.expression.negate()instanceof Expression.Abs&&x.operator===Condition$1.GTZ)return null}if(Expression.has(x.expression,Expression.ComplexConjugate)&&!Expression.has(x.expression.complexConjugate(),Expression.ComplexConjugate))return s(d,{expression:x.expression.complexConjugate(),operator:x.operator});if(x.expression instanceof Expression.Multiplication){if(x.operator===Condition$1.EQZ&&x.expression.a instanceof Expression.Integer&&!x.expression.a.equals(Expression.ZERO))return x={expression:x.expression.b,operator:x.operator},s(d,x);if(x.operator===Condition$1.NEZ){var S=d;return S=s(S,{expression:x.expression.a,operator:Condition$1.NEZ}),S==null?null:(S=s(S,{expression:x.expression.b,operator:Condition$1.NEZ}),S)}}var D=Expression.getMultivariatePolynomial(x.expression);if(D!=null){//!new 2018-12-24
var T=Expression.getNthRootConjugate(D.p.getLeadingCoefficient());if(T!=null&&Expression.isConstant(T))return s(d,{expression:T.multiply(x.expression),operator:x.operator});//!
var A=D.p.getContent();if(!A.equals(Expression.ONE)&&!A.equals(Expression.ONE.negate())){if(x.operator===Condition$1.NEZ){var S=s(d,{expression:x.expression.divide(A),operator:Condition$1.NEZ});return S==null?null:s(S,{expression:A,operator:Condition$1.NEZ})}for(;D!=null;){if(x.operator===Condition$1.EQZ){var R=D.p.getSquareFreePolynomial();if(R.getDegree()!==D.p.getDegree())return s(d,{expression:x.expression.divide(D.p.divideAndRemainder(R).quotient.calcAt(D.v)),operator:Condition$1.EQZ})}A=D.p.getContent(),D=Expression.getMultivariatePolynomial(A)}//!new
if(Expression.isConstant(A)&&!A.equals(Expression.ONE)&&!A.equals(Expression.ONE.negate()))return s(d,{expression:x.expression.divide(A),operator:Condition$1.EQZ})}if(D!=null&&D.p.getDegree()>1&&D.p.getCoefficient(0).equals(Expression.ZERO)&&x.operator===Condition$1.NEZ){var S=s(d,{expression:D.v,operator:Condition$1.NEZ});return S==null?null:s(S,{expression:x.expression.divide(D.v),operator:Condition$1.NEZ})}}//!new 2019-12-24:
var D=Expression.getMultivariatePolynomial(x.expression);if(D!=null&&D.p.getDegree()>1){var R=D.p.getSquareFreePolynomial();if(R.getDegree()!==D.p.getDegree()&&(x.operator===Condition$1.EQZ||x.operator===Condition$1.NEZ))return s(d,{expression:R.calcAt(D.v),operator:x.operator})}//!
for(var O=function(Rx,$x,Gx,qx){if(Rx==null)return null;for(var Dx=Gx+1;Dx<$x.length;Dx+=1)if(Rx=s(Rx,$x[Dx]),Rx==null)return null;return qx!=null&&(Rx=s(Rx,qx)),Rx},F=[],z=0;z<d.length;z+=1){var j=d[z];//!new 2020-01-01:
if((Expression.has(j.expression,Expression.Sin)||Expression.has(j.expression,Expression.Cos))&&(Expression.has(x.expression,Expression.Sin)||Expression.has(x.expression,Expression.Cos))){var Z={operator:j.operator,expression:Expression._replaceSinCos(j.expression)},W={operator:x.operator,expression:Expression._replaceSinCos(x.expression)},J=s([],Z);if(J==null)return null;var S=s(J,W);if(S==null)return null;if(S.length===0)return[];if(S.length===1)return O(F,d,z,{operator:S[0].operator,expression:Expression._replaceBySinCos(S[0].expression)});for(var z=0;z<S.length;z++)if(!Expression.has(S[z],Expression.Exponentiation)&&S[z].expression.gcd(x.expression).equals(S[z].expression))return F=s(F,j),O(F,d,z,{operator:S[z].operator,expression:Expression._replaceBySinCos(S[z].expression)})}//!
if((Expression.has(j.expression,Expression.Function)||Expression.has(j.expression,Expression.Exponentiation))&&!(Expression.has(x.expression,Expression.Function)||Expression.has(x.expression,Expression.Exponentiation)))return O(s(F,x),d,z,j);if((j.operator===Condition$1.NEZ&&x.operator===Condition$1.EQZ||j.operator===Condition$1.EQZ&&x.operator===Condition$1.NEZ)&&(Expression.isSingleVariablePolynomial(j.expression.multiply(x.expression))||!0)){for(var en=j.expression.polynomialGCD(x.expression);!en.equals(Expression.ONE)&&!en.equals(Expression.ONE.negate());)return j.operator===Condition$1.EQZ?j={operator:j.operator,expression:j.expression.divide(en)}:x={operator:x.operator,expression:x.expression.divide(en)},F=s(F,j),F==null?null:O(F,d,z,x);if(j.operator===Condition$1.EQZ&&Expression.isConstant(j.expression)||x.operator===Condition$1.EQZ&&Expression.isConstant(x.expression))return null}var tn=!0,Ct=Expression.isSingleVariablePolynomial(j.expression)&&Expression.isSingleVariablePolynomial(x.expression)&&Expression.isSingleVariablePolynomial(j.expression.multiply(x.expression));if(j.operator===Condition$1.NEZ&&x.operator===Condition$1.EQZ&&Ct)x=x;else if(j.operator===Condition$1.EQZ&&x.operator===Condition$1.NEZ&&Ct)x=j;else if(j.operator===Condition$1.EQZ&&x.operator===Condition$1.EQZ&&Ct){var en=j.expression.polynomialGCD(x.expression);return en instanceof Expression.Integer?null:(x={operator:x.operator,expression:en},O(F,d,z,x))}else if(j.operator===Condition$1.NEZ&&x.operator===Condition$1.NEZ&&Ct){var en=j.expression.gcd(x.expression);j={operator:j.operator,expression:j.expression.divide(en)},Expression.isConstant(j.expression)||F.push(j)}else{//!new 2020-16-02
var Q=function(Rx){if(Rx instanceof Expression.Multiplication&&Rx.a instanceof Expression.Matrix)return Rx.a.multiply(Q(Rx.b));var $x=Expression.getConstant(Rx);for(var Gx of Rx.divide($x).factors())Gx instanceof Expression.NthRoot&&Expression.isConstant(Gx.a)&&($x=$x.multiply(Gx));return $x},on=function(Rx,$x){var Gx=$x.divide(Q($x)),qx=Expression.ZERO;for(var Dx of Rx.summands()){var lE=Dx.divide(Q(Dx));lE.equals(Gx)&&(qx=qx.add(Dx))}return qx},gn=function(Rx){var $x=function(nE){return nE instanceof Expression.Exponentiation?nE.b:Expression.ONE},Gx=function(nE){return nE instanceof Expression.Exponentiation?nE.a:nE},qx=function(nE){var iE=Expression.ZERO;for(var _E of nE.factors())if(!Expression.isConstant(_E)){var nE=$x(_E);iE=iE.add(nE)}return iE},Dx=function(nE,iE){var _E=qx(nE).subtract(qx(iE)),sE=_E.isNegative()?-1:_E.negate().isNegative()?1:0;if(sE!==0)return sE;for(var ME=function(Fx){return Array.from(Fx.divide(Expression.getConstant(Fx)).factors()).reverse().filter(Px=>!Expression.isConstant(Px)).values()},fx=ME(nE),yx=ME(iE),Ix=fx.next().value,Nx=yx.next().value;Ix!=null&&Nx!=null;){var sE=0-Gx(Ix).compare4Multiplication(Gx(Nx))||$x(Ix).compare4Multiplication($x(Nx));if(sE!==0)return sE;Ix=fx.next().value,Nx=yx.next().value}return Ix!=null?1:Nx!=null?-1:0},lE=null;for(var cE of Rx.summands())(lE==null||Dx(cE,lE)>0)&&(lE=cE);return lE};if(tn&&j.operator===Condition$1.EQZ){var In=gn(j.expression),D=In.divide(Q(In))._abs();In=on(j.expression,In);var dn=x.expression,ix=0;for(var Cn of x.expression.summands())Cn.gcd(D)._abs().equals(D)&&(dn=dn.subtract(Cn.divide(In).multiply(j.expression)),ix+=1);if(ix>0)return O(s(F,j),d,z,{expression:dn,operator:x.operator})}if(tn&&x.operator===Condition$1.EQZ){var In=gn(x.expression),D=In.divide(Q(In))._abs();In=on(x.expression,In);for(var Cn of j.expression.summands())if(Cn.gcd(D)._abs().equals(D)){var ax=j.expression.subtract(Cn.divide(In).multiply(x.expression));return j.operator===Condition$1.EQZ?O(s(F,{expression:ax,operator:j.operator}),d,z,x):O(s(F,x),d,z,{expression:ax,operator:j.operator})}}if(tn&&j.operator===Condition$1.NEZ&&x.operator===Condition$1.EQZ){var In=gn(j.expression),D=In.divide(Expression.getConstant(In));for(var Cn of x.expression.summands())if(Cn.gcd(D).equals(D)||Cn.gcd(D).equals(D.negate())){var sx=Cn.divide(In);if(sx instanceof Expression.Integer&&!sx.equals(Expression.ZERO)){var lx=x.expression.subtract(sx.multiply(j.expression)),ox={expression:lx,operator:Condition$1.NEZ},hx=!1;{//! 2020-07-05
for(var hx=!1,_x=0;_x<d.length;_x++){var ux=d[_x];if(ux.operator===Condition$1.EQZ){var en=ux.expression.gcd(ox.expression);!en.equals(Expression.ONE)&&!en.equals(Expression.ONE.negate())&&(hx=!0)}}}if(hx)return O(s(s(F,j),ox),d,z-1,x)}}}//!
{var D=null,px=null,dx=null,mx=null,gx=Expression.getMultivariatePolynomial(j.expression),Sx=Expression.getMultivariatePolynomial(x.expression);if(x.operator===Condition$1.EQZ&&Sx!=null&&Sx.p.getDegree()!==1){var S=Expression.getMultivariatePolynomial(Sx.p.getCoefficient(0));if(S!=null){var Ex=S.v;Ex instanceof Expression.Symbol&&S.p.getDegree()===1&&(Sx={p:Polynomial$1.toPolynomial(x.expression,Ex),v:Ex})}}if(gx!=null&&Sx!=null){//!new 2019-24-12
//!?
x.operator===Condition$1.EQZ&&Sx!=null&&Sx.p.getDegree()===1&&j.operator===Condition$1.EQZ&&gx!=null&&gx.p.getDegree()===1&&(Expression._getReplacement(x.expression,gx.v).equals(gx.v)&&Polynomial$1.toPolynomial(x.expression,gx.v).getDegree()===0&&(gx=null),Expression._getReplacement(j.expression,Sx.v).equals(Sx.v)&&Polynomial$1.toPolynomial(j.expression,Sx.v).getDegree()===0&&(Sx=null),gx!=null&&Sx!=null&&(gx.p.getCoefficient(1)instanceof Expression.Integer||(gx=null),Sx.p.getCoefficient(1)instanceof Expression.Integer||(Sx=null)),gx!=null&&Sx!=null&&gx.v.compare4Addition(Sx.v)<0&&(gx=null)),x.operator===Condition$1.EQZ&&Sx!=null&&Sx.p.getDegree()===1&&(dx=Sx,D=j.expression,px=j.operator,mx=x),j.operator===Condition$1.EQZ&&gx!=null&&gx.p.getDegree()===1&&(dx=gx,D=x.expression,px=x.operator,mx=j)}if(dx!=null){var Cx=!1;if(Cx=Cx||dx.p.getDegree()===1&&Expression.isConstant(dx.p.getCoefficient(1))&&Expression.isConstant(dx.p.getCoefficient(0)),Cx=Cx||dx.p.getDegree()===1&&Expression.isConstant(dx.p.getCoefficient(0))&&!dx.p.getCoefficient(0).equals(Expression.ZERO)&&Expression.has(D,Expression.Exponentiation),Cx){var Ax=dx.p.getCoefficient(0).negate().divide(dx.p.getCoefficient(1)),Cn=Expression._substitute(D,dx.v,Ax,{uniqueObject:1});if(Cn.equals(D))F.push(j);else{var S={operator:px,expression:Cn};return F=s(F,S),F==null?null:O(F,d,z,mx)}}else F.push(j)}else F.push(j)}}}if(F.push(x),tn){new Condition$1(F);for(var z=0;z<F.length;z+=1){var x=F[z];if(x.operator===Condition$1.EQZ){var Tx=x.expression,en=null;for(var kx of Tx.summands()){var Cn=kx.divide(Expression.getConstant(kx));en==null?en=Cn:en=en.gcd(Cn)}if(!en.equals(Expression.ONE)&&Tx instanceof Expression.Addition&&new Condition$1(F.slice(0,z).concat(F.slice(z+1))).andZero(en).isFalse())return s(F,{expression:en,operator:Condition$1.NEZ})}}}return F};//!new 2021-10-06
if(n instanceof Expression.Division)return this._and(t,n.getNumerator()).andNotZero(n.getDenominator());var l=this;if(t===Condition$1.EQZ){const d=function(_){var S=void 0;for(var T of _.summands())for(var A of T.factors()){var R=A instanceof Expression.Exponentiation?A.a:A;R instanceof Expression.Symbol&&(S==null||R.symbol<S.symbol)&&(S=R)}return S},x=d(n);if(x!=null&&Polynomial$1.of(n)._hasIntegerLikeCoefficients()){const _=Polynomial$1.toPolynomial(n,x);for(var u of this.array)if(u.operator===Condition$1.EQZ&&Polynomial$1.of(u.expression)._hasIntegerLikeCoefficients()&&d(u.expression).symbol>=x.symbol){const S=Polynomial$1.toPolynomial(u.expression,x);if(S.getDegree()>=1){var c=Polynomial$1.polynomialGCD(_,S);if(c.getDegree()===0){const T=Polynomial$1.resultant(_,S);if(l=l.andZero(T),l.isFalse())return l}}}}}//!
var p=s(l.array,{operator:t,expression:n});return p==null?Condition$1.FALSE:p.length===0?Condition$1.TRUE:new Condition$1(p)};Condition$1.prototype.andNotZero=function(t){return this._and(Condition$1.NEZ,t)};Condition$1.prototype.andZero=function(t){return this._and(Condition$1.EQZ,t)};Condition$1.prototype.andGreaterZero=function(t){return this._and(Condition$1.GTZ,t)};Condition$1.prototype.and=function(t){if(!(t instanceof Condition$1))throw new TypeError;for(var n=this,a=0;a<t.array.length;a+=1)n=n._and(t.array[a].operator,t.array[a].expression);return n};Condition$1.prototype.isFalse=function(){return this===Condition$1.FALSE};Condition$1.prototype.isTrue=function(){return this===Condition$1.TRUE};Condition$1.prototype.toString=function(t){if(this===Condition$1.TRUE||this===Condition$1.FALSE)throw new TypeError;if(this.array.length===0)throw new TypeError;for(var n="",a=0;a<this.array.length;a+=1)n+=(a!==0?", ":"")+this.array[a].expression.toString(t)+this.array[a].operator;return n};Condition$1.TRUE=new Condition$1(new Array(0));Condition$1.FALSE=new Condition$1(void 0);Condition$1.prototype.getSolutionFor=function(t){var n=this;if(n.array==null)return null;for(var a=0;a<n.array.length;a+=1){var s=n.array[a];if(s.operator===Condition$1.EQZ){var l=Polynomial$1.toPolynomial(s.expression,t);if(l.getDegree()===1)return l.getroots()[0]}}return null};Condition$1.prototype.updateExpression=function(t,n){return this.andNotZero(t).isFalse()?Expression.ZERO:t};//!TODO: remove
Polynomial$1.prototype.toString=function(t){return t=t||{},this.toExpression(t.polynomialVariable||new Expression.Symbol("x")).toString(t)};Polynomial$1.prototype.toMathML=function(t){return t=t||{},this.toExpression(t.polynomialVariable||new Expression.Symbol("x")).toMathML(t)};Expression.Polynomial.prototype.toString=function(t){return this.polynomial.toString(t)};Expression.Polynomial.prototype.toMathML=function(t){return this.polynomial.toMathML(t)};var printPartOfAddition=function(t,n,a,s,l){if(a.equals(Expression.ZERO))return t&&n?Expression.ZERO.toMathML():"";var u=!1;a.isNegative()&&!n&&(u=!0,a=a.negateCarefully());var c=new Expression.Multiplication(Expression.ZERO,Expression.ZERO).getPrecedence(),p=a.getPrecedence()<c,d=a.equals(Expression.ONE);return(!n&&u?'<mo form="infix">&minus;</mo>':"")+(!n&&!u?'<mo form="infix">+</mo>':"")+(d?"":"<mrow>")+(d||!p?"":"<mrow><mo>(</mo>")+(d?"":a.toMathML(l))+(d||!p?"":"<mo>)</mo></mrow>")+(d?"":"<mo>&sdot;</mo>")+s.toMathML(l)+(d?"":"</mrow>")},decimalToMathML=function(t){const n=/^([+\-])?(\d+\.?\d*(?:\(\d+\)\d*)?)(?:[eE]\+?(\-?\d+))?$/.exec(t),a={sign:n[1]||"",significand:n[2]||"",exponent:n[3]||""};return(a.exponent!==""?"<mrow>":"")+(a.sign!==""?"<mrow>":"")+(a.sign==="+"?"<mo>+</mo>":"")+(a.sign==="-"?"<mo>&minus;</mo>":"")+"<mn>"+numberFormat.format(a.significand.replace(/[\(\)]/g,"")).replace(/^[\s\S]+$/g,function(s){var l=a.significand.indexOf("("),u=a.significand.lastIndexOf(")");if(l===-1||u===-1)return s;const c=numberFormat.format("0").trim().length;var p=s.length-(a.significand.length-l-1-1)*c,d=s.length-(a.significand.length-u-1)*c;return s.slice(0,p)+'<span style="text-decoration:overline;">'+s.slice(p,d)+"</span>"+s.slice(d)})+"</mn>"+(a.sign!==""?"</mrow>":"")+(a.exponent!==""?'<mo lspace="0" rspace="0">&sdot;</mo><msup><mn>'+numberFormat.format("10")+"</mn>"+decimalToMathML(a.exponent)+"</msup>":"")+(a.exponent!==""?"</mrow>":"")},complexToMathML=function(t,n){if(n.replace(/<[^>]+>/g,"")==="1")return"<mrow>"+t+"<mo>+</mo><mi>&ii;</mi></mrow>";if(n.replace(/<[^>]+>/g,"").replace(/&minus;/g,"-")==="-1")return"<mrow>"+t+"<mo>&minus;</mo><mi>&ii;</mi></mrow>";if(t==="")return"<mrow>"+n+"<mo>"+(/<msup>/.test(n)||/[^0-9]/.test(n)?"&sdot;":"&it;")+"</mo><mi>&ii;</mi></mrow>";var a="+";return/<mrow><mo>&minus;<\/mo><mn>([^<]*)<\/mn><\/mrow>(?!<\/msup>)/.test(n)&&(a="-",n=n.replace(/<mrow><mo>&minus;<\/mo><mn>([^<]*)<\/mn><\/mrow>(?!<\/msup>)/g,"<mn>$1</mn>")),"<mrow>"+t+"<mo>"+(a==="-"?"&minus;":"+")+"</mo><mrow>"+n+"<mo>"+(/<msup>/.test(n)||/[^0-9]/.test(n)?"&sdot;":"&it;")+"</mo><mi>&ii;</mi></mrow></mrow>"};Expression._decimalToMathML=decimalToMathML;Expression._complexToMathML=complexToMathML;function isConstant(t){return t instanceof Expression.NonSimplifiedExpression||t instanceof Expression.Matrix||t instanceof Expression.Polynomial?!1:Expression.isConstant(t)}var groupByTerm=function(t){if(t instanceof Expression.Division||t instanceof Expression.Addition){var n=t.getNumerator(),a=t.getDenominator(),s=a instanceof Expression.Integer?a:(Expression.getMultivariatePolynomial(a)||{p:{getContent:function(){return Expression.ONE}}}).p.getContent(),l=a.divide(s);if(isConstant(s)){var u=[];for(var c of n.summands())u.push(c);var p={};u.reverse();for(var d=0;d<u.length;d+=1){var c=u[d],x=Expression.ONE;for(var _ of c.factors())isConstant(_)&&(x=x.multiply(_));var S=c.divide(x),T="_"+S.toString();p[T]=p[T]||{constant:Expression.ZERO,term:S},p[T].constant=p[T].constant.add(x.divide(s))}var A=null;for(var T in p)if(Object.prototype.hasOwnProperty.call(p,T)){var x=p[T].constant,S=p[T].term,R=!1;A!=null&&x.isNegative()&&(x=x.negate(),R=!0);var D=new NonSimplifiedExpression(S.equals(Expression.ONE)?x:x.equals(Expression.ONE)?p[T].term:new Expression.Multiplication(x,p[T].term));A=A==null?D:new Expression.Addition(A,R?new Expression.Multiplication(Expression.ONE.negate(),D):D)}return l.equals(Expression.ONE)||(A=new Expression.Division(A,l)),new NonSimplifiedExpression(A)}}},getRounding=function(t){var n=t!=null?t.rounding:void 0;return t!=null&&n==null&&t.fractionDigits!=null&&t.fractionDigits!==-1&&(console.debug("deprecated fractionDigits, use rounding instead"),n={fractionDigits:t.fractionDigits}),n};Expression.toDecimalString=function(t,n){var a=getRounding(n);if(a!=null){if(isConstant(t))return toDecimalStringInternal$1(t,a,decimalToMathML,complexToMathML);if(!Expression.has(t,NonSimplifiedExpression)){var s=groupByTerm(t);if(s!=null)return s.toMathML(n)}}};var getPrecedence=function(t,n){var a=getRounding(n);return a!=null&&isConstant(t.unwrap())&&Expression.has(t.unwrap(),Expression.Complex)&&!t.unwrap().equals(Expression.I)?new Expression.Addition(Expression.ONE,Expression.ONE).getPrecedence():t.getPrecedence()};Expression.idCounter=0;Expression.id=function(){return(Expression.idCounter+=1).toString()};Expression.escapeHTML=function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};Expression.defaultOptions={useMatrixContainer:!1};Expression.Matrix.prototype.toMathML=function(t){var n=this.matrix;t=Expression.setTopLevel(!0,t);var a=t.useMatrixContainer==null&&Expression.defaultOptions.useMatrixContainer?!0:t.useMatrixContainer,s=t.useBraces==null?void 0:t.useBraces,l=t.columnlines==null?0:t.columnlines,u=t.variableNames==null?void 0:t.variableNames,c=t.verticalStrike==null?-1:t.verticalStrike,p=t.horizontalStrike==null?-1:t.horizontalStrike,d=t.cellIdGenerator==null?void 0:t.cellIdGenerator,x=t.pivotCell==null?void 0:t.pivotCell,_=t.isLUDecomposition2==null?void 0:t.isLUDecomposition2,S=t.highlightRow==null?-1:t.highlightRow,T=t.highlightCol==null?-1:t.highlightCol;t=Object.assign({},t,{useBraces:void 0,columnlines:void 0,variableNames:void 0,verticalStrike:void 0,horizontalStrike:void 0,cellIdGenerator:void 0,pivotCell:void 0,isLUDecomposition2:void 0,highlightRow:void 0,highlightCol:void 0});var A="",R=n.rows(),D=n.cols(),O=-1,F=t.idPrefix+"-"+Expression.id();a&&(A+='<munder accentunder="true">',A+='<mrow id="'+F+'" data-matrix="'+Expression.escapeHTML(n.toString())+'" draggable="true" tabindex="0" contextmenu="matrix-menu">'),A+=s==null?"<mrow><mo>(</mo>":"<mrow>"+(s[0]===" "?"":"<mo>"+s[0]+"</mo>");//! 2017-07-06 rowspacing="0ex" was added to make it look better with Native MathML (when it is supported) and to have the same style as in mathml.css
//!  rowspacing="0ex" is also needed when verticalStrike !== -1 and <menclose> is used inside
for(A+="<mtable"+(u!=null?' columnalign="right"':"")+">";++O<R;){var z=-1;if(u!=null){for(var j="",Z=!1;++z<D-1;)j+="<mtd>",j+=printPartOfAddition(z===D-2,!Z,n.e(O,z),new Expression.Symbol(u[z]),t),j+="</mtd>",Z=Z||!n.e(O,z).equals(Expression.ZERO);j+="<mtd><mo>=</mo></mtd><mtd>"+n.e(O,D-1).toMathML(t)+"</mtd>",(Z||!n.e(O,D-1).equals(Expression.ZERO))&&(A+="<mtr>",A+=j,A+="</mtr>")}else{for(A+="<mtr>";++z<D;){var W="",J="";l!==0&&D-1>0&&(J+=D+l===z?"border-left: 1px solid;":""),x!=null&&O===x.i&&z===x.j&&(J+="border: 1px solid; border-radius: 50%;",J+="font-weight: bolder"),p===O&&c===z?(J+="background: linear-gradient(currentColor, currentColor) no-repeat 50% 0 / 2px auto, linear-gradient(currentColor, currentColor) no-repeat 0 50% / auto 2px; opacity: 0.5",W="true"):(c===z&&(J+="background: linear-gradient(currentColor, currentColor) no-repeat 50% 0 / 2px auto; opacity: 0.5",W="true"),p===O&&(J+="background: linear-gradient(currentColor, currentColor) no-repeat 0 50% / auto 2px; opacity: 0.5;",W="true"));var en=d!=null?d(O,z):"";A+=('<mtd id="'+en+'" aria-hidden="'+W+'" style="'+J+'">').replace(/\s+[a-z\-]+\=""/g,"");var tn=z<O&&_||S===O&&(l===0||z<=D-1+l)||T===z;tn&&(A+='<mrow style="background: #80FF80; color: #3C78C2">'),A+=n.e(O,z).toMathML(t),tn&&(A+="</mrow>"),A+="</mtd>"}A+="</mtr>"}}return A+="</mtable>",A+=s==null?"<mo>)</mo></mrow>":(s[1]===" "?"":"<mo>"+s[1]+"</mo>")+"</mrow>",a&&(A+="</mrow>",A+="<mtext>",A+='<button type="button" class="matrix-menu-show" data-for-matrix="'+F+'" aria-haspopup="true" title="'+i18n.matrixMenu.title+'"></button>',A+="</mtext>",A+="</munder>"),A};Expression.Determinant.prototype.toMathML=function(t){var n=this;return n.a instanceof Expression.Matrix||n.a instanceof NonSimplifiedExpression&&n.a.e instanceof Expression.Matrix?(t=Object.assign({},t,{useBraces:["|","|"]}),n.a.toMathML(t)):Expression.Function.prototype.toMathML.call(this,t)};Expression.Transpose.prototype.toMathML=function(t){var n=this,a=this.getPrecedence()>=n.a.getPrecedence();return"<msup>"+(a?"<mrow><mo>(</mo>":"")+n.a.toMathML(t)+(a?"<mo>)</mo></mrow>":"")+"<mi>T</mi></msup>"};Expression.ComplexConjugate.prototype.toMathML=function(t){var n=this;return'<mover accent="true">'+n.a.toMathML(t)+"<mo></mo></mover>"};Expression.Pseudoinverse.prototype.toMathML=function(t){var n=this,a=this.getPrecedence()>=n.a.getPrecedence();return"<msup>"+(a?"<mrow><mo>(</mo>":"")+n.a.toMathML(t)+(a?"<mo>)</mo></mrow>":"")+'<mi><span title="pseudoinverse">+</span></mi></msup>'};Expression.SquareRoot.prototype.toMathML=function(t){var n=Expression.toDecimalString(this,t);return n??"<msqrt>"+this.a.toMathML(Expression.setTopLevel(!0,t))+"</msqrt>"};Expression.NthRoot.prototype.toMathML=function(t){var n=Expression.toDecimalString(this,t);return n??(console.assert(typeof this.n=="number"&&Math.floor(this.n)===this.n&&this.n>=3),"<mroot>"+this.a.toMathML(Expression.setTopLevel(!0,t))+"<mn>"+numberFormat.format(this.n.toString())+"</mn></mroot>")};Expression.denotations={};Expression.Function.prototype.toMathML=function(t){var n=Expression.toDecimalString(this,t);if(n!=null)return n;var a=this,s=!(a.a instanceof Expression.Matrix)&&!(a.a instanceof NonSimplifiedExpression&&a.a.e instanceof Expression.Matrix);return"<mrow><mi>"+(Expression.denotations[a.name]||a.name)+"</mi><mo>&af;</mo>"+(s?"<mrow><mo>(</mo>":"")+a.a.toMathML(Expression.setTopLevel(!0,t))+(s?"<mo>)</mo></mrow>":"")+"</mrow>"};Expression.Division.prototype.toMathML=function(t){if(t!=null&&t.nofractions)return Expression.BinaryOperation.prototype.toMathML.call(this,t);var n=Expression.toDecimalString(this,t);if(n!=null)return n;var a=this,s=a.getDenominator(),l=a.getNumerator();return"<mfrac>"+l.toMathML(Expression.setTopLevel(!0,t))+s.toMathML(Expression.setTopLevel(!0,t))+"</mfrac>"};Expression.numberFormat={format:function(t){return t.toString()}};const decimalNumberRegExp=new RegExp("\\p{Decimal_Number}","u"),replaceSimpleDigit=function(t){let n=0;for(;decimalNumberRegExp.test(String.fromCodePoint(t-n));)n+=1;return n===0?-1:(n-1)%10};let cachedFormatData={format:null,decimalSeparator:".",decimalZeroOffset:0};var numberFormat={format:function(t){var n=function(){var p=Expression.numberFormat.format(1.5).trim(),d=/[,\.]/.exec(p);return d==null?(console.error(p),"."):d[0]},a=function(){var p=Expression.numberFormat.format(0).trim().codePointAt(0),d=replaceSimpleDigit(p)===0;return d?p-48:(console.error(p),0)};cachedFormatData.format!==Expression.numberFormat&&(cachedFormatData={format:Expression.numberFormat,decimalSeparator:n(),decimalZeroOffset:a()});var s=t.indexOf(".");if(s!==-1)return numberFormat.format(t.slice(0,s))+cachedFormatData.decimalSeparator+numberFormat.format(t.slice(s+1));var l=cachedFormatData.decimalZeroOffset;if(l===0)return t;for(var u="",c=0;c<t.length;c+=1)u+=String.fromCodePoint(l+t.charCodeAt(c));return u}};Expression.Integer.prototype.toMathML=function(t){var n=this,a=n.compareTo(Expression.ZERO)<0?"-":"",s=n.compareTo(Expression.ZERO)<0?n.negate():n,l=s.value.toString(),u=numberFormat.format(l);return a==="-"?"<mrow><mo>&minus;</mo><mn>"+u+"</mn></mrow>":"<mn>"+u+"</mn>"};Expression.BinaryOperation.prototype.toMathML=function(t){t=t??{},t!=null&&t.rounding!=null&&this.unwrap()instanceof Expression.Exponentiation&&this.unwrap().a.unwrap()instanceof Expression.Symbol&&this.unwrap().a.unwrap()!==Expression.E&&this.unwrap().a.unwrap()!==Expression.PI&&!(this.unwrap().a.unwrap()instanceof Expression.PolynomialRootSymbol)&&!(this.unwrap().a.unwrap()instanceof Expression.ExpressionPolynomialRoot)&&(this.unwrap().b.unwrap()instanceof Expression.Integer||this.unwrap().b.unwrap()instanceof Expression.Negation&&this.unwrap().b.unwrap().b.unwrap()instanceof Expression.Integer)&&(t=Object.assign({},t,{rounding:null}));var n=Expression.toDecimalString(this,t);if(n!=null)return n;//!2019-05-16
if(this instanceof Expression.Addition&&t.printId==null){var a=function(Z){for(var W=[];Z.unwrap()instanceof Expression.Addition;)W.push(Z.unwrap().b),Z=Z.unwrap().a;return W.push(Z),W},S=[],p=null;for(var s of a(this)){if(p!=null){var l=!1;p.isNegative()&&(l=!0,p=p.negateCarefully());var u=this.getPrecedence()>=getPrecedence(p,t);u=u||p.isUnaryPlusMinus(),S.push((u?"<mrow><mo>(</mo>":"")+p.toMathML(Expression.setTopLevel(u,t))+(u?"<mo>)</mo></mrow>":"")),S.push(l?"<mo>&minus;</mo>":"<mo>+</mo>")}p=s}S=S.reverse().join("");var c=p,u=c.getPrecedence()+(c.isRightToLeftAssociative()?-1:0)<this.getPrecedence();return t!=null&&t.isTopLevel!=null&&t.isTopLevel===!1&&(u=u||c.isUnaryPlusMinus()),S=(u?"<mrow><mo>(</mo>":"")+c.toMathML(Expression.setTopLevel(u||t==null||t.isTopLevel,t))+(u?"<mo>)</mo></mrow>":"")+S,"<mrow>"+S+"</mrow>"}//!
var c=this.a,p=this.b,d=!1;this instanceof Expression.Addition&&p.isNegative()&&(d=!0,p=p.negateCarefully());var x=c.getPrecedence()+(c.isRightToLeftAssociative()?-1:0)<this.getPrecedence(),_=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=p.getPrecedence();t!=null&&t.isTopLevel!=null&&t.isTopLevel===!1&&(x=x||c.isUnaryPlusMinus()),_=_||p.isUnaryPlusMinus(),_=_||this.unwrap()instanceof Expression.Exponentiation&&p.unwrap()instanceof Expression.Exponentiation,x=x||this.unwrap()instanceof Expression.Exponentiation&&c.unwrap()instanceof Expression.Function,x=x||t.rounding!=null&&isConstant(c.unwrap())&&Expression.has(c.unwrap(),Expression.Complex);var S=d?"-":this.getS();if(this instanceof Expression.Exponentiation){if(c.unwrap()===Expression.E&&p.unwrap()instanceof Expression.Matrix)return"<mrow><mi>exp</mi><mo>&af;</mo>"+p.toMathML(t)+"</mrow>";var T=t;return c.unwrap()instanceof Expression.Matrix||(T=Object.assign({},t||{},{nofractions:!0})),"<msup>"+(x?"<mrow><mo>(</mo>":"")+c.toMathML(Expression.setTopLevel(x||t==null||t.isTopLevel,t))+(x?"<mo>)</mo></mrow>":"")+(_?"<mrow><mo>(</mo>":"")+p.toMathML(Expression.setTopLevel(_,T))+(_?"<mo>)</mo></mrow>":"")+"</msup>"}if(this.isNegation())return"<mrow><mo>&minus;</mo>"+(_?"<mrow><mo>(</mo>":"")+p.toMathML(Expression.setTopLevel(_,t))+(_?"<mo>)</mo></mrow>":"")+"</mrow>";var A=function(F){return F instanceof Expression.Exponentiation&&(F.b.unwrap()instanceof Expression.Integer||F.b.unwrap()instanceof Expression.Symbol&&F.b.unwrap().symbol==="T")?F.a.unwrap():F},R=function(F){return!x&&!_&&(F.a.unwrap()instanceof Expression.Integer||A(F.a.unwrap())instanceof Expression.Symbol||F.a.unwrap()instanceof Expression.Multiplication&&A(F.a.unwrap().b.unwrap())instanceof Expression.Symbol)&&(A(F.b.unwrap())instanceof Expression.Symbol||t.rounding==null&&F.b.unwrap()instanceof Expression.SquareRoot)};//!2020-08-02
if(this instanceof Expression.Multiplication&&t.printId==null){for(var D=!0,s=this;s!=null;s=s instanceof Expression.Multiplication?s.a.unwrap():null){var O=s instanceof Expression.Multiplication?s.b.unwrap():s;A(O).unwrap()instanceof Expression.Symbol&&Expression.isScalar(O)||(D=!1),O instanceof Expression.ExpressionWithPolynomialRoot&&(D=!1),O instanceof Expression.ExpressionPolynomialRoot&&(D=!1)}if(D){for(var S=[],s=this;s!=null;s=s instanceof Expression.Multiplication?s.a.unwrap():null){var O=s instanceof Expression.Multiplication?s.b.unwrap():s;S.push(O.toMathML(Expression.setTopLevel(u,t)))}return S=S.reverse().join("<mo>&it;</mo>"),"<mrow>"+S+"</mrow>"}}return"<mrow>"+(x?"<mrow><mo>(</mo>":"")+c.toMathML(Expression.setTopLevel(x||t==null||t.isTopLevel,t))+(x?"<mo>)</mo></mrow>":"")+(S==="*"?R(this)?"<mo>&it;</mo>":"<mo>&sdot;</mo>":S==="-"?"<mo>&minus;</mo>":S==="/"?"<mo>&#x2215;</mo>":this instanceof Expression.Comma?'<mo lspace="0em" rspace="0.55em">,</mo>':"<mo>"+S+"</mo>")+(_?"<mrow><mo>(</mo>":"")+p.toMathML(Expression.setTopLevel(_,t))+(_?"<mo>)</mo></mrow>":"")+"</mrow>"};Expression.Symbol.prototype.toMathML=function(t){var n=this,a=n.symbol,s=a.indexOf("_");if(s!==-1){for(var l=a.slice(s+1).replace(/^\(|\)$/g,"").split(","),u="",c=0;c<l.length;c+=1)u+=c!==0?"<mo>,</mo>":"",u+=/^\d+$/.exec(l[c])!=null?Expression.Integer.fromString(l[c]).toMathML():"<mi>"+l[c]+"</mi>";l.length>1&&(u="<mrow>"+u+"</mrow>");var p=this instanceof Expression.MatrixSymbol&&/^[a-z]$/.test(a.slice(0,s));return"<msub><mi"+(p?' mathvariant="bold-italic"':"")+">"+a.slice(0,s)+"</mi>"+u+"</msub>"}var p=this instanceof Expression.MatrixSymbol&&/^[a-z]$/.test(a);return"<mi"+(p?' mathvariant="bold-italic"':"")+">"+(this instanceof Expression.IdentityMatrix&&typeof i18n<"u"?'<span class="dotted-underline" title="'+i18n.identityMatrix+'" aria-label="'+i18n.identityMatrix+'">'+a+"</span>":a)+"</mi>"};Expression.Negation.prototype.toMathML=function(t){var n=this.b,a=this.getPrecedence()+(this.isRightToLeftAssociative()?-1:0)>=n.getPrecedence();return a=a||n.isUnaryPlusMinus(),"<mrow><mo>&minus;</mo>"+(a?"<mrow><mo>(</mo>":"")+n.toMathML(Expression.setTopLevel(a,t))+(a?"<mo>)</mo></mrow>":"")+"</mrow>"};Expression.Factorial.prototype.toMathML=function(t){var n=this.n.unwrap(),a=!(n instanceof Expression.Integer&&n.compareTo(Expression.ZERO)>0);return"<mrow>"+(a?"<mrow><mo>(</mo>":"")+n.toMathML(Expression.setTopLevel(a,t))+(a?"<mo>)</mo></mrow>":"")+"<mo>!</mo></mrow>"};Condition$1.prototype.toMathML=function(t){if(this===Condition$1.TRUE||this===Condition$1.FALSE)throw new TypeError;if(this.array.length===0)throw new TypeError;for(var n="",a=0;a<this.array.length;a+=1){var s=this.array[a];n+=a!==0?'<mo lspace="0em" rspace="0.55em">,</mo>':"",n+="<mrow>";var l="<mo>"+(s.operator===Condition$1.NEZ?"&ne;":s.operator===Condition$1.EQZ?"=":s.operator===Condition$1.GTZ?"&gt;":"???")+"</mo>";if(s.expression instanceof Expression.Addition&&s.expression.a instanceof Expression.Symbol&&s.expression.b instanceof Expression.Integer){var u=s.expression.a,c=s.expression.b.negate();n+=u.toMathML(t)+l+c.toMathML(t)}else n+=s.expression.toMathML(t)+l+Expression.ZERO.toMathML();n+="</mrow>"}return this.array.length===1?n:"<mrow>"+n+"</mrow>"};Expression.Complex.prototype.toMathML=function(t){return this.toStringInternal(t,"<mo>&it;</mo>","<mi>&ii;</mi>","<mo>&minus;</mo>","<mo>+</mo>","<mrow>","</mrow>",function(n,a){return n.toMathML(a)})};Expression.GF2.prototype.toMathML=function(t){return this.a.toMathML(t)};Expression.GF2Value.prototype.toMathML=function(t){return"<mrow><mn>"+this.value.toString()+"</mn></mrow>"};Expression.Degrees.prototype.toMathML=function(t){return"<mrow>"+this.value.toMathML(t)+"<mo>&it;</mo><mi>&deg;</mi></mrow>"};Expression.Radians.prototype.toMathML=function(t){return"<mrow>"+this.value.toMathML(t)+"<mo>&it;</mo><mi>rad</mi></mrow>"};NonSimplifiedExpression.prototype.toMathML=function(t){return t!=null&&t.printId!=null?'<mrow id="'+this.getId()+'">'+this.e.toMathML(t)+"</mrow>":this.e.toMathML(t)};Expression.prototype.toMathML=function(t){throw new TypeError};Expression.DecimalFraction.prototype.toMathML=function(t){return decimalToMathML(this.toString())};primeFactor._isPrime;function simplify_algebra(t){var n=t.replace(/([CRL]+)([0-9]*)/g,"$1_$2"),a=ExpressionParser.parse(n),s=a.toString(),l=s.replace(/([CRL]+)_([0-9]*)/g,"$1$2");return[l,a.toMathML()]}function build_and_solve_mna(t,n,a,s){var l,u,c;const p=a[n[0]].type==="iprobe",d=a,x=Object.values(d).filter(j=>j.type==="iprobe").length,_=Object.values(d).filter(j=>j.type==="opamp").length;if("vin"in d)u=d.vin.ports[0];else if("iin"in d)c=d.iin.ports[0];else{console.log("no iin or vin");return}const S="vin"in d?"vin":"iin",T=S=="vin"?1:0;var A=new Array(t+T+_+x);for(l=0;l<A.length;l++)A[l]=new Array(A.length).fill("0");var R;for(const j in d){const Z=d[j];if(["inductor","capacitor","resistor"].includes(Z.type)){Z.type=="resistor"?R=j:Z.type=="inductor"?R=`(s*${j})`:R=`1/(s*${j})`;for(const W of Z.ports)W!==null&&(A[W][W]+=`+${R}^(-1)`);Z.ports.includes(null)||(A[Z.ports[0]][Z.ports[1]]+=`-${R}^(-1)`,A[Z.ports[1]][Z.ports[0]]+=`-${R}^(-1)`)}}S=="vin"&&(A[A.length-1-_-x][u]="1",A[u][A.length-1-_-x]="1");try{var D=0,O=0;for(const en in d){const tn=d[en];tn.type==="opamp"?(tn.ports[0]!=null&&(A[t+T+D][tn.ports[0]]="1"),tn.ports[1]!=null&&(A[t+T+D][tn.ports[1]]="-1"),tn.ports[2]!=null&&(A[tn.ports[2]][t+T+D]="1"),D++):tn.type==="iprobe"&&(console.log("iprobe",t+T+_+O,tn.ports[0]),A[t+T+_+O][tn.ports[0]]="1",A[tn.ports[0]][t+T+_+O]="1",A[t+T+_+O][tn.ports[1]]="-1",A[tn.ports[1]][t+T+_+O]="-1",O++)}var F=[];for(l=0;l<A.length;l++)F.push("["+A[l].join(",")+"]");const j=F.join(",");if(algebriteExports.eval("clearall"),algebriteExports.eval("mna = ["+j+"]"),A.length==1)algebriteExports.eval(`mna_vo_vi = 1/(${A[0]})`);else if(algebriteExports.eval("inv_mna = inv(mna)"),p)S=="vin"?algebriteExports.eval("mna_vo_vi = (inv_mna["+A.length+"]["+(A.length-_-x)+"])"):algebriteExports.eval("mna_vo_vi = (inv_mna["+A.length+"]["+(c+1)+"])");else if(n.length==1){const en=d[n[0]].ports[0];S=="vin"?algebriteExports.eval("mna_vo_vi = (inv_mna["+(en+1)+"]["+(A.length-_-x)+"])"):algebriteExports.eval("mna_vo_vi = (inv_mna["+(en+1)+"]["+(c+1)+"])")}else{const en=d[n[0]].ports[0],tn=d[n[1]].ports[0];S=="vin"?algebriteExports.eval(`mna_vo_vi = inv_mna[${en+1}][${A.length-_-x}] - inv_mna[${tn+1}][${A.length-_-x}]`):algebriteExports.eval(`mna_vo_vi = inv_mna[${en+1}][${c+1}] - inv_mna[${tn+1}][${c+1}]`)}var z=algebriteExports.eval("mna_vo_vi").toString();for(const en in s)z=z.replaceAll(en,s[en]);const[Z,W]=simplify_algebra(z);algebriteExports.eval("complex_response = subst(s*i,s,mna_vo_vi)"),algebriteExports.eval("abs_complex_response = abs(complex_response)");const J=algebriteExports.eval("abs_complex_response").toString();return[Z,W,J]}catch(j){return console.log("Building MNA matrix failed with this error:",j),["","",""]}}function calcBilinear(){algebriteExports.eval("bilinear = subst((2/T)*(Z-1)/(Z+1),s,mna_vo_vi)");try{return simplify_algebra(algebriteExports.eval("bilinear").toString())}catch(t){return console.log(t),["","<mtext>Having trouble calculating bilinear transform</mtext>"]}}function getAppBarUtilityClass(t){return generateUtilityClass("MuiAppBar",t)}generateUtilityClasses("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const useUtilityClasses$d=t=>{const{color:n,position:a,classes:s}=t,l={root:["root",`color${capitalize(n)}`,`position${capitalize(a)}`]};return composeClasses(l,getAppBarUtilityClass,s)},joinVars=(t,n)=>t?`${t==null?void 0:t.replace(")","")}, ${n})`:n,AppBarRoot=styled(Paper,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`position${capitalize(a.position)}`],n[`color${capitalize(a.color)}`]]}})(memoTheme(({theme:t})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100]),...t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])})}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter(["contrastText"])).map(([n])=>({props:{color:n},style:{"--AppBar-background":(t.vars??t).palette[n].main,"--AppBar-color":(t.vars??t).palette[n].contrastText}})),{props:n=>n.enableColorOnDark===!0&&!["inherit","transparent"].includes(n.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:n=>n.enableColorOnDark===!1&&!["inherit","transparent"].includes(n.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundColor:t.vars?joinVars(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?joinVars(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundImage:"none"})}}]}))),AppBar=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiAppBar"}),{className:l,color:u="primary",enableColorOnDark:c=!1,position:p="fixed",...d}=s,x={...s,color:u,position:p,enableColorOnDark:c},_=useUtilityClasses$d(x);return jsxRuntimeExports.jsx(AppBarRoot,{square:!0,component:"header",ownerState:x,elevation:4,className:clsx(_.root,l,p==="fixed"&&"mui-fixed"),ref:a,...d})});function getToolbarUtilityClass(t){return generateUtilityClass("MuiToolbar",t)}generateUtilityClasses("MuiToolbar",["root","gutters","regular","dense"]);const useUtilityClasses$c=t=>{const{classes:n,disableGutters:a,variant:s}=t;return composeClasses({root:["root",!a&&"gutters",s]},getToolbarUtilityClass,n)},ToolbarRoot=styled("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,!a.disableGutters&&n.gutters,n[a.variant]]}})(memoTheme(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:n})=>!n.disableGutters,style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}))),Toolbar=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiToolbar"}),{className:l,component:u="div",disableGutters:c=!1,variant:p="regular",...d}=s,x={...s,component:u,disableGutters:c,variant:p},_=useUtilityClasses$c(x);return jsxRuntimeExports.jsx(ToolbarRoot,{as:u,className:clsx(_.root,l),ref:a,ownerState:x,...d})});function useSnackbar(t={}){const{autoHideDuration:n=null,disableWindowBlurListener:a=!1,onClose:s,open:l,resumeHideDuration:u}=t,c=useTimeout();reactExports.useEffect(()=>{if(!l)return;function F(z){z.defaultPrevented||z.key==="Escape"&&(s==null||s(z,"escapeKeyDown"))}return document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F)}},[l,s]);const p=useEventCallback((F,z)=>{s==null||s(F,z)}),d=useEventCallback(F=>{!s||F==null||c.start(F,()=>{p(null,"timeout")})});reactExports.useEffect(()=>(l&&d(n),c.clear),[l,n,d,c]);const x=F=>{s==null||s(F,"clickaway")},_=c.clear,S=reactExports.useCallback(()=>{n!=null&&d(u??n*.5)},[n,u,d]),T=F=>z=>{const j=F.onBlur;j==null||j(z),S()},A=F=>z=>{const j=F.onFocus;j==null||j(z),_()},R=F=>z=>{const j=F.onMouseEnter;j==null||j(z),_()},D=F=>z=>{const j=F.onMouseLeave;j==null||j(z),S()};return reactExports.useEffect(()=>{if(!a&&l)return window.addEventListener("focus",S),window.addEventListener("blur",_),()=>{window.removeEventListener("focus",S),window.removeEventListener("blur",_)}},[a,l,S,_]),{getRootProps:(F={})=>{const z={...extractEventHandlers(t),...extractEventHandlers(F)};return{role:"presentation",...F,...z,onBlur:T(z),onFocus:A(z),onMouseEnter:R(z),onMouseLeave:D(z)}},onClickAway:x}}function mapEventPropToEvent(t){return t.substring(2).toLowerCase()}function clickedRootScrollbar(t,n){return n.documentElement.clientWidth<t.clientX||n.documentElement.clientHeight<t.clientY}function ClickAwayListener(t){const{children:n,disableReactTree:a=!1,mouseEvent:s="onClick",onClickAway:l,touchEvent:u="onTouchEnd"}=t,c=reactExports.useRef(!1),p=reactExports.useRef(null),d=reactExports.useRef(!1),x=reactExports.useRef(!1);reactExports.useEffect(()=>(setTimeout(()=>{d.current=!0},0),()=>{d.current=!1}),[]);const _=useForkRef(getReactElementRef(n),p),S=useEventCallback(R=>{const D=x.current;x.current=!1;const O=ownerDocument(p.current);if(!d.current||!p.current||"clientX"in R&&clickedRootScrollbar(R,O))return;if(c.current){c.current=!1;return}let F;R.composedPath?F=R.composedPath().includes(p.current):F=!O.documentElement.contains(R.target)||p.current.contains(R.target),!F&&(a||!D)&&l(R)}),T=R=>D=>{x.current=!0;const O=n.props[R];O&&O(D)},A={ref:_};return u!==!1&&(A[u]=T(u)),reactExports.useEffect(()=>{if(u!==!1){const R=mapEventPropToEvent(u),D=ownerDocument(p.current),O=()=>{c.current=!0};return D.addEventListener(R,S),D.addEventListener("touchmove",O),()=>{D.removeEventListener(R,S),D.removeEventListener("touchmove",O)}}},[S,u]),s!==!1&&(A[s]=T(s)),reactExports.useEffect(()=>{if(s!==!1){const R=mapEventPropToEvent(s),D=ownerDocument(p.current);return D.addEventListener(R,S),()=>{D.removeEventListener(R,S)}}},[S,s]),reactExports.cloneElement(n,A)}function getSnackbarContentUtilityClass(t){return generateUtilityClass("MuiSnackbarContent",t)}generateUtilityClasses("MuiSnackbarContent",["root","message","action"]);const useUtilityClasses$b=t=>{const{classes:n}=t;return composeClasses({root:["root"],action:["action"],message:["message"]},getSnackbarContentUtilityClass,n)},SnackbarContentRoot=styled(Paper,{name:"MuiSnackbarContent",slot:"Root"})(memoTheme(({theme:t})=>{const n=t.palette.mode==="light"?.8:.98;return{...t.typography.body2,color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(emphasize(t.palette.background.default,n)),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:emphasize(t.palette.background.default,n),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),SnackbarContentMessage=styled("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),SnackbarContentAction=styled("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),SnackbarContent=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiSnackbarContent"}),{action:l,className:u,message:c,role:p="alert",...d}=s,x=s,_=useUtilityClasses$b(x);return jsxRuntimeExports.jsxs(SnackbarContentRoot,{role:p,elevation:6,className:clsx(_.root,u),ownerState:x,ref:a,...d,children:[jsxRuntimeExports.jsx(SnackbarContentMessage,{className:_.message,ownerState:x,children:c}),l?jsxRuntimeExports.jsx(SnackbarContentAction,{className:_.action,ownerState:x,children:l}):null]})});function getSnackbarUtilityClass(t){return generateUtilityClass("MuiSnackbar",t)}generateUtilityClasses("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const useUtilityClasses$a=t=>{const{classes:n,anchorOrigin:a}=t,s={root:["root",`anchorOrigin${capitalize(a.vertical)}${capitalize(a.horizontal)}`]};return composeClasses(s,getSnackbarUtilityClass,n)},SnackbarRoot=styled("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`anchorOrigin${capitalize(a.anchorOrigin.vertical)}${capitalize(a.anchorOrigin.horizontal)}`]]}})(memoTheme(({theme:t})=>({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:n})=>n.anchorOrigin.vertical==="top",style:{top:8,[t.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:n})=>n.anchorOrigin.vertical!=="top",style:{bottom:8,[t.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[t.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[t.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="center",style:{[t.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Snackbar=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiSnackbar"}),l=useTheme(),u={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{action:c,anchorOrigin:{vertical:p,horizontal:d}={vertical:"bottom",horizontal:"left"},autoHideDuration:x=null,children:_,className:S,ClickAwayListenerProps:T,ContentProps:A,disableWindowBlurListener:R=!1,message:D,onBlur:O,onClose:F,onFocus:z,onMouseEnter:j,onMouseLeave:Z,open:W,resumeHideDuration:J,slots:en={},slotProps:tn={},TransitionComponent:Ct,transitionDuration:Q=u,TransitionProps:{onEnter:on,onExited:gn,...In}={},...dn}=s,ix={...s,anchorOrigin:{vertical:p,horizontal:d},autoHideDuration:x,disableWindowBlurListener:R,TransitionComponent:Ct,transitionDuration:Q},Cn=useUtilityClasses$a(ix),{getRootProps:ax,onClickAway:sx}=useSnackbar({...ix}),[lx,ox]=reactExports.useState(!0),hx=kx=>{ox(!0),gn&&gn(kx)},_x=(kx,Rx)=>{ox(!1),on&&on(kx,Rx)},ux={slots:{transition:Ct,...en},slotProps:{content:A,clickAwayListener:T,transition:In,...tn}},[px,dx]=useSlot("root",{ref:a,className:[Cn.root,S],elementType:SnackbarRoot,getSlotProps:ax,externalForwardedProps:{...ux,...dn},ownerState:ix}),[mx,{ownerState:gx,...Sx}]=useSlot("clickAwayListener",{elementType:ClickAwayListener,externalForwardedProps:ux,getSlotProps:kx=>({onClickAway:(...Rx)=>{var Gx;const $x=Rx[0];(Gx=kx.onClickAway)==null||Gx.call(kx,...Rx),!($x!=null&&$x.defaultMuiPrevented)&&sx(...Rx)}}),ownerState:ix}),[Ex,Cx]=useSlot("content",{elementType:SnackbarContent,shouldForwardComponentProp:!0,externalForwardedProps:ux,additionalProps:{message:D,action:c},ownerState:ix}),[Ax,Tx]=useSlot("transition",{elementType:Grow,externalForwardedProps:ux,getSlotProps:kx=>({onEnter:(...Rx)=>{var $x;($x=kx.onEnter)==null||$x.call(kx,...Rx),_x(...Rx)},onExited:(...Rx)=>{var $x;($x=kx.onExited)==null||$x.call(kx,...Rx),hx(...Rx)}}),additionalProps:{appear:!0,in:W,timeout:Q,direction:p==="top"?"down":"up"},ownerState:ix});return!W&&lx?null:jsxRuntimeExports.jsx(mx,{...Sx,...en.clickAwayListener&&{ownerState:gx},children:jsxRuntimeExports.jsx(px,{...dx,children:jsxRuntimeExports.jsx(Ax,{...Tx,children:_||jsxRuntimeExports.jsx(Ex,{...Cx})})})})}),CircuitSolverSVG="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%20stroke='rgb(184,%20255,%20241)'%20fill='none'%20stroke-width='5'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c!--%20Outer%20rounded%20rectangle%20--%3e%3crect%20x='5'%20y='5'%20width='90'%20height='90'%20rx='10'%20ry='10'%20/%3e%3c!--%20Top%20vertical%20lines%20--%3e%3cline%20x1='20'%20y1='5'%20x2='20'%20y2='30'%20/%3e%3cline%20x1='50'%20y1='5'%20x2='50'%20y2='30'%20/%3e%3cline%20x1='80'%20y1='5'%20x2='80'%20y2='30'%20/%3e%3c!--%20Bottom%20vertical%20lines%20--%3e%3cline%20x1='30'%20y1='95'%20x2='30'%20y2='70'%20/%3e%3cline%20x1='70'%20y1='95'%20x2='70'%20y2='70'%20/%3e%3c!--%20Horizontal%20traces%20--%3e%3cline%20x1='5'%20y1='50'%20x2='30'%20y2='50'%20/%3e%3cline%20x1='70'%20y1='50'%20x2='95'%20y2='50'%20/%3e%3c!--%20Connect%20top%20to%20mid%20circles%20--%3e%3cline%20x1='20'%20y1='30'%20x2='30'%20y2='50'%20/%3e%3cline%20x1='50'%20y1='30'%20x2='50'%20y2='50'%20/%3e%3cline%20x1='80'%20y1='30'%20x2='70'%20y2='50'%20/%3e%3c!--%20Connect%20mid%20to%20bottom%20circles%20--%3e%3cline%20x1='30'%20y1='50'%20x2='30'%20y2='70'%20/%3e%3cline%20x1='70'%20y1='50'%20x2='70'%20y2='70'%20/%3e%3c!--%20Pads%20(circles)%20--%3e%3ccircle%20cx='20'%20cy='30'%20r='5'%20/%3e%3ccircle%20cx='50'%20cy='30'%20r='5'%20/%3e%3ccircle%20cx='80'%20cy='30'%20r='5'%20/%3e%3ccircle%20cx='30'%20cy='50'%20r='5'%20/%3e%3ccircle%20cx='70'%20cy='50'%20r='5'%20/%3e%3ccircle%20cx='30'%20cy='70'%20r='5'%20/%3e%3ccircle%20cx='70'%20cy='70'%20r='5'%20/%3e%3c/svg%3e",SaveIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),HomeIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}));function NavBar({stateToURL:t}){const[n,a]=reactExports.useState(!1);return jsxRuntimeExports.jsxs(ThemeProvider,{theme:theme$1,children:[jsxRuntimeExports.jsx(Snackbar,{open:n,autoHideDuration:1e4,onClose:()=>a(!1),anchorOrigin:{vertical:"top",horizontal:"right"},message:"This Snackbar will be dismissed in 5 seconds.",children:jsxRuntimeExports.jsx(SnackbarContent,{message:"Shareable URL copied to clipboard! Your whole website state is in the URL",sx:{backgroundColor:"#2196f3",color:"#fff",cursor:"pointer",maxWidth:200}})}),jsxRuntimeExports.jsx(Box,{sx:{flexGrow:1},children:jsxRuntimeExports.jsx(AppBar,{position:"static",sx:{backgroundColor:"rgb(37, 50, 64)",py:1},children:jsxRuntimeExports.jsxs(Toolbar,{style:{minHeight:0},children:[jsxRuntimeExports.jsx("img",{src:CircuitSolverSVG,alt:"Smith Chart",width:"30",height:"30",style:{marginRight:"12px"}}),jsxRuntimeExports.jsx(Typography,{variant:"h6",component:"div",sx:{fontWeight:"bold",display:{xs:"none",sm:"block"}},children:"ONLINE CIRCUIT SOLVER"}),jsxRuntimeExports.jsx("div",{style:{flexGrow:1,display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsx(Tooltip,{title:"Copy shareable URL",placement:"bottom",children:jsxRuntimeExports.jsx(IconButton,{"aria-label":"download",color:"bland",onClick:()=>{const s=t();navigator.clipboard.writeText(s).then(()=>{a(!0)})},children:jsxRuntimeExports.jsx(SaveIcon,{})})})}),jsxRuntimeExports.jsxs(Stack,{spacing:1,direction:{sm:"column",xs:"column",md:"row"},children:[jsxRuntimeExports.jsx(Button,{variant:"contained",color:"bland",component:"a",href:"https://www.will-kelsey.com",children:jsxRuntimeExports.jsx(HomeIcon,{})}),jsxRuntimeExports.jsx(Button,{variant:"contained",color:"bland",component:"a",href:"https://onlinesmithchart.com",children:"Smith Chart"}),jsxRuntimeExports.jsx(Button,{variant:"contained",color:"bland",component:"a",href:"https://www.will-kelsey.com/circuitSolver",children:"Circuit Solver"})]})]})})})]})}function ChoseTF({setResults:t,nodes:n,fullyConnectedComponents:a,componentValuesSolved:s}){const l=[],u=[];for(const d in a)["vin","iin"].includes(a[d].type)&&u.push(a[d].type);for(const d in a)["vprobe","iprobe"].includes(a[d].type)&&l.push(d);const c=l.filter(d=>a[d].type=="vprobe");c.length==2&&(l.push(`${c[0]}-${c[1]}`),l.push(`${c[1]}-${c[0]}`));const p={};for(const d in a)p[d]=d;return jsxRuntimeExports.jsx(Grid$1,{container:!0,spacing:1,sx:{mt:1},children:u.length==0||l.length==0?jsxRuntimeExports.jsx(Box,{sx:{color:"red"},children:jsxRuntimeExports.jsxs("p",{children:["No path found from ",jsxRuntimeExports.jsx("b",{children:"vin"})," or ",jsxRuntimeExports.jsx("b",{children:"iin"})," to ",jsxRuntimeExports.jsx("b",{children:"vprobe"})," or ",jsxRuntimeExports.jsx("b",{children:"iprobe"})]})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Grid$1,{size:12,children:"Calculate..."}),l.map(d=>{const x=d.includes("-")?d.split("-"):[d];return jsxRuntimeExports.jsx(Grid$1,{size:{xs:4,sm:2,lg:1},children:jsxRuntimeExports.jsx(Button,{variant:"contained",color:"info",fullWidth:!0,sx:{py:1,justifyContent:"center",fontSize:"1.4em"},onClick:()=>{const[_,S,T]=build_and_solve_mna(n.length,x,a,p),A=`<math><mfrac><mrow><mi>${d}</mi></mrow><mrow><msub><mi>${u[0]=="vin"?"V":"I"}</mi><mi>in</mi></msub></mrow></mfrac><mo>=</mo>${S}</math>`;t({text:_,mathML:A,complexResponse:T,bilinearRaw:"",bilinearMathML:""})},children:jsxRuntimeExports.jsx("math",{xmlns:"http://www.w3.org/1998/Math/MathML",children:jsxRuntimeExports.jsxs("mfrac",{children:[jsxRuntimeExports.jsx("mi",{children:d}),u[0]=="vin"?jsxRuntimeExports.jsxs("msub",{children:[jsxRuntimeExports.jsx("mi",{children:"V"}),jsxRuntimeExports.jsx("mi",{children:"in"})]}):jsxRuntimeExports.jsxs("msub",{children:[jsxRuntimeExports.jsx("mi",{children:"I"}),jsxRuntimeExports.jsx("mi",{children:"in"})]})]})})},d)},d)})]})})}var bundle_min$1={exports:{}},bundle_min=bundle_min$1.exports,hasRequiredBundle_min;function requireBundle_min(){return hasRequiredBundle_min||(hasRequiredBundle_min=1,function(t,n){(function(a,s){t.exports=s()})(bundle_min,()=>(()=>{var a={4582:(c,p)=>{function d(S,T){return T===void 0&&(T=Object),T&&typeof T.freeze=="function"?T.freeze(S):S}var x=d({HTML:"text/html",isHTML:function(S){return S===x.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),_=d({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(S){return S===_.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});p.assign=function(S,T){if(S===null||typeof S!="object")throw new TypeError("target is not an object");for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&(S[A]=T[A]);return S},p.find=function(S,T,A){if(A===void 0&&(A=Array.prototype),S&&typeof A.find=="function")return A.find.call(S,T);for(var R=0;R<S.length;R++)if(Object.prototype.hasOwnProperty.call(S,R)){var D=S[R];if(T.call(void 0,D,R,S))return D}},p.freeze=d,p.MIME_TYPE=x,p.NAMESPACE=_},5752:(c,p,d)=>{var x=d(4582),_=d(4722),S=d(6559),T=d(4466),A=_.DOMImplementation,R=x.NAMESPACE,D=T.ParseError,O=T.XMLReader;function F(tn){return tn.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function z(tn){this.options=tn||{locator:{}}}function j(){this.cdata=!1}function Z(tn,Ct){Ct.lineNumber=tn.lineNumber,Ct.columnNumber=tn.columnNumber}function W(tn){if(tn)return`
@`+(tn.systemId||"")+"#[line:"+tn.lineNumber+",col:"+tn.columnNumber+"]"}function J(tn,Ct,Q){return typeof tn=="string"?tn.substr(Ct,Q):tn.length>=Ct+Q||Ct?new java.lang.String(tn,Ct,Q)+"":tn}function en(tn,Ct){tn.currentElement?tn.currentElement.appendChild(Ct):tn.doc.appendChild(Ct)}z.prototype.parseFromString=function(tn,Ct){var Q=this.options,on=new O,gn=Q.domBuilder||new j,In=Q.errorHandler,dn=Q.locator,ix=Q.xmlns||{},Cn=/\/x?html?$/.test(Ct),ax=Cn?S.HTML_ENTITIES:S.XML_ENTITIES;dn&&gn.setDocumentLocator(dn),on.errorHandler=function(lx,ox,hx){if(!lx){if(ox instanceof j)return ox;lx=ox}var _x={},ux=lx instanceof Function;function px(dx){var mx=lx[dx];!mx&&ux&&(mx=lx.length==2?function(gx){lx(dx,gx)}:lx),_x[dx]=mx&&function(gx){mx("[xmldom "+dx+"]	"+gx+W(hx))}||function(){}}return hx=hx||{},px("warning"),px("error"),px("fatalError"),_x}(In,gn,dn),on.domBuilder=Q.domBuilder||gn,Cn&&(ix[""]=R.HTML),ix.xml=ix.xml||R.XML;var sx=Q.normalizeLineEndings||F;return tn&&typeof tn=="string"?on.parse(sx(tn),ix,ax):on.errorHandler.error("invalid doc source"),gn.doc},j.prototype={startDocument:function(){this.doc=new A().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(tn,Ct,Q,on){var gn=this.doc,In=gn.createElementNS(tn,Q||Ct),dn=on.length;en(this,In),this.currentElement=In,this.locator&&Z(this.locator,In);for(var ix=0;ix<dn;ix++){tn=on.getURI(ix);var Cn=on.getValue(ix),ax=(Q=on.getQName(ix),gn.createAttributeNS(tn,Q));this.locator&&Z(on.getLocator(ix),ax),ax.value=ax.nodeValue=Cn,In.setAttributeNode(ax)}},endElement:function(tn,Ct,Q){var on=this.currentElement;on.tagName,this.currentElement=on.parentNode},startPrefixMapping:function(tn,Ct){},endPrefixMapping:function(tn){},processingInstruction:function(tn,Ct){var Q=this.doc.createProcessingInstruction(tn,Ct);this.locator&&Z(this.locator,Q),en(this,Q)},ignorableWhitespace:function(tn,Ct,Q){},characters:function(tn,Ct,Q){if(tn=J.apply(this,arguments)){if(this.cdata)var on=this.doc.createCDATASection(tn);else on=this.doc.createTextNode(tn);this.currentElement?this.currentElement.appendChild(on):/^\s*$/.test(tn)&&this.doc.appendChild(on),this.locator&&Z(this.locator,on)}},skippedEntity:function(tn){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(tn){(this.locator=tn)&&(tn.lineNumber=0)},comment:function(tn,Ct,Q){tn=J.apply(this,arguments);var on=this.doc.createComment(tn);this.locator&&Z(this.locator,on),en(this,on)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(tn,Ct,Q){var on=this.doc.implementation;if(on&&on.createDocumentType){var gn=on.createDocumentType(tn,Ct,Q);this.locator&&Z(this.locator,gn),en(this,gn),this.doc.doctype=gn}},warning:function(tn){console.warn("[xmldom warning]	"+tn,W(this.locator))},error:function(tn){console.error("[xmldom error]	"+tn,W(this.locator))},fatalError:function(tn){throw new D(tn,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(tn){j.prototype[tn]=function(){return null}}),p.DOMParser=z},4722:(c,p,d)=>{var x=d(4582),_=x.find,S=x.NAMESPACE;function T(vx){return vx!==""}function A(vx,xx){return vx.hasOwnProperty(xx)||(vx[xx]=!0),vx}function R(vx){if(!vx)return[];var xx=function(Mx){return Mx?Mx.split(/[\t\n\f\r ]+/).filter(T):[]}(vx);return Object.keys(xx.reduce(A,{}))}function D(vx,xx){for(var Mx in vx)Object.prototype.hasOwnProperty.call(vx,Mx)&&(xx[Mx]=vx[Mx])}function O(vx,xx){var Mx=vx.prototype;if(!(Mx instanceof xx)){let Kx=function(){};var Lx=Kx;Kx.prototype=xx.prototype,D(Mx,Kx=new Kx),vx.prototype=Mx=Kx}Mx.constructor!=vx&&(typeof vx!="function"&&console.error("unknown Class:"+vx),Mx.constructor=vx)}var F={},z=F.ELEMENT_NODE=1,j=F.ATTRIBUTE_NODE=2,Z=F.TEXT_NODE=3,W=F.CDATA_SECTION_NODE=4,J=F.ENTITY_REFERENCE_NODE=5,en=F.ENTITY_NODE=6,tn=F.PROCESSING_INSTRUCTION_NODE=7,Ct=F.COMMENT_NODE=8,Q=F.DOCUMENT_NODE=9,on=F.DOCUMENT_TYPE_NODE=10,gn=F.DOCUMENT_FRAGMENT_NODE=11,In=F.NOTATION_NODE=12,dn={},ix={},Cn=(dn.INDEX_SIZE_ERR=(ix[1]="Index size error",1),dn.DOMSTRING_SIZE_ERR=(ix[2]="DOMString size error",2),dn.HIERARCHY_REQUEST_ERR=(ix[3]="Hierarchy request error",3)),ax=(dn.WRONG_DOCUMENT_ERR=(ix[4]="Wrong document",4),dn.INVALID_CHARACTER_ERR=(ix[5]="Invalid character",5),dn.NO_DATA_ALLOWED_ERR=(ix[6]="No data allowed",6),dn.NO_MODIFICATION_ALLOWED_ERR=(ix[7]="No modification allowed",7),dn.NOT_FOUND_ERR=(ix[8]="Not found",8)),sx=(dn.NOT_SUPPORTED_ERR=(ix[9]="Not supported",9),dn.INUSE_ATTRIBUTE_ERR=(ix[10]="Attribute in use",10));function lx(vx,xx){if(xx instanceof Error)var Mx=xx;else Mx=this,Error.call(this,ix[vx]),this.message=ix[vx],Error.captureStackTrace&&Error.captureStackTrace(this,lx);return Mx.code=vx,xx&&(this.message=this.message+": "+xx),Mx}function ox(){}function hx(vx,xx){this._node=vx,this._refresh=xx,_x(this)}function _x(vx){var xx=vx._node._inc||vx._node.ownerDocument._inc;if(vx._inc!==xx){var Mx=vx._refresh(vx._node);if(fE(vx,"length",Mx.length),!vx.$$length||Mx.length<vx.$$length)for(var Lx=Mx.length;Lx in vx;Lx++)Object.prototype.hasOwnProperty.call(vx,Lx)&&delete vx[Lx];D(Mx,vx),vx._inc=xx}}function ux(){}function px(vx,xx){for(var Mx=vx.length;Mx--;)if(vx[Mx]===xx)return Mx}function dx(vx,xx,Mx,Lx){if(Lx?xx[px(xx,Lx)]=Mx:xx[xx.length++]=Mx,vx){Mx.ownerElement=vx;var Kx=vx.ownerDocument;Kx&&(Lx&&Tx(Kx,vx,Lx),function(dE,vE,mE){dE&&dE._inc++,mE.namespaceURI===S.XMLNS&&(vE._nsMap[mE.prefix?mE.localName:""]=mE.value)}(Kx,vx,Mx))}}function mx(vx,xx,Mx){var Lx=px(xx,Mx);if(!(Lx>=0))throw new lx(ax,new Error(vx.tagName+"@"+Mx));for(var Kx=xx.length-1;Lx<Kx;)xx[Lx]=xx[++Lx];if(xx.length=Kx,vx){var dE=vx.ownerDocument;dE&&(Tx(dE,vx,Mx),Mx.ownerElement=null)}}function gx(){}function Sx(){}function Ex(vx){return(vx=="<"?"&lt;":vx==">"&&"&gt;")||vx=="&"&&"&amp;"||vx=='"'&&"&quot;"||"&#"+vx.charCodeAt()+";"}function Cx(vx,xx){if(xx(vx))return!0;if(vx=vx.firstChild)do if(Cx(vx,xx))return!0;while(vx=vx.nextSibling)}function Ax(){this.ownerDocument=this}function Tx(vx,xx,Mx,Lx){vx&&vx._inc++,Mx.namespaceURI===S.XMLNS&&delete xx._nsMap[Mx.prefix?Mx.localName:""]}function kx(vx,xx,Mx){if(vx&&vx._inc){vx._inc++;var Lx=xx.childNodes;if(Mx)Lx[Lx.length++]=Mx;else{for(var Kx=xx.firstChild,dE=0;Kx;)Lx[dE++]=Kx,Kx=Kx.nextSibling;Lx.length=dE,delete Lx[Lx.length]}}}function Rx(vx,xx){var Mx=xx.previousSibling,Lx=xx.nextSibling;return Mx?Mx.nextSibling=Lx:vx.firstChild=Lx,Lx?Lx.previousSibling=Mx:vx.lastChild=Mx,xx.parentNode=null,xx.previousSibling=null,xx.nextSibling=null,kx(vx.ownerDocument,vx),xx}function $x(vx){return vx&&vx.nodeType===Sx.DOCUMENT_TYPE_NODE}function Gx(vx){return vx&&vx.nodeType===Sx.ELEMENT_NODE}function qx(vx){return vx&&vx.nodeType===Sx.TEXT_NODE}function Dx(vx,xx){var Mx=vx.childNodes||[];if(_(Mx,Gx)||$x(xx))return!1;var Lx=_(Mx,$x);return!(xx&&Lx&&Mx.indexOf(Lx)>Mx.indexOf(xx))}function lE(vx,xx){var Mx=vx.childNodes||[];if(_(Mx,function(Kx){return Gx(Kx)&&Kx!==xx}))return!1;var Lx=_(Mx,$x);return!(xx&&Lx&&Mx.indexOf(Lx)>Mx.indexOf(xx))}function cE(vx,xx,Mx){var Lx=vx.childNodes||[],Kx=xx.childNodes||[];if(xx.nodeType===Sx.DOCUMENT_FRAGMENT_NODE){var dE=Kx.filter(Gx);if(dE.length>1||_(Kx,qx))throw new lx(Cn,"More than one element or text in fragment");if(dE.length===1&&!Dx(vx,Mx))throw new lx(Cn,"Element in fragment can not be inserted before doctype")}if(Gx(xx)&&!Dx(vx,Mx))throw new lx(Cn,"Only one element can be added and only after doctype");if($x(xx)){if(_(Lx,$x))throw new lx(Cn,"Only one doctype is allowed");var vE=_(Lx,Gx);if(Mx&&Lx.indexOf(vE)<Lx.indexOf(Mx))throw new lx(Cn,"Doctype can only be inserted before an element");if(!Mx&&vE)throw new lx(Cn,"Doctype can not be appended since element is present")}}function nE(vx,xx,Mx){var Lx=vx.childNodes||[],Kx=xx.childNodes||[];if(xx.nodeType===Sx.DOCUMENT_FRAGMENT_NODE){var dE=Kx.filter(Gx);if(dE.length>1||_(Kx,qx))throw new lx(Cn,"More than one element or text in fragment");if(dE.length===1&&!lE(vx,Mx))throw new lx(Cn,"Element in fragment can not be inserted before doctype")}if(Gx(xx)&&!lE(vx,Mx))throw new lx(Cn,"Only one element can be added and only after doctype");if($x(xx)){if(_(Lx,function(mE){return $x(mE)&&mE!==Mx}))throw new lx(Cn,"Only one doctype is allowed");var vE=_(Lx,Gx);if(Mx&&Lx.indexOf(vE)<Lx.indexOf(Mx))throw new lx(Cn,"Doctype can only be inserted before an element")}}function iE(vx,xx,Mx,Lx){(function(yE,CE,NE){if(!function(RE){return RE&&(RE.nodeType===Sx.DOCUMENT_NODE||RE.nodeType===Sx.DOCUMENT_FRAGMENT_NODE||RE.nodeType===Sx.ELEMENT_NODE)}(yE))throw new lx(Cn,"Unexpected parent node type "+yE.nodeType);if(NE&&NE.parentNode!==yE)throw new lx(ax,"child not in parent");if(!function(RE){return RE&&(Gx(RE)||qx(RE)||$x(RE)||RE.nodeType===Sx.DOCUMENT_FRAGMENT_NODE||RE.nodeType===Sx.COMMENT_NODE||RE.nodeType===Sx.PROCESSING_INSTRUCTION_NODE)}(CE)||$x(CE)&&yE.nodeType!==Sx.DOCUMENT_NODE)throw new lx(Cn,"Unexpected node type "+CE.nodeType+" for parent node type "+yE.nodeType)})(vx,xx,Mx),vx.nodeType===Sx.DOCUMENT_NODE&&(Lx||cE)(vx,xx,Mx);var Kx=xx.parentNode;if(Kx&&Kx.removeChild(xx),xx.nodeType===gn){var dE=xx.firstChild;if(dE==null)return xx;var vE=xx.lastChild}else dE=vE=xx;var mE=Mx?Mx.previousSibling:vx.lastChild;dE.previousSibling=mE,vE.nextSibling=Mx,mE?mE.nextSibling=dE:vx.firstChild=dE,Mx==null?vx.lastChild=vE:Mx.previousSibling=vE;do dE.parentNode=vx;while(dE!==vE&&(dE=dE.nextSibling));return kx(vx.ownerDocument||vx,vx),xx.nodeType==gn&&(xx.firstChild=xx.lastChild=null),xx}function _E(){this._nsMap={}}function sE(){}function ME(){}function fx(){}function yx(){}function Ix(){}function Nx(){}function Fx(){}function Px(){}function Wx(){}function jx(){}function Qx(){}function tE(){}function hE(vx,xx){var Mx=[],Lx=this.nodeType==9&&this.documentElement||this,Kx=Lx.prefix,dE=Lx.namespaceURI;if(dE&&Kx==null&&(Kx=Lx.lookupPrefix(dE))==null)var vE=[{namespace:dE,prefix:null}];return Xx(this,Mx,vx,xx,vE),Mx.join("")}function gE(vx,xx,Mx){var Lx=vx.prefix||"",Kx=vx.namespaceURI;if(!Kx||Lx==="xml"&&Kx===S.XML||Kx===S.XMLNS)return!1;for(var dE=Mx.length;dE--;){var vE=Mx[dE];if(vE.prefix===Lx)return vE.namespace!==Kx}return!0}function zx(vx,xx,Mx){vx.push(" ",xx,'="',Mx.replace(/[<>&"\t\n\r]/g,Ex),'"')}function Xx(vx,xx,Mx,Lx,Kx){if(Kx||(Kx=[]),Lx){if(!(vx=Lx(vx)))return;if(typeof vx=="string")return void xx.push(vx)}switch(vx.nodeType){case z:var dE=vx.attributes,vE=dE.length,mE=vx.firstChild,yE=vx.tagName,CE=yE;if(!(Mx=S.isHTML(vx.namespaceURI)||Mx)&&!vx.prefix&&vx.namespaceURI){for(var NE,RE=0;RE<dE.length;RE++)if(dE.item(RE).name==="xmlns"){NE=dE.item(RE).value;break}if(!NE){for(var sS=Kx.length-1;sS>=0;sS--)if((dS=Kx[sS]).prefix===""&&dS.namespace===vx.namespaceURI){NE=dS.namespace;break}}if(NE!==vx.namespaceURI)for(sS=Kx.length-1;sS>=0;sS--){var dS;if((dS=Kx[sS]).namespace===vx.namespaceURI){dS.prefix&&(CE=dS.prefix+":"+yE);break}}}xx.push("<",CE);for(var YE=0;YE<vE;YE++)(xS=dE.item(YE)).prefix=="xmlns"?Kx.push({prefix:xS.localName,namespace:xS.value}):xS.nodeName=="xmlns"&&Kx.push({prefix:"",namespace:xS.value});for(YE=0;YE<vE;YE++){var xS,hS,bS;gE(xS=dE.item(YE),0,Kx)&&(zx(xx,(hS=xS.prefix||"")?"xmlns:"+hS:"xmlns",bS=xS.namespaceURI),Kx.push({prefix:hS,namespace:bS})),Xx(xS,xx,Mx,Lx,Kx)}if(yE===CE&&gE(vx,0,Kx)&&(zx(xx,(hS=vx.prefix||"")?"xmlns:"+hS:"xmlns",bS=vx.namespaceURI),Kx.push({prefix:hS,namespace:bS})),mE||Mx&&!/^(?:meta|link|img|br|hr|input)$/i.test(yE)){if(xx.push(">"),Mx&&/^script$/i.test(yE))for(;mE;)mE.data?xx.push(mE.data):Xx(mE,xx,Mx,Lx,Kx.slice()),mE=mE.nextSibling;else for(;mE;)Xx(mE,xx,Mx,Lx,Kx.slice()),mE=mE.nextSibling;xx.push("</",CE,">")}else xx.push("/>");return;case Q:case gn:for(mE=vx.firstChild;mE;)Xx(mE,xx,Mx,Lx,Kx.slice()),mE=mE.nextSibling;return;case j:return zx(xx,vx.name,vx.value);case Z:return xx.push(vx.data.replace(/[<&>]/g,Ex));case W:return xx.push("<![CDATA[",vx.data,"]]>");case Ct:return xx.push("<!--",vx.data,"-->");case on:var bE=vx.publicId,uE=vx.systemId;if(xx.push("<!DOCTYPE ",vx.name),bE)xx.push(" PUBLIC ",bE),uE&&uE!="."&&xx.push(" ",uE),xx.push(">");else if(uE&&uE!=".")xx.push(" SYSTEM ",uE,">");else{var SE=vx.internalSubset;SE&&xx.push(" [",SE,"]"),xx.push(">")}return;case tn:return xx.push("<?",vx.target," ",vx.data,"?>");case J:return xx.push("&",vx.nodeName,";");default:xx.push("??",vx.nodeName)}}function oE(vx,xx,Mx){var Lx;switch(xx.nodeType){case z:(Lx=xx.cloneNode(!1)).ownerDocument=vx;case gn:break;case j:Mx=!0}if(Lx||(Lx=xx.cloneNode(!1)),Lx.ownerDocument=vx,Lx.parentNode=null,Mx)for(var Kx=xx.firstChild;Kx;)Lx.appendChild(oE(vx,Kx,Mx)),Kx=Kx.nextSibling;return Lx}function Jx(vx,xx,Mx){var Lx=new xx.constructor;for(var Kx in xx)if(Object.prototype.hasOwnProperty.call(xx,Kx)){var dE=xx[Kx];typeof dE!="object"&&dE!=Lx[Kx]&&(Lx[Kx]=dE)}switch(xx.childNodes&&(Lx.childNodes=new ox),Lx.ownerDocument=vx,Lx.nodeType){case z:var vE=xx.attributes,mE=Lx.attributes=new ux,yE=vE.length;mE._ownerElement=Lx;for(var CE=0;CE<yE;CE++)Lx.setAttributeNode(Jx(vx,vE.item(CE),!0));break;case j:Mx=!0}if(Mx)for(var NE=xx.firstChild;NE;)Lx.appendChild(Jx(vx,NE,Mx)),NE=NE.nextSibling;return Lx}function fE(vx,xx,Mx){vx[xx]=Mx}dn.INVALID_STATE_ERR=(ix[11]="Invalid state",11),dn.SYNTAX_ERR=(ix[12]="Syntax error",12),dn.INVALID_MODIFICATION_ERR=(ix[13]="Invalid modification",13),dn.NAMESPACE_ERR=(ix[14]="Invalid namespace",14),dn.INVALID_ACCESS_ERR=(ix[15]="Invalid access",15),lx.prototype=Error.prototype,D(dn,lx),ox.prototype={length:0,item:function(vx){return vx>=0&&vx<this.length?this[vx]:null},toString:function(vx,xx){for(var Mx=[],Lx=0;Lx<this.length;Lx++)Xx(this[Lx],Mx,vx,xx);return Mx.join("")},filter:function(vx){return Array.prototype.filter.call(this,vx)},indexOf:function(vx){return Array.prototype.indexOf.call(this,vx)}},hx.prototype.item=function(vx){return _x(this),this[vx]||null},O(hx,ox),ux.prototype={length:0,item:ox.prototype.item,getNamedItem:function(vx){for(var xx=this.length;xx--;){var Mx=this[xx];if(Mx.nodeName==vx)return Mx}},setNamedItem:function(vx){var xx=vx.ownerElement;if(xx&&xx!=this._ownerElement)throw new lx(sx);var Mx=this.getNamedItem(vx.nodeName);return dx(this._ownerElement,this,vx,Mx),Mx},setNamedItemNS:function(vx){var xx,Mx=vx.ownerElement;if(Mx&&Mx!=this._ownerElement)throw new lx(sx);return xx=this.getNamedItemNS(vx.namespaceURI,vx.localName),dx(this._ownerElement,this,vx,xx),xx},removeNamedItem:function(vx){var xx=this.getNamedItem(vx);return mx(this._ownerElement,this,xx),xx},removeNamedItemNS:function(vx,xx){var Mx=this.getNamedItemNS(vx,xx);return mx(this._ownerElement,this,Mx),Mx},getNamedItemNS:function(vx,xx){for(var Mx=this.length;Mx--;){var Lx=this[Mx];if(Lx.localName==xx&&Lx.namespaceURI==vx)return Lx}return null}},gx.prototype={hasFeature:function(vx,xx){return!0},createDocument:function(vx,xx,Mx){var Lx=new Ax;if(Lx.implementation=this,Lx.childNodes=new ox,Lx.doctype=Mx||null,Mx&&Lx.appendChild(Mx),xx){var Kx=Lx.createElementNS(vx,xx);Lx.appendChild(Kx)}return Lx},createDocumentType:function(vx,xx,Mx){var Lx=new Nx;return Lx.name=vx,Lx.nodeName=vx,Lx.publicId=xx||"",Lx.systemId=Mx||"",Lx}},Sx.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(vx,xx){return iE(this,vx,xx)},replaceChild:function(vx,xx){iE(this,vx,xx,nE),xx&&this.removeChild(xx)},removeChild:function(vx){return Rx(this,vx)},appendChild:function(vx){return this.insertBefore(vx,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(vx){return Jx(this.ownerDocument||this,this,vx)},normalize:function(){for(var vx=this.firstChild;vx;){var xx=vx.nextSibling;xx&&xx.nodeType==Z&&vx.nodeType==Z?(this.removeChild(xx),vx.appendData(xx.data)):(vx.normalize(),vx=xx)}},isSupported:function(vx,xx){return this.ownerDocument.implementation.hasFeature(vx,xx)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(vx){for(var xx=this;xx;){var Mx=xx._nsMap;if(Mx){for(var Lx in Mx)if(Object.prototype.hasOwnProperty.call(Mx,Lx)&&Mx[Lx]===vx)return Lx}xx=xx.nodeType==j?xx.ownerDocument:xx.parentNode}return null},lookupNamespaceURI:function(vx){for(var xx=this;xx;){var Mx=xx._nsMap;if(Mx&&Object.prototype.hasOwnProperty.call(Mx,vx))return Mx[vx];xx=xx.nodeType==j?xx.ownerDocument:xx.parentNode}return null},isDefaultNamespace:function(vx){return this.lookupPrefix(vx)==null}},D(F,Sx),D(F,Sx.prototype),Ax.prototype={nodeName:"#document",nodeType:Q,doctype:null,documentElement:null,_inc:1,insertBefore:function(vx,xx){if(vx.nodeType==gn){for(var Mx=vx.firstChild;Mx;){var Lx=Mx.nextSibling;this.insertBefore(Mx,xx),Mx=Lx}return vx}return iE(this,vx,xx),vx.ownerDocument=this,this.documentElement===null&&vx.nodeType===z&&(this.documentElement=vx),vx},removeChild:function(vx){return this.documentElement==vx&&(this.documentElement=null),Rx(this,vx)},replaceChild:function(vx,xx){iE(this,vx,xx,nE),vx.ownerDocument=this,xx&&this.removeChild(xx),Gx(vx)&&(this.documentElement=vx)},importNode:function(vx,xx){return oE(this,vx,xx)},getElementById:function(vx){var xx=null;return Cx(this.documentElement,function(Mx){if(Mx.nodeType==z&&Mx.getAttribute("id")==vx)return xx=Mx,!0}),xx},getElementsByClassName:function(vx){var xx=R(vx);return new hx(this,function(Mx){var Lx=[];return xx.length>0&&Cx(Mx.documentElement,function(Kx){if(Kx!==Mx&&Kx.nodeType===z){var dE=Kx.getAttribute("class");if(dE){var vE=vx===dE;if(!vE){var mE=R(dE);vE=xx.every((yE=mE,function(CE){return yE&&yE.indexOf(CE)!==-1}))}vE&&Lx.push(Kx)}}var yE}),Lx})},createElement:function(vx){var xx=new _E;return xx.ownerDocument=this,xx.nodeName=vx,xx.tagName=vx,xx.localName=vx,xx.childNodes=new ox,(xx.attributes=new ux)._ownerElement=xx,xx},createDocumentFragment:function(){var vx=new jx;return vx.ownerDocument=this,vx.childNodes=new ox,vx},createTextNode:function(vx){var xx=new fx;return xx.ownerDocument=this,xx.appendData(vx),xx},createComment:function(vx){var xx=new yx;return xx.ownerDocument=this,xx.appendData(vx),xx},createCDATASection:function(vx){var xx=new Ix;return xx.ownerDocument=this,xx.appendData(vx),xx},createProcessingInstruction:function(vx,xx){var Mx=new Qx;return Mx.ownerDocument=this,Mx.tagName=Mx.nodeName=Mx.target=vx,Mx.nodeValue=Mx.data=xx,Mx},createAttribute:function(vx){var xx=new sE;return xx.ownerDocument=this,xx.name=vx,xx.nodeName=vx,xx.localName=vx,xx.specified=!0,xx},createEntityReference:function(vx){var xx=new Wx;return xx.ownerDocument=this,xx.nodeName=vx,xx},createElementNS:function(vx,xx){var Mx=new _E,Lx=xx.split(":"),Kx=Mx.attributes=new ux;return Mx.childNodes=new ox,Mx.ownerDocument=this,Mx.nodeName=xx,Mx.tagName=xx,Mx.namespaceURI=vx,Lx.length==2?(Mx.prefix=Lx[0],Mx.localName=Lx[1]):Mx.localName=xx,Kx._ownerElement=Mx,Mx},createAttributeNS:function(vx,xx){var Mx=new sE,Lx=xx.split(":");return Mx.ownerDocument=this,Mx.nodeName=xx,Mx.name=xx,Mx.namespaceURI=vx,Mx.specified=!0,Lx.length==2?(Mx.prefix=Lx[0],Mx.localName=Lx[1]):Mx.localName=xx,Mx}},O(Ax,Sx),_E.prototype={nodeType:z,hasAttribute:function(vx){return this.getAttributeNode(vx)!=null},getAttribute:function(vx){var xx=this.getAttributeNode(vx);return xx&&xx.value||""},getAttributeNode:function(vx){return this.attributes.getNamedItem(vx)},setAttribute:function(vx,xx){var Mx=this.ownerDocument.createAttribute(vx);Mx.value=Mx.nodeValue=""+xx,this.setAttributeNode(Mx)},removeAttribute:function(vx){var xx=this.getAttributeNode(vx);xx&&this.removeAttributeNode(xx)},appendChild:function(vx){return vx.nodeType===gn?this.insertBefore(vx,null):function(xx,Mx){return Mx.parentNode&&Mx.parentNode.removeChild(Mx),Mx.parentNode=xx,Mx.previousSibling=xx.lastChild,Mx.nextSibling=null,Mx.previousSibling?Mx.previousSibling.nextSibling=Mx:xx.firstChild=Mx,xx.lastChild=Mx,kx(xx.ownerDocument,xx,Mx),Mx}(this,vx)},setAttributeNode:function(vx){return this.attributes.setNamedItem(vx)},setAttributeNodeNS:function(vx){return this.attributes.setNamedItemNS(vx)},removeAttributeNode:function(vx){return this.attributes.removeNamedItem(vx.nodeName)},removeAttributeNS:function(vx,xx){var Mx=this.getAttributeNodeNS(vx,xx);Mx&&this.removeAttributeNode(Mx)},hasAttributeNS:function(vx,xx){return this.getAttributeNodeNS(vx,xx)!=null},getAttributeNS:function(vx,xx){var Mx=this.getAttributeNodeNS(vx,xx);return Mx&&Mx.value||""},setAttributeNS:function(vx,xx,Mx){var Lx=this.ownerDocument.createAttributeNS(vx,xx);Lx.value=Lx.nodeValue=""+Mx,this.setAttributeNode(Lx)},getAttributeNodeNS:function(vx,xx){return this.attributes.getNamedItemNS(vx,xx)},getElementsByTagName:function(vx){return new hx(this,function(xx){var Mx=[];return Cx(xx,function(Lx){Lx===xx||Lx.nodeType!=z||vx!=="*"&&Lx.tagName!=vx||Mx.push(Lx)}),Mx})},getElementsByTagNameNS:function(vx,xx){return new hx(this,function(Mx){var Lx=[];return Cx(Mx,function(Kx){Kx===Mx||Kx.nodeType!==z||vx!=="*"&&Kx.namespaceURI!==vx||xx!=="*"&&Kx.localName!=xx||Lx.push(Kx)}),Lx})}},Ax.prototype.getElementsByTagName=_E.prototype.getElementsByTagName,Ax.prototype.getElementsByTagNameNS=_E.prototype.getElementsByTagNameNS,O(_E,Sx),sE.prototype.nodeType=j,O(sE,Sx),ME.prototype={data:"",substringData:function(vx,xx){return this.data.substring(vx,vx+xx)},appendData:function(vx){vx=this.data+vx,this.nodeValue=this.data=vx,this.length=vx.length},insertData:function(vx,xx){this.replaceData(vx,0,xx)},appendChild:function(vx){throw new Error(ix[Cn])},deleteData:function(vx,xx){this.replaceData(vx,xx,"")},replaceData:function(vx,xx,Mx){Mx=this.data.substring(0,vx)+Mx+this.data.substring(vx+xx),this.nodeValue=this.data=Mx,this.length=Mx.length}},O(ME,Sx),fx.prototype={nodeName:"#text",nodeType:Z,splitText:function(vx){var xx=this.data,Mx=xx.substring(vx);xx=xx.substring(0,vx),this.data=this.nodeValue=xx,this.length=xx.length;var Lx=this.ownerDocument.createTextNode(Mx);return this.parentNode&&this.parentNode.insertBefore(Lx,this.nextSibling),Lx}},O(fx,ME),yx.prototype={nodeName:"#comment",nodeType:Ct},O(yx,ME),Ix.prototype={nodeName:"#cdata-section",nodeType:W},O(Ix,ME),Nx.prototype.nodeType=on,O(Nx,Sx),Fx.prototype.nodeType=In,O(Fx,Sx),Px.prototype.nodeType=en,O(Px,Sx),Wx.prototype.nodeType=J,O(Wx,Sx),jx.prototype.nodeName="#document-fragment",jx.prototype.nodeType=gn,O(jx,Sx),Qx.prototype.nodeType=tn,O(Qx,Sx),tE.prototype.serializeToString=function(vx,xx,Mx){return hE.call(vx,xx,Mx)},Sx.prototype.toString=hE;try{if(Object.defineProperty){let vx=function(xx){switch(xx.nodeType){case z:case gn:var Mx=[];for(xx=xx.firstChild;xx;)xx.nodeType!==7&&xx.nodeType!==8&&Mx.push(vx(xx)),xx=xx.nextSibling;return Mx.join("");default:return xx.nodeValue}};var pE=vx;Object.defineProperty(hx.prototype,"length",{get:function(){return _x(this),this.$$length}}),Object.defineProperty(Sx.prototype,"textContent",{get:function(){return vx(this)},set:function(xx){switch(this.nodeType){case z:case gn:for(;this.firstChild;)this.removeChild(this.firstChild);(xx||String(xx))&&this.appendChild(this.ownerDocument.createTextNode(xx));break;default:this.data=xx,this.value=xx,this.nodeValue=xx}}}),fE=function(xx,Mx,Lx){xx["$$"+Mx]=Lx}}}catch{}p.DocumentType=Nx,p.DOMException=lx,p.DOMImplementation=gx,p.Element=_E,p.Node=Sx,p.NodeList=ox,p.XMLSerializer=tE},6559:(c,p,d)=>{var x=d(4582).freeze;p.XML_ENTITIES=x({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),p.HTML_ENTITIES=x({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),p.entityMap=p.HTML_ENTITIES},8978:(c,p,d)=>{var x=d(4722);p.DOMImplementation=x.DOMImplementation,p.XMLSerializer=x.XMLSerializer,p.DOMParser=d(5752).DOMParser},4466:(c,p,d)=>{var x=d(4582).NAMESPACE,_=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=new RegExp("[\\-\\.0-9"+_.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),T=new RegExp("^"+_.source+S.source+"*(?::"+_.source+S.source+"*)?$");function A(tn,Ct){this.message=tn,this.locator=Ct,Error.captureStackTrace&&Error.captureStackTrace(this,A)}function R(){}function D(tn,Ct){return Ct.lineNumber=tn.lineNumber,Ct.columnNumber=tn.columnNumber,Ct}function O(tn,Ct,Q,on,gn,In){function dn(ox,hx,_x){Q.attributeNames.hasOwnProperty(ox)&&In.fatalError("Attribute "+ox+" redefined"),Q.addValue(ox,hx.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,gn),_x)}for(var ix,Cn=++Ct,ax=0;;){var sx=tn.charAt(Cn);switch(sx){case"=":if(ax===1)ix=tn.slice(Ct,Cn),ax=3;else{if(ax!==2)throw new Error("attribute equal must after attrName");ax=3}break;case"'":case'"':if(ax===3||ax===1){if(ax===1&&(In.warning('attribute value must after "="'),ix=tn.slice(Ct,Cn)),Ct=Cn+1,!((Cn=tn.indexOf(sx,Ct))>0))throw new Error("attribute value no end '"+sx+"' match");dn(ix,lx=tn.slice(Ct,Cn),Ct-1),ax=5}else{if(ax!=4)throw new Error('attribute value must after "="');dn(ix,lx=tn.slice(Ct,Cn),Ct),In.warning('attribute "'+ix+'" missed start quot('+sx+")!!"),Ct=Cn+1,ax=5}break;case"/":switch(ax){case 0:Q.setTagName(tn.slice(Ct,Cn));case 5:case 6:case 7:ax=7,Q.closed=!0;case 4:case 1:break;case 2:Q.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return In.error("unexpected end of input"),ax==0&&Q.setTagName(tn.slice(Ct,Cn)),Cn;case">":switch(ax){case 0:Q.setTagName(tn.slice(Ct,Cn));case 5:case 6:case 7:break;case 4:case 1:(lx=tn.slice(Ct,Cn)).slice(-1)==="/"&&(Q.closed=!0,lx=lx.slice(0,-1));case 2:ax===2&&(lx=ix),ax==4?(In.warning('attribute "'+lx+'" missed quot(")!'),dn(ix,lx,Ct)):(x.isHTML(on[""])&&lx.match(/^(?:disabled|checked|selected)$/i)||In.warning('attribute "'+lx+'" missed value!! "'+lx+'" instead!!'),dn(lx,lx,Ct));break;case 3:throw new Error("attribute value missed!!")}return Cn;case"":sx=" ";default:if(sx<=" ")switch(ax){case 0:Q.setTagName(tn.slice(Ct,Cn)),ax=6;break;case 1:ix=tn.slice(Ct,Cn),ax=2;break;case 4:var lx=tn.slice(Ct,Cn);In.warning('attribute "'+lx+'" missed quot(")!!'),dn(ix,lx,Ct);case 5:ax=6}else switch(ax){case 2:Q.tagName,x.isHTML(on[""])&&ix.match(/^(?:disabled|checked|selected)$/i)||In.warning('attribute "'+ix+'" missed value!! "'+ix+'" instead2!!'),dn(ix,ix,Ct),Ct=Cn,ax=1;break;case 5:In.warning('attribute space is required"'+ix+'"!!');case 6:ax=1,Ct=Cn;break;case 3:ax=4,Ct=Cn;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}Cn++}}function F(tn,Ct,Q){for(var on=tn.tagName,gn=null,In=tn.length;In--;){var dn=tn[In],ix=dn.qName,Cn=dn.value;if((ox=ix.indexOf(":"))>0)var ax=dn.prefix=ix.slice(0,ox),sx=ix.slice(ox+1),lx=ax==="xmlns"&&sx;else sx=ix,ax=null,lx=ix==="xmlns"&&"";dn.localName=sx,lx!==!1&&(gn==null&&(gn={},Z(Q,Q={})),Q[lx]=gn[lx]=Cn,dn.uri=x.XMLNS,Ct.startPrefixMapping(lx,Cn))}for(In=tn.length;In--;)(ax=(dn=tn[In]).prefix)&&(ax==="xml"&&(dn.uri=x.XML),ax!=="xmlns"&&(dn.uri=Q[ax||""]));var ox;(ox=on.indexOf(":"))>0?(ax=tn.prefix=on.slice(0,ox),sx=tn.localName=on.slice(ox+1)):(ax=null,sx=tn.localName=on);var hx=tn.uri=Q[ax||""];if(Ct.startElement(hx,sx,on,tn),!tn.closed)return tn.currentNSMap=Q,tn.localNSMap=gn,!0;if(Ct.endElement(hx,sx,on),gn)for(ax in gn)Object.prototype.hasOwnProperty.call(gn,ax)&&Ct.endPrefixMapping(ax)}function z(tn,Ct,Q,on,gn){if(/^(?:script|textarea)$/i.test(Q)){var In=tn.indexOf("</"+Q+">",Ct),dn=tn.substring(Ct+1,In);if(/[&<]/.test(dn))return/^script$/i.test(Q)?(gn.characters(dn,0,dn.length),In):(dn=dn.replace(/&#?\w+;/g,on),gn.characters(dn,0,dn.length),In)}return Ct+1}function j(tn,Ct,Q,on){var gn=on[Q];return gn==null&&((gn=tn.lastIndexOf("</"+Q+">"))<Ct&&(gn=tn.lastIndexOf("</"+Q)),on[Q]=gn),gn<Ct}function Z(tn,Ct){for(var Q in tn)Object.prototype.hasOwnProperty.call(tn,Q)&&(Ct[Q]=tn[Q])}function W(tn,Ct,Q,on){if(tn.charAt(Ct+2)==="-")return tn.charAt(Ct+3)==="-"?(gn=tn.indexOf("-->",Ct+4))>Ct?(Q.comment(tn,Ct+4,gn-Ct-4),gn+3):(on.error("Unclosed comment"),-1):-1;if(tn.substr(Ct+3,6)=="CDATA["){var gn=tn.indexOf("]]>",Ct+9);return Q.startCDATA(),Q.characters(tn,Ct+9,gn-Ct-9),Q.endCDATA(),gn+3}var In=function(lx,ox){var hx,_x=[],ux=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(ux.lastIndex=ox,ux.exec(lx);hx=ux.exec(lx);)if(_x.push(hx),hx[1])return _x}(tn,Ct),dn=In.length;if(dn>1&&/!doctype/i.test(In[0][0])){var ix=In[1][0],Cn=!1,ax=!1;dn>3&&(/^public$/i.test(In[2][0])?(Cn=In[3][0],ax=dn>4&&In[4][0]):/^system$/i.test(In[2][0])&&(ax=In[3][0]));var sx=In[dn-1];return Q.startDTD(ix,Cn,ax),Q.endDTD(),sx.index+sx[0].length}return-1}function J(tn,Ct,Q){var on=tn.indexOf("?>",Ct);if(on){var gn=tn.substring(Ct,on).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return gn?(gn[0].length,Q.processingInstruction(gn[1],gn[2]),on+2):-1}return-1}function en(){this.attributeNames={}}A.prototype=new Error,A.prototype.name=A.name,R.prototype={parse:function(tn,Ct,Q){var on=this.domBuilder;on.startDocument(),Z(Ct,Ct={}),function(gn,In,dn,ix,Cn){function ax(iE){var _E=iE.slice(1,-1);return Object.hasOwnProperty.call(dn,_E)?dn[_E]:_E.charAt(0)==="#"?function(sE){if(sE>65535){var ME=55296+((sE-=65536)>>10),fx=56320+(1023&sE);return String.fromCharCode(ME,fx)}return String.fromCharCode(sE)}(parseInt(_E.substr(1).replace("x","0x"))):(Cn.error("entity not found:"+iE),iE)}function sx(iE){if(iE>mx){var _E=gn.substring(mx,iE).replace(/&#?\w+;/g,ax);ux&&lx(mx),ix.characters(_E,0,iE-mx),mx=iE}}function lx(iE,_E){for(;iE>=hx&&(_E=_x.exec(gn));)ox=_E.index,hx=ox+_E[0].length,ux.lineNumber++;ux.columnNumber=iE-ox+1}for(var ox=0,hx=0,_x=/.*(?:\r\n?|\n)|.*$/g,ux=ix.locator,px=[{currentNSMap:In}],dx={},mx=0;;){try{var gx=gn.indexOf("<",mx);if(gx<0){if(!gn.substr(mx).match(/^\s*$/)){var Sx=ix.doc,Ex=Sx.createTextNode(gn.substr(mx));Sx.appendChild(Ex),ix.currentElement=Ex}return}switch(gx>mx&&sx(gx),gn.charAt(gx+1)){case"/":var Cx=gn.indexOf(">",gx+3),Ax=gn.substring(gx+2,Cx).replace(/[ \t\n\r]+$/g,""),Tx=px.pop();Cx<0?(Ax=gn.substring(gx+2).replace(/[\s<].*/,""),Cn.error("end tag name: "+Ax+" is not complete:"+Tx.tagName),Cx=gx+1+Ax.length):Ax.match(/\s</)&&(Ax=Ax.replace(/[\s<].*/,""),Cn.error("end tag name: "+Ax+" maybe not complete"),Cx=gx+1+Ax.length);var kx=Tx.localNSMap,Rx=Tx.tagName==Ax;if(Rx||Tx.tagName&&Tx.tagName.toLowerCase()==Ax.toLowerCase()){if(ix.endElement(Tx.uri,Tx.localName,Ax),kx)for(var $x in kx)Object.prototype.hasOwnProperty.call(kx,$x)&&ix.endPrefixMapping($x);Rx||Cn.fatalError("end tag name: "+Ax+" is not match the current start tagName:"+Tx.tagName)}else px.push(Tx);Cx++;break;case"?":ux&&lx(gx),Cx=J(gn,gx,ix);break;case"!":ux&&lx(gx),Cx=W(gn,gx,ix,Cn);break;default:ux&&lx(gx);var Gx=new en,qx=px[px.length-1].currentNSMap,Dx=(Cx=O(gn,gx,Gx,qx,ax,Cn),Gx.length);if(!Gx.closed&&j(gn,Cx,Gx.tagName,dx)&&(Gx.closed=!0,dn.nbsp||Cn.warning("unclosed xml attribute")),ux&&Dx){for(var lE=D(ux,{}),cE=0;cE<Dx;cE++){var nE=Gx[cE];lx(nE.offset),nE.locator=D(ux,{})}ix.locator=lE,F(Gx,ix,qx)&&px.push(Gx),ix.locator=ux}else F(Gx,ix,qx)&&px.push(Gx);x.isHTML(Gx.uri)&&!Gx.closed?Cx=z(gn,Cx,Gx.tagName,ax,ix):Cx++}}catch(iE){if(iE instanceof A)throw iE;Cn.error("element parse error: "+iE),Cx=-1}Cx>mx?mx=Cx:sx(Math.max(gx,mx)+1)}}(tn,Ct,Q,on,this.errorHandler),on.endDocument()}},en.prototype={setTagName:function(tn){if(!T.test(tn))throw new Error("invalid tagName:"+tn);this.tagName=tn},addValue:function(tn,Ct,Q){if(!T.test(tn))throw new Error("invalid attribute:"+tn);this.attributeNames[tn]=this.length,this[this.length++]={qName:tn,value:Ct,offset:Q}},length:0,getLocalName:function(tn){return this[tn].localName},getLocator:function(tn){return this[tn].locator},getQName:function(tn){return this[tn].qName},getURI:function(tn){return this[tn].uri},getValue:function(tn){return this[tn].value}},p.XMLReader=R,p.ParseError=A},8917:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.InvalidNumberOfChildrenError=void 0;var x=d(6200);Object.defineProperty(p,"InvalidNumberOfChildrenError",{enumerable:!0,get:function(){return x.InvalidNumberOfChildrenError}})},6200:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.InvalidNumberOfChildrenError=void 0;class d extends Error{constructor(_,S,T,A="exactly"){super(`${_} tag must have ${A} ${S} children. It's actually ${T}`),this.name="InvalidNumberOfChildrenError"}}p.InvalidNumberOfChildrenError=d},4279:function(c,p,d){var x=this&&this.__createBinding||(Object.create?function(S,T,A,R){R===void 0&&(R=A);var D=Object.getOwnPropertyDescriptor(T,A);D&&!("get"in D?!T.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return T[A]}}),Object.defineProperty(S,R,D)}:function(S,T,A,R){R===void 0&&(R=A),S[R]=T[A]}),_=this&&this.__exportStar||function(S,T){for(var A in S)A==="default"||Object.prototype.hasOwnProperty.call(T,A)||x(T,S,A)};Object.defineProperty(p,"__esModule",{value:!0}),_(d(828),p),_(d(5975),p),_(d(799),p),_(d(2424),p)},5975:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.JoinWithManySeparators=void 0;class d{constructor(_){this._separators=_}static join(_,S,T=""){const A=S.length>0?S:T!==void 0?[T]:[];return new d(A)._join(_)}_join(_){return _.reduce((S,T,A,R)=>S+T+(A===R.length-1?"":this._get(A)),"")}_get(_){return this._separators[_]?this._separators[_]:this._separators[this._separators.length-1]}}p.JoinWithManySeparators=d},799:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.mathMLElementToLaTeXConverter=void 0;const x=d(5443);p.mathMLElementToLaTeXConverter=_=>new x.MathMLElementToLatexConverterAdapter(_).toLatexConverter()},2424:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.normalizeWhiteSpaces=void 0,p.normalizeWhiteSpaces=d=>d.replace(/\s+/g," ")},7192:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BracketWrapper=void 0;const x=d(1855);p.BracketWrapper=class{constructor(){this._open="{",this._close="}"}wrap(_){return new x.Wrapper(this._open,this._close).wrap(_)}}},5025:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.GenericWrapper=void 0;const x=d(1855);p.GenericWrapper=class{constructor(_,S){this._open="\\left"+_,this._close="\\right"+S}wrap(_){return new x.Wrapper(this._open,this._close).wrap(_)}}},828:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.GenericWrapper=p.ParenthesisWrapper=p.BracketWrapper=void 0;var x=d(7192);Object.defineProperty(p,"BracketWrapper",{enumerable:!0,get:function(){return x.BracketWrapper}});var _=d(1168);Object.defineProperty(p,"ParenthesisWrapper",{enumerable:!0,get:function(){return _.ParenthesisWrapper}});var S=d(5025);Object.defineProperty(p,"GenericWrapper",{enumerable:!0,get:function(){return S.GenericWrapper}})},1168:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ParenthesisWrapper=void 0;const x=d(1855);p.ParenthesisWrapper=class{constructor(){this._open="\\left(",this._close="\\right)"}wrap(_){return new x.Wrapper(this._open,this._close).wrap(_)}wrapIfMoreThanOneChar(_){return _.length<=1?_:this.wrap(_)}}},1855:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Wrapper=void 0,p.Wrapper=class{constructor(d,x){this._open=d,this._close=x}wrap(d){return this._open+d+this._close}}},2697:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.VoidMathMLElement=void 0,p.VoidMathMLElement=class{constructor(){this.name="void",this.value="",this.children=[],this.attributes={}}}},4760:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.GenericSpacingWrapper=void 0;const x=d(4279);p.GenericSpacingWrapper=class{constructor(_){this._mathmlElement=_}convert(){return this._mathmlElement.children.map(_=>(0,x.mathMLElementToLaTeXConverter)(_)).map(_=>_.convert()).join(" ")}}},9376:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.GenericUnderOver=void 0;const x=d(799),_=d(8917),S=d(472);p.GenericUnderOver=class{constructor(R){this._mathmlElement=R}convert(){const{name:R,children:D}=this._mathmlElement,O=D.length;if(O!==2)throw new _.InvalidNumberOfChildrenError(R,2,O);const F=(0,x.mathMLElementToLaTeXConverter)(D[0]).convert(),z=(0,x.mathMLElementToLaTeXConverter)(D[1]).convert();return this._applyCommand(F,z)}_applyCommand(R,D){const O=this._mathmlElement.name.match(/under/)?A.Under:A.Over;return new T(O).apply(R,D)}};class T{constructor(D){this._type=D}apply(D,O){return S.latexAccents.includes(O)?`${O}{${D}}`:`${this._defaultCommand}{${O}}{${D}}`}get _defaultCommand(){return this._type===A.Under?"\\underset":"\\overset"}}var A;(function(R){R[R.Under=0]="Under",R[R.Over=1]="Over"})(A||(A={}))},6959:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Void=p.MSpace=p.MRow=p.GenericUnderOver=p.GenericSpacingWrapper=p.MTr=p.MTable=p.MUnderover=p.MText=p.MMultiscripts=p.MSubsup=p.MSub=p.MSup=p.MPhantom=p.MError=p.MEnclose=p.MAction=p.MRoot=p.MFrac=p.MFenced=p.MSqrt=p.MN=p.MO=p.MI=p.Math=void 0;var x=d(393);Object.defineProperty(p,"Math",{enumerable:!0,get:function(){return x.Math}});var _=d(7037);Object.defineProperty(p,"MI",{enumerable:!0,get:function(){return _.MI}});var S=d(3487);Object.defineProperty(p,"MO",{enumerable:!0,get:function(){return S.MO}});var T=d(4464);Object.defineProperty(p,"MN",{enumerable:!0,get:function(){return T.MN}});var A=d(8686);Object.defineProperty(p,"MSqrt",{enumerable:!0,get:function(){return A.MSqrt}});var R=d(9511);Object.defineProperty(p,"MFenced",{enumerable:!0,get:function(){return R.MFenced}});var D=d(6440);Object.defineProperty(p,"MFrac",{enumerable:!0,get:function(){return D.MFrac}});var O=d(6052);Object.defineProperty(p,"MRoot",{enumerable:!0,get:function(){return O.MRoot}});var F=d(1678);Object.defineProperty(p,"MAction",{enumerable:!0,get:function(){return F.MAction}});var z=d(2631);Object.defineProperty(p,"MEnclose",{enumerable:!0,get:function(){return z.MEnclose}});var j=d(1840);Object.defineProperty(p,"MError",{enumerable:!0,get:function(){return j.MError}});var Z=d(7443);Object.defineProperty(p,"MPhantom",{enumerable:!0,get:function(){return Z.MPhantom}});var W=d(6926);Object.defineProperty(p,"MSup",{enumerable:!0,get:function(){return W.MSup}});var J=d(2564);Object.defineProperty(p,"MSub",{enumerable:!0,get:function(){return J.MSub}});var en=d(1358);Object.defineProperty(p,"MSubsup",{enumerable:!0,get:function(){return en.MSubsup}});var tn=d(8303);Object.defineProperty(p,"MMultiscripts",{enumerable:!0,get:function(){return tn.MMultiscripts}});var Ct=d(3951);Object.defineProperty(p,"MText",{enumerable:!0,get:function(){return Ct.MText}});var Q=d(1222);Object.defineProperty(p,"MUnderover",{enumerable:!0,get:function(){return Q.MUnderover}});var on=d(2350);Object.defineProperty(p,"MTable",{enumerable:!0,get:function(){return on.MTable}});var gn=d(1586);Object.defineProperty(p,"MTr",{enumerable:!0,get:function(){return gn.MTr}});var In=d(4760);Object.defineProperty(p,"GenericSpacingWrapper",{enumerable:!0,get:function(){return In.GenericSpacingWrapper}});var dn=d(9376);Object.defineProperty(p,"GenericUnderOver",{enumerable:!0,get:function(){return dn.GenericUnderOver}});var ix=d(6346);Object.defineProperty(p,"MRow",{enumerable:!0,get:function(){return ix.MRow}});var Cn=d(3700);Object.defineProperty(p,"MSpace",{enumerable:!0,get:function(){return Cn.MSpace}});var ax=d(9165);Object.defineProperty(p,"Void",{enumerable:!0,get:function(){return ax.Void}})},1678:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MAction=void 0;const x=d(799);p.MAction=class{constructor(_){this._mathmlElement=_}convert(){const{children:_}=this._mathmlElement;return this._isToggle()?_.map(S=>(0,x.mathMLElementToLaTeXConverter)(S)).map(S=>S.convert()).join(" \\Longrightarrow "):(0,x.mathMLElementToLaTeXConverter)(_[0]).convert()}_isToggle(){const{actiontype:_}=this._mathmlElement.attributes;return _==="toggle"||!_}}},393:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Math=void 0;const x=d(799),_=d(2424);p.Math=class{constructor(S){this._mathmlElement=S}convert(){const S=this._mathmlElement.children.map(T=>(0,x.mathMLElementToLaTeXConverter)(T)).map(T=>T.convert()).join(" ");return(0,_.normalizeWhiteSpaces)(S)}}},2631:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MEnclose=void 0;const x=d(799);p.MEnclose=class{constructor(_){this._mathmlElement=_}convert(){const _=this._mathmlElement.children.map(S=>(0,x.mathMLElementToLaTeXConverter)(S)).map(S=>S.convert()).join(" ");return this._notation==="actuarial"?`\\overline{\\left.${_}\\right|}`:this._notation==="radical"?`\\sqrt{${_}}`:["box","roundedbox","circle"].includes(this._notation)?`\\boxed{${_}}`:this._notation==="left"?`\\left|${_}`:this._notation==="right"?`${_}\\right|`:this._notation==="top"?`\\overline{${_}}`:this._notation==="bottom"?`\\underline{${_}}`:this._notation==="updiagonalstrike"?`\\cancel{${_}}`:this._notation==="downdiagonalstrike"?`\\bcancel{${_}}`:this._notation==="updiagonalarrow"?`\\cancelto{}{${_}}`:["verticalstrike","horizontalstrike"].includes(this._notation)?`\\hcancel{${_}}`:this._notation==="madruwb"?`\\underline{${_}\\right|}`:this._notation==="phasorangle"?`{\\angle \\underline{${_}}}`:`\\overline{\\left.\\right)${_}}`}get _notation(){return this._mathmlElement.attributes.notation||"longdiv"}}},1840:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MError=void 0;const x=d(799);p.MError=class{constructor(_){this._mathmlElement=_}convert(){return`\\color{red}{${this._mathmlElement.children.map(_=>(0,x.mathMLElementToLaTeXConverter)(_)).map(_=>_.convert()).join(" ")}}`}}},9511:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MFenced=void 0;const x=d(799),_=d(4279);p.MFenced=class{constructor(R){this._mathmlElement=R,this.open=this._mathmlElement.attributes.open||"",this.close=this._mathmlElement.attributes.close||""}convert(){const R=this._mathmlElement.children.map(j=>(0,x.mathMLElementToLaTeXConverter)(j)).map(j=>j.convert());if(this._isThereRelativeOfName(this._mathmlElement.children,"mtable"))return new T(this.open,this.close).apply(R);const D=this._mathmlElement.attributes.separators,O=D!==void 0,F=D?Array.from(D):[],z=O?"":",";return new S(this.open,this.close,F,z).apply(R)}_isThereRelativeOfName(R,D){return R.some(O=>O.name===D||this._isThereRelativeOfName(O.children,D))}};class S{constructor(D,O,F,z){this.separators=F,this.defaultSeparator=z,this.open=D||"(",this.close=O||")"}apply(D){const O=_.JoinWithManySeparators.join(D,this.separators,this.defaultSeparator);return new _.GenericWrapper(this.open,this.close).wrap(O)}}class T{constructor(D,O){this._genericCommand="matrix",this.separators=new A(D,O)}apply(D){const O=this._command,F=`\\begin{${O}}
${D.join("")}
\\end{${O}}`;return O===this._genericCommand?this.separators.wrap(F):F}get _command(){return this.separators.areParentheses()?"pmatrix":this.separators.areSquareBrackets()?"bmatrix":this.separators.areBrackets()?"Bmatrix":this.separators.areDivides()?"vmatrix":this.separators.areParallels()?"Vmatrix":this.separators.areNotEqual()?this._genericCommand:"bmatrix"}}class A{constructor(D,O){this.open=D,this.close=O}wrap(D){return new _.GenericWrapper(this.open,this.close).wrap(D)}areParentheses(){return this._compare("(",")")}areSquareBrackets(){return this._compare("[","]")}areBrackets(){return this._compare("{","}")}areDivides(){return this._compare("|","|")}areParallels(){return this._compare("||","||")}areNotEqual(){return this.open!==this.close}_compare(D,O){return this.open===D&&this.close===O}}},6440:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MFrac=void 0;const x=d(8917),_=d(4279);p.MFrac=class{constructor(S){this._mathmlElement=S}convert(){const{children:S,name:T}=this._mathmlElement,A=S.length;if(A!==2)throw new x.InvalidNumberOfChildrenError(T,2,A);const R=(0,_.mathMLElementToLaTeXConverter)(S[0]).convert(),D=(0,_.mathMLElementToLaTeXConverter)(S[1]).convert();return this._isBevelled()?`${this._wrapIfMoreThanOneChar(R)}/${this._wrapIfMoreThanOneChar(D)}`:`\\frac{${R}}{${D}}`}_wrapIfMoreThanOneChar(S){return new _.ParenthesisWrapper().wrapIfMoreThanOneChar(S)}_isBevelled(){return!!this._mathmlElement.attributes.bevelled}}},7037:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MI=void 0;const x=d(4279),_=d(5406),S=d(6122);p.MI=class{constructor(A){this.utf8Converter=new S.HashUTF8ToLtXConverter,this._mathmlElement=A}convert(){const A=(0,x.normalizeWhiteSpaces)(this._mathmlElement.value);if(A===" ")return T.apply(A);const R=A.trim(),D=T.apply(R),O=this.utf8Converter.convert(D);return O!==D?O:this.wrapInMathVariant(D,this.getMathVariant(this._mathmlElement.attributes))}getMathVariant(A){if(A&&A.mathvariant)return A.mathvariant}wrapInMathVariant(A,R){switch(R){case"bold":return`\\mathbf{${A}}`;case"italic":return`\\mathit{${A}}`;case"bold-italic":return`\\mathbf{\\mathit{${A}}}`;case"double-struck":return`\\mathbb{${A}}`;case"bold-fraktur":return`\\mathbf{\\mathfrak{${A}}}`;case"script":return`\\mathcal{${A}}`;case"bold-script":return`\\mathbf{\\mathcal{${A}}}`;case"fraktur":return`\\mathfrak{${A}}`;case"sans-serif":return`\\mathsf{${A}}`;case"bold-sans-serif":return`\\mathbf{\\mathsf{${A}}}`;case"sans-serif-italic":return`\\mathsf{\\mathit{${A}}}`;case"sans-serif-bold-italic":return`\\mathbf{\\mathsf{\\mathit{${A}}}}`;case"monospace":return`\\mathtt{${A}}`;default:return A}}};class T{constructor(R){this._value=R}static apply(R){return new T(R)._apply()}_apply(){return this._findByCharacter()||this._findByGlyph()||this._findByNumber()||new S.HashUTF8ToLtXConverter().convert(this._value)}_findByCharacter(){return _.allMathSymbolsByChar[this._value]}_findByGlyph(){return _.allMathSymbolsByGlyph[this._value]}_findByNumber(){return _.mathNumberByGlyph[this._value]}}},8303:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MMultiscripts=void 0;const x=d(4279),_=d(8917);p.MMultiscripts=class{constructor(S){this._mathmlElement=S}convert(){const{name:S,children:T}=this._mathmlElement,A=T.length;if(A<3)throw new _.InvalidNumberOfChildrenError(S,3,A,"at least");const R=(0,x.mathMLElementToLaTeXConverter)(T[0]).convert();return this._prescriptLatex()+this._wrapInParenthesisIfThereIsSpace(R)+this._postscriptLatex()}_prescriptLatex(){const{children:S}=this._mathmlElement;let T,A;if(this._isPrescripts(S[1]))T=S[2],A=S[3];else{if(!this._isPrescripts(S[3]))return"";T=S[4],A=S[5]}return`\\_{${(0,x.mathMLElementToLaTeXConverter)(T).convert()}}^{${(0,x.mathMLElementToLaTeXConverter)(A).convert()}}`}_postscriptLatex(){const{children:S}=this._mathmlElement;if(this._isPrescripts(S[1]))return"";const T=S[1],A=S[2];return`_{${(0,x.mathMLElementToLaTeXConverter)(T).convert()}}^{${(0,x.mathMLElementToLaTeXConverter)(A).convert()}}`}_wrapInParenthesisIfThereIsSpace(S){return S.match(/\s+/g)?new x.ParenthesisWrapper().wrap(S):S}_isPrescripts(S){return(S==null?void 0:S.name)==="mprescripts"}}},4464:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MN=void 0;const x=d(4279),_=d(5406);p.MN=class{constructor(S){this._mathmlElement=S}convert(){const S=(0,x.normalizeWhiteSpaces)(this._mathmlElement.value).trim();return _.mathNumberByGlyph[S]||S}}},3487:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MO=void 0;const x=d(4279),_=d(5406);p.MO=class{constructor(T){this._mathmlElement=T}convert(){const T=(0,x.normalizeWhiteSpaces)(this._mathmlElement.value).trim();return S.operate(T)}};class S{constructor(A){this._value=A}static operate(A){return new S(A)._operate()}_operate(){return this._findByCharacter()||this._findByGlyph()||this._findByNumber()||new _.HashUTF8ToLtXConverter().convert(this._value)}_findByCharacter(){return _.allMathOperatorsByChar[this._value]}_findByGlyph(){return _.allMathOperatorsByGlyph[this._value]}_findByNumber(){return _.mathNumberByGlyph[this._value]}}},7443:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MPhantom=void 0,p.MPhantom=class{constructor(d){this._mathmlElement=d}convert(){return""}}},6052:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MRoot=void 0;const x=d(4279),_=d(8917);p.MRoot=class{constructor(S){this._mathmlElement=S}convert(){const{name:S,children:T}=this._mathmlElement,A=T.length;if(A!==2)throw new _.InvalidNumberOfChildrenError(S,2,A);const R=(0,x.mathMLElementToLaTeXConverter)(T[0]).convert();return`\\sqrt[${(0,x.mathMLElementToLaTeXConverter)(T[1]).convert()}]{${R}}`}}},6346:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MRow=void 0;const x=d(4279);p.MRow=class{constructor(_){this._mathmlElement=_}convert(){return this._isLinearSystemPattern()?this._convertAsLinearSystem():this._mathmlElement.children.map(_=>(0,x.mathMLElementToLaTeXConverter)(_)).map(_=>_.convert()).join(" ")}_isLinearSystemPattern(){const{children:_}=this._mathmlElement;if(_.length!==3)return!1;const S=_[0],T=S.name==="mo"&&S.value.trim()==="{",A=_[1].name==="mtable",R=_[2],D=R.name==="mo"&&R.value.trim()==="";return T&&A&&D}_convertAsLinearSystem(){return`\\begin{cases} ${this._mathmlElement.children[1].children.map(_=>(0,x.mathMLElementToLaTeXConverter)(_)).map(_=>_.convert()).join(" \\\\ ")} \\end{cases}`}}},3700:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MSpace=void 0,p.MSpace=class{constructor(d){this._mathmlElement=d}convert(){const{linebreak:d}=this._mathmlElement.attributes;return d==="newline"?" \\\\ ":" "}}},8686:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MSqrt=void 0;const x=d(4279);p.MSqrt=class{constructor(_){this._mathmlElement=_}convert(){return`\\sqrt{${this._mathmlElement.children.map(_=>(0,x.mathMLElementToLaTeXConverter)(_)).map(_=>_.convert()).join(" ")}}`}}},2564:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MSub=void 0;const x=d(4279),_=d(8917);p.MSub=class{constructor(S){this._mathmlElement=S}convert(){const{name:S,children:T}=this._mathmlElement,A=T.length;if(A!==2)throw new _.InvalidNumberOfChildrenError(S,2,A);const R=T[0],D=T[1];return`${this._handleBaseChild(R)}_${this._handleSubscriptChild(D)}`}_handleBaseChild(S){const T=S.children,A=(0,x.mathMLElementToLaTeXConverter)(S).convert();return T.length<=1?A:new x.ParenthesisWrapper().wrapIfMoreThanOneChar(A)}_handleSubscriptChild(S){const T=(0,x.mathMLElementToLaTeXConverter)(S).convert();return new x.BracketWrapper().wrap(T)}}},1358:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MSubsup=void 0;const x=d(4279),_=d(8917);p.MSubsup=class{constructor(S){this._mathmlElement=S}convert(){const{name:S,children:T}=this._mathmlElement,A=T.length;if(A!==3)throw new _.InvalidNumberOfChildrenError(S,3,A);const R=T[0],D=T[1],O=T[2];return`${this._handleBaseChild(R)}_${this._handleSubscriptChild(D)}^${this._handleSuperscriptChild(O)}`}_handleBaseChild(S){const T=S.children,A=(0,x.mathMLElementToLaTeXConverter)(S).convert();return T.length<=1?A:new x.ParenthesisWrapper().wrapIfMoreThanOneChar(A)}_handleSubscriptChild(S){const T=(0,x.mathMLElementToLaTeXConverter)(S).convert();return new x.BracketWrapper().wrap(T)}_handleSuperscriptChild(S){const T=(0,x.mathMLElementToLaTeXConverter)(S).convert();return new x.BracketWrapper().wrap(T)}}},6926:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MSup=void 0;const x=d(4279),_=d(8917);p.MSup=class{constructor(S){this._mathmlElement=S}convert(){const{name:S,children:T}=this._mathmlElement,A=T.length;if(A!==2)throw new _.InvalidNumberOfChildrenError(S,2,A);const R=T[0],D=T[1];return`${this._handleBaseChild(R)}^${this._handleExponentChild(D)}`}_handleBaseChild(S){const T=S.children,A=(0,x.mathMLElementToLaTeXConverter)(S).convert();return T.length<=1?A:new x.ParenthesisWrapper().wrapIfMoreThanOneChar(A)}_handleExponentChild(S){const T=(0,x.mathMLElementToLaTeXConverter)(S).convert();return new x.BracketWrapper().wrap(T)}}},2350:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MTable=void 0;const x=d(4279);p.MTable=class{constructor(_){this._mathmlElement=_,this._addFlagRecursiveIfName(this._mathmlElement.children,"mtable","innerTable")}convert(){const _=this._mathmlElement.children.map(S=>(0,x.mathMLElementToLaTeXConverter)(S)).map(S=>S.convert()).join(` \\\\
`);return this._hasFlag("innerTable")?this._wrap(_):_}_wrap(_){return`\\begin{matrix}${_}\\end{matrix}`}_addFlagRecursiveIfName(_,S,T){_.forEach(A=>{A.name===S&&(A.attributes[T]=T),this._addFlagRecursiveIfName(A.children,S,T)})}_hasFlag(_){return!!this._mathmlElement.attributes[_]}}},3951:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MText=void 0;const x=d(7037);p.MText=class{constructor(S){this._mathmlElement=S}convert(){const{attributes:S,value:T}=this._mathmlElement;return[...T].map(A=>/^[a-zA-Z0-9]$/.test(A)||A===" "?{value:A,isAlphanumeric:!0}:{value:A,isAlphanumeric:!1}).reduce((A,R)=>{if(R.isAlphanumeric){const D=A[A.length-1];if(D&&D.isAlphanumeric)return D.value+=R.value,A}return[...A,R]},[]).map(A=>A.isAlphanumeric?new _(S.mathvariant).apply(A.value):new x.MI({name:"mi",attributes:{},children:[],value:A.value}).convert()).join("")}};class _{constructor(T){this._mathvariant=T||"normal"}apply(T){return this._commands.reduce((A,R,D)=>D===0?`${R}{${T}}`:`${R}{${A}}`,"")}get _commands(){switch(this._mathvariant){case"bold":return["\\textbf"];case"italic":return["\\textit"];case"bold-italic":return["\\textit","\\textbf"];case"double-struck":return["\\mathbb"];case"monospace":return["\\mathtt"];case"bold-fraktur":case"fraktur":return["\\mathfrak"];default:return["\\text"]}}}},1586:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MTr=void 0;const x=d(4279);p.MTr=class{constructor(_){this._mathmlElement=_}convert(){return this._mathmlElement.children.map(_=>(0,x.mathMLElementToLaTeXConverter)(_)).map(_=>_.convert()).join(" & ")}}},1222:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MUnderover=void 0;const x=d(4279),_=d(8917);p.MUnderover=class{constructor(S){this._mathmlElement=S}convert(){const{name:S,children:T}=this._mathmlElement,A=T.length;if(A!==3)throw new _.InvalidNumberOfChildrenError(S,3,A);return`${(0,x.mathMLElementToLaTeXConverter)(T[0]).convert()}_{${(0,x.mathMLElementToLaTeXConverter)(T[1]).convert()}}^{${(0,x.mathMLElementToLaTeXConverter)(T[2]).convert()}}`}}},9165:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Void=void 0,p.Void=class{constructor(d){this._mathmlElement=d}convert(){return""}}},5443:function(c,p,d){var x=this&&this.__createBinding||(Object.create?function(D,O,F,z){z===void 0&&(z=F);var j=Object.getOwnPropertyDescriptor(O,F);j&&!("get"in j?!O.__esModule:j.writable||j.configurable)||(j={enumerable:!0,get:function(){return O[F]}}),Object.defineProperty(D,z,j)}:function(D,O,F,z){z===void 0&&(z=F),D[z]=O[F]}),_=this&&this.__setModuleDefault||(Object.create?function(D,O){Object.defineProperty(D,"default",{enumerable:!0,value:O})}:function(D,O){D.default=O}),S=this&&this.__importStar||function(D){if(D&&D.__esModule)return D;var O={};if(D!=null)for(var F in D)F!=="default"&&Object.prototype.hasOwnProperty.call(D,F)&&x(O,D,F);return _(O,D),O};Object.defineProperty(p,"__esModule",{value:!0}),p.MathMLElementToLatexConverterAdapter=void 0;const T=S(d(6959)),A=d(2697);p.MathMLElementToLatexConverterAdapter=class{constructor(D){this._mathMLElement=D??new A.VoidMathMLElement}toLatexConverter(){const{name:D}=this._mathMLElement;return new(R[D]||T.GenericSpacingWrapper)(this._mathMLElement)}};const R={math:T.Math,mi:T.MI,mo:T.MO,mn:T.MN,msqrt:T.MSqrt,mfenced:T.MFenced,mfrac:T.MFrac,mroot:T.MRoot,maction:T.MAction,menclose:T.MEnclose,merror:T.MError,mphantom:T.MPhantom,msup:T.MSup,msub:T.MSub,msubsup:T.MSubsup,mmultiscripts:T.MMultiscripts,mtext:T.MText,munderover:T.MUnderover,mtable:T.MTable,mtr:T.MTr,mover:T.GenericUnderOver,munder:T.GenericUnderOver,mrow:T.MRow,mspace:T.MSpace,mpadded:T.GenericSpacingWrapper,void:T.Void}},5243:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ErrorHandler=void 0,p.ErrorHandler=class{constructor(){this._errors=[],this.errorLocator={}}fixError(d,x){return this._isMissingAttributeValueError(x)?(this._errors.push(x),this._fixMissingAttribute(x,d)):d}isThereAnyErrors(){return this._errors.length>0}cleanErrors(){this._errors=[]}_fixMissingAttribute(d,x){const _=d.split('"')[1];if(_)return x.replace(this._matchMissingValueForAttribute(_),"");for(;this._mathGenericMissingValue().exec(x);)x=x.replace(this._mathGenericMissingValue(),"$1$3");return x}_matchMissingValueForAttribute(d){return new RegExp(`(${d}=(?!("|')))|(${d}(?!("|')))`,"gm")}_mathGenericMissingValue(){return/(\<.* )(\w+=(?!\"|\'))(.*\>)/gm}_isMissingAttributeValueError(d){return!!d.includes("attribute")&&!!d.includes("missed")||d.includes("attribute value missed")}}},9208:function(c,p,d){var x=this&&this.__createBinding||(Object.create?function(S,T,A,R){R===void 0&&(R=A);var D=Object.getOwnPropertyDescriptor(T,A);D&&!("get"in D?!T.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return T[A]}}),Object.defineProperty(S,R,D)}:function(S,T,A,R){R===void 0&&(R=A),S[R]=T[A]}),_=this&&this.__exportStar||function(S,T){for(var A in S)A==="default"||Object.prototype.hasOwnProperty.call(T,A)||x(T,S,A)};Object.defineProperty(p,"__esModule",{value:!0}),_(d(9548),p),_(d(5243),p),_(d(1101),p)},1101:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ElementsToMathMLAdapter=void 0,p.ElementsToMathMLAdapter=class{convert(d){return d.filter(x=>x.tagName!==void 0).map(x=>this._convertElement(x))}_convertElement(d){return{name:d.tagName,attributes:this._convertElementAttributes(d.attributes),value:this._hasElementChild(d)?"":d.textContent||"",children:this._hasElementChild(d)?this.convert(Array.from(d.childNodes)):[]}}_convertElementAttributes(d){return Array.from(d).reduce((x,_)=>Object.assign({[_.nodeName]:_.nodeValue===_.nodeName?"":_.nodeValue},x),{})}_hasElementChild(d){const x=d.childNodes;return!!x&&x.length!==0&&this._isThereAnyNoTextNode(x)}_isThereAnyNoTextNode(d){return Array.from(d).some(x=>x.nodeName!=="#text")}}},9548:function(c,p,d){var x=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(p,"__esModule",{value:!0}),p.XmlToMathMLAdapter=void 0;const _=x(d(8978));p.XmlToMathMLAdapter=class{constructor(S,T){this._xml="",this._elementsConvertor=S,this._errorHandler=T,this._xmlDOM=new _.default.DOMParser({locator:this._errorHandler.errorLocator,errorHandler:this._fixError.bind(this)})}convert(S){return this._xml=this._removeLineBreaks(S),this._xml=this._removeMsWordPrefixes(this._xml),this._elementsConvertor.convert(this._mathMLElements)}_fixError(S){this._xml=this._errorHandler.fixError(this._xml,S)}_removeLineBreaks(S){return S.replace(/\n|\r\n|\r/g,"")}_removeMsWordPrefixes(S){return S.replace(/mml:/g,"")}get _mathMLElements(){let S=this._xmlDOM.parseFromString(this._xml).getElementsByTagName("math");return this._errorHandler.isThereAnyErrors()&&(this._errorHandler.cleanErrors(),S=this._xmlDOM.parseFromString(this._xml).getElementsByTagName("math")),Array.from(S)}}},7941:function(c,p,d){var x=this&&this.__createBinding||(Object.create?function(S,T,A,R){R===void 0&&(R=A);var D=Object.getOwnPropertyDescriptor(T,A);D&&!("get"in D?!T.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return T[A]}}),Object.defineProperty(S,R,D)}:function(S,T,A,R){R===void 0&&(R=A),S[R]=T[A]}),_=this&&this.__exportStar||function(S,T){for(var A in S)A==="default"||Object.prototype.hasOwnProperty.call(T,A)||x(T,S,A)};Object.defineProperty(p,"__esModule",{value:!0}),_(d(8585),p)},8585:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.makeToMathElementsConverter=void 0;const x=d(9208);p.makeToMathElementsConverter=()=>{const _=new x.ElementsToMathMLAdapter,S=new x.ErrorHandler;return new x.XmlToMathMLAdapter(_,S)}},8672:function(c,p,d){var x=this&&this.__createBinding||(Object.create?function(S,T,A,R){R===void 0&&(R=A);var D=Object.getOwnPropertyDescriptor(T,A);D&&!("get"in D?!T.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return T[A]}}),Object.defineProperty(S,R,D)}:function(S,T,A,R){R===void 0&&(R=A),S[R]=T[A]}),_=this&&this.__exportStar||function(S,T){for(var A in S)A==="default"||Object.prototype.hasOwnProperty.call(T,A)||x(T,S,A)};Object.defineProperty(p,"__esModule",{value:!0}),_(d(3798),p)},3798:(c,p,d)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.MathMLToLaTeX=void 0;const x=d(5443),_=d(7941);p.MathMLToLaTeX=class{static convert(S){return(0,_.makeToMathElementsConverter)().convert(S).map(T=>new x.MathMLElementToLatexConverterAdapter(T).toLatexConverter()).map(T=>T.convert()).join("").trim()}}},2965:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.allMathOperatorsByChar=void 0,p.allMathOperatorsByChar={_:"\\underline","&#x23E1;":"\\underbrace","&#x23E0;":"\\overbrace","&#x23DF;":"\\underbrace","&#x23DE;":"\\overbrace","&#x23DD;":"\\underbrace","&#x23DC;":"\\overbrace","&#x23B5;":"\\underbrace","&#x23B4;":"\\overbrace","&#x20DC;":"\\square","&#x20DB;":"\\square","&#x2064;":"","&#x2057;":"''''","&#x203E;":"\\bar","&#x2037;":"```","&#x2036;":"``","&#x2035;":"`","&#x2034;":"'''","&#x2033;":"''","&#x201F;":"``","&#x201E;":",,","&#x201B;":"`","&#x201A;":",","&#x302;":"\\hat","&#x2F7;":"\\sim","&#x2DD;":"\\sim","&#x2DC;":"\\sim","&#x2DA;":"\\circ","&#x2D9;":"\\cdot","&#x2D8;":"","&#x2CD;":"\\_","&#x2CB;":"","&#x2CA;":"","&#x2C9;":"","&#x2C7;":"","&#x2C6;":"\\hat","&#xBA;":"o","&#xB9;":"1","&#xB8;":"","&#xB4;":"","&#xB3;":"3","&#xB2;":"2","&#xB0;":"\\circ","&#xAF;":"\\bar","&#xAA;":"a","&#xA8;":"\\cdot\\cdot","~":"\\sim","`":"`","^":"\\hat","--":"--","++":"++","&amp;":"\\&","&#x2061;":"","&#x221C;":"\\sqrt[4]{}","&#x221B;":"\\sqrt[3]{}","&#x221A;":"\\sqrt{}","&#x2146;":"d","&#x2145;":"\\mathbb{D}","?":"?","@":"@","//":"//","!!":"!!","!":"!","&#x266F;":"\\#","&#x266E;":"","&#x266D;":"","&#x2032;":"'","&lt;>":"<>","**":"\\star\\star","&#x2207;":"\\nabla","&#x2202;":"\\partial","&#x2299;":"\\bigodot","&#xAC;":"\\neg","&#x2222;":"\\measuredangle","&#x2221;":"\\measuredangle","&#x2220;":"\\angle","&#xF7;":"\\div","/":"/","&#x2216;":"\\backslash","\\":"\\backslash","%":"\\%","&#x2297;":"\\bigotimes","&#xB7;":"\\cdot","&#x2A3F;":"\\coprod","&#x2A2F;":"\\times","&#x22C5;":"\\cdot","&#x22A1;":"\\boxdot","&#x22A0;":"\\boxtimes","&#x2062;":"","&#x2043;":"-","&#x2022;":"\\cdot","&#xD7;":"\\times",".":".","*":"\\star","&#x222A;":"\\cup","&#x2229;":"\\cap","&#x2210;":"\\coprod","&#x220F;":"\\prod","&#x2240;":"","&#x2AFF;":"","&#x2AFC;":"\\mid\\mid\\mid","&#x2A09;":"\\times","&#x2A08;":"","&#x2A07;":"","&#x2A06;":"\\sqcup","&#x2A05;":"\\sqcap","&#x2A02;":"\\otimes","&#x2A00;":"\\odot","&#x22C2;":"\\cap","&#x22C1;":"\\vee","&#x22C0;":"\\wedge","&#x2A04;":"\\uplus","&#x2A03;":"\\cup","&#x22C3;":"\\cup","&#x2A1C;":"\\underline{\\int}","&#x2A1B;":"\\overline{\\int}","&#x2A1A;":"\\int","&#x2A19;":"\\int","&#x2A18;":"\\int","&#x2A17;":"\\int","&#x2A16;":"\\oint","&#x2A15;":"\\oint","&#x2A14;":"\\int","&#x2A13;":"\\int","&#x2A12;":"\\int","&#x2A11;":"\\int","&#x2A10;":"\\int","&#x2A0F;":"\\bcancel{\\int}","&#x2A0E;":"","&#x2A0D;":"\\hcancel{\\int}","&#x2A0C;":"\\iiiint","&#x2233;":"\\oint","&#x2232;":"\\oint","&#x2231;":"\\int","&#x2230;":"\\oiint","&#x222F;":"\\oiint","&#x222E;":"\\oint","&#x222B;":"\\int","&#x2A01;":"\\oplus","&#x2298;":"\\oslash","&#x2296;":"\\ominus","&#x2295;":"\\oplus","&#x222D;":"\\iiint","&#x222C;":"\\iint","&#x2A0B;":"","&#x2A0A;":"","&#x2211;":"\\sum","&#x229F;":"\\boxminus","&#x229E;":"\\boxplus","&#x2214;":"\\dot{+}","&#x2213;":"+-","&#x2212;":"-","&#xB1;":"\\pm","-":"-","+":"+","&#x2B46;":"\\Rrightarrow","&#x2B45;":"\\Lleftarrow","&#x29F4;":":\\rightarrow","&#x29EF;":"","&#x29DF;":"\\bullet-\\bullet","&#x299F;":"\\angle","&#x299E;":"\\measuredangle","&#x299D;":"\\measuredangle","&#x299C;":"\\perp","&#x299B;":"\\measuredangle","&#x299A;":"","&#x2999;":"\\vdots","&#x297F;":"","&#x297E;":"","&#x297D;":"\\prec","&#x297C;":"\\succ","&#x297B;":"\\underset{\\rightarrow}{\\supset}","&#x297A;":"","&#x2979;":"\\underset{\\rightarrow}{\\subset}","&#x2978;":"\\underset{\\rightarrow}{>}","&#x2977;":"","&#x2976;":"\\underset{\\leftarrow}{<}","&#x2975;":"\\underset{\\approx}{\\rightarrow}","&#x2974;":"\\underset{\\sim}{\\rightarrow}","&#x2973;":"\\underset{\\sim}{\\leftarrow}","&#x2972;":"\\overset{\\sim}{\\rightarrow}","&#x2971;":"\\overset{=}{\\rightarrow}","&#x2970;":"","&#x296F;":"","&#x296E;":"","&#x296D;":"\\overline{\\rightharpoondown}","&#x296C;":"\\underline{\\rightharpoonup}","&#x296B;":"\\overline{\\leftharpoondown}","&#x296A;":"\\underline{\\leftharpoonup}","&#x2969;":"\\rightleftharpoons","&#x2968;":"\\rightleftharpoons","&#x2967;":"\\rightleftharpoons","&#x2966;":"\\rightleftharpoons","&#x2965;":"\\Downarrow","&#x2964;":"\\Rightarrow","&#x2963;":"\\Uparrow","&#x2962;":"\\Leftarrow","&#x2961;":"\\downarrow","&#x2960;":"\\uparrow","&#x295F;":"\\rightarrow","&#x295E;":"\\leftarrow","&#x295D;":"\\downarrow","&#x295C;":"\\uparrow","&#x295B;":"\\rightarrow","&#x295A;":"\\leftarrow","&#x2959;":"\\downarrow","&#x2958;":"\\uparrow","&#x2957;":"\\rightarrow","&#x2956;":"\\leftarrow","&#x2955;":"\\downarrow","&#x2954;":"\\uparrow","&#x2953;":"\\rightarrow","&#x2952;":"\\leftarrow","&#x2951;":"\\updownarrow","&#x2950;":"\\leftrightarrow","&#x294F;":"\\updownarrow","&#x294E;":"\\leftrightarrow","&#x294D;":"\\updownarrow","&#x294C;":"\\updownarrow","&#x294B;":"\\leftrightarrow","&#x294A;":"\\leftrightarrow","&#x2949;":"","&#x2948;":"\\leftrightarrow","&#x2947;":"\\nrightarrow","&#x2946;":"","&#x2945;":"","&#x2944;":"\\rightleftarrows","&#x2943;":"\\leftrightarrows","&#x2942;":"\\rightleftarrows","&#x2941;":"\\circlearrowright","&#x2940;":"\\circlearrowleft","&#x293F;":"\\rightarrow","&#x293E;":"\\leftarrow","&#x293D;":"","&#x293C;":"","&#x293B;":"","&#x293A;":"","&#x2939;":"","&#x2938;":"","&#x2937;":"\\Rsh","&#x2936;":"\\Lsh","&#x2935;":"\\downarrow","&#x2934;":"\\uparrow","&#x2933;":"\\leadsto","&#x2932;":"","&#x2931;":"","&#x2930;":"","&#x292F;":"","&#x292E;":"","&#x292D;":"","&#x292C;":"\\times","&#x292B;":"\\times","&#x292A;":"","&#x2929;":"","&#x2928;":"","&#x2927;":"","&#x2926;":"","&#x2925;":"","&#x2924;":"","&#x2923;":"","&#x2922;":"","&#x2921;":"","&#x2920;":"\\mapsto\\cdot","&#x291F;":"\\cdot\\leftarrow","&#x291E;":"\\rightarrow\\cdot","&#x291D;":"\\leftarrow","&#x291C;":"\\rightarrow","&#x291B;":"\\leftarrow","&#x291A;":"\\rightarrow","&#x2919;":"\\leftarrow","&#x2918;":"\\rightarrow","&#x2917;":"\\rightarrow","&#x2916;":"\\rightarrow","&#x2915;":"\\rightarrow","&#x2914;":"\\rightarrow","&#x2913;":"\\downarrow","&#x2912;":"\\uparrow","&#x2911;":"\\rightarrow","&#x2910;":"\\rightarrow","&#x290F;":"\\rightarrow","&#x290E;":"\\leftarrow","&#x290D;":"\\rightarrow","&#x290C;":"\\leftarrow","&#x290B;":"\\Downarrow","&#x290A;":"\\Uparrow","&#x2909;":"\\uparrow","&#x2908;":"\\downarrow","&#x2907;":"\\Rightarrow","&#x2906;":"\\Leftarrow","&#x2905;":"\\mapsto","&#x2904;":"\\nLeftrightarrow","&#x2903;":"\\nRightarrow","&#x2902;":"\\nLeftarrow","&#x2901;":"\\rightsquigarrow","&#x2900;":"\\rightsquigarrow","&#x27FF;":"\\rightsquigarrow","&#x27FE;":"\\Rightarrow","&#x27FD;":"\\Leftarrow","&#x27FC;":"\\mapsto","&#x27FB;":"\\leftarrow","&#x27FA;":"\\Longleftrightarrow","&#x27F9;":"\\Longrightarrow","&#x27F8;":"\\Longleftarrow","&#x27F7;":"\\leftrightarrow","&#x27F6;":"\\rightarrow","&#x27F5;":"\\leftarrow","&#x27F1;":"\\Downarrow","&#x27F0;":"\\Uparrow","&#x22B8;":"\\rightarrow","&#x21FF;":"\\leftrightarrow","&#x21FE;":"\\rightarrow","&#x21FD;":"\\leftarrow","&#x21FC;":"\\nleftrightarrow","&#x21FB;":"\\nrightarrow","&#x21FA;":"\\nleftarrow","&#x21F9;":"\\nleftrightarrow","&#x21F8;":"\\nrightarrow","&#x21F7;":"\\nleftarrow","&#x21F6;":"\\Rrightarrow","&#x21F5;":"","&#x21F4;":"\\rightarrow","&#x21F3;":"\\Updownarrow","&#x21F2;":"\\searrow","&#x21F1;":"\\nwarrow","&#x21F0;":"\\Leftarrow","&#x21EF;":"\\Uparrow","&#x21EE;":"\\Uparrow","&#x21ED;":"\\Uparrow","&#x21EC;":"\\Uparrow","&#x21EB;":"\\Uparrow","&#x21EA;":"\\Uparrow","&#x21E9;":"\\Downarrow","&#x21E8;":"\\Rightarrow","&#x21E7;":"\\Uparrow","&#x21E6;":"\\Leftarrow","&#x21E5;":"\\rightarrow","&#x21E4;":"\\leftarrow","&#x21E3;":"\\downarrow","&#x21E2;":"\\rightarrow","&#x21E1;":"\\uparrow","&#x21E0;":"\\leftarrow","&#x21DF;":"\\downarrow","&#x21DE;":"\\uparrow","&#x21DD;":"\\rightsquigarrow","&#x21DC;":"\\leftarrow","&#x21DB;":"\\Rrightarrow","&#x21DA;":"\\Lleftarrow","&#x21D9;":"\\swarrow","&#x21D8;":"\\searrow","&#x21D7;":"\\nearrow","&#x21D6;":"\\nwarrow","&#x21D5;":"\\Updownarrow","&#x21D4;":"\\Leftrightarrow","&#x21D3;":"\\Downarrow","&#x21D2;":"\\Rightarrow","&#x21D1;":"\\Uparrow","&#x21D0;":"\\Leftarrow","&#x21CF;":"\\nRightarrow","&#x21CE;":"\\nLeftrightarrow","&#x21CD;":"\\nLeftarrow","&#x21CC;":"\\rightleftharpoons","&#x21CB;":"\\leftrightharpoons","&#x21CA;":"\\downdownarrows","&#x21C9;":"\\rightrightarrows","&#x21C8;":"\\upuparrows","&#x21C7;":"\\leftleftarrows","&#x21C6;":"\\leftrightarrows","&#x21C5;":"","&#x21C4;":"\\rightleftarrows","&#x21C3;":"\\downharpoonleft","&#x21C2;":"\\downharpoonright","&#x21C1;":"\\rightharpoondown","&#x21C0;":"\\rightharpoonup","&#x21BF;":"\\upharpoonleft","&#x21BE;":"\\upharpoonright","&#x21BD;":"\\leftharpoondown","&#x21BC;":"\\leftharpoonup","&#x21BB;":"\\circlearrowright","&#x21BA;":"\\circlearrowleft","&#x21B9;":"\\leftrightarrows","&#x21B8;":"\\overline{\\nwarrow}","&#x21B7;":"\\curvearrowright","&#x21B6;":"\\curvearrowleft","&#x21B5;":"\\swarrow","&#x21B4;":"\\searrow","&#x21B3;":"\\Rsh","&#x21B2;":"\\Lsh","&#x21B1;":"\\Rsh","&#x21B0;":"\\Lsh","&#x21AF;":"\\swarrow","&#x21AE;":"","&#x21AD;":"\\leftrightsquigarrow","&#x21AC;":"\\looparrowright","&#x21AB;":"\\looparrowleft","&#x21AA;":"\\hookrightarrow","&#x21A9;":"\\hookleftarrow","&#x21A8;":"\\underline{\\updownarrow}","&#x21A7;":"\\downarrow","&#x21A6;":"\\rightarrowtail","&#x21A5;":"\\uparrow","&#x21A4;":"\\leftarrowtail","&#x21A3;":"\\rightarrowtail","&#x21A2;":"\\leftarrowtail","&#x21A1;":"\\downarrow","&#x21A0;":"\\twoheadrightarrow","&#x219F;":"\\uparrow","&#x219E;":"\\twoheadleftarrow","&#x219D;":"\\nearrow","&#x219C;":"\\nwarrow","&#x219B;":"","&#x219A;":"","&#x2199;":"\\swarrow","&#x2198;":"\\searrow","&#x2197;":"\\nearrow","&#x2196;":"\\nwarrow","&#x2195;":"\\updownarrow","&#x2194;":"\\leftrightarrow","&#x2193;":"\\downarrow","&#x2192;":"\\rightarrow","&#x2191;":"\\uparrow","&#x2190;":"\\leftarrow","|||":"\\left|||\\right.","||":"\\left||\\right.","|":"\\left|\\right.","&#x2AFE;":"","&#x2AFD;":"//","&#x2AFB;":"///","&#x2AFA;":"","&#x2AF9;":"","&#x2AF8;":"","&#x2AF7;":"","&#x2AF6;":"\\vdots","&#x2AF5;":"","&#x2AF4;":"","&#x2AF3;":"","&#x2AF2;":"\\nparallel","&#x2AF1;":"","&#x2AF0;":"","&#x2AEF;":"","&#x2AEE;":"\\bcancel{\\mid}","&#x2AED;":"","&#x2AEC;":"","&#x2AEB;":"","&#x2AEA;":"","&#x2AE9;":"","&#x2AE8;":"\\underline{\\perp}","&#x2AE7;":"\\overline{\\top}","&#x2AE6;":"","&#x2AE5;":"","&#x2AE4;":"","&#x2AE3;":"","&#x2AE2;":"","&#x2AE1;":"","&#x2AE0;":"\\perp","&#x2ADF;":"\\top","&#x2ADE;":"\\dashv","&#x2ADD;&#x338;":"","&#x2ADD;":"","&#x2ADB;":"\\pitchfork","&#x2ADA;":"","&#x2AD9;":"","&#x2AD8;":"","&#x2AD7;":"","&#x2AD6;":"","&#x2AD5;":"","&#x2AD4;":"","&#x2AD3;":"","&#x2AD2;":"","&#x2AD1;":"","&#x2AD0;":"","&#x2ACF;":"","&#x2ACE;":"","&#x2ACD;":"","&#x2ACC;":"\\underset{\\neq}{\\supset}","&#x2ACB;":"\\underset{\\neq}{\\subset}","&#x2ACA;":"\\underset{\\approx}{\\supset}","&#x2AC9;":"\\underset{\\approx}{\\subset}","&#x2AC8;":"\\underset{\\sim}{\\supset}","&#x2AC7;":"\\underset{\\sim}{\\subset}","&#x2AC6;":"\\supseteqq","&#x2AC5;":"\\subseteqq","&#x2AC4;":"\\dot{\\supseteq}","&#x2AC3;":"\\dot{\\subseteq}","&#x2AC2;":"\\underset{\\times}{\\supset}","&#x2AC1;":"\\underset{\\times}{\\subset}","&#x2AC0;":"\\underset{+}{\\supset}","&#x2ABF;":"\\underset{+}{\\subset}","&#x2ABE;":"","&#x2ABD;":"","&#x2ABC;":"\\gg ","&#x2ABB;":"\\ll","&#x2ABA;":"\\underset{\\cancel{\\approx}}{\\succ}","&#x2AB9;":"\\underset{\\cancel{\\approx}}{\\prec}","&#x2AB8;":"\\underset{\\approx}{\\succ}","&#x2AB7;":"\\underset{\\approx}{\\prec}","&#x2AB6;":"\\underset{\\cancel{=}}{\\succ}","&#x2AB5;":"\\underset{\\cancel{=}}{\\prec}","&#x2AB4;":"\\underset{=}{\\succ}","&#x2AB3;":"\\underset{=}{\\prec}","&#x2AB2;":"","&#x2AB1;":"","&#x2AAE;":"","&#x2AAD;":"\\underline{\\hcancel{>}}","&#x2AAC;":"\\underline{\\hcancel{>}}","&#x2AAB;":"\\hcancel{>}","&#x2AAA;":"\\hcancel{<}","&#x2AA9;":"","&#x2AA8;":"","&#x2AA7;":"\\vartriangleright","&#x2AA6;":"\\vartriangleleft","&#x2AA5;":"><","&#x2AA4;":"><","&#x2AA3;":"\\underline{\\ll}","&#x2AA2;&#x338;":"\\cancel{\\gg}","&#x2AA2;":"\\gg","&#x2AA1;&#x338;":"\\cancel{\\ll}","&#x2AA1;":"\\ll","&#x2AA0;":"\\overset{\\sim}{\\geqq}","&#x2A9F;":"\\overset{\\sim}{\\leqq}","&#x2A9E;":"\\overset{\\sim}{>}","&#x2A9D;":"\\overset{\\sim}{<}","&#x2A9C;":"","&#x2A9B;":"","&#x2A9A;":"\\overset{=}{>}","&#x2A99;":"\\overset{=}{<}","&#x2A98;":"","&#x2A97;":"","&#x2A96;":"","&#x2A95;":"","&#x2A94;":"","&#x2A93;":"","&#x2A92;":"\\underset{=}{\\gtrless}","&#x2A91;":"\\underset{=}{\\lessgtr}","&#x2A90;":"\\underset{<}{\\gtrsim}","&#x2A8F;":"\\underset{>}{\\lesssim}","&#x2A8E;":"\\underset{\\simeq}{>}","&#x2A8D;":"\\underset{\\simeq}{<}","&#x2A8C;":"\\gtreqqless","&#x2A8B;":"\\lesseqqgtr","&#x2A8A;":"\\underset{\\cancel{\\approx}}{>}","&#x2A89;":"\\underset{\\approx}{<}","&#x2A86;":"\\underset{\\approx}{>}","&#x2A85;":"\\underset{\\approx}{<}","&#x2A84;":"","&#x2A83;":"","&#x2A82;":"","&#x2A81;":"","&#x2A80;":"","&#x2A7F;":"","&#x2A7E;&#x338;":"\\bcancel{\\geq}","&#x2A7E;":"\\geq","&#x2A7D;&#x338;":"\\bcancel{\\leq}","&#x2A7D;":"\\leq","&#x2A7C;":"","&#x2A7B;":"","&#x2A7A;":"","&#x2A79;":"","&#x2A78;":"\\overset{\\dots}{\\equiv}","&#x2A77;":"","&#x2A76;":"===","&#x2A75;":"==","&#x2A74;":"::=","&#x2A73;":"","&#x2A72;":"\\underset{=}{+}","&#x2A71;":"\\overset{=}{+}","&#x2A70;":"\\overset{\\approx}{=}","&#x2A6F;":"\\overset{\\wedge}{=}","&#x2A6E;":"\\overset{*}{=}","&#x2A6D;":"\\dot{\\approx}","&#x2A6C;":"","&#x2A6B;":"","&#x2A6A;":"\\dot{\\sim}","&#x2A69;":"","&#x2A68;":"","&#x2A67;":"\\dot{\\equiv}","&#x2A66;":"\\underset{\\cdot}{=}","&#x2A65;":"","&#x2A64;":"","&#x2A63;":"\\underset{=}{\\vee}","&#x2A62;":"\\overset{=}{\\vee}","&#x2A61;":"ul(vv)","&#x2A60;":"\\underset{=}{\\wedge}","&#x2A5F;":"\\underline{\\wedge}","&#x2A5E;":"\\overset{=}{\\wedge}","&#x2A5D;":"\\hcancel{\\vee}","&#x2A5C;":"\\hcancel{\\wedge}","&#x2A5B;":"","&#x2A5A;":"","&#x2A59;":"","&#x2A58;":"\\vee","&#x2A57;":"\\wedge","&#x2A56;":"","&#x2A55;":"","&#x2A54;":"","&#x2A53;":"","&#x2A52;":"\\dot{\\vee}","&#x2A51;":"\\dot{\\wedge}","&#x2A50;":"","&#x2A4F;":"","&#x2A4E;":"","&#x2A4D;":"\\overline{\\cap}","&#x2A4C;":"\\overline{\\cup}","&#x2A4B;":"","&#x2A4A;":"","&#x2A49;":"","&#x2A48;":"","&#x2A47;":"","&#x2A46;":"","&#x2A45;":"","&#x2A44;":"","&#x2A43;":"\\overline{\\cap}","&#x2A42;":"\\overline{\\cup}","&#x2A41;":"","&#x2A40;":"","&#x2A3E;":"","&#x2A3D;":"\\llcorner","&#x2A3C;":"\\lrcorner","&#x2A3B;":"","&#x2A3A;":"","&#x2A39;":"","&#x2A38;":"","&#x2A37;":"","&#x2A36;":"\\hat{\\otimes}","&#x2A35;":"","&#x2A34;":"","&#x2A33;":"","&#x2A32;":"\\underline{\\times}","&#x2A31;":"\\underline{\\times}","&#x2A30;":"\\dot{\\times}","&#x2A2E;":"","&#x2A2D;":"","&#x2A2C;":"","&#x2A2B;":"","&#x2A2A;":"","&#x2A29;":"","&#x2A28;":"","&#x2A27;":"","&#x2A26;":"\\underset{\\sim}{+}","&#x2A25;":"\\underset{\\circ}{+}","&#x2A24;":"\\overset{\\sim}{+}","&#x2A23;":"\\hat{+}","&#x2A22;":"\\dot{+}","&#x2A21;":"\\upharpoonright","&#x2A20;":">>","&#x2A1F;":"","&#x2A1E;":"\\triangleleft","&#x2A1D;":"\\bowtie","&#x29FF;":"","&#x29FE;":"+","&#x29FB;":"\\hcancel{|||}","&#x29FA;":"\\hcancel{||}","&#x29F9;":"\\backslash","&#x29F8;":"/","&#x29F7;":"hcancel{\backslash}","&#x29F6;":"","&#x29F5;":"\\backslash","&#x29F2;":"\\Phi","&#x29F1;":"","&#x29F0;":"","&#x29EE;":"","&#x29ED;":"","&#x29EC;":"","&#x29EB;":"\\lozenge","&#x29EA;":"","&#x29E9;":"","&#x29E8;":"","&#x29E7;":"\\ddagger","&#x29E2;":"\\sqcup\\sqcup","&#x29E1;":"","&#x29E0;":"\\square","&#x29DE;":"","&#x29DD;":"","&#x29DC;":"","&#x29DB;":"\\{\\{","&#x29D9;":"\\{","&#x29D8;":"\\}","&#x29D7;":"","&#x29D6;":"","&#x29D5;":"\\bowtie","&#x29D4;":"\\bowtie","&#x29D3;":"\\bowtie","&#x29D2;":"\\bowtie","&#x29D1;":"\\bowtie","&#x29D0;&#x338;":"| \\not\\triangleright","&#x29D0;":"| \\triangleright","&#x29CF;&#x338;":"\\not\\triangleleft |","&#x29CF;":"\\triangleleft |","&#x29CE;":"","&#x29CD;":"\\triangle","&#x29CC;":"","&#x29CB;":"\\underline{\\triangle}","&#x29CA;":"\\dot{\\triangle}","&#x29C9;":"","&#x29C8;":"\\boxed{\\circ}","&#x29C7;":"\\boxed{\\circ}","&#x29C6;":"\\boxed{\\rightarrow}","&#x29C5;":"\\bcancel{\\square}","&#x29C4;":"\\cancel{\\square}","&#x29C3;":"\\odot","&#x29C2;":"\\odot","&#x29BF;":"\\odot","&#x29BE;":"\\odot","&#x29BD;":"\\varnothing","&#x29BC;":"\\oplus","&#x29BB;":"\\otimes","&#x29BA;":"","&#x29B9;":"\\varnothing","&#x29B8;":"\\varnothing","&#x29B7;":"\\ominus","&#x29B6;":"\\ominus","&#x29B5;":"\\ominus","&#x29B4;":"\\vec{\\varnothing}","&#x29B3;":"\\vec{\\varnothing}","&#x29B2;":"\\dot{\\varnothing}","&#x29B1;":"\\overline{\\varnothing}","&#x29B0;":"\\varnothing","&#x29AF;":"","&#x29AE;":"","&#x29AD;":"","&#x29AC;":"","&#x29AB;":"","&#x29AA;":"","&#x29A9;":"","&#x29A8;":"","&#x29A7;":"","&#x29A6;":"","&#x29A5;":"","&#x29A4;":"","&#x29A3;":"","&#x29A2;":"","&#x29A1;":"\\not\\lor","&#x29A0;":"\\bcancel{>}","&#x2982;":":","&#x2981;":"\\circ","&#x2758;":"|","&#x25B2;":"\\bigtriangleup","&#x22FF;":"\\Epsilon","&#x22FE;":"\\overline{\\ni}","&#x22FD;":"\\overline{\\ni}","&#x22FC;":"\\in","&#x22FB;":"\\in","&#x22FA;":"\\in","&#x22F9;":"\\underline{\\in}","&#x22F8;":"\\underline{\\in}","&#x22F7;":"\\overline{\\in}","&#x22F6;":"\\overline{\\in}","&#x22F5;":"\\dot{\\in}","&#x22F4;":"\\in","&#x22F3;":"\\in","&#x22F2;":"\\in","&#x22F0;":"\\ddots","&#x22E9;":"\\underset{\\sim}{\\succ}","&#x22E8;":"\\underset{\\sim}{\\prec}","&#x22E7;":"\\underset{\\not\\sim}{>}","&#x22E6;":"\\underset{\\not\\sim}{<}","&#x22E5;":"\\not\\sqsupseteq","&#x22E4;":"\\not\\sqsubseteq","&#x22E3;":"\\not\\sqsupseteq","&#x22E2;":"\\not\\sqsubseteq","&#x22E1;":"\\nsucc","&#x22E0;":"\\nprec","&#x22DF;":"\\succ","&#x22DE;":"\\prec","&#x22DD;":"\\overline{>}","&#x22DC;":"\\overline{<}","&#x22DB;":"\\underset{>}{\\leq}","&#x22DA;":"\\underset{<}{\\geq}","&#x22D5;":"\\#","&#x22D3;":"\\cup","&#x22D2;":"\\cap","&#x22D1;":"\\supset","&#x22D0;":"\\subset","&#x22CF;":"\\wedge","&#x22CE;":"\\vee","&#x22CD;":"\\simeq","&#x22C8;":"\\bowtie","&#x22C7;":"\\ast","&#x22C6;":"\\star","&#x22C4;":"\\diamond","&#x22BF;":"\\triangle","&#x22BE;":"\\measuredangle","&#x22BD;":"\\overline{\\lor}","&#x22BC;":"\\overline{\\land}","&#x22BB;":"\\underline{\\lor}","&#x22BA;":"\\top","&#x22B9;":"","&#x22B7;":"\\circ\\multimap","&#x22B6;":"\\circ\\multimap","&#x22B3;":"\\triangleright","&#x22B2;":"\\triangleleft","&#x22B1;":"\\succ","&#x22B0;":"\\prec","&#x22AB;":"|\\models","&#x22AA;":"|\\models","&#x22A7;":"\\models","&#x22A6;":"\\vdash","&#x229D;":"\\ominus","&#x229C;":"\\ominus","&#x229B;":"\\odot","&#x229A;":"\\odot","&#x2294;":"\\sqcup","&#x2293;":"\\sqcap","&#x2292;":"\\sqsupseteq","&#x2291;":"\\sqsubseteq","&#x2290;&#x338;":"\\not\\sqsupset","&#x2290;":"\\sqsupset","&#x228F;&#x338;":"\\not\\sqsubset","&#x228F;":"\\sqsubset","&#x228E;":"\\cup","&#x228D;":"\\cup","&#x228C;":"\\cup","&#x227F;&#x338;":"\\not\\succsim","&#x227F;":"\\succsim","&#x227E;":"\\precsim","&#x2279;":"\\not\\overset{>}{<}","&#x2278;":"\\not\\overset{>}{<}","&#x2277;":"\\overset{>}{<}","&#x2276;":"\\overset{<}{>}","&#x2275;":"\\not\\geg","&#x2274;":"\\not\\leq","&#x2273;":"\\geg","&#x2272;":"\\leq","&#x226C;":"","&#x2267;":"\\geg","&#x2266;&#x338;":"\\not\\leq","&#x2266;":"\\leq","&#x2263;":"\\overset{=}{=} ","&#x225E;":"\\overset{m}{=} ","&#x225D;":"\\overset{def}{=}","&#x2258;":"=","&#x2256;":"=","&#x2255;":"=:","&#x2253;":"\\doteq","&#x2252;":"\\doteq","&#x2251;":"\\doteq","&#x2250;":"\\doteq","&#x224F;&#x338;":"","&#x224F;":"","&#x224E;&#x338;":"","&#x224E;":"","&#x224C;":"\\approx","&#x224B;":"\\approx","&#x224A;":"\\approx","&#x2242;&#x338;":"\\neq","&#x2242;":"=","&#x223F;":"\\sim","&#x223E;":"\\infty","&#x223D;&#x331;":"\\sim","&#x223D;":"\\sim","&#x223B;":"\\sim","&#x223A;":":-:","&#x2239;":"-:","&#x2238;":"\\bot","&#x2237;":"::","&#x2236;":":","&#x2223;":"|","&#x221F;":"\\llcorner","&#x2219;":"\\cdot","&#x2218;":"\\circ","&#x2217;":"*","&#x2215;":"/","&#x220E;":"\\square","&#x220D;":"\\ni","&#x220A;":"\\in","&#x2206;":"\\Delta","&#x2044;":"/","&#x2AB0;&#x338;":"\\nsucceq","&#x2AB0;":"\\succeq","&#x2AAF;&#x338;":"\\npreceq","&#x2AAF;":"\\preceq","&#x2A88;":"\\ngeqslant","&#x2A87;":"\\nleqslant","&#x29F3;":"\\Phi","&#x29E6;":"\\models","&#x29E5;":"\\not\\equiv","&#x29E4;":"\\approx\\neq","&#x29E3;":"\\neq","&#x29C1;":"\\circle","&#x29C0;":"\\circle","&#x25E6;":"\\circle","&#x25D7;":"\\circle","&#x25D6;":"\\circle","&#x25CF;":"\\circle","&#x25CE;":"\\circledcirc","&#x25CD;":"\\circledcirc","&#x25CC;":"\\circledcirc","&#x25C9;":"\\circledcirc","&#x25C8;":"\\diamond","&#x25C7;":"\\diamond","&#x25C6;":"\\diamond","&#x25C5;":"\\triangleleft","&#x25C4;":"\\triangleleft","&#x25C3;":"\\triangleleft","&#x25C2;":"\\triangleleft","&#x25C1;":"\\triangleleft","&#x25C0;":"\\triangleleft","&#x25BF;":"\\triangledown","&#x25BE;":"\\triangledown","&#x25BD;":"\\triangledown","&#x25BC;":"\\triangledown","&#x25B9;":"\\triangleright","&#x25B8;":"\\triangleright","&#x25B7;":"\\triangleright","&#x25B6;":"\\triangleright","&#x25B5;":"\\triangle","&#x25B4;":"\\triangle","&#x25B3;":"\\triangle","&#x25B1;":"\\square","&#x25B0;":"\\square","&#x25AF;":"\\square","&#x25AE;":"\\square","&#x25AD;":"\\square","&#x25AB;":"\\square","&#x25AA;":"\\square","&#x25A1;":"\\square","&#x25A0;":"\\square","&#x22ED;":"\\not\\triangleright","&#x22EC;":"\\not\\triangleleft","&#x22EB;":"\\not\\triangleright","&#x22EA;":"\\not\\triangleleft","&#x22D9;":"\\ggg","&#x22D8;":"\\lll","&#x22D7;":"*>","&#x22D6;":"<*","&#x22D4;":"\\pitchfork","&#x22CC;":"","&#x22CB;":"","&#x22CA;":"\\rtimes","&#x22C9;":"\\ltimes","&#x22B5;":"\\triangleright","&#x22B4;":"","&#x22A5;":"\\bot","&#x2281;":"\\nsucc","&#x2280;":"\\preceq","&#x227D;":"\\succeq","&#x227C;":"\\preceq","&#x227B;":"\\succ","&#x227A;":"\\prec","&#x2271;":"\\geq/","&#x2270;":"\\leq/","&#x226D;":"\\neq","&#x226B;&#x338;":"\\not\\gg","&#x226B;":"\\gg","&#x226A;&#x338;":"\\not\\ll","&#x226A;":"\\ll","&#x2269;":"\\ngeqslant","&#x2268;":"\\nleqslant","&#x2261;":"\\equiv","&#x225F;":"\\doteq","&#x225C;":"\\triangleq","&#x225B;":"\\doteq","&#x225A;":"\\triangleq","&#x2259;":"\\triangleq","&#x2257;":"\\doteq","&#x2254;":":=","&#x224D;":"\\asymp","&#x2247;":"\\ncong","&#x2246;":"\\ncong","&#x2245;":"\\cong","&#x2244;":"\\not\\simeq","&#x2243;":"\\simeq","&#x2241;":"\\not\\sim","&#x2226;":"\\not\\parallel","&#x2225;":"\\parallel","&#x2224;":"\\not|","&#x221D;":"\\propto","==":"==","=":"=",":=":":=","/=":"=","-=":"-=","+=":"+=","*=":"*=","!=":"!=","&#x2260;":"\\neq","&#x2262;":"\\equiv /","&#x2249;":"\\approx /","&#x223C;":"sim","&#x2248;":"\\approx","&#x226E;":"</","&lt;":"<","&#x226F;":">/",">=":">=",">":">","&#x2265;":"\\geq","&#x2264;":"\\leq","&lt;=":"<=","&#x228B;":"\\supsetneq","&#x228A;":"\\subsetneq","&#x2289;":"\\nsupseteq","&#x2288;":"\\nsubseteq","&#x2287;":"\\supseteq","&#x2286;":"\\subseteq","&#x2285;":"\\not\\supset","&#x2284;":"\\not\\subset","&#x2283;&#x20D2;":"\\supset |","&#x2283;":"\\supset","&#x2282;&#x20D2;":"\\subset |","&#x2282;":"\\subset","&#x220C;":"\\not\\in","&#x2209;":"\\notin","&#x2208;":"\\in","&#x2201;":"C","&#x2204;":"\\nexists","&#x2203;":"\\exists","&#x2200;":"\\forall","&#x2227;":"\\land","&amp;&amp;":"\\&\\&","&#x2228;":"\\lor","&#x22AF;":"\\cancel{\\vDash}","&#x22AE;":"\\cancel{\\Vdash}","&#x22AD;":"\\nvDash","&#x22AC;":"\\nvDash","&#x22A9;":"\\Vdash","&#x22A8;":"\\vDash","&#x22A4;":"\\top","&#x22A3;":"\\dashv","&#x22A2;":"\\vdash","&#x220B;":"\\ni","&#x22F1;":"\\ddots","&#x22EF;":"\\hdots","&#x22EE;":"\\vdots","&#x2026;":"\\hdots","&#x3F6;":"\\ni",":":":","...":"\\cdots","..":"..","->":"->","&#x2235;":"\\because","&#x2234;":"\\therefore ","&#x2063;":"",",":",",";":";","&#x29FD;":"\\}","&#x29FC;":"\\{","&#x2998;":"\\]","&#x2997;":"\\[","&#x2996;":"\\ll","&#x2995;":"\\gg","&#x2994;":"\\gg","&#x2993;":"\\ll","&#x2992;":"\\gg","&#x2991;":"\\ll","&#x2990;":"\\]","&#x298F;":"\\]","&#x298E;":"\\]","&#x298D;":"\\[","&#x298C;":"\\[","&#x298B;":"\\]","&#x298A;":"\\triangleright","&#x2989;":"\\triangleleft","&#x2988;":"|\\)","&#x2987;":"\\(|","&#x2986;":"|\\)","&#x2985;":"\\(\\(","&#x2984;":"|\\}","&#x2983;":"\\{|","&#x2980;":"\\||","&#x27EF;":"\\left. \\right]","&#x27EE;":"\\left[ \\right.","&#x27ED;":"\\left. \\right]]","&#x27EC;":"\\left[[ \\right.","&#x27EB;":"\\gg","&#x27EA;":"\\ll","&#x27E9;":"\\rangle","&#x27E8;":"\\langle","&#x27E7;":"\\left. \\right]]","&#x27E6;":"\\left[[ \\right.","&#x2773;":"\\left.\\right)","&#x2772;":"\\left(\\right.","&#x232A;":"\\rangle","&#x2329;":"\\langle","&#x230B;":"\\rfloor","&#x230A;":"\\lfloor","&#x2309;":"\\rceil","&#x2308;":"\\lceil","&#x2016;":"\\parallel","}":"\\left.\\right}","{":"\\left{\\right.","]":"\\left]\\right.","[":"\\left[\\right.",")":"\\left.\\right)","(":"\\left(\\right.","&#x201D;":'"',"&#x201C;":"``","&#x2019;":"'","&#x2018;":"`","%CE%B1":"\\alpha","%CE%B2":"\\beta","%CE%B3":"\\gamma","%CE%93":"\\Gamma","%CE%B4":"\\delta","%CE%94":"\\Delta","%CF%B5":"\\epsilon","%CE%B6":"\\zeta","%CE%B7":"\\eta","%CE%B8":"\\theta","%CE%98":"\\Theta","%CE%B9":"\\iota","%CE%BA":"\\kappa","%CE%BB":"\\lambda","%CE%BC":"\\mu","%CE%BD":"\\nu","%CE%BF":"\\omicron","%CF%80":"\\pi","%CE%A0":"\\Pi","%CF%81":"\\pho","%CF%83":"\\sigma","%CE%A3":"\\Sigma","%CF%84":"\\tau","%CF%85":"\\upsilon","%CE%A5":"\\Upsilon","%CF%95":"\\phi","%CE%A6":"\\Phi","%CF%87":"\\chi","%CF%88":"\\psi","%CE%A8":"\\Psi","%CF%89":"\\omega","%CE%A9":"\\Omega"}},9039:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.allMathOperatorsByGlyph=void 0,p.allMathOperatorsByGlyph={_:"\\underline","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\underbrace","":"\\overbrace","":"\\square","":"\\square","":"","":"''''","":"\\overline","":"```","":"``","":"`","":"'''","":"''","":"``","":",,","":"`","":",","^":"\\hat","":"\\sim","":"\\sim","":"\\sim","":"\\circ","":"\\cdot","":" ","":"\\_","":"","":"","":"","":"","":"\\hat",:"o","":"1","":",","":"","":"3","":"2","":"\\circ","":"\\bar",:"a","":"\\nrightarrow","":"\\cdot\\cdot","~":"\\sim","`":"`","--":"--","++":"++","&":"\\&","":"\\sqrt[4]{}","":"\\sqrt[3]{}","":"\\sqrt{}","":"d","":"\\mathbb{D}","?":"?","@":"@","//":"//","!!":"!!","!":"!","":"\\#","":"","":"","":"'","<>":"<>","**":"\\star\\star","":"\\nabla","":"\\partial","":"\\bigodot","":"\\neg","":"\\measuredangle","":"\\measuredangle","":"\\angle","":"\\div","/":"/","":"\\backslash","\\":"\\backslash","%":"\\%","":"\\bigotimes","":"\\cdot","":"\\coprod","":"\\times","":"\\cdot","":"\\boxdot","":"\\boxtimes","":"","":"-","":"\\cdot",".":".","*":"\\star","":"\\cup","":"\\cap","":"\\coprod","":"\\prod","":"","":"","":"\\mid\\mid\\mid","":"\\times","":"","":"","":"\\sqcup","":"\\sqcap","":"\\otimes","":"\\odot","":"\\cap","":"\\vee","":"\\wedge","":"\\uplus","":"\\cup","":"\\cup","":"\\underline{\\int}","":"\\overline{\\int}","":"\\int","":"\\int","":"\\int","":"\\int","":"\\oint","":"\\oint","":"\\int","":"\\int","":"\\int","":"\\int","":"\\int","":"\\bcancel{\\int}","":"","":"\\hcancel{\\int}","":"\\iiiint","":"\\oint","":"\\oint","":"\\int","":"\\oiint","":"\\oiint","":"\\oint","":"\\int","":"\\oplus","":"\\oslash","":"\\ominus","":"\\oplus","":"\\iiint","":"\\iint","":"","":"","":"\\sum","":"\\boxminus","":"\\boxplus","":"\\dot{+}","":"+-","":"-","":"\\pm","-":"-","+":"+","":"\\Rrightarrow","":"\\Lleftarrow","":":\\rightarrow","":"","":"\\bullet-\\bullet","":"\\angle","":"\\measuredangle","":"\\measuredangle","":"\\perp","":"\\measuredangle","":"","":"\\vdots","":"","":"","":"\\prec","":"\\succ","":"\\underset{\\rightarrow}{\\supset}","":"","":"\\underset{\\rightarrow}{\\subset}","":"\\underset{\\rightarrow}{>}","":"","":"\\underset{\\leftarrow}{<}","":"\\underset{\\approx}{\\rightarrow}","":"\\underset{\\sim}{\\rightarrow}","":"\\underset{\\sim}{\\leftarrow}","":"\\overset{\\sim}{\\rightarrow}","":"\\overset{=}{\\rightarrow}","":"","":"","":"","":"\\overline{\\rightharpoondown}","":"\\underline{\\rightharpoonup}","":"\\overline{\\leftharpoondown}","":"\\underline{\\leftharpoonup}","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\rightleftharpoons","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\updownarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\leftrightarrow","":"","":"\\leftrightarrow","":"\\nrightarrow","":"","":"","":"\\rightleftarrows","":"\\leftrightarrows","":"\\rightleftarrows","":"\\circlearrowright","":"\\circlearrowleft","":"\\rightarrow","":"\\leftarrow","":"\\leftarrow","":"\\rightarrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\downarrow","":"\\Rsh","":"\\Lsh","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\leftarrow","":" ","":" ","":" ","":" ","":" ","":"\\times","":"\\times","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":"\\mapsto\\cdot","":"\\cdot\\leftarrow","":"\\rightarrow\\cdot","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\downarrow","":"\\uparrow","":"\\rightarrow","":"\\rightarrow","":"\\rightarrow","":"\\leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\Downarrow","":"\\Uparrow","":"\\uparrow","":"\\downarrow","":"\\Rightarrow","":"\\Leftarrow","":"\\mapsto","":"\\nLeftrightarrow","":"\\nRightarrow","":"\\nLeftarrow","":"\\rightsquigarrow","":"\\rightsquigarrow","":"\\rightsquigarrow","":"\\Rightarrow","":"\\Leftarrow","":"\\mapsto","":"\\leftarrow","":"\\Longleftrightarrow","":"\\Longrightarrow","":"\\Longleftarrow","":"\\leftrightarrow","":"\\rightarrow","":"\\leftarrow","":"\\Downarrow","":"\\Uparrow","":"\\rightarrow","":"\\leftrightarrow","":"\\rightarrow","":"\\leftarrow","":"\\nleftrightarrow","":"\\nrightarrow","":"\\nleftarrow","":"\\nleftrightarrow","":"\\nrightarrow","":"\\nleftarrow","":"\\Rrightarrow","":"","":"\\rightarrow","":"\\Updownarrow","":"\\searrow","":"\\nwarrow","":"\\Leftarrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Uparrow","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\rightarrow","":"\\leftarrow","":"\\downarrow","":"\\rightarrow","":"\\uparrow","":"\\leftarrow","":"\\downarrow","":"\\uparrow","":"\\rightsquigarrow","":"\\leftarrow","":"\\Rrightarrow","":"\\Lleftarrow","":"\\swarrow","":"\\searrow","":"\\nearrow","":"\\nwarrow","":"\\Updownarrow","":"\\Leftrightarrow","":"\\Downarrow","":"\\Rightarrow","":"\\Uparrow","":"\\Leftarrow","":"\\nRightarrow","":"\\nLeftrightarrow","":"\\nLeftarrow","":"\\rightleftharpoons","":"\\leftrightharpoons","":"\\downdownarrows","":"\\rightrightarrows","":"\\upuparrows","":"\\leftleftarrows","":"\\leftrightarrows","":"","":"\\rightleftarrows","":"\\downharpoonleft","":"\\downharpoonright","":"\\rightharpoondown","":"\\rightharpoonup","":"\\upharpoonleft","":"\\upharpoonright","":"\\leftharpoondown","":"\\leftharpoonup","":"\\circlearrowright","":"\\circlearrowleft","":"\\leftrightarrows","":"\\overline{\\nwarrow}","":"\\curvearrowright","":"\\curvearrowleft","":"\\swarrow","":"\\searrow","":"\\Rsh","":"\\Lsh","":"\\Rsh","":"\\Lsh","":"\\swarrow","":"","":"\\leftrightsquigarrow","":"\\looparrowright","":"\\looparrowleft","":"\\hookrightarrow","":"\\hookleftarrow","":"\\underline{\\updownarrow}","":"\\downarrow","":"\\rightarrowtail","":"\\uparrow","":"\\leftarrowtail","":"\\rightarrowtail","":"\\leftarrowtail","":"\\downarrow","":"\\twoheadrightarrow","":"\\uparrow","":"\\twoheadleftarrow","":"\\nearrow","":"\\nwarrow","":"","":"\\swarrow","":"\\searrow","":"\\nearrow","":"\\nwarrow","":"\\updownarrow","":"\\leftrightarrow","":"\\downarrow","":"\\rightarrow","":"\\uparrow","":"\\leftarrow","|||":"\\left|||\\right.","||":"\\left||\\right.","|":"\\mid","":"","":"//","":"///","":"","":"","":"","":"","":"\\vdots","":"","":"","":"","":"\\nparallel","":"","":"","":"","":"\\bcancel{\\mid}","":"","":"","":"","":"","":"","":"\\underline{\\perp}","":"\\overline{\\top}","":"","":"","":"","":"","":"","":"","":"\\perp","":"\\top","":"\\dashv","":"","":"","":"\\pitchfork","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"\\underset{\\neq}{\\supset}","":"\\underset{\\neq}{\\subset}","":"\\underset{\\approx}{\\supset}","":"\\underset{\\approx}{\\subset}","":"\\underset{\\sim}{\\supset}","":"\\underset{\\sim}{\\subset}","":"\\supseteqq","":"\\subseteqq","":"\\dot{\\supseteq}","":"\\dot{\\subseteq}","":"\\underset{\\times}{\\supset}","":"\\underset{\\times}{\\subset}","":"\\underset{+}{\\supset}","":"\\underset{+}{\\subset}","":"","":"","":"\\gg ","":"\\ll","":"\\underset{\\cancel{\\approx}}{\\succ}","":"\\underset{\\cancel{\\approx}}{\\prec}","":"\\underset{\\approx}{\\succ}","":"\\underset{\\approx}{\\prec}","":"\\underset{\\cancel{=}}{\\succ}","":"\\underset{\\cancel{=}}{\\prec}","":"\\underset{=}{\\succ}","":"\\underset{=}{\\prec}","":"","":"","":"","":"\\underline{\\hcancel{>}}","":"\\underline{\\hcancel{>}}","":"\\hcancel{>}","":"\\hcancel{<}","":"","":"","":"\\vartriangleright","":"\\vartriangleleft","":"><","":"><","":"\\underline{\\ll}","":"\\cancel{\\gg}","":"\\gg","":"\\cancel{\\ll}","":"\\ll","":"\\overset{\\sim}{\\geqq}","":"\\overset{\\sim}{\\leqq}","":"\\overset{\\sim}{>}","":"\\overset{\\sim}{<}","":"","":"","":"\\overset{=}{>}","":"\\overset{=}{<}","":"","":"","":"","":"","":"","":"","":"\\underset{=}{\\gtrless}","":"\\underset{=}{\\lessgtr}","":"\\underset{<}{\\gtrsim}","":"\\underset{>}{\\lesssim}","":"\\underset{\\simeq}{>}","":"\\underset{\\simeq}{<}","":"\\gtreqqless","":"\\lesseqqgtr","":"\\underset{\\cancel{\\approx}}{>}","":"\\underset{\\approx}{<}","":"\\underset{\\approx}{>}","":"\\underset{\\approx}{<}","":"","":"","":"","":"","":"","":"","":"\\bcancel{\\geq}","":"\\geq","":"\\bcancel{\\leq}","":"\\leq","":"","":"","":"","":"","":"\\overset{\\dots}{\\equiv}","":"","":"===","":"==","":"::=","":"","":"\\underset{=}{+}","":"\\overset{=}{+}","":"\\overset{\\approx}{=}","":"\\overset{\\wedge}{=}","":"\\overset{*}{=}","":"\\dot{\\approx}","":"","":"","":"\\dot{\\sim}","":"","":"","":"\\dot{\\equiv}","":"\\underset{\\cdot}{=}","":"","":"","":"\\underset{=}{\\vee}","":"\\overset{=}{\\vee}","":"ul(vv)","":"\\underset{=}{\\wedge}","":"\\underline{\\wedge}","":"\\overset{=}{\\wedge}","":"\\hcancel{\\vee}","":"\\hcancel{\\wedge}","":"","":"","":"","":"\\vee","":"\\wedge","":"","":"","":"","":"","":"\\dot{\\vee}","":"\\dot{\\wedge}","":"","":"","":"","":"\\overline{\\cap}","":"\\overline{\\cup}","":"","":"","":"","":"","":"","":"","":"","":"","":"\\overline{\\cap}","":"\\overline{\\cup}","":"","":"","":"","":"\\llcorner","":"\\lrcorner","":"","":"","":"","":"","":"","":"\\hat{\\otimes}","":"","":"","":"","":"\\underline{\\times}","":"\\underline{\\times}","":"\\dot{\\times}","":"\\bigodot","":"\\bigodot","":"","":"","":"","":"","":"","":"","":"\\Box","":"\\underset{\\sim}{+}","":"\\underset{\\circ}{+}","":"\\overset{\\sim}{+}","":"\\hat{+}","":"\\dot{+}","":"\\upharpoonright","":">>","":"","":"\\triangleleft","":"\\bowtie","":"","":"+","":"\\hcancel{|||}","":"\\hcancel{||}","":"\\backslash","":"/","":"hcancel{\backslash}","":"","":"\\backslash","":"\\Phi","":"","":"","":"","":"","":"","":"\\lozenge","":"","":"","":"","":"\\ddagger","":"\\sqcup\\sqcup","":"","":"\\square","":"","":"","":"","":"\\{\\{","":"\\{","":"\\}","":"","":"","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"\\bowtie","":"| \\not\\triangleright","":"| \\triangleright","":"\\not\\triangleleft |","":"\\triangleleft |","":"","":"\\triangle","":"","":"\\underline{\\triangle}","":"\\dot{\\triangle}","":"","":"\\boxed{\\circ}","":"\\boxed{\\circ}","":"\\boxed{\\rightarrow}","":"\\bcancel{\\square}","":"\\cancel{\\square}","":"\\odot","":"\\odot","":"\\odot","":"\\odot","":"\\varnothing","":"\\oplus","":"\\otimes","":"","":"\\varnothing","":"\\varnothing","":"\\ominus","":"\\ominus","":"\\ominus","":"\\vec{\\varnothing}","":"\\vec{\\varnothing}","":"\\dot{\\varnothing}","":"\\overline{\\varnothing}","":"\\varnothing","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"","":"","":"","":"","":"\\ulcorner","":"\\measuredangle","":"\\not\\lor","":"\\bcancel{>}","":":","":"\\cdot","":"\\mid","":"\\bigtriangleup","":"\\Epsilon","":"\\overline{\\ni}","":"\\overline{\\ni}","":"\\in","":"\\in","":"\\in","":"\\underline{\\in}","":"\\underline{\\in}","":"\\overline{\\in}","":"\\overline{\\in}","":"\\dot{\\in}","":"\\in","":"\\in","":"\\in","":"\\ddots","":":","":"\\underset{\\sim}{\\succ}","":"\\underset{\\sim}{\\prec}","":"\\underset{\\not\\sim}{>}","":"\\underset{\\not\\sim}{<}","":"\\not\\sqsupseteq","":"\\not\\sqsubseteq","":"\\not\\sqsupseteq","":"\\not\\sqsubseteq","":"\\nsucc","":"\\nprec","":"\\succ","":"\\prec","":"\\overline{>}","":"\\overline{<}","":"\\underset{>}{\\leq}","":"\\underset{<}{\\geq}","":"\\#","":"\\cup","":"\\cap","":"\\supset","":"\\subset","":"\\wedge","":"\\vee","":"\\simeq","":"\\Join","":"\\ast","":"\\star","":"\\diamond","":"\\triangle","":"\\measuredangle","":"\\overline{\\lor}","":"\\overline{\\land}","":"\\underline{\\lor}","":"\\top",:"\\pm",:"+","":"","":"\\circ\\multimap","":"\\circ\\multimap","":"\\triangleright","":"\\triangleleft","":"\\succ","":"\\prec","":"|\\models","":"|\\models","":"\\models","":"\\vdash","":"\\ominus","":"\\ominus","":"\\odot","":"\\odot","":"\\sqcup","":"\\sqcap","":"\\sqsupseteq","":"\\sqsubseteq","":"\\not\\sqsupset","":"\\sqsupset","":"\\not\\sqsubset","":"\\sqsubset","":"\\cup","":"\\cup","":"\\cup","":"\\not\\succsim","":"\\succsim","":"\\precsim","":"\\not\\overset{>}{<}","":"\\not\\overset{>}{<}","":"\\overset{>}{<}","":"\\overset{<}{>}","":"\\not\\geg","":"\\not\\leq","":"\\geg","":"\\leq","":"","":"\\geg","":"\\not\\leq","":"\\leq","":"\\overset{=}{=} ","":"\\overset{m}{=} ","":"\\overset{def}{=}","":"=","":"=","":"=:","":"\\doteq","":"\\doteq","":"\\doteq","":"\\doteq","":"","":"","":"","":"","":"\\approx","":"\\approx","":"\\approx","":"\\neq","":"=","":"\\sim","":"\\infty","":"\\sim","":"\\sim","":"\\sim","":":-:","":"-:","":"\\bot","":"::","":":","":"\\mid","":"\\llcorner","":"\\circ","":"*","":"/","":"\\square","":"\\ni","":"\\in","":"\\Delta","":"/","":"\\nsucceq","":"\\succeq","":"\\npreceq","":"\\preceq","":"\\ngeqslant","":"\\nleqslant","":"\\Phi","":"\\models","":"\\not\\equiv","":"\\approx\\neq","":"\\neq","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circle","":"\\circledcirc","":"\\circledcirc","":"\\circledcirc","":"\\circledcirc","":"\\diamond","":"\\diamond","":"\\diamond","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangleleft","":"\\triangledown","":"\\triangledown","":"\\triangledown","":"\\triangledown","":"\\triangleright","":"\\triangleright","":"\\triangleright","":"\\triangleright","":"\\triangle","":"\\triangle","":"\\triangle","":"\\square","":"\\blacksquare","":"\\square","":"\\blacksquare","":"\\square","":"\\square","":"\\square","":"\\square","":"\\blacksquare","":"\\not\\triangleright","":"\\not\\triangleleft","":"\\not\\triangleright","":"\\not\\triangleleft","":"\\ggg","":"\\lll","":"*>","":"<*","":"\\pitchfork","":"","":"\\bowtie","":"\\ltimes","":"\\rtimes","":"\\triangleright","\\triangleleft":"","":"\\bot","":"\\nsucc","":"\\preceq","":"\\succeq","":"\\preceq","":"\\succ","":"\\prec","":"\\geq/","":"\\leq/","":"\\neq","":"\\not\\gg","":"\\gg","":"\\not\\ll","":"\\ll","":"\\ngeqslant","":"\\nleqslant","":"\\equiv","":"\\doteq","":"\\triangleq","":"\\doteq","":"\\triangleq","":"\\triangleq","":"\\doteq","":":=","":"\\asymp","":"\\ncong","":"\\ncong","":"\\cong","":"\\not\\simeq","":"\\simeq","":"\\not\\sim","":"\\not\\parallel","":"\\parallel","":"\\not|","":"\\propto","==":"==","=":"=",":=":":=","/=":"=","-=":"-=","+=":"+=","*=":"*=","!=":"!=","":"\\neq","":"\\equiv /","":"\\approx /","":"sim","":"\\approx","":"</","<":"<","":">/",">=":">=",">":">","":"\\geq","":"\\leq","<=":"<=","":"\\supsetneq","":"\\subsetneq","":"\\nsupseteq","":"\\nsubseteq","":"\\supseteq","":"\\subseteq","":"\\not\\supset","":"\\not\\subset","":"\\supset |","":"\\supset","":"\\subset |","":"\\subset","":"\\not\\in","":"\\notin","":"\\in","":"C","":"\\nexists","":"\\exists","":"\\forall","":"\\land","&&":"\\&\\&","":"\\lor","":"\\cancel{\\vDash}","":"\\cancel{\\Vdash}","":"\\nvDash","":"\\nvDash","":"\\Vdash","":"\\vDash","":"\\top","":"\\dashv","":"\\vdash","":"\\ni","":"\\ddots","":"\\hdots","":"\\vdots","":"\\ni",":":":","...":"\\cdots","..":"..","->":"->","":"\\because","":"\\therefore ","":"\\llbracket",",":",",";":";","":"\\}","":"\\{","":"\\]","":"\\[","":"\\ll","":"\\gg","":"\\gg","":"\\ll","":"\\gg","":"\\ll","":"\\]","":"\\]","":"\\]","":"\\[","":"\\[","":"\\]","":"\\triangleright","":"\\triangleleft","":"|\\)","":"\\(|","":"|\\)","":"\\(\\(","":"|\\}","":"\\{|","":"\\||","":"\\left. \\right]","":"\\left[ \\right.","":"\\left. \\right]]","":"\\left[[ \\right.","":"\\gg","":"\\ll","":"\\)|","":"\\(|","":"\\left.\\right)","":"\\left(\\right.","":"\\rangle","":"\\langle","":"\\rfloor","":"\\lfloor","":"\\rceil","":"\\lceil","":"\\parallel","}":"\\left.\\right}","{":"\\left{\\right.","]":"\\left]\\right.","[":"\\left[\\right.",")":"\\left.\\right)","(":"\\left(\\right.","":'\\"',"":"\\text{``}","":"'","":"`",:"\\alpha",:"\\beta",:"\\gamma",:"\\Gamma",:"\\delta",:"\\Delta","":"\\epsilon",:"\\zeta",:"\\eta",:"\\theta",:"\\Theta",:"\\iota",:"\\kappa",:"\\lambda",:"\\nu",:"\\omicron",:"\\pi",:"\\Pi",:"\\rho",:"\\sigma",:"\\Sigma",:"\\tau",:"\\upsilon",:"\\Upsilon",:"\\phi",:"\\Phi",:"\\chi",:"\\psi",:"\\Psi",:"\\omega",:"\\Omega",:"\\Omega","":"\\emptyset","":"\\circlearrowleft","":"\\circlearrowright","":"\\times","":"\\dfrac{1}{2}",:"\\mu",:"\\theta","":"\\checkmark","":"\\rangle","":"\\langle","":"\\dfrac{1}{4}","":"\\ldots",:"\\hbar",:"\\mathfrak{R}",:"\\theta",:"\\emptyset",:"\\varrho",:"\\phi",:"\\varepsilon",T:"T","":"\\cdot",:"P","":"\\infty",:"\\nabla",:"\\eta","":"^{+}","":"^{-}","":"^{=}","":"^{(}","":"^{)}","":"\\)|","":"\\langle","":";","":"\\circ","":"\\perp","":"\\times","":"-","":"\\gg","":"\\uparrow","":"\\downarrow","":"\\leftarrow","":"\\rightarrow","":"-","":"\\mid","":"\\mid",:"\\hbar","":"\\rightarrow","":"\\cdot","":"\\mid","":"\\pounds","":"\\yen","":"\\times","":"\\checkmark",:"^{n}","":"\\ll",:"\\prime","":"\\dagger","":"\\mid",$:"\\$","#":"\\#","":"\\text{\\textdegree C}","":"\\text{\\textdegree F}","":"\\blacksquare","":"\\mho","":"\\text{e}",:"r","":"\\ddagger",:"i",:"\\Upsilon","":"\\delta","":"\\cdot",:"\\theta","":"\\phi",:"\\prod",:"o",:"\\hbar","":"\\Lambda","":"\\mid","":"\\euro",:"\\bar{u}",:"\\varphi","":"c","":"\\epsilon",:"\\mathsf{X}","":"_{n}"}},8249:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.allMathSymbolsByChar=void 0,p.allMathSymbolsByChar={"&#xA0;":"\\textrm{ }","&#x2203;":"\\exists","&#x2200;":"\\forall","&#x21D4;":"\\iff","&#x21D2;":"=>","&#xAC;":"\\neg","&#x2124;":"\\mathbb{Z}","&#x211D;":"\\mathbb{R}","&#x211A;":"\\mathbb{Q}","&#x2115;":"\\mathbb{N}","&#x2102;":"CC","&#x25A1;":"\\square","&#x22C4;":"\\diamond","&#x25B3;":"\\triangle","&#x2322;":"\\frown","&#x2220;":"\\angle","&#x22F1;":"\\ddots","&#x22EE;":"\\vdots","&#x2235;":"\\because","&#x2234;":"\\therefore","&#x2135;":"\\aleph","&#x2205;":"\\oslash","&#xB1;":"\\pm","&#x2207;":"\\nabla","&#x2202;":"\\partial","&#x222E;":"\\oint","&#x222B;":"\\int","&#x22C3;":"\\cup","&#x222A;":"\\cup","&#x22C2;":"\\cap","&#x2229;":"\\cap","&#x22C1;":"\\vee","&#x2228;":"\\vee","&#x22C0;":"\\wedge","&#x2227;":"\\wedge","&#x220F;":"\\prod","&#x2211;":"\\sum","&#x2299;":"\\bigodot","&#x2297;":"\\bigoplus","&#x2295;":"o+","&#x2218;":"@","&#x22C8;":"\\bowtie","&#x22CA;":"\\rtimes","&#x22C9;":"\\ltimes","&#xF7;":"\\div","&#xD7;":"\\times","\\":"\\backslash","&#x22C6;":"\\star","&#x2217;":"\\star","&#x22C5;":"\\cdot","&#x3A9;":"\\Omega","&#x3C9;":"\\omega","&#x3A8;":"\\Psi","&#x3C8;":"\\psi","&#x3C7;":"\\chi","&#x3C6;":"\\varphi","&#x3A6;":"\\Phi","&#x3D5;":"\\phi","&#x3C5;":"\\upsilon","&#x3C4;":"\\tau","&#x3A3;":"\\Sigma","&#x3C3;":"\\sigma","&#x3C1;":"\\rho","&#x3A0;":"\\Pi","&#x3C0;":"\\pi","&#x39E;":"\\Xi","&#x3BE;":"\\xi","&#x3BD;":"\\nu","&#x3BC;":"\\mu","&#x39B;":"\\Lambda","&#x3BB;":"\\lambda","&#x3BA;":"\\kappa","&#x3B9;":"\\iota","&#x3D1;":"\\vartheta","&#x398;":"\\Theta","&#x3B8;":"\\theta","&#x3B7;":"\\eta","&#x3B6;":"\\zeta","&#x25B;":"\\varepsilon","&#x3B5;":"\\epsilon","&#x394;":"\\Delta","&#x3B4;":"\\delta","&#x393;":"\\Gamma","&#x3B3;":"\\gamma","&#x3B2;":"\\beta","&#x3B1;":"\\alpha","&#x221E;":"\\infty","":"\\text{\\textdir TRT}","":"\\text{\\textdir LTR}"}},8171:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.allMathSymbolsByGlyph=void 0,p.allMathSymbolsByGlyph={" ":"\\textrm{ }","":"\\exists","":"\\forall","":"\\iff","":"\\Rightarrow","":"\\neg","":"\\square","":"\\diamond","":"\\triangle","":"\\frown","":"\\angle","":"\\ddots","":"\\vdots","":"\\because","":"\\therefore",:"\\aleph","":"\\emptyset","":"\\pm","":"\\nabla","":"\\partial","":"\\oint","":"\\int","":"\\cup","":"\\cup","":"\\cap","":"\\cap","":"\\vee","":"\\vee","":"\\wedge","":"\\wedge","":"\\prod","":"\\sum","":"\\bigodot","":"\\bigoplus","":"o+","":"@","":"\\bowtie","":"\\rtimes","":"\\ltimes","":"\\div","":"\\times","\\":"\\backslash","":"\\star","":"\\star","":"\\cdot",:"\\Omega",:"\\omega",:"\\Psi",:"\\psi",:"\\chi",:"\\varphi",:"\\Phi",:"\\phi",:"\\upsilon",:"\\tau",:"\\Sigma",:"\\sigma",:"\\rho",:"\\Pi",:"\\pi",:"\\Xi",:"\\xi",:"\\nu",:"\\mu",:"\\Lambda",:"\\lambda",:"\\kappa",:"\\iota",:"\\vartheta",:"\\Theta",:"\\theta",:"\\eta",:"\\zeta",:"\\varepsilon",:"\\epsilon",:"\\Delta",:"\\delta",:"\\Gamma",:"\\gamma",:"\\beta",:"\\alpha","":"\\infty","":"\\epsilon",:"\\mu","":"^{2}",:"\\imath","":"\\blacksquare",:"\\mathbf{m}",:"\\Omega","":"\\circlearrowleft","":"\\circlearrowright",:" ","":"\\yen","":"^{(}","":"^{)}",:"\\ss",:"\\hbar","":"\\ominus","":"\\bigtriangleup","'":"\\nrightarrow","":"\\dagger",:"\\prime",:" ","":" ",:"\\wp",:" ",:"^{n}","":"\\checkmark","":"\\times","":"\\dfrac{1}{2}",:"\\theta","":"\\checkmark","":"\\rangle","":"\\langle","":"\\langle","":"\\dfrac{1}{4}","":"\\ldots",:"\\hbar",:"\\mathfrak{R}",:"\\theta",:"\\emptyset",:"\\varrho",:"\\phi",T:"T","":"\\cdot",:"P",:"\\nabla",:"\\eta",:"\\gamma",:"\\hbar",:"\\varepsilon","":"\\_{D}","":"\\lambda","":"\\rangle","":"\\langle","":";","":"x","":"y","":"z","":"i","":"j","":"k","":"m","":"e","":"r",:"\\eta","":"\\beta","":"\\omega","":"\\wp","":"\\pi",:"\\epsilon",:"\\epsilon","":"\\epsilon",:"\\pi",:"\\nu",:"\\theta","":"\\psi","":"\\theta",:"\\phi","":"\\Gamma",:"\\ell",:"\\upsilon","":"\\varphi","":"\\theta",:"\\Phi","":"\\varphi","":"i",:"o",:"o",:"f","":"\\rho","":"x","":"p","":"q","":"s","":"t","":"u","":"v","":"w","":"a","":"b","":"c","":"d","":"f","":"g","":"l","":"n","":"o","":"w","":"v",:"m","":"\\circ","":"\\perp","":"\\times","":"\\mid",:"\\Phi","":"\\mid",:"\\hbar",:" ","":"\\llbracket",:"\\hat{e}","":"\\cent","":"\\downarrow","":"\\downarrow","":"\\Rsh","":"\\Lsh","":"\\downarrow","":"\\uparrow","":"\\rightarrow","|":"\\mid","":"\\mid","":"\\heartsuit",:"0",:"Y",:"x","":"z","":"y","":"x",:"p",:"a","":"\\pounds",m:"m","":"\\Xi","":"\\textcircled{0}","":"\\textcircled{1}","":"\\textcircled{2}","":"\\textcircled{3}","":"\\textcircled{4}","":"\\textcircled{5}","":"\\textcircled{6}","":"\\textcircled{7}","":"\\textcircled{8}","":"\\textcircled{9}","":"\\textcircled{10}","":"\\textcircled{11}","":"\\textcircled{12}","":"\\textcircled{13}","":"\\textcircled{14}","":"\\textcircled{15}","":"\\textcircled{16}","":"\\textcircled{17}","":"\\textcircled{18}","":"\\textcircled{19}","":"\\textcircled{20}","":"\\textcircled{21}","":"\\textcircled{22}","":"\\textcircled{23}","":"\\textcircled{24}","":"\\textcircled{25}","":"\\textcircled{26}","":"\\textcircled{27}","":"\\textcircled{28}","":"\\textcircled{29}","":"\\textcircled{30}","":"\\textcircled{31}","":"\\textcircled{32}","":"\\textcircled{33}","":"\\textcircled{34}","":"\\textcircled{35}","":"\\textcircled{36}","":"\\textcircled{37}","":"\\textcircled{38}","":"\\textcircled{39}","":"\\textcircled{40}","":"\\textcircled{41}","":"\\textcircled{42}","":"\\textcircled{43}","":"\\textcircled{44}","":"\\textcircled{45}","":"\\textcircled{46}","":"\\textcircled{47}","":"\\textcircled{48}","":"\\textcircled{49}","":"\\textcircled{50}","&":"\\&","":"\\parallel","%":"\\%","":"\\text{``}",$:"\\$","#":"\\#","":"\\text{\\textdegree C}","":"\\text{\\textdegree F}","":"\\blacksquare","":"\\mho","":"\\rfloor","":"\\lfloor","":"\\rceil","":"\\lceil",:"\\varepsilon","":"\\text{e}",:"r","":"\\nrightarrow","":"\\hat{}","":"\\overline","":"\\rightarrow","":"\\ddagger","":"\\cdot","":"\\square","":"\\Delta",:"i","":"\\angle",:"\\Upsilon","":"\\downarrow","":"\\uparrow","":"\\gg","":"\\top","":"/","":"\\delta","":"\\cdot","":":","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\cdot",:"\\theta","":"\\measuredangle","":",","":"\\overline","":"\\llbracket","":"\\phi",:"\\prod",:"o","":"\\approx","":"\\leq",:"\\hbar","":"\\Lambda",:"\\pm","":"-",:"+","":"\\neq","":"\\leftarrow","":"\\mid","":"\\euro","":" ",:"\\bar{u}","":"\\parallel","":"\\leftrightarrow","":"\\sqrt{}","":"c","":"\\epsilon","":"\\cdot","":"\\measuredangle","":"\\measuredangle","":"\\measuredangle","":"\\ll",:"\\mathsf{X}","":"\\mid","":"\\rangle","":"_{n}","":"\\square","":"\\circle","":'\\"'}},5406:function(c,p,d){var x=this&&this.__createBinding||(Object.create?function(S,T,A,R){R===void 0&&(R=A);var D=Object.getOwnPropertyDescriptor(T,A);D&&!("get"in D?!T.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return T[A]}}),Object.defineProperty(S,R,D)}:function(S,T,A,R){R===void 0&&(R=A),S[R]=T[A]}),_=this&&this.__exportStar||function(S,T){for(var A in S)A==="default"||Object.prototype.hasOwnProperty.call(T,A)||x(T,S,A)};Object.defineProperty(p,"__esModule",{value:!0}),_(d(2965),p),_(d(9039),p),_(d(8249),p),_(d(8171),p),_(d(472),p),_(d(4320),p),_(d(6122),p)},472:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.latexAccents=void 0,p.latexAccents=["\\hat","\\bar","\\underbrace","\\overbrace"]},4320:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.mathNumberByGlyph=void 0,p.mathNumberByGlyph={"":"_{0}","":"_{1}","":"_{2}","":"_{3}","":"_{4}","":"_{5}","":"_{6}","":"_{7}","":"_{8}","":"_{9}","":"^{0}","":"^{1}","":"^{2}","":"^{3}","":"^{4}","":"^{5}","":"^{6}","":"^{7}","":"^{8}","":"^{9}",:"^{n}","":"_{n}","":"\\textcircled{0}","":"\\textcircled{1}","":"\\textcircled{2}","":"\\textcircled{3}","":"\\textcircled{4}","":"\\textcircled{5}","":"\\textcircled{6}","":"\\textcircled{7}","":"\\textcircled{8}","":"\\textcircled{9}","":"\\textcircled{10}","":"\\textcircled{11}","":"\\textcircled{12}","":"\\textcircled{13}","":"\\textcircled{14}","":"\\textcircled{15}","":"\\textcircled{16}","":"\\textcircled{17}","":"\\textcircled{18}","":"\\textcircled{19}","":"\\textcircled{20}","":"\\textcircled{21}","":"\\textcircled{22}","":"\\textcircled{23}","":"\\textcircled{24}","":"\\textcircled{25}","":"\\textcircled{26}","":"\\textcircled{27}","":"\\textcircled{28}","":"\\textcircled{29}","":"\\textcircled{30}","":"\\textcircled{31}","":"\\textcircled{32}","":"\\textcircled{33}","":"\\textcircled{34}","":"\\textcircled{35}","":"\\textcircled{36}","":"\\textcircled{37}","":"\\textcircled{38}","":"\\textcircled{39}","":"\\textcircled{40}","":"\\textcircled{41}","":"\\textcircled{42}","":"\\textcircled{43}","":"\\textcircled{44}","":"\\textcircled{45}","":"\\textcircled{46}","":"\\textcircled{47}","":"\\textcircled{48}","":"\\textcircled{49}","":"\\textcircled{50}","":"\\dfrac{1}{2}","":"\\dfrac{1}{3}","":"\\dfrac{2}{3}","":"\\dfrac{1}{4}","":"\\dfrac{3}{4}","":"\\dfrac{1}{5}","":"\\dfrac{2}{5}","":"\\dfrac{3}{5}","":"\\dfrac{4}{5}","":"\\dfrac{1}{6}","":"\\dfrac{5}{6}","":"\\dfrac{1}{7}","":"\\dfrac{1}{8}","":"\\dfrac{3}{8}","":"\\dfrac{5}{8}","":"\\dfrac{7}{8}","":"\\dfrac{1}{9}","":"\\dfrac{1}{10}"}},6122:(c,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.HashUTF8ToLtXConverter=void 0,p.HashUTF8ToLtXConverter=class{convert(S){if(S.match(/[a-z0-9]/i))return S;const T=d[S];return T?this.convertAccentCharToLtX(T)||S:this.convertSpecialCharToLtX(S)||S}convertAccentCharToLtX(S){const{char:T,accent:A}=S,R=x[A];return R?`\\${R}{${T}}`:null}convertSpecialCharToLtX(S){const T=_[S];if(!T)return null;const{letter:A,fontCmd:R}=T;return`\\${R}{${A}}`}};const d={:{char:"a",accent:""},:{char:"a",accent:"`"},:{char:"a",accent:"^"},:{char:"a",accent:"~"},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:""},:{char:"a",accent:"-"},:{char:"a",accent:"-"},:{char:"e",accent:""},:{char:"e",accent:"`"},:{char:"e",accent:"^"},:{char:"e",accent:""},:{char:"e",accent:""},:{char:"e",accent:""},:{char:"i",accent:"^"},:{char:"e",accent:""},:{char:"e",accent:"-"},:{char:"i",accent:""},:{char:"i",accent:"`"},:{char:"i",accent:"^"},:{char:"i",accent:""},:{char:"i",accent:""},:{char:"i",accent:""},:{char:"i",accent:"`"},:{char:"i",accent:""},:{char:"i",accent:"-"},:{char:"o",accent:""},:{char:"o",accent:"`"},:{char:"o",accent:"^"},:{char:"o",accent:"~"},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:"`"},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:""},:{char:"o",accent:"-"},:{char:"u",accent:""},:{char:"u",accent:"`"},:{char:"u",accent:"^"},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:""},:{char:"u",accent:"`"},:{char:"u",accent:""},:{char:"u",accent:"-"},:{char:"y",accent:""},:{char:"y",accent:"`"},:{char:"y",accent:"^"},:{char:"y",accent:""},:{char:"y",accent:"-"},:{char:"A",accent:""},:{char:"A",accent:"`"},:{char:"A",accent:"^"},:{char:"A",accent:"~"},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:""},:{char:"A",accent:"-"},:{char:"A",accent:"-"},:{char:"E",accent:""},:{char:"E",accent:"`"},:{char:"E",accent:""},:{char:"E",accent:"^"},:{char:"E",accent:""},:{char:"E",accent:""},:{char:"E",accent:"`"},:{char:"E",accent:""},:{char:"E",accent:"-"},:{char:"I",accent:""},:{char:"I",accent:"`"},:{char:"I",accent:"^"},:{char:"I",accent:""},:{char:"I",accent:""},:{char:"I",accent:""},:{char:"I",accent:"`"},:{char:"I",accent:""},:{char:"I",accent:"-"},:{char:"O",accent:""},:{char:"O",accent:"`"},:{char:"O",accent:"^"},:{char:"O",accent:"~"},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:"`"},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:""},:{char:"O",accent:"-"},:{char:"U",accent:""},:{char:"U",accent:"`"},:{char:"U",accent:"^"},:{char:"U",accent:""},:{char:"U",accent:""},:{char:"U",accent:""},:{char:"U",accent:""},:{char:"U",accent:"`"},:{char:"U",accent:""},:{char:"U",accent:"-"},:{char:"Y",accent:""},:{char:"Y",accent:"`"},:{char:"Y",accent:"^"},:{char:"Y",accent:""},:{char:"Y",accent:"-"},:{char:"n",accent:"~"},:{char:"N",accent:"~"},:{char:"c",accent:""},:{char:"C",accent:""},:{char:"v",accent:"~"},:{char:"V",accent:"~"},:{char:"j",accent:"^"},:{char:"J",accent:"^"},:{char:"z",accent:""},:{char:"Z",accent:""},:{char:"Z",accent:"^"},:{char:"z",accent:"^"},:{char:"Z",accent:""},:{char:"z",accent:""},:{char:"z",accent:""}},x={"":"acute","`":"grave","^":"hat","~":"tilde","":"ddot","":"mathring","":"breve","":"check","":"H","":"dot","-":"bar","":"hat","":"tilde"},_={"":{letter:"A",fontCmd:"mathbf"},"":{letter:"B",fontCmd:"mathbf"},"":{letter:"C",fontCmd:"mathbf"},"":{letter:"D",fontCmd:"mathbf"},"":{letter:"E",fontCmd:"mathbf"},:{letter:"E",fontCmd:"mathbf"},"":{letter:"F",fontCmd:"mathbf"},"":{letter:"G",fontCmd:"mathbf"},"":{letter:"H",fontCmd:"mathbf"},"":{letter:"I",fontCmd:"mathbf"},"":{letter:"J",fontCmd:"mathbf"},"":{letter:"K",fontCmd:"mathbf"},"":{letter:"L",fontCmd:"mathbf"},"":{letter:"M",fontCmd:"mathbf"},"":{letter:"N",fontCmd:"mathbf"},"":{letter:"O",fontCmd:"mathbf"},"":{letter:"P",fontCmd:"mathbf"},"":{letter:"Q",fontCmd:"mathbf"},"":{letter:"R",fontCmd:"mathbf"},"":{letter:"S",fontCmd:"mathbf"},"":{letter:"T",fontCmd:"mathbf"},"":{letter:"U",fontCmd:"mathbf"},"":{letter:"V",fontCmd:"mathbf"},"":{letter:"W",fontCmd:"mathbf"},"":{letter:"X",fontCmd:"mathbf"},"":{letter:"X",fontCmd:"mathbf"},"":{letter:"Y",fontCmd:"mathbf"},"":{letter:"Z",fontCmd:"mathbf"},"":{letter:"0",fontCmd:"mathbf"},"":{letter:"1",fontCmd:"mathbf"},"":{letter:"2",fontCmd:"mathbf"},"":{letter:"3",fontCmd:"mathbf"},"":{letter:"4",fontCmd:"mathbf"},"":{letter:"5",fontCmd:"mathbf"},"":{letter:"6",fontCmd:"mathbf"},"":{letter:"7",fontCmd:"mathbf"},"":{letter:"8",fontCmd:"mathbf"},"":{letter:"9",fontCmd:"mathbf"},"":{letter:"A",fontCmd:"mathit"},"":{letter:"B",fontCmd:"mathit"},"":{letter:"C",fontCmd:"mathit"},"":{letter:"D",fontCmd:"mathit"},"":{letter:"E",fontCmd:"mathit"},"":{letter:"F",fontCmd:"mathit"},"":{letter:"G",fontCmd:"mathit"},"":{letter:"H",fontCmd:"mathit"},"":{letter:"I",fontCmd:"mathit"},:{letter:"I",fontCmd:"mathit"},"":{letter:"J",fontCmd:"mathit"},"":{letter:"K",fontCmd:"mathit"},"":{letter:"L",fontCmd:"mathit"},"":{letter:"M",fontCmd:"mathit"},"":{letter:"N",fontCmd:"mathit"},"":{letter:"O",fontCmd:"mathit"},"":{letter:"P",fontCmd:"mathit"},"":{letter:"Q",fontCmd:"mathit"},"":{letter:"R",fontCmd:"mathit"},"":{letter:"S",fontCmd:"mathit"},"":{letter:"T",fontCmd:"mathit"},"":{letter:"U",fontCmd:"mathit"},"":{letter:"V",fontCmd:"mathit"},"":{letter:"W",fontCmd:"mathit"},"":{letter:"X",fontCmd:"mathit"},"":{letter:"Y",fontCmd:"mathit"},"":{letter:"Z",fontCmd:"mathit"},"":{letter:"A",fontCmd:"mathbb"},"":{letter:"B",fontCmd:"mathbb"},:{letter:"C",fontCmd:"mathbb"},"":{letter:"D",fontCmd:"mathbb"},"":{letter:"E",fontCmd:"mathbb"},"":{letter:"F",fontCmd:"mathbb"},"":{letter:"G",fontCmd:"mathbb"},:{letter:"H",fontCmd:"mathbb"},"":{letter:"I",fontCmd:"mathbb"},"":{letter:"J",fontCmd:"mathbb"},"":{letter:"K",fontCmd:"mathbb"},"":{letter:"L",fontCmd:"mathbb"},"":{letter:"M",fontCmd:"mathbb"},:{letter:"N",fontCmd:"mathbb"},"":{letter:"O",fontCmd:"mathbb"},:{letter:"P",fontCmd:"mathbb"},:{letter:"Q",fontCmd:"mathbb"},:{letter:"R",fontCmd:"mathbb"},"":{letter:"S",fontCmd:"mathbb"},"":{letter:"T",fontCmd:"mathbb"},"":{letter:"U",fontCmd:"mathbb"},"":{letter:"V",fontCmd:"mathbb"},"":{letter:"W",fontCmd:"mathbb"},"":{letter:"X",fontCmd:"mathbb"},"":{letter:"Y",fontCmd:"mathbb"},:{letter:"Z",fontCmd:"mathbb"},"":{letter:"0",fontCmd:"mathbb"},"":{letter:"1",fontCmd:"mathbb"},"":{letter:"2",fontCmd:"mathbb"},"":{letter:"3",fontCmd:"mathbb"},"":{letter:"4",fontCmd:"mathbb"},"":{letter:"5",fontCmd:"mathbb"},"":{letter:"6",fontCmd:"mathbb"},"":{letter:"7",fontCmd:"mathbb"},"":{letter:"8",fontCmd:"mathbb"},"":{letter:"9",fontCmd:"mathbb"},"":{letter:"A",fontCmd:"mathcal"},"":{letter:"A",fontCmd:"mathcal"},:{letter:"B",fontCmd:"mathcal"},"":{letter:"C",fontCmd:"mathcal"},"":{letter:"D",fontCmd:"mathcal"},"":{letter:"D",fontCmd:"mathcal"},:{letter:"E",fontCmd:"mathcal"},:{letter:"F",fontCmd:"mathcal"},"":{letter:"F",fontCmd:"mathcal"},"":{letter:"G",fontCmd:"mathcal"},:{letter:"H",fontCmd:"mathcal"},:{letter:"I",fontCmd:"mathcal"},"":{letter:"J",fontCmd:"mathcal"},"":{letter:"K",fontCmd:"mathcal"},:{letter:"L",fontCmd:"mathcal"},"":{letter:"L",fontCmd:"mathcal"},:{letter:"M",fontCmd:"mathcal"},"":{letter:"N",fontCmd:"mathcal"},"":{letter:"O",fontCmd:"mathcal"},"":{letter:"O",fontCmd:"mathcal"},"":{letter:"P",fontCmd:"mathcal"},"":{letter:"Q",fontCmd:"mathcal"},:{letter:"R",fontCmd:"mathcal"},"":{letter:"R",fontCmd:"mathcal"},"":{letter:"R",fontCmd:"mathcal"},"":{letter:"S",fontCmd:"mathcal"},"":{letter:"T",fontCmd:"mathcal"},"":{letter:"U",fontCmd:"mathcal"},"":{letter:"V",fontCmd:"mathcal"},"":{letter:"W",fontCmd:"mathcal"},"":{letter:"X",fontCmd:"mathcal"},"":{letter:"Y",fontCmd:"mathcal"},"":{letter:"Z",fontCmd:"mathcal"},"":{letter:"A",fontCmd:"mathfrak"},"":{letter:"B",fontCmd:"mathfrak"},:{letter:"C",fontCmd:"mathfrak"},"":{letter:"D",fontCmd:"mathfrak"},"":{letter:"E",fontCmd:"mathfrak"},"":{letter:"F",fontCmd:"mathfrak"},"":{letter:"G",fontCmd:"mathfrak"},:{letter:"H",fontCmd:"mathfrak"},:{letter:"I",fontCmd:"mathfrak"},"":{letter:"J",fontCmd:"mathfrak"},"":{letter:"K",fontCmd:"mathfrak"},"":{letter:"L",fontCmd:"mathfrak"},"":{letter:"M",fontCmd:"mathfrak"},"":{letter:"N",fontCmd:"mathfrak"},"":{letter:"O",fontCmd:"mathfrak"},"":{letter:"P",fontCmd:"mathfrak"},"":{letter:"Q",fontCmd:"mathfrak"},:{letter:"R",fontCmd:"mathfrak"},"":{letter:"S",fontCmd:"mathfrak"},"":{letter:"T",fontCmd:"mathfrak"},"":{letter:"U",fontCmd:"mathfrak"},"":{letter:"V",fontCmd:"mathfrak"},"":{letter:"W",fontCmd:"mathfrak"},"":{letter:"X",fontCmd:"mathfrak"},"":{letter:"Y",fontCmd:"mathfrak"},:{letter:"Z",fontCmd:"mathfrak"},"":{letter:"A",fontCmd:"mathsf"},:{letter:"A",fontCmd:"mathsf"},"":{letter:"B",fontCmd:"mathsf"},:{letter:"B",fontCmd:"mathsf"},"":{letter:"C",fontCmd:"mathsf"},"":{letter:"D",fontCmd:"mathsf"},"":{letter:"E",fontCmd:"mathsf"},"":{letter:"F",fontCmd:"mathsf"},"":{letter:"G",fontCmd:"mathsf"},"":{letter:"H",fontCmd:"mathsf"},"":{letter:"I",fontCmd:"mathsf"},"":{letter:"J",fontCmd:"mathsf"},"":{letter:"J",fontCmd:"mathsf"},"":{letter:"K",fontCmd:"mathsf"},:{letter:"K",fontCmd:"mathsf"},"":{letter:"L",fontCmd:"mathsf"},"":{letter:"M",fontCmd:"mathsf"},"":{letter:"N",fontCmd:"mathsf"},"":{letter:"O",fontCmd:"mathsf"},"":{letter:"P",fontCmd:"mathsf"},"":{letter:"Q",fontCmd:"mathsf"},"":{letter:"R",fontCmd:"mathsf"},"":{letter:"S",fontCmd:"mathsf"},"":{letter:"T",fontCmd:"mathsf"},"":{letter:"U",fontCmd:"mathsf"},"":{letter:"V",fontCmd:"mathsf"},"":{letter:"W",fontCmd:"mathsf"},"":{letter:"X",fontCmd:"mathsf"},:{letter:"X",fontCmd:"mathsf"},"":{letter:"Y",fontCmd:"mathsf"},"":{letter:"Z",fontCmd:"mathsf"},"":{letter:"A",fontCmd:"mathtt"},"":{letter:"B",fontCmd:"mathtt"},"":{letter:"\\Gamma",fontCmd:"mathtt"},"":{letter:"\\Delta",fontCmd:"mathtt"},"":{letter:"E",fontCmd:"mathtt"},"":{letter:"F",fontCmd:"mathtt"},"":{letter:"G",fontCmd:"mathtt"},"":{letter:"\\Theta",fontCmd:"mathtt"},"":{letter:"I",fontCmd:"mathtt"},"":{letter:"J",fontCmd:"mathtt"},"":{letter:"\\Lambda",fontCmd:"mathtt"},"":{letter:"L",fontCmd:"mathtt"},"":{letter:"M",fontCmd:"mathtt"},"":{letter:"\\Pi",fontCmd:"mathtt"},"":{letter:"O",fontCmd:"mathtt"},"":{letter:"\\Pi",fontCmd:"mathtt"},"":{letter:"Q",fontCmd:"mathtt"},"":{letter:"R",fontCmd:"mathtt"},"":{letter:"S",fontCmd:"mathtt"},"":{letter:"T",fontCmd:"mathtt"},"":{letter:"U",fontCmd:"mathtt"},"":{letter:"\\Phi",fontCmd:"mathtt"},"":{letter:"W",fontCmd:"mathtt"},"":{letter:"\\Psi",fontCmd:"mathtt"},"":{letter:"\\Omega",fontCmd:"mathtt"}}}},s={};function l(c){var p=s[c];if(p!==void 0)return p.exports;var d=s[c]={exports:{}};return a[c].call(d.exports,d,d.exports,l),d.exports}var u={};return(()=>{var c=u;Object.defineProperty(c,"__esModule",{value:!0}),c.MathMLToLaTeX=void 0;var p=l(8672);Object.defineProperty(c,"MathMLToLaTeX",{enumerable:!0,get:function(){return p.MathMLToLaTeX}})})(),u})())}(bundle_min$1)),bundle_min$1.exports}var bundle_minExports=requireBundle_min();function DangerousSetIn({mathMLString:t}){return jsxRuntimeExports.jsx("div",{style:{textAlign:"center"},dangerouslySetInnerHTML:{__html:t}})}function DisplayMathML({title:t,mathML:n,handleRequestBilin:a,textResult:s,caclDone:l}){const[u,c]=reactExports.useState(!1),[p,d]=reactExports.useState(!1);return l?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Snackbar,{open:u,autoHideDuration:1e4,onClose:()=>c(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:jsxRuntimeExports.jsx(SnackbarContent,{sx:{backgroundColor:"black"},message:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["LaTeX copied to your clipboard. Here's a free online latex editor:",jsxRuntimeExports.jsx("a",{className:"text-white",href:"https://latexeditor.lagrida.com/",target:"_blank",children:"https://latexeditor.lagrida.com/"})]})})}),jsxRuntimeExports.jsx(Snackbar,{open:p,autoHideDuration:1e4,onClose:()=>d(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:jsxRuntimeExports.jsx(SnackbarContent,{sx:{backgroundColor:"black"},message:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["MathML copied to your clipboard. Here's a free online MathML editor:",jsxRuntimeExports.jsx("a",{className:"text-white",href:"https://codepen.io/bqlou/pen/yOgbmb",target:"_blank",children:"https://codepen.io/bqlou/pen/yOgbmb"})]})})}),jsxRuntimeExports.jsxs(Grid$1,{container:!0,spacing:1,children:[jsxRuntimeExports.jsxs(Grid$1,{size:{xs:12,sm:10},children:[jsxRuntimeExports.jsx(Grid$1,{size:12,sx:{my:2},children:jsxRuntimeExports.jsxs("h3",{children:[t," Transform"]})}),jsxRuntimeExports.jsx(Grid$1,{size:12,style:{overflow:"auto"},sx:{fontSize:"1.6em"},children:n==""&&t=="Bilinear"?jsxRuntimeExports.jsx(Button,{variant:"contained",color:"info",onClick:()=>{a()},children:"Calculate bilinear transform"}):jsxRuntimeExports.jsx(DangerousSetIn,{mathMLString:n})})]}),jsxRuntimeExports.jsxs(Grid$1,{size:{xs:12,sm:2},children:[jsxRuntimeExports.jsx(Button,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{py:0,my:.5},onClick:()=>{const x=bundle_minExports.MathMLToLaTeX.convert(n);navigator.clipboard.writeText(x),c(!0)},children:"Copy LaTeX"}),jsxRuntimeExports.jsx(Button,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{py:0,my:.5},onClick:()=>{navigator.clipboard.writeText(n),d(!0)},children:"Copy MathML"}),jsxRuntimeExports.jsx(Button,{variant:"outlined",color:"secondary",fullWidth:!0,sx:{py:0,my:.5},onClick:()=>{var x=encodeURIComponent(s),_=`https://www.wolframalpha.com/input?i2d=true&i=${x}`;window.open(_,"_blank")},children:"Wolfram Alpha"})]})]})]}):null}const GitHubIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}));function getLinkUtilityClass(t){return generateUtilityClass("MuiLink",t)}const linkClasses=generateUtilityClasses("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),getTextDecoration=({theme:t,ownerState:n})=>{const a=n.color,s=getPath(t,`palette.${a}.main`,!1)||getPath(t,`palette.${a}`,!1)||n.color,l=getPath(t,`palette.${a}.mainChannel`)||getPath(t,`palette.${a}Channel`);return"vars"in t&&l?`rgba(${l} / 0.4)`:alpha$1(s,.4)},v6Colors={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},useUtilityClasses$9=t=>{const{classes:n,component:a,focusVisible:s,underline:l}=t,u={root:["root",`underline${capitalize(l)}`,a==="button"&&"button",s&&"focusVisible"]};return composeClasses(u,getLinkUtilityClass,n)},LinkRoot=styled(Typography,{name:"MuiLink",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`underline${capitalize(a.underline)}`],a.component==="button"&&n.button]}})(memoTheme(({theme:t})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:n,ownerState:a})=>n==="always"&&a.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{underline:"always",color:n},style:{"--Link-underlineColor":t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.4)`:alpha$1(t.palette[n].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:alpha$1(t.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":t.vars?`rgba(${t.vars.palette.text.secondaryChannel} / 0.4)`:alpha$1(t.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(t.vars||t).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${linkClasses.focusVisible}`]:{outline:"auto"}}}]}))),Link=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiLink"}),l=useTheme(),{className:u,color:c="primary",component:p="a",onBlur:d,onFocus:x,TypographyClasses:_,underline:S="always",variant:T="inherit",sx:A,...R}=s,[D,O]=reactExports.useState(!1),F=W=>{isFocusVisible(W.target)||O(!1),d&&d(W)},z=W=>{isFocusVisible(W.target)&&O(!0),x&&x(W)},j={...s,color:c,component:p,focusVisible:D,underline:S,variant:T},Z=useUtilityClasses$9(j);return jsxRuntimeExports.jsx(LinkRoot,{color:c,className:clsx(Z.root,u),classes:_,component:p,onBlur:F,onFocus:z,ref:a,ownerState:j,variant:T,...R,sx:[...v6Colors[c]===void 0?[{color:c}]:[],...Array.isArray(A)?A:[A]],style:{...R.style,...S==="always"&&c!=="inherit"&&!v6Colors[c]&&{"--Link-underlineColor":getTextDecoration({theme:l,ownerState:j})}}})});function Footer(){return jsxRuntimeExports.jsx(Box,{sx:{flexGrow:1,mt:0},children:jsxRuntimeExports.jsx(AppBar,{position:"static",sx:{backgroundColor:"rgb(37, 50, 64)",py:2},children:jsxRuntimeExports.jsx(Toolbar,{children:jsxRuntimeExports.jsxs(Stack,{spacing:1,sx:{width:"100%"},direction:{xs:"column",sm:"row"},children:[jsxRuntimeExports.jsxs(Typography,{sx:{flexGrow:1},children:[" ",new Date().getFullYear()," Will Kelsey. This work is licensed under a Creative Commons Attribution 4.0 International License. You may not resell this tool"]}),jsxRuntimeExports.jsx(Typography,{sx:{px:2},children:"v2.0"}),jsxRuntimeExports.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx(GitHubIcon,{sx:{height:"24px",width:"24px",mr:1}}),jsxRuntimeExports.jsx(Link,{href:"https://github.com/28raining/circuit-solver",target:"_blank",color:"inherit",children:"https://github.com/28raining/circuit-solver"})]})]})})})})}function getCollapseUtilityClass(t){return generateUtilityClass("MuiCollapse",t)}generateUtilityClasses("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const useUtilityClasses$8=t=>{const{orientation:n,classes:a}=t,s={root:["root",`${n}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${n}`],wrapperInner:["wrapperInner",`${n}`]};return composeClasses(s,getCollapseUtilityClass,a)},CollapseRoot=styled("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.orientation],a.state==="entered"&&n.entered,a.state==="exited"&&!a.in&&a.collapsedSize==="0px"&&n.hidden]}})(memoTheme(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:n})=>n.state==="exited"&&!n.in&&n.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),CollapseWrapper=styled("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),CollapseWrapperInner=styled("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Collapse=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiCollapse"}),{addEndListener:l,children:u,className:c,collapsedSize:p="0px",component:d,easing:x,in:_,onEnter:S,onEntered:T,onEntering:A,onExit:R,onExited:D,onExiting:O,orientation:F="vertical",style:z,timeout:j=duration.standard,TransitionComponent:Z=Transition,...W}=s,J={...s,orientation:F,collapsedSize:p},en=useUtilityClasses$8(J),tn=useTheme(),Ct=useTimeout(),Q=reactExports.useRef(null),on=reactExports.useRef(),gn=typeof p=="number"?`${p}px`:p,In=F==="horizontal",dn=In?"width":"height",ix=reactExports.useRef(null),Cn=useForkRef(a,ix),ax=mx=>gx=>{if(mx){const Sx=ix.current;gx===void 0?mx(Sx):mx(Sx,gx)}},sx=()=>Q.current?Q.current[In?"clientWidth":"clientHeight"]:0,lx=ax((mx,gx)=>{Q.current&&In&&(Q.current.style.position="absolute"),mx.style[dn]=gn,S&&S(mx,gx)}),ox=ax((mx,gx)=>{const Sx=sx();Q.current&&In&&(Q.current.style.position="");const{duration:Ex,easing:Cx}=getTransitionProps({style:z,timeout:j,easing:x},{mode:"enter"});if(j==="auto"){const Ax=tn.transitions.getAutoHeightDuration(Sx);mx.style.transitionDuration=`${Ax}ms`,on.current=Ax}else mx.style.transitionDuration=typeof Ex=="string"?Ex:`${Ex}ms`;mx.style[dn]=`${Sx}px`,mx.style.transitionTimingFunction=Cx,A&&A(mx,gx)}),hx=ax((mx,gx)=>{mx.style[dn]="auto",T&&T(mx,gx)}),_x=ax(mx=>{mx.style[dn]=`${sx()}px`,R&&R(mx)}),ux=ax(D),px=ax(mx=>{const gx=sx(),{duration:Sx,easing:Ex}=getTransitionProps({style:z,timeout:j,easing:x},{mode:"exit"});if(j==="auto"){const Cx=tn.transitions.getAutoHeightDuration(gx);mx.style.transitionDuration=`${Cx}ms`,on.current=Cx}else mx.style.transitionDuration=typeof Sx=="string"?Sx:`${Sx}ms`;mx.style[dn]=gn,mx.style.transitionTimingFunction=Ex,O&&O(mx)}),dx=mx=>{j==="auto"&&Ct.start(on.current||0,mx),l&&l(ix.current,mx)};return jsxRuntimeExports.jsx(Z,{in:_,onEnter:lx,onEntered:hx,onEntering:ox,onExit:_x,onExited:ux,onExiting:px,addEndListener:dx,nodeRef:ix,timeout:j==="auto"?null:j,...W,children:(mx,{ownerState:gx,...Sx})=>jsxRuntimeExports.jsx(CollapseRoot,{as:d,className:clsx(en.root,c,{entered:en.entered,exited:!_&&gn==="0px"&&en.hidden}[mx]),style:{[In?"minWidth":"minHeight"]:gn,...z},ref:Cn,ownerState:{...J,state:mx},...Sx,children:jsxRuntimeExports.jsx(CollapseWrapper,{ownerState:{...J,state:mx},className:en.wrapper,ref:Q,children:jsxRuntimeExports.jsx(CollapseWrapperInner,{ownerState:{...J,state:mx},className:en.wrapperInner,children:u})})})})});Collapse&&(Collapse.muiSupportAuto=!0);const AccordionContext=reactExports.createContext({});function getAccordionUtilityClass(t){return generateUtilityClass("MuiAccordion",t)}const accordionClasses=generateUtilityClasses("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),useUtilityClasses$7=t=>{const{classes:n,square:a,expanded:s,disabled:l,disableGutters:u}=t;return composeClasses({root:["root",!a&&"rounded",s&&"expanded",l&&"disabled",!u&&"gutters"],heading:["heading"],region:["region"]},getAccordionUtilityClass,n)},AccordionRoot=styled(Paper,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[{[`& .${accordionClasses.region}`]:n.region},n.root,!a.square&&n.rounded,!a.disableGutters&&n.gutters]}})(memoTheme(({theme:t})=>{const n={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],n),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],n)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${accordionClasses.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${accordionClasses.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),memoTheme(({theme:t})=>({variants:[{props:n=>!n.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:n=>!n.disableGutters,style:{[`&.${accordionClasses.expanded}`]:{margin:"16px 0"}}}]}))),AccordionHeading=styled("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),Accordion=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiAccordion"}),{children:l,className:u,defaultExpanded:c=!1,disabled:p=!1,disableGutters:d=!1,expanded:x,onChange:_,square:S=!1,slots:T={},slotProps:A={},TransitionComponent:R,TransitionProps:D,...O}=s,[F,z]=useControlled({controlled:x,default:c,name:"Accordion",state:"expanded"}),j=reactExports.useCallback(sx=>{z(!F),_&&_(sx,!F)},[F,_,z]),[Z,...W]=reactExports.Children.toArray(l),J=reactExports.useMemo(()=>({expanded:F,disabled:p,disableGutters:d,toggle:j}),[F,p,d,j]),en={...s,square:S,disabled:p,disableGutters:d,expanded:F},tn=useUtilityClasses$7(en),Ct={transition:R,...T},Q={transition:D,...A},on={slots:Ct,slotProps:Q},[gn,In]=useSlot("root",{elementType:AccordionRoot,externalForwardedProps:{...on,...O},className:clsx(tn.root,u),shouldForwardComponentProp:!0,ownerState:en,ref:a,additionalProps:{square:S}}),[dn,ix]=useSlot("heading",{elementType:AccordionHeading,externalForwardedProps:on,className:tn.heading,ownerState:en}),[Cn,ax]=useSlot("transition",{elementType:Collapse,externalForwardedProps:on,ownerState:en});return jsxRuntimeExports.jsxs(gn,{...In,children:[jsxRuntimeExports.jsx(dn,{...ix,children:jsxRuntimeExports.jsx(AccordionContext.Provider,{value:J,children:Z})}),jsxRuntimeExports.jsx(Cn,{in:F,timeout:"auto",...ax,children:jsxRuntimeExports.jsx("div",{"aria-labelledby":Z.props.id,id:Z.props["aria-controls"],role:"region",className:tn.region,children:W})})]})});function getAccordionSummaryUtilityClass(t){return generateUtilityClass("MuiAccordionSummary",t)}const accordionSummaryClasses=generateUtilityClasses("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),useUtilityClasses$6=t=>{const{classes:n,expanded:a,disabled:s,disableGutters:l}=t;return composeClasses({root:["root",a&&"expanded",s&&"disabled",!l&&"gutters"],focusVisible:["focusVisible"],content:["content",a&&"expanded",!l&&"contentGutters"],expandIconWrapper:["expandIconWrapper",a&&"expanded"]},getAccordionSummaryUtilityClass,n)},AccordionSummaryRoot=styled(ButtonBase,{name:"MuiAccordionSummary",slot:"Root"})(memoTheme(({theme:t})=>{const n={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],n),[`&.${accordionSummaryClasses.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${accordionSummaryClasses.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${accordionSummaryClasses.disabled})`]:{cursor:"pointer"},variants:[{props:a=>!a.disableGutters,style:{[`&.${accordionSummaryClasses.expanded}`]:{minHeight:64}}}]}})),AccordionSummaryContent=styled("span",{name:"MuiAccordionSummary",slot:"Content"})(memoTheme(({theme:t})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:n=>!n.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${accordionSummaryClasses.expanded}`]:{margin:"20px 0"}}}]}))),AccordionSummaryExpandIconWrapper=styled("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(memoTheme(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${accordionSummaryClasses.expanded}`]:{transform:"rotate(180deg)"}}))),AccordionSummary=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiAccordionSummary"}),{children:l,className:u,expandIcon:c,focusVisibleClassName:p,onClick:d,slots:x,slotProps:_,...S}=s,{disabled:T=!1,disableGutters:A,expanded:R,toggle:D}=reactExports.useContext(AccordionContext),O=Q=>{D&&D(Q),d&&d(Q)},F={...s,expanded:R,disabled:T,disableGutters:A},z=useUtilityClasses$6(F),j={slots:x,slotProps:_},[Z,W]=useSlot("root",{ref:a,shouldForwardComponentProp:!0,className:clsx(z.root,u),elementType:AccordionSummaryRoot,externalForwardedProps:{...j,...S},ownerState:F,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:T,"aria-expanded":R,focusVisibleClassName:clsx(z.focusVisible,p)},getSlotProps:Q=>({...Q,onClick:on=>{var gn;(gn=Q.onClick)==null||gn.call(Q,on),O(on)}})}),[J,en]=useSlot("content",{className:z.content,elementType:AccordionSummaryContent,externalForwardedProps:j,ownerState:F}),[tn,Ct]=useSlot("expandIconWrapper",{className:z.expandIconWrapper,elementType:AccordionSummaryExpandIconWrapper,externalForwardedProps:j,ownerState:F});return jsxRuntimeExports.jsxs(Z,{...W,children:[jsxRuntimeExports.jsx(J,{...en,children:l}),c&&jsxRuntimeExports.jsx(tn,{...Ct,children:c})]})});function getAccordionDetailsUtilityClass(t){return generateUtilityClass("MuiAccordionDetails",t)}generateUtilityClasses("MuiAccordionDetails",["root"]);const useUtilityClasses$5=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getAccordionDetailsUtilityClass,n)},AccordionDetailsRoot=styled("div",{name:"MuiAccordionDetails",slot:"Root"})(memoTheme(({theme:t})=>({padding:t.spacing(1,2,2)}))),AccordionDetails=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiAccordionDetails"}),{className:l,...u}=s,c=s,p=useUtilityClasses$5(c);return jsxRuntimeExports.jsx(AccordionDetailsRoot,{className:clsx(p.root,l),ref:a,ownerState:c,...u})}),ArrowDownwardIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),TableContext=reactExports.createContext();function getTableUtilityClass(t){return generateUtilityClass("MuiTable",t)}generateUtilityClasses("MuiTable",["root","stickyHeader"]);const useUtilityClasses$4=t=>{const{classes:n,stickyHeader:a}=t;return composeClasses({root:["root",a&&"stickyHeader"]},getTableUtilityClass,n)},TableRoot=styled("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.stickyHeader&&n.stickyHeader]}})(memoTheme(({theme:t})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:n})=>n.stickyHeader,style:{borderCollapse:"separate"}}]}))),defaultComponent$3="table",Table=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTable"}),{className:l,component:u=defaultComponent$3,padding:c="normal",size:p="medium",stickyHeader:d=!1,...x}=s,_={...s,component:u,padding:c,size:p,stickyHeader:d},S=useUtilityClasses$4(_),T=reactExports.useMemo(()=>({padding:c,size:p,stickyHeader:d}),[c,p,d]);return jsxRuntimeExports.jsx(TableContext.Provider,{value:T,children:jsxRuntimeExports.jsx(TableRoot,{as:u,role:u===defaultComponent$3?null:"table",ref:a,className:clsx(S.root,l),ownerState:_,...x})})}),Tablelvl2Context=reactExports.createContext();function getTableBodyUtilityClass(t){return generateUtilityClass("MuiTableBody",t)}generateUtilityClasses("MuiTableBody",["root"]);const useUtilityClasses$3=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getTableBodyUtilityClass,n)},TableBodyRoot=styled("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),tablelvl2$1={variant:"body"},defaultComponent$2="tbody",TableBody=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTableBody"}),{className:l,component:u=defaultComponent$2,...c}=s,p={...s,component:u},d=useUtilityClasses$3(p);return jsxRuntimeExports.jsx(Tablelvl2Context.Provider,{value:tablelvl2$1,children:jsxRuntimeExports.jsx(TableBodyRoot,{className:clsx(d.root,l),as:u,ref:a,role:u===defaultComponent$2?null:"rowgroup",ownerState:p,...c})})});function getTableCellUtilityClass(t){return generateUtilityClass("MuiTableCell",t)}const tableCellClasses=generateUtilityClasses("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),useUtilityClasses$2=t=>{const{classes:n,variant:a,align:s,padding:l,size:u,stickyHeader:c}=t,p={root:["root",a,c&&"stickyHeader",s!=="inherit"&&`align${capitalize(s)}`,l!=="normal"&&`padding${capitalize(l)}`,`size${capitalize(u)}`]};return composeClasses(p,getTableCellUtilityClass,n)},TableCellRoot=styled("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.variant],n[`size${capitalize(a.size)}`],a.padding!=="normal"&&n[`padding${capitalize(a.padding)}`],a.align!=="inherit"&&n[`align${capitalize(a.align)}`],a.stickyHeader&&n.stickyHeader]}})(memoTheme(({theme:t})=>({...t.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?lighten(alpha$1(t.palette.divider,1),.88):darken(alpha$1(t.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${tableCellClasses.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:n})=>n.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]}))),TableCell=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTableCell"}),{align:l="inherit",className:u,component:c,padding:p,scope:d,size:x,sortDirection:_,variant:S,...T}=s,A=reactExports.useContext(TableContext),R=reactExports.useContext(Tablelvl2Context),D=R&&R.variant==="head";let O;c?O=c:O=D?"th":"td";let F=d;O==="td"?F=void 0:!F&&D&&(F="col");const z=S||R&&R.variant,j={...s,align:l,component:O,padding:p||(A&&A.padding?A.padding:"normal"),size:x||(A&&A.size?A.size:"medium"),sortDirection:_,stickyHeader:z==="head"&&A&&A.stickyHeader,variant:z},Z=useUtilityClasses$2(j);let W=null;return _&&(W=_==="asc"?"ascending":"descending"),jsxRuntimeExports.jsx(TableCellRoot,{as:O,ref:a,className:clsx(Z.root,u),"aria-sort":W,scope:F,ownerState:j,...T})});function getTableHeadUtilityClass(t){return generateUtilityClass("MuiTableHead",t)}generateUtilityClasses("MuiTableHead",["root"]);const useUtilityClasses$1=t=>{const{classes:n}=t;return composeClasses({root:["root"]},getTableHeadUtilityClass,n)},TableHeadRoot=styled("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),tablelvl2={variant:"head"},defaultComponent$1="thead",TableHead=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTableHead"}),{className:l,component:u=defaultComponent$1,...c}=s,p={...s,component:u},d=useUtilityClasses$1(p);return jsxRuntimeExports.jsx(Tablelvl2Context.Provider,{value:tablelvl2,children:jsxRuntimeExports.jsx(TableHeadRoot,{as:u,className:clsx(d.root,l),ref:a,role:u===defaultComponent$1?null:"rowgroup",ownerState:p,...c})})});function getTableRowUtilityClass(t){return generateUtilityClass("MuiTableRow",t)}const tableRowClasses=generateUtilityClasses("MuiTableRow",["root","selected","hover","head","footer"]),useUtilityClasses=t=>{const{classes:n,selected:a,hover:s,head:l,footer:u}=t;return composeClasses({root:["root",a&&"selected",s&&"hover",l&&"head",u&&"footer"]},getTableRowUtilityClass,n)},TableRowRoot=styled("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.head&&n.head,a.footer&&n.footer]}})(memoTheme(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${tableRowClasses.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${tableRowClasses.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:alpha$1(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:alpha$1(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}}))),defaultComponent="tr",TableRow=reactExports.forwardRef(function t(n,a){const s=useDefaultProps({props:n,name:"MuiTableRow"}),{className:l,component:u=defaultComponent,hover:c=!1,selected:p=!1,...d}=s,x=reactExports.useContext(Tablelvl2Context),_={...s,component:u,hover:c,selected:p,head:x&&x.variant==="head",footer:x&&x.variant==="footer"},S=useUtilityClasses(_);return jsxRuntimeExports.jsx(TableRowRoot,{as:u,ref:a,className:clsx(S.root,l),role:u===defaultComponent?null:"row",ownerState:_,...d})});function ReleaseNotes(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Accordion,{className:"bg-lightgreen",children:[jsxRuntimeExports.jsx(AccordionSummary,{expandIcon:jsxRuntimeExports.jsx(ArrowDownwardIcon,{}),"aria-controls":"panel1-content",id:"panel1-header",children:jsxRuntimeExports.jsx(Typography,{component:"span",children:"Release Notes"})}),jsxRuntimeExports.jsx(AccordionDetails,{children:jsxRuntimeExports.jsxs(Table,{size:"small",sx:{"& .MuiTableCell-root":{border:"1px solid #ccc"}},children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:"#f5f5f5"},children:[jsxRuntimeExports.jsx(TableCell,{children:"Version"}),jsxRuntimeExports.jsx(TableCell,{children:"Date"}),jsxRuntimeExports.jsx(TableCell,{children:"Notes"})]})}),jsxRuntimeExports.jsx(TableBody,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{children:"v2.0"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{children:"July 2025"})}),jsxRuntimeExports.jsxs(TableCell,{children:[jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"Site moved from will-kelsey.com/circuitSolver to onlinecircuitsolver.com"}),jsxRuntimeExports.jsxs("li",{children:["The user 'reactions' to the old site were: 27 angry, 3 laugh, 3 sad, 5 wow, 15 love and 29 superb. The angry people weren't leaving comments but I think the reasons were:",jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"It doesn't work on touch devices including ipad"}),jsxRuntimeExports.jsx("li",{children:"It could crash, like when you drag one componenct directly on top of another"}),jsxRuntimeExports.jsx("li",{children:"Limited features compared to industial tools"})]}),"Now it works on touch because I developed visiojs (https://www.npmjs.com/package/visiojs). Also visiojs replaces draw2d which was the source of all the crashing. This site isn't feature rich - it's original purpose was to create Laplace transforms. But it does run MNA in the background so many more features could be added"]}),jsxRuntimeExports.jsx("li",{children:"Moved to React + MUI + NPM. This allows: running lint, more maintainable code, smaller file size, many micro-benefits from joining the mainstream"}),jsxRuntimeExports.jsx("li",{children:"As well as a re-write, the following new features are added:"}),jsxRuntimeExports.jsx("ul",{children:jsxRuntimeExports.jsx("li",{children:"Adding 2 vprobes"})})]}),"There is one open item I want to do, which is add Python SymPy. Currently the algebraic solver is Algebrite + Yaffle - and they do an amazing job to inverse and simplify an algebraic matrix. However, SymPy can simplify better, and can swap out the algebra to make pretty numberic results"]})]})})]})})]})})}function b(t){if(document.querySelector(`script[src="${t}"]`))return;const n=document.createElement("script");n.src=t,n.async=!0,n.type="module",document.head.appendChild(n)}function h(t,n){for(const[a,s]of Object.entries(n))s!=null&&t.setAttribute(a,s.toString())}const E=["loaded","comment:published","comment:edited","comment:deleted","comment:voted","comment:flagged","reaction","rating","auth:login:clicked","profile:clicked"];class y{static script(n){n=n||"https://talk.hyvor.com",b(`${n}/embed/embed.js`)}static comments(n,a,s){y.script(n.instance);const l=document.createElement("hyvor-talk-comments");for(let[u,c]of Object.entries(n))if(c!=null){if(u==="translations"&&typeof c=="object"){for(let[p,d]of Object.entries(c))p=p.replace("_","-"),l.setAttribute(`t-${p}`,d);continue}u==="settings"&&(c=JSON.stringify(c)),l.setAttribute(u,c)}return s&&E.forEach(u=>{l.addEventListener(u,c=>{s(u,c.detail)})}),a.appendChild(l),l}}const k$1="https://talk.hyvor.com";class w{static script(n){n=n||k$1,b(`${n}/embed/comment-counts.js`)}static commentCount(n,a){w.script(n.instance);const s=document.createElement("hyvor-talk-comment-count");return h(s,n),a.appendChild(s),s}static load(n={},a=null){w.script(),customElements.whenDefined("hyvor-talk-comment-count").then(()=>{window.hyvorTalkCommentCounts.load(n,a)})}}class C{static script(n){n=n||k$1,b(`${n}/embed/newsletter.js`)}static form(n,a){C.script(n.instance);const s=document.createElement("hyvor-talk-newsletter");return h(s,n),a.appendChild(s),s}}const g=["loaded","subscription:created","subscription:success","subscription:updated"];class v{static script(n){n=n||k$1,b(`${n}/embed/memberships.js`)}static memberships(n,a,s){v.script(n.instance);const l=document.createElement("hyvor-talk-memberships");return h(l,n),s&&g.forEach(u=>{l.addEventListener(u,c=>{s(u,c.detail)})}),a=a||document.body,a.appendChild(l),l}static gatedContent(n,a){const s=document.createElement("hyvor-talk-gated-content");return h(s,n),a.appendChild(s),s}}const $=reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null),{on:l,...u}=t;return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>(s.current=y.comments(u,a.current,(c,p)=>{var d;const x=(d=t.on)==null?void 0:d[c];x&&typeof x=="function"&&x(p)}),()=>{var c;(c=s.current)==null||c.remove()}),[]),React.createElement("div",{className:"ht-comments-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null);return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>(s.current=w.commentCount(t,a.current),()=>{var l;(l=s.current)==null||l.remove()}),[]),React.createElement("span",{className:"ht-comment-count-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null);return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>(s.current=C.form(t,a.current),()=>{var l;(l=s.current)==null||l.remove()}),[]),React.createElement("div",{className:"ht-newsletter-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null),{on:l,...u}=t;return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>(s.current=v.memberships(u,a.current,(c,p)=>{var d;const x=(d=t.on)==null?void 0:d[c];x&&typeof x=="function"&&x(p)}),()=>{var c;(c=s.current)==null||c.remove()}),[]),React.createElement("div",{className:"ht-memberships-wrap",ref:a})});reactExports.forwardRef((t,n)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null);return reactExports.useImperativeHandle(n,()=>({wrap:()=>a.current,element:()=>s.current}),[]),reactExports.useEffect(()=>{const l={...t};return l._key&&(l.key=l._key,delete l._key),s.current=v.gatedContent(l,a.current),()=>{var u;(u=s.current)==null||u.remove()}},[]),React.createElement("div",{className:"ht-gated-content-wrap",ref:a})});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(t,n){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l])},extendStatics(t,n)};function __extends(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");extendStatics(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}var __assign=function(){return __assign=Object.assign||function(n){for(var a,s=1,l=arguments.length;s<l;s++){a=arguments[s];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},__assign.apply(this,arguments)},Browser=function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t}(),Env=function(){function t(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return t}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:!env.hasGlobalWindow||"Deno"in window?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(t,n){var a=n.browser,s=t.match(/Firefox\/([\d.]+)/),l=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),u=t.match(/Edge?\/([\d.]+)/),c=/micromessenger/i.test(t);s&&(a.firefox=!0,a.version=s[1]),l&&(a.ie=!0,a.version=l[1]),u&&(a.edge=!0,a.version=u[1],a.newEdge=+u[1].split(".")[0]>18),c&&(a.weChat=!0),n.svgSupported=typeof SVGRect<"u",n.touchEventsSupported="ontouchstart"in window&&!a.ie&&!a.edge,n.pointerEventsSupported="onpointerdown"in window&&(a.edge||a.ie&&+a.version>=11),n.domSupported=typeof document<"u";var p=document.documentElement.style;n.transform3dSupported=(a.ie&&"transition"in p||a.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in p)&&!("OTransition"in p),n.transformSupported=n.transform3dSupported||a.ie&&+a.version>=9}var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(t){var n={};if(typeof JSON>"u")return n;for(var a=0;a<t.length;a++){var s=String.fromCharCode(a+32),l=(t.charCodeAt(a)-OFFSET)/SCALE;n[s]=l}return n}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var t,n;return function(a,s){if(!t){var l=platformApi.createCanvas();t=l&&l.getContext("2d")}if(t)return n!==s&&(n=t.font=s||DEFAULT_FONT),t.measureText(a);a=a||"",s=s||DEFAULT_FONT;var u=/((?:\d+)?\.?\d*)px/.exec(s),c=u&&+u[1]||DEFAULT_FONT_SIZE,p=0;if(s.indexOf("mono")>=0)p=c*a.length;else for(var d=0;d<a.length;d++){var x=DEFAULT_TEXT_WIDTH_MAP[a[d]];p+=x==null?c:x*c}return{width:p}}}(),loadImage:function(t,n,a){var s=new Image;return s.onload=n,s.onerror=a,s.src=t,s}};function setPlatformAPI(t){for(var n in platformApi)t[n]&&(platformApi[n]=t[n])}var BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,n){return t["[object "+n+"]"]=!0,t},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,n){return t["[object "+n+"Array]"]=!0,t},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=(function(){}).constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];typeof console<"u"&&console.error.apply(console,t)}function clone$4(t){if(t==null||typeof t!="object")return t;var n=t,a=objToString.call(t);if(a==="[object Array]"){if(!isPrimitive(t)){n=[];for(var s=0,l=t.length;s<l;s++)n[s]=clone$4(t[s])}}else if(TYPED_ARRAY[a]){if(!isPrimitive(t)){var u=t.constructor;if(u.from)n=u.from(t);else{n=new u(t.length);for(var s=0,l=t.length;s<l;s++)n[s]=t[s]}}}else if(!BUILTIN_OBJECT[a]&&!isPrimitive(t)&&!isDom(t)){n={};for(var c in t)t.hasOwnProperty(c)&&c!==protoKey&&(n[c]=clone$4(t[c]))}return n}function merge(t,n,a){if(!isObject$3(n)||!isObject$3(t))return a?clone$4(n):t;for(var s in n)if(n.hasOwnProperty(s)&&s!==protoKey){var l=t[s],u=n[s];isObject$3(u)&&isObject$3(l)&&!isArray$1(u)&&!isArray$1(l)&&!isDom(u)&&!isDom(l)&&!isBuiltInObject(u)&&!isBuiltInObject(l)&&!isPrimitive(u)&&!isPrimitive(l)?merge(l,u,a):(a||!(s in t))&&(t[s]=clone$4(n[s]))}return t}function mergeAll(t,n){for(var a=t[0],s=1,l=t.length;s<l;s++)a=merge(a,t[s],n);return a}function extend(t,n){if(Object.assign)Object.assign(t,n);else for(var a in n)n.hasOwnProperty(a)&&a!==protoKey&&(t[a]=n[a]);return t}function defaults(t,n,a){for(var s=keys(n),l=0,u=s.length;l<u;l++){var c=s[l];(a?n[c]!=null:t[c]==null)&&(t[c]=n[c])}return t}var createCanvas=platformApi.createCanvas;function indexOf(t,n){if(t){if(t.indexOf)return t.indexOf(n);for(var a=0,s=t.length;a<s;a++)if(t[a]===n)return a}return-1}function inherits(t,n){var a=t.prototype;function s(){}s.prototype=n.prototype,t.prototype=new s;for(var l in a)a.hasOwnProperty(l)&&(t.prototype[l]=a[l]);t.prototype.constructor=t,t.superClass=n}function mixin(t,n,a){if(t="prototype"in t?t.prototype:t,n="prototype"in n?n.prototype:n,Object.getOwnPropertyNames)for(var s=Object.getOwnPropertyNames(n),l=0;l<s.length;l++){var u=s[l];u!=="constructor"&&(a?n[u]!=null:t[u]==null)&&(t[u]=n[u])}else defaults(t,n,a)}function isArrayLike(t){return!t||typeof t=="string"?!1:typeof t.length=="number"}function each$f(t,n,a){if(t&&n)if(t.forEach&&t.forEach===nativeForEach)t.forEach(n,a);else if(t.length===+t.length)for(var s=0,l=t.length;s<l;s++)n.call(a,t[s],s,t);else for(var u in t)t.hasOwnProperty(u)&&n.call(a,t[u],u,t)}function map$1(t,n,a){if(!t)return[];if(!n)return slice(t);if(t.map&&t.map===nativeMap)return t.map(n,a);for(var s=[],l=0,u=t.length;l<u;l++)s.push(n.call(a,t[l],l,t));return s}function reduce(t,n,a,s){if(t&&n){for(var l=0,u=t.length;l<u;l++)a=n.call(s,a,t[l],l,t);return a}}function filter(t,n,a){if(!t)return[];if(!n)return slice(t);if(t.filter&&t.filter===nativeFilter)return t.filter(n,a);for(var s=[],l=0,u=t.length;l<u;l++)n.call(a,t[l],l,t)&&s.push(t[l]);return s}function find(t,n,a){if(t&&n){for(var s=0,l=t.length;s<l;s++)if(n.call(a,t[s],s,t))return t[s]}}function keys(t){if(!t)return[];if(Object.keys)return Object.keys(t);var n=[];for(var a in t)t.hasOwnProperty(a)&&n.push(a);return n}function bindPolyfill(t,n){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];return function(){return t.apply(n,a.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction$1(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return function(){return t.apply(this,n.concat(nativeSlice.call(arguments)))}}function isArray$1(t){return Array.isArray?Array.isArray(t):objToString.call(t)==="[object Array]"}function isFunction$1(t){return typeof t=="function"}function isString$1(t){return typeof t=="string"}function isStringSafe(t){return objToString.call(t)==="[object String]"}function isNumber(t){return typeof t=="number"}function isObject$3(t){var n=typeof t;return n==="function"||!!t&&n==="object"}function isBuiltInObject(t){return!!BUILTIN_OBJECT[objToString.call(t)]}function isTypedArray(t){return!!TYPED_ARRAY[objToString.call(t)]}function isDom(t){return typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.ownerDocument=="object"}function isGradientObject(t){return t.colorStops!=null}function isImagePatternObject(t){return t.image!=null}function isRegExp(t){return objToString.call(t)==="[object RegExp]"}function eqNaN(t){return t!==t}function retrieve(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var a=0,s=t.length;a<s;a++)if(t[a]!=null)return t[a]}function retrieve2(t,n){return t??n}function retrieve3(t,n,a){return t??n??a}function slice(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return nativeSlice.apply(t,n)}function normalizeCssArray$1(t){if(typeof t=="number")return[t,t,t,t];var n=t.length;return n===2?[t[0],t[1],t[0],t[1]]:n===3?[t[0],t[1],t[2],t[1]]:t}function assert(t,n){if(!t)throw new Error(n)}function trim$1(t){return t==null?null:typeof t.trim=="function"?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(t){t[primitiveKey]=!0}function isPrimitive(t){return t[primitiveKey]}var MapPolyfill=function(){function t(){this.data={}}return t.prototype.delete=function(n){var a=this.has(n);return a&&delete this.data[n],a},t.prototype.has=function(n){return this.data.hasOwnProperty(n)},t.prototype.get=function(n){return this.data[n]},t.prototype.set=function(n,a){return this.data[n]=a,this},t.prototype.keys=function(){return keys(this.data)},t.prototype.forEach=function(n){var a=this.data;for(var s in a)a.hasOwnProperty(s)&&n(a[s],s)},t}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function t(n){var a=isArray$1(n);this.data=maybeNativeMap();var s=this;n instanceof t?n.each(l):n&&each$f(n,l);function l(u,c){a?s.set(u,c):s.set(c,u)}}return t.prototype.hasKey=function(n){return this.data.has(n)},t.prototype.get=function(n){return this.data.get(n)},t.prototype.set=function(n,a){return this.data.set(n,a),a},t.prototype.each=function(n,a){this.data.forEach(function(s,l){n.call(a,s,l)})},t.prototype.keys=function(){var n=this.data.keys();return isNativeMapSupported?Array.from(n):n},t.prototype.removeKey=function(n){this.data.delete(n)},t}();function createHashMap(t){return new HashMap(t)}function concatArray(t,n){for(var a=new t.constructor(t.length+n.length),s=0;s<t.length;s++)a[s]=t[s];for(var l=t.length,s=0;s<n.length;s++)a[s+l]=n[s];return a}function createObject(t,n){var a;if(Object.create)a=Object.create(t);else{var s=function(){};s.prototype=t,a=new s}return n&&extend(a,n),a}function disableUserSelect(t){var n=t.style;n.webkitUserSelect="none",n.userSelect="none",n.webkitTapHighlightColor="rgba(0,0,0,0)",n["-webkit-touch-callout"]="none"}function hasOwn(t,n){return t.hasOwnProperty(n)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;const util$1=Object.freeze(Object.defineProperty({__proto__:null,HashMap,RADIAN_TO_DEGREE,assert,bind:bind$1,clone:clone$4,concatArray,createCanvas,createHashMap,createObject,curry:curry$1,defaults,disableUserSelect,each:each$f,eqNaN,extend,filter,find,guid,hasOwn,indexOf,inherits,isArray:isArray$1,isArrayLike,isBuiltInObject,isDom,isFunction:isFunction$1,isGradientObject,isImagePatternObject,isNumber,isObject:isObject$3,isPrimitive,isRegExp,isString:isString$1,isStringSafe,isTypedArray,keys,logError,map:map$1,merge,mergeAll,mixin,noop,normalizeCssArray:normalizeCssArray$1,reduce,retrieve,retrieve2,retrieve3,setAsPrimitive,slice,trim:trim$1},Symbol.toStringTag,{value:"Module"}));function create$2(t,n){return t==null&&(t=0),n==null&&(n=0),[t,n]}function copy$1(t,n){return t[0]=n[0],t[1]=n[1],t}function clone$3(t){return[t[0],t[1]]}function set$1(t,n,a){return t[0]=n,t[1]=a,t}function add(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t}function scaleAndAdd$1(t,n,a,s){return t[0]=n[0]+a[0]*s,t[1]=n[1]+a[1]*s,t}function sub(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t}function len(t){return Math.sqrt(lenSquare(t))}var length=len;function lenSquare(t){return t[0]*t[0]+t[1]*t[1]}var lengthSquare=lenSquare;function mul$1(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t}function div(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t}function dot(t,n){return t[0]*n[0]+t[1]*n[1]}function scale$2(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t}function normalize$3(t,n){var a=len(n);return a===0?(t[0]=0,t[1]=0):(t[0]=n[0]/a,t[1]=n[1]/a),t}function distance(t,n){return Math.sqrt((t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1]))}var dist$1=distance;function distanceSquare(t,n){return(t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1])}var distSquare=distanceSquare;function negate(t,n){return t[0]=-n[0],t[1]=-n[1],t}function lerp$1(t,n,a,s){return t[0]=n[0]+s*(a[0]-n[0]),t[1]=n[1]+s*(a[1]-n[1]),t}function applyTransform$1(t,n,a){var s=n[0],l=n[1];return t[0]=a[0]*s+a[2]*l+a[4],t[1]=a[1]*s+a[3]*l+a[5],t}function min$1(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t}function max$1(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t}const vector=Object.freeze(Object.defineProperty({__proto__:null,add,applyTransform:applyTransform$1,clone:clone$3,copy:copy$1,create:create$2,dist:dist$1,distSquare,distance,distanceSquare,div,dot,len,lenSquare,length,lengthSquare,lerp:lerp$1,max:max$1,min:min$1,mul:mul$1,negate,normalize:normalize$3,scale:scale$2,scaleAndAdd:scaleAndAdd$1,set:set$1,sub},Symbol.toStringTag,{value:"Module"}));var Param=function(){function t(n,a){this.target=n,this.topTarget=a&&a.topTarget}return t}(),Draggable=function(){function t(n){this.handler=n,n.on("mousedown",this._dragStart,this),n.on("mousemove",this._drag,this),n.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(n){for(var a=n.target;a&&!a.draggable;)a=a.parent||a.__hostTarget;a&&(this._draggingTarget=a,a.dragging=!0,this._x=n.offsetX,this._y=n.offsetY,this.handler.dispatchToElement(new Param(a,n),"dragstart",n.event))},t.prototype._drag=function(n){var a=this._draggingTarget;if(a){var s=n.offsetX,l=n.offsetY,u=s-this._x,c=l-this._y;this._x=s,this._y=l,a.drift(u,c,n),this.handler.dispatchToElement(new Param(a,n),"drag",n.event);var p=this.handler.findHover(s,l,a).target,d=this._dropTarget;this._dropTarget=p,a!==p&&(d&&p!==d&&this.handler.dispatchToElement(new Param(d,n),"dragleave",n.event),p&&p!==d&&this.handler.dispatchToElement(new Param(p,n),"dragenter",n.event))}},t.prototype._dragEnd=function(n){var a=this._draggingTarget;a&&(a.dragging=!1),this.handler.dispatchToElement(new Param(a,n),"dragend",n.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,n),"drop",n.event),this._draggingTarget=null,this._dropTarget=null},t}(),Eventful=function(){function t(n){n&&(this._$eventProcessor=n)}return t.prototype.on=function(n,a,s,l){this._$handlers||(this._$handlers={});var u=this._$handlers;if(typeof a=="function"&&(l=s,s=a,a=null),!s||!n)return this;var c=this._$eventProcessor;a!=null&&c&&c.normalizeQuery&&(a=c.normalizeQuery(a)),u[n]||(u[n]=[]);for(var p=0;p<u[n].length;p++)if(u[n][p].h===s)return this;var d={h:s,query:a,ctx:l||this,callAtLast:s.zrEventfulCallAtLast},x=u[n].length-1,_=u[n][x];return _&&_.callAtLast?u[n].splice(x,0,d):u[n].push(d),this},t.prototype.isSilent=function(n){var a=this._$handlers;return!a||!a[n]||!a[n].length},t.prototype.off=function(n,a){var s=this._$handlers;if(!s)return this;if(!n)return this._$handlers={},this;if(a){if(s[n]){for(var l=[],u=0,c=s[n].length;u<c;u++)s[n][u].h!==a&&l.push(s[n][u]);s[n]=l}s[n]&&s[n].length===0&&delete s[n]}else delete s[n];return this},t.prototype.trigger=function(n){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];if(!this._$handlers)return this;var l=this._$handlers[n],u=this._$eventProcessor;if(l)for(var c=a.length,p=l.length,d=0;d<p;d++){var x=l[d];if(!(u&&u.filter&&x.query!=null&&!u.filter(n,x.query)))switch(c){case 0:x.h.call(x.ctx);break;case 1:x.h.call(x.ctx,a[0]);break;case 2:x.h.call(x.ctx,a[0],a[1]);break;default:x.h.apply(x.ctx,a);break}}return u&&u.afterTrigger&&u.afterTrigger(n),this},t.prototype.triggerWithContext=function(n){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];if(!this._$handlers)return this;var l=this._$handlers[n],u=this._$eventProcessor;if(l)for(var c=a.length,p=a[c-1],d=l.length,x=0;x<d;x++){var _=l[x];if(!(u&&u.filter&&_.query!=null&&!u.filter(n,_.query)))switch(c){case 0:_.h.call(p);break;case 1:_.h.call(p,a[0]);break;case 2:_.h.call(p,a[0],a[1]);break;default:_.h.apply(p,a.slice(1,c-1));break}}return u&&u.afterTrigger&&u.afterTrigger(n),this},t}(),LN2=Math.log(2);function determinant(t,n,a,s,l,u){var c=s+"-"+l,p=t.length;if(u.hasOwnProperty(c))return u[c];if(n===1){var d=Math.round(Math.log((1<<p)-1&~l)/LN2);return t[a][d]}for(var x=s|1<<a,_=a+1;s&1<<_;)_++;for(var S=0,T=0,A=0;T<p;T++){var R=1<<T;R&l||(S+=(A%2?-1:1)*t[a][T]*determinant(t,n-1,_,x,l|R,u),A++)}return u[c]=S,S}function buildTransformer(t,n){var a=[[t[0],t[1],1,0,0,0,-n[0]*t[0],-n[0]*t[1]],[0,0,0,t[0],t[1],1,-n[1]*t[0],-n[1]*t[1]],[t[2],t[3],1,0,0,0,-n[2]*t[2],-n[2]*t[3]],[0,0,0,t[2],t[3],1,-n[3]*t[2],-n[3]*t[3]],[t[4],t[5],1,0,0,0,-n[4]*t[4],-n[4]*t[5]],[0,0,0,t[4],t[5],1,-n[5]*t[4],-n[5]*t[5]],[t[6],t[7],1,0,0,0,-n[6]*t[6],-n[6]*t[7]],[0,0,0,t[6],t[7],1,-n[7]*t[6],-n[7]*t[7]]],s={},l=determinant(a,8,0,0,0,s);if(l!==0){for(var u=[],c=0;c<8;c++)for(var p=0;p<8;p++)u[p]==null&&(u[p]=0),u[p]+=((c+p)%2?-1:1)*determinant(a,7,c===0?1:0,1<<c,1<<p,s)/l*n[c];return function(d,x,_){var S=x*u[6]+_*u[7]+1;d[0]=(x*u[0]+_*u[1]+u[2])/S,d[1]=(x*u[3]+_*u[4]+u[5])/S}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(t,n,a,s,l){return transformCoordWithViewport(_calcOut$1,n,s,l,!0)&&transformCoordWithViewport(t,a,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(t,n,a,s,l){if(n.getBoundingClientRect&&env.domSupported&&!isCanvasEl(n)){var u=n[EVENT_SAVED_PROP]||(n[EVENT_SAVED_PROP]={}),c=prepareCoordMarkers(n,u),p=preparePointerTransformer(c,u,l);if(p)return p(t,a,s),!0}return!1}function prepareCoordMarkers(t,n){var a=n.markers;if(a)return a;a=n.markers=[];for(var s=["left","right"],l=["top","bottom"],u=0;u<4;u++){var c=document.createElement("div"),p=c.style,d=u%2,x=(u>>1)%2;p.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",s[d]+":0",l[x]+":0",s[1-d]+":auto",l[1-x]+":auto",""].join("!important;"),t.appendChild(c),a.push(c)}return a}function preparePointerTransformer(t,n,a){for(var s=a?"invTrans":"trans",l=n[s],u=n.srcCoords,c=[],p=[],d=!0,x=0;x<4;x++){var _=t[x].getBoundingClientRect(),S=2*x,T=_.left,A=_.top;c.push(T,A),d=d&&u&&T===u[S]&&A===u[S+1],p.push(t[x].offsetLeft,t[x].offsetTop)}return d&&l?l:(n.srcCoords=c,n[s]=a?buildTransformer(p,c):buildTransformer(c,p))}function isCanvasEl(t){return t.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(t){return t==null?"":(t+"").replace(replaceReg,function(n,a){return replaceMap[a]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&&+env.browser.version.split(".")[0]<39;function clientToLocal(t,n,a,s){return a=a||{},s?calculateZrXY(t,n,a):firefoxNotSupportOffsetXY&&n.layerX!=null&&n.layerX!==n.offsetX?(a.zrX=n.layerX,a.zrY=n.layerY):n.offsetX!=null?(a.zrX=n.offsetX,a.zrY=n.offsetY):calculateZrXY(t,n,a),a}function calculateZrXY(t,n,a){if(env.domSupported&&t.getBoundingClientRect){var s=n.clientX,l=n.clientY;if(isCanvasEl(t)){var u=t.getBoundingClientRect();a.zrX=s-u.left,a.zrY=l-u.top;return}else if(transformCoordWithViewport(_calcOut,t,s,l)){a.zrX=_calcOut[0],a.zrY=_calcOut[1];return}}a.zrX=a.zrY=0}function getNativeEvent(t){return t||window.event}function normalizeEvent(t,n,a){if(n=getNativeEvent(n),n.zrX!=null)return n;var s=n.type,l=s&&s.indexOf("touch")>=0;if(l){var c=s!=="touchend"?n.targetTouches[0]:n.changedTouches[0];c&&clientToLocal(t,c,n,a)}else{clientToLocal(t,n,n,a);var u=getWheelDeltaMayPolyfill(n);n.zrDelta=u?u/120:-(n.detail||0)/3}var p=n.button;return n.which==null&&p!==void 0&&MOUSE_EVENT_REG.test(n.type)&&(n.which=p&1?1:p&2?3:p&4?2:0),n}function getWheelDeltaMayPolyfill(t){var n=t.wheelDelta;if(n)return n;var a=t.deltaX,s=t.deltaY;if(a==null||s==null)return n;var l=Math.abs(s!==0?s:a),u=s>0?-1:s<0?1:a>0?-1:1;return 3*l*u}function addEventListener(t,n,a,s){t.addEventListener(n,a,s)}function removeEventListener(t,n,a,s){t.removeEventListener(n,a,s)}var stop=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(t){return t.which===2||t.which===3}var GestureMgr=function(){function t(){this._track=[]}return t.prototype.recognize=function(n,a,s){return this._doTrack(n,a,s),this._recognize(n)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(n,a,s){var l=n.touches;if(l){for(var u={points:[],touches:[],target:a,event:n},c=0,p=l.length;c<p;c++){var d=l[c],x=clientToLocal(s,d,{});u.points.push([x.zrX,x.zrY]),u.touches.push(d)}this._track.push(u)}},t.prototype._recognize=function(n){for(var a in recognizers)if(recognizers.hasOwnProperty(a)){var s=recognizers[a](this._track,n);if(s)return s}},t}();function dist(t){var n=t[1][0]-t[0][0],a=t[1][1]-t[0][1];return Math.sqrt(n*n+a*a)}function center$1(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var recognizers={pinch:function(t,n){var a=t.length;if(a){var s=(t[a-1]||{}).points,l=(t[a-2]||{}).points||s;if(l&&l.length>1&&s&&s.length>1){var u=dist(s)/dist(l);!isFinite(u)&&(u=1),n.pinchScale=u;var c=center$1(s);return n.pinchX=c[0],n.pinchY=c[1],{type:"pinch",target:t[0].target,event:n}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function copy(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function mul(t,n,a){var s=n[0]*a[0]+n[2]*a[1],l=n[1]*a[0]+n[3]*a[1],u=n[0]*a[2]+n[2]*a[3],c=n[1]*a[2]+n[3]*a[3],p=n[0]*a[4]+n[2]*a[5]+n[4],d=n[1]*a[4]+n[3]*a[5]+n[5];return t[0]=s,t[1]=l,t[2]=u,t[3]=c,t[4]=p,t[5]=d,t}function translate(t,n,a){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4]+a[0],t[5]=n[5]+a[1],t}function rotate(t,n,a,s){s===void 0&&(s=[0,0]);var l=n[0],u=n[2],c=n[4],p=n[1],d=n[3],x=n[5],_=Math.sin(a),S=Math.cos(a);return t[0]=l*S+p*_,t[1]=-l*_+p*S,t[2]=u*S+d*_,t[3]=-u*_+S*d,t[4]=S*(c-s[0])+_*(x-s[1])+s[0],t[5]=S*(x-s[1])-_*(c-s[0])+s[1],t}function scale$1(t,n,a){var s=a[0],l=a[1];return t[0]=n[0]*s,t[1]=n[1]*l,t[2]=n[2]*s,t[3]=n[3]*l,t[4]=n[4]*s,t[5]=n[5]*l,t}function invert(t,n){var a=n[0],s=n[2],l=n[4],u=n[1],c=n[3],p=n[5],d=a*c-u*s;return d?(d=1/d,t[0]=c*d,t[1]=-u*d,t[2]=-s*d,t[3]=a*d,t[4]=(s*p-c*l)*d,t[5]=(u*l-a*p)*d,t):null}function clone$2(t){var n=create$1();return copy(n,t),n}const matrix=Object.freeze(Object.defineProperty({__proto__:null,clone:clone$2,copy,create:create$1,identity,invert,mul,rotate,scale:scale$1,translate},Symbol.toStringTag,{value:"Module"}));var Point=function(){function t(n,a){this.x=n||0,this.y=a||0}return t.prototype.copy=function(n){return this.x=n.x,this.y=n.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(n,a){return this.x=n,this.y=a,this},t.prototype.equal=function(n){return n.x===this.x&&n.y===this.y},t.prototype.add=function(n){return this.x+=n.x,this.y+=n.y,this},t.prototype.scale=function(n){this.x*=n,this.y*=n},t.prototype.scaleAndAdd=function(n,a){this.x+=n.x*a,this.y+=n.y*a},t.prototype.sub=function(n){return this.x-=n.x,this.y-=n.y,this},t.prototype.dot=function(n){return this.x*n.x+this.y*n.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var n=this.len();return this.x/=n,this.y/=n,this},t.prototype.distance=function(n){var a=this.x-n.x,s=this.y-n.y;return Math.sqrt(a*a+s*s)},t.prototype.distanceSquare=function(n){var a=this.x-n.x,s=this.y-n.y;return a*a+s*s},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(n){if(n){var a=this.x,s=this.y;return this.x=n[0]*a+n[2]*s+n[4],this.y=n[1]*a+n[3]*s+n[5],this}},t.prototype.toArray=function(n){return n[0]=this.x,n[1]=this.y,n},t.prototype.fromArray=function(n){this.x=n[0],this.y=n[1]},t.set=function(n,a,s){n.x=a,n.y=s},t.copy=function(n,a){n.x=a.x,n.y=a.y},t.len=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},t.lenSquare=function(n){return n.x*n.x+n.y*n.y},t.dot=function(n,a){return n.x*a.x+n.y*a.y},t.add=function(n,a,s){n.x=a.x+s.x,n.y=a.y+s.y},t.sub=function(n,a,s){n.x=a.x-s.x,n.y=a.y-s.y},t.scale=function(n,a,s){n.x=a.x*s,n.y=a.y*s},t.scaleAndAdd=function(n,a,s,l){n.x=a.x+s.x*l,n.y=a.y+s.y*l},t.lerp=function(n,a,s,l){var u=1-l;n.x=u*a.x+l*s.x,n.y=u*a.y+l*s.y},t}(),mathMin$a=Math.min,mathMax$a=Math.max,lt=new Point,rb=new Point,lb=new Point,rt=new Point,minTv$1=new Point,maxTv$1=new Point,BoundingRect=function(){function t(n,a,s,l){s<0&&(n=n+s,s=-s),l<0&&(a=a+l,l=-l),this.x=n,this.y=a,this.width=s,this.height=l}return t.prototype.union=function(n){var a=mathMin$a(n.x,this.x),s=mathMin$a(n.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$a(n.x+n.width,this.x+this.width)-a:this.width=n.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$a(n.y+n.height,this.y+this.height)-s:this.height=n.height,this.x=a,this.y=s},t.prototype.applyTransform=function(n){t.applyTransform(this,this,n)},t.prototype.calculateTransform=function(n){var a=this,s=n.width/a.width,l=n.height/a.height,u=create$1();return translate(u,u,[-a.x,-a.y]),scale$1(u,u,[s,l]),translate(u,u,[n.x,n.y]),u},t.prototype.intersect=function(n,a){if(!n)return!1;n instanceof t||(n=t.create(n));var s=this,l=s.x,u=s.x+s.width,c=s.y,p=s.y+s.height,d=n.x,x=n.x+n.width,_=n.y,S=n.y+n.height,T=!(u<d||x<l||p<_||S<c);if(a){var A=1/0,R=0,D=Math.abs(u-d),O=Math.abs(x-l),F=Math.abs(p-_),z=Math.abs(S-c),j=Math.min(D,O),Z=Math.min(F,z);u<d||x<l?j>R&&(R=j,D<O?Point.set(maxTv$1,-D,0):Point.set(maxTv$1,O,0)):j<A&&(A=j,D<O?Point.set(minTv$1,D,0):Point.set(minTv$1,-O,0)),p<_||S<c?Z>R&&(R=Z,F<z?Point.set(maxTv$1,0,-F):Point.set(maxTv$1,0,z)):j<A&&(A=j,F<z?Point.set(minTv$1,0,F):Point.set(minTv$1,0,-z))}return a&&Point.copy(a,T?minTv$1:maxTv$1),T},t.prototype.contain=function(n,a){var s=this;return n>=s.x&&n<=s.x+s.width&&a>=s.y&&a<=s.y+s.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(n){t.copy(this,n)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return this.width===0||this.height===0},t.create=function(n){return new t(n.x,n.y,n.width,n.height)},t.copy=function(n,a){n.x=a.x,n.y=a.y,n.width=a.width,n.height=a.height},t.applyTransform=function(n,a,s){if(!s){n!==a&&t.copy(n,a);return}if(s[1]<1e-5&&s[1]>-1e-5&&s[2]<1e-5&&s[2]>-1e-5){var l=s[0],u=s[3],c=s[4],p=s[5];n.x=a.x*l+c,n.y=a.y*u+p,n.width=a.width*l,n.height=a.height*u,n.width<0&&(n.x+=n.width,n.width=-n.width),n.height<0&&(n.y+=n.height,n.height=-n.height);return}lt.x=lb.x=a.x,lt.y=rt.y=a.y,rb.x=rt.x=a.x+a.width,rb.y=lb.y=a.y+a.height,lt.transform(s),rt.transform(s),rb.transform(s),lb.transform(s),n.x=mathMin$a(lt.x,rb.x,lb.x,rt.x),n.y=mathMin$a(lt.y,rb.y,lb.y,rt.y);var d=mathMax$a(lt.x,rb.x,lb.x,rt.x),x=mathMax$a(lt.y,rb.y,lb.y,rt.y);n.width=d-n.x,n.height=x-n.y},t}(),SILENT="silent";function makeEventPacket(t,n,a){return{type:t,event:a,target:n.target,topTarget:n.topTarget,cancelBubble:!1,offsetX:a.zrX,offsetY:a.zrY,gestureEvent:a.gestureEvent,pinchX:a.pinchX,pinchY:a.pinchY,pinchScale:a.pinchScale,wheelDelta:a.zrDelta,zrByTouch:a.zrByTouch,which:a.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.handler=null,a}return n.prototype.dispose=function(){},n.prototype.setCursor=function(){},n}(Eventful),HoveredResult=function(){function t(n,a){this.x=n,this.y=a}return t}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler=function(t){__extends(n,t);function n(a,s,l,u,c){var p=t.call(this)||this;return p._hovered=new HoveredResult(0,0),p.storage=a,p.painter=s,p.painterRoot=u,p._pointerSize=c,l=l||new EmptyProxy,p.proxy=null,p.setHandlerProxy(l),p._draggingMgr=new Draggable(p),p}return n.prototype.setHandlerProxy=function(a){this.proxy&&this.proxy.dispose(),a&&(each$f(handlerNames,function(s){a.on&&a.on(s,this[s],this)},this),a.handler=this),this.proxy=a},n.prototype.mousemove=function(a){var s=a.zrX,l=a.zrY,u=isOutsideBoundary(this,s,l),c=this._hovered,p=c.target;p&&!p.__zr&&(c=this.findHover(c.x,c.y),p=c.target);var d=this._hovered=u?new HoveredResult(s,l):this.findHover(s,l),x=d.target,_=this.proxy;_.setCursor&&_.setCursor(x?x.cursor:"default"),p&&x!==p&&this.dispatchToElement(c,"mouseout",a),this.dispatchToElement(d,"mousemove",a),x&&x!==p&&this.dispatchToElement(d,"mouseover",a)},n.prototype.mouseout=function(a){var s=a.zrEventControl;s!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",a),s!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:a})},n.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},n.prototype.dispatch=function(a,s){var l=this[a];l&&l.call(this,s)},n.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},n.prototype.setCursorStyle=function(a){var s=this.proxy;s.setCursor&&s.setCursor(a)},n.prototype.dispatchToElement=function(a,s,l){a=a||{};var u=a.target;if(!(u&&u.silent)){for(var c="on"+s,p=makeEventPacket(s,a,l);u&&(u[c]&&(p.cancelBubble=!!u[c].call(u,p)),u.trigger(s,p),u=u.__hostTarget?u.__hostTarget:u.parent,!p.cancelBubble););p.cancelBubble||(this.trigger(s,p),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(d){typeof d[c]=="function"&&d[c].call(d,p),d.trigger&&d.trigger(s,p)}))}},n.prototype.findHover=function(a,s,l){var u=this.storage.getDisplayList(),c=new HoveredResult(a,s);if(setHoverTarget(u,c,a,s,l),this._pointerSize&&!c.target){for(var p=[],d=this._pointerSize,x=d/2,_=new BoundingRect(a-x,s-x,d,d),S=u.length-1;S>=0;S--){var T=u[S];T!==l&&!T.ignore&&!T.ignoreCoarsePointer&&(!T.parent||!T.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(T.getBoundingRect()),T.transform&&tmpRect$1.applyTransform(T.transform),tmpRect$1.intersect(_)&&p.push(T))}if(p.length)for(var A=4,R=Math.PI/12,D=Math.PI*2,O=0;O<x;O+=A)for(var F=0;F<D;F+=R){var z=a+O*Math.cos(F),j=s+O*Math.sin(F);if(setHoverTarget(p,c,z,j,l),c.target)return c}}return c},n.prototype.processGesture=function(a,s){this._gestureMgr||(this._gestureMgr=new GestureMgr);var l=this._gestureMgr;s==="start"&&l.clear();var u=l.recognize(a,this.findHover(a.zrX,a.zrY,null).target,this.proxy.dom);if(s==="end"&&l.clear(),u){var c=u.type;a.gestureEvent=c;var p=new HoveredResult;p.target=u.target,this.dispatchToElement(p,c,u.event)}},n}(Eventful);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Handler.prototype[t]=function(n){var a=n.zrX,s=n.zrY,l=isOutsideBoundary(this,a,s),u,c;if((t!=="mouseup"||!l)&&(u=this.findHover(a,s),c=u.target),t==="mousedown")this._downEl=c,this._downPoint=[n.zrX,n.zrY],this._upEl=c;else if(t==="mouseup")this._upEl=c;else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[n.zrX,n.zrY])>4)return;this._downPoint=null}this.dispatchToElement(u,t,n)}});function isHover(t,n,a){if(t[t.rectHover?"rectContain":"contain"](n,a)){for(var s=t,l=void 0,u=!1;s;){if(s.ignoreClip&&(u=!0),!u){var c=s.getClipPath();if(c&&!c.contain(n,a))return!1}s.silent&&(l=!0);var p=s.__hostTarget;s=p||s.parent}return l?SILENT:!0}return!1}function setHoverTarget(t,n,a,s,l){for(var u=t.length-1;u>=0;u--){var c=t[u],p=void 0;if(c!==l&&!c.ignore&&(p=isHover(c,a,s))&&(!n.topTarget&&(n.topTarget=c),p!==SILENT)){n.target=c;break}}}function isOutsideBoundary(t,n,a){var s=t.painter;return n<0||n>s.getWidth()||a<0||a>s.getHeight()}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(t){for(var n=0;t>=DEFAULT_MIN_MERGE;)n|=t&1,t>>=1;return t+n}function makeAscendingRun(t,n,a,s){var l=n+1;if(l===a)return 1;if(s(t[l++],t[n])<0){for(;l<a&&s(t[l],t[l-1])<0;)l++;reverseRun(t,n,l)}else for(;l<a&&s(t[l],t[l-1])>=0;)l++;return l-n}function reverseRun(t,n,a){for(a--;n<a;){var s=t[n];t[n++]=t[a],t[a--]=s}}function binaryInsertionSort(t,n,a,s,l){for(s===n&&s++;s<a;s++){for(var u=t[s],c=n,p=s,d;c<p;)d=c+p>>>1,l(u,t[d])<0?p=d:c=d+1;var x=s-c;switch(x){case 3:t[c+3]=t[c+2];case 2:t[c+2]=t[c+1];case 1:t[c+1]=t[c];break;default:for(;x>0;)t[c+x]=t[c+x-1],x--}t[c]=u}}function gallopLeft(t,n,a,s,l,u){var c=0,p=0,d=1;if(u(t,n[a+l])>0){for(p=s-l;d<p&&u(t,n[a+l+d])>0;)c=d,d=(d<<1)+1,d<=0&&(d=p);d>p&&(d=p),c+=l,d+=l}else{for(p=l+1;d<p&&u(t,n[a+l-d])<=0;)c=d,d=(d<<1)+1,d<=0&&(d=p);d>p&&(d=p);var x=c;c=l-d,d=l-x}for(c++;c<d;){var _=c+(d-c>>>1);u(t,n[a+_])>0?c=_+1:d=_}return d}function gallopRight(t,n,a,s,l,u){var c=0,p=0,d=1;if(u(t,n[a+l])<0){for(p=l+1;d<p&&u(t,n[a+l-d])<0;)c=d,d=(d<<1)+1,d<=0&&(d=p);d>p&&(d=p);var x=c;c=l-d,d=l-x}else{for(p=s-l;d<p&&u(t,n[a+l+d])>=0;)c=d,d=(d<<1)+1,d<=0&&(d=p);d>p&&(d=p),c+=l,d+=l}for(c++;c<d;){var _=c+(d-c>>>1);u(t,n[a+_])<0?d=_:c=_+1}return d}function TimSort(t,n){var a=DEFAULT_MIN_GALLOPING,s,l,u=0,c=[];s=[],l=[];function p(A,R){s[u]=A,l[u]=R,u+=1}function d(){for(;u>1;){var A=u-2;if(A>=1&&l[A-1]<=l[A]+l[A+1]||A>=2&&l[A-2]<=l[A]+l[A-1])l[A-1]<l[A+1]&&A--;else if(l[A]>l[A+1])break;_(A)}}function x(){for(;u>1;){var A=u-2;A>0&&l[A-1]<l[A+1]&&A--,_(A)}}function _(A){var R=s[A],D=l[A],O=s[A+1],F=l[A+1];l[A]=D+F,A===u-3&&(s[A+1]=s[A+2],l[A+1]=l[A+2]),u--;var z=gallopRight(t[O],t,R,D,0,n);R+=z,D-=z,D!==0&&(F=gallopLeft(t[R+D-1],t,O,F,F-1,n),F!==0&&(D<=F?S(R,D,O,F):T(R,D,O,F)))}function S(A,R,D,O){var F=0;for(F=0;F<R;F++)c[F]=t[A+F];var z=0,j=D,Z=A;if(t[Z++]=t[j++],--O===0){for(F=0;F<R;F++)t[Z+F]=c[z+F];return}if(R===1){for(F=0;F<O;F++)t[Z+F]=t[j+F];t[Z+O]=c[z];return}for(var W=a,J,en,tn;;){J=0,en=0,tn=!1;do if(n(t[j],c[z])<0){if(t[Z++]=t[j++],en++,J=0,--O===0){tn=!0;break}}else if(t[Z++]=c[z++],J++,en=0,--R===1){tn=!0;break}while((J|en)<W);if(tn)break;do{if(J=gallopRight(t[j],c,z,R,0,n),J!==0){for(F=0;F<J;F++)t[Z+F]=c[z+F];if(Z+=J,z+=J,R-=J,R<=1){tn=!0;break}}if(t[Z++]=t[j++],--O===0){tn=!0;break}if(en=gallopLeft(c[z],t,j,O,0,n),en!==0){for(F=0;F<en;F++)t[Z+F]=t[j+F];if(Z+=en,j+=en,O-=en,O===0){tn=!0;break}}if(t[Z++]=c[z++],--R===1){tn=!0;break}W--}while(J>=DEFAULT_MIN_GALLOPING||en>=DEFAULT_MIN_GALLOPING);if(tn)break;W<0&&(W=0),W+=2}if(a=W,a<1&&(a=1),R===1){for(F=0;F<O;F++)t[Z+F]=t[j+F];t[Z+O]=c[z]}else{if(R===0)throw new Error;for(F=0;F<R;F++)t[Z+F]=c[z+F]}}function T(A,R,D,O){var F=0;for(F=0;F<O;F++)c[F]=t[D+F];var z=A+R-1,j=O-1,Z=D+O-1,W=0,J=0;if(t[Z--]=t[z--],--R===0){for(W=Z-(O-1),F=0;F<O;F++)t[W+F]=c[F];return}if(O===1){for(Z-=R,z-=R,J=Z+1,W=z+1,F=R-1;F>=0;F--)t[J+F]=t[W+F];t[Z]=c[j];return}for(var en=a;;){var tn=0,Ct=0,Q=!1;do if(n(c[j],t[z])<0){if(t[Z--]=t[z--],tn++,Ct=0,--R===0){Q=!0;break}}else if(t[Z--]=c[j--],Ct++,tn=0,--O===1){Q=!0;break}while((tn|Ct)<en);if(Q)break;do{if(tn=R-gallopRight(c[j],t,A,R,R-1,n),tn!==0){for(Z-=tn,z-=tn,R-=tn,J=Z+1,W=z+1,F=tn-1;F>=0;F--)t[J+F]=t[W+F];if(R===0){Q=!0;break}}if(t[Z--]=c[j--],--O===1){Q=!0;break}if(Ct=O-gallopLeft(t[z],c,0,O,O-1,n),Ct!==0){for(Z-=Ct,j-=Ct,O-=Ct,J=Z+1,W=j+1,F=0;F<Ct;F++)t[J+F]=c[W+F];if(O<=1){Q=!0;break}}if(t[Z--]=t[z--],--R===0){Q=!0;break}en--}while(tn>=DEFAULT_MIN_GALLOPING||Ct>=DEFAULT_MIN_GALLOPING);if(Q)break;en<0&&(en=0),en+=2}if(a=en,a<1&&(a=1),O===1){for(Z-=R,z-=R,J=Z+1,W=z+1,F=R-1;F>=0;F--)t[J+F]=t[W+F];t[Z]=c[j]}else{if(O===0)throw new Error;for(W=Z-(O-1),F=0;F<O;F++)t[W+F]=c[F]}}return{mergeRuns:d,forceMergeRuns:x,pushRun:p}}function sort$2(t,n,a,s){a||(a=0),s||(s=t.length);var l=s-a;if(!(l<2)){var u=0;if(l<DEFAULT_MIN_MERGE){u=makeAscendingRun(t,a,s,n),binaryInsertionSort(t,a,s,a+u,n);return}var c=TimSort(t,n),p=minRunLength(l);do{if(u=makeAscendingRun(t,a,s,n),u<p){var d=l;d>p&&(d=p),binaryInsertionSort(t,a,a+d,a+u,n),u=d}c.pushRun(a,u),c.mergeRuns(),l-=u,a+=u}while(l!==0);c.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(t,n){return t.zlevel===n.zlevel?t.z===n.z?t.z2-n.z2:t.z-n.z:t.zlevel-n.zlevel}var Storage=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return t.prototype.traverse=function(n,a){for(var s=0;s<this._roots.length;s++)this._roots[s].traverse(n,a)},t.prototype.getDisplayList=function(n,a){a=a||!1;var s=this._displayList;return(n||!s.length)&&this.updateDisplayList(a),s},t.prototype.updateDisplayList=function(n){this._displayListLen=0;for(var a=this._roots,s=this._displayList,l=0,u=a.length;l<u;l++)this._updateAndAddDisplayable(a[l],null,n);s.length=this._displayListLen,sort$2(s,shapeCompareFunc)},t.prototype._updateAndAddDisplayable=function(n,a,s){if(!(n.ignore&&!s)){n.beforeUpdate(),n.update(),n.afterUpdate();var l=n.getClipPath();if(n.ignoreClip)a=null;else if(l){a?a=a.slice():a=[];for(var u=l,c=n;u;)u.parent=c,u.updateTransform(),a.push(u),c=u,u=u.getClipPath()}if(n.childrenRef){for(var p=n.childrenRef(),d=0;d<p.length;d++){var x=p[d];n.__dirty&&(x.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(x,a,s)}n.__dirty=0}else{var _=n;a&&a.length?_.__clipPaths=a:_.__clipPaths&&_.__clipPaths.length>0&&(_.__clipPaths=[]),isNaN(_.z)&&(logInvalidZError(),_.z=0),isNaN(_.z2)&&(logInvalidZError(),_.z2=0),isNaN(_.zlevel)&&(logInvalidZError(),_.zlevel=0),this._displayList[this._displayListLen++]=_}var S=n.getDecalElement&&n.getDecalElement();S&&this._updateAndAddDisplayable(S,a,s);var T=n.getTextGuideLine();T&&this._updateAndAddDisplayable(T,a,s);var A=n.getTextContent();A&&this._updateAndAddDisplayable(A,a,s)}},t.prototype.addRoot=function(n){n.__zr&&n.__zr.storage===this||this._roots.push(n)},t.prototype.delRoot=function(n){if(n instanceof Array){for(var a=0,s=n.length;a<s;a++)this.delRoot(n[a]);return}var l=indexOf(this._roots,n);l>=0&&this._roots.splice(l,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}(),requestAnimationFrame$1;requestAnimationFrame$1=env.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};var easingFuncs={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var n,a=.1,s=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=s/4):n=s*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/s)))},elasticOut:function(t){var n,a=.1,s=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=s/4):n=s*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*t)*Math.sin((t-n)*(2*Math.PI)/s)+1)},elasticInOut:function(t){var n,a=.1,s=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=s/4):n=s*Math.asin(1/a)/(2*Math.PI),(t*=2)<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/s)):a*Math.pow(2,-10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/s)*.5+1)},backIn:function(t){var n=1.70158;return t*t*((n+1)*t-n)},backOut:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},backInOut:function(t){var n=2.5949095;return(t*=2)<1?.5*(t*t*((n+1)*t-n)):.5*((t-=2)*t*((n+1)*t+n)+2)},bounceIn:function(t){return 1-easingFuncs.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?easingFuncs.bounceIn(t*2)*.5:easingFuncs.bounceOut(t*2-1)*.5+.5}},mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(t){return t>-EPSILON$4&&t<EPSILON$4}function isNotAroundZero$1(t){return t>EPSILON$4||t<-EPSILON$4}function cubicAt(t,n,a,s,l){var u=1-l;return u*u*(u*t+3*l*n)+l*l*(l*s+3*u*a)}function cubicDerivativeAt(t,n,a,s,l){var u=1-l;return 3*(((n-t)*u+2*(a-n)*l)*u+(s-a)*l*l)}function cubicRootAt(t,n,a,s,l,u){var c=s+3*(n-a)-t,p=3*(a-n*2+t),d=3*(n-t),x=t-l,_=p*p-3*c*d,S=p*d-9*c*x,T=d*d-3*p*x,A=0;if(isAroundZero$1(_)&&isAroundZero$1(S))if(isAroundZero$1(p))u[0]=0;else{var R=-d/p;R>=0&&R<=1&&(u[A++]=R)}else{var D=S*S-4*_*T;if(isAroundZero$1(D)){var O=S/_,R=-p/c+O,F=-O/2;R>=0&&R<=1&&(u[A++]=R),F>=0&&F<=1&&(u[A++]=F)}else if(D>0){var z=mathSqrt$3(D),j=_*p+1.5*c*(-S+z),Z=_*p+1.5*c*(-S-z);j<0?j=-mathPow$2(-j,ONE_THIRD):j=mathPow$2(j,ONE_THIRD),Z<0?Z=-mathPow$2(-Z,ONE_THIRD):Z=mathPow$2(Z,ONE_THIRD);var R=(-p-(j+Z))/(3*c);R>=0&&R<=1&&(u[A++]=R)}else{var W=(2*_*p-3*c*S)/(2*mathSqrt$3(_*_*_)),J=Math.acos(W)/3,en=mathSqrt$3(_),tn=Math.cos(J),R=(-p-2*en*tn)/(3*c),F=(-p+en*(tn+THREE_SQRT*Math.sin(J)))/(3*c),Ct=(-p+en*(tn-THREE_SQRT*Math.sin(J)))/(3*c);R>=0&&R<=1&&(u[A++]=R),F>=0&&F<=1&&(u[A++]=F),Ct>=0&&Ct<=1&&(u[A++]=Ct)}}return A}function cubicExtrema(t,n,a,s,l){var u=6*a-12*n+6*t,c=9*n+3*s-3*t-9*a,p=3*n-3*t,d=0;if(isAroundZero$1(c)){if(isNotAroundZero$1(u)){var x=-p/u;x>=0&&x<=1&&(l[d++]=x)}}else{var _=u*u-4*c*p;if(isAroundZero$1(_))l[0]=-u/(2*c);else if(_>0){var S=mathSqrt$3(_),x=(-u+S)/(2*c),T=(-u-S)/(2*c);x>=0&&x<=1&&(l[d++]=x),T>=0&&T<=1&&(l[d++]=T)}}return d}function cubicSubdivide(t,n,a,s,l,u){var c=(n-t)*l+t,p=(a-n)*l+n,d=(s-a)*l+a,x=(p-c)*l+c,_=(d-p)*l+p,S=(_-x)*l+x;u[0]=t,u[1]=c,u[2]=x,u[3]=S,u[4]=S,u[5]=_,u[6]=d,u[7]=s}function cubicProjectPoint(t,n,a,s,l,u,c,p,d,x,_){var S,T=.005,A=1/0,R,D,O,F;_v0[0]=d,_v0[1]=x;for(var z=0;z<1;z+=.05)_v1[0]=cubicAt(t,a,l,c,z),_v1[1]=cubicAt(n,s,u,p,z),O=distSquare(_v0,_v1),O<A&&(S=z,A=O);A=1/0;for(var j=0;j<32&&!(T<EPSILON_NUMERIC);j++)R=S-T,D=S+T,_v1[0]=cubicAt(t,a,l,c,R),_v1[1]=cubicAt(n,s,u,p,R),O=distSquare(_v1,_v0),R>=0&&O<A?(S=R,A=O):(_v2[0]=cubicAt(t,a,l,c,D),_v2[1]=cubicAt(n,s,u,p,D),F=distSquare(_v2,_v0),D<=1&&F<A?(S=D,A=F):T*=.5);return _&&(_[0]=cubicAt(t,a,l,c,S),_[1]=cubicAt(n,s,u,p,S)),mathSqrt$3(A)}function cubicLength(t,n,a,s,l,u,c,p,d){for(var x=t,_=n,S=0,T=1/d,A=1;A<=d;A++){var R=A*T,D=cubicAt(t,a,l,c,R),O=cubicAt(n,s,u,p,R),F=D-x,z=O-_;S+=Math.sqrt(F*F+z*z),x=D,_=O}return S}function quadraticAt$1(t,n,a,s){var l=1-s;return l*(l*t+2*s*n)+s*s*a}function quadraticDerivativeAt(t,n,a,s){return 2*((1-s)*(n-t)+s*(a-n))}function quadraticRootAt(t,n,a,s,l){var u=t-2*n+a,c=2*(n-t),p=t-s,d=0;if(isAroundZero$1(u)){if(isNotAroundZero$1(c)){var x=-p/c;x>=0&&x<=1&&(l[d++]=x)}}else{var _=c*c-4*u*p;if(isAroundZero$1(_)){var x=-c/(2*u);x>=0&&x<=1&&(l[d++]=x)}else if(_>0){var S=mathSqrt$3(_),x=(-c+S)/(2*u),T=(-c-S)/(2*u);x>=0&&x<=1&&(l[d++]=x),T>=0&&T<=1&&(l[d++]=T)}}return d}function quadraticExtremum(t,n,a){var s=t+a-2*n;return s===0?.5:(t-n)/s}function quadraticSubdivide(t,n,a,s,l){var u=(n-t)*s+t,c=(a-n)*s+n,p=(c-u)*s+u;l[0]=t,l[1]=u,l[2]=p,l[3]=p,l[4]=c,l[5]=a}function quadraticProjectPoint(t,n,a,s,l,u,c,p,d){var x,_=.005,S=1/0;_v0[0]=c,_v0[1]=p;for(var T=0;T<1;T+=.05){_v1[0]=quadraticAt$1(t,a,l,T),_v1[1]=quadraticAt$1(n,s,u,T);var A=distSquare(_v0,_v1);A<S&&(x=T,S=A)}S=1/0;for(var R=0;R<32&&!(_<EPSILON_NUMERIC);R++){var D=x-_,O=x+_;_v1[0]=quadraticAt$1(t,a,l,D),_v1[1]=quadraticAt$1(n,s,u,D);var A=distSquare(_v1,_v0);if(D>=0&&A<S)x=D,S=A;else{_v2[0]=quadraticAt$1(t,a,l,O),_v2[1]=quadraticAt$1(n,s,u,O);var F=distSquare(_v2,_v0);O<=1&&F<S?(x=O,S=F):_*=.5}}return d&&(d[0]=quadraticAt$1(t,a,l,x),d[1]=quadraticAt$1(n,s,u,x)),mathSqrt$3(S)}function quadraticLength(t,n,a,s,l,u,c){for(var p=t,d=n,x=0,_=1/c,S=1;S<=c;S++){var T=S*_,A=quadraticAt$1(t,a,l,T),R=quadraticAt$1(n,s,u,T),D=A-p,O=R-d;x+=Math.sqrt(D*D+O*O),p=A,d=R}return x}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(t){var n=t&&regexp.exec(t);if(n){var a=n[1].split(","),s=+trim$1(a[0]),l=+trim$1(a[1]),u=+trim$1(a[2]),c=+trim$1(a[3]);if(isNaN(s+l+u+c))return;var p=[];return function(d){return d<=0?0:d>=1?1:cubicRootAt(0,s,u,1,d,p)&&cubicAt(0,l,c,1,p[0])}}}var Clip=function(){function t(n){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=n.life||1e3,this._delay=n.delay||0,this.loop=n.loop||!1,this.onframe=n.onframe||noop,this.ondestroy=n.ondestroy||noop,this.onrestart=n.onrestart||noop,n.easing&&this.setEasing(n.easing)}return t.prototype.step=function(n,a){if(this._inited||(this._startTime=n+this._delay,this._inited=!0),this._paused){this._pausedTime+=a;return}var s=this._life,l=n-this._startTime-this._pausedTime,u=l/s;u<0&&(u=0),u=Math.min(u,1);var c=this.easingFunc,p=c?c(u):u;if(this.onframe(p),u===1)if(this.loop){var d=l%s;this._startTime=n-d,this._pausedTime=0,this.onrestart()}else return!0;return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(n){this.easing=n,this.easingFunc=isFunction$1(n)?n:easingFuncs[n]||createCubicEasingFunc(n)},t}(),Entry=function(){function t(n){this.value=n}return t}(),LinkedList=function(){function t(){this._len=0}return t.prototype.insert=function(n){var a=new Entry(n);return this.insertEntry(a),a},t.prototype.insertEntry=function(n){this.head?(this.tail.next=n,n.prev=this.tail,n.next=null,this.tail=n):this.head=this.tail=n,this._len++},t.prototype.remove=function(n){var a=n.prev,s=n.next;a?a.next=s:this.head=s,s?s.prev=a:this.tail=a,n.next=n.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),LRU=function(){function t(n){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=n}return t.prototype.put=function(n,a){var s=this._list,l=this._map,u=null;if(l[n]==null){var c=s.len(),p=this._lastRemovedEntry;if(c>=this._maxSize&&c>0){var d=s.head;s.remove(d),delete l[d.key],u=d.value,this._lastRemovedEntry=d}p?p.value=a:p=new Entry(a),p.key=n,s.insertEntry(p),l[n]=p}return u},t.prototype.get=function(n){var a=this._map[n],s=this._list;if(a!=null)return a!==s.tail&&(s.remove(a),s.insertEntry(a)),a.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}(),kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(t){return t=Math.round(t),t<0?0:t>255?255:t}function clampCssAngle(t){return t=Math.round(t),t<0?0:t>360?360:t}function clampCssFloat(t){return t<0?0:t>1?1:t}function parseCssInt(t){var n=t;return n.length&&n.charAt(n.length-1)==="%"?clampCssByte(parseFloat(n)/100*255):clampCssByte(parseInt(n,10))}function parseCssFloat(t){var n=t;return n.length&&n.charAt(n.length-1)==="%"?clampCssFloat(parseFloat(n)/100):clampCssFloat(parseFloat(n))}function cssHueToRgb(t,n,a){return a<0?a+=1:a>1&&(a-=1),a*6<1?t+(n-t)*a*6:a*2<1?n:a*3<2?t+(n-t)*(2/3-a)*6:t}function lerpNumber(t,n,a){return t+(n-t)*a}function setRgba(t,n,a,s,l){return t[0]=n,t[1]=a,t[2]=s,t[3]=l,t}function copyRgba(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(t,n){lastRemovedArr&&copyRgba(lastRemovedArr,n),lastRemovedArr=colorCache.put(t,lastRemovedArr||n.slice())}function parse(t,n){if(t){n=n||[];var a=colorCache.get(t);if(a)return copyRgba(n,a);t=t+"";var s=t.replace(/ /g,"").toLowerCase();if(s in kCSSColorTable)return copyRgba(n,kCSSColorTable[s]),putToCache(t,n),n;var l=s.length;if(s.charAt(0)==="#"){if(l===4||l===5){var u=parseInt(s.slice(1,4),16);if(!(u>=0&&u<=4095)){setRgba(n,0,0,0,1);return}return setRgba(n,(u&3840)>>4|(u&3840)>>8,u&240|(u&240)>>4,u&15|(u&15)<<4,l===5?parseInt(s.slice(4),16)/15:1),putToCache(t,n),n}else if(l===7||l===9){var u=parseInt(s.slice(1,7),16);if(!(u>=0&&u<=16777215)){setRgba(n,0,0,0,1);return}return setRgba(n,(u&16711680)>>16,(u&65280)>>8,u&255,l===9?parseInt(s.slice(7),16)/255:1),putToCache(t,n),n}return}var c=s.indexOf("("),p=s.indexOf(")");if(c!==-1&&p+1===l){var d=s.substr(0,c),x=s.substr(c+1,p-(c+1)).split(","),_=1;switch(d){case"rgba":if(x.length!==4)return x.length===3?setRgba(n,+x[0],+x[1],+x[2],1):setRgba(n,0,0,0,1);_=parseCssFloat(x.pop());case"rgb":if(x.length>=3)return setRgba(n,parseCssInt(x[0]),parseCssInt(x[1]),parseCssInt(x[2]),x.length===3?_:parseCssFloat(x[3])),putToCache(t,n),n;setRgba(n,0,0,0,1);return;case"hsla":if(x.length!==4){setRgba(n,0,0,0,1);return}return x[3]=parseCssFloat(x[3]),hsla2rgba(x,n),putToCache(t,n),n;case"hsl":if(x.length!==3){setRgba(n,0,0,0,1);return}return hsla2rgba(x,n),putToCache(t,n),n;default:return}}setRgba(n,0,0,0,1)}}function hsla2rgba(t,n){var a=(parseFloat(t[0])%360+360)%360/360,s=parseCssFloat(t[1]),l=parseCssFloat(t[2]),u=l<=.5?l*(s+1):l+s-l*s,c=l*2-u;return n=n||[],setRgba(n,clampCssByte(cssHueToRgb(c,u,a+1/3)*255),clampCssByte(cssHueToRgb(c,u,a)*255),clampCssByte(cssHueToRgb(c,u,a-1/3)*255),1),t.length===4&&(n[3]=t[3]),n}function rgba2hsla(t){if(t){var n=t[0]/255,a=t[1]/255,s=t[2]/255,l=Math.min(n,a,s),u=Math.max(n,a,s),c=u-l,p=(u+l)/2,d,x;if(c===0)d=0,x=0;else{p<.5?x=c/(u+l):x=c/(2-u-l);var _=((u-n)/6+c/2)/c,S=((u-a)/6+c/2)/c,T=((u-s)/6+c/2)/c;n===u?d=T-S:a===u?d=1/3+_-T:s===u&&(d=2/3+S-_),d<0&&(d+=1),d>1&&(d-=1)}var A=[d*360,x,p];return t[3]!=null&&A.push(t[3]),A}}function lift(t,n){var a=parse(t);if(a){for(var s=0;s<3;s++)n<0?a[s]=a[s]*(1-n)|0:a[s]=(255-a[s])*n+a[s]|0,a[s]>255?a[s]=255:a[s]<0&&(a[s]=0);return stringify(a,a.length===4?"rgba":"rgb")}}function toHex(t){var n=parse(t);if(n)return((1<<24)+(n[0]<<16)+(n[1]<<8)+ +n[2]).toString(16).slice(1)}function fastLerp(t,n,a){if(!(!(n&&n.length)||!(t>=0&&t<=1))){a=a||[];var s=t*(n.length-1),l=Math.floor(s),u=Math.ceil(s),c=n[l],p=n[u],d=s-l;return a[0]=clampCssByte(lerpNumber(c[0],p[0],d)),a[1]=clampCssByte(lerpNumber(c[1],p[1],d)),a[2]=clampCssByte(lerpNumber(c[2],p[2],d)),a[3]=clampCssFloat(lerpNumber(c[3],p[3],d)),a}}var fastMapToColor=fastLerp;function lerp(t,n,a){if(!(!(n&&n.length)||!(t>=0&&t<=1))){var s=t*(n.length-1),l=Math.floor(s),u=Math.ceil(s),c=parse(n[l]),p=parse(n[u]),d=s-l,x=stringify([clampCssByte(lerpNumber(c[0],p[0],d)),clampCssByte(lerpNumber(c[1],p[1],d)),clampCssByte(lerpNumber(c[2],p[2],d)),clampCssFloat(lerpNumber(c[3],p[3],d))],"rgba");return a?{color:x,leftIndex:l,rightIndex:u,value:s}:x}}var mapToColor=lerp;function modifyHSL(t,n,a,s){var l=parse(t);if(t)return l=rgba2hsla(l),n!=null&&(l[0]=clampCssAngle(n)),a!=null&&(l[1]=parseCssFloat(a)),s!=null&&(l[2]=parseCssFloat(s)),stringify(hsla2rgba(l),"rgba")}function modifyAlpha(t,n){var a=parse(t);if(a&&n!=null)return a[3]=clampCssFloat(n),stringify(a,"rgba")}function stringify(t,n){if(!(!t||!t.length)){var a=t[0]+","+t[1]+","+t[2];return(n==="rgba"||n==="hsva"||n==="hsla")&&(a+=","+t[3]),n+"("+a+")"}}function lum(t,n){var a=parse(t);return a?(.299*a[0]+.587*a[1]+.114*a[2])*a[3]/255+(1-a[3])*n:0}function random(){return stringify([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}var liftedColorCache=new LRU(100);function liftColor(t){if(isString$1(t)){var n=liftedColorCache.get(t);return n||(n=lift(t,-.1),liftedColorCache.put(t,n)),n}else if(isGradientObject(t)){var a=extend({},t);return a.colorStops=map$1(t.colorStops,function(s){return{offset:s.offset,color:lift(s.color,-.1)}}),a}return t}const color=Object.freeze(Object.defineProperty({__proto__:null,fastLerp,fastMapToColor,lerp,lift,liftColor,lum,mapToColor,modifyAlpha,modifyHSL,parse,random,stringify,toHex},Symbol.toStringTag,{value:"Module"}));var mathRound$1=Math.round;function normalizeColor(t){var n;if(!t||t==="transparent")t="none";else if(typeof t=="string"&&t.indexOf("rgba")>-1){var a=parse(t);a&&(t="rgb("+a[0]+","+a[1]+","+a[2]+")",n=a[3])}return{color:t,opacity:n??1}}var EPSILON$3=1e-4;function isAroundZero(t){return t<EPSILON$3&&t>-EPSILON$3}function round3(t){return mathRound$1(t*1e3)/1e3}function round4(t){return mathRound$1(t*1e4)/1e4}function getMatrixStr(t){return"matrix("+round3(t[0])+","+round3(t[1])+","+round3(t[2])+","+round3(t[3])+","+round4(t[4])+","+round4(t[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(t,n,a){return a==="top"?t+=n/2:a==="bottom"&&(t-=n/2),t}function hasShadow(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}function getShadowKey(t){var n=t.style,a=t.getGlobalScale();return[n.shadowColor,(n.shadowBlur||0).toFixed(2),(n.shadowOffsetX||0).toFixed(2),(n.shadowOffsetY||0).toFixed(2),a[0],a[1]].join(",")}function isImagePattern(t){return t&&!!t.image}function isSVGPattern(t){return t&&!!t.svgElement}function isPattern(t){return isImagePattern(t)||isSVGPattern(t)}function isLinearGradient(t){return t.type==="linear"}function isRadialGradient(t){return t.type==="radial"}function isGradient(t){return t&&(t.type==="linear"||t.type==="radial")}function getIdURL(t){return"url(#"+t+")"}function getPathPrecision(t){var n=t.getGlobalScale(),a=Math.max(n[0],n[1]);return Math.max(Math.ceil(Math.log(a)/Math.log(10)),1)}function getSRTTransformString(t){var n=t.x||0,a=t.y||0,s=(t.rotation||0)*RADIAN_TO_DEGREE,l=retrieve2(t.scaleX,1),u=retrieve2(t.scaleY,1),c=t.skewX||0,p=t.skewY||0,d=[];return(n||a)&&d.push("translate("+n+"px,"+a+"px)"),s&&d.push("rotate("+s+")"),(l!==1||u!==1)&&d.push("scale("+l+","+u+")"),(c||p)&&d.push("skew("+mathRound$1(c*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(p*RADIAN_TO_DEGREE)+"deg)"),d.join(" ")}var encodeBase64=function(){return env.hasGlobalWindow&&isFunction$1(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:typeof Buffer<"u"?function(t){return Buffer.from(t).toString("base64")}:function(t){return null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(t,n,a){return(n-t)*a+t}function interpolate1DArray(t,n,a,s){for(var l=n.length,u=0;u<l;u++)t[u]=interpolateNumber$1(n[u],a[u],s);return t}function interpolate2DArray(t,n,a,s){for(var l=n.length,u=l&&n[0].length,c=0;c<l;c++){t[c]||(t[c]=[]);for(var p=0;p<u;p++)t[c][p]=interpolateNumber$1(n[c][p],a[c][p],s)}return t}function add1DArray(t,n,a,s){for(var l=n.length,u=0;u<l;u++)t[u]=n[u]+a[u]*s;return t}function add2DArray(t,n,a,s){for(var l=n.length,u=l&&n[0].length,c=0;c<l;c++){t[c]||(t[c]=[]);for(var p=0;p<u;p++)t[c][p]=n[c][p]+a[c][p]*s}return t}function fillColorStops(t,n){for(var a=t.length,s=n.length,l=a>s?n:t,u=Math.min(a,s),c=l[u-1]||{color:[0,0,0,0],offset:0},p=u;p<Math.max(a,s);p++)l.push({offset:c.offset,color:c.color.slice()})}function fillArray(t,n,a){var s=t,l=n;if(!(!s.push||!l.push)){var u=s.length,c=l.length;if(u!==c){var p=u>c;if(p)s.length=c;else for(var d=u;d<c;d++)s.push(a===1?l[d]:arraySlice.call(l[d]))}for(var x=s[0]&&s[0].length,d=0;d<s.length;d++)if(a===1)isNaN(s[d])&&(s[d]=l[d]);else for(var _=0;_<x;_++)isNaN(s[d][_])&&(s[d][_]=l[d][_])}}function cloneValue(t){if(isArrayLike(t)){var n=t.length;if(isArrayLike(t[0])){for(var a=[],s=0;s<n;s++)a.push(arraySlice.call(t[s]));return a}return arraySlice.call(t)}return t}function rgba2String(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=t[3]==null?1:t[3],"rgba("+t.join(",")+")"}function guessArrayDim(t){return isArrayLike(t&&t[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(t){return t===VALUE_TYPE_LINEAR_GRADIENT||t===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(t){return t===VALUE_TYPE_1D_ARRAY||t===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function t(n){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=n}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(n,a,s){this._needsSort=!0;var l=this.keyframes,u=l.length,c=!1,p=VALUE_TYPE_UNKOWN,d=a;if(isArrayLike(a)){var x=guessArrayDim(a);p=x,(x===1&&!isNumber(a[0])||x===2&&!isNumber(a[0][0]))&&(c=!0)}else if(isNumber(a)&&!eqNaN(a))p=VALUE_TYPE_NUMBER;else if(isString$1(a))if(!isNaN(+a))p=VALUE_TYPE_NUMBER;else{var _=parse(a);_&&(d=_,p=VALUE_TYPE_COLOR)}else if(isGradientObject(a)){var S=extend({},d);S.colorStops=map$1(a.colorStops,function(A){return{offset:A.offset,color:parse(A.color)}}),isLinearGradient(a)?p=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(a)&&(p=VALUE_TYPE_RADIAL_GRADIENT),d=S}u===0?this.valType=p:(p!==this.valType||p===VALUE_TYPE_UNKOWN)&&(c=!0),this.discrete=this.discrete||c;var T={time:n,value:d,rawValue:a,percent:0};return s&&(T.easing=s,T.easingFunc=isFunction$1(s)?s:easingFuncs[s]||createCubicEasingFunc(s)),l.push(T),T},t.prototype.prepare=function(n,a){var s=this.keyframes;this._needsSort&&s.sort(function(D,O){return D.time-O.time});for(var l=this.valType,u=s.length,c=s[u-1],p=this.discrete,d=isArrayValueType(l),x=isGradientValueType(l),_=0;_<u;_++){var S=s[_],T=S.value,A=c.value;S.percent=S.time/n,p||(d&&_!==u-1?fillArray(T,A,l):x&&fillColorStops(T.colorStops,A.colorStops))}if(!p&&l!==VALUE_TYPE_RADIAL_GRADIENT&&a&&this.needsAnimate()&&a.needsAnimate()&&l===a.valType&&!a._finished){this._additiveTrack=a;for(var R=s[0].value,_=0;_<u;_++)l===VALUE_TYPE_NUMBER?s[_].additiveValue=s[_].value-R:l===VALUE_TYPE_COLOR?s[_].additiveValue=add1DArray([],s[_].value,R,-1):isArrayValueType(l)&&(s[_].additiveValue=l===VALUE_TYPE_1D_ARRAY?add1DArray([],s[_].value,R,-1):add2DArray([],s[_].value,R,-1))}},t.prototype.step=function(n,a){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var s=this._additiveTrack!=null,l=s?"additiveValue":"value",u=this.valType,c=this.keyframes,p=c.length,d=this.propName,x=u===VALUE_TYPE_COLOR,_,S=this._lastFr,T=Math.min,A,R;if(p===1)A=R=c[0];else{if(a<0)_=0;else if(a<this._lastFrP){var D=T(S+1,p-1);for(_=D;_>=0&&!(c[_].percent<=a);_--);_=T(_,p-2)}else{for(_=S;_<p&&!(c[_].percent>a);_++);_=T(_-1,p-2)}R=c[_+1],A=c[_]}if(A&&R){this._lastFr=_,this._lastFrP=a;var O=R.percent-A.percent,F=O===0?1:T((a-A.percent)/O,1);R.easingFunc&&(F=R.easingFunc(F));var z=s?this._additiveValue:x?tmpRgba:n[d];if((isArrayValueType(u)||x)&&!z&&(z=this._additiveValue=[]),this.discrete)n[d]=F<1?A.rawValue:R.rawValue;else if(isArrayValueType(u))u===VALUE_TYPE_1D_ARRAY?interpolate1DArray(z,A[l],R[l],F):interpolate2DArray(z,A[l],R[l],F);else if(isGradientValueType(u)){var j=A[l],Z=R[l],W=u===VALUE_TYPE_LINEAR_GRADIENT;n[d]={type:W?"linear":"radial",x:interpolateNumber$1(j.x,Z.x,F),y:interpolateNumber$1(j.y,Z.y,F),colorStops:map$1(j.colorStops,function(en,tn){var Ct=Z.colorStops[tn];return{offset:interpolateNumber$1(en.offset,Ct.offset,F),color:rgba2String(interpolate1DArray([],en.color,Ct.color,F))}}),global:Z.global},W?(n[d].x2=interpolateNumber$1(j.x2,Z.x2,F),n[d].y2=interpolateNumber$1(j.y2,Z.y2,F)):n[d].r=interpolateNumber$1(j.r,Z.r,F)}else if(x)interpolate1DArray(z,A[l],R[l],F),s||(n[d]=rgba2String(z));else{var J=interpolateNumber$1(A[l],R[l],F);s?this._additiveValue=J:n[d]=J}s&&this._addToTarget(n)}}},t.prototype._addToTarget=function(n){var a=this.valType,s=this.propName,l=this._additiveValue;a===VALUE_TYPE_NUMBER?n[s]=n[s]+l:a===VALUE_TYPE_COLOR?(parse(n[s],tmpRgba),add1DArray(tmpRgba,tmpRgba,l,1),n[s]=rgba2String(tmpRgba)):a===VALUE_TYPE_1D_ARRAY?add1DArray(n[s],n[s],l,1):a===VALUE_TYPE_2D_ARRAY&&add2DArray(n[s],n[s],l,1)},t}(),Animator=function(){function t(n,a,s,l){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=n,this._loop=a,a&&l){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=l,this._allowDiscrete=s}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(n){this._target=n},t.prototype.when=function(n,a,s){return this.whenWithKeys(n,a,keys(a),s)},t.prototype.whenWithKeys=function(n,a,s,l){for(var u=this._tracks,c=0;c<s.length;c++){var p=s[c],d=u[p];if(!d){d=u[p]=new Track(p);var x=void 0,_=this._getAdditiveTrack(p);if(_){var S=_.keyframes,T=S[S.length-1];x=T&&T.value,_.valType===VALUE_TYPE_COLOR&&x&&(x=rgba2String(x))}else x=this._target[p];if(x==null)continue;n>0&&d.addKeyframe(0,cloneValue(x),l),this._trackKeys.push(p)}d.addKeyframe(n,cloneValue(a[p]),l)}return this._maxTime=Math.max(this._maxTime,n),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(n){return this._maxTime=n,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var n=this._doneCbs;if(n)for(var a=n.length,s=0;s<a;s++)n[s].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var n=this.animation,a=this._abortedCbs;if(n&&n.removeClip(this._clip),this._clip=null,a)for(var s=0;s<a.length;s++)a[s].call(this)},t.prototype._setTracksFinished=function(){for(var n=this._tracks,a=this._trackKeys,s=0;s<a.length;s++)n[a[s]].setFinished()},t.prototype._getAdditiveTrack=function(n){var a,s=this._additiveAnimators;if(s)for(var l=0;l<s.length;l++){var u=s[l].getTrack(n);u&&(a=u)}return a},t.prototype.start=function(n){if(!(this._started>0)){this._started=1;for(var a=this,s=[],l=this._maxTime||0,u=0;u<this._trackKeys.length;u++){var c=this._trackKeys[u],p=this._tracks[c],d=this._getAdditiveTrack(c),x=p.keyframes,_=x.length;if(p.prepare(l,d),p.needsAnimate())if(!this._allowDiscrete&&p.discrete){var S=x[_-1];S&&(a._target[p.propName]=S.rawValue),p.setFinished()}else s.push(p)}if(s.length||this._force){var T=new Clip({life:l,loop:this._loop,delay:this._delay||0,onframe:function(A){a._started=2;var R=a._additiveAnimators;if(R){for(var D=!1,O=0;O<R.length;O++)if(R[O]._clip){D=!0;break}D||(a._additiveAnimators=null)}for(var O=0;O<s.length;O++)s[O].step(a._target,A);var F=a._onframeCbs;if(F)for(var O=0;O<F.length;O++)F[O](a._target,A)},ondestroy:function(){a._doneCallback()}});this._clip=T,this.animation&&this.animation.addClip(T),n&&T.setEasing(n)}else this._doneCallback();return this}},t.prototype.stop=function(n){if(this._clip){var a=this._clip;n&&a.onframe(1),this._abortedCallback()}},t.prototype.delay=function(n){return this._delay=n,this},t.prototype.during=function(n){return n&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(n)),this},t.prototype.done=function(n){return n&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(n)),this},t.prototype.aborted=function(n){return n&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(n)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(n){return this._tracks[n]},t.prototype.getTracks=function(){var n=this;return map$1(this._trackKeys,function(a){return n._tracks[a]})},t.prototype.stopTracks=function(n,a){if(!n.length||!this._clip)return!0;for(var s=this._tracks,l=this._trackKeys,u=0;u<n.length;u++){var c=s[n[u]];c&&!c.isFinished()&&(a?c.step(this._target,1):this._started===1&&c.step(this._target,0),c.setFinished())}for(var p=!0,u=0;u<l.length;u++)if(!s[l[u]].isFinished()){p=!1;break}return p&&this._abortedCallback(),p},t.prototype.saveTo=function(n,a,s){if(n){a=a||this._trackKeys;for(var l=0;l<a.length;l++){var u=a[l],c=this._tracks[u];if(!(!c||c.isFinished())){var p=c.keyframes,d=p[s?0:p.length-1];d&&(n[u]=cloneValue(d.rawValue))}}}},t.prototype.__changeFinalValue=function(n,a){a=a||keys(n);for(var s=0;s<a.length;s++){var l=a[s],u=this._tracks[l];if(u){var c=u.keyframes;if(c.length>1){var p=c.pop();u.addKeyframe(p.time,n[l]),u.prepare(this._maxTime,u.getAdditiveTrack())}}}},t}();function getTime(){return new Date().getTime()}var Animation=function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s._running=!1,s._time=0,s._pausedTime=0,s._pauseStart=0,s._paused=!1,a=a||{},s.stage=a.stage||{},s}return n.prototype.addClip=function(a){a.animation&&this.removeClip(a),this._head?(this._tail.next=a,a.prev=this._tail,a.next=null,this._tail=a):this._head=this._tail=a,a.animation=this},n.prototype.addAnimator=function(a){a.animation=this;var s=a.getClip();s&&this.addClip(s)},n.prototype.removeClip=function(a){if(a.animation){var s=a.prev,l=a.next;s?s.next=l:this._head=l,l?l.prev=s:this._tail=s,a.next=a.prev=a.animation=null}},n.prototype.removeAnimator=function(a){var s=a.getClip();s&&this.removeClip(s),a.animation=null},n.prototype.update=function(a){for(var s=getTime()-this._pausedTime,l=s-this._time,u=this._head;u;){var c=u.next,p=u.step(s,l);p&&(u.ondestroy(),this.removeClip(u)),u=c}this._time=s,a||(this.trigger("frame",l),this.stage.update&&this.stage.update())},n.prototype._startLoop=function(){var a=this;this._running=!0;function s(){a._running&&(requestAnimationFrame$1(s),!a._paused&&a.update())}requestAnimationFrame$1(s)},n.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},n.prototype.stop=function(){this._running=!1},n.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},n.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},n.prototype.clear=function(){for(var a=this._head;a;){var s=a.next;a.prev=a.next=a.animation=null,a=s}this._head=this._tail=null},n.prototype.isFinished=function(){return this._head==null},n.prototype.animate=function(a,s){s=s||{},this.start();var l=new Animator(a,s.loop);return this.addAnimator(l),l},n}(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],n=["touchstart","touchend","touchmove"],a={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},s=map$1(t,function(l){var u=l.replace("mouse","pointer");return a.hasOwnProperty(u)?u:l});return{mouse:t,touch:n,pointer:s}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(t){var n=t.pointerType;return n==="pen"||n==="touch"}function setTouchTimer(t){t.touching=!0,t.touchTimer!=null&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function markTouch(t){t&&(t.zrByTouch=!0)}function normalizeGlobalEvent(t,n){return normalizeEvent(t.dom,new FakeGlobalEvent(t,n),!0)}function isLocalEl(t,n){for(var a=n,s=!1;a&&a.nodeType!==9&&!(s=a.domBelongToZr||a!==n&&a===t.painterRoot);)a=a.parentNode;return s}var FakeGlobalEvent=function(){function t(n,a){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=a.type,this.target=this.currentTarget=n.dom,this.pointerType=a.pointerType,this.clientX=a.clientX,this.clientY=a.clientY}return t}(),localDOMHandlers={mousedown:function(t){t=normalizeEvent(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=normalizeEvent(this.dom,t);var n=this.__mayPointerCapture;n&&(t.zrX!==n[0]||t.zrY!==n[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=normalizeEvent(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=normalizeEvent(this.dom,t);var n=t.toElement||t.relatedTarget;isLocalEl(this,n)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){wheelEventSupported=!0,t=normalizeEvent(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){wheelEventSupported||(t=normalizeEvent(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),localDOMHandlers.mousemove.call(this,t),localDOMHandlers.mousedown.call(this,t)},touchmove:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.handler.processGesture(t,"change"),localDOMHandlers.mousemove.call(this,t)},touchend:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.handler.processGesture(t,"end"),localDOMHandlers.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,t)},pointerdown:function(t){localDOMHandlers.mousedown.call(this,t)},pointermove:function(t){isPointerFromTouch(t)||localDOMHandlers.mousemove.call(this,t)},pointerup:function(t){localDOMHandlers.mouseup.call(this,t)},pointerout:function(t){isPointerFromTouch(t)||localDOMHandlers.mouseout.call(this,t)}};each$f(["click","dblclick","contextmenu"],function(t){localDOMHandlers[t]=function(n){n=normalizeEvent(this.dom,n),this.trigger(t,n)}});var globalDOMHandlers={pointermove:function(t){isPointerFromTouch(t)||globalDOMHandlers.mousemove.call(this,t)},pointerup:function(t){globalDOMHandlers.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var n=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),n&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function mountLocalDOMEventListeners(t,n){var a=n.domHandlers;env.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(s){mountSingleDOMEventListener(n,s,function(l){a[s].call(t,l)})}):(env.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(s){mountSingleDOMEventListener(n,s,function(l){a[s].call(t,l),setTouchTimer(n)})}),each$f(localNativeListenerNames.mouse,function(s){mountSingleDOMEventListener(n,s,function(l){l=getNativeEvent(l),n.touching||a[s].call(t,l)})}))}function mountGlobalDOMEventListeners(t,n){env.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,a):env.touchEventsSupported||each$f(globalNativeListenerNames.mouse,a);function a(s){function l(u){u=getNativeEvent(u),isLocalEl(t,u.target)||(u=normalizeGlobalEvent(t,u),n.domHandlers[s].call(t,u))}mountSingleDOMEventListener(n,s,l,{capture:!0})}}function mountSingleDOMEventListener(t,n,a,s){t.mounted[n]=a,t.listenerOpts[n]=s,addEventListener(t.domTarget,n,a,s)}function unmountDOMEventListeners(t){var n=t.mounted;for(var a in n)n.hasOwnProperty(a)&&removeEventListener(t.domTarget,a,n[a],t.listenerOpts[a]);t.mounted={}}var DOMHandlerScope=function(){function t(n,a){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=n,this.domHandlers=a}return t}(),HandlerDomProxy=function(t){__extends(n,t);function n(a,s){var l=t.call(this)||this;return l.__pointerCapturing=!1,l.dom=a,l.painterRoot=s,l._localHandlerScope=new DOMHandlerScope(a,localDOMHandlers),globalEventSupported&&(l._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(l,l._localHandlerScope),l}return n.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},n.prototype.setCursor=function(a){this.dom.style&&(this.dom.style.cursor=a||"default")},n.prototype.__togglePointerCapture=function(a){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+a){this.__pointerCapturing=a;var s=this._globalHandlerScope;a?mountGlobalDOMEventListeners(this,s):unmountDOMEventListeners(s)}},n}(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(t){return t>EPSILON$2||t<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=function(){function t(){}return t.prototype.getLocalTransform=function(n){return t.getLocalTransform(this,n)},t.prototype.setPosition=function(n){this.x=n[0],this.y=n[1]},t.prototype.setScale=function(n){this.scaleX=n[0],this.scaleY=n[1]},t.prototype.setSkew=function(n){this.skewX=n[0],this.skewY=n[1]},t.prototype.setOrigin=function(n){this.originX=n[0],this.originY=n[1]},t.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},t.prototype.updateTransform=function(){var n=this.parent&&this.parent.transform,a=this.needLocalTransform(),s=this.transform;if(!(a||n)){s&&(mIdentity(s),this.invTransform=null);return}s=s||create$1(),a?this.getLocalTransform(s):mIdentity(s),n&&(a?mul(s,n,s):copy(s,n)),this.transform=s,this._resolveGlobalScaleRatio(s)},t.prototype._resolveGlobalScaleRatio=function(n){var a=this.globalScaleRatio;if(a!=null&&a!==1){this.getGlobalScale(scaleTmp);var s=scaleTmp[0]<0?-1:1,l=scaleTmp[1]<0?-1:1,u=((scaleTmp[0]-s)*a+s)/scaleTmp[0]||0,c=((scaleTmp[1]-l)*a+l)/scaleTmp[1]||0;n[0]*=u,n[1]*=u,n[2]*=c,n[3]*=c}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,n)},t.prototype.getComputedTransform=function(){for(var n=this,a=[];n;)a.push(n),n=n.parent;for(;n=a.pop();)n.updateTransform();return this.transform},t.prototype.setLocalTransform=function(n){if(n){var a=n[0]*n[0]+n[1]*n[1],s=n[2]*n[2]+n[3]*n[3],l=Math.atan2(n[1],n[0]),u=Math.PI/2+l-Math.atan2(n[3],n[2]);s=Math.sqrt(s)*Math.cos(u),a=Math.sqrt(a),this.skewX=u,this.skewY=0,this.rotation=-l,this.x=+n[4],this.y=+n[5],this.scaleX=a,this.scaleY=s,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var n=this.parent,a=this.transform;n&&n.transform&&(n.invTransform=n.invTransform||create$1(),mul(tmpTransform,n.invTransform,a),a=tmpTransform);var s=this.originX,l=this.originY;(s||l)&&(originTransform[4]=s,originTransform[5]=l,mul(tmpTransform,a,originTransform),tmpTransform[4]-=s,tmpTransform[5]-=l,a=tmpTransform),this.setLocalTransform(a)}},t.prototype.getGlobalScale=function(n){var a=this.transform;return n=n||[],a?(n[0]=Math.sqrt(a[0]*a[0]+a[1]*a[1]),n[1]=Math.sqrt(a[2]*a[2]+a[3]*a[3]),a[0]<0&&(n[0]=-n[0]),a[3]<0&&(n[1]=-n[1]),n):(n[0]=1,n[1]=1,n)},t.prototype.transformCoordToLocal=function(n,a){var s=[n,a],l=this.invTransform;return l&&applyTransform$1(s,s,l),s},t.prototype.transformCoordToGlobal=function(n,a){var s=[n,a],l=this.transform;return l&&applyTransform$1(s,s,l),s},t.prototype.getLineScale=function(){var n=this.transform;return n&&abs(n[0]-1)>1e-10&&abs(n[3]-1)>1e-10?Math.sqrt(abs(n[0]*n[3]-n[2]*n[1])):1},t.prototype.copyTransform=function(n){copyTransform(this,n)},t.getLocalTransform=function(n,a){a=a||[];var s=n.originX||0,l=n.originY||0,u=n.scaleX,c=n.scaleY,p=n.anchorX,d=n.anchorY,x=n.rotation||0,_=n.x,S=n.y,T=n.skewX?Math.tan(n.skewX):0,A=n.skewY?Math.tan(-n.skewY):0;if(s||l||p||d){var R=s+p,D=l+d;a[4]=-R*u-T*D*c,a[5]=-D*c-A*R*u}else a[4]=a[5]=0;return a[0]=u,a[3]=c,a[1]=A*u,a[2]=T*c,x&&rotate(a,a,x),a[4]+=s+_,a[5]+=l+S,a},t.initDefaultProps=function(){var n=t.prototype;n.scaleX=n.scaleY=n.globalScaleRatio=1,n.x=n.y=n.originX=n.originY=n.skewX=n.skewY=n.rotation=n.anchorX=n.anchorY=0}(),t}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(t,n){for(var a=0;a<TRANSFORMABLE_PROPS.length;a++){var s=TRANSFORMABLE_PROPS[a];t[s]=n[s]}}var textWidthCache={};function getWidth(t,n){n=n||DEFAULT_FONT;var a=textWidthCache[n];a||(a=textWidthCache[n]=new LRU(500));var s=a.get(t);return s==null&&(s=platformApi.measureText(t,n).width,a.put(t,s)),s}function innerGetBoundingRect(t,n,a,s){var l=getWidth(t,n),u=getLineHeight(n),c=adjustTextX(0,l,a),p=adjustTextY(0,u,s),d=new BoundingRect(c,p,l,u);return d}function getBoundingRect(t,n,a,s){var l=((t||"")+"").split(`
`),u=l.length;if(u===1)return innerGetBoundingRect(l[0],n,a,s);for(var c=new BoundingRect(0,0,0,0),p=0;p<l.length;p++){var d=innerGetBoundingRect(l[p],n,a,s);p===0?c.copy(d):c.union(d)}return c}function adjustTextX(t,n,a){return a==="right"?t-=n:a==="center"&&(t-=n/2),t}function adjustTextY(t,n,a){return a==="middle"?t-=n/2:a==="bottom"&&(t-=n),t}function getLineHeight(t){return getWidth("",t)}function parsePercent$1(t,n){return typeof t=="string"?t.lastIndexOf("%")>=0?parseFloat(t)/100*n:parseFloat(t):t}function calculateTextPosition(t,n,a){var s=n.position||"inside",l=n.distance!=null?n.distance:5,u=a.height,c=a.width,p=u/2,d=a.x,x=a.y,_="left",S="top";if(s instanceof Array)d+=parsePercent$1(s[0],a.width),x+=parsePercent$1(s[1],a.height),_=null,S=null;else switch(s){case"left":d-=l,x+=p,_="right",S="middle";break;case"right":d+=l+c,x+=p,S="middle";break;case"top":d+=c/2,x-=l,_="center",S="bottom";break;case"bottom":d+=c/2,x+=u+l,_="center";break;case"inside":d+=c/2,x+=p,_="center",S="middle";break;case"insideLeft":d+=l,x+=p,S="middle";break;case"insideRight":d+=c-l,x+=p,_="right",S="middle";break;case"insideTop":d+=c/2,x+=l,_="center";break;case"insideBottom":d+=c/2,x+=u-l,_="center",S="bottom";break;case"insideTopLeft":d+=l,x+=l;break;case"insideTopRight":d+=c-l,x+=l,_="right";break;case"insideBottomLeft":d+=l,x+=u-l,S="bottom";break;case"insideBottomRight":d+=c-l,x+=u-l,_="right",S="bottom";break}return t=t||{},t.x=d,t.y=x,t.align=_,t.verticalAlign=S,t}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(t,n){return t[n]=!0,t},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),Element$1=function(){function t(n){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(n)}return t.prototype._init=function(n){this.attr(n)},t.prototype.drift=function(n,a,s){switch(this.draggable){case"horizontal":a=0;break;case"vertical":n=0;break}var l=this.transform;l||(l=this.transform=[1,0,0,1,0,0]),l[4]+=n,l[5]+=a,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(n){var a=this._textContent;if(a&&(!a.ignore||n)){this.textConfig||(this.textConfig={});var s=this.textConfig,l=s.local,u=a.innerTransformable,c=void 0,p=void 0,d=!1;u.parent=l?this:null;var x=!1;if(u.copyTransform(a),s.position!=null){var _=tmpBoundingRect;s.layoutRect?_.copy(s.layoutRect):_.copy(this.getBoundingRect()),l||_.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,s,_):calculateTextPosition(tmpTextPosCalcRes,s,_),u.x=tmpTextPosCalcRes.x,u.y=tmpTextPosCalcRes.y,c=tmpTextPosCalcRes.align,p=tmpTextPosCalcRes.verticalAlign;var S=s.origin;if(S&&s.rotation!=null){var T=void 0,A=void 0;S==="center"?(T=_.width*.5,A=_.height*.5):(T=parsePercent$1(S[0],_.width),A=parsePercent$1(S[1],_.height)),x=!0,u.originX=-u.x+T+(l?0:_.x),u.originY=-u.y+A+(l?0:_.y)}}s.rotation!=null&&(u.rotation=s.rotation);var R=s.offset;R&&(u.x+=R[0],u.y+=R[1],x||(u.originX=-R[0],u.originY=-R[1]));var D=s.inside==null?typeof s.position=="string"&&s.position.indexOf("inside")>=0:s.inside,O=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),F=void 0,z=void 0,j=void 0;D&&this.canBeInsideText()?(F=s.insideFill,z=s.insideStroke,(F==null||F==="auto")&&(F=this.getInsideTextFill()),(z==null||z==="auto")&&(z=this.getInsideTextStroke(F),j=!0)):(F=s.outsideFill,z=s.outsideStroke,(F==null||F==="auto")&&(F=this.getOutsideFill()),(z==null||z==="auto")&&(z=this.getOutsideStroke(F),j=!0)),F=F||"#000",(F!==O.fill||z!==O.stroke||j!==O.autoStroke||c!==O.align||p!==O.verticalAlign)&&(d=!0,O.fill=F,O.stroke=z,O.autoStroke=j,O.align=c,O.verticalAlign=p,a.setDefaultTextStyle(O)),a.__dirty|=REDRAW_BIT,d&&a.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(n){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},t.prototype.getOutsideStroke=function(n){var a=this.__zr&&this.__zr.getBackgroundColor(),s=typeof a=="string"&&parse(a);s||(s=[255,255,255,1]);for(var l=s[3],u=this.__zr.isDarkMode(),c=0;c<3;c++)s[c]=s[c]*l+(u?0:255)*(1-l);return s[3]=1,stringify(s,"rgba")},t.prototype.traverse=function(n,a){},t.prototype.attrKV=function(n,a){n==="textConfig"?this.setTextConfig(a):n==="textContent"?this.setTextContent(a):n==="clipPath"?this.setClipPath(a):n==="extra"?(this.extra=this.extra||{},extend(this.extra,a)):this[n]=a},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(n,a){if(typeof n=="string")this.attrKV(n,a);else if(isObject$3(n))for(var s=n,l=keys(s),u=0;u<l.length;u++){var c=l[u];this.attrKV(c,n[c])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(n){this._innerSaveToNormal(n);for(var a=this._normalState,s=0;s<this.animators.length;s++){var l=this.animators[s],u=l.__fromStateTransition;if(!(l.getLoop()||u&&u!==PRESERVED_NORMAL_STATE)){var c=l.targetName,p=c?a[c]:a;l.saveTo(p)}}},t.prototype._innerSaveToNormal=function(n){var a=this._normalState;a||(a=this._normalState={}),n.textConfig&&!a.textConfig&&(a.textConfig=this.textConfig),this._savePrimaryToNormal(n,a,PRIMARY_STATES_KEYS$1)},t.prototype._savePrimaryToNormal=function(n,a,s){for(var l=0;l<s.length;l++){var u=s[l];n[u]!=null&&!(u in a)&&(a[u]=this[u])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(n){return this.states[n]},t.prototype.ensureState=function(n){var a=this.states;return a[n]||(a[n]={}),a[n]},t.prototype.clearStates=function(n){this.useState(PRESERVED_NORMAL_STATE,!1,n)},t.prototype.useState=function(n,a,s,l){var u=n===PRESERVED_NORMAL_STATE,c=this.hasState();if(!(!c&&u)){var p=this.currentStates,d=this.stateTransition;if(!(indexOf(p,n)>=0&&(a||p.length===1))){var x;if(this.stateProxy&&!u&&(x=this.stateProxy(n)),x||(x=this.states&&this.states[n]),!x&&!u){logError("State "+n+" not exists.");return}u||this.saveCurrentToNormalState(x);var _=!!(x&&x.hoverLayer||l);_&&this._toggleHoverLayerFlag(!0),this._applyStateObj(n,x,this._normalState,a,!s&&!this.__inHover&&d&&d.duration>0,d);var S=this._textContent,T=this._textGuide;return S&&S.useState(n,a,s,_),T&&T.useState(n,a,s,_),u?(this.currentStates=[],this._normalState={}):a?this.currentStates.push(n):this.currentStates=[n],this._updateAnimationTargets(),this.markRedraw(),!_&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),x}}},t.prototype.useStates=function(n,a,s){if(!n.length)this.clearStates();else{var l=[],u=this.currentStates,c=n.length,p=c===u.length;if(p){for(var d=0;d<c;d++)if(n[d]!==u[d]){p=!1;break}}if(p)return;for(var d=0;d<c;d++){var x=n[d],_=void 0;this.stateProxy&&(_=this.stateProxy(x,n)),_||(_=this.states[x]),_&&l.push(_)}var S=l[c-1],T=!!(S&&S.hoverLayer||s);T&&this._toggleHoverLayerFlag(!0);var A=this._mergeStates(l),R=this.stateTransition;this.saveCurrentToNormalState(A),this._applyStateObj(n.join(","),A,this._normalState,!1,!a&&!this.__inHover&&R&&R.duration>0,R);var D=this._textContent,O=this._textGuide;D&&D.useStates(n,a,T),O&&O.useStates(n,a,T),this._updateAnimationTargets(),this.currentStates=n.slice(),this.markRedraw(),!T&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},t.prototype.isSilent=function(){for(var n=this.silent,a=this.parent;!n&&a;){if(a.silent){n=!0;break}a=a.parent}return n},t.prototype._updateAnimationTargets=function(){for(var n=0;n<this.animators.length;n++){var a=this.animators[n];a.targetName&&a.changeTarget(this[a.targetName])}},t.prototype.removeState=function(n){var a=indexOf(this.currentStates,n);if(a>=0){var s=this.currentStates.slice();s.splice(a,1),this.useStates(s)}},t.prototype.replaceState=function(n,a,s){var l=this.currentStates.slice(),u=indexOf(l,n),c=indexOf(l,a)>=0;u>=0?c?l.splice(u,1):l[u]=a:s&&!c&&l.push(a),this.useStates(l)},t.prototype.toggleState=function(n,a){a?this.useState(n,!0):this.removeState(n)},t.prototype._mergeStates=function(n){for(var a={},s,l=0;l<n.length;l++){var u=n[l];extend(a,u),u.textConfig&&(s=s||{},extend(s,u.textConfig))}return s&&(a.textConfig=s),a},t.prototype._applyStateObj=function(n,a,s,l,u,c){var p=!(a&&l);a&&a.textConfig?(this.textConfig=extend({},l?this.textConfig:s.textConfig),extend(this.textConfig,a.textConfig)):p&&s.textConfig&&(this.textConfig=s.textConfig);for(var d={},x=!1,_=0;_<PRIMARY_STATES_KEYS$1.length;_++){var S=PRIMARY_STATES_KEYS$1[_],T=u&&DEFAULT_ANIMATABLE_MAP[S];a&&a[S]!=null?T?(x=!0,d[S]=a[S]):this[S]=a[S]:p&&s[S]!=null&&(T?(x=!0,d[S]=s[S]):this[S]=s[S])}if(!u)for(var _=0;_<this.animators.length;_++){var A=this.animators[_],R=A.targetName;A.getLoop()||A.__changeFinalValue(R?(a||s)[R]:a||s)}x&&this._transitionState(n,d,c)},t.prototype._attachComponent=function(n){if(!(n.__zr&&!n.__hostTarget)&&n!==this){var a=this.__zr;a&&n.addSelfToZr(a),n.__zr=a,n.__hostTarget=this}},t.prototype._detachComponent=function(n){n.__zr&&n.removeSelfFromZr(n.__zr),n.__zr=null,n.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(n){this._clipPath&&this._clipPath!==n&&this.removeClipPath(),this._attachComponent(n),this._clipPath=n,this.markRedraw()},t.prototype.removeClipPath=function(){var n=this._clipPath;n&&(this._detachComponent(n),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(n){var a=this._textContent;a!==n&&(a&&a!==n&&this.removeTextContent(),n.innerTransformable=new Transformable,this._attachComponent(n),this._textContent=n,this.markRedraw())},t.prototype.setTextConfig=function(n){this.textConfig||(this.textConfig={}),extend(this.textConfig,n),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var n=this._textContent;n&&(n.innerTransformable=null,this._detachComponent(n),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(n){this._textGuide&&this._textGuide!==n&&this.removeTextGuideLine(),this._attachComponent(n),this._textGuide=n,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var n=this._textGuide;n&&(this._detachComponent(n),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var n=this.__zr;n&&(this.__inHover?n.refreshHover():n.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(n){this.__inHover=n;var a=this._textContent,s=this._textGuide;a&&(a.__inHover=n),s&&(s.__inHover=n)},t.prototype.addSelfToZr=function(n){if(this.__zr!==n){this.__zr=n;var a=this.animators;if(a)for(var s=0;s<a.length;s++)n.animation.addAnimator(a[s]);this._clipPath&&this._clipPath.addSelfToZr(n),this._textContent&&this._textContent.addSelfToZr(n),this._textGuide&&this._textGuide.addSelfToZr(n)}},t.prototype.removeSelfFromZr=function(n){if(this.__zr){this.__zr=null;var a=this.animators;if(a)for(var s=0;s<a.length;s++)n.animation.removeAnimator(a[s]);this._clipPath&&this._clipPath.removeSelfFromZr(n),this._textContent&&this._textContent.removeSelfFromZr(n),this._textGuide&&this._textGuide.removeSelfFromZr(n)}},t.prototype.animate=function(n,a,s){var l=n?this[n]:this,u=new Animator(l,a,s);return n&&(u.targetName=n),this.addAnimator(u,n),u},t.prototype.addAnimator=function(n,a){var s=this.__zr,l=this;n.during(function(){l.updateDuringAnimation(a)}).done(function(){var u=l.animators,c=indexOf(u,n);c>=0&&u.splice(c,1)}),this.animators.push(n),s&&s.animation.addAnimator(n),s&&s.wakeUp()},t.prototype.updateDuringAnimation=function(n){this.markRedraw()},t.prototype.stopAnimation=function(n,a){for(var s=this.animators,l=s.length,u=[],c=0;c<l;c++){var p=s[c];!n||n===p.scope?p.stop(a):u.push(p)}return this.animators=u,this},t.prototype.animateTo=function(n,a,s){animateTo(this,n,a,s)},t.prototype.animateFrom=function(n,a,s){animateTo(this,n,a,s,!0)},t.prototype._transitionState=function(n,a,s,l){for(var u=animateTo(this,a,s,l),c=0;c<u.length;c++)u[c].__fromStateTransition=n},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var n=t.prototype;n.type="element",n.name="",n.ignore=n.silent=n.isGroup=n.draggable=n.dragging=n.ignoreClip=n.__inHover=!1,n.__dirty=REDRAW_BIT;function a(s,l,u,c){Object.defineProperty(n,s,{get:function(){if(!this[l]){var d=this[l]=[];p(this,d)}return this[l]},set:function(d){this[u]=d[0],this[c]=d[1],this[l]=d,p(this,d)}});function p(d,x){Object.defineProperty(x,0,{get:function(){return d[u]},set:function(_){d[u]=_}}),Object.defineProperty(x,1,{get:function(){return d[c]},set:function(_){d[c]=_}})}}Object.defineProperty&&(a("position","_legacyPos","x","y"),a("scale","_legacyScale","scaleX","scaleY"),a("origin","_legacyOrigin","originX","originY"))}(),t}();mixin(Element$1,Eventful);mixin(Element$1,Transformable);function animateTo(t,n,a,s,l){a=a||{};var u=[];animateToShallow(t,"",t,n,a,s,u,l);var c=u.length,p=!1,d=a.done,x=a.aborted,_=function(){p=!0,c--,c<=0&&(p?d&&d():x&&x())},S=function(){c--,c<=0&&(p?d&&d():x&&x())};c||d&&d(),u.length>0&&a.during&&u[0].during(function(R,D){a.during(D)});for(var T=0;T<u.length;T++){var A=u[T];_&&A.done(_),S&&A.aborted(S),a.force&&A.duration(a.duration),A.start(a.easing)}return u}function copyArrShallow(t,n,a){for(var s=0;s<a;s++)t[s]=n[s]}function is2DArray(t){return isArrayLike(t[0])}function copyValue(t,n,a){if(isArrayLike(n[a]))if(isArrayLike(t[a])||(t[a]=[]),isTypedArray(n[a])){var s=n[a].length;t[a].length!==s&&(t[a]=new n[a].constructor(s),copyArrShallow(t[a],n[a],s))}else{var l=n[a],u=t[a],c=l.length;if(is2DArray(l))for(var p=l[0].length,d=0;d<c;d++)u[d]?copyArrShallow(u[d],l[d],p):u[d]=Array.prototype.slice.call(l[d]);else copyArrShallow(u,l,c);u.length=l.length}else t[a]=n[a]}function isValueSame(t,n){return t===n||isArrayLike(t)&&isArrayLike(n)&&is1DArraySame(t,n)}function is1DArraySame(t,n){var a=t.length;if(a!==n.length)return!1;for(var s=0;s<a;s++)if(t[s]!==n[s])return!1;return!0}function animateToShallow(t,n,a,s,l,u,c,p){for(var d=keys(s),x=l.duration,_=l.delay,S=l.additive,T=l.setToFinal,A=!isObject$3(u),R=t.animators,D=[],O=0;O<d.length;O++){var F=d[O],z=s[F];if(z!=null&&a[F]!=null&&(A||u[F]))if(isObject$3(z)&&!isArrayLike(z)&&!isGradientObject(z)){if(n){p||(a[F]=z,t.updateDuringAnimation(n));continue}animateToShallow(t,F,a[F],z,l,u&&u[F],c,p)}else D.push(F);else p||(a[F]=z,t.updateDuringAnimation(n),D.push(F))}var j=D.length;if(!S&&j)for(var Z=0;Z<R.length;Z++){var W=R[Z];if(W.targetName===n){var J=W.stopTracks(D);if(J){var en=indexOf(R,W);R.splice(en,1)}}}if(l.force||(D=filter(D,function(on){return!isValueSame(s[on],a[on])}),j=D.length),j>0||l.force&&!c.length){var tn=void 0,Ct=void 0,Q=void 0;if(p){Ct={},T&&(tn={});for(var Z=0;Z<j;Z++){var F=D[Z];Ct[F]=a[F],T?tn[F]=s[F]:a[F]=s[F]}}else if(T){Q={};for(var Z=0;Z<j;Z++){var F=D[Z];Q[F]=cloneValue(a[F]),copyValue(a,s,F)}}var W=new Animator(a,!1,!1,S?filter(R,function(gn){return gn.targetName===n}):null);W.targetName=n,l.scope&&(W.scope=l.scope),T&&tn&&W.whenWithKeys(0,tn,D),Q&&W.whenWithKeys(0,Q,D),W.whenWithKeys(x??500,p?Ct:s,D).delay(_||0),t.addAnimator(W,n),c.push(W)}}var Group$3=function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s.isGroup=!0,s._children=[],s.attr(a),s}return n.prototype.childrenRef=function(){return this._children},n.prototype.children=function(){return this._children.slice()},n.prototype.childAt=function(a){return this._children[a]},n.prototype.childOfName=function(a){for(var s=this._children,l=0;l<s.length;l++)if(s[l].name===a)return s[l]},n.prototype.childCount=function(){return this._children.length},n.prototype.add=function(a){return a&&a!==this&&a.parent!==this&&(this._children.push(a),this._doAdd(a)),this},n.prototype.addBefore=function(a,s){if(a&&a!==this&&a.parent!==this&&s&&s.parent===this){var l=this._children,u=l.indexOf(s);u>=0&&(l.splice(u,0,a),this._doAdd(a))}return this},n.prototype.replace=function(a,s){var l=indexOf(this._children,a);return l>=0&&this.replaceAt(s,l),this},n.prototype.replaceAt=function(a,s){var l=this._children,u=l[s];if(a&&a!==this&&a.parent!==this&&a!==u){l[s]=a,u.parent=null;var c=this.__zr;c&&u.removeSelfFromZr(c),this._doAdd(a)}return this},n.prototype._doAdd=function(a){a.parent&&a.parent.remove(a),a.parent=this;var s=this.__zr;s&&s!==a.__zr&&a.addSelfToZr(s),s&&s.refresh()},n.prototype.remove=function(a){var s=this.__zr,l=this._children,u=indexOf(l,a);return u<0?this:(l.splice(u,1),a.parent=null,s&&a.removeSelfFromZr(s),s&&s.refresh(),this)},n.prototype.removeAll=function(){for(var a=this._children,s=this.__zr,l=0;l<a.length;l++){var u=a[l];s&&u.removeSelfFromZr(s),u.parent=null}return a.length=0,this},n.prototype.eachChild=function(a,s){for(var l=this._children,u=0;u<l.length;u++){var c=l[u];a.call(s,c,u)}return this},n.prototype.traverse=function(a,s){for(var l=0;l<this._children.length;l++){var u=this._children[l],c=a.call(s,u);u.isGroup&&!c&&u.traverse(a,s)}return this},n.prototype.addSelfToZr=function(a){t.prototype.addSelfToZr.call(this,a);for(var s=0;s<this._children.length;s++){var l=this._children[s];l.addSelfToZr(a)}},n.prototype.removeSelfFromZr=function(a){t.prototype.removeSelfFromZr.call(this,a);for(var s=0;s<this._children.length;s++){var l=this._children[s];l.removeSelfFromZr(a)}},n.prototype.getBoundingRect=function(a){for(var s=new BoundingRect(0,0,0,0),l=a||this._children,u=[],c=null,p=0;p<l.length;p++){var d=l[p];if(!(d.ignore||d.invisible)){var x=d.getBoundingRect(),_=d.getLocalTransform(u);_?(BoundingRect.applyTransform(s,x,_),c=c||s.clone(),c.union(s)):(c=c||x.clone(),c.union(x))}}return c||s},n}(Element$1);Group$3.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(t){delete instances$1[t]}function isDarkMode(t){if(!t)return!1;if(typeof t=="string")return lum(t,1)<DARK_MODE_THRESHOLD;if(t.colorStops){for(var n=t.colorStops,a=0,s=n.length,l=0;l<s;l++)a+=lum(n[l].color,1);return a/=s,a<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function t(n,a,s){var l=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,s=s||{},this.dom=a,this.id=n;var u=new Storage,c=s.renderer||"canvas";painterCtors[c]||(c=keys(painterCtors)[0]),s.useDirtyRect=s.useDirtyRect==null?!1:s.useDirtyRect;var p=new painterCtors[c](a,u,s,n),d=s.ssr||p.ssrOnly;this.storage=u,this.painter=p;var x=!env.node&&!env.worker&&!d?new HandlerDomProxy(p.getViewportRoot(),p.root):null,_=s.useCoarsePointer,S=_==null||_==="auto"?env.touchEventsSupported:!!_,T=44,A;S&&(A=retrieve2(s.pointerSize,T)),this.handler=new Handler(u,p,x,p.root,A),this.animation=new Animation({stage:{update:d?null:function(){return l._flush(!0)}}}),d||this.animation.start()}return t.prototype.add=function(n){this._disposed||!n||(this.storage.addRoot(n),n.addSelfToZr(this),this.refresh())},t.prototype.remove=function(n){this._disposed||!n||(this.storage.delRoot(n),n.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(n,a){this._disposed||(this.painter.configLayer&&this.painter.configLayer(n,a),this.refresh())},t.prototype.setBackgroundColor=function(n){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(n),this.refresh(),this._backgroundColor=n,this._darkMode=isDarkMode(n))},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(n){this._darkMode=n},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(n){this._disposed||(n||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},t.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},t.prototype.flush=function(){this._disposed||this._flush(!1)},t.prototype._flush=function(n){var a,s=getTime();this._needsRefresh&&(a=!0,this.refreshImmediately(n)),this._needsRefreshHover&&(a=!0,this.refreshHoverImmediately());var l=getTime();a?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:l-s})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(n){this._sleepAfterStill=n},t.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},t.prototype.resize=function(n){this._disposed||(n=n||{},this.painter.resize(n.width,n.height),this.handler.resize())},t.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},t.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},t.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},t.prototype.setCursorStyle=function(n){this._disposed||this.handler.setCursorStyle(n)},t.prototype.findHover=function(n,a){if(!this._disposed)return this.handler.findHover(n,a)},t.prototype.on=function(n,a,s){return this._disposed||this.handler.on(n,a,s),this},t.prototype.off=function(n,a){this._disposed||this.handler.off(n,a)},t.prototype.trigger=function(n,a){this._disposed||this.handler.trigger(n,a)},t.prototype.clear=function(){if(!this._disposed){for(var n=this.storage.getRoots(),a=0;a<n.length;a++)n[a]instanceof Group$3&&n[a].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},t.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},t}();function init$2(t,n){var a=new ZRender(guid(),t,n);return instances$1[a.id]=a,a}function dispose$1(t){t.dispose()}function disposeAll(){for(var t in instances$1)instances$1.hasOwnProperty(t)&&instances$1[t].dispose();instances$1={}}function getInstance(t){return instances$1[t]}function registerPainter(t,n){painterCtors[t]=n}var ssrDataGetter;function getElementSSRData(t){if(typeof ssrDataGetter=="function")return ssrDataGetter(t)}function registerSSRDataGetter(t){ssrDataGetter=t}var version$1="5.6.1";const zrender=Object.freeze(Object.defineProperty({__proto__:null,dispose:dispose$1,disposeAll,getElementSSRData,getInstance,init:init$2,registerPainter,registerSSRDataGetter,version:version$1},Symbol.toStringTag,{value:"Module"}));var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(t){return t.replace(/^\s+|\s+$/g,"")}function linearMap$2(t,n,a,s){var l=n[0],u=n[1],c=a[0],p=a[1],d=u-l,x=p-c;if(d===0)return x===0?c:(c+p)/2;if(s)if(d>0){if(t<=l)return c;if(t>=u)return p}else{if(t>=l)return c;if(t<=u)return p}else{if(t===l)return c;if(t===u)return p}return(t-l)/d*x+c}function parsePercent(t,n){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return isString$1(t)?_trim(t).match(/%$/)?parseFloat(t)/100*n:parseFloat(t):t==null?NaN:+t}function round$3(t,n,a){return n==null&&(n=10),n=Math.min(Math.max(0,n),ROUND_SUPPORTED_PRECISION_MAX),t=(+t).toFixed(n),a?t:+t}function asc$2(t){return t.sort(function(n,a){return n-a}),t}function getPrecision(t){if(t=+t,isNaN(t))return 0;if(t>1e-14){for(var n=1,a=0;a<15;a++,n*=10)if(Math.round(t*n)/n===t)return a}return getPrecisionSafe(t)}function getPrecisionSafe(t){var n=t.toString().toLowerCase(),a=n.indexOf("e"),s=a>0?+n.slice(a+1):0,l=a>0?a:n.length,u=n.indexOf("."),c=u<0?0:l-1-u;return Math.max(0,c-s)}function getPixelPrecision(t,n){var a=Math.log,s=Math.LN10,l=Math.floor(a(t[1]-t[0])/s),u=Math.round(a(Math.abs(n[1]-n[0]))/s),c=Math.min(Math.max(-l+u,0),20);return isFinite(c)?c:20}function getPercentWithPrecision(t,n,a){if(!t[n])return 0;var s=getPercentSeats(t,a);return s[n]||0}function getPercentSeats(t,n){var a=reduce(t,function(A,R){return A+(isNaN(R)?0:R)},0);if(a===0)return[];for(var s=Math.pow(10,n),l=map$1(t,function(A){return(isNaN(A)?0:A)/a*s*100}),u=s*100,c=map$1(l,function(A){return Math.floor(A)}),p=reduce(c,function(A,R){return A+R},0),d=map$1(l,function(A,R){return A-c[R]});p<u;){for(var x=Number.NEGATIVE_INFINITY,_=null,S=0,T=d.length;S<T;++S)d[S]>x&&(x=d[S],_=S);++c[_],d[_]=0,++p}return map$1(c,function(A){return A/s})}function addSafe(t,n){var a=Math.max(getPrecision(t),getPrecision(n)),s=t+n;return a>ROUND_SUPPORTED_PRECISION_MAX?s:round$3(s,a)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(t){var n=Math.PI*2;return(t%n+n)%n}function isRadianAroundZero(t){return t>-RADIAN_EPSILON&&t<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(t){if(t instanceof Date)return t;if(isString$1(t)){var n=TIME_REG.exec(t);if(!n)return new Date(NaN);if(n[8]){var a=+n[4]||0;return n[8].toUpperCase()!=="Z"&&(a-=+n[8].slice(0,3)),new Date(Date.UTC(+n[1],+(n[2]||1)-1,+n[3]||1,a,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0))}else return new Date(+n[1],+(n[2]||1)-1,+n[3]||1,+n[4]||0,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0)}else if(t==null)return new Date(NaN);return new Date(Math.round(t))}function quantity(t){return Math.pow(10,quantityExponent(t))}function quantityExponent(t){if(t===0)return 0;var n=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,n)>=10&&n++,n}function nice(t,n){var a=quantityExponent(t),s=Math.pow(10,a),l=t/s,u;return n?l<1.5?u=1:l<2.5?u=2:l<4?u=3:l<7?u=5:u=10:l<1?u=1:l<2?u=2:l<3?u=3:l<5?u=5:u=10,t=u*s,a>=-20?+t.toFixed(a<0?-a:0):t}function quantile(t,n){var a=(t.length-1)*n+1,s=Math.floor(a),l=+t[s-1],u=a-s;return u?l+u*(t[s]-l):l}function reformIntervals(t){t.sort(function(d,x){return p(d,x,0)?-1:1});for(var n=-1/0,a=1,s=0;s<t.length;){for(var l=t[s].interval,u=t[s].close,c=0;c<2;c++)l[c]<=n&&(l[c]=n,u[c]=c?1:1-a),n=l[c],a=u[c];l[0]===l[1]&&u[0]*u[1]!==1?t.splice(s,1):s++}return t;function p(d,x,_){return d.interval[_]<x.interval[_]||d.interval[_]===x.interval[_]&&(d.close[_]-x.close[_]===(_?-1:1)||!_&&p(d,x,1))}}function numericToNumber(t){var n=parseFloat(t);return n==t&&(n!==0||!isString$1(t)||t.indexOf("x")<=0)?n:NaN}function isNumeric(t){return!isNaN(numericToNumber(t))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(t,n){return n===0?t:getGreatestCommonDividor(n,t%n)}function getLeastCommonMultiple(t,n){return t==null?n:n==null?t:t*n/getGreatestCommonDividor(t,n)}function throwError(t){throw new Error(t)}function interpolateNumber(t,n,a){return(n-t)*a+t}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(t){return t instanceof Array?t:t==null?[]:[t]}function defaultEmphasis(t,n,a){if(t){t[n]=t[n]||{},t.emphasis=t.emphasis||{},t.emphasis[n]=t.emphasis[n]||{};for(var s=0,l=a.length;s<l;s++){var u=a[s];!t.emphasis[n].hasOwnProperty(u)&&t[n].hasOwnProperty(u)&&(t.emphasis[n][u]=t[n][u])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(t){return isObject$3(t)&&!isArray$1(t)&&!(t instanceof Date)?t.value:t}function isDataItemOption(t){return isObject$3(t)&&!(t instanceof Array)}function mappingToExists(t,n,a){var s=a==="normalMerge",l=a==="replaceMerge",u=a==="replaceAll";t=t||[],n=(n||[]).slice();var c=createHashMap();each$f(n,function(d,x){if(!isObject$3(d)){n[x]=null;return}});var p=prepareResult(t,c,a);return(s||l)&&mappingById(p,t,c,n),s&&mappingByName(p,n),s||l?mappingByIndex(p,n,l):u&&mappingInReplaceAllMode(p,n),makeIdAndName(p),p}function prepareResult(t,n,a){var s=[];if(a==="replaceAll")return s;for(var l=0;l<t.length;l++){var u=t[l];u&&u.id!=null&&n.set(u.id,l),s.push({existing:a==="replaceMerge"||isComponentIdInternal(u)?null:u,newOption:null,keyInfo:null,brandNew:null})}return s}function mappingById(t,n,a,s){each$f(s,function(l,u){if(!(!l||l.id==null)){var c=makeComparableKey(l.id),p=a.get(c);if(p!=null){var d=t[p];assert(!d.newOption,'Duplicated option on id "'+c+'".'),d.newOption=l,d.existing=n[p],s[u]=null}}})}function mappingByName(t,n){each$f(n,function(a,s){if(!(!a||a.name==null))for(var l=0;l<t.length;l++){var u=t[l].existing;if(!t[l].newOption&&u&&(u.id==null||a.id==null)&&!isComponentIdInternal(a)&&!isComponentIdInternal(u)&&keyExistAndEqual("name",u,a)){t[l].newOption=a,n[s]=null;return}}})}function mappingByIndex(t,n,a){each$f(n,function(s){if(s){for(var l,u=0;(l=t[u])&&(l.newOption||isComponentIdInternal(l.existing)||l.existing&&s.id!=null&&!keyExistAndEqual("id",s,l.existing));)u++;l?(l.newOption=s,l.brandNew=a):t.push({newOption:s,brandNew:a,existing:null,keyInfo:null}),u++}})}function mappingInReplaceAllMode(t,n){each$f(n,function(a){t.push({newOption:a,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(t){var n=createHashMap();each$f(t,function(a){var s=a.existing;s&&n.set(s.id,a)}),each$f(t,function(a){var s=a.newOption;assert(!s||s.id==null||!n.get(s.id)||n.get(s.id)===a,"id duplicates: "+(s&&s.id)),s&&s.id!=null&&n.set(s.id,a),!a.keyInfo&&(a.keyInfo={})}),each$f(t,function(a,s){var l=a.existing,u=a.newOption,c=a.keyInfo;if(isObject$3(u)){if(c.name=u.name!=null?makeComparableKey(u.name):l?l.name:DUMMY_COMPONENT_NAME_PREFIX+s,l)c.id=makeComparableKey(l.id);else if(u.id!=null)c.id=makeComparableKey(u.id);else{var p=0;do c.id="\0"+c.name+"\0"+p++;while(n.get(c.id))}n.set(c.id,a)}})}function keyExistAndEqual(t,n,a){var s=convertOptionIdName(n[t],null),l=convertOptionIdName(a[t],null);return s!=null&&l!=null&&s===l}function makeComparableKey(t){return convertOptionIdName(t,"")}function convertOptionIdName(t,n){return t==null?n:isString$1(t)?t:isNumber(t)||isStringSafe(t)?t+"":n}function isNameSpecified(t){var n=t.name;return!!(n&&n.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(t){return t&&t.id!=null&&makeComparableKey(t.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(t){return INTERNAL_COMPONENT_ID_PREFIX+t}function setComponentTypeToKeyInfo(t,n,a){each$f(t,function(s){var l=s.newOption;isObject$3(l)&&(s.keyInfo.mainType=n,s.keyInfo.subType=determineSubType(n,l,s.existing,a))})}function determineSubType(t,n,a,s){var l=n.type?n.type:a?a.subType:s.determineSubType(t,n);return l}function compressBatches(t,n){var a={},s={};return l(t||[],a),l(n||[],s,a),[u(a),u(s)];function l(c,p,d){for(var x=0,_=c.length;x<_;x++){var S=convertOptionIdName(c[x].seriesId,null);if(S==null)return;for(var T=normalizeToArray(c[x].dataIndex),A=d&&d[S],R=0,D=T.length;R<D;R++){var O=T[R];A&&A[O]?A[O]=null:(p[S]||(p[S]={}))[O]=1}}}function u(c,p){var d=[];for(var x in c)if(c.hasOwnProperty(x)&&c[x]!=null)if(p)d.push(+x);else{var _=u(c[x],!0);_.length&&d.push({seriesId:x,dataIndex:_})}return d}}function queryDataIndex(t,n){if(n.dataIndexInside!=null)return n.dataIndexInside;if(n.dataIndex!=null)return isArray$1(n.dataIndex)?map$1(n.dataIndex,function(a){return t.indexOfRawIndex(a)}):t.indexOfRawIndex(n.dataIndex);if(n.name!=null)return isArray$1(n.name)?map$1(n.name,function(a){return t.indexOfName(a)}):t.indexOfName(n.name)}function makeInner(){var t="__ec_inner_"+innerUniqueIndex++;return function(n){return n[t]||(n[t]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(t,n,a){var s=preParseFinder(n,a),l=s.mainTypeSpecified,u=s.queryOptionMap,c=s.others,p=c,d=a?a.defaultMainType:null;return!l&&d&&u.set(d,{}),u.each(function(x,_){var S=queryReferringComponents(t,_,x,{useDefault:d===_,enableAll:a&&a.enableAll!=null?a.enableAll:!0,enableNone:a&&a.enableNone!=null?a.enableNone:!0});p[_+"Models"]=S.models,p[_+"Model"]=S.models[0]}),p}function preParseFinder(t,n){var a;if(isString$1(t)){var s={};s[t+"Index"]=0,a=s}else a=t;var l=createHashMap(),u={},c=!1;return each$f(a,function(p,d){if(d==="dataIndex"||d==="dataIndexInside"){u[d]=p;return}var x=d.match(/^(\w+)(Index|Id|Name)$/)||[],_=x[1],S=(x[2]||"").toLowerCase();if(!(!_||!S||n&&n.includeMainTypes&&indexOf(n.includeMainTypes,_)<0)){c=c||!!_;var T=l.get(_)||l.set(_,{});T[S]=p}}),{mainTypeSpecified:c,queryOptionMap:l,others:u}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(t,n,a,s){s=s||SINGLE_REFERRING;var l=a.index,u=a.id,c=a.name,p={models:null,specified:l!=null||u!=null||c!=null};if(!p.specified){var d=void 0;return p.models=s.useDefault&&(d=t.getComponent(n))?[d]:[],p}return l==="none"||l===!1?(assert(s.enableNone,'`"none"` or `false` is not a valid value on index option.'),p.models=[],p):(l==="all"&&(assert(s.enableAll,'`"all"` is not a valid value on index option.'),l=u=c=null),p.models=t.queryComponents({mainType:n,index:l,id:u,name:c}),p)}function setAttribute(t,n,a){t.setAttribute?t.setAttribute(n,a):t[n]=a}function getAttribute(t,n){return t.getAttribute?t.getAttribute(n):t[n]}function getTooltipRenderMode(t){return t==="auto"?env.domSupported?"html":"richText":t||"html"}function groupData(t,n){var a=createHashMap(),s=[];return each$f(t,function(l){var u=n(l);(a.get(u)||(s.push(u),a.set(u,[]))).push(l)}),{keys:s,buckets:a}}function interpolateRawValues(t,n,a,s,l){var u=n==null||n==="auto";if(s==null)return s;if(isNumber(s)){var c=interpolateNumber(a||0,s,l);return round$3(c,u?Math.max(getPrecision(a||0),getPrecision(s)):n)}else{if(isString$1(s))return l<1?a:s;for(var p=[],d=a,x=s,_=Math.max(d?d.length:0,x.length),S=0;S<_;++S){var T=t.getDimensionInfo(S);if(T&&T.type==="ordinal")p[S]=(l<1&&d?d:x)[S];else{var A=d&&d[S]?d[S]:0,R=x[S],c=interpolateNumber(A,R,l);p[S]=round$3(c,u?Math.max(getPrecision(A),getPrecision(R)):n)}}return p}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(t){var n={main:"",sub:""};if(t){var a=t.split(TYPE_DELIMITER);n.main=a[0]||"",n.sub=a[1]||""}return n}function checkClassType(t){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function isExtendedClass(t){return!!(t&&t[IS_EXTENDED_CLASS])}function enableClassExtend(t,n){t.$constructor=t,t.extend=function(a){var s=this,l;return isESClass(s)?l=function(u){__extends(c,u);function c(){return u.apply(this,arguments)||this}return c}(s):(l=function(){(a.$constructor||s).apply(this,arguments)},inherits(l,this)),extend(l.prototype,a),l[IS_EXTENDED_CLASS]=!0,l.extend=this.extend,l.superCall=superCall,l.superApply=superApply,l.superClass=s,l}}function isESClass(t){return isFunction$1(t)&&/^class\s/.test(Function.prototype.toString.call(t))}function mountExtend(t,n){t.extend=n.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(t){var n=["__\0is_clz",classBase++].join("_");t.prototype[n]=!0,t.isInstance=function(a){return!!(a&&a[n])}}function superCall(t,n){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];return this.superClass.prototype[n].apply(t,a)}function superApply(t,n,a){return this.superClass.prototype[n].apply(t,a)}function enableClassManagement(t){var n={};t.registerClass=function(s){var l=s.type||s.prototype.type;if(l){checkClassType(l),s.prototype.type=l;var u=parseClassType(l);if(!u.sub)n[u.main]=s;else if(u.sub!==IS_CONTAINER){var c=a(u);c[u.sub]=s}}return s},t.getClass=function(s,l,u){var c=n[s];if(c&&c[IS_CONTAINER]&&(c=l?c[l]:null),u&&!c)throw new Error(l?"Component "+s+"."+(l||"")+" is used but not imported.":s+".type should be specified.");return c},t.getClassesByMainType=function(s){var l=parseClassType(s),u=[],c=n[l.main];return c&&c[IS_CONTAINER]?each$f(c,function(p,d){d!==IS_CONTAINER&&u.push(p)}):u.push(c),u},t.hasClass=function(s){var l=parseClassType(s);return!!n[l.main]},t.getAllClassMainTypes=function(){var s=[];return each$f(n,function(l,u){s.push(u)}),s},t.hasSubTypes=function(s){var l=parseClassType(s),u=n[l.main];return u&&u[IS_CONTAINER]};function a(s){var l=n[s.main];return(!l||!l[IS_CONTAINER])&&(l=n[s.main]={},l[IS_CONTAINER]=!0),l}}function makeStyleMapper(t,n){for(var a=0;a<t.length;a++)t[a][1]||(t[a][1]=t[a][0]);return n=n||!1,function(s,l,u){for(var c={},p=0;p<t.length;p++){var d=t[p][1];if(!(l&&indexOf(l,d)>=0||u&&indexOf(u,d)<0)){var x=s.getShallow(d,n);x!=null&&(c[t[p][0]]=x)}}return c}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function t(){}return t.prototype.getAreaStyle=function(n,a){return getAreaStyle(this,n,a)},t}(),globalImageCache=new LRU(50);function findExistImage(t){if(typeof t=="string"){var n=globalImageCache.get(t);return n&&n.image}else return t}function createOrUpdateImage(t,n,a,s,l){if(t)if(typeof t=="string"){if(n&&n.__zrImageSrc===t||!a)return n;var u=globalImageCache.get(t),c={hostEl:a,cb:s,cbPayload:l};return u?(n=u.image,!isImageReady(n)&&u.pending.push(c)):(n=platformApi.loadImage(t,imageOnLoad,imageOnLoad),n.__zrImageSrc=t,globalImageCache.put(t,n.__cachedImgObj={image:n,pending:[c]})),n}else return t;else return n}function imageOnLoad(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var n=0;n<t.pending.length;n++){var a=t.pending[n],s=a.cb;s&&s(this,a.cbPayload),a.hostEl.dirty()}t.pending.length=0}function isImageReady(t){return t&&t.width&&t.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText(t,n,a,s,l){var u={};return truncateText2(u,t,n,a,s,l),u.text}function truncateText2(t,n,a,s,l,u){if(!a){t.text="",t.isTruncated=!1;return}var c=(n+"").split(`
`);u=prepareTruncateOptions(a,s,l,u);for(var p=!1,d={},x=0,_=c.length;x<_;x++)truncateSingleLine(d,c[x],u),c[x]=d.textLine,p=p||d.isTruncated;t.text=c.join(`
`),t.isTruncated=p}function prepareTruncateOptions(t,n,a,s){s=s||{};var l=extend({},s);l.font=n,a=retrieve2(a,"..."),l.maxIterations=retrieve2(s.maxIterations,2);var u=l.minChar=retrieve2(s.minChar,0);l.cnCharWidth=getWidth("",n);var c=l.ascCharWidth=getWidth("a",n);l.placeholder=retrieve2(s.placeholder,"");for(var p=t=Math.max(0,t-1),d=0;d<u&&p>=c;d++)p-=c;var x=getWidth(a,n);return x>p&&(a="",x=0),p=t-x,l.ellipsis=a,l.ellipsisWidth=x,l.contentWidth=p,l.containerWidth=t,l}function truncateSingleLine(t,n,a){var s=a.containerWidth,l=a.font,u=a.contentWidth;if(!s){t.textLine="",t.isTruncated=!1;return}var c=getWidth(n,l);if(c<=s){t.textLine=n,t.isTruncated=!1;return}for(var p=0;;p++){if(c<=u||p>=a.maxIterations){n+=a.ellipsis;break}var d=p===0?estimateLength(n,u,a.ascCharWidth,a.cnCharWidth):c>0?Math.floor(n.length*u/c):0;n=n.substr(0,d),c=getWidth(n,l)}n===""&&(n=a.placeholder),t.textLine=n,t.isTruncated=!0}function estimateLength(t,n,a,s){for(var l=0,u=0,c=t.length;u<c&&l<n;u++){var p=t.charCodeAt(u);l+=0<=p&&p<=127?a:s}return u}function parsePlainText(t,n){t!=null&&(t+="");var a=n.overflow,s=n.padding,l=n.font,u=a==="truncate",c=getLineHeight(l),p=retrieve2(n.lineHeight,c),d=!!n.backgroundColor,x=n.lineOverflow==="truncate",_=!1,S=n.width,T;S!=null&&(a==="break"||a==="breakAll")?T=t?wrapText(t,n.font,S,a==="breakAll",0).lines:[]:T=t?t.split(`
`):[];var A=T.length*p,R=retrieve2(n.height,A);if(A>R&&x){var D=Math.floor(R/p);_=_||T.length>D,T=T.slice(0,D)}if(t&&u&&S!=null)for(var O=prepareTruncateOptions(S,l,n.ellipsis,{minChar:n.truncateMinChar,placeholder:n.placeholder}),F={},z=0;z<T.length;z++)truncateSingleLine(F,T[z],O),T[z]=F.textLine,_=_||F.isTruncated;for(var j=R,Z=0,z=0;z<T.length;z++)Z=Math.max(getWidth(T[z],l),Z);S==null&&(S=Z);var W=Z;return s&&(j+=s[0]+s[2],W+=s[1]+s[3],S+=s[1]+s[3]),d&&(W=S),{lines:T,height:R,outerWidth:W,outerHeight:j,lineHeight:p,calculatedLineHeight:c,contentWidth:Z,contentHeight:A,width:S,isTruncated:_}}var RichTextToken=function(){function t(){}return t}(),RichTextLine=function(){function t(n){this.tokens=[],n&&(this.tokens=n)}return t}(),RichTextContentBlock=function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return t}();function parseRichText(t,n){var a=new RichTextContentBlock;if(t!=null&&(t+=""),!t)return a;for(var s=n.width,l=n.height,u=n.overflow,c=(u==="break"||u==="breakAll")&&s!=null?{width:s,accumWidth:0,breakAll:u==="breakAll"}:null,p=STYLE_REG.lastIndex=0,d;(d=STYLE_REG.exec(t))!=null;){var x=d.index;x>p&&pushTokens(a,t.substring(p,x),n,c),pushTokens(a,d[2],n,c,d[1]),p=STYLE_REG.lastIndex}p<t.length&&pushTokens(a,t.substring(p,t.length),n,c);var _=[],S=0,T=0,A=n.padding,R=u==="truncate",D=n.lineOverflow==="truncate",O={};function F(ox,hx,_x){ox.width=hx,ox.lineHeight=_x,S+=_x,T=Math.max(T,hx)}e:for(var z=0;z<a.lines.length;z++){for(var j=a.lines[z],Z=0,W=0,J=0;J<j.tokens.length;J++){var en=j.tokens[J],tn=en.styleName&&n.rich[en.styleName]||{},Ct=en.textPadding=tn.padding,Q=Ct?Ct[1]+Ct[3]:0,on=en.font=tn.font||n.font;en.contentHeight=getLineHeight(on);var gn=retrieve2(tn.height,en.contentHeight);if(en.innerHeight=gn,Ct&&(gn+=Ct[0]+Ct[2]),en.height=gn,en.lineHeight=retrieve3(tn.lineHeight,n.lineHeight,gn),en.align=tn&&tn.align||n.align,en.verticalAlign=tn&&tn.verticalAlign||"middle",D&&l!=null&&S+en.lineHeight>l){var In=a.lines.length;J>0?(j.tokens=j.tokens.slice(0,J),F(j,W,Z),a.lines=a.lines.slice(0,z+1)):a.lines=a.lines.slice(0,z),a.isTruncated=a.isTruncated||a.lines.length<In;break e}var dn=tn.width,ix=dn==null||dn==="auto";if(typeof dn=="string"&&dn.charAt(dn.length-1)==="%")en.percentWidth=dn,_.push(en),en.contentWidth=getWidth(en.text,on);else{if(ix){var Cn=tn.backgroundColor,ax=Cn&&Cn.image;ax&&(ax=findExistImage(ax),isImageReady(ax)&&(en.width=Math.max(en.width,ax.width*gn/ax.height)))}var sx=R&&s!=null?s-W:null;sx!=null&&sx<en.width?!ix||sx<Q?(en.text="",en.width=en.contentWidth=0):(truncateText2(O,en.text,sx-Q,on,n.ellipsis,{minChar:n.truncateMinChar}),en.text=O.text,a.isTruncated=a.isTruncated||O.isTruncated,en.width=en.contentWidth=getWidth(en.text,on)):en.contentWidth=getWidth(en.text,on)}en.width+=Q,W+=en.width,tn&&(Z=Math.max(Z,en.lineHeight))}F(j,W,Z)}a.outerWidth=a.width=retrieve2(s,T),a.outerHeight=a.height=retrieve2(l,S),a.contentHeight=S,a.contentWidth=T,A&&(a.outerWidth+=A[1]+A[3],a.outerHeight+=A[0]+A[2]);for(var z=0;z<_.length;z++){var en=_[z],lx=en.percentWidth;en.width=parseInt(lx,10)/100*a.width}return a}function pushTokens(t,n,a,s,l){var u=n==="",c=l&&a.rich[l]||{},p=t.lines,d=c.font||a.font,x=!1,_,S;if(s){var T=c.padding,A=T?T[1]+T[3]:0;if(c.width!=null&&c.width!=="auto"){var R=parsePercent$1(c.width,s.width)+A;p.length>0&&R+s.accumWidth>s.width&&(_=n.split(`
`),x=!0),s.accumWidth=R}else{var D=wrapText(n,d,s.width,s.breakAll,s.accumWidth);s.accumWidth=D.accumWidth+A,S=D.linesWidths,_=D.lines}}else _=n.split(`
`);for(var O=0;O<_.length;O++){var F=_[O],z=new RichTextToken;if(z.styleName=l,z.text=F,z.isLineHolder=!F&&!u,typeof c.width=="number"?z.width=c.width:z.width=S?S[O]:getWidth(F,d),!O&&!x){var j=(p[p.length-1]||(p[0]=new RichTextLine)).tokens,Z=j.length;Z===1&&j[0].isLineHolder?j[0]=z:(F||!Z||u)&&j.push(z)}else p.push(new RichTextLine([z]))}}function isAlphabeticLetter(t){var n=t.charCodeAt(0);return n>=32&&n<=591||n>=880&&n<=4351||n>=4608&&n<=5119||n>=7680&&n<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(t,n){return t[n]=!0,t},{});function isWordBreakChar(t){return isAlphabeticLetter(t)?!!breakCharMap[t]:!0}function wrapText(t,n,a,s,l){for(var u=[],c=[],p="",d="",x=0,_=0,S=0;S<t.length;S++){var T=t.charAt(S);if(T===`
`){d&&(p+=d,_+=x),u.push(p),c.push(_),p="",d="",x=0,_=0;continue}var A=getWidth(T,n),R=s?!1:!isWordBreakChar(T);if(u.length?_+A>a:l+_+A>a){_?(p||d)&&(R?(p||(p=d,d="",x=0,_=x),u.push(p),c.push(_-x),d+=T,x+=A,p="",_=x):(d&&(p+=d,d="",x=0),u.push(p),c.push(_),p=T,_=A)):R?(u.push(d),c.push(x),d=T,x=A):(u.push(T),c.push(A));continue}_+=A,R?(d+=T,x+=A):(d&&(p+=d,d="",x=0),p+=T)}return!u.length&&!p&&(p=t,d="",x=0),d&&(p+=d),p&&(u.push(p),c.push(_)),u.length===1&&(_+=l),{accumWidth:_,lines:u,linesWidths:c}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype._init=function(a){for(var s=keys(a),l=0;l<s.length;l++){var u=s[l];u==="style"?this.useStyle(a[u]):t.prototype.attrKV.call(this,u,a[u])}this.style||this.useStyle({})},n.prototype.beforeBrush=function(){},n.prototype.afterBrush=function(){},n.prototype.innerBeforeBrush=function(){},n.prototype.innerAfterBrush=function(){},n.prototype.shouldBePainted=function(a,s,l,u){var c=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,a,s)||c&&!c[0]&&!c[3])return!1;if(l&&this.__clipPaths){for(var p=0;p<this.__clipPaths.length;++p)if(this.__clipPaths[p].isZeroArea())return!1}if(u&&this.parent)for(var d=this.parent;d;){if(d.ignore)return!1;d=d.parent}return!0},n.prototype.contain=function(a,s){return this.rectContain(a,s)},n.prototype.traverse=function(a,s){a.call(s,this)},n.prototype.rectContain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect();return u.contain(l[0],l[1])},n.prototype.getPaintRect=function(){var a=this._paintRect;if(!this._paintRect||this.__dirty){var s=this.transform,l=this.getBoundingRect(),u=this.style,c=u.shadowBlur||0,p=u.shadowOffsetX||0,d=u.shadowOffsetY||0;a=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),s?BoundingRect.applyTransform(a,l,s):a.copy(l),(c||p||d)&&(a.width+=c*2+Math.abs(p),a.height+=c*2+Math.abs(d),a.x=Math.min(a.x,a.x+p-c),a.y=Math.min(a.y,a.y+d-c));var x=this.dirtyRectTolerance;a.isZero()||(a.x=Math.floor(a.x-x),a.y=Math.floor(a.y-x),a.width=Math.ceil(a.width+1+x*2),a.height=Math.ceil(a.height+1+x*2))}return a},n.prototype.setPrevPaintRect=function(a){a?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(a)):this._prevPaintRect=null},n.prototype.getPrevPaintRect=function(){return this._prevPaintRect},n.prototype.animateStyle=function(a){return this.animate("style",a)},n.prototype.updateDuringAnimation=function(a){a==="style"?this.dirtyStyle():this.markRedraw()},n.prototype.attrKV=function(a,s){a!=="style"?t.prototype.attrKV.call(this,a,s):this.style?this.setStyle(s):this.useStyle(s)},n.prototype.setStyle=function(a,s){return typeof a=="string"?this.style[a]=s:extend(this.style,a),this.dirtyStyle(),this},n.prototype.dirtyStyle=function(a){a||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},n.prototype.dirty=function(){this.dirtyStyle()},n.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},n.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},n.prototype.createStyle=function(a){return createObject(DEFAULT_COMMON_STYLE,a)},n.prototype.useStyle=function(a){a[STYLE_MAGIC_KEY]||(a=this.createStyle(a)),this.__inHover?this.__hoverStyle=a:this.style=a,this.dirtyStyle()},n.prototype.isStyleObject=function(a){return a[STYLE_MAGIC_KEY]},n.prototype._innerSaveToNormal=function(a){t.prototype._innerSaveToNormal.call(this,a);var s=this._normalState;a.style&&!s.style&&(s.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(a,s,PRIMARY_STATES_KEYS)},n.prototype._applyStateObj=function(a,s,l,u,c,p){t.prototype._applyStateObj.call(this,a,s,l,u,c,p);var d=!(s&&u),x;if(s&&s.style?c?u?x=s.style:(x=this._mergeStyle(this.createStyle(),l.style),this._mergeStyle(x,s.style)):(x=this._mergeStyle(this.createStyle(),u?this.style:l.style),this._mergeStyle(x,s.style)):d&&(x=l.style),x)if(c){var _=this.style;if(this.style=this.createStyle(d?{}:_),d)for(var S=keys(_),T=0;T<S.length;T++){var A=S[T];A in x&&(x[A]=x[A],this.style[A]=_[A])}for(var R=keys(x),T=0;T<R.length;T++){var A=R[T];this.style[A]=this.style[A]}this._transitionState(a,{style:x},p,this.getAnimationStyleProps())}else this.useStyle(x);for(var D=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,T=0;T<D.length;T++){var A=D[T];s&&s[A]!=null?this[A]=s[A]:d&&l[A]!=null&&(this[A]=l[A])}},n.prototype._mergeStates=function(a){for(var s=t.prototype._mergeStates.call(this,a),l,u=0;u<a.length;u++){var c=a[u];c.style&&(l=l||{},this._mergeStyle(l,c.style))}return l&&(s.style=l),s},n.prototype._mergeStyle=function(a,s){return extend(a,s),a},n.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},n.initDefaultProps=function(){var a=n.prototype;a.type="displayable",a.invisible=!1,a.z=0,a.z2=0,a.zlevel=0,a.culling=!1,a.cursor="pointer",a.rectHover=!1,a.incremental=!1,a._rect=null,a.dirtyRectTolerance=0,a.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),n}(Element$1),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(t,n,a){return tmpRect.copy(t.getBoundingRect()),t.transform&&tmpRect.applyTransform(t.transform),viewRect.width=n,viewRect.height=a,!tmpRect.intersect(viewRect)}var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(t,n,a){if(t.length!==0){for(var s=t[0],l=s[0],u=s[0],c=s[1],p=s[1],d=1;d<t.length;d++)s=t[d],l=mathMin$9(l,s[0]),u=mathMax$9(u,s[0]),c=mathMin$9(c,s[1]),p=mathMax$9(p,s[1]);n[0]=l,n[1]=c,a[0]=u,a[1]=p}}function fromLine(t,n,a,s,l,u){l[0]=mathMin$9(t,a),l[1]=mathMin$9(n,s),u[0]=mathMax$9(t,a),u[1]=mathMax$9(n,s)}var xDim=[],yDim=[];function fromCubic(t,n,a,s,l,u,c,p,d,x){var _=cubicExtrema,S=cubicAt,T=_(t,a,l,c,xDim);d[0]=1/0,d[1]=1/0,x[0]=-1/0,x[1]=-1/0;for(var A=0;A<T;A++){var R=S(t,a,l,c,xDim[A]);d[0]=mathMin$9(R,d[0]),x[0]=mathMax$9(R,x[0])}T=_(n,s,u,p,yDim);for(var A=0;A<T;A++){var D=S(n,s,u,p,yDim[A]);d[1]=mathMin$9(D,d[1]),x[1]=mathMax$9(D,x[1])}d[0]=mathMin$9(t,d[0]),x[0]=mathMax$9(t,x[0]),d[0]=mathMin$9(c,d[0]),x[0]=mathMax$9(c,x[0]),d[1]=mathMin$9(n,d[1]),x[1]=mathMax$9(n,x[1]),d[1]=mathMin$9(p,d[1]),x[1]=mathMax$9(p,x[1])}function fromQuadratic(t,n,a,s,l,u,c,p){var d=quadraticExtremum,x=quadraticAt$1,_=mathMax$9(mathMin$9(d(t,a,l),1),0),S=mathMax$9(mathMin$9(d(n,s,u),1),0),T=x(t,a,l,_),A=x(n,s,u,S);c[0]=mathMin$9(t,l,T),c[1]=mathMin$9(n,u,A),p[0]=mathMax$9(t,l,T),p[1]=mathMax$9(n,u,A)}function fromArc(t,n,a,s,l,u,c,p,d){var x=min$1,_=max$1,S=Math.abs(l-u);if(S%PI2$8<1e-4&&S>1e-4){p[0]=t-a,p[1]=n-s,d[0]=t+a,d[1]=n+s;return}if(start[0]=mathCos$4(l)*a+t,start[1]=mathSin$4(l)*s+n,end[0]=mathCos$4(u)*a+t,end[1]=mathSin$4(u)*s+n,x(p,start,end),_(d,start,end),l=l%PI2$8,l<0&&(l=l+PI2$8),u=u%PI2$8,u<0&&(u=u+PI2$8),l>u&&!c?u+=PI2$8:l<u&&c&&(l+=PI2$8),c){var T=u;u=l,l=T}for(var A=0;A<u;A+=Math.PI/2)A>l&&(extremity[0]=mathCos$4(A)*a+t,extremity[1]=mathSin$4(A)*s+n,x(p,extremity,p),_(d,extremity,d))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(t){var n=Math.round(t/PI$8*1e8)/1e8;return n%2*PI$8}function normalizeArcAngles(t,n){var a=modPI2(t[0]);a<0&&(a+=PI2$7);var s=a-t[0],l=t[1];l+=s,!n&&l-a>=PI2$7?l=a+PI2$7:n&&a-l>=PI2$7?l=a-PI2$7:!n&&a>l?l=a+(PI2$7-modPI2(a-l)):n&&a<l&&(l=a-(PI2$7-modPI2(l-a))),t[0]=a,t[1]=l}var PathProxy=function(){function t(n){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,n&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(n,a,s){s=s||0,s>0&&(this._ux=mathAbs$2(s/devicePixelRatio/n)||0,this._uy=mathAbs$2(s/devicePixelRatio/a)||0)},t.prototype.setDPR=function(n){this.dpr=n},t.prototype.setContext=function(n){this._ctx=n},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(n,a){return this._drawPendingPt(),this.addData(CMD$4.M,n,a),this._ctx&&this._ctx.moveTo(n,a),this._x0=n,this._y0=a,this._xi=n,this._yi=a,this},t.prototype.lineTo=function(n,a){var s=mathAbs$2(n-this._xi),l=mathAbs$2(a-this._yi),u=s>this._ux||l>this._uy;if(this.addData(CMD$4.L,n,a),this._ctx&&u&&this._ctx.lineTo(n,a),u)this._xi=n,this._yi=a,this._pendingPtDist=0;else{var c=s*s+l*l;c>this._pendingPtDist&&(this._pendingPtX=n,this._pendingPtY=a,this._pendingPtDist=c)}return this},t.prototype.bezierCurveTo=function(n,a,s,l,u,c){return this._drawPendingPt(),this.addData(CMD$4.C,n,a,s,l,u,c),this._ctx&&this._ctx.bezierCurveTo(n,a,s,l,u,c),this._xi=u,this._yi=c,this},t.prototype.quadraticCurveTo=function(n,a,s,l){return this._drawPendingPt(),this.addData(CMD$4.Q,n,a,s,l),this._ctx&&this._ctx.quadraticCurveTo(n,a,s,l),this._xi=s,this._yi=l,this},t.prototype.arc=function(n,a,s,l,u,c){this._drawPendingPt(),tmpAngles[0]=l,tmpAngles[1]=u,normalizeArcAngles(tmpAngles,c),l=tmpAngles[0],u=tmpAngles[1];var p=u-l;return this.addData(CMD$4.A,n,a,s,s,l,p,0,c?0:1),this._ctx&&this._ctx.arc(n,a,s,l,u,c),this._xi=mathCos$3(u)*s+n,this._yi=mathSin$3(u)*s+a,this},t.prototype.arcTo=function(n,a,s,l,u){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(n,a,s,l,u),this},t.prototype.rect=function(n,a,s,l){return this._drawPendingPt(),this._ctx&&this._ctx.rect(n,a,s,l),this.addData(CMD$4.R,n,a,s,l),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var n=this._ctx,a=this._x0,s=this._y0;return n&&n.closePath(),this._xi=a,this._yi=s,this},t.prototype.fill=function(n){n&&n.fill(),this.toStatic()},t.prototype.stroke=function(n){n&&n.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(n){var a=n.length;!(this.data&&this.data.length===a)&&hasTypedArray&&(this.data=new Float32Array(a));for(var s=0;s<a;s++)this.data[s]=n[s];this._len=a},t.prototype.appendPath=function(n){n instanceof Array||(n=[n]);for(var a=n.length,s=0,l=this._len,u=0;u<a;u++)s+=n[u].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(l+s));for(var u=0;u<a;u++)for(var c=n[u].data,p=0;p<c.length;p++)this.data[l++]=c[p];this._len=l},t.prototype.addData=function(n,a,s,l,u,c,p,d,x){if(this._saveData){var _=this.data;this._len+arguments.length>_.length&&(this._expandData(),_=this.data);for(var S=0;S<arguments.length;S++)_[this._len++]=arguments[S]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var n=[],a=0;a<this._len;a++)n[a]=this.data[a];this.data=n}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var n=this.data;n instanceof Array&&(n.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(n)))}},t.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var n=this.data,a=0,s=0,l=0,u=0,c;for(c=0;c<this._len;){var p=n[c++],d=c===1;switch(d&&(a=n[c],s=n[c+1],l=a,u=s),p){case CMD$4.M:a=l=n[c++],s=u=n[c++],min2[0]=l,min2[1]=u,max2[0]=l,max2[1]=u;break;case CMD$4.L:fromLine(a,s,n[c],n[c+1],min2,max2),a=n[c++],s=n[c++];break;case CMD$4.C:fromCubic(a,s,n[c++],n[c++],n[c++],n[c++],n[c],n[c+1],min2,max2),a=n[c++],s=n[c++];break;case CMD$4.Q:fromQuadratic(a,s,n[c++],n[c++],n[c],n[c+1],min2,max2),a=n[c++],s=n[c++];break;case CMD$4.A:var x=n[c++],_=n[c++],S=n[c++],T=n[c++],A=n[c++],R=n[c++]+A;c+=1;var D=!n[c++];d&&(l=mathCos$3(A)*S+x,u=mathSin$3(A)*T+_),fromArc(x,_,S,T,A,R,D,min2,max2),a=mathCos$3(R)*S+x,s=mathSin$3(R)*T+_;break;case CMD$4.R:l=a=n[c++],u=s=n[c++];var O=n[c++],F=n[c++];fromLine(l,u,l+O,u+F,min2,max2);break;case CMD$4.Z:a=l,s=u;break}min$1(min,min,min2),max$1(max,max,max2)}return c===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},t.prototype._calculateLength=function(){var n=this.data,a=this._len,s=this._ux,l=this._uy,u=0,c=0,p=0,d=0;this._pathSegLen||(this._pathSegLen=[]);for(var x=this._pathSegLen,_=0,S=0,T=0;T<a;){var A=n[T++],R=T===1;R&&(u=n[T],c=n[T+1],p=u,d=c);var D=-1;switch(A){case CMD$4.M:u=p=n[T++],c=d=n[T++];break;case CMD$4.L:{var O=n[T++],F=n[T++],z=O-u,j=F-c;(mathAbs$2(z)>s||mathAbs$2(j)>l||T===a-1)&&(D=Math.sqrt(z*z+j*j),u=O,c=F);break}case CMD$4.C:{var Z=n[T++],W=n[T++],O=n[T++],F=n[T++],J=n[T++],en=n[T++];D=cubicLength(u,c,Z,W,O,F,J,en,10),u=J,c=en;break}case CMD$4.Q:{var Z=n[T++],W=n[T++],O=n[T++],F=n[T++];D=quadraticLength(u,c,Z,W,O,F,10),u=O,c=F;break}case CMD$4.A:var tn=n[T++],Ct=n[T++],Q=n[T++],on=n[T++],gn=n[T++],In=n[T++],dn=In+gn;T+=1,R&&(p=mathCos$3(gn)*Q+tn,d=mathSin$3(gn)*on+Ct),D=mathMax$8(Q,on)*mathMin$8(PI2$7,Math.abs(In)),u=mathCos$3(dn)*Q+tn,c=mathSin$3(dn)*on+Ct;break;case CMD$4.R:{p=u=n[T++],d=c=n[T++];var ix=n[T++],Cn=n[T++];D=ix*2+Cn*2;break}case CMD$4.Z:{var z=p-u,j=d-c;D=Math.sqrt(z*z+j*j),u=p,c=d;break}}D>=0&&(x[S++]=D,_+=D)}return this._pathLen=_,_},t.prototype.rebuildPath=function(n,a){var s=this.data,l=this._ux,u=this._uy,c=this._len,p,d,x,_,S,T,A=a<1,R,D,O=0,F=0,z,j=0,Z,W;if(!(A&&(this._pathSegLen||this._calculateLength(),R=this._pathSegLen,D=this._pathLen,z=a*D,!z)))e:for(var J=0;J<c;){var en=s[J++],tn=J===1;switch(tn&&(x=s[J],_=s[J+1],p=x,d=_),en!==CMD$4.L&&j>0&&(n.lineTo(Z,W),j=0),en){case CMD$4.M:p=x=s[J++],d=_=s[J++],n.moveTo(x,_);break;case CMD$4.L:{S=s[J++],T=s[J++];var Ct=mathAbs$2(S-x),Q=mathAbs$2(T-_);if(Ct>l||Q>u){if(A){var on=R[F++];if(O+on>z){var gn=(z-O)/on;n.lineTo(x*(1-gn)+S*gn,_*(1-gn)+T*gn);break e}O+=on}n.lineTo(S,T),x=S,_=T,j=0}else{var In=Ct*Ct+Q*Q;In>j&&(Z=S,W=T,j=In)}break}case CMD$4.C:{var dn=s[J++],ix=s[J++],Cn=s[J++],ax=s[J++],sx=s[J++],lx=s[J++];if(A){var on=R[F++];if(O+on>z){var gn=(z-O)/on;cubicSubdivide(x,dn,Cn,sx,gn,tmpOutX),cubicSubdivide(_,ix,ax,lx,gn,tmpOutY),n.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}O+=on}n.bezierCurveTo(dn,ix,Cn,ax,sx,lx),x=sx,_=lx;break}case CMD$4.Q:{var dn=s[J++],ix=s[J++],Cn=s[J++],ax=s[J++];if(A){var on=R[F++];if(O+on>z){var gn=(z-O)/on;quadraticSubdivide(x,dn,Cn,gn,tmpOutX),quadraticSubdivide(_,ix,ax,gn,tmpOutY),n.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}O+=on}n.quadraticCurveTo(dn,ix,Cn,ax),x=Cn,_=ax;break}case CMD$4.A:var ox=s[J++],hx=s[J++],_x=s[J++],ux=s[J++],px=s[J++],dx=s[J++],mx=s[J++],gx=!s[J++],Sx=_x>ux?_x:ux,Ex=mathAbs$2(_x-ux)>.001,Cx=px+dx,Ax=!1;if(A){var on=R[F++];O+on>z&&(Cx=px+dx*(z-O)/on,Ax=!0),O+=on}if(Ex&&n.ellipse?n.ellipse(ox,hx,_x,ux,mx,px,Cx,gx):n.arc(ox,hx,Sx,px,Cx,gx),Ax)break e;tn&&(p=mathCos$3(px)*_x+ox,d=mathSin$3(px)*ux+hx),x=mathCos$3(Cx)*_x+ox,_=mathSin$3(Cx)*ux+hx;break;case CMD$4.R:p=x=s[J],d=_=s[J+1],S=s[J++],T=s[J++];var Tx=s[J++],kx=s[J++];if(A){var on=R[F++];if(O+on>z){var Rx=z-O;n.moveTo(S,T),n.lineTo(S+mathMin$8(Rx,Tx),T),Rx-=Tx,Rx>0&&n.lineTo(S+Tx,T+mathMin$8(Rx,kx)),Rx-=kx,Rx>0&&n.lineTo(S+mathMax$8(Tx-Rx,0),T+kx),Rx-=Tx,Rx>0&&n.lineTo(S,T+mathMax$8(kx-Rx,0));break e}O+=on}n.rect(S,T,Tx,kx);break;case CMD$4.Z:if(A){var on=R[F++];if(O+on>z){var gn=(z-O)/on;n.lineTo(x*(1-gn)+p*gn,_*(1-gn)+d*gn);break e}O+=on}n.closePath(),x=p,_=d}}},t.prototype.clone=function(){var n=new t,a=this.data;return n.data=a.slice?a.slice():Array.prototype.slice.call(a),n._len=this._len,n},t.CMD=CMD$4,t.initDefaultProps=function(){var n=t.prototype;n._saveData=!0,n._ux=0,n._uy=0,n._pendingPtDist=0,n._version=0}(),t}();function containStroke$4(t,n,a,s,l,u,c){if(l===0)return!1;var p=l,d=0,x=t;if(c>n+p&&c>s+p||c<n-p&&c<s-p||u>t+p&&u>a+p||u<t-p&&u<a-p)return!1;if(t!==a)d=(n-s)/(t-a),x=(t*s-a*n)/(t-a);else return Math.abs(u-t)<=p/2;var _=d*u-c+x,S=_*_/(d*d+1);return S<=p/2*p/2}function containStroke$3(t,n,a,s,l,u,c,p,d,x,_){if(d===0)return!1;var S=d;if(_>n+S&&_>s+S&&_>u+S&&_>p+S||_<n-S&&_<s-S&&_<u-S&&_<p-S||x>t+S&&x>a+S&&x>l+S&&x>c+S||x<t-S&&x<a-S&&x<l-S&&x<c-S)return!1;var T=cubicProjectPoint(t,n,a,s,l,u,c,p,x,_,null);return T<=S/2}function containStroke$2(t,n,a,s,l,u,c,p,d){if(c===0)return!1;var x=c;if(d>n+x&&d>s+x&&d>u+x||d<n-x&&d<s-x&&d<u-x||p>t+x&&p>a+x&&p>l+x||p<t-x&&p<a-x&&p<l-x)return!1;var _=quadraticProjectPoint(t,n,a,s,l,u,p,d,null);return _<=x/2}var PI2$6=Math.PI*2;function normalizeRadian(t){return t%=PI2$6,t<0&&(t+=PI2$6),t}var PI2$5=Math.PI*2;function containStroke$1(t,n,a,s,l,u,c,p,d){if(c===0)return!1;var x=c;p-=t,d-=n;var _=Math.sqrt(p*p+d*d);if(_-x>a||_+x<a)return!1;if(Math.abs(s-l)%PI2$5<1e-4)return!0;if(u){var S=s;s=normalizeRadian(l),l=normalizeRadian(S)}else s=normalizeRadian(s),l=normalizeRadian(l);s>l&&(l+=PI2$5);var T=Math.atan2(d,p);return T<0&&(T+=PI2$5),T>=s&&T<=l||T+PI2$5>=s&&T+PI2$5<=l}function windingLine(t,n,a,s,l,u){if(u>n&&u>s||u<n&&u<s||s===n)return 0;var c=(u-n)/(s-n),p=s<n?1:-1;(c===1||c===0)&&(p=s<n?.5:-.5);var d=c*(a-t)+t;return d===l?1/0:d>l?p:0}var CMD$3=PathProxy.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(t,n){return Math.abs(t-n)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var t=extrema[0];extrema[0]=extrema[1],extrema[1]=t}function windingCubic(t,n,a,s,l,u,c,p,d,x){if(x>n&&x>s&&x>u&&x>p||x<n&&x<s&&x<u&&x<p)return 0;var _=cubicRootAt(n,s,u,p,x,roots);if(_===0)return 0;for(var S=0,T=-1,A=void 0,R=void 0,D=0;D<_;D++){var O=roots[D],F=O===0||O===1?.5:1,z=cubicAt(t,a,l,c,O);z<d||(T<0&&(T=cubicExtrema(n,s,u,p,extrema),extrema[1]<extrema[0]&&T>1&&swapExtrema(),A=cubicAt(n,s,u,p,extrema[0]),T>1&&(R=cubicAt(n,s,u,p,extrema[1]))),T===2?O<extrema[0]?S+=A<n?F:-F:O<extrema[1]?S+=R<A?F:-F:S+=p<R?F:-F:O<extrema[0]?S+=A<n?F:-F:S+=p<A?F:-F)}return S}function windingQuadratic(t,n,a,s,l,u,c,p){if(p>n&&p>s&&p>u||p<n&&p<s&&p<u)return 0;var d=quadraticRootAt(n,s,u,p,roots);if(d===0)return 0;var x=quadraticExtremum(n,s,u);if(x>=0&&x<=1){for(var _=0,S=quadraticAt$1(n,s,u,x),T=0;T<d;T++){var A=roots[T]===0||roots[T]===1?.5:1,R=quadraticAt$1(t,a,l,roots[T]);R<c||(roots[T]<x?_+=S<n?A:-A:_+=u<S?A:-A)}return _}else{var A=roots[0]===0||roots[0]===1?.5:1,R=quadraticAt$1(t,a,l,roots[0]);return R<c?0:u<n?A:-A}}function windingArc(t,n,a,s,l,u,c,p){if(p-=n,p>a||p<-a)return 0;var d=Math.sqrt(a*a-p*p);roots[0]=-d,roots[1]=d;var x=Math.abs(s-l);if(x<1e-4)return 0;if(x>=PI2$4-1e-4){s=0,l=PI2$4;var _=u?1:-1;return c>=roots[0]+t&&c<=roots[1]+t?_:0}if(s>l){var S=s;s=l,l=S}s<0&&(s+=PI2$4,l+=PI2$4);for(var T=0,A=0;A<2;A++){var R=roots[A];if(R+t>c){var D=Math.atan2(p,R),_=u?1:-1;D<0&&(D=PI2$4+D),(D>=s&&D<=l||D+PI2$4>=s&&D+PI2$4<=l)&&(D>Math.PI/2&&D<Math.PI*1.5&&(_=-_),T+=_)}}return T}function containPath(t,n,a,s,l){for(var u=t.data,c=t.len(),p=0,d=0,x=0,_=0,S=0,T,A,R=0;R<c;){var D=u[R++],O=R===1;switch(D===CMD$3.M&&R>1&&(a||(p+=windingLine(d,x,_,S,s,l))),O&&(d=u[R],x=u[R+1],_=d,S=x),D){case CMD$3.M:_=u[R++],S=u[R++],d=_,x=S;break;case CMD$3.L:if(a){if(containStroke$4(d,x,u[R],u[R+1],n,s,l))return!0}else p+=windingLine(d,x,u[R],u[R+1],s,l)||0;d=u[R++],x=u[R++];break;case CMD$3.C:if(a){if(containStroke$3(d,x,u[R++],u[R++],u[R++],u[R++],u[R],u[R+1],n,s,l))return!0}else p+=windingCubic(d,x,u[R++],u[R++],u[R++],u[R++],u[R],u[R+1],s,l)||0;d=u[R++],x=u[R++];break;case CMD$3.Q:if(a){if(containStroke$2(d,x,u[R++],u[R++],u[R],u[R+1],n,s,l))return!0}else p+=windingQuadratic(d,x,u[R++],u[R++],u[R],u[R+1],s,l)||0;d=u[R++],x=u[R++];break;case CMD$3.A:var F=u[R++],z=u[R++],j=u[R++],Z=u[R++],W=u[R++],J=u[R++];R+=1;var en=!!(1-u[R++]);T=Math.cos(W)*j+F,A=Math.sin(W)*Z+z,O?(_=T,S=A):p+=windingLine(d,x,T,A,s,l);var tn=(s-F)*Z/j+F;if(a){if(containStroke$1(F,z,Z,W,W+J,en,n,tn,l))return!0}else p+=windingArc(F,z,Z,W,W+J,en,tn,l);d=Math.cos(W+J)*j+F,x=Math.sin(W+J)*Z+z;break;case CMD$3.R:_=d=u[R++],S=x=u[R++];var Ct=u[R++],Q=u[R++];if(T=_+Ct,A=S+Q,a){if(containStroke$4(_,S,T,S,n,s,l)||containStroke$4(T,S,T,A,n,s,l)||containStroke$4(T,A,_,A,n,s,l)||containStroke$4(_,A,_,S,n,s,l))return!0}else p+=windingLine(T,S,T,A,s,l),p+=windingLine(_,A,_,S,s,l);break;case CMD$3.Z:if(a){if(containStroke$4(d,x,_,S,n,s,l))return!0}else p+=windingLine(d,x,_,S,s,l);d=_,x=S;break}}return!a&&!isAroundEqual$1(x,S)&&(p+=windingLine(d,x,_,S,s,l)||0),p!==0}function contain$2(t,n,a){return containPath(t,0,!1,n,a)}function containStroke(t,n,a,s){return containPath(t,n,!0,a,s)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.update=function(){var a=this;t.prototype.update.call(this);var s=this.style;if(s.decal){var l=this._decalEl=this._decalEl||new n;l.buildPath===n.prototype.buildPath&&(l.buildPath=function(d){a.buildPath(d,a.shape)}),l.silent=!0;var u=l.style;for(var c in s)u[c]!==s[c]&&(u[c]=s[c]);u.fill=s.fill?s.decal:null,u.decal=null,u.shadowColor=null,s.strokeFirst&&(u.stroke=null);for(var p=0;p<pathCopyParams.length;++p)l[pathCopyParams[p]]=this[pathCopyParams[p]];l.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},n.prototype.getDecalElement=function(){return this._decalEl},n.prototype._init=function(a){var s=keys(a);this.shape=this.getDefaultShape();var l=this.getDefaultStyle();l&&this.useStyle(l);for(var u=0;u<s.length;u++){var c=s[u],p=a[c];c==="style"?this.style?extend(this.style,p):this.useStyle(p):c==="shape"?extend(this.shape,p):t.prototype.attrKV.call(this,c,p)}this.style||this.useStyle({})},n.prototype.getDefaultStyle=function(){return null},n.prototype.getDefaultShape=function(){return{}},n.prototype.canBeInsideText=function(){return this.hasFill()},n.prototype.getInsideTextFill=function(){var a=this.style.fill;if(a!=="none"){if(isString$1(a)){var s=lum(a,0);return s>.5?DARK_LABEL_COLOR:s>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(a)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},n.prototype.getInsideTextStroke=function(a){var s=this.style.fill;if(isString$1(s)){var l=this.__zr,u=!!(l&&l.isDarkMode()),c=lum(a,0)<DARK_MODE_THRESHOLD;if(u===c)return s}},n.prototype.buildPath=function(a,s,l){},n.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},n.prototype.getUpdatedPathProxy=function(a){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,a),this.path},n.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},n.prototype.hasStroke=function(){var a=this.style,s=a.stroke;return!(s==null||s==="none"||!(a.lineWidth>0))},n.prototype.hasFill=function(){var a=this.style,s=a.fill;return s!=null&&s!=="none"},n.prototype.getBoundingRect=function(){var a=this._rect,s=this.style,l=!a;if(l){var u=!1;this.path||(u=!0,this.createPathProxy());var c=this.path;(u||this.__dirty&SHAPE_CHANGED_BIT)&&(c.beginPath(),this.buildPath(c,this.shape,!1),this.pathUpdated()),a=c.getBoundingRect()}if(this._rect=a,this.hasStroke()&&this.path&&this.path.len()>0){var p=this._rectStroke||(this._rectStroke=a.clone());if(this.__dirty||l){p.copy(a);var d=s.strokeNoScale?this.getLineScale():1,x=s.lineWidth;if(!this.hasFill()){var _=this.strokeContainThreshold;x=Math.max(x,_??4)}d>1e-10&&(p.width+=x/d,p.height+=x/d,p.x-=x/d/2,p.y-=x/d/2)}return p}return a},n.prototype.contain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect(),c=this.style;if(a=l[0],s=l[1],u.contain(a,s)){var p=this.path;if(this.hasStroke()){var d=c.lineWidth,x=c.strokeNoScale?this.getLineScale():1;if(x>1e-10&&(this.hasFill()||(d=Math.max(d,this.strokeContainThreshold)),containStroke(p,d/x,a,s)))return!0}if(this.hasFill())return contain$2(p,a,s)}return!1},n.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},n.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},n.prototype.animateShape=function(a){return this.animate("shape",a)},n.prototype.updateDuringAnimation=function(a){a==="style"?this.dirtyStyle():a==="shape"?this.dirtyShape():this.markRedraw()},n.prototype.attrKV=function(a,s){a==="shape"?this.setShape(s):t.prototype.attrKV.call(this,a,s)},n.prototype.setShape=function(a,s){var l=this.shape;return l||(l=this.shape={}),typeof a=="string"?l[a]=s:extend(l,a),this.dirtyShape(),this},n.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},n.prototype.createStyle=function(a){return createObject(DEFAULT_PATH_STYLE,a)},n.prototype._innerSaveToNormal=function(a){t.prototype._innerSaveToNormal.call(this,a);var s=this._normalState;a.shape&&!s.shape&&(s.shape=extend({},this.shape))},n.prototype._applyStateObj=function(a,s,l,u,c,p){t.prototype._applyStateObj.call(this,a,s,l,u,c,p);var d=!(s&&u),x;if(s&&s.shape?c?u?x=s.shape:(x=extend({},l.shape),extend(x,s.shape)):(x=extend({},u?this.shape:l.shape),extend(x,s.shape)):d&&(x=l.shape),x)if(c){this.shape=extend({},this.shape);for(var _={},S=keys(x),T=0;T<S.length;T++){var A=S[T];typeof x[A]=="object"?this.shape[A]=x[A]:_[A]=x[A]}this._transitionState(a,{shape:_},p)}else this.shape=x,this.dirtyShape()},n.prototype._mergeStates=function(a){for(var s=t.prototype._mergeStates.call(this,a),l,u=0;u<a.length;u++){var c=a[u];c.shape&&(l=l||{},this._mergeStyle(l,c.shape))}return l&&(s.shape=l),s},n.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},n.prototype.isZeroArea=function(){return!1},n.extend=function(a){var s=function(u){__extends(c,u);function c(p){var d=u.call(this,p)||this;return a.init&&a.init.call(d,p),d}return c.prototype.getDefaultStyle=function(){return clone$4(a.style)},c.prototype.getDefaultShape=function(){return clone$4(a.shape)},c}(n);for(var l in a)typeof a[l]=="function"&&(s.prototype[l]=a[l]);return s},n.initDefaultProps=function(){var a=n.prototype;a.type="path",a.strokeContainThreshold=5,a.segmentIgnoreThreshold=0,a.subPixelOptimize=!1,a.autoBatch=!1,a.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),n}(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.hasStroke=function(){var a=this.style,s=a.stroke;return s!=null&&s!=="none"&&a.lineWidth>0},n.prototype.hasFill=function(){var a=this.style,s=a.fill;return s!=null&&s!=="none"},n.prototype.createStyle=function(a){return createObject(DEFAULT_TSPAN_STYLE,a)},n.prototype.setBoundingRect=function(a){this._rect=a},n.prototype.getBoundingRect=function(){var a=this.style;if(!this._rect){var s=a.text;s!=null?s+="":s="";var l=getBoundingRect(s,a.font,a.textAlign,a.textBaseline);if(l.x+=a.x||0,l.y+=a.y||0,this.hasStroke()){var u=a.lineWidth;l.x-=u/2,l.y-=u/2,l.width+=u,l.height+=u}this._rect=l}return this._rect},n.initDefaultProps=function(){var a=n.prototype;a.dirtyRectTolerance=10}(),n}(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(t){return!!(t&&typeof t!="string"&&t.width&&t.height)}var ZRImage=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.createStyle=function(a){return createObject(DEFAULT_IMAGE_STYLE,a)},n.prototype._getSize=function(a){var s=this.style,l=s[a];if(l!=null)return l;var u=isImageLike$1(s.image)?s.image:this.__image;if(!u)return 0;var c=a==="width"?"height":"width",p=s[c];return p==null?u[a]:u[a]/u[c]*p},n.prototype.getWidth=function(){return this._getSize("width")},n.prototype.getHeight=function(){return this._getSize("height")},n.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},n.prototype.getBoundingRect=function(){var a=this.style;return this._rect||(this._rect=new BoundingRect(a.x||0,a.y||0,this.getWidth(),this.getHeight())),this._rect},n}(Displayable);ZRImage.prototype.type="image";function buildPath$2(t,n){var a=n.x,s=n.y,l=n.width,u=n.height,c=n.r,p,d,x,_;l<0&&(a=a+l,l=-l),u<0&&(s=s+u,u=-u),typeof c=="number"?p=d=x=_=c:c instanceof Array?c.length===1?p=d=x=_=c[0]:c.length===2?(p=x=c[0],d=_=c[1]):c.length===3?(p=c[0],d=_=c[1],x=c[2]):(p=c[0],d=c[1],x=c[2],_=c[3]):p=d=x=_=0;var S;p+d>l&&(S=p+d,p*=l/S,d*=l/S),x+_>l&&(S=x+_,x*=l/S,_*=l/S),d+x>u&&(S=d+x,d*=u/S,x*=u/S),p+_>u&&(S=p+_,p*=u/S,_*=u/S),t.moveTo(a+p,s),t.lineTo(a+l-d,s),d!==0&&t.arc(a+l-d,s+d,d,-Math.PI/2,0),t.lineTo(a+l,s+u-x),x!==0&&t.arc(a+l-x,s+u-x,x,0,Math.PI/2),t.lineTo(a+_,s+u),_!==0&&t.arc(a+_,s+u-_,_,Math.PI/2,Math.PI),t.lineTo(a,s+p),p!==0&&t.arc(a+p,s+p,p,Math.PI,Math.PI*1.5)}var round$2=Math.round;function subPixelOptimizeLine$1(t,n,a){if(n){var s=n.x1,l=n.x2,u=n.y1,c=n.y2;t.x1=s,t.x2=l,t.y1=u,t.y2=c;var p=a&&a.lineWidth;return p&&(round$2(s*2)===round$2(l*2)&&(t.x1=t.x2=subPixelOptimize$1(s,p,!0)),round$2(u*2)===round$2(c*2)&&(t.y1=t.y2=subPixelOptimize$1(u,p,!0))),t}}function subPixelOptimizeRect$1(t,n,a){if(n){var s=n.x,l=n.y,u=n.width,c=n.height;t.x=s,t.y=l,t.width=u,t.height=c;var p=a&&a.lineWidth;return p&&(t.x=subPixelOptimize$1(s,p,!0),t.y=subPixelOptimize$1(l,p,!0),t.width=Math.max(subPixelOptimize$1(s+u,p,!1)-t.x,u===0?0:1),t.height=Math.max(subPixelOptimize$1(l+c,p,!1)-t.y,c===0?0:1)),t}}function subPixelOptimize$1(t,n,a){if(!n)return t;var s=round$2(t*2);return(s+round$2(n))%2===0?s/2:(s+(a?1:-1))/2}var RectShape=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t}(),subPixelOptimizeOutputShape$1={},Rect$2=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new RectShape},n.prototype.buildPath=function(a,s){var l,u,c,p;if(this.subPixelOptimize){var d=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,s,this.style);l=d.x,u=d.y,c=d.width,p=d.height,d.r=s.r,s=d}else l=s.x,u=s.y,c=s.width,p=s.height;s.r?buildPath$2(a,s):a.rect(l,u,c,p)},n.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},n}(Path);Rect$2.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s.type="text",s._children=[],s._defaultStyle=DEFAULT_RICH_TEXT_COLOR,s.attr(a),s}return n.prototype.childrenRef=function(){return this._children},n.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var a=0;a<this._children.length;a++){var s=this._children[a];s.zlevel=this.zlevel,s.z=this.z,s.z2=this.z2,s.culling=this.culling,s.cursor=this.cursor,s.invisible=this.invisible}},n.prototype.updateTransform=function(){var a=this.innerTransformable;a?(a.updateTransform(),a.transform&&(this.transform=a.transform)):t.prototype.updateTransform.call(this)},n.prototype.getLocalTransform=function(a){var s=this.innerTransformable;return s?s.getLocalTransform(a):t.prototype.getLocalTransform.call(this,a)},n.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},n.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},n.prototype.addSelfToZr=function(a){t.prototype.addSelfToZr.call(this,a);for(var s=0;s<this._children.length;s++)this._children[s].__zr=a},n.prototype.removeSelfFromZr=function(a){t.prototype.removeSelfFromZr.call(this,a);for(var s=0;s<this._children.length;s++)this._children[s].__zr=null},n.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var a=new BoundingRect(0,0,0,0),s=this._children,l=[],u=null,c=0;c<s.length;c++){var p=s[c],d=p.getBoundingRect(),x=p.getLocalTransform(l);x?(a.copy(d),a.applyTransform(x),u=u||a.clone(),u.union(a)):(u=u||d.clone(),u.union(d))}this._rect=u||a}return this._rect},n.prototype.setDefaultTextStyle=function(a){this._defaultStyle=a||DEFAULT_RICH_TEXT_COLOR},n.prototype.setTextContent=function(a){},n.prototype._mergeStyle=function(a,s){if(!s)return a;var l=s.rich,u=a.rich||l&&{};return extend(a,s),l&&u?(this._mergeRich(u,l),a.rich=u):u&&(a.rich=u),a},n.prototype._mergeRich=function(a,s){for(var l=keys(s),u=0;u<l.length;u++){var c=l[u];a[c]=a[c]||{},extend(a[c],s[c])}},n.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},n.prototype._getOrCreateChild=function(a){var s=this._children[this._childCursor];return(!s||!(s instanceof a))&&(s=new a),this._children[this._childCursor++]=s,s.__zr=this.__zr,s.parent=this,s},n.prototype._updatePlainTexts=function(){var a=this.style,s=a.font||DEFAULT_FONT,l=a.padding,u=getStyleText(a),c=parsePlainText(u,a),p=needDrawBackground(a),d=!!a.backgroundColor,x=c.outerHeight,_=c.outerWidth,S=c.contentWidth,T=c.lines,A=c.lineHeight,R=this._defaultStyle;this.isTruncated=!!c.isTruncated;var D=a.x||0,O=a.y||0,F=a.align||R.align||"left",z=a.verticalAlign||R.verticalAlign||"top",j=D,Z=adjustTextY(O,c.contentHeight,z);if(p||l){var W=adjustTextX(D,_,F),J=adjustTextY(O,x,z);p&&this._renderBackground(a,a,W,J,_,x)}Z+=A/2,l&&(j=getTextXForPadding(D,F,l),z==="top"?Z+=l[0]:z==="bottom"&&(Z-=l[2]));for(var en=0,tn=!1,Ct=getFill("fill"in a?a.fill:(tn=!0,R.fill)),Q=getStroke("stroke"in a?a.stroke:!d&&(!R.autoStroke||tn)?(en=DEFAULT_STROKE_LINE_WIDTH,R.stroke):null),on=a.textShadowBlur>0,gn=a.width!=null&&(a.overflow==="truncate"||a.overflow==="break"||a.overflow==="breakAll"),In=c.calculatedLineHeight,dn=0;dn<T.length;dn++){var ix=this._getOrCreateChild(TSpan),Cn=ix.createStyle();ix.useStyle(Cn),Cn.text=T[dn],Cn.x=j,Cn.y=Z,Cn.textAlign=F,Cn.textBaseline="middle",Cn.opacity=a.opacity,Cn.strokeFirst=!0,on&&(Cn.shadowBlur=a.textShadowBlur||0,Cn.shadowColor=a.textShadowColor||"transparent",Cn.shadowOffsetX=a.textShadowOffsetX||0,Cn.shadowOffsetY=a.textShadowOffsetY||0),Cn.stroke=Q,Cn.fill=Ct,Q&&(Cn.lineWidth=a.lineWidth||en,Cn.lineDash=a.lineDash,Cn.lineDashOffset=a.lineDashOffset||0),Cn.font=s,setSeparateFont(Cn,a),Z+=A,gn&&ix.setBoundingRect(new BoundingRect(adjustTextX(Cn.x,S,Cn.textAlign),adjustTextY(Cn.y,In,Cn.textBaseline),S,In))}},n.prototype._updateRichTexts=function(){var a=this.style,s=getStyleText(a),l=parseRichText(s,a),u=l.width,c=l.outerWidth,p=l.outerHeight,d=a.padding,x=a.x||0,_=a.y||0,S=this._defaultStyle,T=a.align||S.align,A=a.verticalAlign||S.verticalAlign;this.isTruncated=!!l.isTruncated;var R=adjustTextX(x,c,T),D=adjustTextY(_,p,A),O=R,F=D;d&&(O+=d[3],F+=d[0]);var z=O+u;needDrawBackground(a)&&this._renderBackground(a,a,R,D,c,p);for(var j=!!a.backgroundColor,Z=0;Z<l.lines.length;Z++){for(var W=l.lines[Z],J=W.tokens,en=J.length,tn=W.lineHeight,Ct=W.width,Q=0,on=O,gn=z,In=en-1,dn=void 0;Q<en&&(dn=J[Q],!dn.align||dn.align==="left");)this._placeToken(dn,a,tn,F,on,"left",j),Ct-=dn.width,on+=dn.width,Q++;for(;In>=0&&(dn=J[In],dn.align==="right");)this._placeToken(dn,a,tn,F,gn,"right",j),Ct-=dn.width,gn-=dn.width,In--;for(on+=(u-(on-O)-(z-gn)-Ct)/2;Q<=In;)dn=J[Q],this._placeToken(dn,a,tn,F,on+dn.width/2,"center",j),on+=dn.width,Q++;F+=tn}},n.prototype._placeToken=function(a,s,l,u,c,p,d){var x=s.rich[a.styleName]||{};x.text=a.text;var _=a.verticalAlign,S=u+l/2;_==="top"?S=u+a.height/2:_==="bottom"&&(S=u+l-a.height/2);var T=!a.isLineHolder&&needDrawBackground(x);T&&this._renderBackground(x,s,p==="right"?c-a.width:p==="center"?c-a.width/2:c,S-a.height/2,a.width,a.height);var A=!!x.backgroundColor,R=a.textPadding;R&&(c=getTextXForPadding(c,p,R),S-=a.height/2-R[0]-a.innerHeight/2);var D=this._getOrCreateChild(TSpan),O=D.createStyle();D.useStyle(O);var F=this._defaultStyle,z=!1,j=0,Z=getFill("fill"in x?x.fill:"fill"in s?s.fill:(z=!0,F.fill)),W=getStroke("stroke"in x?x.stroke:"stroke"in s?s.stroke:!A&&!d&&(!F.autoStroke||z)?(j=DEFAULT_STROKE_LINE_WIDTH,F.stroke):null),J=x.textShadowBlur>0||s.textShadowBlur>0;O.text=a.text,O.x=c,O.y=S,J&&(O.shadowBlur=x.textShadowBlur||s.textShadowBlur||0,O.shadowColor=x.textShadowColor||s.textShadowColor||"transparent",O.shadowOffsetX=x.textShadowOffsetX||s.textShadowOffsetX||0,O.shadowOffsetY=x.textShadowOffsetY||s.textShadowOffsetY||0),O.textAlign=p,O.textBaseline="middle",O.font=a.font||DEFAULT_FONT,O.opacity=retrieve3(x.opacity,s.opacity,1),setSeparateFont(O,x),W&&(O.lineWidth=retrieve3(x.lineWidth,s.lineWidth,j),O.lineDash=retrieve2(x.lineDash,s.lineDash),O.lineDashOffset=s.lineDashOffset||0,O.stroke=W),Z&&(O.fill=Z);var en=a.contentWidth,tn=a.contentHeight;D.setBoundingRect(new BoundingRect(adjustTextX(O.x,en,O.textAlign),adjustTextY(O.y,tn,O.textBaseline),en,tn))},n.prototype._renderBackground=function(a,s,l,u,c,p){var d=a.backgroundColor,x=a.borderWidth,_=a.borderColor,S=d&&d.image,T=d&&!S,A=a.borderRadius,R=this,D,O;if(T||a.lineHeight||x&&_){D=this._getOrCreateChild(Rect$2),D.useStyle(D.createStyle()),D.style.fill=null;var F=D.shape;F.x=l,F.y=u,F.width=c,F.height=p,F.r=A,D.dirtyShape()}if(T){var z=D.style;z.fill=d||null,z.fillOpacity=retrieve2(a.fillOpacity,1)}else if(S){O=this._getOrCreateChild(ZRImage),O.onload=function(){R.dirtyStyle()};var j=O.style;j.image=d.image,j.x=l,j.y=u,j.width=c,j.height=p}if(x&&_){var z=D.style;z.lineWidth=x,z.stroke=_,z.strokeOpacity=retrieve2(a.strokeOpacity,1),z.lineDash=a.borderDash,z.lineDashOffset=a.borderDashOffset||0,D.strokeContainThreshold=0,D.hasFill()&&D.hasStroke()&&(z.strokeFirst=!0,z.lineWidth*=2)}var Z=(D||O).style;Z.shadowBlur=a.shadowBlur||0,Z.shadowColor=a.shadowColor||"transparent",Z.shadowOffsetX=a.shadowOffsetX||0,Z.shadowOffsetY=a.shadowOffsetY||0,Z.opacity=retrieve3(a.opacity,s.opacity,1)},n.makeFont=function(a){var s="";return hasSeparateFont(a)&&(s=[a.fontStyle,a.fontWeight,parseFontSize(a.fontSize),a.fontFamily||"sans-serif"].join(" ")),s&&trim$1(s)||a.textFont||a.font},n}(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(t){return typeof t=="string"&&(t.indexOf("px")!==-1||t.indexOf("rem")!==-1||t.indexOf("em")!==-1)?t:isNaN(+t)?DEFAULT_FONT_SIZE+"px":t+"px"}function setSeparateFont(t,n){for(var a=0;a<FONT_PARTS.length;a++){var s=FONT_PARTS[a],l=n[s];l!=null&&(t[s]=l)}}function hasSeparateFont(t){return t.fontSize!=null||t.fontFamily||t.fontWeight}function normalizeTextStyle(t){return normalizeStyle(t),each$f(t.rich,normalizeStyle),t}function normalizeStyle(t){if(t){t.font=ZRText.makeFont(t);var n=t.align;n==="middle"&&(n="center"),t.align=n==null||VALID_TEXT_ALIGN[n]?n:"left";var a=t.verticalAlign;a==="center"&&(a="middle"),t.verticalAlign=a==null||VALID_TEXT_VERTICAL_ALIGN[a]?a:"top";var s=t.padding;s&&(t.padding=normalizeCssArray$1(t.padding))}}function getStroke(t,n){return t==null||n<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function getFill(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function getTextXForPadding(t,n,a){return n==="right"?t-a[1]:n==="center"?t+a[3]/2-a[1]/2:t+a[3]}function getStyleText(t){var n=t.text;return n!=null&&(n+=""),n}function needDrawBackground(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}var getECData=makeInner(),setCommonECData=function(t,n,a,s){if(s){var l=getECData(s);l.dataIndex=a,l.dataType=n,l.seriesIndex=t,l.ssrType="chart",s.type==="group"&&s.traverse(function(u){var c=getECData(u);c.seriesIndex=t,c.dataIndex=a,c.dataType=n,c.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(t){return t!=null&&t!=="none"}function doChangeHoverState(t,n,a){t.onHoverStateChange&&(t.hoverState||0)!==a&&t.onHoverStateChange(n),t.hoverState=a}function singleEnterEmphasis(t){doChangeHoverState(t,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(t){t.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(t,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(t){doChangeHoverState(t,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(t){t.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(t,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(t){t.selected=!0}function singleLeaveSelect(t){t.selected=!1}function updateElementState(t,n,a){n(t,a)}function traverseUpdateState(t,n,a){updateElementState(t,n,a),t.isGroup&&t.traverse(function(s){updateElementState(s,n,a)})}function setStatesFlag(t,n){switch(n){case"emphasis":t.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":t.hoverState=HOVER_STATE_NORMAL;break;case"blur":t.hoverState=HOVER_STATE_BLUR;break;case"select":t.selected=!0}}function getFromStateStyle(t,n,a,s){for(var l=t.style,u={},c=0;c<n.length;c++){var p=n[c],d=l[p];u[p]=d??(s&&s[p])}for(var c=0;c<t.animators.length;c++){var x=t.animators[c];x.__fromStateTransition&&x.__fromStateTransition.indexOf(a)<0&&x.targetName==="style"&&x.saveTo(u,n)}return u}function createEmphasisDefaultState(t,n,a,s){var l=a&&indexOf(a,"select")>=0,u=!1;if(t instanceof Path){var c=getSavedStates(t),p=l&&c.selectFill||c.normalFill,d=l&&c.selectStroke||c.normalStroke;if(hasFillOrStroke(p)||hasFillOrStroke(d)){s=s||{};var x=s.style||{};x.fill==="inherit"?(u=!0,s=extend({},s),x=extend({},x),x.fill=p):!hasFillOrStroke(x.fill)&&hasFillOrStroke(p)?(u=!0,s=extend({},s),x=extend({},x),x.fill=liftColor(p)):!hasFillOrStroke(x.stroke)&&hasFillOrStroke(d)&&(u||(s=extend({},s),x=extend({},x)),x.stroke=liftColor(d)),s.style=x}}if(s&&s.z2==null){u||(s=extend({},s));var _=t.z2EmphasisLift;s.z2=t.z2+(_??Z2_EMPHASIS_LIFT)}return s}function createSelectDefaultState(t,n,a){if(a&&a.z2==null){a=extend({},a);var s=t.z2SelectLift;a.z2=t.z2+(s??Z2_SELECT_LIFT)}return a}function createBlurDefaultState(t,n,a){var s=indexOf(t.currentStates,n)>=0,l=t.style.opacity,u=s?null:getFromStateStyle(t,["opacity"],n,{opacity:1});a=a||{};var c=a.style||{};return c.opacity==null&&(a=extend({},a),c=extend({opacity:s?l:u.opacity*.1},c),a.style=c),a}function elementStateProxy(t,n){var a=this.states[t];if(this.style){if(t==="emphasis")return createEmphasisDefaultState(this,t,n,a);if(t==="blur")return createBlurDefaultState(this,t,a);if(t==="select")return createSelectDefaultState(this,t,a)}return a}function setDefaultStateProxy(t){t.stateProxy=elementStateProxy;var n=t.getTextContent(),a=t.getTextGuideLine();n&&(n.stateProxy=elementStateProxy),a&&(a.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(t,n){!shouldSilent(t,n)&&!t.__highByOuter&&traverseUpdateState(t,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(t,n){!shouldSilent(t,n)&&!t.__highByOuter&&traverseUpdateState(t,singleLeaveEmphasis)}function enterEmphasis(t,n){t.__highByOuter|=1<<(n||0),traverseUpdateState(t,singleEnterEmphasis)}function leaveEmphasis(t,n){!(t.__highByOuter&=~(1<<(n||0)))&&traverseUpdateState(t,singleLeaveEmphasis)}function enterBlur(t){traverseUpdateState(t,singleEnterBlur)}function leaveBlur(t){traverseUpdateState(t,singleLeaveBlur)}function enterSelect(t){traverseUpdateState(t,singleEnterSelect)}function leaveSelect(t){traverseUpdateState(t,singleLeaveSelect)}function shouldSilent(t,n){return t.__highDownSilentOnTouch&&n.zrByTouch}function allLeaveBlur(t){var n=t.getModel(),a=[],s=[];n.eachComponent(function(l,u){var c=getComponentStates(u),p=l==="series",d=p?t.getViewOfSeriesModel(u):t.getViewOfComponentModel(u);!p&&s.push(d),c.isBlured&&(d.group.traverse(function(x){singleLeaveBlur(x)}),p&&a.push(u)),c.isBlured=!1}),each$f(s,function(l){l&&l.toggleBlurSeries&&l.toggleBlurSeries(a,!1,n)})}function blurSeries(t,n,a,s){var l=s.getModel();a=a||"coordinateSystem";function u(x,_){for(var S=0;S<_.length;S++){var T=x.getItemGraphicEl(_[S]);T&&leaveBlur(T)}}if(t!=null&&!(!n||n==="none")){var c=l.getSeriesByIndex(t),p=c.coordinateSystem;p&&p.master&&(p=p.master);var d=[];l.eachSeries(function(x){var _=c===x,S=x.coordinateSystem;S&&S.master&&(S=S.master);var T=S&&p?S===p:_;if(!(a==="series"&&!_||a==="coordinateSystem"&&!T||n==="series"&&_)){var A=s.getViewOfSeriesModel(x);if(A.group.traverse(function(O){O.__highByOuter&&_&&n==="self"||singleEnterBlur(O)}),isArrayLike(n))u(x.getData(),n);else if(isObject$3(n))for(var R=keys(n),D=0;D<R.length;D++)u(x.getData(R[D]),n[R[D]]);d.push(x),getComponentStates(x).isBlured=!0}}),l.eachComponent(function(x,_){if(x!=="series"){var S=s.getViewOfComponentModel(_);S&&S.toggleBlurSeries&&S.toggleBlurSeries(d,!0,l)}})}}function blurComponent(t,n,a){if(!(t==null||n==null)){var s=a.getModel().getComponent(t,n);if(s){getComponentStates(s).isBlured=!0;var l=a.getViewOfComponentModel(s);!l||!l.focusBlurEnabled||l.group.traverse(function(u){singleEnterBlur(u)})}}}function blurSeriesFromHighlightPayload(t,n,a){var s=t.seriesIndex,l=t.getData(n.dataType);if(l){var u=queryDataIndex(l,n);u=(isArray$1(u)?u[0]:u)||0;var c=l.getItemGraphicEl(u);if(!c)for(var p=l.count(),d=0;!c&&d<p;)c=l.getItemGraphicEl(d++);if(c){var x=getECData(c);blurSeries(s,x.focus,x.blurScope,a)}else{var _=t.get(["emphasis","focus"]),S=t.get(["emphasis","blurScope"]);_!=null&&blurSeries(s,_,S,a)}}}function findComponentHighDownDispatchers(t,n,a,s){var l={focusSelf:!1,dispatchers:null};if(t==null||t==="series"||n==null||a==null)return l;var u=s.getModel().getComponent(t,n);if(!u)return l;var c=s.getViewOfComponentModel(u);if(!c||!c.findHighDownDispatchers)return l;for(var p=c.findHighDownDispatchers(a),d,x=0;x<p.length;x++)if(getECData(p[x]).focus==="self"){d=!0;break}return{focusSelf:d,dispatchers:p}}function handleGlobalMouseOverForHighDown(t,n,a){var s=getECData(t),l=findComponentHighDownDispatchers(s.componentMainType,s.componentIndex,s.componentHighDownName,a),u=l.dispatchers,c=l.focusSelf;u?(c&&blurComponent(s.componentMainType,s.componentIndex,a),each$f(u,function(p){return enterEmphasisWhenMouseOver(p,n)})):(blurSeries(s.seriesIndex,s.focus,s.blurScope,a),s.focus==="self"&&blurComponent(s.componentMainType,s.componentIndex,a),enterEmphasisWhenMouseOver(t,n))}function handleGlobalMouseOutForHighDown(t,n,a){allLeaveBlur(a);var s=getECData(t),l=findComponentHighDownDispatchers(s.componentMainType,s.componentIndex,s.componentHighDownName,a).dispatchers;l?each$f(l,function(u){return leaveEmphasisWhenMouseOut(u,n)}):leaveEmphasisWhenMouseOut(t,n)}function toggleSelectionFromPayload(t,n,a){if(isSelectChangePayload(n)){var s=n.dataType,l=t.getData(s),u=queryDataIndex(l,n);isArray$1(u)||(u=[u]),t[n.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":n.type===SELECT_ACTION_TYPE?"select":"unselect"](u,s)}}function updateSeriesElementSelection(t){var n=t.getAllData();each$f(n,function(a){var s=a.data,l=a.type;s.eachItemGraphicEl(function(u,c){t.isSelected(c,l)?enterSelect(u):leaveSelect(u)})})}function getAllSelectedIndices(t){var n=[];return t.eachSeries(function(a){var s=a.getAllData();each$f(s,function(l){l.data;var u=l.type,c=a.getSelectedDataIndices();if(c.length>0){var p={dataIndex:c,seriesIndex:a.seriesIndex};u!=null&&(p.dataType=u),n.push(p)}})}),n}function enableHoverEmphasis(t,n,a){setAsHighDownDispatcher(t,!0),traverseUpdateState(t,setDefaultStateProxy),enableHoverFocus(t,n,a)}function disableHoverEmphasis(t){setAsHighDownDispatcher(t,!1)}function toggleHoverEmphasis(t,n,a,s){s?disableHoverEmphasis(t):enableHoverEmphasis(t,n,a)}function enableHoverFocus(t,n,a){var s=getECData(t);n!=null?(s.focus=n,s.blurScope=a):s.focus&&(s.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(t,n,a,s){a=a||"itemStyle";for(var l=0;l<OTHER_STATES.length;l++){var u=OTHER_STATES[l],c=n.getModel([u,a]),p=t.ensureState(u);p.style=s?s(c):c[defaultStyleGetterMap[a]]()}}function setAsHighDownDispatcher(t,n){var a=n===!1,s=t;t.highDownSilentOnTouch&&(s.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!a||s.__highDownDispatcher)&&(s.__highByOuter=s.__highByOuter||0,s.__highDownDispatcher=!a)}function isHighDownDispatcher(t){return!!(t&&t.__highDownDispatcher)}function enableComponentHighDownFeatures(t,n,a){var s=getECData(t);s.componentMainType=n.mainType,s.componentIndex=n.componentIndex,s.componentHighDownName=a}function getHighlightDigit(t){var n=_highlightKeyMap[t];return n==null&&_highlightNextDigit<=32&&(n=_highlightKeyMap[t]=_highlightNextDigit++),n}function isSelectChangePayload(t){var n=t.type;return n===SELECT_ACTION_TYPE||n===UNSELECT_ACTION_TYPE||n===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(t){var n=t.type;return n===HIGHLIGHT_ACTION_TYPE||n===DOWNPLAY_ACTION_TYPE}function savePathStates(t){var n=getSavedStates(t);n.normalFill=t.style.fill,n.normalStroke=t.style.stroke;var a=t.states.select||{};n.selectFill=a.style&&a.style.fill||null,n.selectStroke=a.style&&a.style.stroke||null}var CMD$2=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(t,n){if(n){var a=t.data,s=t.len(),l,u,c,p,d,x,_=CMD$2.M,S=CMD$2.C,T=CMD$2.L,A=CMD$2.R,R=CMD$2.A,D=CMD$2.Q;for(c=0,p=0;c<s;){switch(l=a[c++],p=c,u=0,l){case _:u=1;break;case T:u=1;break;case S:u=3;break;case D:u=2;break;case R:var O=n[4],F=n[5],z=mathSqrt$2(n[0]*n[0]+n[1]*n[1]),j=mathSqrt$2(n[2]*n[2]+n[3]*n[3]),Z=mathAtan2(-n[1]/j,n[0]/z);a[c]*=z,a[c++]+=O,a[c]*=j,a[c++]+=F,a[c++]*=z,a[c++]*=j,a[c++]+=Z,a[c++]+=Z,c+=2,p=c;break;case A:x[0]=a[c++],x[1]=a[c++],applyTransform$1(x,x,n),a[p++]=x[0],a[p++]=x[1],x[0]+=a[c++],x[1]+=a[c++],applyTransform$1(x,x,n),a[p++]=x[0],a[p++]=x[1]}for(d=0;d<u;d++){var W=points$2[d];W[0]=a[c++],W[1]=a[c++],applyTransform$1(W,W,n),a[p++]=W[0],a[p++]=W[1]}}t.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function vRatio(t,n){return(t[0]*n[0]+t[1]*n[1])/(vMag(t)*vMag(n))}function vAngle(t,n){return(t[0]*n[1]<t[1]*n[0]?-1:1)*Math.acos(vRatio(t,n))}function processArc(t,n,a,s,l,u,c,p,d,x,_){var S=d*(PI$7/180),T=mathCos$2(S)*(t-a)/2+mathSin$2(S)*(n-s)/2,A=-1*mathSin$2(S)*(t-a)/2+mathCos$2(S)*(n-s)/2,R=T*T/(c*c)+A*A/(p*p);R>1&&(c*=mathSqrt$1(R),p*=mathSqrt$1(R));var D=(l===u?-1:1)*mathSqrt$1((c*c*(p*p)-c*c*(A*A)-p*p*(T*T))/(c*c*(A*A)+p*p*(T*T)))||0,O=D*c*A/p,F=D*-p*T/c,z=(t+a)/2+mathCos$2(S)*O-mathSin$2(S)*F,j=(n+s)/2+mathSin$2(S)*O+mathCos$2(S)*F,Z=vAngle([1,0],[(T-O)/c,(A-F)/p]),W=[(T-O)/c,(A-F)/p],J=[(-1*T-O)/c,(-1*A-F)/p],en=vAngle(W,J);if(vRatio(W,J)<=-1&&(en=PI$7),vRatio(W,J)>=1&&(en=0),en<0){var tn=Math.round(en/PI$7*1e6)/1e6;en=PI$7*2+tn%2*PI$7}_.addData(x,z,j,c,p,Z,en,S,u)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(t){var n=new PathProxy;if(!t)return n;var a=0,s=0,l=a,u=s,c,p=PathProxy.CMD,d=t.match(commandReg);if(!d)return n;for(var x=0;x<d.length;x++){for(var _=d[x],S=_.charAt(0),T=void 0,A=_.match(numberReg$1)||[],R=A.length,D=0;D<R;D++)A[D]=parseFloat(A[D]);for(var O=0;O<R;){var F=void 0,z=void 0,j=void 0,Z=void 0,W=void 0,J=void 0,en=void 0,tn=a,Ct=s,Q=void 0,on=void 0;switch(S){case"l":a+=A[O++],s+=A[O++],T=p.L,n.addData(T,a,s);break;case"L":a=A[O++],s=A[O++],T=p.L,n.addData(T,a,s);break;case"m":a+=A[O++],s+=A[O++],T=p.M,n.addData(T,a,s),l=a,u=s,S="l";break;case"M":a=A[O++],s=A[O++],T=p.M,n.addData(T,a,s),l=a,u=s,S="L";break;case"h":a+=A[O++],T=p.L,n.addData(T,a,s);break;case"H":a=A[O++],T=p.L,n.addData(T,a,s);break;case"v":s+=A[O++],T=p.L,n.addData(T,a,s);break;case"V":s=A[O++],T=p.L,n.addData(T,a,s);break;case"C":T=p.C,n.addData(T,A[O++],A[O++],A[O++],A[O++],A[O++],A[O++]),a=A[O-2],s=A[O-1];break;case"c":T=p.C,n.addData(T,A[O++]+a,A[O++]+s,A[O++]+a,A[O++]+s,A[O++]+a,A[O++]+s),a+=A[O-2],s+=A[O-1];break;case"S":F=a,z=s,Q=n.len(),on=n.data,c===p.C&&(F+=a-on[Q-4],z+=s-on[Q-3]),T=p.C,tn=A[O++],Ct=A[O++],a=A[O++],s=A[O++],n.addData(T,F,z,tn,Ct,a,s);break;case"s":F=a,z=s,Q=n.len(),on=n.data,c===p.C&&(F+=a-on[Q-4],z+=s-on[Q-3]),T=p.C,tn=a+A[O++],Ct=s+A[O++],a+=A[O++],s+=A[O++],n.addData(T,F,z,tn,Ct,a,s);break;case"Q":tn=A[O++],Ct=A[O++],a=A[O++],s=A[O++],T=p.Q,n.addData(T,tn,Ct,a,s);break;case"q":tn=A[O++]+a,Ct=A[O++]+s,a+=A[O++],s+=A[O++],T=p.Q,n.addData(T,tn,Ct,a,s);break;case"T":F=a,z=s,Q=n.len(),on=n.data,c===p.Q&&(F+=a-on[Q-4],z+=s-on[Q-3]),a=A[O++],s=A[O++],T=p.Q,n.addData(T,F,z,a,s);break;case"t":F=a,z=s,Q=n.len(),on=n.data,c===p.Q&&(F+=a-on[Q-4],z+=s-on[Q-3]),a+=A[O++],s+=A[O++],T=p.Q,n.addData(T,F,z,a,s);break;case"A":j=A[O++],Z=A[O++],W=A[O++],J=A[O++],en=A[O++],tn=a,Ct=s,a=A[O++],s=A[O++],T=p.A,processArc(tn,Ct,a,s,J,en,j,Z,W,T,n);break;case"a":j=A[O++],Z=A[O++],W=A[O++],J=A[O++],en=A[O++],tn=a,Ct=s,a+=A[O++],s+=A[O++],T=p.A,processArc(tn,Ct,a,s,J,en,j,Z,W,T,n);break}}(S==="z"||S==="Z")&&(T=p.Z,n.addData(T),a=l,s=u),c=T}return n.toStatic(),n}var SVGPath=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.applyTransform=function(a){},n}(Path);function isPathProxy(t){return t.setData!=null}function createPathOptions(t,n){var a=createPathProxyFromString(t),s=extend({},n);return s.buildPath=function(l){if(isPathProxy(l)){l.setData(a.data);var u=l.getContext();u&&l.rebuildPath(u,1)}else{var u=l;a.rebuildPath(u,1)}},s.applyTransform=function(l){transformPath(a,l),this.dirtyShape()},s}function createFromString(t,n){return new SVGPath(createPathOptions(t,n))}function extendFromString(t,n){var a=createPathOptions(t,n),s=function(l){__extends(u,l);function u(c){var p=l.call(this,c)||this;return p.applyTransform=a.applyTransform,p.buildPath=a.buildPath,p}return u}(SVGPath);return s}function mergePath$1(t,n){for(var a=[],s=t.length,l=0;l<s;l++){var u=t[l];a.push(u.getUpdatedPathProxy(!0))}var c=new Path(n);return c.createPathProxy(),c.buildPath=function(p){if(isPathProxy(p)){p.appendPath(a);var d=p.getContext();d&&p.rebuildPath(d,1)}},c}function clonePath(t,n){n=n||{};var a=new Path;return t.shape&&a.setShape(t.shape),a.setStyle(t.style),n.bakeTransform?transformPath(a.path,t.getComputedTransform()):n.toLocal?a.setLocalTransform(t.getComputedTransform()):a.copyTransform(t),a.buildPath=t.buildPath,a.applyTransform=a.applyTransform,a.z=t.z,a.z2=t.z2,a.zlevel=t.zlevel,a}var CircleShape=function(){function t(){this.cx=0,this.cy=0,this.r=0}return t}(),Circle=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new CircleShape},n.prototype.buildPath=function(a,s){a.moveTo(s.cx+s.r,s.cy),a.arc(s.cx,s.cy,s.r,0,Math.PI*2)},n}(Path);Circle.prototype.type="circle";var EllipseShape=function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t}(),Ellipse=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new EllipseShape},n.prototype.buildPath=function(a,s){var l=.5522848,u=s.cx,c=s.cy,p=s.rx,d=s.ry,x=p*l,_=d*l;a.moveTo(u-p,c),a.bezierCurveTo(u-p,c-_,u-x,c-d,u,c-d),a.bezierCurveTo(u+x,c-d,u+p,c-_,u+p,c),a.bezierCurveTo(u+p,c+_,u+x,c+d,u,c+d),a.bezierCurveTo(u-x,c+d,u-p,c+_,u-p,c),a.closePath()},n}(Path);Ellipse.prototype.type="ellipse";var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(t,n,a,s,l,u,c,p){var d=a-t,x=s-n,_=c-l,S=p-u,T=S*d-_*x;if(!(T*T<e))return T=(_*(n-u)-S*(t-l))/T,[t+T*d,n+T*x]}function computeCornerTangents(t,n,a,s,l,u,c){var p=t-a,d=n-s,x=(c?u:-u)/mathSqrt(p*p+d*d),_=x*d,S=-x*p,T=t+_,A=n+S,R=a+_,D=s+S,O=(T+R)/2,F=(A+D)/2,z=R-T,j=D-A,Z=z*z+j*j,W=l-u,J=T*D-R*A,en=(j<0?-1:1)*mathSqrt(mathMax$7(0,W*W*Z-J*J)),tn=(J*j-z*en)/Z,Ct=(-J*z-j*en)/Z,Q=(J*j+z*en)/Z,on=(-J*z+j*en)/Z,gn=tn-O,In=Ct-F,dn=Q-O,ix=on-F;return gn*gn+In*In>dn*dn+ix*ix&&(tn=Q,Ct=on),{cx:tn,cy:Ct,x0:-_,y0:-S,x1:tn*(l/W-1),y1:Ct*(l/W-1)}}function normalizeCornerRadius(t){var n;if(isArray$1(t)){var a=t.length;if(!a)return t;a===1?n=[t[0],t[0],0,0]:a===2?n=[t[0],t[0],t[1],t[1]]:a===3?n=t.concat(t[2]):n=t}else n=[t,t,t,t];return n}function buildPath$1(t,n){var a,s=mathMax$7(n.r,0),l=mathMax$7(n.r0||0,0),u=s>0,c=l>0;if(!(!u&&!c)){if(u||(s=l,l=0),l>s){var p=s;s=l,l=p}var d=n.startAngle,x=n.endAngle;if(!(isNaN(d)||isNaN(x))){var _=n.cx,S=n.cy,T=!!n.clockwise,A=mathAbs$1(x-d),R=A>PI2$3&&A%PI2$3;if(R>e&&(A=R),!(s>e))t.moveTo(_,S);else if(A>PI2$3-e)t.moveTo(_+s*mathCos$1(d),S+s*mathSin$1(d)),t.arc(_,S,s,d,x,!T),l>e&&(t.moveTo(_+l*mathCos$1(x),S+l*mathSin$1(x)),t.arc(_,S,l,x,d,T));else{var D=void 0,O=void 0,F=void 0,z=void 0,j=void 0,Z=void 0,W=void 0,J=void 0,en=void 0,tn=void 0,Ct=void 0,Q=void 0,on=void 0,gn=void 0,In=void 0,dn=void 0,ix=s*mathCos$1(d),Cn=s*mathSin$1(d),ax=l*mathCos$1(x),sx=l*mathSin$1(x),lx=A>e;if(lx){var ox=n.cornerRadius;ox&&(a=normalizeCornerRadius(ox),D=a[0],O=a[1],F=a[2],z=a[3]);var hx=mathAbs$1(s-l)/2;if(j=mathMin$7(hx,F),Z=mathMin$7(hx,z),W=mathMin$7(hx,D),J=mathMin$7(hx,O),Ct=en=mathMax$7(j,Z),Q=tn=mathMax$7(W,J),(en>e||tn>e)&&(on=s*mathCos$1(x),gn=s*mathSin$1(x),In=l*mathCos$1(d),dn=l*mathSin$1(d),A<PI$6)){var _x=intersect(ix,Cn,In,dn,on,gn,ax,sx);if(_x){var ux=ix-_x[0],px=Cn-_x[1],dx=on-_x[0],mx=gn-_x[1],gx=1/mathSin$1(mathACos((ux*dx+px*mx)/(mathSqrt(ux*ux+px*px)*mathSqrt(dx*dx+mx*mx)))/2),Sx=mathSqrt(_x[0]*_x[0]+_x[1]*_x[1]);Ct=mathMin$7(en,(s-Sx)/(gx+1)),Q=mathMin$7(tn,(l-Sx)/(gx-1))}}}if(!lx)t.moveTo(_+ix,S+Cn);else if(Ct>e){var Ex=mathMin$7(F,Ct),Cx=mathMin$7(z,Ct),Ax=computeCornerTangents(In,dn,ix,Cn,s,Ex,T),Tx=computeCornerTangents(on,gn,ax,sx,s,Cx,T);t.moveTo(_+Ax.cx+Ax.x0,S+Ax.cy+Ax.y0),Ct<en&&Ex===Cx?t.arc(_+Ax.cx,S+Ax.cy,Ct,mathATan2(Ax.y0,Ax.x0),mathATan2(Tx.y0,Tx.x0),!T):(Ex>0&&t.arc(_+Ax.cx,S+Ax.cy,Ex,mathATan2(Ax.y0,Ax.x0),mathATan2(Ax.y1,Ax.x1),!T),t.arc(_,S,s,mathATan2(Ax.cy+Ax.y1,Ax.cx+Ax.x1),mathATan2(Tx.cy+Tx.y1,Tx.cx+Tx.x1),!T),Cx>0&&t.arc(_+Tx.cx,S+Tx.cy,Cx,mathATan2(Tx.y1,Tx.x1),mathATan2(Tx.y0,Tx.x0),!T))}else t.moveTo(_+ix,S+Cn),t.arc(_,S,s,d,x,!T);if(!(l>e)||!lx)t.lineTo(_+ax,S+sx);else if(Q>e){var Ex=mathMin$7(D,Q),Cx=mathMin$7(O,Q),Ax=computeCornerTangents(ax,sx,on,gn,l,-Cx,T),Tx=computeCornerTangents(ix,Cn,In,dn,l,-Ex,T);t.lineTo(_+Ax.cx+Ax.x0,S+Ax.cy+Ax.y0),Q<tn&&Ex===Cx?t.arc(_+Ax.cx,S+Ax.cy,Q,mathATan2(Ax.y0,Ax.x0),mathATan2(Tx.y0,Tx.x0),!T):(Cx>0&&t.arc(_+Ax.cx,S+Ax.cy,Cx,mathATan2(Ax.y0,Ax.x0),mathATan2(Ax.y1,Ax.x1),!T),t.arc(_,S,l,mathATan2(Ax.cy+Ax.y1,Ax.cx+Ax.x1),mathATan2(Tx.cy+Tx.y1,Tx.cx+Tx.x1),T),Ex>0&&t.arc(_+Tx.cx,S+Tx.cy,Ex,mathATan2(Tx.y1,Tx.x1),mathATan2(Tx.y0,Tx.x0),!T))}else t.lineTo(_+ax,S+sx),t.arc(_,S,l,x,d,T)}t.closePath()}}}var SectorShape=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return t}(),Sector=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new SectorShape},n.prototype.buildPath=function(a,s){buildPath$1(a,s)},n.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},n}(Path);Sector.prototype.type="sector";var RingShape=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t}(),Ring=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new RingShape},n.prototype.buildPath=function(a,s){var l=s.cx,u=s.cy,c=Math.PI*2;a.moveTo(l+s.r,u),a.arc(l,u,s.r,0,c,!1),a.moveTo(l+s.r0,u),a.arc(l,u,s.r0,0,c,!0)},n}(Path);Ring.prototype.type="ring";function smoothBezier(t,n,a,s){var l=[],u=[],c=[],p=[],d,x,_,S;if(s){_=[1/0,1/0],S=[-1/0,-1/0];for(var T=0,A=t.length;T<A;T++)min$1(_,_,t[T]),max$1(S,S,t[T]);min$1(_,_,s[0]),max$1(S,S,s[1])}for(var T=0,A=t.length;T<A;T++){var R=t[T];if(a)d=t[T?T-1:A-1],x=t[(T+1)%A];else if(T===0||T===A-1){l.push(clone$3(t[T]));continue}else d=t[T-1],x=t[T+1];sub(u,x,d),scale$2(u,u,n);var D=distance(R,d),O=distance(R,x),F=D+O;F!==0&&(D/=F,O/=F),scale$2(c,u,-D),scale$2(p,u,O);var z=add([],R,c),j=add([],R,p);s&&(max$1(z,z,_),min$1(z,z,S),max$1(j,j,_),min$1(j,j,S)),l.push(z),l.push(j)}return a&&l.push(l.shift()),l}function buildPath(t,n,a){var s=n.smooth,l=n.points;if(l&&l.length>=2){if(s){var u=smoothBezier(l,s,a,n.smoothConstraint);t.moveTo(l[0][0],l[0][1]);for(var c=l.length,p=0;p<(a?c:c-1);p++){var d=u[p*2],x=u[p*2+1],_=l[(p+1)%c];t.bezierCurveTo(d[0],d[1],x[0],x[1],_[0],_[1])}}else{t.moveTo(l[0][0],l[0][1]);for(var p=1,S=l.length;p<S;p++)t.lineTo(l[p][0],l[p][1])}a&&t.closePath()}}var PolygonShape=function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t}(),Polygon=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new PolygonShape},n.prototype.buildPath=function(a,s){buildPath(a,s,!0)},n}(Path);Polygon.prototype.type="polygon";var PolylineShape=function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t}(),Polyline$1=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new PolylineShape},n.prototype.buildPath=function(a,s){buildPath(a,s,!1)},n}(Path);Polyline$1.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}(),Line$1=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new LineShape},n.prototype.buildPath=function(a,s){var l,u,c,p;if(this.subPixelOptimize){var d=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,s,this.style);l=d.x1,u=d.y1,c=d.x2,p=d.y2}else l=s.x1,u=s.y1,c=s.x2,p=s.y2;var x=s.percent;x!==0&&(a.moveTo(l,u),x<1&&(c=l*(1-x)+c*x,p=u*(1-x)+p*x),a.lineTo(c,p))},n.prototype.pointAt=function(a){var s=this.shape;return[s.x1*(1-a)+s.x2*a,s.y1*(1-a)+s.y2*a]},n}(Path);Line$1.prototype.type="line";var out=[],BezierCurveShape=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t}();function someVectorAt(t,n,a){var s=t.cpx2,l=t.cpy2;return s!=null||l!=null?[(a?cubicDerivativeAt:cubicAt)(t.x1,t.cpx1,t.cpx2,t.x2,n),(a?cubicDerivativeAt:cubicAt)(t.y1,t.cpy1,t.cpy2,t.y2,n)]:[(a?quadraticDerivativeAt:quadraticAt$1)(t.x1,t.cpx1,t.x2,n),(a?quadraticDerivativeAt:quadraticAt$1)(t.y1,t.cpy1,t.y2,n)]}var BezierCurve=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new BezierCurveShape},n.prototype.buildPath=function(a,s){var l=s.x1,u=s.y1,c=s.x2,p=s.y2,d=s.cpx1,x=s.cpy1,_=s.cpx2,S=s.cpy2,T=s.percent;T!==0&&(a.moveTo(l,u),_==null||S==null?(T<1&&(quadraticSubdivide(l,d,c,T,out),d=out[1],c=out[2],quadraticSubdivide(u,x,p,T,out),x=out[1],p=out[2]),a.quadraticCurveTo(d,x,c,p)):(T<1&&(cubicSubdivide(l,d,_,c,T,out),d=out[1],_=out[2],c=out[3],cubicSubdivide(u,x,S,p,T,out),x=out[1],S=out[2],p=out[3]),a.bezierCurveTo(d,x,_,S,c,p)))},n.prototype.pointAt=function(a){return someVectorAt(this.shape,a,!1)},n.prototype.tangentAt=function(a){var s=someVectorAt(this.shape,a,!0);return normalize$3(s,s)},n}(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),Arc=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new ArcShape},n.prototype.buildPath=function(a,s){var l=s.cx,u=s.cy,c=Math.max(s.r,0),p=s.startAngle,d=s.endAngle,x=s.clockwise,_=Math.cos(p),S=Math.sin(p);a.moveTo(_*c+l,S*c+u),a.arc(l,u,c,p,d,!x)},n}(Path);Arc.prototype.type="arc";var CompoundPath=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="compound",a}return n.prototype._updatePathDirty=function(){for(var a=this.shape.paths,s=this.shapeChanged(),l=0;l<a.length;l++)s=s||a[l].shapeChanged();s&&this.dirtyShape()},n.prototype.beforeBrush=function(){this._updatePathDirty();for(var a=this.shape.paths||[],s=this.getGlobalScale(),l=0;l<a.length;l++)a[l].path||a[l].createPathProxy(),a[l].path.setScale(s[0],s[1],a[l].segmentIgnoreThreshold)},n.prototype.buildPath=function(a,s){for(var l=s.paths||[],u=0;u<l.length;u++)l[u].buildPath(a,l[u].shape,!0)},n.prototype.afterBrush=function(){for(var a=this.shape.paths||[],s=0;s<a.length;s++)a[s].pathUpdated()},n.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},n}(Path),Gradient=function(){function t(n){this.colorStops=n||[]}return t.prototype.addColorStop=function(n,a){this.colorStops.push({offset:n,color:a})},t}(),LinearGradient=function(t){__extends(n,t);function n(a,s,l,u,c,p){var d=t.call(this,c)||this;return d.x=a??0,d.y=s??0,d.x2=l??1,d.y2=u??0,d.type="linear",d.global=p||!1,d}return n}(Gradient),RadialGradient=function(t){__extends(n,t);function n(a,s,l,u,c){var p=t.call(this,u)||this;return p.x=a??.5,p.y=s??.5,p.r=l??.5,p.type="radial",p.global=c||!1,p}return n}(Gradient),extent=[0,0],extent2=[0,0],minTv=new Point,maxTv=new Point,OrientedBoundingRect=function(){function t(n,a){this._corners=[],this._axes=[],this._origin=[0,0];for(var s=0;s<4;s++)this._corners[s]=new Point;for(var s=0;s<2;s++)this._axes[s]=new Point;n&&this.fromBoundingRect(n,a)}return t.prototype.fromBoundingRect=function(n,a){var s=this._corners,l=this._axes,u=n.x,c=n.y,p=u+n.width,d=c+n.height;if(s[0].set(u,c),s[1].set(p,c),s[2].set(p,d),s[3].set(u,d),a)for(var x=0;x<4;x++)s[x].transform(a);Point.sub(l[0],s[1],s[0]),Point.sub(l[1],s[3],s[0]),l[0].normalize(),l[1].normalize();for(var x=0;x<2;x++)this._origin[x]=l[x].dot(s[0])},t.prototype.intersect=function(n,a){var s=!0,l=!a;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,n,minTv,maxTv,l,1)&&(s=!1,l)||!this._intersectCheckOneSide(n,this,minTv,maxTv,l,-1)&&(s=!1,l)||l||Point.copy(a,s?minTv:maxTv),s},t.prototype._intersectCheckOneSide=function(n,a,s,l,u,c){for(var p=!0,d=0;d<2;d++){var x=this._axes[d];if(this._getProjMinMaxOnAxis(d,n._corners,extent),this._getProjMinMaxOnAxis(d,a._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(p=!1,u)return p;var _=Math.abs(extent2[0]-extent[1]),S=Math.abs(extent[0]-extent2[1]);Math.min(_,S)>l.len()&&(_<S?Point.scale(l,x,-_*c):Point.scale(l,x,S*c))}else if(s){var _=Math.abs(extent2[0]-extent[1]),S=Math.abs(extent[0]-extent2[1]);Math.min(_,S)<s.len()&&(_<S?Point.scale(s,x,_*c):Point.scale(s,x,-S*c))}}return p},t.prototype._getProjMinMaxOnAxis=function(n,a,s){for(var l=this._axes[n],u=this._origin,c=a[0].dot(l)+u[n],p=c,d=c,x=1;x<a.length;x++){var _=a[x].dot(l)+u[n];p=Math.min(_,p),d=Math.max(_,d)}s[0]=p,s[1]=d},t}(),m=[],IncrementalDisplayable=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.notClear=!0,a.incremental=!0,a._displayables=[],a._temporaryDisplayables=[],a._cursor=0,a}return n.prototype.traverse=function(a,s){a.call(s,this)},n.prototype.useStyle=function(){this.style={}},n.prototype.getCursor=function(){return this._cursor},n.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},n.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},n.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},n.prototype.addDisplayable=function(a,s){s?this._temporaryDisplayables.push(a):this._displayables.push(a),this.markRedraw()},n.prototype.addDisplayables=function(a,s){s=s||!1;for(var l=0;l<a.length;l++)this.addDisplayable(a[l],s)},n.prototype.getDisplayables=function(){return this._displayables},n.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},n.prototype.eachPendingDisplayable=function(a){for(var s=this._cursor;s<this._displayables.length;s++)a&&a(this._displayables[s]);for(var s=0;s<this._temporaryDisplayables.length;s++)a&&a(this._temporaryDisplayables[s])},n.prototype.update=function(){this.updateTransform();for(var a=this._cursor;a<this._displayables.length;a++){var s=this._displayables[a];s.parent=this,s.update(),s.parent=null}for(var a=0;a<this._temporaryDisplayables.length;a++){var s=this._temporaryDisplayables[a];s.parent=this,s.update(),s.parent=null}},n.prototype.getBoundingRect=function(){if(!this._rect){for(var a=new BoundingRect(1/0,1/0,-1/0,-1/0),s=0;s<this._displayables.length;s++){var l=this._displayables[s],u=l.getBoundingRect().clone();l.needLocalTransform()&&u.applyTransform(l.getLocalTransform(m)),a.union(u)}this._rect=a}return this._rect},n.prototype.contain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect();if(u.contain(l[0],l[1]))for(var c=0;c<this._displayables.length;c++){var p=this._displayables[c];if(p.contain(a,s))return!0}return!1},n}(Displayable),transitionStore=makeInner();function getAnimationConfig(t,n,a,s,l){var u;if(n&&n.ecModel){var c=n.ecModel.getUpdatePayload();u=c&&c.animation}var p=n&&n.isAnimationEnabled(),d=t==="update";if(p){var x=void 0,_=void 0,S=void 0;s?(x=retrieve2(s.duration,200),_=retrieve2(s.easing,"cubicOut"),S=0):(x=n.getShallow(d?"animationDurationUpdate":"animationDuration"),_=n.getShallow(d?"animationEasingUpdate":"animationEasing"),S=n.getShallow(d?"animationDelayUpdate":"animationDelay")),u&&(u.duration!=null&&(x=u.duration),u.easing!=null&&(_=u.easing),u.delay!=null&&(S=u.delay)),isFunction$1(S)&&(S=S(a,l)),isFunction$1(x)&&(x=x(a));var T={duration:x||0,delay:S,easing:_};return T}else return null}function animateOrSetProps(t,n,a,s,l,u,c){var p=!1,d;isFunction$1(l)?(c=u,u=l,l=null):isObject$3(l)&&(u=l.cb,c=l.during,p=l.isFrom,d=l.removeOpt,l=l.dataIndex);var x=t==="leave";x||n.stopAnimation("leave");var _=getAnimationConfig(t,s,l,x?d||{}:null,s&&s.getAnimationDelayParams?s.getAnimationDelayParams(n,l):null);if(_&&_.duration>0){var S=_.duration,T=_.delay,A=_.easing,R={duration:S,delay:T||0,easing:A,done:u,force:!!u||!!c,setToFinal:!x,scope:t,during:c};p?n.animateFrom(a,R):n.animateTo(a,R)}else n.stopAnimation(),!p&&n.attr(a),c&&c(1),u&&u()}function updateProps$1(t,n,a,s,l,u){animateOrSetProps("update",t,n,a,s,l,u)}function initProps(t,n,a,s,l,u){animateOrSetProps("enter",t,n,a,s,l,u)}function isElementRemoved(t){if(!t.__zr)return!0;for(var n=0;n<t.animators.length;n++){var a=t.animators[n];if(a.scope==="leave")return!0}return!1}function removeElement(t,n,a,s,l,u){isElementRemoved(t)||animateOrSetProps("leave",t,n,a,s,l,u)}function fadeOutDisplayable(t,n,a,s){t.removeTextContent(),t.removeTextGuideLine(),removeElement(t,{style:{opacity:0}},n,a,s)}function removeElementWithFadeOut(t,n,a){function s(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(l){l.isGroup||fadeOutDisplayable(l,n,a,s)}):fadeOutDisplayable(t,n,a,s)}function saveOldStyle(t){transitionStore(t).oldStyle=t.style}function getOldStyle(t){return transitionStore(t).oldStyle}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(t){return Path.extend(t)}var extendPathFromString=extendFromString;function extendPath(t,n){return extendPathFromString(t,n)}function registerShape(t,n){_customShapeMap[t]=n}function getShapeClass(t){if(_customShapeMap.hasOwnProperty(t))return _customShapeMap[t]}function makePath(t,n,a,s){var l=createFromString(t,n);return a&&(s==="center"&&(a=centerGraphic(a,l.getBoundingRect())),resizePath(l,a)),l}function makeImage(t,n,a){var s=new ZRImage({style:{image:t,x:n.x,y:n.y,width:n.width,height:n.height},onload:function(l){if(a==="center"){var u={width:l.width,height:l.height};s.setStyle(centerGraphic(n,u))}}});return s}function centerGraphic(t,n){var a=n.width/n.height,s=t.height*a,l;s<=t.width?l=t.height:(s=t.width,l=s/a);var u=t.x+t.width/2,c=t.y+t.height/2;return{x:u-s/2,y:c-l/2,width:s,height:l}}var mergePath=mergePath$1;function resizePath(t,n){if(t.applyTransform){var a=t.getBoundingRect(),s=a.calculateTransform(n);t.applyTransform(s)}}function subPixelOptimizeLine(t,n){return subPixelOptimizeLine$1(t,t,{lineWidth:n}),t}function subPixelOptimizeRect(t){return subPixelOptimizeRect$1(t.shape,t.shape,t.style),t}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(t,n){for(var a=identity([]);t&&t!==n;)mul(a,t.getLocalTransform(),a),t=t.parent;return a}function applyTransform(t,n,a){return n&&!isArrayLike(n)&&(n=Transformable.getLocalTransform(n)),a&&(n=invert([],n)),applyTransform$1([],t,n)}function transformDirection(t,n,a){var s=n[4]===0||n[5]===0||n[0]===0?1:Math.abs(2*n[4]/n[0]),l=n[4]===0||n[5]===0||n[2]===0?1:Math.abs(2*n[4]/n[2]),u=[t==="left"?-s:t==="right"?s:0,t==="top"?-l:t==="bottom"?l:0];return u=applyTransform(u,n,a),Math.abs(u[0])>Math.abs(u[1])?u[0]>0?"right":"left":u[1]>0?"bottom":"top"}function isNotGroup(t){return!t.isGroup}function isPath$1(t){return t.shape!=null}function groupTransition(t,n,a){if(!t||!n)return;function s(c){var p={};return c.traverse(function(d){isNotGroup(d)&&d.anid&&(p[d.anid]=d)}),p}function l(c){var p={x:c.x,y:c.y,rotation:c.rotation};return isPath$1(c)&&(p.shape=extend({},c.shape)),p}var u=s(t);n.traverse(function(c){if(isNotGroup(c)&&c.anid){var p=u[c.anid];if(p){var d=l(c);c.attr(l(p)),updateProps$1(c,d,a,getECData(c).dataIndex)}}})}function clipPointsByRect(t,n){return map$1(t,function(a){var s=a[0];s=mathMax$6(s,n.x),s=mathMin$6(s,n.x+n.width);var l=a[1];return l=mathMax$6(l,n.y),l=mathMin$6(l,n.y+n.height),[s,l]})}function clipRectByRect(t,n){var a=mathMax$6(t.x,n.x),s=mathMin$6(t.x+t.width,n.x+n.width),l=mathMax$6(t.y,n.y),u=mathMin$6(t.y+t.height,n.y+n.height);if(s>=a&&u>=l)return{x:a,y:l,width:s-a,height:u-l}}function createIcon(t,n,a){var s=extend({rectHover:!0},n),l=s.style={strokeNoScale:!0};if(a=a||{x:-1,y:-1,width:2,height:2},t)return t.indexOf("image://")===0?(l.image=t.slice(8),defaults(l,a),new ZRImage(s)):makePath(t.replace("path://",""),s,a,"center")}function linePolygonIntersect(t,n,a,s,l){for(var u=0,c=l[l.length-1];u<l.length;u++){var p=l[u];if(lineLineIntersect$1(t,n,a,s,p[0],p[1],c[0],c[1]))return!0;c=p}}function lineLineIntersect$1(t,n,a,s,l,u,c,p){var d=a-t,x=s-n,_=c-l,S=p-u,T=crossProduct2d$1(_,S,d,x);if(nearZero(T))return!1;var A=t-l,R=n-u,D=crossProduct2d$1(A,R,d,x)/T;if(D<0||D>1)return!1;var O=crossProduct2d$1(A,R,_,S)/T;return!(O<0||O>1)}function crossProduct2d$1(t,n,a,s){return t*s-a*n}function nearZero(t){return t<=1e-6&&t>=-1e-6}function setTooltipConfig(t){var n=t.itemTooltipOption,a=t.componentModel,s=t.itemName,l=isString$1(n)?{formatter:n}:n,u=a.mainType,c=a.componentIndex,p={componentType:u,name:s,$vars:["name"]};p[u+"Index"]=c;var d=t.formatterParamsExtra;d&&each$f(keys(d),function(_){hasOwn(p,_)||(p[_]=d[_],p.$vars.push(_))});var x=getECData(t.el);x.componentMainType=u,x.componentIndex=c,x.tooltipConfig={name:s,option:defaults({content:s,encodeHTMLContent:!0,formatterParams:p},l)}}function traverseElement(t,n){var a;t.isGroup&&(a=n(t)),a||t.traverse(n)}function traverseElements(t,n){if(t)if(isArray$1(t))for(var a=0;a<t.length;a++)traverseElement(t[a],n);else traverseElement(t,n)}registerShape("circle",Circle);registerShape("ellipse",Ellipse);registerShape("sector",Sector);registerShape("ring",Ring);registerShape("polygon",Polygon);registerShape("polyline",Polyline$1);registerShape("rect",Rect$2);registerShape("line",Line$1);registerShape("bezierCurve",BezierCurve);registerShape("arc",Arc);const graphic$1=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,OrientedBoundingRect,Path,Point,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,applyTransform,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(t,n){for(var a=0;a<SPECIAL_STATES.length;a++){var s=SPECIAL_STATES[a],l=n[s],u=t.ensureState(s);u.style=u.style||{},u.style.text=l}var c=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:n.normal}),t.useStates(c,!0)}function getLabelText(t,n,a){var s=t.labelFetcher,l=t.labelDataIndex,u=t.labelDimIndex,c=n.normal,p;s&&(p=s.getFormattedLabel(l,"normal",null,u,c&&c.get("formatter"),a!=null?{interpolatedValue:a}:null)),p==null&&(p=isFunction$1(t.defaultText)?t.defaultText(l,t,a):t.defaultText);for(var d={normal:p},x=0;x<SPECIAL_STATES.length;x++){var _=SPECIAL_STATES[x],S=n[_];d[_]=retrieve2(s?s.getFormattedLabel(l,_,null,u,S&&S.get("formatter")):null,p)}return d}function setLabelStyle(t,n,a,s){a=a||EMPTY_OBJ;for(var l=t instanceof ZRText,u=!1,c=0;c<DISPLAY_STATES.length;c++){var p=n[DISPLAY_STATES[c]];if(p&&p.getShallow("show")){u=!0;break}}var d=l?t:t.getTextContent();if(u){l||(d||(d=new ZRText,t.setTextContent(d)),t.stateProxy&&(d.stateProxy=t.stateProxy));var x=getLabelText(a,n),_=n.normal,S=!!_.getShallow("show"),T=createTextStyle$1(_,s&&s.normal,a,!1,!l);T.text=x.normal,l||t.setTextConfig(createTextConfig(_,a,!1));for(var c=0;c<SPECIAL_STATES.length;c++){var A=SPECIAL_STATES[c],p=n[A];if(p){var R=d.ensureState(A),D=!!retrieve2(p.getShallow("show"),S);if(D!==S&&(R.ignore=!D),R.style=createTextStyle$1(p,s&&s[A],a,!0,!l),R.style.text=x[A],!l){var O=t.ensureState(A);O.textConfig=createTextConfig(p,a,!0)}}}d.silent=!!_.getShallow("silent"),d.style.x!=null&&(T.x=d.style.x),d.style.y!=null&&(T.y=d.style.y),d.ignore=!S,d.useStyle(T),d.dirty(),a.enableTextSetter&&(labelInner(d).setLabelText=function(F){var z=getLabelText(a,n,F);setLabelText(d,z)})}else d&&(d.ignore=!0);t.dirty()}function getLabelStatesModels(t,n){n=n||"label";for(var a={normal:t.getModel(n)},s=0;s<SPECIAL_STATES.length;s++){var l=SPECIAL_STATES[s];a[l]=t.getModel([l,n])}return a}function createTextStyle$1(t,n,a,s,l){var u={};return setTextStyleCommon(u,t,a,s,l),n&&extend(u,n),u}function createTextConfig(t,n,a){n=n||{};var s={},l,u=t.getShallow("rotate"),c=retrieve2(t.getShallow("distance"),a?null:5),p=t.getShallow("offset");return l=t.getShallow("position")||(a?null:"inside"),l==="outside"&&(l=n.defaultOutsidePosition||"top"),l!=null&&(s.position=l),p!=null&&(s.offset=p),u!=null&&(u*=Math.PI/180,s.rotation=u),c!=null&&(s.distance=c),s.outsideFill=t.get("color")==="inherit"?n.inheritColor||null:"auto",s}function setTextStyleCommon(t,n,a,s,l){a=a||EMPTY_OBJ;var u=n.ecModel,c=u&&u.option.textStyle,p=getRichItemNames(n),d;if(p){d={};for(var x in p)if(p.hasOwnProperty(x)){var _=n.getModel(["rich",x]);setTokenTextStyle(d[x]={},_,c,a,s,l,!1,!0)}}d&&(t.rich=d);var S=n.get("overflow");S&&(t.overflow=S);var T=n.get("minMargin");T!=null&&(t.margin=T),setTokenTextStyle(t,n,c,a,s,l,!0,!1)}function getRichItemNames(t){for(var n;t&&t!==t.ecModel;){var a=(t.option||EMPTY_OBJ).rich;if(a){n=n||{};for(var s=keys(a),l=0;l<s.length;l++){var u=s[l];n[u]=1}}t=t.parentModel}return n}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(t,n,a,s,l,u,c,p){a=!l&&a||EMPTY_OBJ;var d=s&&s.inheritColor,x=n.getShallow("color"),_=n.getShallow("textBorderColor"),S=retrieve2(n.getShallow("opacity"),a.opacity);(x==="inherit"||x==="auto")&&(d?x=d:x=null),(_==="inherit"||_==="auto")&&(d?_=d:_=null),u||(x=x||a.color,_=_||a.textBorderColor),x!=null&&(t.fill=x),_!=null&&(t.stroke=_);var T=retrieve2(n.getShallow("textBorderWidth"),a.textBorderWidth);T!=null&&(t.lineWidth=T);var A=retrieve2(n.getShallow("textBorderType"),a.textBorderType);A!=null&&(t.lineDash=A);var R=retrieve2(n.getShallow("textBorderDashOffset"),a.textBorderDashOffset);R!=null&&(t.lineDashOffset=R),!l&&S==null&&!p&&(S=s&&s.defaultOpacity),S!=null&&(t.opacity=S),!l&&!u&&t.fill==null&&s.inheritColor&&(t.fill=s.inheritColor);for(var D=0;D<TEXT_PROPS_WITH_GLOBAL.length;D++){var O=TEXT_PROPS_WITH_GLOBAL[D],F=retrieve2(n.getShallow(O),a[O]);F!=null&&(t[O]=F)}for(var D=0;D<TEXT_PROPS_SELF.length;D++){var O=TEXT_PROPS_SELF[D],F=n.getShallow(O);F!=null&&(t[O]=F)}if(t.verticalAlign==null){var z=n.getShallow("baseline");z!=null&&(t.verticalAlign=z)}if(!c||!s.disableBox){for(var D=0;D<TEXT_PROPS_BOX.length;D++){var O=TEXT_PROPS_BOX[D],F=n.getShallow(O);F!=null&&(t[O]=F)}var j=n.getShallow("borderType");j!=null&&(t.borderDash=j),(t.backgroundColor==="auto"||t.backgroundColor==="inherit")&&d&&(t.backgroundColor=d),(t.borderColor==="auto"||t.borderColor==="inherit")&&d&&(t.borderColor=d)}}function getFont(t,n){var a=n&&n.getModel("textStyle");return trim$1([t.fontStyle||a&&a.getShallow("fontStyle")||"",t.fontWeight||a&&a.getShallow("fontWeight")||"",(t.fontSize||a&&a.getShallow("fontSize")||12)+"px",t.fontFamily||a&&a.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(t,n,a,s){if(t){var l=labelInner(t);l.prevValue=l.value,l.value=a;var u=n.normal;l.valueAnimation=u.get("valueAnimation"),l.valueAnimation&&(l.precision=u.get("precision"),l.defaultInterpolatedText=s,l.statesModels=n)}}function animateLabelValue(t,n,a,s,l){var u=labelInner(t);if(!u.valueAnimation||u.prevValue===u.value)return;var c=u.defaultInterpolatedText,p=retrieve2(u.interpolatedValue,u.prevValue),d=u.value;function x(_){var S=interpolateRawValues(a,u.precision,p,d,_);u.interpolatedValue=_===1?null:S;var T=getLabelText({labelDataIndex:n,labelFetcher:l,defaultText:c?c(S):S+""},u.statesModels,S);setLabelText(t,T)}t.percent=0,(u.prevValue==null?initProps:updateProps$1)(t,{percent:1},s,n,null,x)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=function(){function t(){}return t.prototype.getTextColor=function(n){var a=this.ecModel;return this.getShallow("color")||(!n&&a?a.get(PATH_COLOR):null)},t.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(n){for(var a={text:n,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},s=0;s<textStyleParams.length;s++)a[textStyleParams[s]]=this.getShallow(textStyleParams[s]);return tmpText.useStyle(a),tmpText.update(),tmpText.getBoundingRect()},t}(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function t(){}return t.prototype.getLineStyle=function(n){return getLineStyle(this,n)},t}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function t(){}return t.prototype.getItemStyle=function(n,a){return getItemStyle(this,n,a)},t}(),Model=function(){function t(n,a,s){this.parentModel=a,this.ecModel=s,this.option=n}return t.prototype.init=function(n,a,s){},t.prototype.mergeOption=function(n,a){merge(this.option,n,!0)},t.prototype.get=function(n,a){return n==null?this.option:this._doGet(this.parsePath(n),!a&&this.parentModel)},t.prototype.getShallow=function(n,a){var s=this.option,l=s==null?s:s[n];if(l==null&&!a){var u=this.parentModel;u&&(l=u.getShallow(n))}return l},t.prototype.getModel=function(n,a){var s=n!=null,l=s?this.parsePath(n):null,u=s?this._doGet(l):this.option;return a=a||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(l)),new t(u,a,this.ecModel)},t.prototype.isEmpty=function(){return this.option==null},t.prototype.restoreData=function(){},t.prototype.clone=function(){var n=this.constructor;return new n(clone$4(this.option))},t.prototype.parsePath=function(n){return typeof n=="string"?n.split("."):n},t.prototype.resolveParentPath=function(n){return n},t.prototype.isAnimationEnabled=function(){if(!env.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(n,a){var s=this.option;if(!n)return s;for(var l=0;l<n.length&&!(n[l]&&(s=s&&typeof s=="object"?s[n[l]]:null,s==null));l++);return s==null&&a&&(s=a._doGet(this.resolveParentPath(n),a.parentModel)),s},t}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin);var base=Math.round(Math.random()*10);function getUID(t){return[t||"",base++].join("_")}function enableSubTypeDefaulter(t){var n={};t.registerSubTypeDefaulter=function(a,s){var l=parseClassType(a);n[l.main]=s},t.determineSubType=function(a,s){var l=s.type;if(!l){var u=parseClassType(a).main;t.hasSubTypes(a)&&n[u]&&(l=n[u](s))}return l}}function enableTopologicalTravel(t,n){t.topologicalTravel=function(u,c,p,d){if(!u.length)return;var x=a(c),_=x.graph,S=x.noEntryList,T={};for(each$f(u,function(z){T[z]=!0});S.length;){var A=S.pop(),R=_[A],D=!!T[A];D&&(p.call(d,A,R.originalDeps.slice()),delete T[A]),each$f(R.successor,D?F:O)}each$f(T,function(){var z="";throw new Error(z)});function O(z){_[z].entryCount--,_[z].entryCount===0&&S.push(z)}function F(z){T[z]=!0,O(z)}};function a(u){var c={},p=[];return each$f(u,function(d){var x=s(c,d),_=x.originalDeps=n(d),S=l(_,u);x.entryCount=S.length,x.entryCount===0&&p.push(d),each$f(S,function(T){indexOf(x.predecessor,T)<0&&x.predecessor.push(T);var A=s(c,T);indexOf(A.successor,T)<0&&A.successor.push(d)})}),{graph:c,noEntryList:p}}function s(u,c){return u[c]||(u[c]={predecessor:[],successor:[]}),u[c]}function l(u,c){var p=[];return each$f(u,function(d){indexOf(c,d)>=0&&p.push(d)}),p}}function inheritDefaultOption(t,n){return merge(merge({},t,!0),n,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported?function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return t.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(t,n){t=t.toUpperCase(),localeModels[t]=new Model(n),localeStorage[t]=n}function createLocaleObject(t){if(isString$1(t)){var n=localeStorage[t.toUpperCase()]||{};return t===LOCALE_ZH||t===LOCALE_EN?clone$4(n):merge(clone$4(n),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(t),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(t){return localeModels[t]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(t,n){return t+="","0000".substr(0,n-t.length)+t}function getPrimaryTimeUnit(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function isPrimaryTimeUnit(t){return t===getPrimaryTimeUnit(t)}function getDefaultFormatPrecisionOfInterval(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format$1(t,n,a,s){var l=parseDate(t),u=l[fullYearGetterName(a)](),c=l[monthGetterName(a)]()+1,p=Math.floor((c-1)/3)+1,d=l[dateGetterName(a)](),x=l["get"+(a?"UTC":"")+"Day"](),_=l[hoursGetterName(a)](),S=(_-1)%12+1,T=l[minutesGetterName(a)](),A=l[secondsGetterName(a)](),R=l[millisecondsGetterName(a)](),D=_>=12?"pm":"am",O=D.toUpperCase(),F=s instanceof Model?s:getLocaleModel(s||SYSTEM_LANG)||getDefaultLocaleModel(),z=F.getModel("time"),j=z.get("month"),Z=z.get("monthAbbr"),W=z.get("dayOfWeek"),J=z.get("dayOfWeekAbbr");return(n||"").replace(/{a}/g,D+"").replace(/{A}/g,O+"").replace(/{yyyy}/g,u+"").replace(/{yy}/g,pad(u%100+"",2)).replace(/{Q}/g,p+"").replace(/{MMMM}/g,j[c-1]).replace(/{MMM}/g,Z[c-1]).replace(/{MM}/g,pad(c,2)).replace(/{M}/g,c+"").replace(/{dd}/g,pad(d,2)).replace(/{d}/g,d+"").replace(/{eeee}/g,W[x]).replace(/{ee}/g,J[x]).replace(/{e}/g,x+"").replace(/{HH}/g,pad(_,2)).replace(/{H}/g,_+"").replace(/{hh}/g,pad(S+"",2)).replace(/{h}/g,S+"").replace(/{mm}/g,pad(T,2)).replace(/{m}/g,T+"").replace(/{ss}/g,pad(A,2)).replace(/{s}/g,A+"").replace(/{SSS}/g,pad(R,3)).replace(/{S}/g,R+"")}function leveledFormat(t,n,a,s,l){var u=null;if(isString$1(a))u=a;else if(isFunction$1(a))u=a(t.value,n,{level:t.level});else{var c=extend({},defaultLeveledFormatter);if(t.level>0)for(var p=0;p<primaryTimeUnits.length;++p)c[primaryTimeUnits[p]]="{primary|"+c[primaryTimeUnits[p]]+"}";var d=a?a.inherit===!1?a:defaults(a,c):c,x=getUnitFromValue(t.value,l);if(d[x])u=d[x];else if(d.inherit){for(var _=timeUnits.indexOf(x),p=_-1;p>=0;--p)if(d[x]){u=d[x];break}u=u||c.none}if(isArray$1(u)){var S=t.level==null?0:t.level>=0?t.level:u.length+t.level;S=Math.min(S,u.length-1),u=u[S]}}return format$1(new Date(t.value),u,l,s)}function getUnitFromValue(t,n){var a=parseDate(t),s=a[monthGetterName(n)]()+1,l=a[dateGetterName(n)](),u=a[hoursGetterName(n)](),c=a[minutesGetterName(n)](),p=a[secondsGetterName(n)](),d=a[millisecondsGetterName(n)](),x=d===0,_=x&&p===0,S=_&&c===0,T=S&&u===0,A=T&&l===1,R=A&&s===1;return R?"year":A?"month":T?"day":S?"hour":_?"minute":x?"second":"millisecond"}function getUnitValue(t,n,a){var s=isNumber(t)?parseDate(t):t;switch(n=n||getUnitFromValue(t,a),n){case"year":return s[fullYearGetterName(a)]();case"half-year":return s[monthGetterName(a)]()>=6?1:0;case"quarter":return Math.floor((s[monthGetterName(a)]()+1)/4);case"month":return s[monthGetterName(a)]();case"day":return s[dateGetterName(a)]();case"half-day":return s[hoursGetterName(a)]()/24;case"hour":return s[hoursGetterName(a)]();case"minute":return s[minutesGetterName(a)]();case"second":return s[secondsGetterName(a)]();case"millisecond":return s[millisecondsGetterName(a)]()}}function fullYearGetterName(t){return t?"getUTCFullYear":"getFullYear"}function monthGetterName(t){return t?"getUTCMonth":"getMonth"}function dateGetterName(t){return t?"getUTCDate":"getDate"}function hoursGetterName(t){return t?"getUTCHours":"getHours"}function minutesGetterName(t){return t?"getUTCMinutes":"getMinutes"}function secondsGetterName(t){return t?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(t){return t?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(t){return t?"setUTCFullYear":"setFullYear"}function monthSetterName(t){return t?"setUTCMonth":"setMonth"}function dateSetterName(t){return t?"setUTCDate":"setDate"}function hoursSetterName(t){return t?"setUTCHours":"setHours"}function minutesSetterName(t){return t?"setUTCMinutes":"setMinutes"}function secondsSetterName(t){return t?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(t){return t?"setUTCMilliseconds":"setMilliseconds"}function getTextRect(t,n,a,s,l,u,c,p){var d=new ZRText({style:{text:t,font:n,align:a,verticalAlign:s,padding:l,rich:u,overflow:c?"truncate":null,lineHeight:p}});return d.getBoundingRect()}function addCommas(t){if(!isNumeric(t))return isString$1(t)?t:"-";var n=(t+"").split(".");return n[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(n.length>1?"."+n[1]:"")}function toCamelCase(t,n){return t=(t||"").toLowerCase().replace(/-(.)/g,function(a,s){return s.toUpperCase()}),n&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(t,n,a){var s="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function l(_){return _&&trim$1(_)?_:"-"}function u(_){return!!(_!=null&&!isNaN(_)&&isFinite(_))}var c=n==="time",p=t instanceof Date;if(c||p){var d=c?parseDate(t):t;if(isNaN(+d)){if(p)return"-"}else return format$1(d,s,a)}if(n==="ordinal")return isStringSafe(t)?l(t):isNumber(t)&&u(t)?t+"":"-";var x=numericToNumber(t);return u(x)?addCommas(x):isStringSafe(t)?l(t):typeof t=="boolean"?t+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(t,n){return"{"+t+(n??"")+"}"};function formatTpl(t,n,a){isArray$1(n)||(n=[n]);var s=n.length;if(!s)return"";for(var l=n[0].$vars||[],u=0;u<l.length;u++){var c=TPL_VAR_ALIAS[u];t=t.replace(wrapVar(c),wrapVar(c,0))}for(var p=0;p<s;p++)for(var d=0;d<l.length;d++){var x=n[p][l[d]];t=t.replace(wrapVar(TPL_VAR_ALIAS[d],p),a?encodeHTML(x):x)}return t}function formatTplSimple(t,n,a){return each$f(n,function(s,l){t=t.replace("{"+l+"}",s)}),t}function getTooltipMarker(t,n){var a=isString$1(t)?{color:t,extraCssText:n}:t||{},s=a.color,l=a.type;n=a.extraCssText;var u=a.renderMode||"html";if(!s)return"";if(u==="html")return l==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(s)+";"+(n||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(s)+";"+(n||"")+'"></span>';var c=a.markerId||"markerX";return{renderMode:u,content:"{"+c+"|}  ",style:l==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:s}:{width:10,height:10,borderRadius:5,backgroundColor:s}}}function formatTime(t,n,a){(t==="week"||t==="month"||t==="quarter"||t==="half-year"||t==="year")&&(t=`MM-dd
yyyy`);var s=parseDate(n),l=a?"getUTC":"get",u=s[l+"FullYear"](),c=s[l+"Month"]()+1,p=s[l+"Date"](),d=s[l+"Hours"](),x=s[l+"Minutes"](),_=s[l+"Seconds"](),S=s[l+"Milliseconds"]();return t=t.replace("MM",pad(c,2)).replace("M",c).replace("yyyy",u).replace("yy",pad(u%100+"",2)).replace("dd",pad(p,2)).replace("d",p).replace("hh",pad(d,2)).replace("h",d).replace("mm",pad(x,2)).replace("m",x).replace("ss",pad(_,2)).replace("s",_).replace("SSS",pad(S,3)),t}function capitalFirst(t){return t&&t.charAt(0).toUpperCase()+t.substr(1)}function convertToColorString(t,n){return n=n||"transparent",isString$1(t)?t:isObject$3(t)&&t.colorStops&&(t.colorStops[0]||{}).color||n}function windowOpen(t,n){if(n==="_blank"||n==="blank"){var a=window.open();a.opener=null,a.location.href=t}else window.open(t,n)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(t,n,a,s,l){var u=0,c=0;s==null&&(s=1/0),l==null&&(l=1/0);var p=0;n.eachChild(function(d,x){var _=d.getBoundingRect(),S=n.childAt(x+1),T=S&&S.getBoundingRect(),A,R;if(t==="horizontal"){var D=_.width+(T?-T.x+_.x:0);A=u+D,A>s||d.newline?(u=0,A=D,c+=p+a,p=_.height):p=Math.max(p,_.height)}else{var O=_.height+(T?-T.y+_.y:0);R=c+O,R>l||d.newline?(u+=p+a,c=0,R=O,p=_.width):p=Math.max(p,_.width)}d.newline||(d.x=u,d.y=c,d.markRedraw(),t==="horizontal"?u=A+a:c=R+a)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getAvailableSize(t,n,a){var s=n.width,l=n.height,u=parsePercent(t.left,s),c=parsePercent(t.top,l),p=parsePercent(t.right,s),d=parsePercent(t.bottom,l);return(isNaN(u)||isNaN(parseFloat(t.left)))&&(u=0),(isNaN(p)||isNaN(parseFloat(t.right)))&&(p=s),(isNaN(c)||isNaN(parseFloat(t.top)))&&(c=0),(isNaN(d)||isNaN(parseFloat(t.bottom)))&&(d=l),a=normalizeCssArray(a||0),{width:Math.max(p-u-a[1]-a[3],0),height:Math.max(d-c-a[0]-a[2],0)}}function getLayoutRect(t,n,a){a=normalizeCssArray(a||0);var s=n.width,l=n.height,u=parsePercent(t.left,s),c=parsePercent(t.top,l),p=parsePercent(t.right,s),d=parsePercent(t.bottom,l),x=parsePercent(t.width,s),_=parsePercent(t.height,l),S=a[2]+a[0],T=a[1]+a[3],A=t.aspect;switch(isNaN(x)&&(x=s-p-T-u),isNaN(_)&&(_=l-d-S-c),A!=null&&(isNaN(x)&&isNaN(_)&&(A>s/l?x=s*.8:_=l*.8),isNaN(x)&&(x=A*_),isNaN(_)&&(_=x/A)),isNaN(u)&&(u=s-p-x-T),isNaN(c)&&(c=l-d-_-S),t.left||t.right){case"center":u=s/2-x/2-a[3];break;case"right":u=s-x-T;break}switch(t.top||t.bottom){case"middle":case"center":c=l/2-_/2-a[0];break;case"bottom":c=l-_-S;break}u=u||0,c=c||0,isNaN(x)&&(x=s-T-u-(p||0)),isNaN(_)&&(_=l-S-c-(d||0));var R=new BoundingRect(u+a[3],c+a[0],x,_);return R.margin=a,R}function positionElement(t,n,a,s,l,u){var c=!l||!l.hv||l.hv[0],p=!l||!l.hv||l.hv[1],d=l&&l.boundingMode||"all";if(u=u||t,u.x=t.x,u.y=t.y,!c&&!p)return!1;var x;if(d==="raw")x=t.type==="group"?new BoundingRect(0,0,+n.width||0,+n.height||0):t.getBoundingRect();else if(x=t.getBoundingRect(),t.needLocalTransform()){var _=t.getLocalTransform();x=x.clone(),x.applyTransform(_)}var S=getLayoutRect(defaults({width:x.width,height:x.height},n),a,s),T=c?S.x-x.x:0,A=p?S.y-x.y:0;return d==="raw"?(u.x=T,u.y=A):(u.x+=T,u.y+=A),u===t&&t.markRedraw(),!0}function sizeCalculable(t,n){return t[HV_NAMES[n][0]]!=null||t[HV_NAMES[n][1]]!=null&&t[HV_NAMES[n][2]]!=null}function fetchLayoutMode(t){var n=t.layoutMode||t.constructor.layoutMode;return isObject$3(n)?n:n?{type:n}:null}function mergeLayoutParam(t,n,a){var s=a&&a.ignoreSize;!isArray$1(s)&&(s=[s,s]);var l=c(HV_NAMES[0],0),u=c(HV_NAMES[1],1);x(HV_NAMES[0],t,l),x(HV_NAMES[1],t,u);function c(_,S){var T={},A=0,R={},D=0,O=2;if(each$e(_,function(j){R[j]=t[j]}),each$e(_,function(j){p(n,j)&&(T[j]=R[j]=n[j]),d(T,j)&&A++,d(R,j)&&D++}),s[S])return d(n,_[1])?R[_[2]]=null:d(n,_[2])&&(R[_[1]]=null),R;if(D===O||!A)return R;if(A>=O)return T;for(var F=0;F<_.length;F++){var z=_[F];if(!p(T,z)&&p(t,z)){T[z]=t[z];break}}return T}function p(_,S){return _.hasOwnProperty(S)}function d(_,S){return _[S]!=null&&_[S]!=="auto"}function x(_,S,T){each$e(_,function(A){S[A]=T[A]})}}function getLayoutParams(t){return copyLayoutParams({},t)}function copyLayoutParams(t,n){return n&&t&&each$e(LOCATION_PARAMS,function(a){n.hasOwnProperty(a)&&(t[a]=n[a])}),t}var inner$l=makeInner(),ComponentModel=function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,a,s,l)||this;return u.uid=getUID("ec_cpt_model"),u}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l)},n.prototype.mergeDefaultAndTheme=function(a,s){var l=fetchLayoutMode(this),u=l?getLayoutParams(a):{},c=s.getTheme();merge(a,c.get(this.mainType)),merge(a,this.getDefaultOption()),l&&mergeLayoutParam(a,u,l)},n.prototype.mergeOption=function(a,s){merge(this.option,a,!0);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,a,l)},n.prototype.optionUpdated=function(a,s){},n.prototype.getDefaultOption=function(){var a=this.constructor;if(!isExtendedClass(a))return a.defaultOption;var s=inner$l(this);if(!s.defaultOption){for(var l=[],u=a;u;){var c=u.prototype.defaultOption;c&&l.push(c),u=u.superClass}for(var p={},d=l.length-1;d>=0;d--)p=merge(p,l[d],!0);s.defaultOption=p}return s.defaultOption},n.prototype.getReferringComponents=function(a,s){var l=a+"Index",u=a+"Id";return queryReferringComponents(this.ecModel,a,{index:this.get(l,!0),id:this.get(u,!0)},s)},n.prototype.getBoxLayoutParams=function(){var a=this;return{left:a.get("left"),top:a.get("top"),right:a.get("right"),bottom:a.get("bottom"),width:a.get("width"),height:a.get("height")}},n.prototype.getZLevelKey=function(){return""},n.prototype.setZLevel=function(a){this.option.zlevel=a},n.protoInitialize=function(){var a=n.prototype;a.type="component",a.id="",a.name="",a.mainType="",a.subType="",a.componentIndex=0}(),n}(Model);mountExtend(ComponentModel,Model);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(t){var n=[];return each$f(ComponentModel.getClassesByMainType(t),function(a){n=n.concat(a.dependencies||a.prototype.dependencies||[])}),n=map$1(n,function(a){return parseClassType(a).main}),t!=="dataset"&&indexOf(n,"dataset")<=0&&n.unshift("dataset"),n}var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(t){innerGlobalModel(t).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(t,n,a){var s={},l=querySeriesUpstreamDatasetModel(n);if(!l||!t)return s;var u=[],c=[],p=n.ecModel,d=innerGlobalModel(p).datasetMap,x=l.uid+"_"+a.seriesLayoutBy,_,S;t=t.slice(),each$f(t,function(D,O){var F=isObject$3(D)?D:t[O]={name:D};F.type==="ordinal"&&_==null&&(_=O,S=R(F)),s[F.name]=[]});var T=d.get(x)||d.set(x,{categoryWayDim:S,valueWayDim:0});each$f(t,function(D,O){var F=D.name,z=R(D);if(_==null){var j=T.valueWayDim;A(s[F],j,z),A(c,j,z),T.valueWayDim+=z}else if(_===O)A(s[F],0,z),A(u,0,z);else{var j=T.categoryWayDim;A(s[F],j,z),A(c,j,z),T.categoryWayDim+=z}});function A(D,O,F){for(var z=0;z<F;z++)D.push(O+z)}function R(D){var O=D.dimsDef;return O?O.length:1}return u.length&&(s.itemName=u),c.length&&(s.seriesName=c),s}function makeSeriesEncodeForNameBased(t,n,a){var s={},l=querySeriesUpstreamDatasetModel(t);if(!l)return s;var u=n.sourceFormat,c=n.dimensionsDefine,p;(u===SOURCE_FORMAT_OBJECT_ROWS||u===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(c,function(_,S){(isObject$3(_)?_.name:_)==="name"&&(p=S)});var d=function(){for(var _={},S={},T=[],A=0,R=Math.min(5,a);A<R;A++){var D=doGuessOrdinal(n.data,u,n.seriesLayoutBy,c,n.startIndex,A);T.push(D);var O=D===BE_ORDINAL.Not;if(O&&_.v==null&&A!==p&&(_.v=A),(_.n==null||_.n===_.v||!O&&T[_.n]===BE_ORDINAL.Not)&&(_.n=A),F(_)&&T[_.n]!==BE_ORDINAL.Not)return _;O||(D===BE_ORDINAL.Might&&S.v==null&&A!==p&&(S.v=A),(S.n==null||S.n===S.v)&&(S.n=A))}function F(z){return z.v!=null&&z.n!=null}return F(_)?_:F(S)?S:null}();if(d){s.value=[d.v];var x=p??d.n;s.itemName=[x],s.seriesName=[x]}return s}function querySeriesUpstreamDatasetModel(t){var n=t.get("data",!0);if(!n)return queryReferringComponents(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(t){return!t.get("transform",!0)&&!t.get("fromTransformResult",!0)?[]:queryReferringComponents(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(t,n){return doGuessOrdinal(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,n)}function doGuessOrdinal(t,n,a,s,l,u){var c,p=5;if(isTypedArray(t))return BE_ORDINAL.Not;var d,x;if(s){var _=s[u];isObject$3(_)?(d=_.name,x=_.type):isString$1(_)&&(d=_)}if(x!=null)return x==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(n===SOURCE_FORMAT_ARRAY_ROWS){var S=t;if(a===SERIES_LAYOUT_BY_ROW){for(var T=S[u],A=0;A<(T||[]).length&&A<p;A++)if((c=Z(T[l+A]))!=null)return c}else for(var A=0;A<S.length&&A<p;A++){var R=S[l+A];if(R&&(c=Z(R[u]))!=null)return c}}else if(n===SOURCE_FORMAT_OBJECT_ROWS){var D=t;if(!d)return BE_ORDINAL.Not;for(var A=0;A<D.length&&A<p;A++){var O=D[A];if(O&&(c=Z(O[d]))!=null)return c}}else if(n===SOURCE_FORMAT_KEYED_COLUMNS){var F=t;if(!d)return BE_ORDINAL.Not;var T=F[d];if(!T||isTypedArray(T))return BE_ORDINAL.Not;for(var A=0;A<T.length&&A<p;A++)if((c=Z(T[A]))!=null)return c}else if(n===SOURCE_FORMAT_ORIGINAL)for(var z=t,A=0;A<z.length&&A<p;A++){var O=z[A],j=getDataItemValue(O);if(!isArray$1(j))return BE_ORDINAL.Not;if((c=Z(j[u]))!=null)return c}function Z(W){var J=isString$1(W);if(W!=null&&Number.isFinite(Number(W))&&W!=="")return J?BE_ORDINAL.Might:BE_ORDINAL.Not;if(J&&W!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(t,n){assert(internalOptionCreatorMap.get(t)==null&&n),internalOptionCreatorMap.set(t,n)}function concatInternalOptions(t,n,a){var s=internalOptionCreatorMap.get(n);if(!s)return a;var l=s(t);return l?a.concat(l):a}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function t(){}return t.prototype.getColorFromPalette=function(n,a,s){var l=normalizeToArray(this.get("color",!0)),u=this.get("colorLayer",!0);return getFromPalette(this,innerColor,l,u,n,a,s)},t.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},t}();function getDecalFromPalette(t,n,a,s){var l=normalizeToArray(t.get(["aria","decal","decals"]));return getFromPalette(t,innerDecal,l,null,n,a,s)}function getNearestPalette(t,n){for(var a=t.length,s=0;s<a;s++)if(t[s].length>n)return t[s];return t[a-1]}function getFromPalette(t,n,a,s,l,u,c){u=u||t;var p=n(u),d=p.paletteIdx||0,x=p.paletteNameMap=p.paletteNameMap||{};if(x.hasOwnProperty(l))return x[l];var _=c==null||!s?a:getNearestPalette(s,c);if(_=_||a,!(!_||!_.length)){var S=_[d];return l&&(x[l]=S),p.paletteIdx=(d+1)%_.length,S}}function clearPalette(t,n){n(t).paletteIdx=0,n(t).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,GlobalModel=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(a,s,l,u,c,p){u=u||{},this.option=null,this._theme=new Model(u),this._locale=new Model(c),this._optionManager=p},n.prototype.setOption=function(a,s,l){var u=normalizeSetOptionInput(s);this._optionManager.setOption(a,l,u),this._resetOption(null,u)},n.prototype.resetOption=function(a,s){return this._resetOption(a,normalizeSetOptionInput(s))},n.prototype._resetOption=function(a,s){var l=!1,u=this._optionManager;if(!a||a==="recreate"){var c=u.mountOption(a==="recreate");!this.option||a==="recreate"?initBase(this,c):(this.restoreData(),this._mergeOption(c,s)),l=!0}if((a==="timeline"||a==="media")&&this.restoreData(),!a||a==="recreate"||a==="timeline"){var p=u.getTimelineOption(this);p&&(l=!0,this._mergeOption(p,s))}if(!a||a==="recreate"||a==="media"){var d=u.getMediaOption(this);d.length&&each$f(d,function(x){l=!0,this._mergeOption(x,s)},this)}return l},n.prototype.mergeOption=function(a){this._mergeOption(a,null)},n.prototype._mergeOption=function(a,s){var l=this.option,u=this._componentsMap,c=this._componentsCount,p=[],d=createHashMap(),x=s&&s.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(a,function(S,T){S!=null&&(ComponentModel.hasClass(T)?T&&(p.push(T),d.set(T,!0)):l[T]=l[T]==null?clone$4(S):merge(l[T],S,!0))}),x&&x.each(function(S,T){ComponentModel.hasClass(T)&&!d.get(T)&&(p.push(T),d.set(T,!0))}),ComponentModel.topologicalTravel(p,ComponentModel.getAllClassMainTypes(),_,this);function _(S){var T=concatInternalOptions(this,S,normalizeToArray(a[S])),A=u.get(S),R=A?x&&x.get(S)?"replaceMerge":"normalMerge":"replaceAll",D=mappingToExists(A,T,R);setComponentTypeToKeyInfo(D,S,ComponentModel),l[S]=null,u.set(S,null),c.set(S,0);var O=[],F=[],z=0,j;each$f(D,function(Z,W){var J=Z.existing,en=Z.newOption;if(!en)J&&(J.mergeOption({},this),J.optionUpdated({},!1));else{var tn=S==="series",Ct=ComponentModel.getClass(S,Z.keyInfo.subType,!tn);if(!Ct)return;if(S==="tooltip"){if(j)return;j=!0}if(J&&J.constructor===Ct)J.name=Z.keyInfo.name,J.mergeOption(en,this),J.optionUpdated(en,!1);else{var Q=extend({componentIndex:W},Z.keyInfo);J=new Ct(en,this,this,Q),extend(J,Q),Z.brandNew&&(J.__requireNewView=!0),J.init(en,this,this),J.optionUpdated(null,!0)}}J?(O.push(J.option),F.push(J),z++):(O.push(void 0),F.push(void 0))},this),l[S]=O,u.set(S,F),c.set(S,z),S==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},n.prototype.getOption=function(){var a=clone$4(this.option);return each$f(a,function(s,l){if(ComponentModel.hasClass(l)){for(var u=normalizeToArray(s),c=u.length,p=!1,d=c-1;d>=0;d--)u[d]&&!isComponentIdInternal(u[d])?p=!0:(u[d]=null,!p&&c--);u.length=c,a[l]=u}}),delete a[OPTION_INNER_KEY],a},n.prototype.getTheme=function(){return this._theme},n.prototype.getLocaleModel=function(){return this._locale},n.prototype.setUpdatePayload=function(a){this._payload=a},n.prototype.getUpdatePayload=function(){return this._payload},n.prototype.getComponent=function(a,s){var l=this._componentsMap.get(a);if(l){var u=l[s||0];if(u)return u;if(s==null){for(var c=0;c<l.length;c++)if(l[c])return l[c]}}},n.prototype.queryComponents=function(a){var s=a.mainType;if(!s)return[];var l=a.index,u=a.id,c=a.name,p=this._componentsMap.get(s);if(!p||!p.length)return[];var d;return l!=null?(d=[],each$f(normalizeToArray(l),function(x){p[x]&&d.push(p[x])})):u!=null?d=queryByIdOrName("id",u,p):c!=null?d=queryByIdOrName("name",c,p):d=filter(p,function(x){return!!x}),filterBySubType(d,a)},n.prototype.findComponents=function(a){var s=a.query,l=a.mainType,u=p(s),c=u?this.queryComponents(u):filter(this._componentsMap.get(l),function(x){return!!x});return d(filterBySubType(c,a));function p(x){var _=l+"Index",S=l+"Id",T=l+"Name";return x&&(x[_]!=null||x[S]!=null||x[T]!=null)?{mainType:l,index:x[_],id:x[S],name:x[T]}:null}function d(x){return a.filter?filter(x,a.filter):x}},n.prototype.eachComponent=function(a,s,l){var u=this._componentsMap;if(isFunction$1(a)){var c=s,p=a;u.each(function(S,T){for(var A=0;S&&A<S.length;A++){var R=S[A];R&&p.call(c,T,R,R.componentIndex)}})}else for(var d=isString$1(a)?u.get(a):isObject$3(a)?this.findComponents(a):null,x=0;d&&x<d.length;x++){var _=d[x];_&&s.call(l,_,_.componentIndex)}},n.prototype.getSeriesByName=function(a){var s=convertOptionIdName(a,null);return filter(this._componentsMap.get("series"),function(l){return!!l&&s!=null&&l.name===s})},n.prototype.getSeriesByIndex=function(a){return this._componentsMap.get("series")[a]},n.prototype.getSeriesByType=function(a){return filter(this._componentsMap.get("series"),function(s){return!!s&&s.subType===a})},n.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(a){return!!a})},n.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},n.prototype.eachSeries=function(a,s){assertSeriesInitialized(this),each$f(this._seriesIndices,function(l){var u=this._componentsMap.get("series")[l];a.call(s,u,l)},this)},n.prototype.eachRawSeries=function(a,s){each$f(this._componentsMap.get("series"),function(l){l&&a.call(s,l,l.componentIndex)})},n.prototype.eachSeriesByType=function(a,s,l){assertSeriesInitialized(this),each$f(this._seriesIndices,function(u){var c=this._componentsMap.get("series")[u];c.subType===a&&s.call(l,c,u)},this)},n.prototype.eachRawSeriesByType=function(a,s,l){return each$f(this.getSeriesByType(a),s,l)},n.prototype.isSeriesFiltered=function(a){return assertSeriesInitialized(this),this._seriesIndicesMap.get(a.componentIndex)==null},n.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},n.prototype.filterSeries=function(a,s){assertSeriesInitialized(this);var l=[];each$f(this._seriesIndices,function(u){var c=this._componentsMap.get("series")[u];a.call(s,c,u)&&l.push(u)},this),this._seriesIndices=l,this._seriesIndicesMap=createHashMap(l)},n.prototype.restoreData=function(a){reCreateSeriesIndices(this);var s=this._componentsMap,l=[];s.each(function(u,c){ComponentModel.hasClass(c)&&l.push(c)}),ComponentModel.topologicalTravel(l,ComponentModel.getAllClassMainTypes(),function(u){each$f(s.get(u),function(c){c&&(u!=="series"||!isNotTargetSeries(c,a))&&c.restoreData()})})},n.internalField=function(){reCreateSeriesIndices=function(a){var s=a._seriesIndices=[];each$f(a._componentsMap.get("series"),function(l){l&&s.push(l.componentIndex)}),a._seriesIndicesMap=createHashMap(s)},assertSeriesInitialized=function(a){},initBase=function(a,s){a.option={},a.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,a._componentsMap=createHashMap({series:[]}),a._componentsCount=createHashMap();var l=s.aria;isObject$3(l)&&l.enabled==null&&(l.enabled=!0),mergeTheme(s,a._theme.option),merge(s,globalDefault,!1),a._mergeOption(s,null)}}(),n}(Model);function isNotTargetSeries(t,n){if(n){var a=n.seriesIndex,s=n.seriesId,l=n.seriesName;return a!=null&&t.componentIndex!==a||s!=null&&t.id!==s||l!=null&&t.name!==l}}function mergeTheme(t,n){var a=t.color&&!t.colorLayer;each$f(n,function(s,l){l==="colorLayer"&&a||ComponentModel.hasClass(l)||(typeof s=="object"?t[l]=t[l]?merge(t[l],s,!1):clone$4(s):t[l]==null&&(t[l]=s))})}function queryByIdOrName(t,n,a){if(isArray$1(n)){var s=createHashMap();return each$f(n,function(u){if(u!=null){var c=convertOptionIdName(u,null);c!=null&&s.set(u,!0)}}),filter(a,function(u){return u&&s.get(u[t])})}else{var l=convertOptionIdName(n,null);return filter(a,function(u){return u&&l!=null&&u[t]===l})}}function filterBySubType(t,n){return n.hasOwnProperty("subType")?filter(t,function(a){return a&&a.subType===n.subType}):t}function normalizeSetOptionInput(t){var n=createHashMap();return t&&each$f(normalizeToArray(t.replaceMerge),function(a){n.set(a,!0)}),{replaceMergeMainTypeMap:n}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function t(n){each$f(availableMethods,function(a){this[a]=bind$1(n[a],n)},this)}return t}(),coordinateSystemCreators={},CoordinateSystemManager=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(n,a){var s=[];each$f(coordinateSystemCreators,function(l,u){var c=l.create(n,a);s=s.concat(c||[])}),this._coordinateSystems=s},t.prototype.update=function(n,a){each$f(this._coordinateSystems,function(s){s.update&&s.update(n,a)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(n,a){coordinateSystemCreators[n]=a},t.get=function(n){return coordinateSystemCreators[n]},t}(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function t(n){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=n}return t.prototype.setOption=function(n,a,s){n&&(each$f(normalizeToArray(n.series),function(c){c&&c.data&&isTypedArray(c.data)&&setAsPrimitive(c.data)}),each$f(normalizeToArray(n.dataset),function(c){c&&c.source&&isTypedArray(c.source)&&setAsPrimitive(c.source)})),n=clone$4(n);var l=this._optionBackup,u=parseRawOption(n,a,!l);this._newBaseOption=u.baseOption,l?(u.timelineOptions.length&&(l.timelineOptions=u.timelineOptions),u.mediaList.length&&(l.mediaList=u.mediaList),u.mediaDefault&&(l.mediaDefault=u.mediaDefault)):this._optionBackup=u},t.prototype.mountOption=function(n){var a=this._optionBackup;return this._timelineOptions=a.timelineOptions,this._mediaList=a.mediaList,this._mediaDefault=a.mediaDefault,this._currentMediaIndices=[],clone$4(n?a.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(n){var a,s=this._timelineOptions;if(s.length){var l=n.getComponent("timeline");l&&(a=clone$4(s[l.getCurrentIndex()]))}return a},t.prototype.getMediaOption=function(n){var a=this._api.getWidth(),s=this._api.getHeight(),l=this._mediaList,u=this._mediaDefault,c=[],p=[];if(!l.length&&!u)return p;for(var d=0,x=l.length;d<x;d++)applyMediaQuery(l[d].query,a,s)&&c.push(d);return!c.length&&u&&(c=[-1]),c.length&&!indicesEquals(c,this._currentMediaIndices)&&(p=map$1(c,function(_){return clone$4(_===-1?u.option:l[_].option)})),this._currentMediaIndices=c,p},t}();function parseRawOption(t,n,a){var s=[],l,u,c=t.baseOption,p=t.timeline,d=t.options,x=t.media,_=!!t.media,S=!!(d||p||c&&c.timeline);c?(u=c,u.timeline||(u.timeline=p)):((S||_)&&(t.options=t.media=null),u=t),_&&isArray$1(x)&&each$f(x,function(A){A&&A.option&&(A.query?s.push(A):l||(l=A))}),T(u),each$f(d,function(A){return T(A)}),each$f(s,function(A){return T(A.option)});function T(A){each$f(n,function(R){R(A,a)})}return{baseOption:u,timelineOptions:d||[],mediaDefault:l,mediaList:s}}function applyMediaQuery(t,n,a){var s={width:n,height:a,aspectratio:n/a},l=!0;return each$f(t,function(u,c){var p=c.match(QUERY_REG);if(!(!p||!p[1]||!p[2])){var d=p[1],x=p[2].toLowerCase();compare(s[x],u,d)||(l=!1)}}),l}function compare(t,n,a){return a==="min"?t>=n:a==="max"?t<=n:t===n}function indicesEquals(t,n){return t.join(",")===n.join(",")}var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(t){var n=t&&t.itemStyle;if(n)for(var a=0,s=POSSIBLE_STYLES.length;a<s;a++){var l=POSSIBLE_STYLES[a],u=n.normal,c=n.emphasis;u&&u[l]&&(t[l]=t[l]||{},t[l].normal?merge(t[l].normal,u[l]):t[l].normal=u[l],u[l]=null),c&&c[l]&&(t[l]=t[l]||{},t[l].emphasis?merge(t[l].emphasis,c[l]):t[l].emphasis=c[l],c[l]=null)}}function convertNormalEmphasis(t,n,a){if(t&&t[n]&&(t[n].normal||t[n].emphasis)){var s=t[n].normal,l=t[n].emphasis;s&&(a?(t[n].normal=t[n].emphasis=null,defaults(t[n],s)):t[n]=s),l&&(t.emphasis=t.emphasis||{},t.emphasis[n]=l,l.focus&&(t.emphasis.focus=l.focus),l.blurScope&&(t.emphasis.blurScope=l.blurScope))}}function removeEC3NormalStatus(t){convertNormalEmphasis(t,"itemStyle"),convertNormalEmphasis(t,"lineStyle"),convertNormalEmphasis(t,"areaStyle"),convertNormalEmphasis(t,"label"),convertNormalEmphasis(t,"labelLine"),convertNormalEmphasis(t,"upperLabel"),convertNormalEmphasis(t,"edgeLabel")}function compatTextStyle(t,n){var a=isObject$2(t)&&t[n],s=isObject$2(a)&&a.textStyle;if(s)for(var l=0,u=TEXT_STYLE_OPTIONS.length;l<u;l++){var c=TEXT_STYLE_OPTIONS[l];s.hasOwnProperty(c)&&(a[c]=s[c])}}function compatEC3CommonStyles(t){t&&(removeEC3NormalStatus(t),compatTextStyle(t,"label"),t.emphasis&&compatTextStyle(t.emphasis,"label"))}function processSeries(t){if(isObject$2(t)){compatEC2ItemStyle(t),removeEC3NormalStatus(t),compatTextStyle(t,"label"),compatTextStyle(t,"upperLabel"),compatTextStyle(t,"edgeLabel"),t.emphasis&&(compatTextStyle(t.emphasis,"label"),compatTextStyle(t.emphasis,"upperLabel"),compatTextStyle(t.emphasis,"edgeLabel"));var n=t.markPoint;n&&(compatEC2ItemStyle(n),compatEC3CommonStyles(n));var a=t.markLine;a&&(compatEC2ItemStyle(a),compatEC3CommonStyles(a));var s=t.markArea;s&&compatEC3CommonStyles(s);var l=t.data;if(t.type==="graph"){l=l||t.nodes;var u=t.links||t.edges;if(u&&!isTypedArray(u))for(var c=0;c<u.length;c++)compatEC3CommonStyles(u[c]);each$f(t.categories,function(x){removeEC3NormalStatus(x)})}if(l&&!isTypedArray(l))for(var c=0;c<l.length;c++)compatEC3CommonStyles(l[c]);if(n=t.markPoint,n&&n.data)for(var p=n.data,c=0;c<p.length;c++)compatEC3CommonStyles(p[c]);if(a=t.markLine,a&&a.data)for(var d=a.data,c=0;c<d.length;c++)isArray$1(d[c])?(compatEC3CommonStyles(d[c][0]),compatEC3CommonStyles(d[c][1])):compatEC3CommonStyles(d[c]);t.type==="gauge"?(compatTextStyle(t,"axisLabel"),compatTextStyle(t,"title"),compatTextStyle(t,"detail")):t.type==="treemap"?(convertNormalEmphasis(t.breadcrumb,"itemStyle"),each$f(t.levels,function(x){removeEC3NormalStatus(x)})):t.type==="tree"&&removeEC3NormalStatus(t.leaves)}}function toArr(t){return isArray$1(t)?t:t?[t]:[]}function toObj(t){return(isArray$1(t)?t[0]:t)||{}}function globalCompatStyle(t,n){each$d(toArr(t.series),function(s){isObject$2(s)&&processSeries(s)});var a=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];n&&a.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(a,function(s){each$d(toArr(t[s]),function(l){l&&(compatTextStyle(l,"axisLabel"),compatTextStyle(l.axisPointer,"label"))})}),each$d(toArr(t.parallel),function(s){var l=s&&s.parallelAxisDefault;compatTextStyle(l,"axisLabel"),compatTextStyle(l&&l.axisPointer,"label")}),each$d(toArr(t.calendar),function(s){convertNormalEmphasis(s,"itemStyle"),compatTextStyle(s,"dayLabel"),compatTextStyle(s,"monthLabel"),compatTextStyle(s,"yearLabel")}),each$d(toArr(t.radar),function(s){compatTextStyle(s,"name"),s.name&&s.axisName==null&&(s.axisName=s.name,delete s.name),s.nameGap!=null&&s.axisNameGap==null&&(s.axisNameGap=s.nameGap,delete s.nameGap)}),each$d(toArr(t.geo),function(s){isObject$2(s)&&(compatEC3CommonStyles(s),each$d(toArr(s.regions),function(l){compatEC3CommonStyles(l)}))}),each$d(toArr(t.timeline),function(s){compatEC3CommonStyles(s),convertNormalEmphasis(s,"label"),convertNormalEmphasis(s,"itemStyle"),convertNormalEmphasis(s,"controlStyle",!0);var l=s.data;isArray$1(l)&&each$f(l,function(u){isObject$3(u)&&(convertNormalEmphasis(u,"label"),convertNormalEmphasis(u,"itemStyle"))})}),each$d(toArr(t.toolbox),function(s){convertNormalEmphasis(s,"iconStyle"),each$d(s.feature,function(l){convertNormalEmphasis(l,"iconStyle")})}),compatTextStyle(toObj(t.axisPointer),"label"),compatTextStyle(toObj(t.tooltip).axisPointer,"label")}function get(t,n){for(var a=n.split(","),s=t,l=0;l<a.length&&(s=s&&s[a[l]],s!=null);l++);return s}function set(t,n,a,s){for(var l=n.split(","),u=t,c,p=0;p<l.length-1;p++)c=l[p],u[c]==null&&(u[c]={}),u=u[c];u[l[p]]==null&&(u[l[p]]=a)}function compatLayoutProperties(t){t&&each$f(LAYOUT_PROPERTIES,function(n){n[0]in t&&!(n[1]in t)&&(t[n[1]]=t[n[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(t){var n=t&&t.itemStyle;if(n)for(var a=0;a<BAR_ITEM_STYLE_MAP.length;a++){var s=BAR_ITEM_STYLE_MAP[a][1],l=BAR_ITEM_STYLE_MAP[a][0];n[s]!=null&&(n[l]=n[s])}}function compatPieLabel(t){t&&t.alignTo==="edge"&&t.margin!=null&&t.edgeDistance==null&&(t.edgeDistance=t.margin)}function compatSunburstState(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function compatGraphFocus(t){t&&t.focusNodeAdjacency!=null&&(t.emphasis=t.emphasis||{},t.emphasis.focus==null&&(t.emphasis.focus="adjacency"))}function traverseTree(t,n){if(t)for(var a=0;a<t.length;a++)n(t[a]),t[a]&&traverseTree(t[a].children,n)}function globalBackwardCompat(t,n){globalCompatStyle(t,n),t.series=normalizeToArray(t.series),each$f(t.series,function(a){if(isObject$3(a)){var s=a.type;if(s==="line")a.clipOverflow!=null&&(a.clip=a.clipOverflow);else if(s==="pie"||s==="gauge"){a.clockWise!=null&&(a.clockwise=a.clockWise),compatPieLabel(a.label);var l=a.data;if(l&&!isTypedArray(l))for(var u=0;u<l.length;u++)compatPieLabel(l[u]);a.hoverOffset!=null&&(a.emphasis=a.emphasis||{},(a.emphasis.scaleSize=null)&&(a.emphasis.scaleSize=a.hoverOffset))}else if(s==="gauge"){var c=get(a,"pointer.color");c!=null&&set(a,"itemStyle.color",c)}else if(s==="bar"){compatBarItemStyle(a),compatBarItemStyle(a.backgroundStyle),compatBarItemStyle(a.emphasis);var l=a.data;if(l&&!isTypedArray(l))for(var u=0;u<l.length;u++)typeof l[u]=="object"&&(compatBarItemStyle(l[u]),compatBarItemStyle(l[u]&&l[u].emphasis))}else if(s==="sunburst"){var p=a.highlightPolicy;p&&(a.emphasis=a.emphasis||{},a.emphasis.focus||(a.emphasis.focus=p)),compatSunburstState(a),traverseTree(a.data,compatSunburstState)}else s==="graph"||s==="sankey"?compatGraphFocus(a):s==="map"&&(a.mapType&&!a.map&&(a.map=a.mapType),a.mapLocation&&defaults(a,a.mapLocation));a.hoverAnimation!=null&&(a.emphasis=a.emphasis||{},a.emphasis&&a.emphasis.scale==null&&(a.emphasis.scale=a.hoverAnimation)),compatLayoutProperties(a)}}),t.dataRange&&(t.visualMap=t.dataRange),each$f(COMPATITABLE_COMPONENTS,function(a){var s=t[a];s&&(isArray$1(s)||(s=[s]),each$f(s,function(l){compatLayoutProperties(l)}))})}function dataStack$1(t){var n=createHashMap();t.eachSeries(function(a){var s=a.get("stack");if(s){var l=n.get(s)||n.set(s,[]),u=a.getData(),c={stackResultDimension:u.getCalculationInfo("stackResultDimension"),stackedOverDimension:u.getCalculationInfo("stackedOverDimension"),stackedDimension:u.getCalculationInfo("stackedDimension"),stackedByDimension:u.getCalculationInfo("stackedByDimension"),isStackedByIndex:u.getCalculationInfo("isStackedByIndex"),data:u,seriesModel:a};if(!c.stackedDimension||!(c.isStackedByIndex||c.stackedByDimension))return;l.length&&u.setCalculationInfo("stackedOnSeries",l[l.length-1].seriesModel),l.push(c)}}),n.each(calculateStack)}function calculateStack(t){each$f(t,function(n,a){var s=[],l=[NaN,NaN],u=[n.stackResultDimension,n.stackedOverDimension],c=n.data,p=n.isStackedByIndex,d=n.seriesModel.get("stackStrategy")||"samesign";c.modify(u,function(x,_,S){var T=c.get(n.stackedDimension,S);if(isNaN(T))return l;var A,R;p?R=c.getRawIndex(S):A=c.get(n.stackedByDimension,S);for(var D=NaN,O=a-1;O>=0;O--){var F=t[O];if(p||(R=F.data.rawIndexOf(F.stackedByDimension,A)),R>=0){var z=F.data.getByRawIndex(F.stackResultDimension,R);if(d==="all"||d==="positive"&&z>0||d==="negative"&&z<0||d==="samesign"&&T>=0&&z>0||d==="samesign"&&T<=0&&z<0){T=addSafe(T,z),D=z;break}}}return s[0]=T,s[1]=D,s})})}var SourceImpl=function(){function t(n){this.data=n.data||(n.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=n.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=n.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=n.startIndex||0,this.dimensionsDetectedCount=n.dimensionsDetectedCount,this.metaRawOption=n.metaRawOption;var a=this.dimensionsDefine=n.dimensionsDefine;if(a)for(var s=0;s<a.length;s++){var l=a[s];l.type==null&&guessOrdinal(this,s)===BE_ORDINAL.Must&&(l.type="ordinal")}}return t}();function isSourceInstance(t){return t instanceof SourceImpl}function createSource(t,n,a){a=a||detectSourceFormat(t);var s=n.seriesLayoutBy,l=determineSourceDimensions(t,a,s,n.sourceHeader,n.dimensions),u=new SourceImpl({data:t,sourceFormat:a,seriesLayoutBy:s,dimensionsDefine:l.dimensionsDefine,startIndex:l.startIndex,dimensionsDetectedCount:l.dimensionsDetectedCount,metaRawOption:clone$4(n)});return u}function createSourceFromSeriesDataOption(t){return new SourceImpl({data:t,sourceFormat:isTypedArray(t)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(t){return new SourceImpl({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:clone$4(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})}function detectSourceFormat(t){var n=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(t))n=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(t)){t.length===0&&(n=SOURCE_FORMAT_ARRAY_ROWS);for(var a=0,s=t.length;a<s;a++){var l=t[a];if(l!=null){if(isArray$1(l)||isTypedArray(l)){n=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(l)){n=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(t)){for(var u in t)if(hasOwn(t,u)&&isArrayLike(t[u])){n=SOURCE_FORMAT_KEYED_COLUMNS;break}}return n}function determineSourceDimensions(t,n,a,s,l){var u,c;if(!t)return{dimensionsDefine:normalizeDimensionsOption(l),startIndex:c,dimensionsDetectedCount:u};if(n===SOURCE_FORMAT_ARRAY_ROWS){var p=t;s==="auto"||s==null?arrayRowsTravelFirst(function(x){x!=null&&x!=="-"&&(isString$1(x)?c==null&&(c=1):c=0)},a,p,10):c=isNumber(s)?s:s?1:0,!l&&c===1&&(l=[],arrayRowsTravelFirst(function(x,_){l[_]=x!=null?x+"":""},a,p,1/0)),u=l?l.length:a===SERIES_LAYOUT_BY_ROW?p.length:p[0]?p[0].length:null}else if(n===SOURCE_FORMAT_OBJECT_ROWS)l||(l=objectRowsCollectDimensions(t));else if(n===SOURCE_FORMAT_KEYED_COLUMNS)l||(l=[],each$f(t,function(x,_){l.push(_)}));else if(n===SOURCE_FORMAT_ORIGINAL){var d=getDataItemValue(t[0]);u=isArray$1(d)&&d.length||1}return{startIndex:c,dimensionsDefine:normalizeDimensionsOption(l),dimensionsDetectedCount:u}}function objectRowsCollectDimensions(t){for(var n=0,a;n<t.length&&!(a=t[n++]););if(a)return keys(a)}function normalizeDimensionsOption(t){if(t){var n=createHashMap();return map$1(t,function(a,s){a=isObject$3(a)?a:{name:a};var l={name:a.name,displayName:a.displayName,type:a.type};if(l.name==null)return l;l.name+="",l.displayName==null&&(l.displayName=l.name);var u=n.get(l.name);return u?l.name+="-"+u.count++:n.set(l.name,{count:1}),l})}}function arrayRowsTravelFirst(t,n,a,s){if(n===SERIES_LAYOUT_BY_ROW)for(var l=0;l<a.length&&l<s;l++)t(a[l]?a[l][0]:null,l);else for(var u=a[0]||[],l=0;l<u.length&&l<s;l++)t(u[l],l)}function shouldRetrieveDataByName(t){var n=t.sourceFormat;return n===SOURCE_FORMAT_OBJECT_ROWS||n===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,providerMethods,mountMethods,DefaultDataProvider=function(){function t(n,a){var s=isSourceInstance(n)?n:createSourceFromSeriesDataOption(n);this._source=s;var l=this._data=s.data;s.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY&&(this._offset=0,this._dimSize=a,this._data=l),mountMethods(this,l,s)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(n,a){},t.prototype.appendData=function(n){},t.prototype.clean=function(){},t.protoInitialize=function(){var n=t.prototype;n.pure=!1,n.persistent=!0}(),t.internalField=function(){var n;mountMethods=function(c,p,d){var x=d.sourceFormat,_=d.seriesLayoutBy,S=d.startIndex,T=d.dimensionsDefine,A=providerMethods[getMethodMapKey(x,_)];if(extend(c,A),x===SOURCE_FORMAT_TYPED_ARRAY)c.getItem=a,c.count=l,c.fillStorage=s;else{var R=getRawSourceItemGetter(x,_);c.getItem=bind$1(R,null,p,S,T);var D=getRawSourceDataCounter(x,_);c.count=bind$1(D,null,p,S,T)}};var a=function(c,p){c=c-this._offset,p=p||[];for(var d=this._data,x=this._dimSize,_=x*c,S=0;S<x;S++)p[S]=d[_+S];return p},s=function(c,p,d,x){for(var _=this._data,S=this._dimSize,T=0;T<S;T++){for(var A=x[T],R=A[0]==null?1/0:A[0],D=A[1]==null?-1/0:A[1],O=p-c,F=d[T],z=0;z<O;z++){var j=_[z*S+T];F[c+z]=j,j<R&&(R=j),j>D&&(D=j)}A[0]=R,A[1]=D}},l=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(n={},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:u},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},n[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:u},n[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(c){var p=this._data;each$f(c,function(d,x){for(var _=p[x]||(p[x]=[]),S=0;S<(d||[]).length;S++)_.push(d[S])})}},n[SOURCE_FORMAT_ORIGINAL]={appendData:u},n[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(c){this._data=c},clean:function(){this._offset+=this.count(),this._data=null}},n);function u(c){for(var p=0;p<c.length;p++)this._data.push(c[p])}}(),t}(),getItemSimply=function(t,n,a,s){return t[s]},rawSourceItemGetterMap=(_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(t,n,a,s){return t[s+n]},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(t,n,a,s,l){s+=n;for(var u=l||[],c=t,p=0;p<c.length;p++){var d=c[p];u[p]=d?d[s]:null}return u},_a[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(t,n,a,s,l){for(var u=l||[],c=0;c<a.length;c++){var p=a[c].name,d=t[p];u[c]=d?d[s]:null}return u},_a[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a);function getRawSourceItemGetter(t,n){var a=rawSourceItemGetterMap[getMethodMapKey(t,n)];return a}var countSimply=function(t,n,a){return t.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(t,n,a){return Math.max(0,t.length-n)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(t,n,a){var s=t[0];return s?Math.max(0,s.length-n):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(t,n,a){var s=a[0].name,l=t[s];return l?l.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(t,n){var a=rawSourceDataCounterMap[getMethodMapKey(t,n)];return a}var getRawValueSimply=function(t,n,a){return t[n]},rawSourceValueGetterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c[SOURCE_FORMAT_OBJECT_ROWS]=function(t,n,a){return t[a]},_c[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c[SOURCE_FORMAT_ORIGINAL]=function(t,n,a){var s=getDataItemValue(t);return s instanceof Array?s[n]:s},_c[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c);function getRawSourceValueGetter(t){var n=rawSourceValueGetterMap[t];return n}function getMethodMapKey(t,n){return t===SOURCE_FORMAT_ARRAY_ROWS?t+"_"+n:t}function retrieveRawValue(t,n,a){if(t){var s=t.getRawDataItem(n);if(s!=null){var l=t.getStore(),u=l.getSource().sourceFormat;if(a!=null){var c=t.getDimensionIndex(a),p=l.getDimensionProperty(c);return getRawSourceValueGetter(u)(s,c,p)}else{var d=s;return u===SOURCE_FORMAT_ORIGINAL&&(d=getDataItemValue(s)),d}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function t(){}return t.prototype.getDataParams=function(n,a){var s=this.getData(a),l=this.getRawValue(n,a),u=s.getRawIndex(n),c=s.getName(n),p=s.getRawDataItem(n),d=s.getItemVisual(n,"style"),x=d&&d[s.getItemVisual(n,"drawType")||"fill"],_=d&&d.stroke,S=this.mainType,T=S==="series",A=s.userOutput&&s.userOutput.get();return{componentType:S,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:T?this.subType:null,seriesIndex:this.seriesIndex,seriesId:T?this.id:null,seriesName:T?this.name:null,name:c,dataIndex:u,data:p,dataType:a,value:l,color:x,borderColor:_,dimensionNames:A?A.fullDimensions:null,encode:A?A.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(n,a,s,l,u,c){a=a||"normal";var p=this.getData(s),d=this.getDataParams(n,s);if(c&&(d.value=c.interpolatedValue),l!=null&&isArray$1(d.value)&&(d.value=d.value[l]),!u){var x=p.getItemModel(n);u=x.get(a==="normal"?["label","formatter"]:[a,"label","formatter"])}if(isFunction$1(u))return d.status=a,d.dimensionIndex=l,u(d);if(isString$1(u)){var _=formatTpl(u,d);return _.replace(DIMENSION_LABEL_REG,function(S,T){var A=T.length,R=T;R.charAt(0)==="["&&R.charAt(A-1)==="]"&&(R=+R.slice(1,A-1));var D=retrieveRawValue(p,n,R);if(c&&isArray$1(c.interpolatedValue)){var O=p.getDimensionIndex(R);O>=0&&(D=c.interpolatedValue[O])}return D!=null?D+"":""})}},t.prototype.getRawValue=function(n,a){return retrieveRawValue(this.getData(a),n)},t.prototype.formatTooltip=function(n,a,s){},t}();function normalizeTooltipFormatResult(t){var n,a;return isObject$3(t)?t.type&&(a=t):n=t,{text:n,frag:a}}function createTask(t){return new Task(t)}var Task=function(){function t(n){n=n||{},this._reset=n.reset,this._plan=n.plan,this._count=n.count,this._onDirty=n.onDirty,this._dirty=!0}return t.prototype.perform=function(n){var a=this._upstream,s=n&&n.skip;if(this._dirty&&a){var l=this.context;l.data=l.outputData=a.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var u;this._plan&&!s&&(u=this._plan(this.context));var c=_(this._modBy),p=this._modDataCount||0,d=_(n&&n.modBy),x=n&&n.modDataCount||0;(c!==d||p!==x)&&(u="reset");function _(z){return!(z>=1)&&(z=1),z}var S;(this._dirty||u==="reset")&&(this._dirty=!1,S=this._doReset(s)),this._modBy=d,this._modDataCount=x;var T=n&&n.step;if(a?this._dueEnd=a._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var A=this._dueIndex,R=Math.min(T!=null?this._dueIndex+T:1/0,this._dueEnd);if(!s&&(S||A<R)){var D=this._progress;if(isArray$1(D))for(var O=0;O<D.length;O++)this._doProgress(D[O],A,R,d,x);else this._doProgress(D,A,R,d,x)}this._dueIndex=R;var F=this._settedOutputEnd!=null?this._settedOutputEnd:R;this._outputDueEnd=F}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(n,a,s,l,u){iterator.reset(a,s,l,u),this._callingProgress=n,this._callingProgress({start:a,end:s,count:s-a,next:iterator.next},this.context)},t.prototype._doReset=function(n){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var a,s;!n&&this._reset&&(a=this._reset(this.context),a&&a.progress&&(s=a.forceFirstProgress,a=a.progress),isArray$1(a)&&!a.length&&(a=null)),this._progress=a,this._modBy=this._modDataCount=null;var l=this._downstream;return l&&l.dirty(),s},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(n){(this._downstream!==n||this._dirty)&&(this._downstream=n,n._upstream=this,n.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(n){this._outputDueEnd=this._settedOutputEnd=n},t}(),iterator=function(){var t,n,a,s,l,u={reset:function(d,x,_,S){n=d,t=x,a=_,s=S,l=Math.ceil(s/a),u.next=a>1&&s>0?p:c}};return u;function c(){return n<t?n++:null}function p(){var d=n%l*a+Math.ceil(n/l),x=n>=t?null:d<s?d:n;return n++,x}}();function parseDataValue(t,n){var a=n&&n.type;return a==="ordinal"?t:(a==="time"&&!isNumber(t)&&t!=null&&t!=="-"&&(t=+parseDate(t)),t==null||t===""?NaN:Number(t))}var valueParserMap=createHashMap({number:function(t){return parseFloat(t)},time:function(t){return+parseDate(t)},trim:function(t){return isString$1(t)?trim$1(t):t}});function getRawValueParser(t){return valueParserMap.get(t)}var ORDER_COMPARISON_OP_MAP={lt:function(t,n){return t<n},lte:function(t,n){return t<=n},gt:function(t,n){return t>n},gte:function(t,n){return t>=n}},FilterOrderComparator=function(){function t(n,a){if(!isNumber(a)){var s="";throwError(s)}this._opFn=ORDER_COMPARISON_OP_MAP[n],this._rvalFloat=numericToNumber(a)}return t.prototype.evaluate=function(n){return isNumber(n)?this._opFn(n,this._rvalFloat):this._opFn(numericToNumber(n),this._rvalFloat)},t}(),SortOrderComparator=function(){function t(n,a){var s=n==="desc";this._resultLT=s?1:-1,a==null&&(a=s?"min":"max"),this._incomparable=a==="min"?-1/0:1/0}return t.prototype.evaluate=function(n,a){var s=isNumber(n)?n:numericToNumber(n),l=isNumber(a)?a:numericToNumber(a),u=isNaN(s),c=isNaN(l);if(u&&(s=this._incomparable),c&&(l=this._incomparable),u&&c){var p=isString$1(n),d=isString$1(a);p&&(s=d?n:0),d&&(l=p?a:0)}return s<l?this._resultLT:s>l?-this._resultLT:0},t}(),FilterEqualityComparator=function(){function t(n,a){this._rval=a,this._isEQ=n,this._rvalTypeof=typeof a,this._rvalFloat=numericToNumber(a)}return t.prototype.evaluate=function(n){var a=n===this._rval;if(!a){var s=typeof n;s!==this._rvalTypeof&&(s==="number"||this._rvalTypeof==="number")&&(a=numericToNumber(n)===this._rvalFloat)}return this._isEQ?a:!a},t}();function createFilterComparator(t,n){return t==="eq"||t==="ne"?new FilterEqualityComparator(t==="eq",n):hasOwn(ORDER_COMPARISON_OP_MAP,t)?new FilterOrderComparator(t,n):null}var ExternalSource=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(n){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(n){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(n,a){},t.prototype.retrieveValueFromItem=function(n,a){},t.prototype.convertValue=function(n,a){return parseDataValue(n,a)},t}();function createExternalSource(t,n){var a=new ExternalSource,s=t.data,l=a.sourceFormat=t.sourceFormat,u=t.startIndex,c="";t.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&throwError(c);var p=[],d={},x=t.dimensionsDefine;if(x)each$f(x,function(D,O){var F=D.name,z={index:O,name:F,displayName:D.displayName};if(p.push(z),F!=null){var j="";hasOwn(d,F)&&throwError(j),d[F]=z}});else for(var _=0;_<t.dimensionsDetectedCount;_++)p.push({index:_});var S=getRawSourceItemGetter(l,SERIES_LAYOUT_BY_COLUMN);n.__isBuiltIn&&(a.getRawDataItem=function(D){return S(s,u,p,D)},a.getRawData=bind$1(getRawData,null,t)),a.cloneRawData=bind$1(cloneRawData,null,t);var T=getRawSourceDataCounter(l,SERIES_LAYOUT_BY_COLUMN);a.count=bind$1(T,null,s,u,p);var A=getRawSourceValueGetter(l);a.retrieveValue=function(D,O){var F=S(s,u,p,D);return R(F,O)};var R=a.retrieveValueFromItem=function(D,O){if(D!=null){var F=p[O];if(F)return A(D,O,F.name)}};return a.getDimensionInfo=bind$1(getDimensionInfo,null,p,d),a.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,p),a}function getRawData(t){var n=t.sourceFormat;if(!isSupportedSourceFormat(n)){var a="";throwError(a)}return t.data}function cloneRawData(t){var n=t.sourceFormat,a=t.data;if(!isSupportedSourceFormat(n)){var s="";throwError(s)}if(n===SOURCE_FORMAT_ARRAY_ROWS){for(var l=[],u=0,c=a.length;u<c;u++)l.push(a[u].slice());return l}else if(n===SOURCE_FORMAT_OBJECT_ROWS){for(var l=[],u=0,c=a.length;u<c;u++)l.push(extend({},a[u]));return l}}function getDimensionInfo(t,n,a){if(a!=null){if(isNumber(a)||!isNaN(a)&&!hasOwn(n,a))return t[a];if(hasOwn(n,a))return n[a]}}function cloneAllDimensionInfo(t){return clone$4(t)}var externalTransformMap=createHashMap();function registerExternalTransform(t){t=clone$4(t);var n=t.type,a="";n||throwError(a);var s=n.split(":");s.length!==2&&throwError(a);var l=!1;s[0]==="echarts"&&(n=s[1],l=!0),t.__isBuiltIn=l,externalTransformMap.set(n,t)}function applyDataTransform(t,n,a){var s=normalizeToArray(t),l=s.length,u="";l||throwError(u);for(var c=0,p=l;c<p;c++){var d=s[c];n=applySingleDataTransform(d,n),c!==p-1&&(n.length=Math.max(n.length,1))}return n}function applySingleDataTransform(t,n,a,s){var l="";n.length||throwError(l),isObject$3(t)||throwError(l);var u=t.type,c=externalTransformMap.get(u);c||throwError(l);var p=map$1(n,function(x){return createExternalSource(x,c)}),d=normalizeToArray(c.transform({upstream:p[0],upstreamList:p,config:clone$4(t.config)}));return map$1(d,function(x,_){var S="";isObject$3(x)||throwError(S),x.data||throwError(S);var T=detectSourceFormat(x.data);isSupportedSourceFormat(T)||throwError(S);var A,R=n[0];if(R&&_===0&&!x.dimensions){var D=R.startIndex;D&&(x.data=R.data.slice(0,D).concat(x.data)),A={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:D,dimensions:R.metaRawOption.dimensions}}else A={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:x.dimensions};return createSource(x.data,A,null)})}function isSupportedSourceFormat(t){return t===SOURCE_FORMAT_ARRAY_ROWS||t===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(t){return t>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(t){var n=t.constructor;return n===Array?t.slice():new n(t)}function prepareStore(t,n,a,s,l){var u=dataCtors[a||"float"];if(l){var c=t[n],p=c&&c.length;if(p!==s){for(var d=new u(s),x=0;x<p;x++)d[x]=c[x];t[n]=d}}else t[n]=new u(s)}var DataStore=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return t.prototype.initData=function(n,a,s){this._provider=n,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var l=n.getSource(),u=this.defaultDimValueGetter=defaultDimValueGetters[l.sourceFormat];this._dimValueGetter=s||u,this._rawExtent=[],shouldRetrieveDataByName(l),this._dimensions=map$1(a,function(c){return{type:c.type,property:c.property}}),this._initDataFromProvider(0,n.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(n,a){var s=this._calcDimNameToIdx,l=this._dimensions,u=s.get(n);if(u!=null){if(l[u].type===a)return u}else u=l.length;return l[u]={type:a},s.set(n,u),this._chunks[u]=new dataCtors[a||"float"](this._rawCount),this._rawExtent[u]=getInitialExtent(),u},t.prototype.collectOrdinalMeta=function(n,a){var s=this._chunks[n],l=this._dimensions[n],u=this._rawExtent,c=l.ordinalOffset||0,p=s.length;c===0&&(u[n]=getInitialExtent());for(var d=u[n],x=c;x<p;x++){var _=s[x]=a.parseAndCollect(s[x]);isNaN(_)||(d[0]=Math.min(_,d[0]),d[1]=Math.max(_,d[1]))}l.ordinalMeta=a,l.ordinalOffset=p,l.type="ordinal"},t.prototype.getOrdinalMeta=function(n){var a=this._dimensions[n],s=a.ordinalMeta;return s},t.prototype.getDimensionProperty=function(n){var a=this._dimensions[n];return a&&a.property},t.prototype.appendData=function(n){var a=this._provider,s=this.count();a.appendData(n);var l=a.count();return a.persistent||(l+=s),s<l&&this._initDataFromProvider(s,l,!0),[s,l]},t.prototype.appendValues=function(n,a){for(var s=this._chunks,l=this._dimensions,u=l.length,c=this._rawExtent,p=this.count(),d=p+Math.max(n.length,a||0),x=0;x<u;x++){var _=l[x];prepareStore(s,x,_.type,d,!0)}for(var S=[],T=p;T<d;T++)for(var A=T-p,R=0;R<u;R++){var _=l[R],D=defaultDimValueGetters.arrayRows.call(this,n[A]||S,_.property,A,R);s[R][T]=D;var O=c[R];D<O[0]&&(O[0]=D),D>O[1]&&(O[1]=D)}return this._rawCount=this._count=d,{start:p,end:d}},t.prototype._initDataFromProvider=function(n,a,s){for(var l=this._provider,u=this._chunks,c=this._dimensions,p=c.length,d=this._rawExtent,x=map$1(c,function(z){return z.property}),_=0;_<p;_++){var S=c[_];d[_]||(d[_]=getInitialExtent()),prepareStore(u,_,S.type,a,s)}if(l.fillStorage)l.fillStorage(n,a,u,d);else for(var T=[],A=n;A<a;A++){T=l.getItem(A,T);for(var R=0;R<p;R++){var D=u[R],O=this._dimValueGetter(T,x[R],A,R);D[A]=O;var F=d[R];O<F[0]&&(F[0]=O),O>F[1]&&(F[1]=O)}}!l.persistent&&l.clean&&l.clean(),this._rawCount=this._count=a,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(n,a){if(!(a>=0&&a<this._count))return NaN;var s=this._chunks[n];return s?s[this.getRawIndex(a)]:NaN},t.prototype.getValues=function(n,a){var s=[],l=[];if(a==null){a=n,n=[];for(var u=0;u<this._dimensions.length;u++)l.push(u)}else l=n;for(var u=0,c=l.length;u<c;u++)s.push(this.get(l[u],a));return s},t.prototype.getByRawIndex=function(n,a){if(!(a>=0&&a<this._rawCount))return NaN;var s=this._chunks[n];return s?s[a]:NaN},t.prototype.getSum=function(n){var a=this._chunks[n],s=0;if(a)for(var l=0,u=this.count();l<u;l++){var c=this.get(n,l);isNaN(c)||(s+=c)}return s},t.prototype.getMedian=function(n){var a=[];this.each([n],function(u){isNaN(u)||a.push(u)});var s=a.sort(function(u,c){return u-c}),l=this.count();return l===0?0:l%2===1?s[(l-1)/2]:(s[l/2]+s[l/2-1])/2},t.prototype.indexOfRawIndex=function(n){if(n>=this._rawCount||n<0)return-1;if(!this._indices)return n;var a=this._indices,s=a[n];if(s!=null&&s<this._count&&s===n)return n;for(var l=0,u=this._count-1;l<=u;){var c=(l+u)/2|0;if(a[c]<n)l=c+1;else if(a[c]>n)u=c-1;else return c}return-1},t.prototype.indicesOfNearest=function(n,a,s){var l=this._chunks,u=l[n],c=[];if(!u)return c;s==null&&(s=1/0);for(var p=1/0,d=-1,x=0,_=0,S=this.count();_<S;_++){var T=this.getRawIndex(_),A=a-u[T],R=Math.abs(A);R<=s&&((R<p||R===p&&A>=0&&d<0)&&(p=R,d=A,x=0),A===d&&(c[x++]=_))}return c.length=x,c},t.prototype.getIndices=function(){var n,a=this._indices;if(a){var s=a.constructor,l=this._count;if(s===Array){n=new s(l);for(var u=0;u<l;u++)n[u]=a[u]}else n=new s(a.buffer,0,l)}else{var s=getIndicesCtor(this._rawCount);n=new s(this.count());for(var u=0;u<n.length;u++)n[u]=u}return n},t.prototype.filter=function(n,a){if(!this._count)return this;for(var s=this.clone(),l=s.count(),u=getIndicesCtor(s._rawCount),c=new u(l),p=[],d=n.length,x=0,_=n[0],S=s._chunks,T=0;T<l;T++){var A=void 0,R=s.getRawIndex(T);if(d===0)A=a(T);else if(d===1){var D=S[_][R];A=a(D,T)}else{for(var O=0;O<d;O++)p[O]=S[n[O]][R];p[O]=T,A=a.apply(null,p)}A&&(c[x++]=R)}return x<l&&(s._indices=c),s._count=x,s._extent=[],s._updateGetRawIdx(),s},t.prototype.selectRange=function(n){var a=this.clone(),s=a._count;if(!s)return this;var l=keys(n),u=l.length;if(!u)return this;var c=a.count(),p=getIndicesCtor(a._rawCount),d=new p(c),x=0,_=l[0],S=n[_][0],T=n[_][1],A=a._chunks,R=!1;if(!a._indices){var D=0;if(u===1){for(var O=A[l[0]],F=0;F<s;F++){var z=O[F];(z>=S&&z<=T||isNaN(z))&&(d[x++]=D),D++}R=!0}else if(u===2){for(var O=A[l[0]],j=A[l[1]],Z=n[l[1]][0],W=n[l[1]][1],F=0;F<s;F++){var z=O[F],J=j[F];(z>=S&&z<=T||isNaN(z))&&(J>=Z&&J<=W||isNaN(J))&&(d[x++]=D),D++}R=!0}}if(!R)if(u===1)for(var F=0;F<c;F++){var en=a.getRawIndex(F),z=A[l[0]][en];(z>=S&&z<=T||isNaN(z))&&(d[x++]=en)}else for(var F=0;F<c;F++){for(var tn=!0,en=a.getRawIndex(F),Ct=0;Ct<u;Ct++){var Q=l[Ct],z=A[Q][en];(z<n[Q][0]||z>n[Q][1])&&(tn=!1)}tn&&(d[x++]=a.getRawIndex(F))}return x<c&&(a._indices=d),a._count=x,a._extent=[],a._updateGetRawIdx(),a},t.prototype.map=function(n,a){var s=this.clone(n);return this._updateDims(s,n,a),s},t.prototype.modify=function(n,a){this._updateDims(this,n,a)},t.prototype._updateDims=function(n,a,s){for(var l=n._chunks,u=[],c=a.length,p=n.count(),d=[],x=n._rawExtent,_=0;_<a.length;_++)x[a[_]]=getInitialExtent();for(var S=0;S<p;S++){for(var T=n.getRawIndex(S),A=0;A<c;A++)d[A]=l[a[A]][T];d[c]=S;var R=s&&s.apply(null,d);if(R!=null){typeof R!="object"&&(u[0]=R,R=u);for(var _=0;_<R.length;_++){var D=a[_],O=R[_],F=x[D],z=l[D];z&&(z[T]=O),O<F[0]&&(F[0]=O),O>F[1]&&(F[1]=O)}}}},t.prototype.lttbDownSample=function(n,a){var s=this.clone([n],!0),l=s._chunks,u=l[n],c=this.count(),p=0,d=Math.floor(1/a),x=this.getRawIndex(0),_,S,T,A=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(c/d)+2)*2,c));A[p++]=x;for(var R=1;R<c-1;R+=d){for(var D=Math.min(R+d,c-1),O=Math.min(R+d*2,c),F=(O+D)/2,z=0,j=D;j<O;j++){var Z=this.getRawIndex(j),W=u[Z];isNaN(W)||(z+=W)}z/=O-D;var J=R,en=Math.min(R+d,c),tn=R-1,Ct=u[x];_=-1,T=J;for(var Q=-1,on=0,j=J;j<en;j++){var Z=this.getRawIndex(j),W=u[Z];if(isNaN(W)){on++,Q<0&&(Q=Z);continue}S=Math.abs((tn-F)*(W-Ct)-(tn-j)*(z-Ct)),S>_&&(_=S,T=Z)}on>0&&on<en-J&&(A[p++]=Math.min(Q,T),T=Math.max(Q,T)),A[p++]=T,x=T}return A[p++]=this.getRawIndex(c-1),s._count=p,s._indices=A,s.getRawIndex=this._getRawIdx,s},t.prototype.minmaxDownSample=function(n,a){for(var s=this.clone([n],!0),l=s._chunks,u=Math.floor(1/a),c=l[n],p=this.count(),d=new(getIndicesCtor(this._rawCount))(Math.ceil(p/u)*2),x=0,_=0;_<p;_+=u){var S=_,T=c[this.getRawIndex(S)],A=_,R=c[this.getRawIndex(A)],D=u;_+u>p&&(D=p-_);for(var O=0;O<D;O++){var F=this.getRawIndex(_+O),z=c[F];z<T&&(T=z,S=_+O),z>R&&(R=z,A=_+O)}var j=this.getRawIndex(S),Z=this.getRawIndex(A);S<A?(d[x++]=j,d[x++]=Z):(d[x++]=Z,d[x++]=j)}return s._count=x,s._indices=d,s._updateGetRawIdx(),s},t.prototype.downSample=function(n,a,s,l){for(var u=this.clone([n],!0),c=u._chunks,p=[],d=Math.floor(1/a),x=c[n],_=this.count(),S=u._rawExtent[n]=getInitialExtent(),T=new(getIndicesCtor(this._rawCount))(Math.ceil(_/d)),A=0,R=0;R<_;R+=d){d>_-R&&(d=_-R,p.length=d);for(var D=0;D<d;D++){var O=this.getRawIndex(R+D);p[D]=x[O]}var F=s(p),z=this.getRawIndex(Math.min(R+l(p,F)||0,_-1));x[z]=F,F<S[0]&&(S[0]=F),F>S[1]&&(S[1]=F),T[A++]=z}return u._count=A,u._indices=T,u._updateGetRawIdx(),u},t.prototype.each=function(n,a){if(this._count)for(var s=n.length,l=this._chunks,u=0,c=this.count();u<c;u++){var p=this.getRawIndex(u);switch(s){case 0:a(u);break;case 1:a(l[n[0]][p],u);break;case 2:a(l[n[0]][p],l[n[1]][p],u);break;default:for(var d=0,x=[];d<s;d++)x[d]=l[n[d]][p];x[d]=u,a.apply(null,x)}}},t.prototype.getDataExtent=function(n){var a=this._chunks[n],s=getInitialExtent();if(!a)return s;var l=this.count(),u=!this._indices,c;if(u)return this._rawExtent[n].slice();if(c=this._extent[n],c)return c.slice();c=s;for(var p=c[0],d=c[1],x=0;x<l;x++){var _=this.getRawIndex(x),S=a[_];S<p&&(p=S),S>d&&(d=S)}return c=[p,d],this._extent[n]=c,c},t.prototype.getRawDataItem=function(n){var a=this.getRawIndex(n);if(this._provider.persistent)return this._provider.getItem(a);for(var s=[],l=this._chunks,u=0;u<l.length;u++)s.push(l[u][a]);return s},t.prototype.clone=function(n,a){var s=new t,l=this._chunks,u=n&&reduce(n,function(p,d){return p[d]=!0,p},{});if(u)for(var c=0;c<l.length;c++)s._chunks[c]=u[c]?cloneChunk(l[c]):l[c];else s._chunks=l;return this._copyCommonProps(s),a||(s._indices=this._cloneIndices()),s._updateGetRawIdx(),s},t.prototype._copyCommonProps=function(n){n._count=this._count,n._rawCount=this._rawCount,n._provider=this._provider,n._dimensions=this._dimensions,n._extent=clone$4(this._extent),n._rawExtent=clone$4(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var n=this._indices.constructor,a=void 0;if(n===Array){var s=this._indices.length;a=new n(s);for(var l=0;l<s;l++)a[l]=this._indices[l]}else a=new n(this._indices);return a}return null},t.prototype._getRawIdxIdentity=function(n){return n},t.prototype._getRawIdx=function(n){return n<this._count&&n>=0?this._indices[n]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function n(a,s,l,u){return parseDataValue(a[u],this._dimensions[u])}defaultDimValueGetters={arrayRows:n,objectRows:function(a,s,l,u){return parseDataValue(a[s],this._dimensions[u])},keyedColumns:n,original:function(a,s,l,u){var c=a&&(a.value==null?a:a.value);return parseDataValue(c instanceof Array?c[u]:c,this._dimensions[u])},typedArray:function(a,s,l,u){return a[u]}}}(),t}(),SourceManager=function(){function t(n){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=n}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(n,a){this._sourceList=n,this._upstreamSignList=a,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var n=this._sourceHost,a=this._getUpstreamSourceManagers(),s=!!a.length,l,u;if(isSeries(n)){var c=n,p=void 0,d=void 0,x=void 0;if(s){var _=a[0];_.prepareSource(),x=_.getSource(),p=x.data,d=x.sourceFormat,u=[_._getVersionSign()]}else p=c.get("data",!0),d=isTypedArray(p)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,u=[];var S=this._getSourceMetaRawOption()||{},T=x&&x.metaRawOption||{},A=retrieve2(S.seriesLayoutBy,T.seriesLayoutBy)||null,R=retrieve2(S.sourceHeader,T.sourceHeader),D=retrieve2(S.dimensions,T.dimensions),O=A!==T.seriesLayoutBy||!!R!=!!T.sourceHeader||D;l=O?[createSource(p,{seriesLayoutBy:A,sourceHeader:R,dimensions:D},d)]:[]}else{var F=n;if(s){var z=this._applyTransform(a);l=z.sourceList,u=z.upstreamSignList}else{var j=F.get("source",!0);l=[createSource(j,this._getSourceMetaRawOption(),null)],u=[]}}this._setLocalSource(l,u)},t.prototype._applyTransform=function(n){var a=this._sourceHost,s=a.get("transform",!0),l=a.get("fromTransformResult",!0);if(l!=null){var u="";n.length!==1&&doThrow(u)}var c,p=[],d=[];return each$f(n,function(x){x.prepareSource();var _=x.getSource(l||0),S="";l!=null&&!_&&doThrow(S),p.push(_),d.push(x._getVersionSign())}),s?c=applyDataTransform(s,p,{datasetIndex:a.componentIndex}):l!=null&&(c=[cloneSourceShallow(p[0])]),{sourceList:c,upstreamSignList:d}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var n=this._getUpstreamSourceManagers(),a=0;a<n.length;a++){var s=n[a];if(s._isDirty()||this._upstreamSignList[a]!==s._getVersionSign())return!0}},t.prototype.getSource=function(n){n=n||0;var a=this._sourceList[n];if(!a){var s=this._getUpstreamSourceManagers();return s[0]&&s[0].getSource(n)}return a},t.prototype.getSharedDataStore=function(n){var a=n.makeStoreSchema();return this._innerGetDataStore(a.dimensions,n.source,a.hash)},t.prototype._innerGetDataStore=function(n,a,s){var l=0,u=this._storeList,c=u[l];c||(c=u[l]={});var p=c[s];if(!p){var d=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&d?p=d._innerGetDataStore(n,a,s):(p=new DataStore,p.initData(new DefaultDataProvider(a,n.length),n)),c[s]=p}return p},t.prototype._getUpstreamSourceManagers=function(){var n=this._sourceHost;if(isSeries(n)){var a=querySeriesUpstreamDatasetModel(n);return a?[a.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(n),function(s){return s.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var n=this._sourceHost,a,s,l;if(isSeries(n))a=n.get("seriesLayoutBy",!0),s=n.get("sourceHeader",!0),l=n.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var u=n;a=u.get("seriesLayoutBy",!0),s=u.get("sourceHeader",!0),l=u.get("dimensions",!0)}return{seriesLayoutBy:a,sourceHeader:s,dimensions:l}},t}();function disableTransformOptionMerge(t){var n=t.option.transform;n&&setAsPrimitive(t.option.transform)}function isSeries(t){return t.mainType==="series"}function doThrow(t){throw new Error(t)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipLineHeight(t){var n=t.lineHeight;return n==null?TOOLTIP_LINE_HEIGHT_CSS:"line-height:"+encodeHTML(n+"")+"px"}function getTooltipTextStyle(t,n){var a=t.color||"#6e7079",s=t.fontSize||12,l=t.fontWeight||"400",u=t.color||"#464646",c=t.fontSize||14,p=t.fontWeight||"900";return n==="html"?{nameStyle:"font-size:"+encodeHTML(s+"")+"px;color:"+encodeHTML(a)+";font-weight:"+encodeHTML(l+""),valueStyle:"font-size:"+encodeHTML(c+"")+"px;color:"+encodeHTML(u)+";font-weight:"+encodeHTML(p+"")}:{nameStyle:{fontSize:s,fill:a,fontWeight:l},valueStyle:{fontSize:c,fill:u,fontWeight:p}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(t,n){return n.type=t,n}function isSectionFragment(t){return t.type==="section"}function getBuilder(t){return isSectionFragment(t)?buildSection:buildNameValue}function getBlockGapLevel(t){if(isSectionFragment(t)){var n=0,a=t.blocks.length,s=a>1||a>0&&!t.noHeader;return each$f(t.blocks,function(l){var u=getBlockGapLevel(l);u>=n&&(n=u+ +(s&&(!u||isSectionFragment(l)&&!l.noHeader)))}),n}return 0}function buildSection(t,n,a,s){var l=n.noHeader,u=getGap(getBlockGapLevel(n)),c=[],p=n.blocks||[];assert(!p||isArray$1(p)),p=p||[];var d=t.orderMode;if(n.sortBlocks&&d){p=p.slice();var x={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(x,d)){var _=new SortOrderComparator(x[d],null);p.sort(function(D,O){return _.evaluate(D.sortParam,O.sortParam)})}else d==="seriesDesc"&&p.reverse()}each$f(p,function(D,O){var F=n.valueFormatter,z=getBuilder(D)(F?extend(extend({},t),{valueFormatter:F}):t,D,O>0?u.html:0,s);z!=null&&c.push(z)});var S=t.renderMode==="richText"?c.join(u.richText):wrapBlockHTML(s,c.join(""),l?a:u.html);if(l)return S;var T=makeValueReadable(n.header,"ordinal",t.useUTC),A=getTooltipTextStyle(s,t.renderMode).nameStyle,R=getTooltipLineHeight(s);return t.renderMode==="richText"?wrapInlineNameRichText(t,T,A)+u.richText+S:wrapBlockHTML(s,'<div style="'+A+";"+R+';">'+encodeHTML(T)+"</div>"+S,a)}function buildNameValue(t,n,a,s){var l=t.renderMode,u=n.noName,c=n.noValue,p=!n.markerType,d=n.name,x=t.useUTC,_=n.valueFormatter||t.valueFormatter||function(Z){return Z=isArray$1(Z)?Z:[Z],map$1(Z,function(W,J){return makeValueReadable(W,isArray$1(A)?A[J]:A,x)})};if(!(u&&c)){var S=p?"":t.markupStyleCreator.makeTooltipMarker(n.markerType,n.markerColor||"#333",l),T=u?"":makeValueReadable(d,"ordinal",x),A=n.valueType,R=c?[]:_(n.value,n.dataIndex),D=!p||!u,O=!p&&u,F=getTooltipTextStyle(s,l),z=F.nameStyle,j=F.valueStyle;return l==="richText"?(p?"":S)+(u?"":wrapInlineNameRichText(t,T,z))+(c?"":wrapInlineValueRichText(t,R,D,O,j)):wrapBlockHTML(s,(p?"":S)+(u?"":wrapInlineNameHTML(T,!p,z))+(c?"":wrapInlineValueHTML(R,D,O,j)),a)}}function buildTooltipMarkup(t,n,a,s,l,u){if(t){var c=getBuilder(t),p={useUTC:l,renderMode:a,orderMode:s,markupStyleCreator:n,valueFormatter:t.valueFormatter};return c(p,t,0,u)}}function getGap(t){return{html:HTML_GAPS[t],richText:RICH_TEXT_GAPS[t]}}function wrapBlockHTML(t,n,a){var s='<div style="clear:both"></div>',l="margin: "+a+"px 0 0",u=getTooltipLineHeight(t);return'<div style="'+l+";"+u+';">'+n+s+"</div>"}function wrapInlineNameHTML(t,n,a){var s=n?"margin-left:2px":"";return'<span style="'+a+";"+s+'">'+encodeHTML(t)+"</span>"}function wrapInlineValueHTML(t,n,a,s){var l=a?"10px":"20px",u=n?"float:right;margin-left:"+l:"";return t=isArray$1(t)?t:[t],'<span style="'+u+";"+s+'">'+map$1(t,function(c){return encodeHTML(c)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(t,n,a){return t.markupStyleCreator.wrapRichTextStyle(n,a)}function wrapInlineValueRichText(t,n,a,s,l){var u=[l],c=s?10:20;return a&&u.push({padding:[0,0,0,c],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(isArray$1(n)?n.join("  "):n,u)}function retrieveVisualColorForTooltipMarker(t,n){var a=t.getData().getItemVisual(n,"style"),s=a[t.visualDrawType];return convertToColorString(s)}function getPaddingFromTooltipModel(t,n){var a=t.get("padding");return a??(n==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=function(){function t(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(n,a,s){var l=s==="richText"?this._generateStyleName():null,u=getTooltipMarker({color:a,type:n,renderMode:s,markerId:l});return isString$1(u)?u:(this.richTextStyles[l]=u.style,u.content)},t.prototype.wrapRichTextStyle=function(n,a){var s={};isArray$1(a)?each$f(a,function(u){return extend(s,u)}):extend(s,a);var l=this._generateStyleName();return this.richTextStyles[l]=s,"{"+l+"|"+n+"}"},t}();function defaultSeriesFormatTooltip(t){var n=t.series,a=t.dataIndex,s=t.multipleSeries,l=n.getData(),u=l.mapDimensionsAll("defaultedTooltip"),c=u.length,p=n.getRawValue(a),d=isArray$1(p),x=retrieveVisualColorForTooltipMarker(n,a),_,S,T,A;if(c>1||d&&!c){var R=formatTooltipArrayValue(p,n,a,u,x);_=R.inlineValues,S=R.inlineValueTypes,T=R.blocks,A=R.inlineValues[0]}else if(c){var D=l.getDimensionInfo(u[0]);A=_=retrieveRawValue(l,a,u[0]),S=D.type}else A=_=d?p[0]:p;var O=isNameSpecified(n),F=O&&n.name||"",z=l.getName(a),j=s?F:z;return createTooltipMarkup("section",{header:F,noHeader:s||!O,sortParam:A,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:x,name:j,noName:!trim$1(j),value:_,valueType:S,dataIndex:a})].concat(T||[])})}function formatTooltipArrayValue(t,n,a,s,l){var u=n.getData(),c=reduce(t,function(S,T,A){var R=u.getDimensionInfo(A);return S=S||R&&R.tooltip!==!1&&R.displayName!=null},!1),p=[],d=[],x=[];s.length?each$f(s,function(S){_(retrieveRawValue(u,a,S),S)}):each$f(t,_);function _(S,T){var A=u.getDimensionInfo(T);!A||A.otherDims.tooltip===!1||(c?x.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:l,name:A.displayName,value:S,valueType:A.type})):(p.push(S),d.push(A.type)))}return{inlineValues:p,inlineValueTypes:d,blocks:x}}var inner$k=makeInner();function getSelectionKey(t,n){return t.getName(n)||t.getId(n)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a._selectedDataIndicesMap={},a}return n.prototype.init=function(a,s,l){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(a,l);var u=inner$k(this).sourceManager=new SourceManager(this);u.prepareSource();var c=this.getInitialData(a,l);wrapData(c,this),this.dataTask.context.data=c,inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},n.prototype.mergeDefaultAndTheme=function(a,s){var l=fetchLayoutMode(this),u=l?getLayoutParams(a):{},c=this.subType;ComponentModel.hasClass(c)&&(c+="Series"),merge(a,s.getTheme().get(this.subType)),merge(a,this.getDefaultOption()),defaultEmphasis(a,"label",["show"]),this.fillDataTextStyle(a.data),l&&mergeLayoutParam(a,u,l)},n.prototype.mergeOption=function(a,s){a=merge(this.option,a,!0),this.fillDataTextStyle(a.data);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,a,l);var u=inner$k(this).sourceManager;u.dirty(),u.prepareSource();var c=this.getInitialData(a,s);wrapData(c,this),this.dataTask.dirty(),this.dataTask.context.data=c,inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},n.prototype.fillDataTextStyle=function(a){if(a&&!isTypedArray(a))for(var s=["show"],l=0;l<a.length;l++)a[l]&&a[l].label&&defaultEmphasis(a[l],"label",s)},n.prototype.getInitialData=function(a,s){},n.prototype.appendData=function(a){var s=this.getRawData();s.appendData(a.data)},n.prototype.getData=function(a){var s=getCurrentTask(this);if(s){var l=s.context.data;return a==null||!l.getLinkedData?l:l.getLinkedData(a)}else return inner$k(this).data},n.prototype.getAllData=function(){var a=this.getData();return a&&a.getLinkedDataAll?a.getLinkedDataAll():[{data:a}]},n.prototype.setData=function(a){var s=getCurrentTask(this);if(s){var l=s.context;l.outputData=a,s!==this.dataTask&&(l.data=a)}inner$k(this).data=a},n.prototype.getEncode=function(){var a=this.get("encode",!0);if(a)return createHashMap(a)},n.prototype.getSourceManager=function(){return inner$k(this).sourceManager},n.prototype.getSource=function(){return this.getSourceManager().getSource()},n.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},n.prototype.getColorBy=function(){var a=this.get("colorBy");return a||"series"},n.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},n.prototype.getBaseAxis=function(){var a=this.coordinateSystem;return a&&a.getBaseAxis&&a.getBaseAxis()},n.prototype.formatTooltip=function(a,s,l){return defaultSeriesFormatTooltip({series:this,dataIndex:a,multipleSeries:s})},n.prototype.isAnimationEnabled=function(){var a=this.ecModel;if(env.node&&!(a&&a.ssr))return!1;var s=this.getShallow("animation");return s&&this.getData().count()>this.getShallow("animationThreshold")&&(s=!1),!!s},n.prototype.restoreData=function(){this.dataTask.dirty()},n.prototype.getColorFromPalette=function(a,s,l){var u=this.ecModel,c=PaletteMixin.prototype.getColorFromPalette.call(this,a,s,l);return c||(c=u.getColorFromPalette(a,s,l)),c},n.prototype.coordDimToDataDim=function(a){return this.getRawData().mapDimensionsAll(a)},n.prototype.getProgressive=function(){return this.get("progressive")},n.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},n.prototype.select=function(a,s){this._innerSelect(this.getData(s),a)},n.prototype.unselect=function(a,s){var l=this.option.selectedMap;if(l){var u=this.option.selectedMode,c=this.getData(s);if(u==="series"||l==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var p=0;p<a.length;p++){var d=a[p],x=getSelectionKey(c,d);l[x]=!1,this._selectedDataIndicesMap[x]=-1}}},n.prototype.toggleSelect=function(a,s){for(var l=[],u=0;u<a.length;u++)l[0]=a[u],this.isSelected(a[u],s)?this.unselect(l,s):this.select(l,s)},n.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var a=this._selectedDataIndicesMap,s=keys(a),l=[],u=0;u<s.length;u++){var c=a[s[u]];c>=0&&l.push(c)}return l},n.prototype.isSelected=function(a,s){var l=this.option.selectedMap;if(!l)return!1;var u=this.getData(s);return(l==="all"||l[getSelectionKey(u,a)])&&!u.getItemModel(a).get(["select","disabled"])},n.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var a=this.option.universalTransition;return a?a===!0?!0:a&&a.enabled:!1},n.prototype._innerSelect=function(a,s){var l,u,c=this.option,p=c.selectedMode,d=s.length;if(!(!p||!d)){if(p==="series")c.selectedMap="all";else if(p==="multiple"){isObject$3(c.selectedMap)||(c.selectedMap={});for(var x=c.selectedMap,_=0;_<d;_++){var S=s[_],T=getSelectionKey(a,S);x[T]=!0,this._selectedDataIndicesMap[T]=a.getRawIndex(S)}}else if(p==="single"||p===!0){var A=s[d-1],T=getSelectionKey(a,A);c.selectedMap=(l={},l[T]=!0,l),this._selectedDataIndicesMap=(u={},u[T]=a.getRawIndex(A),u)}}},n.prototype._initSelectedMapFromData=function(a){if(!this.option.selectedMap){var s=[];a.hasItemOption&&a.each(function(l){var u=a.getRawDataItem(l);u&&u.selected&&s.push(l)}),s.length>0&&this._innerSelect(a,s)}},n.registerClass=function(a){return ComponentModel.registerClass(a)},n.protoInitialize=function(){var a=n.prototype;a.type="series.__base__",a.seriesIndex=0,a.ignoreStyleOnData=!1,a.hasSymbolVisual=!1,a.defaultSymbol="circle",a.visualStyleAccessPath="itemStyle",a.visualDrawType="fill"}(),n}(ComponentModel);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel);function autoSeriesName(t){var n=t.name;isNameSpecified(t)||(t.name=getSeriesAutoName(t)||n)}function getSeriesAutoName(t){var n=t.getRawData(),a=n.mapDimensionsAll("seriesName"),s=[];return each$f(a,function(l){var u=n.getDimensionInfo(l);u.displayName&&s.push(u.displayName)}),s.join(" ")}function dataTaskCount(t){return t.model.getRawData().count()}function dataTaskReset(t){var n=t.model;return n.setData(n.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(t,n){n.outputData&&t.end>n.outputData.count()&&n.model.getRawData().cloneShallow(n.outputData)}function wrapData(t,n){each$f(concatArray(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(a){t.wrapMethod(a,curry$1(onDataChange,n))})}function onDataChange(t,n){var a=getCurrentTask(t);return a&&a.setOutputEnd((n||this).count()),n}function getCurrentTask(t){var n=(t.ecModel||{}).scheduler,a=n&&n.getPipeline(t.uid);if(a){var s=a.currentTask;if(s){var l=s.agentStubMap;l&&(s=l.get(t.uid))}return s}}var ComponentView=function(){function t(){this.group=new Group$3,this.uid=getUID("viewComponent")}return t.prototype.init=function(n,a){},t.prototype.render=function(n,a,s,l){},t.prototype.dispose=function(n,a){},t.prototype.updateView=function(n,a,s,l){},t.prototype.updateLayout=function(n,a,s,l){},t.prototype.updateVisual=function(n,a,s,l){},t.prototype.toggleBlurSeries=function(n,a,s){},t.prototype.eachRendered=function(n){var a=this.group;a&&a.traverse(n)},t}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);function createRenderPlanner(){var t=makeInner();return function(n){var a=t(n),s=n.pipelineContext,l=!!a.large,u=!!a.progressiveRender,c=a.large=!!(s&&s.large),p=a.progressiveRender=!!(s&&s.progressiveRender);return(l!==c||u!==p)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function t(){this.group=new Group$3,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return t.prototype.init=function(n,a){},t.prototype.render=function(n,a,s,l){},t.prototype.highlight=function(n,a,s,l){var u=n.getData(l&&l.dataType);u&&toggleHighlight(u,l,"emphasis")},t.prototype.downplay=function(n,a,s,l){var u=n.getData(l&&l.dataType);u&&toggleHighlight(u,l,"normal")},t.prototype.remove=function(n,a){this.group.removeAll()},t.prototype.dispose=function(n,a){},t.prototype.updateView=function(n,a,s,l){this.render(n,a,s,l)},t.prototype.updateLayout=function(n,a,s,l){this.render(n,a,s,l)},t.prototype.updateVisual=function(n,a,s,l){this.render(n,a,s,l)},t.prototype.eachRendered=function(n){traverseElements(this.group,n)},t.markUpdateMethod=function(n,a){inner$j(n).updateMethod=a},t.protoInitialize=function(){var n=t.prototype;n.type="chart"}(),t}();function elSetState(t,n,a){t&&isHighDownDispatcher(t)&&(n==="emphasis"?enterEmphasis:leaveEmphasis)(t,a)}function toggleHighlight(t,n,a){var s=queryDataIndex(t,n),l=n&&n.highlightKey!=null?getHighlightDigit(n.highlightKey):null;s!=null?each$f(normalizeToArray(s),function(u){elSetState(t.getItemGraphicEl(u),a,l)}):t.eachItemGraphicEl(function(u){elSetState(u,a,l)})}enableClassExtend(ChartView);enableClassManagement(ChartView);function renderTaskPlan(t){return renderPlanner(t.model)}function renderTaskReset(t){var n=t.model,a=t.ecModel,s=t.api,l=t.payload,u=n.pipelineContext.progressiveRender,c=t.view,p=l&&inner$j(l).updateMethod,d=u?"incrementalPrepareRender":p&&c[p]?p:"render";return d!=="render"&&c[d](n,a,s,l),progressMethodMap[d]}var progressMethodMap={incrementalPrepareRender:{progress:function(t,n){n.view.incrementalRender(t,n.model,n.ecModel,n.api,n.payload)}},render:{forceFirstProgress:!0,progress:function(t,n){n.view.render(n.model,n.ecModel,n.api,n.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(t,n,a){var s,l=0,u=0,c=null,p,d,x,_;n=n||0;function S(){u=new Date().getTime(),c=null,t.apply(d,x||[])}var T=function(){for(var A=[],R=0;R<arguments.length;R++)A[R]=arguments[R];s=new Date().getTime(),d=this,x=A;var D=_||n,O=_||a;_=null,p=s-(O?l:u)-D,clearTimeout(c),O?c=setTimeout(S,D):p>=0?S():c=setTimeout(S,-p),l=s};return T.clear=function(){c&&(clearTimeout(c),c=null)},T.debounceNextCall=function(A){_=A},T}function createOrUpdate(t,n,a,s){var l=t[n];if(l){var u=l[ORIGIN_METHOD]||l,c=l[THROTTLE_TYPE],p=l[RATE];if(p!==a||c!==s){if(a==null||!s)return t[n]=u;l=t[n]=throttle(u,a,s==="debounce"),l[ORIGIN_METHOD]=u,l[THROTTLE_TYPE]=s,l[RATE]=a}return l}}function clear$1(t,n){var a=t[n];a&&a[ORIGIN_METHOD]&&(a.clear&&a.clear(),t[n]=a[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(t,n){var a=t.visualStyleMapper||defaultStyleMappers[n];return a||(console.warn("Unknown style type '"+n+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(t,n){var a=t.visualDrawType||defaultColorKey[n];return a||(console.warn("Unknown style type '"+n+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){var a=t.getData(),s=t.visualStyleAccessPath||"itemStyle",l=t.getModel(s),u=getStyleMapper(t,s),c=u(l),p=l.getShallow("decal");p&&(a.setVisual("decal",p),p.dirty=!0);var d=getDefaultColorKey(t,s),x=c[d],_=isFunction$1(x)?x:null,S=c.fill==="auto"||c.stroke==="auto";if(!c[d]||_||S){var T=t.getColorFromPalette(t.name,null,n.getSeriesCount());c[d]||(c[d]=T,a.setVisual("colorFromPalette",!0)),c.fill=c.fill==="auto"||isFunction$1(c.fill)?T:c.fill,c.stroke=c.stroke==="auto"||isFunction$1(c.stroke)?T:c.stroke}if(a.setVisual("style",c),a.setVisual("drawType",d),!n.isSeriesFiltered(t)&&_)return a.setVisual("colorFromPalette",!1),{dataEach:function(A,R){var D=t.getDataParams(R),O=extend({},c);O[d]=_(D),A.setItemVisual(R,"style",O)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){if(!(t.ignoreStyleOnData||n.isSeriesFiltered(t))){var a=t.getData(),s=t.visualStyleAccessPath||"itemStyle",l=getStyleMapper(t,s),u=a.getVisual("drawType");return{dataEach:a.hasItemOption?function(c,p){var d=c.getRawDataItem(p);if(d&&d[s]){sharedModel.option=d[s];var x=l(sharedModel),_=c.ensureUniqueItemVisual(p,"style");extend(_,x),sharedModel.option.decal&&(c.setItemVisual(p,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),u in x&&c.setItemVisual(p,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(t){var n=createHashMap();t.eachSeries(function(a){var s=a.getColorBy();if(!a.isColorBySeries()){var l=a.type+"-"+s,u=n.get(l);u||(u={},n.set(l,u)),inner$i(a).scope=u}}),t.eachSeries(function(a){if(!(a.isColorBySeries()||t.isSeriesFiltered(a))){var s=a.getRawData(),l={},u=a.getData(),c=inner$i(a).scope,p=a.visualStyleAccessPath||"itemStyle",d=getDefaultColorKey(a,p);u.each(function(x){var _=u.getRawIndex(x);l[_]=x}),s.each(function(x){var _=l[x],S=u.getItemVisual(_,"colorFromPalette");if(S){var T=u.ensureUniqueItemVisual(_,"style"),A=s.getName(x)||x+"",R=s.count();T[d]=a.getColorFromPalette(A,c,R)}})}})}},PI$5=Math.PI;function defaultLoading(t,n){n=n||{},defaults(n,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var a=new Group$3,s=new Rect$2({style:{fill:n.maskColor},zlevel:n.zlevel,z:1e4});a.add(s);var l=new ZRText({style:{text:n.text,fill:n.textColor,fontSize:n.fontSize,fontWeight:n.fontWeight,fontStyle:n.fontStyle,fontFamily:n.fontFamily},zlevel:n.zlevel,z:10001}),u=new Rect$2({style:{fill:"none"},textContent:l,textConfig:{position:"right",distance:10},zlevel:n.zlevel,z:10001});a.add(u);var c;return n.showSpinner&&(c=new Arc({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:n.spinnerRadius},style:{stroke:n.color,lineCap:"round",lineWidth:n.lineWidth},zlevel:n.zlevel,z:10001}),c.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),c.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),a.add(c)),a.resize=function(){var p=l.getBoundingRect().width,d=n.showSpinner?n.spinnerRadius:0,x=(t.getWidth()-d*2-(n.showSpinner&&p?10:0)-p)/2-(n.showSpinner&&p?0:5+p/2)+(n.showSpinner?0:p/2)+(p?0:d),_=t.getHeight()/2;n.showSpinner&&c.setShape({cx:x,cy:_}),u.setShape({x:x-d,y:_-d,width:d*2,height:d*2}),s.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},a.resize(),a}var Scheduler=function(){function t(n,a,s,l){this._stageTaskMap=createHashMap(),this.ecInstance=n,this.api=a,s=this._dataProcessorHandlers=s.slice(),l=this._visualHandlers=l.slice(),this._allHandlers=s.concat(l)}return t.prototype.restoreData=function(n,a){n.restoreData(a),this._stageTaskMap.each(function(s){var l=s.overallTask;l&&l.dirty()})},t.prototype.getPerformArgs=function(n,a){if(n.__pipeline){var s=this._pipelineMap.get(n.__pipeline.id),l=s.context,u=!a&&s.progressiveEnabled&&(!l||l.progressiveRender)&&n.__idxInPipeline>s.blockIndex,c=u?s.step:null,p=l&&l.modDataCount,d=p!=null?Math.ceil(p/c):null;return{step:c,modBy:d,modDataCount:p}}},t.prototype.getPipeline=function(n){return this._pipelineMap.get(n)},t.prototype.updateStreamModes=function(n,a){var s=this._pipelineMap.get(n.uid),l=n.getData(),u=l.count(),c=s.progressiveEnabled&&a.incrementalPrepareRender&&u>=s.threshold,p=n.get("large")&&u>=n.get("largeThreshold"),d=n.get("progressiveChunkMode")==="mod"?u:null;n.pipelineContext=s.context={progressiveRender:c,modDataCount:d,large:p}},t.prototype.restorePipelines=function(n){var a=this,s=a._pipelineMap=createHashMap();n.eachSeries(function(l){var u=l.getProgressive(),c=l.uid;s.set(c,{id:c,head:null,tail:null,threshold:l.getProgressiveThreshold(),progressiveEnabled:u&&!(l.preventIncremental&&l.preventIncremental()),blockIndex:-1,step:Math.round(u||700),count:0}),a._pipe(l,l.dataTask)})},t.prototype.prepareStageTasks=function(){var n=this._stageTaskMap,a=this.api.getModel(),s=this.api;each$f(this._allHandlers,function(l){var u=n.get(l.uid)||n.set(l.uid,{}),c="";assert(!(l.reset&&l.overallReset),c),l.reset&&this._createSeriesStageTask(l,u,a,s),l.overallReset&&this._createOverallStageTask(l,u,a,s)},this)},t.prototype.prepareView=function(n,a,s,l){var u=n.renderTask,c=u.context;c.model=a,c.ecModel=s,c.api=l,u.__block=!n.incrementalPrepareRender,this._pipe(a,u)},t.prototype.performDataProcessorTasks=function(n,a){this._performStageTasks(this._dataProcessorHandlers,n,a,{block:!0})},t.prototype.performVisualTasks=function(n,a,s){this._performStageTasks(this._visualHandlers,n,a,s)},t.prototype._performStageTasks=function(n,a,s,l){l=l||{};var u=!1,c=this;each$f(n,function(d,x){if(!(l.visualType&&l.visualType!==d.visualType)){var _=c._stageTaskMap.get(d.uid),S=_.seriesTaskMap,T=_.overallTask;if(T){var A,R=T.agentStubMap;R.each(function(O){p(l,O)&&(O.dirty(),A=!0)}),A&&T.dirty(),c.updatePayload(T,s);var D=c.getPerformArgs(T,l.block);R.each(function(O){O.perform(D)}),T.perform(D)&&(u=!0)}else S&&S.each(function(O,F){p(l,O)&&O.dirty();var z=c.getPerformArgs(O,l.block);z.skip=!d.performRawSeries&&a.isSeriesFiltered(O.context.model),c.updatePayload(O,s),O.perform(z)&&(u=!0)})}});function p(d,x){return d.setDirty&&(!d.dirtyMap||d.dirtyMap.get(x.__pipeline.id))}this.unfinished=u||this.unfinished},t.prototype.performSeriesTasks=function(n){var a;n.eachSeries(function(s){a=s.dataTask.perform()||a}),this.unfinished=a||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(n){var a=n.tail;do{if(a.__block){n.blockIndex=a.__idxInPipeline;break}a=a.getUpstream()}while(a)})},t.prototype.updatePayload=function(n,a){a!=="remain"&&(n.context.payload=a)},t.prototype._createSeriesStageTask=function(n,a,s,l){var u=this,c=a.seriesTaskMap,p=a.seriesTaskMap=createHashMap(),d=n.seriesType,x=n.getTargetSeries;n.createOnAllSeries?s.eachRawSeries(_):d?s.eachRawSeriesByType(d,_):x&&x(s,l).each(_);function _(S){var T=S.uid,A=p.set(T,c&&c.get(T)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));A.context={model:S,ecModel:s,api:l,useClearVisual:n.isVisual&&!n.isLayout,plan:n.plan,reset:n.reset,scheduler:u},u._pipe(S,A)}},t.prototype._createOverallStageTask=function(n,a,s,l){var u=this,c=a.overallTask=a.overallTask||createTask({reset:overallTaskReset});c.context={ecModel:s,api:l,overallReset:n.overallReset,scheduler:u};var p=c.agentStubMap,d=c.agentStubMap=createHashMap(),x=n.seriesType,_=n.getTargetSeries,S=!0,T=!1,A="";assert(!n.createOnAllSeries,A),x?s.eachRawSeriesByType(x,R):_?_(s,l).each(R):(S=!1,each$f(s.getSeries(),R));function R(D){var O=D.uid,F=d.set(O,p&&p.get(O)||(T=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));F.context={model:D,overallProgress:S},F.agent=c,F.__block=S,u._pipe(D,F)}T&&c.dirty()},t.prototype._pipe=function(n,a){var s=n.uid,l=this._pipelineMap.get(s);!l.head&&(l.head=a),l.tail&&l.tail.pipe(a),l.tail=a,a.__idxInPipeline=l.count++,a.__pipeline=l},t.wrapStageHandler=function(n,a){return isFunction$1(n)&&(n={overallReset:n,seriesType:detectSeriseType(n)}),n.uid=getUID("stageHandler"),a&&(n.visualType=a),n},t}();function overallTaskReset(t){t.overallReset(t.ecModel,t.api,t.payload)}function stubReset(t){return t.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function seriesTaskReset(t){t.useClearVisual&&t.data.clearAllVisual();var n=t.resetDefines=normalizeToArray(t.reset(t.model,t.ecModel,t.api,t.payload));return n.length>1?map$1(n,function(a,s){return makeSeriesTaskProgress(s)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(t){return function(n,a){var s=a.data,l=a.resetDefines[t];if(l&&l.dataEach)for(var u=n.start;u<n.end;u++)l.dataEach(s,u);else l&&l.progress&&l.progress(n,s)}}function seriesTaskCount(t){return t.data.count()}function detectSeriseType(t){seriesType=null;try{t(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(t){seriesType=t};ecModelMock.eachComponent=function(t){t.mainType==="series"&&t.subType&&(seriesType=t.subType)};function mockMethods(t,n){for(var a in n.prototype)t[a]=noop}var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor},pageTextStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;var ECEventProcessor=function(){function t(){}return t.prototype.normalizeQuery=function(n){var a={},s={},l={};if(isString$1(n)){var u=parseClassType(n);a.mainType=u.main||null,a.subType=u.sub||null}else{var c=["Index","Name","Id"],p={name:1,dataIndex:1,dataType:1};each$f(n,function(d,x){for(var _=!1,S=0;S<c.length;S++){var T=c[S],A=x.lastIndexOf(T);if(A>0&&A===x.length-T.length){var R=x.slice(0,A);R!=="data"&&(a.mainType=R,a[T.toLowerCase()]=d,_=!0)}}p.hasOwnProperty(x)&&(s[x]=d,_=!0),_||(l[x]=d)})}return{cptQuery:a,dataQuery:s,otherQuery:l}},t.prototype.filter=function(n,a){var s=this.eventInfo;if(!s)return!0;var l=s.targetEl,u=s.packedEvent,c=s.model,p=s.view;if(!c||!p)return!0;var d=a.cptQuery,x=a.dataQuery;return _(d,c,"mainType")&&_(d,c,"subType")&&_(d,c,"index","componentIndex")&&_(d,c,"name")&&_(d,c,"id")&&_(x,u,"name")&&_(x,u,"dataIndex")&&_(x,u,"dataType")&&(!p.filterForExposedEvent||p.filterForExposedEvent(n,a.otherQuery,l,u));function _(S,T,A,R){return S[A]==null||T[R||A]===S[A]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){var a=t.getData();if(t.legendIcon&&a.setVisual("legendIcon",t.legendIcon),!t.hasSymbolVisual)return;for(var s={},l={},u=!1,c=0;c<SYMBOL_PROPS_WITH_CB.length;c++){var p=SYMBOL_PROPS_WITH_CB[c],d=t.get(p);isFunction$1(d)?(u=!0,l[p]=d):s[p]=d}if(s.symbol=s.symbol||t.defaultSymbol,a.setVisual(extend({legendIcon:t.legendIcon||s.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},s)),n.isSeriesFiltered(t))return;var x=keys(l);function _(S,T){for(var A=t.getRawValue(T),R=t.getDataParams(T),D=0;D<x.length;D++){var O=x[D];S.setItemVisual(T,O,l[O](A,R))}}return{dataEach:u?_:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){if(!t.hasSymbolVisual||n.isSeriesFiltered(t))return;var a=t.getData();function s(l,u){for(var c=l.getItemModel(u),p=0;p<SYMBOL_PROPS.length;p++){var d=SYMBOL_PROPS[p],x=c.getShallow(d,!0);x!=null&&l.setItemVisual(u,d,x)}}return{dataEach:a.hasItemOption?s:null}}};function getItemVisualFromData(t,n,a){switch(a){case"color":var s=t.getItemVisual(n,"style");return s[t.getVisual("drawType")];case"opacity":return t.getItemVisual(n,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(n,a)}}function getVisualFromData(t,n){switch(n){case"color":var a=t.getVisual("style");return a[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(n)}}function setItemVisualFromData(t,n,a,s){switch(a){case"color":var l=t.ensureUniqueItemVisual(n,"style");l[t.getVisual("drawType")]=s,t.setItemVisual(n,"colorFromPalette",!1);break;case"opacity":t.ensureUniqueItemVisual(n,"style").opacity=s;break;case"symbol":case"symbolSize":case"liftZ":t.setItemVisual(n,a,s);break}}function createLegacyDataSelectAction(t,n){function a(s,l){var u=[];return s.eachComponent({mainType:"series",subType:t,query:l},function(c){u.push(c.seriesIndex)}),u}each$f([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(s){n(s[0],function(l,u,c){l=extend({},l),c.dispatchAction(extend(l,{type:s[1],seriesIndex:a(u,l)}))})})}function handleSeriesLegacySelectEvents(t,n,a,s,l){var u=t+n;a.isSilent(u)||s.eachComponent({mainType:"series",subType:"pie"},function(c){for(var p=c.seriesIndex,d=c.option.selectedMap,x=l.selected,_=0;_<x.length;_++)if(x[_].seriesIndex===p){var S=c.getData(),T=queryDataIndex(S,l.fromActionPayload);a.trigger(u,{type:u,seriesId:c.id,name:isArray$1(T)?S.getName(T[0]):S.getName(T),selected:isString$1(d)?d:extend({},d)})}})}function handleLegacySelectEvents(t,n,a){t.on("selectchanged",function(s){var l=a.getModel();s.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",n,l,s),handleSeriesLegacySelectEvents("pie","selectchanged",n,l,s)):s.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",n,l,s),handleSeriesLegacySelectEvents("pie","selected",n,l,s)):s.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",n,l,s),handleSeriesLegacySelectEvents("pie","unselected",n,l,s))})}function findEventDispatcher(t,n,a){for(var s;t&&!(n(t)&&(s=t,a));)t=t.__hostTarget||t.parent;return s}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=function(){function t(){this._id="__ec_inner_"+wmUniqueIndex++}return t.prototype.get=function(n){return this._guard(n)[this._id]},t.prototype.set=function(n,a){var s=this._guard(n);return supportDefineProperty?Object.defineProperty(s,this._id,{value:a,enumerable:!1,configurable:!0}):s[this._id]=a,this},t.prototype.delete=function(n){return this.has(n)?(delete this._guard(n)[this._id],!0):!1},t.prototype.has=function(n){return!!this._guard(n)[this._id]},t.prototype._guard=function(n){if(n!==Object(n))throw TypeError("Value of WeakMap is not a non-null object.");return n},t}(),Triangle=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,n){var a=n.cx,s=n.cy,l=n.width/2,u=n.height/2;t.moveTo(a,s-u),t.lineTo(a+l,s+u),t.lineTo(a-l,s+u),t.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,n){var a=n.cx,s=n.cy,l=n.width/2,u=n.height/2;t.moveTo(a,s-u),t.lineTo(a+l,s),t.lineTo(a,s+u),t.lineTo(a-l,s),t.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,n){var a=n.x,s=n.y,l=n.width/5*3,u=Math.max(l,n.height),c=l/2,p=c*c/(u-c),d=s-u+c+p,x=Math.asin(p/c),_=Math.cos(x)*c,S=Math.sin(x),T=Math.cos(x),A=c*.6,R=c*.7;t.moveTo(a-_,d+p),t.arc(a,d,c,Math.PI-x,Math.PI*2+x),t.bezierCurveTo(a+_-S*A,d+p+T*A,a,s-R,a,s),t.bezierCurveTo(a,s-R,a-_+S*A,d+p+T*A,a-_,d+p),t.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,n){var a=n.height,s=n.width,l=n.x,u=n.y,c=s/3*2;t.moveTo(l,u),t.lineTo(l+c,u+a),t.lineTo(l,u+a/4*3),t.lineTo(l-c,u+a),t.lineTo(l,u),t.closePath()}}),symbolCtors={line:Line$1,rect:Rect$2,roundRect:Rect$2,square:Rect$2,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(t,n,a,s,l){l.x1=t,l.y1=n+s/2,l.x2=t+a,l.y2=n+s/2},rect:function(t,n,a,s,l){l.x=t,l.y=n,l.width=a,l.height=s},roundRect:function(t,n,a,s,l){l.x=t,l.y=n,l.width=a,l.height=s,l.r=Math.min(a,s)/4},square:function(t,n,a,s,l){var u=Math.min(a,s);l.x=t,l.y=n,l.width=u,l.height=u},circle:function(t,n,a,s,l){l.cx=t+a/2,l.cy=n+s/2,l.r=Math.min(a,s)/2},diamond:function(t,n,a,s,l){l.cx=t+a/2,l.cy=n+s/2,l.width=a,l.height=s},pin:function(t,n,a,s,l){l.x=t+a/2,l.y=n+s/2,l.width=a,l.height=s},arrow:function(t,n,a,s,l){l.x=t+a/2,l.y=n+s/2,l.width=a,l.height=s},triangle:function(t,n,a,s,l){l.cx=t+a/2,l.cy=n+s/2,l.width=a,l.height=s}},symbolBuildProxies={};each$f(symbolCtors,function(t,n){symbolBuildProxies[n]=new t});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,n,a){var s=calculateTextPosition(t,n,a),l=this.shape;return l&&l.symbolType==="pin"&&n.position==="inside"&&(s.y=a.y+a.height*.4),s},buildPath:function(t,n,a){var s=n.symbolType;if(s!=="none"){var l=symbolBuildProxies[s];l||(s="rect",l=symbolBuildProxies[s]),symbolShapeMakers[s](n.x,n.y,n.width,n.height,l.shape),l.buildPath(t,l.shape,a)}}});function symbolPathSetColor(t,n){if(this.type!=="image"){var a=this.style;this.__isEmptyBrush?(a.stroke=t,a.fill=n||"#fff",a.lineWidth=2):this.shape.symbolType==="line"?a.stroke=t:a.fill=t,this.markRedraw()}}function createSymbol$1(t,n,a,s,l,u,c){var p=t.indexOf("empty")===0;p&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var d;return t.indexOf("image://")===0?d=makeImage(t.slice(8),new BoundingRect(n,a,s,l),c?"center":"cover"):t.indexOf("path://")===0?d=makePath(t.slice(7),{},new BoundingRect(n,a,s,l),c?"center":"cover"):d=new SymbolClz({shape:{symbolType:t,x:n,y:a,width:s,height:l}}),d.__isEmptyBrush=p,d.setColor=symbolPathSetColor,u&&d.setColor(u),d}function normalizeSymbolSize(t){return isArray$1(t)||(t=[+t,+t]),[t[0]||0,t[1]||0]}function normalizeSymbolOffset(t,n){if(t!=null)return isArray$1(t)||(t=[t,t]),[parsePercent(t[0],n[0])||0,parsePercent(retrieve2(t[1],t[0]),n[1])||0]}function isSafeNum(t){return isFinite(t)}function createLinearGradient(t,n,a){var s=n.x==null?0:n.x,l=n.x2==null?1:n.x2,u=n.y==null?0:n.y,c=n.y2==null?0:n.y2;n.global||(s=s*a.width+a.x,l=l*a.width+a.x,u=u*a.height+a.y,c=c*a.height+a.y),s=isSafeNum(s)?s:0,l=isSafeNum(l)?l:1,u=isSafeNum(u)?u:0,c=isSafeNum(c)?c:0;var p=t.createLinearGradient(s,u,l,c);return p}function createRadialGradient(t,n,a){var s=a.width,l=a.height,u=Math.min(s,l),c=n.x==null?.5:n.x,p=n.y==null?.5:n.y,d=n.r==null?.5:n.r;n.global||(c=c*s+a.x,p=p*l+a.y,d=d*u),c=isSafeNum(c)?c:.5,p=isSafeNum(p)?p:.5,d=d>=0&&isSafeNum(d)?d:.5;var x=t.createRadialGradient(c,p,0,c,p,d);return x}function getCanvasGradient(t,n,a){for(var s=n.type==="radial"?createRadialGradient(t,n,a):createLinearGradient(t,n,a),l=n.colorStops,u=0;u<l.length;u++)s.addColorStop(l[u].offset,l[u].color);return s}function isClipPathChanged(t,n){if(t===n||!t&&!n)return!1;if(!t||!n||t.length!==n.length)return!0;for(var a=0;a<t.length;a++)if(t[a]!==n[a])return!0;return!1}function parseInt10(t){return parseInt(t,10)}function getSize$1(t,n,a){var s=["width","height"][n],l=["clientWidth","clientHeight"][n],u=["paddingLeft","paddingTop"][n],c=["paddingRight","paddingBottom"][n];if(a[s]!=null&&a[s]!=="auto")return parseFloat(a[s]);var p=document.defaultView.getComputedStyle(t);return(t[l]||parseInt10(p[s])||parseInt10(t.style[s]))-(parseInt10(p[u])||0)-(parseInt10(p[c])||0)|0}function normalizeLineDash(t,n){return!t||t==="solid"||!(n>0)?null:t==="dashed"?[4*n,2*n]:t==="dotted"?[n]:isNumber(t)?[t]:isArray$1(t)?t:null}function getLineDash(t){var n=t.style,a=n.lineDash&&n.lineWidth>0&&normalizeLineDash(n.lineDash,n.lineWidth),s=n.lineDashOffset;if(a){var l=n.strokeNoScale&&t.getLineScale?t.getLineScale():1;l&&l!==1&&(a=map$1(a,function(u){return u/l}),s/=l)}return[a,s]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(t){var n=t.stroke;return!(n==null||n==="none"||!(t.lineWidth>0))}function isValidStrokeFillStyle(t){return typeof t=="string"&&t!=="none"}function styleHasFill(t){var n=t.fill;return n!=null&&n!=="none"}function doFillPath(t,n){if(n.fillOpacity!=null&&n.fillOpacity!==1){var a=t.globalAlpha;t.globalAlpha=n.fillOpacity*n.opacity,t.fill(),t.globalAlpha=a}else t.fill()}function doStrokePath(t,n){if(n.strokeOpacity!=null&&n.strokeOpacity!==1){var a=t.globalAlpha;t.globalAlpha=n.strokeOpacity*n.opacity,t.stroke(),t.globalAlpha=a}else t.stroke()}function createCanvasPattern(t,n,a){var s=createOrUpdateImage(n.image,n.__image,a);if(isImageReady(s)){var l=t.createPattern(s,n.repeat||"repeat");if(typeof DOMMatrix=="function"&&l&&l.setTransform){var u=new DOMMatrix;u.translateSelf(n.x||0,n.y||0),u.rotateSelf(0,0,(n.rotation||0)*RADIAN_TO_DEGREE),u.scaleSelf(n.scaleX||1,n.scaleY||1),l.setTransform(u)}return l}}function brushPath(t,n,a,s){var l,u=styleHasStroke(a),c=styleHasFill(a),p=a.strokePercent,d=p<1,x=!n.path;(!n.silent||d)&&x&&n.createPathProxy();var _=n.path||pathProxyForDraw,S=n.__dirty;if(!s){var T=a.fill,A=a.stroke,R=c&&!!T.colorStops,D=u&&!!A.colorStops,O=c&&!!T.image,F=u&&!!A.image,z=void 0,j=void 0,Z=void 0,W=void 0,J=void 0;(R||D)&&(J=n.getBoundingRect()),R&&(z=S?getCanvasGradient(t,T,J):n.__canvasFillGradient,n.__canvasFillGradient=z),D&&(j=S?getCanvasGradient(t,A,J):n.__canvasStrokeGradient,n.__canvasStrokeGradient=j),O&&(Z=S||!n.__canvasFillPattern?createCanvasPattern(t,T,n):n.__canvasFillPattern,n.__canvasFillPattern=Z),F&&(W=S||!n.__canvasStrokePattern?createCanvasPattern(t,A,n):n.__canvasStrokePattern,n.__canvasStrokePattern=Z),R?t.fillStyle=z:O&&(Z?t.fillStyle=Z:c=!1),D?t.strokeStyle=j:F&&(W?t.strokeStyle=W:u=!1)}var en=n.getGlobalScale();_.setScale(en[0],en[1],n.segmentIgnoreThreshold);var tn,Ct;t.setLineDash&&a.lineDash&&(l=getLineDash(n),tn=l[0],Ct=l[1]);var Q=!0;(x||S&SHAPE_CHANGED_BIT)&&(_.setDPR(t.dpr),d?_.setContext(null):(_.setContext(t),Q=!1),_.reset(),n.buildPath(_,n.shape,s),_.toStatic(),n.pathUpdated()),Q&&_.rebuildPath(t,d?p:1),tn&&(t.setLineDash(tn),t.lineDashOffset=Ct),s||(a.strokeFirst?(u&&doStrokePath(t,a),c&&doFillPath(t,a)):(c&&doFillPath(t,a),u&&doStrokePath(t,a))),tn&&t.setLineDash([])}function brushImage(t,n,a){var s=n.__image=createOrUpdateImage(a.image,n.__image,n,n.onload);if(!(!s||!isImageReady(s))){var l=a.x||0,u=a.y||0,c=n.getWidth(),p=n.getHeight(),d=s.width/s.height;if(c==null&&p!=null?c=p*d:p==null&&c!=null?p=c/d:c==null&&p==null&&(c=s.width,p=s.height),a.sWidth&&a.sHeight){var x=a.sx||0,_=a.sy||0;t.drawImage(s,x,_,a.sWidth,a.sHeight,l,u,c,p)}else if(a.sx&&a.sy){var x=a.sx,_=a.sy,S=c-x,T=p-_;t.drawImage(s,x,_,S,T,l,u,c,p)}else t.drawImage(s,l,u,c,p)}}function brushText(t,n,a){var s,l=a.text;if(l!=null&&(l+=""),l){t.font=a.font||DEFAULT_FONT,t.textAlign=a.textAlign,t.textBaseline=a.textBaseline;var u=void 0,c=void 0;t.setLineDash&&a.lineDash&&(s=getLineDash(n),u=s[0],c=s[1]),u&&(t.setLineDash(u),t.lineDashOffset=c),a.strokeFirst?(styleHasStroke(a)&&t.strokeText(l,a.x,a.y),styleHasFill(a)&&t.fillText(l,a.x,a.y)):(styleHasFill(a)&&t.fillText(l,a.x,a.y),styleHasStroke(a)&&t.strokeText(l,a.x,a.y)),u&&t.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(t,n,a,s,l){var u=!1;if(!s&&(a=a||{},n===a))return!1;if(s||n.opacity!==a.opacity){flushPathDrawn(t,l),u=!0;var c=Math.max(Math.min(n.opacity,1),0);t.globalAlpha=isNaN(c)?DEFAULT_COMMON_STYLE.opacity:c}(s||n.blend!==a.blend)&&(u||(flushPathDrawn(t,l),u=!0),t.globalCompositeOperation=n.blend||DEFAULT_COMMON_STYLE.blend);for(var p=0;p<SHADOW_NUMBER_PROPS.length;p++){var d=SHADOW_NUMBER_PROPS[p];(s||n[d]!==a[d])&&(u||(flushPathDrawn(t,l),u=!0),t[d]=t.dpr*(n[d]||0))}return(s||n.shadowColor!==a.shadowColor)&&(u||(flushPathDrawn(t,l),u=!0),t.shadowColor=n.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),u}function bindPathAndTextCommonStyle(t,n,a,s,l){var u=getStyle(n,l.inHover),c=s?null:a&&getStyle(a,l.inHover)||{};if(u===c)return!1;var p=bindCommonProps(t,u,c,s,l);if((s||u.fill!==c.fill)&&(p||(flushPathDrawn(t,l),p=!0),isValidStrokeFillStyle(u.fill)&&(t.fillStyle=u.fill)),(s||u.stroke!==c.stroke)&&(p||(flushPathDrawn(t,l),p=!0),isValidStrokeFillStyle(u.stroke)&&(t.strokeStyle=u.stroke)),(s||u.opacity!==c.opacity)&&(p||(flushPathDrawn(t,l),p=!0),t.globalAlpha=u.opacity==null?1:u.opacity),n.hasStroke()){var d=u.lineWidth,x=d/(u.strokeNoScale&&n.getLineScale?n.getLineScale():1);t.lineWidth!==x&&(p||(flushPathDrawn(t,l),p=!0),t.lineWidth=x)}for(var _=0;_<STROKE_PROPS.length;_++){var S=STROKE_PROPS[_],T=S[0];(s||u[T]!==c[T])&&(p||(flushPathDrawn(t,l),p=!0),t[T]=u[T]||S[1])}return p}function bindImageStyle(t,n,a,s,l){return bindCommonProps(t,getStyle(n,l.inHover),a&&getStyle(a,l.inHover),s,l)}function setContextTransform(t,n){var a=n.transform,s=t.dpr||1;a?t.setTransform(s*a[0],s*a[1],s*a[2],s*a[3],s*a[4],s*a[5]):t.setTransform(s,0,0,s,0,0)}function updateClipStatus(t,n,a){for(var s=!1,l=0;l<t.length;l++){var u=t[l];s=s||u.isZeroArea(),setContextTransform(n,u),n.beginPath(),u.buildPath(n,u.shape),n.clip()}a.allClipped=s}function isTransformChanged(t,n){return t&&n?t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||t[3]!==n[3]||t[4]!==n[4]||t[5]!==n[5]:!(!t&&!n)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(t){var n=styleHasFill(t),a=styleHasStroke(t);return!(t.lineDash||!(+n^+a)||n&&typeof t.fill!="string"||a&&typeof t.stroke!="string"||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function flushPathDrawn(t,n){n.batchFill&&t.fill(),n.batchStroke&&t.stroke(),n.batchFill="",n.batchStroke=""}function getStyle(t,n){return n&&t.__hoverStyle||t.style}function brushSingle(t,n){brush$1(t,n,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(t,n,a,s){var l=n.transform;if(!n.shouldBePainted(a.viewWidth,a.viewHeight,!1,!1)){n.__dirty&=~REDRAW_BIT,n.__isRendered=!1;return}var u=n.__clipPaths,c=a.prevElClipPaths,p=!1,d=!1;if((!c||isClipPathChanged(u,c))&&(c&&c.length&&(flushPathDrawn(t,a),t.restore(),d=p=!0,a.prevElClipPaths=null,a.allClipped=!1,a.prevEl=null),u&&u.length&&(flushPathDrawn(t,a),t.save(),updateClipStatus(u,t,a),p=!0),a.prevElClipPaths=u),a.allClipped){n.__isRendered=!1;return}n.beforeBrush&&n.beforeBrush(),n.innerBeforeBrush();var x=a.prevEl;x||(d=p=!0);var _=n instanceof Path&&n.autoBatch&&canPathBatch(n.style);p||isTransformChanged(l,x.transform)?(flushPathDrawn(t,a),setContextTransform(t,n)):_||flushPathDrawn(t,a);var S=getStyle(n,a.inHover);n instanceof Path?(a.lastDrawType!==DRAW_TYPE_PATH&&(d=!0,a.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(t,n,x,d,a),(!_||!a.batchFill&&!a.batchStroke)&&t.beginPath(),brushPath(t,n,S,_),_&&(a.batchFill=S.fill||"",a.batchStroke=S.stroke||"")):n instanceof TSpan?(a.lastDrawType!==DRAW_TYPE_TEXT&&(d=!0,a.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(t,n,x,d,a),brushText(t,n,S)):n instanceof ZRImage?(a.lastDrawType!==DRAW_TYPE_IMAGE&&(d=!0,a.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(t,n,x,d,a),brushImage(t,n,S)):n.getTemporalDisplayables&&(a.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(d=!0,a.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(t,n,a)),_&&s&&flushPathDrawn(t,a),n.innerAfterBrush(),n.afterBrush&&n.afterBrush(),a.prevEl=n,n.__dirty=0,n.__isRendered=!0}function brushIncremental(t,n,a){var s=n.getDisplayables(),l=n.getTemporalDisplayables();t.save();var u={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:a.viewWidth,viewHeight:a.viewHeight,inHover:a.inHover},c,p;for(c=n.getCursor(),p=s.length;c<p;c++){var d=s[c];d.beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),brush$1(t,d,u,c===p-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),u.prevEl=d}for(var x=0,_=l.length;x<_;x++){var d=l[x];d.beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),brush$1(t,d,u,x===_-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),u.prevEl=d}n.clearTemporalDisplayables(),n.notClear=!0,t.restore()}var decalMap=new WeakMap$1,decalCache=new LRU(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(t,n){if(t==="none")return null;var a=n.getDevicePixelRatio(),s=n.getZr(),l=s.painter.type==="svg";t.dirty&&decalMap.delete(t);var u=decalMap.get(t);if(u)return u;var c=defaults(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});c.backgroundColor==="none"&&(c.backgroundColor=null);var p={repeat:"repeat"};return d(p),p.rotation=c.rotation,p.scaleX=p.scaleY=l?1:1/a,decalMap.set(t,p),t.dirty=!1,p;function d(x){for(var _=[a],S=!0,T=0;T<decalKeys.length;++T){var A=c[decalKeys[T]];if(A!=null&&!isArray$1(A)&&!isString$1(A)&&!isNumber(A)&&typeof A!="boolean"){S=!1;break}_.push(A)}var R;if(S){R=_.join(",")+(l?"-svg":"");var D=decalCache.get(R);D&&(l?x.svgElement=D:x.image=D)}var O=normalizeDashArrayX(c.dashArrayX),F=normalizeDashArrayY(c.dashArrayY),z=normalizeSymbolArray(c.symbol),j=getLineBlockLengthX(O),Z=getLineBlockLengthY(F),W=!l&&platformApi.createCanvas(),J=l&&{tag:"g",attrs:{},key:"dcl",children:[]},en=Ct(),tn;W&&(W.width=en.width*a,W.height=en.height*a,tn=W.getContext("2d")),Q(),S&&decalCache.put(R,W||J),x.image=W,x.svgElement=J,x.svgWidth=en.width,x.svgHeight=en.height;function Ct(){for(var on=1,gn=0,In=j.length;gn<In;++gn)on=getLeastCommonMultiple(on,j[gn]);for(var dn=1,gn=0,In=z.length;gn<In;++gn)dn=getLeastCommonMultiple(dn,z[gn].length);on*=dn;var ix=Z*j.length*z.length;return{width:Math.max(1,Math.min(on,c.maxTileWidth)),height:Math.max(1,Math.min(ix,c.maxTileHeight))}}function Q(){tn&&(tn.clearRect(0,0,W.width,W.height),c.backgroundColor&&(tn.fillStyle=c.backgroundColor,tn.fillRect(0,0,W.width,W.height)));for(var on=0,gn=0;gn<F.length;++gn)on+=F[gn];if(on<=0)return;for(var In=-Z,dn=0,ix=0,Cn=0;In<en.height;){if(dn%2===0){for(var ax=ix/2%z.length,sx=0,lx=0,ox=0;sx<en.width*2;){for(var hx=0,gn=0;gn<O[Cn].length;++gn)hx+=O[Cn][gn];if(hx<=0)break;if(lx%2===0){var _x=(1-c.symbolSize)*.5,ux=sx+O[Cn][lx]*_x,px=In+F[dn]*_x,dx=O[Cn][lx]*c.symbolSize,mx=F[dn]*c.symbolSize,gx=ox/2%z[ax].length;Sx(ux,px,dx,mx,z[ax][gx])}sx+=O[Cn][lx],++ox,++lx,lx===O[Cn].length&&(lx=0)}++Cn,Cn===O.length&&(Cn=0)}In+=F[dn],++ix,++dn,dn===F.length&&(dn=0)}function Sx(Ex,Cx,Ax,Tx,kx){var Rx=l?1:a,$x=createSymbol$1(kx,Ex*Rx,Cx*Rx,Ax*Rx,Tx*Rx,c.color,c.symbolKeepAspect);if(l){var Gx=s.painter.renderOneToVNode($x);Gx&&J.children.push(Gx)}else brushSingle(tn,$x)}}}}function normalizeSymbolArray(t){if(!t||t.length===0)return[["rect"]];if(isString$1(t))return[[t]];for(var n=!0,a=0;a<t.length;++a)if(!isString$1(t[a])){n=!1;break}if(n)return normalizeSymbolArray([t]);for(var s=[],a=0;a<t.length;++a)isString$1(t[a])?s.push([t[a]]):s.push(t[a]);return s}function normalizeDashArrayX(t){if(!t||t.length===0)return[[0,0]];if(isNumber(t)){var n=Math.ceil(t);return[[n,n]]}for(var a=!0,s=0;s<t.length;++s)if(!isNumber(t[s])){a=!1;break}if(a)return normalizeDashArrayX([t]);for(var l=[],s=0;s<t.length;++s)if(isNumber(t[s])){var n=Math.ceil(t[s]);l.push([n,n])}else{var n=map$1(t[s],function(p){return Math.ceil(p)});n.length%2===1?l.push(n.concat(n)):l.push(n)}return l}function normalizeDashArrayY(t){if(!t||typeof t=="object"&&t.length===0)return[0,0];if(isNumber(t)){var n=Math.ceil(t);return[n,n]}var a=map$1(t,function(s){return Math.ceil(s)});return t.length%2?a.concat(a):a}function getLineBlockLengthX(t){return map$1(t,function(n){return getLineBlockLengthY(n)})}function getLineBlockLengthY(t){for(var n=0,a=0;a<t.length;++a)n+=t[a];return t.length%2===1?n*2:n}function decalVisual(t,n){t.eachRawSeries(function(a){if(!t.isSeriesFiltered(a)){var s=a.getData();s.hasItemVisual()&&s.each(function(c){var p=s.getItemVisual(c,"decal");if(p){var d=s.ensureUniqueItemVisual(c,"style");d.decal=createOrUpdatePatternFromDecal(p,n)}});var l=s.getVisual("decal");if(l){var u=s.getVisual("style");u.decal=createOrUpdatePatternFromDecal(l,n)}}})}var lifecycle=new Eventful,implsStore={};function registerImpl(t,n){implsStore[t]=n}function getImpl(t){return implsStore[t]}var version="5.6.0",dependencies={zrender:"5.6.1"},TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(this.isDisposed()){this.id;return}return toLowercaseNameAndCallEventful(this,t,n)}}function createRegisterEventWithLowercaseMessageCenter(t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return toLowercaseNameAndCallEventful(this,t,n)}}function toLowercaseNameAndCallEventful(t,n,a){return a[0]=a[0]&&a[0].toLowerCase(),Eventful.prototype[n].apply(t,a)}var MessageCenter=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n}(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts=function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,new ECEventProcessor)||this;u._chartsViews=[],u._chartsMap={},u._componentsViews=[],u._componentsMap={},u._pendingActions=[],l=l||{},isString$1(s)&&(s=themeStorage[s]),u._dom=a;var c="canvas",p="auto",d=!1;l.ssr&&registerSSRDataGetter(function(T){var A=getECData(T),R=A.dataIndex;if(R!=null){var D=createHashMap();return D.set("series_index",A.seriesIndex),D.set("data_index",R),A.ssrType&&D.set("ssr_type",A.ssrType),D}});var x=u._zr=init$2(a,{renderer:l.renderer||c,devicePixelRatio:l.devicePixelRatio,width:l.width,height:l.height,ssr:l.ssr,useDirtyRect:retrieve2(l.useDirtyRect,d),useCoarsePointer:retrieve2(l.useCoarsePointer,p),pointerSize:l.pointerSize});u._ssr=l.ssr,u._throttledZrFlush=throttle(bind$1(x.flush,x),17),s=clone$4(s),s&&globalBackwardCompat(s,!0),u._theme=s,u._locale=createLocaleObject(l.locale||SYSTEM_LANG),u._coordSysMgr=new CoordinateSystemManager;var _=u._api=createExtensionAPI(u);function S(T,A){return T.__prio-A.__prio}return sort$2(visualFuncs,S),sort$2(dataProcessorFuncs,S),u._scheduler=new Scheduler(u,_,dataProcessorFuncs,visualFuncs),u._messageCenter=new MessageCenter,u._initEvents(),u.resize=bind$1(u.resize,u),x.animation.on("frame",u._onframe,u),bindRenderedEvent(x,u),bindMouseEvent(x,u),setAsPrimitive(u),u}return n.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var a=this._scheduler;if(this[PENDING_UPDATE]){var s=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(d){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,d}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}else if(a.unfinished){var l=TEST_FRAME_REMAIN_TIME,u=this._model,c=this._api;a.unfinished=!1;do{var p=+new Date;a.performSeriesTasks(u),a.performDataProcessorTasks(u),updateStreamModes(this,u),a.performVisualTasks(u),renderSeries(this,this._model,c,"remain",{}),l-=+new Date-p}while(l>0&&a.unfinished);a.unfinished||this._zr.flush()}}},n.prototype.getDom=function(){return this._dom},n.prototype.getId=function(){return this.id},n.prototype.getZr=function(){return this._zr},n.prototype.isSSR=function(){return this._ssr},n.prototype.setOption=function(a,s,l){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var u,c,p;if(isObject$3(s)&&(l=s.lazyUpdate,u=s.silent,c=s.replaceMerge,p=s.transition,s=s.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||s){var d=new OptionManager(this._api),x=this._theme,_=this._model=new GlobalModel;_.scheduler=this._scheduler,_.ssr=this._ssr,_.init(null,null,null,x,this._locale,d)}this._model.setOption(a,{replaceMerge:c},optionPreprocessorFuncs);var S={seriesTransition:p,optionChanged:!0};if(l)this[PENDING_UPDATE]={silent:u,updateParams:S},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,S)}catch(T){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,T}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}}},n.prototype.setTheme=function(){},n.prototype.getModel=function(){return this._model},n.prototype.getOption=function(){return this._model&&this._model.getOption()},n.prototype.getWidth=function(){return this._zr.getWidth()},n.prototype.getHeight=function(){return this._zr.getHeight()},n.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&&window.devicePixelRatio||1},n.prototype.getRenderedCanvas=function(a){return this.renderToCanvas(a)},n.prototype.renderToCanvas=function(a){a=a||{};var s=this._zr.painter;return s.getRenderedCanvas({backgroundColor:a.backgroundColor||this._model.get("backgroundColor"),pixelRatio:a.pixelRatio||this.getDevicePixelRatio()})},n.prototype.renderToSVGString=function(a){a=a||{};var s=this._zr.painter;return s.renderToString({useViewBox:a.useViewBox})},n.prototype.getSvgDataURL=function(){if(env.svgSupported){var a=this._zr,s=a.storage.getDisplayList();return each$f(s,function(l){l.stopAnimation(null,!0)}),a.painter.toDataURL()}},n.prototype.getDataURL=function(a){if(this._disposed){this.id;return}a=a||{};var s=a.excludeComponents,l=this._model,u=[],c=this;each$f(s,function(d){l.eachComponent({mainType:d},function(x){var _=c._componentsMap[x.__viewId];_.group.ignore||(u.push(_),_.group.ignore=!0)})});var p=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(a).toDataURL("image/"+(a&&a.type||"png"));return each$f(u,function(d){d.group.ignore=!1}),p},n.prototype.getConnectedDataURL=function(a){if(this._disposed){this.id;return}var s=a.type==="svg",l=this.group,u=Math.min,c=Math.max,p=1/0;if(connectedGroups[l]){var d=p,x=p,_=-p,S=-p,T=[],A=a&&a.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(j,Z){if(j.group===l){var W=s?j.getZr().painter.getSvgDom().innerHTML:j.renderToCanvas(clone$4(a)),J=j.getDom().getBoundingClientRect();d=u(J.left,d),x=u(J.top,x),_=c(J.right,_),S=c(J.bottom,S),T.push({dom:W,left:J.left,top:J.top})}}),d*=A,x*=A,_*=A,S*=A;var R=_-d,D=S-x,O=platformApi.createCanvas(),F=init$2(O,{renderer:s?"svg":"canvas"});if(F.resize({width:R,height:D}),s){var z="";return each$f(T,function(j){var Z=j.left-d,W=j.top-x;z+='<g transform="translate('+Z+","+W+')">'+j.dom+"</g>"}),F.painter.getSvgRoot().innerHTML=z,a.connectedBackgroundColor&&F.painter.setBackgroundColor(a.connectedBackgroundColor),F.refreshImmediately(),F.painter.toDataURL()}else return a.connectedBackgroundColor&&F.add(new Rect$2({shape:{x:0,y:0,width:R,height:D},style:{fill:a.connectedBackgroundColor}})),each$f(T,function(j){var Z=new ZRImage({style:{x:j.left*A-d,y:j.top*A-x,image:j.dom}});F.add(Z)}),F.refreshImmediately(),O.toDataURL("image/"+(a&&a.type||"png"))}else return this.getDataURL(a)},n.prototype.convertToPixel=function(a,s){return doConvertPixel(this,"convertToPixel",a,s)},n.prototype.convertFromPixel=function(a,s){return doConvertPixel(this,"convertFromPixel",a,s)},n.prototype.containPixel=function(a,s){if(this._disposed){this.id;return}var l=this._model,u,c=parseFinder$1(l,a);return each$f(c,function(p,d){d.indexOf("Models")>=0&&each$f(p,function(x){var _=x.coordinateSystem;if(_&&_.containPoint)u=u||!!_.containPoint(s);else if(d==="seriesModels"){var S=this._chartsMap[x.__viewId];S&&S.containPoint&&(u=u||S.containPoint(s,x))}},this)},this),!!u},n.prototype.getVisual=function(a,s){var l=this._model,u=parseFinder$1(l,a,{defaultMainType:"series"}),c=u.seriesModel,p=c.getData(),d=u.hasOwnProperty("dataIndexInside")?u.dataIndexInside:u.hasOwnProperty("dataIndex")?p.indexOfRawIndex(u.dataIndex):null;return d!=null?getItemVisualFromData(p,d,s):getVisualFromData(p,s)},n.prototype.getViewOfComponentModel=function(a){return this._componentsMap[a.__viewId]},n.prototype.getViewOfSeriesModel=function(a){return this._chartsMap[a.__viewId]},n.prototype._initEvents=function(){var a=this;each$f(MOUSE_EVENT_NAMES,function(s){var l=function(u){var c=a.getModel(),p=u.target,d,x=s==="globalout";if(x?d={}:p&&findEventDispatcher(p,function(R){var D=getECData(R);if(D&&D.dataIndex!=null){var O=D.dataModel||c.getSeriesByIndex(D.seriesIndex);return d=O&&O.getDataParams(D.dataIndex,D.dataType,p)||{},!0}else if(D.eventData)return d=extend({},D.eventData),!0},!0),d){var _=d.componentType,S=d.componentIndex;(_==="markLine"||_==="markPoint"||_==="markArea")&&(_="series",S=d.seriesIndex);var T=_&&S!=null&&c.getComponent(_,S),A=T&&a[T.mainType==="series"?"_chartsMap":"_componentsMap"][T.__viewId];d.event=u,d.type=s,a._$eventProcessor.eventInfo={targetEl:p,packedEvent:d,model:T,view:A},a.trigger(s,d)}};l.zrEventfulCallAtLast=!0,a._zr.on(s,l,a)}),each$f(eventActionMap,function(s,l){a._messageCenter.on(l,function(u){this.trigger(l,u)},a)}),each$f(["selectchanged"],function(s){a._messageCenter.on(s,function(l){this.trigger(s,l)},a)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},n.prototype.isDisposed=function(){return this._disposed},n.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},n.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var a=this.getDom();a&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var s=this,l=s._api,u=s._model;each$f(s._componentsViews,function(c){c.dispose(u,l)}),each$f(s._chartsViews,function(c){c.dispose(u,l)}),s._zr.dispose(),s._dom=s._model=s._chartsMap=s._componentsMap=s._chartsViews=s._componentsViews=s._scheduler=s._api=s._zr=s._throttledZrFlush=s._theme=s._coordSysMgr=s._messageCenter=null,delete instances[s.id]},n.prototype.resize=function(a){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}this._zr.resize(a);var s=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!s){var l=s.resetOption("media"),u=a&&a.silent;this[PENDING_UPDATE]&&(u==null&&(u=this[PENDING_UPDATE].silent),l=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{l&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},a&&a.animation)})}catch(c){throw this[IN_MAIN_PROCESS_KEY]=!1,c}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}}},n.prototype.showLoading=function(a,s){if(this._disposed){this.id;return}if(isObject$3(a)&&(s=a,a=""),a=a||"default",this.hideLoading(),!!loadingEffects[a]){var l=loadingEffects[a](this._api,s),u=this._zr;this._loadingFX=l,u.add(l)}},n.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},n.prototype.makeActionFromEvent=function(a){var s=extend({},a);return s.type=eventActionMap[a.type],s},n.prototype.dispatchAction=function(a,s){if(this._disposed){this.id;return}if(isObject$3(s)||(s={silent:!!s}),!!actions[a.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(a);return}var l=s.silent;doDispatchAction.call(this,a,l);var u=s.flush;u?this._zr.flush():u!==!1&&env.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}},n.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},n.prototype.appendData=function(a){if(this._disposed){this.id;return}var s=a.seriesIndex,l=this.getModel(),u=l.getSeriesByIndex(s);u.appendData(a),this._scheduler.unfinished=!0,this.getZr().wakeUp()},n.internalField=function(){prepare=function(S){var T=S._scheduler;T.restorePipelines(S._model),T.prepareStageTasks(),prepareView(S,!0),prepareView(S,!1),T.plan()},prepareView=function(S,T){for(var A=S._model,R=S._scheduler,D=T?S._componentsViews:S._chartsViews,O=T?S._componentsMap:S._chartsMap,F=S._zr,z=S._api,j=0;j<D.length;j++)D[j].__alive=!1;T?A.eachComponent(function(J,en){J!=="series"&&Z(en)}):A.eachSeries(Z);function Z(J){var en=J.__requireNewView;J.__requireNewView=!1;var tn="_ec_"+J.id+"_"+J.type,Ct=!en&&O[tn];if(!Ct){var Q=parseClassType(J.type),on=T?ComponentView.getClass(Q.main,Q.sub):ChartView.getClass(Q.sub);Ct=new on,Ct.init(A,z),O[tn]=Ct,D.push(Ct),F.add(Ct.group)}J.__viewId=Ct.__id=tn,Ct.__alive=!0,Ct.__model=J,Ct.group.__ecComponentInfo={mainType:J.mainType,index:J.componentIndex},!T&&R.prepareView(Ct,J,A,z)}for(var j=0;j<D.length;){var W=D[j];W.__alive?j++:(!T&&W.renderTask.dispose(),F.remove(W.group),W.dispose(A,z),D.splice(j,1),O[W.__id]===W&&delete O[W.__id],W.__id=W.group.__ecComponentInfo=null)}},updateDirectly=function(S,T,A,R,D){var O=S._model;if(O.setUpdatePayload(A),!R){each$f([].concat(S._componentsViews).concat(S._chartsViews),W);return}var F={};F[R+"Id"]=A[R+"Id"],F[R+"Index"]=A[R+"Index"],F[R+"Name"]=A[R+"Name"];var z={mainType:R,query:F};D&&(z.subType=D);var j=A.excludeSeriesId,Z;j!=null&&(Z=createHashMap(),each$f(normalizeToArray(j),function(J){var en=convertOptionIdName(J,null);en!=null&&Z.set(en,!0)})),O&&O.eachComponent(z,function(J){var en=Z&&Z.get(J.id)!=null;if(!en)if(isHighDownPayload(A))if(J instanceof SeriesModel)A.type===HIGHLIGHT_ACTION_TYPE&&!A.notBlur&&!J.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(J,A,S._api);else{var tn=findComponentHighDownDispatchers(J.mainType,J.componentIndex,A.name,S._api),Ct=tn.focusSelf,Q=tn.dispatchers;A.type===HIGHLIGHT_ACTION_TYPE&&Ct&&!A.notBlur&&blurComponent(J.mainType,J.componentIndex,S._api),Q&&each$f(Q,function(on){A.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(on):leaveEmphasis(on)})}else isSelectChangePayload(A)&&J instanceof SeriesModel&&(toggleSelectionFromPayload(J,A,S._api),updateSeriesElementSelection(J),markStatusToUpdate(S))},S),O&&O.eachComponent(z,function(J){var en=Z&&Z.get(J.id)!=null;en||W(S[R==="series"?"_chartsMap":"_componentsMap"][J.__viewId])},S);function W(J){J&&J.__alive&&J[T]&&J[T](J.__model,O,S._api,A)}},updateMethods={prepareAndUpdate:function(S){prepare(this),updateMethods.update.call(this,S,{optionChanged:S.newOption!=null})},update:function(S,T){var A=this._model,R=this._api,D=this._zr,O=this._coordSysMgr,F=this._scheduler;if(A){A.setUpdatePayload(S),F.restoreData(A,S),F.performSeriesTasks(A),O.create(A,R),F.performDataProcessorTasks(A,S),updateStreamModes(this,A),O.update(A,R),a(A),F.performVisualTasks(A,S),render(this,A,R,S,T);var z=A.get("backgroundColor")||"transparent",j=A.get("darkMode");D.setBackgroundColor(z),j!=null&&j!=="auto"&&D.setDarkMode(j),lifecycle.trigger("afterupdate",A,R)}},updateTransform:function(S){var T=this,A=this._model,R=this._api;if(A){A.setUpdatePayload(S);var D=[];A.eachComponent(function(F,z){if(F!=="series"){var j=T.getViewOfComponentModel(z);if(j&&j.__alive)if(j.updateTransform){var Z=j.updateTransform(z,A,R,S);Z&&Z.update&&D.push(j)}else D.push(j)}});var O=createHashMap();A.eachSeries(function(F){var z=T._chartsMap[F.__viewId];if(z.updateTransform){var j=z.updateTransform(F,A,R,S);j&&j.update&&O.set(F.uid,1)}else O.set(F.uid,1)}),a(A),this._scheduler.performVisualTasks(A,S,{setDirty:!0,dirtyMap:O}),renderSeries(this,A,R,S,{},O),lifecycle.trigger("afterupdate",A,R)}},updateView:function(S){var T=this._model;T&&(T.setUpdatePayload(S),ChartView.markUpdateMethod(S,"updateView"),a(T),this._scheduler.performVisualTasks(T,S,{setDirty:!0}),render(this,T,this._api,S,{}),lifecycle.trigger("afterupdate",T,this._api))},updateVisual:function(S){var T=this,A=this._model;A&&(A.setUpdatePayload(S),A.eachSeries(function(R){R.getData().clearAllVisual()}),ChartView.markUpdateMethod(S,"updateVisual"),a(A),this._scheduler.performVisualTasks(A,S,{visualType:"visual",setDirty:!0}),A.eachComponent(function(R,D){if(R!=="series"){var O=T.getViewOfComponentModel(D);O&&O.__alive&&O.updateVisual(D,A,T._api,S)}}),A.eachSeries(function(R){var D=T._chartsMap[R.__viewId];D.updateVisual(R,A,T._api,S)}),lifecycle.trigger("afterupdate",A,this._api))},updateLayout:function(S){updateMethods.update.call(this,S)}},doConvertPixel=function(S,T,A,R){if(S._disposed){S.id;return}for(var D=S._model,O=S._coordSysMgr.getCoordinateSystems(),F,z=parseFinder$1(D,A),j=0;j<O.length;j++){var Z=O[j];if(Z[T]&&(F=Z[T](D,z,R))!=null)return F}},updateStreamModes=function(S,T){var A=S._chartsMap,R=S._scheduler;T.eachSeries(function(D){R.updateStreamModes(D,A[D.__viewId])})},doDispatchAction=function(S,T){var A=this,R=this.getModel(),D=S.type,O=S.escapeConnect,F=actions[D],z=F.actionInfo,j=(z.update||"update").split(":"),Z=j.pop(),W=j[0]!=null&&parseClassType(j[0]);this[IN_MAIN_PROCESS_KEY]=!0;var J=[S],en=!1;S.batch&&(en=!0,J=map$1(S.batch,function(dn){return dn=defaults(extend({},dn),S),dn.batch=null,dn}));var tn=[],Ct,Q=isSelectChangePayload(S),on=isHighDownPayload(S);if(on&&allLeaveBlur(this._api),each$f(J,function(dn){if(Ct=F.action(dn,A._model,A._api),Ct=Ct||extend({},dn),Ct.type=z.event||Ct.type,tn.push(Ct),on){var ix=preParseFinder(S),Cn=ix.queryOptionMap,ax=ix.mainTypeSpecified,sx=ax?Cn.keys()[0]:"series";updateDirectly(A,Z,dn,sx),markStatusToUpdate(A)}else Q?(updateDirectly(A,Z,dn,"series"),markStatusToUpdate(A)):W&&updateDirectly(A,Z,dn,W.main,W.sub)}),Z!=="none"&&!on&&!Q&&!W)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,S),this[PENDING_UPDATE]=null):updateMethods[Z].call(this,S)}catch(dn){throw this[IN_MAIN_PROCESS_KEY]=!1,dn}if(en?Ct={type:z.event||D,escapeConnect:O,batch:tn}:Ct=tn[0],this[IN_MAIN_PROCESS_KEY]=!1,!T){var gn=this._messageCenter;if(gn.trigger(Ct.type,Ct),Q){var In={type:"selectchanged",escapeConnect:O,selected:getAllSelectedIndices(R),isFromClick:S.isFromClick||!1,fromAction:S.type,fromActionPayload:S};gn.trigger(In.type,In)}}},flushPendingActions=function(S){for(var T=this._pendingActions;T.length;){var A=T.shift();doDispatchAction.call(this,A,S)}},triggerUpdatedEvent=function(S){!S&&this.trigger("updated")},bindRenderedEvent=function(S,T){S.on("rendered",function(A){T.trigger("rendered",A),S.animation.isFinished()&&!T[PENDING_UPDATE]&&!T._scheduler.unfinished&&!T._pendingActions.length&&T.trigger("finished")})},bindMouseEvent=function(S,T){S.on("mouseover",function(A){var R=A.target,D=findEventDispatcher(R,isHighDownDispatcher);D&&(handleGlobalMouseOverForHighDown(D,A,T._api),markStatusToUpdate(T))}).on("mouseout",function(A){var R=A.target,D=findEventDispatcher(R,isHighDownDispatcher);D&&(handleGlobalMouseOutForHighDown(D,A,T._api),markStatusToUpdate(T))}).on("click",function(A){var R=A.target,D=findEventDispatcher(R,function(z){return getECData(z).dataIndex!=null},!0);if(D){var O=D.selected?"unselect":"select",F=getECData(D);T._api.dispatchAction({type:O,dataType:F.dataType,dataIndexInside:F.dataIndex,seriesIndex:F.seriesIndex,isFromClick:!0})}})};function a(S){S.clearColorPalette(),S.eachSeries(function(T){T.clearColorPalette()})}function s(S){var T=[],A=[],R=!1;if(S.eachComponent(function(z,j){var Z=j.get("zlevel")||0,W=j.get("z")||0,J=j.getZLevelKey();R=R||!!J,(z==="series"?A:T).push({zlevel:Z,z:W,idx:j.componentIndex,type:z,key:J})}),R){var D=T.concat(A),O,F;sort$2(D,function(z,j){return z.zlevel===j.zlevel?z.z-j.z:z.zlevel-j.zlevel}),each$f(D,function(z){var j=S.getComponent(z.type,z.idx),Z=z.zlevel,W=z.key;O!=null&&(Z=Math.max(O,Z)),W?(Z===O&&W!==F&&Z++,F=W):F&&(Z===O&&Z++,F=""),O=Z,j.setZLevel(Z)})}}render=function(S,T,A,R,D){s(T),renderComponents(S,T,A,R,D),each$f(S._chartsViews,function(O){O.__alive=!1}),renderSeries(S,T,A,R,D),each$f(S._chartsViews,function(O){O.__alive||O.remove(T,A)})},renderComponents=function(S,T,A,R,D,O){each$f(O||S._componentsViews,function(F){var z=F.__model;x(z,F),F.render(z,T,A,R),p(z,F),_(z,F)})},renderSeries=function(S,T,A,R,D,O){var F=S._scheduler;D=extend(D||{},{updatedSeries:T.getSeries()}),lifecycle.trigger("series:beforeupdate",T,A,D);var z=!1;T.eachSeries(function(j){var Z=S._chartsMap[j.__viewId];Z.__alive=!0;var W=Z.renderTask;F.updatePayload(W,R),x(j,Z),O&&O.get(j.uid)&&W.dirty(),W.perform(F.getPerformArgs(W))&&(z=!0),Z.group.silent=!!j.get("silent"),c(j,Z),updateSeriesElementSelection(j)}),F.unfinished=z||F.unfinished,lifecycle.trigger("series:layoutlabels",T,A,D),lifecycle.trigger("series:transition",T,A,D),T.eachSeries(function(j){var Z=S._chartsMap[j.__viewId];p(j,Z),_(j,Z)}),u(S,T),lifecycle.trigger("series:afterupdate",T,A,D)},markStatusToUpdate=function(S){S[STATUS_NEEDS_UPDATE_KEY]=!0,S.getZr().wakeUp()},applyChangedStates=function(S){S[STATUS_NEEDS_UPDATE_KEY]&&(S.getZr().storage.traverse(function(T){isElementRemoved(T)||l(T)}),S[STATUS_NEEDS_UPDATE_KEY]=!1)};function l(S){for(var T=[],A=S.currentStates,R=0;R<A.length;R++){var D=A[R];D==="emphasis"||D==="blur"||D==="select"||T.push(D)}S.selected&&S.states.select&&T.push("select"),S.hoverState===HOVER_STATE_EMPHASIS&&S.states.emphasis?T.push("emphasis"):S.hoverState===HOVER_STATE_BLUR&&S.states.blur&&T.push("blur"),S.useStates(T)}function u(S,T){var A=S._zr,R=A.storage,D=0;R.traverse(function(O){O.isGroup||D++}),D>T.get("hoverLayerThreshold")&&!env.node&&!env.worker&&T.eachSeries(function(O){if(!O.preventUsingHoverLayer){var F=S._chartsMap[O.__viewId];F.__alive&&F.eachRendered(function(z){z.states.emphasis&&(z.states.emphasis.hoverLayer=!0)})}})}function c(S,T){var A=S.get("blendMode")||null;T.eachRendered(function(R){R.isGroup||(R.style.blend=A)})}function p(S,T){if(!S.preventAutoZ){var A=S.get("z")||0,R=S.get("zlevel")||0;T.eachRendered(function(D){return d(D,A,R,-1/0),!0})}}function d(S,T,A,R){var D=S.getTextContent(),O=S.getTextGuideLine(),F=S.isGroup;if(F)for(var z=S.childrenRef(),j=0;j<z.length;j++)R=Math.max(d(z[j],T,A,R),R);else S.z=T,S.zlevel=A,R=Math.max(S.z2,R);if(D&&(D.z=T,D.zlevel=A,isFinite(R)&&(D.z2=R+2)),O){var Z=S.textGuideLineConfig;O.z=T,O.zlevel=A,isFinite(R)&&(O.z2=R+(Z&&Z.showAbove?1:-1))}return R}function x(S,T){T.eachRendered(function(A){if(!isElementRemoved(A)){var R=A.getTextContent(),D=A.getTextGuideLine();A.stateTransition&&(A.stateTransition=null),R&&R.stateTransition&&(R.stateTransition=null),D&&D.stateTransition&&(D.stateTransition=null),A.hasState()?(A.prevStates=A.currentStates,A.clearStates()):A.prevStates&&(A.prevStates=null)}})}function _(S,T){var A=S.getModel("stateAnimation"),R=S.isAnimationEnabled(),D=A.get("duration"),O=D>0?{duration:D,delay:A.get("delay"),easing:A.get("easing")}:null;T.eachRendered(function(F){if(F.states&&F.states.emphasis){if(isElementRemoved(F))return;if(F instanceof Path&&savePathStates(F),F.__dirty){var z=F.prevStates;z&&F.useStates(z)}if(R){F.stateTransition=O;var j=F.getTextContent(),Z=F.getTextGuideLine();j&&(j.stateTransition=O),Z&&(Z.stateTransition=O)}F.__dirty&&l(F)}})}createExtensionAPI=function(S){return new(function(T){__extends(A,T);function A(){return T!==null&&T.apply(this,arguments)||this}return A.prototype.getCoordinateSystems=function(){return S._coordSysMgr.getCoordinateSystems()},A.prototype.getComponentByElement=function(R){for(;R;){var D=R.__ecComponentInfo;if(D!=null)return S._model.getComponent(D.mainType,D.index);R=R.parent}},A.prototype.enterEmphasis=function(R,D){enterEmphasis(R,D),markStatusToUpdate(S)},A.prototype.leaveEmphasis=function(R,D){leaveEmphasis(R,D),markStatusToUpdate(S)},A.prototype.enterBlur=function(R){enterBlur(R),markStatusToUpdate(S)},A.prototype.leaveBlur=function(R){leaveBlur(R),markStatusToUpdate(S)},A.prototype.enterSelect=function(R){enterSelect(R),markStatusToUpdate(S)},A.prototype.leaveSelect=function(R){leaveSelect(R),markStatusToUpdate(S)},A.prototype.getModel=function(){return S.getModel()},A.prototype.getViewOfComponentModel=function(R){return S.getViewOfComponentModel(R)},A.prototype.getViewOfSeriesModel=function(R){return S.getViewOfSeriesModel(R)},A}(ExtensionAPI))(S)},enableConnect=function(S){function T(A,R){for(var D=0;D<A.length;D++){var O=A[D];O[CONNECT_STATUS_KEY]=R}}each$f(eventActionMap,function(A,R){S._messageCenter.on(R,function(D){if(connectedGroups[S.group]&&S[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(D&&D.escapeConnect)return;var O=S.makeActionFromEvent(D),F=[];each$f(instances,function(z){z!==S&&z.group===S.group&&F.push(z)}),T(F,CONNECT_STATUS_PENDING),each$f(F,function(z){z[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&z.dispatchAction(O)}),T(F,CONNECT_STATUS_UPDATED)}})})}}(),n}(Eventful),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(t,n,a){var s=this;function l(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];n&&n.apply&&n.apply(this,u),s.off(t,l)}this.on.call(this,t,l,a)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(t){}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,groupIdBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(t,n,a){var s=!(a&&a.ssr);if(s){var l=getInstanceByDom(t);if(l)return l}var u=new ECharts(t,n,a);return u.id="ec_"+idBase++,instances[u.id]=u,s&&setAttribute(t,DOM_ATTRIBUTE_KEY,u.id),enableConnect(u),lifecycle.trigger("afterinit",u),u}function connect(t){if(isArray$1(t)){var n=t;t=null,each$f(n,function(a){a.group!=null&&(t=a.group)}),t=t||"g_"+groupIdBase++,each$f(n,function(a){a.group=t})}return connectedGroups[t]=!0,t}function disconnect(t){connectedGroups[t]=!1}var disConnect=disconnect;function dispose(t){isString$1(t)?t=instances[t]:t instanceof ECharts||(t=getInstanceByDom(t)),t instanceof ECharts&&!t.isDisposed()&&t.dispose()}function getInstanceByDom(t){return instances[getAttribute(t,DOM_ATTRIBUTE_KEY)]}function getInstanceById(t){return instances[t]}function registerTheme(t,n){themeStorage[t]=n}function registerPreprocessor(t){indexOf(optionPreprocessorFuncs,t)<0&&optionPreprocessorFuncs.push(t)}function registerProcessor(t,n){normalizeRegister(dataProcessorFuncs,t,n,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(t){registerUpdateLifecycle("afterinit",t)}function registerPostUpdate(t){registerUpdateLifecycle("afterupdate",t)}function registerUpdateLifecycle(t,n){lifecycle.on(t,n)}function registerAction(t,n,a){isFunction$1(n)&&(a=n,n="");var s=isObject$3(t)?t.type:[t,t={event:n}][0];t.event=(t.event||s).toLowerCase(),n=t.event,!eventActionMap[n]&&(assert(ACTION_REG.test(s)&&ACTION_REG.test(n)),actions[s]||(actions[s]={action:a,actionInfo:t}),eventActionMap[n]=s)}function registerCoordinateSystem(t,n){CoordinateSystemManager.register(t,n)}function getCoordinateSystemDimensions(t){var n=CoordinateSystemManager.get(t);if(n)return n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice()}function registerLayout(t,n){normalizeRegister(visualFuncs,t,n,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(t,n){normalizeRegister(visualFuncs,t,n,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(t,n,a,s,l){if((isFunction$1(n)||isObject$3(n))&&(a=n,n=s),!(indexOf(registeredTasks,a)>=0)){registeredTasks.push(a);var u=Scheduler.wrapStageHandler(a,l);u.__prio=n,u.__raw=a,t.push(u)}}function registerLoading(t,n){loadingEffects[t]=n}function setCanvasCreator(t){setPlatformAPI({createCanvas:t})}function registerMap$1(t,n,a){var s=getImpl("registerMap");s&&s(t,n,a)}function getMap(t){var n=getImpl("getMap");return n&&n(t)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack$1);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop);registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop);registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop);registerTheme("light",lightTheme);registerTheme("dark",theme);var dataTool={},extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel,ComponentView,SeriesModel,ChartView,registerComponentModel:function(t){ComponentModel.registerClass(t)},registerComponentView:function(t){ComponentView.registerClass(t)},registerSeriesModel:function(t){SeriesModel.registerClass(t)},registerChartView:function(t){ChartView.registerClass(t)},registerSubTypeDefaulter:function(t,n){ComponentModel.registerSubTypeDefaulter(t,n)},registerPainter:function(t,n){registerPainter(t,n)}};function use(t){if(isArray$1(t)){each$f(t,function(n){use(n)});return}indexOf(extensions,t)>=0||(extensions.push(t),isFunction$1(t)&&(t={install:t}),t.install(extensionRegisters))}function dataIndexMapValueLength(t){return t==null?0:t.length||1}function defaultKeyGetter(t){return t}var DataDiffer=function(){function t(n,a,s,l,u,c){this._old=n,this._new=a,this._oldKeyGetter=s||defaultKeyGetter,this._newKeyGetter=l||defaultKeyGetter,this.context=u,this._diffModeMultiple=c==="multiple"}return t.prototype.add=function(n){return this._add=n,this},t.prototype.update=function(n){return this._update=n,this},t.prototype.updateManyToOne=function(n){return this._updateManyToOne=n,this},t.prototype.updateOneToMany=function(n){return this._updateOneToMany=n,this},t.prototype.updateManyToMany=function(n){return this._updateManyToMany=n,this},t.prototype.remove=function(n){return this._remove=n,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var n=this._old,a=this._new,s={},l=new Array(n.length),u=new Array(a.length);this._initIndexMap(n,null,l,"_oldKeyGetter"),this._initIndexMap(a,s,u,"_newKeyGetter");for(var c=0;c<n.length;c++){var p=l[c],d=s[p],x=dataIndexMapValueLength(d);if(x>1){var _=d.shift();d.length===1&&(s[p]=d[0]),this._update&&this._update(_,c)}else x===1?(s[p]=null,this._update&&this._update(d,c)):this._remove&&this._remove(c)}this._performRestAdd(u,s)},t.prototype._executeMultiple=function(){var n=this._old,a=this._new,s={},l={},u=[],c=[];this._initIndexMap(n,s,u,"_oldKeyGetter"),this._initIndexMap(a,l,c,"_newKeyGetter");for(var p=0;p<u.length;p++){var d=u[p],x=s[d],_=l[d],S=dataIndexMapValueLength(x),T=dataIndexMapValueLength(_);if(S>1&&T===1)this._updateManyToOne&&this._updateManyToOne(_,x),l[d]=null;else if(S===1&&T>1)this._updateOneToMany&&this._updateOneToMany(_,x),l[d]=null;else if(S===1&&T===1)this._update&&this._update(_,x),l[d]=null;else if(S>1&&T>1)this._updateManyToMany&&this._updateManyToMany(_,x),l[d]=null;else if(S>1)for(var A=0;A<S;A++)this._remove&&this._remove(x[A]);else this._remove&&this._remove(x)}this._performRestAdd(c,l)},t.prototype._performRestAdd=function(n,a){for(var s=0;s<n.length;s++){var l=n[s],u=a[l],c=dataIndexMapValueLength(u);if(c>1)for(var p=0;p<c;p++)this._add&&this._add(u[p]);else c===1&&this._add&&this._add(u);a[l]=null}},t.prototype._initIndexMap=function(n,a,s,l){for(var u=this._diffModeMultiple,c=0;c<n.length;c++){var p="_ec_"+this[l](n[c],c);if(u||(s[c]=p),!!a){var d=a[p],x=dataIndexMapValueLength(d);x===0?(a[p]=c,u&&s.push(p)):x===1?a[p]=[d,c]:d.push(c)}}},t}(),DimensionUserOuput=function(){function t(n,a){this._encode=n,this._schema=a}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function summarizeDimensions(t,n){var a={},s=a.encode={},l=createHashMap(),u=[],c=[],p={};each$f(t.dimensions,function(T){var A=t.getDimensionInfo(T),R=A.coordDim;if(R){var D=A.coordDimIndex;getOrCreateEncodeArr(s,R)[D]=T,A.isExtraCoord||(l.set(R,1),mayLabelDimType(A.type)&&(u[0]=T),getOrCreateEncodeArr(p,R)[D]=t.getDimensionIndex(A.name)),A.defaultTooltip&&c.push(T)}VISUAL_DIMENSIONS.each(function(O,F){var z=getOrCreateEncodeArr(s,F),j=A.otherDims[F];j!=null&&j!==!1&&(z[j]=A.name)})});var d=[],x={};l.each(function(T,A){var R=s[A];x[A]=R[0],d=d.concat(R)}),a.dataDimsOnCoord=d,a.dataDimIndicesOnCoord=map$1(d,function(T){return t.getDimensionInfo(T).storeDimIndex}),a.encodeFirstDimNotExtra=x;var _=s.label;_&&_.length&&(u=_.slice());var S=s.tooltip;return S&&S.length?c=S.slice():c.length||(c=u.slice()),s.defaultedLabel=u,s.defaultedTooltip=c,a.userOutput=new DimensionUserOuput(p,n),a}function getOrCreateEncodeArr(t,n){return t.hasOwnProperty(n)||(t[n]=[]),t[n]}function getDimensionTypeByAxis(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function mayLabelDimType(t){return!(t==="ordinal"||t==="time")}var SeriesDimensionDefine=function(){function t(n){this.otherDims={},n!=null&&extend(this,n)}return t}(),inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function t(n){this.dimensions=n.dimensions,this._dimOmitted=n.dimensionOmitted,this.source=n.source,this._fullDimCount=n.fullDimensionCount,this._updateDimOmitted(n.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(n){this._dimOmitted=n,n&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},t.prototype.getSourceDimensionIndex=function(n){return retrieve2(this._dimNameMap.get(n),-1)},t.prototype.getSourceDimension=function(n){var a=this.source.dimensionsDefine;if(a)return a[n]},t.prototype.makeStoreSchema=function(){for(var n=this._fullDimCount,a=shouldRetrieveDataByName(this.source),s=!shouldOmitUnusedDimensions(n),l="",u=[],c=0,p=0;c<n;c++){var d=void 0,x=void 0,_=void 0,S=this.dimensions[p];if(S&&S.storeDimIndex===c)d=a?S.name:null,x=S.type,_=S.ordinalMeta,p++;else{var T=this.getSourceDimension(c);T&&(d=a?T.name:null,x=T.type)}u.push({property:d,type:x,ordinalMeta:_}),a&&d!=null&&(!S||!S.isCalculationCoord)&&(l+=s?d.replace(/\`/g,"`1").replace(/\$/g,"`2"):d),l+="$",l+=dimTypeShort[x]||"f",_&&(l+=_.uid),l+="$"}var A=this.source,R=[A.seriesLayoutBy,A.startIndex,l].join("$$");return{dimensions:u,hash:R}},t.prototype.makeOutputDimensionNames=function(){for(var n=[],a=0,s=0;a<this._fullDimCount;a++){var l=void 0,u=this.dimensions[s];if(u&&u.storeDimIndex===a)u.isCalculationCoord||(l=u.name),s++;else{var c=this.getSourceDimension(a);c&&(l=c.name)}n.push(l)}return n},t.prototype.appendCalculationDimension=function(n){this.dimensions.push(n),n.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function isSeriesDataSchema(t){return t instanceof SeriesDataSchema}function createDimNameMap(t){for(var n=createHashMap(),a=0;a<(t||[]).length;a++){var s=t[a],l=isObject$3(s)?s.name:s;l!=null&&n.get(l)==null&&n.set(l,a)}return n}function ensureSourceDimNameMap(t){var n=inner$h(t);return n.dimNameMap||(n.dimNameMap=createDimNameMap(t.dimensionsDefine))}function shouldOmitUnusedDimensions(t){return t>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function t(n,a){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var s,l=!1;isSeriesDataSchema(n)?(s=n.dimensions,this._dimOmitted=n.isDimensionOmitted(),this._schema=n):(l=!0,s=n),s=s||["x","y"];for(var u={},c=[],p={},d=!1,x={},_=0;_<s.length;_++){var S=s[_],T=isString$1(S)?new SeriesDimensionDefine({name:S}):S instanceof SeriesDimensionDefine?S:new SeriesDimensionDefine(S),A=T.name;T.type=T.type||"float",T.coordDim||(T.coordDim=A,T.coordDimIndex=0);var R=T.otherDims=T.otherDims||{};c.push(A),u[A]=T,x[A]!=null&&(d=!0),T.createInvertedIndices&&(p[A]=[]),R.itemName===0&&(this._nameDimIdx=_),R.itemId===0&&(this._idDimIdx=_),l&&(T.storeDimIndex=_)}if(this.dimensions=c,this._dimInfos=u,this._initGetDimensionInfo(d),this.hostModel=a,this._invertedIndicesMap=p,this._dimOmitted){var D=this._dimIdxToName=createHashMap();each$f(c,function(O){D.set(u[O].storeDimIndex,O)})}}return t.prototype.getDimension=function(n){var a=this._recognizeDimIndex(n);if(a==null)return n;if(a=n,!this._dimOmitted)return this.dimensions[a];var s=this._dimIdxToName.get(a);if(s!=null)return s;var l=this._schema.getSourceDimension(a);if(l)return l.name},t.prototype.getDimensionIndex=function(n){var a=this._recognizeDimIndex(n);if(a!=null)return a;if(n==null)return-1;var s=this._getDimInfo(n);return s?s.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(n):-1},t.prototype._recognizeDimIndex=function(n){if(isNumber(n)||n!=null&&!isNaN(n)&&!this._getDimInfo(n)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(n)<0))return+n},t.prototype._getStoreDimIndex=function(n){var a=this.getDimensionIndex(n);return a},t.prototype.getDimensionInfo=function(n){return this._getDimInfo(this.getDimension(n))},t.prototype._initGetDimensionInfo=function(n){var a=this._dimInfos;this._getDimInfo=n?function(s){return a.hasOwnProperty(s)?a[s]:void 0}:function(s){return a[s]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(n,a){var s=this._dimSummary;if(a==null)return s.encodeFirstDimNotExtra[n];var l=s.encode[n];return l?l[a]:null},t.prototype.mapDimensionsAll=function(n){var a=this._dimSummary,s=a.encode[n];return(s||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(n,a,s){var l=this,u;if(n instanceof DataStore&&(u=n),!u){var c=this.dimensions,p=isSourceInstance(n)||isArrayLike(n)?new DefaultDataProvider(n,c.length):n;u=new DataStore;var d=map(c,function(x){return{type:l._dimInfos[x].type,property:x}});u.initData(p,d,s)}this._store=u,this._nameList=(a||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,u.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(n){var a=this._store.appendData(n);this._doInit(a[0],a[1])},t.prototype.appendValues=function(n,a){var s=this._store.appendValues(n,a&&a.length),l=s.start,u=s.end,c=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),a)for(var p=l;p<u;p++){var d=p-l;this._nameList[p]=a[d],c&&makeIdFromName(this,p)}},t.prototype._updateOrdinalMeta=function(){for(var n=this._store,a=this.dimensions,s=0;s<a.length;s++){var l=this._dimInfos[a[s]];l.ordinalMeta&&n.collectOrdinalMeta(l.storeDimIndex,l.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var n=this._store.getProvider();return this._idDimIdx==null&&n.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!n.fillStorage},t.prototype._doInit=function(n,a){if(!(n>=a)){var s=this._store,l=s.getProvider();this._updateOrdinalMeta();var u=this._nameList,c=this._idList,p=l.getSource().sourceFormat,d=p===SOURCE_FORMAT_ORIGINAL;if(d&&!l.pure)for(var x=[],_=n;_<a;_++){var S=l.getItem(_,x);if(!this.hasItemOption&&isDataItemOption(S)&&(this.hasItemOption=!0),S){var T=S.name;u[_]==null&&T!=null&&(u[_]=convertOptionIdName(T,null));var A=S.id;c[_]==null&&A!=null&&(c[_]=convertOptionIdName(A,null))}}if(this._shouldMakeIdFromName())for(var _=n;_<a;_++)makeIdFromName(this,_);prepareInvertedIndex(this)}},t.prototype.getApproximateExtent=function(n){return this._approximateExtent[n]||this._store.getDataExtent(this._getStoreDimIndex(n))},t.prototype.setApproximateExtent=function(n,a){a=this.getDimension(a),this._approximateExtent[a]=n.slice()},t.prototype.getCalculationInfo=function(n){return this._calculationInfo[n]},t.prototype.setCalculationInfo=function(n,a){isObject$1(n)?extend(this._calculationInfo,n):this._calculationInfo[n]=a},t.prototype.getName=function(n){var a=this.getRawIndex(n),s=this._nameList[a];return s==null&&this._nameDimIdx!=null&&(s=getIdNameFromStore(this,this._nameDimIdx,a)),s==null&&(s=""),s},t.prototype._getCategory=function(n,a){var s=this._store.get(n,a),l=this._store.getOrdinalMeta(n);return l?l.categories[s]:s},t.prototype.getId=function(n){return getId(this,this.getRawIndex(n))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(n,a){var s=this._store,l=this._dimInfos[n];if(l)return s.get(l.storeDimIndex,a)},t.prototype.getByRawIndex=function(n,a){var s=this._store,l=this._dimInfos[n];if(l)return s.getByRawIndex(l.storeDimIndex,a)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(n){return this._store.getDataExtent(this._getStoreDimIndex(n))},t.prototype.getSum=function(n){return this._store.getSum(this._getStoreDimIndex(n))},t.prototype.getMedian=function(n){return this._store.getMedian(this._getStoreDimIndex(n))},t.prototype.getValues=function(n,a){var s=this,l=this._store;return isArray$1(n)?l.getValues(map(n,function(u){return s._getStoreDimIndex(u)}),a):l.getValues(n)},t.prototype.hasValue=function(n){for(var a=this._dimSummary.dataDimIndicesOnCoord,s=0,l=a.length;s<l;s++)if(isNaN(this._store.get(a[s],n)))return!1;return!0},t.prototype.indexOfName=function(n){for(var a=0,s=this._store.count();a<s;a++)if(this.getName(a)===n)return a;return-1},t.prototype.getRawIndex=function(n){return this._store.getRawIndex(n)},t.prototype.indexOfRawIndex=function(n){return this._store.indexOfRawIndex(n)},t.prototype.rawIndexOf=function(n,a){var s=n&&this._invertedIndicesMap[n],l=s&&s[a];return l==null||isNaN(l)?INDEX_NOT_FOUND:l},t.prototype.indicesOfNearest=function(n,a,s){return this._store.indicesOfNearest(this._getStoreDimIndex(n),a,s)},t.prototype.each=function(n,a,s){isFunction$1(n)&&(s=a,a=n,n=[]);var l=s||this,u=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.each(u,l?bind$1(a,l):a)},t.prototype.filterSelf=function(n,a,s){isFunction$1(n)&&(s=a,a=n,n=[]);var l=s||this,u=map(normalizeDimensions(n),this._getStoreDimIndex,this);return this._store=this._store.filter(u,l?bind$1(a,l):a),this},t.prototype.selectRange=function(n){var a=this,s={},l=keys(n);return each$f(l,function(u){var c=a._getStoreDimIndex(u);s[c]=n[u]}),this._store=this._store.selectRange(s),this},t.prototype.mapArray=function(n,a,s){isFunction$1(n)&&(s=a,a=n,n=[]),s=s||this;var l=[];return this.each(n,function(){l.push(a&&a.apply(this,arguments))},s),l},t.prototype.map=function(n,a,s,l){var u=s||l||this,c=map(normalizeDimensions(n),this._getStoreDimIndex,this),p=cloneListForMapAndSample(this);return p._store=this._store.map(c,u?bind$1(a,u):a),p},t.prototype.modify=function(n,a,s,l){var u=s||l||this,c=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.modify(c,u?bind$1(a,u):a)},t.prototype.downSample=function(n,a,s,l){var u=cloneListForMapAndSample(this);return u._store=this._store.downSample(this._getStoreDimIndex(n),a,s,l),u},t.prototype.minmaxDownSample=function(n,a){var s=cloneListForMapAndSample(this);return s._store=this._store.minmaxDownSample(this._getStoreDimIndex(n),a),s},t.prototype.lttbDownSample=function(n,a){var s=cloneListForMapAndSample(this);return s._store=this._store.lttbDownSample(this._getStoreDimIndex(n),a),s},t.prototype.getRawDataItem=function(n){return this._store.getRawDataItem(n)},t.prototype.getItemModel=function(n){var a=this.hostModel,s=this.getRawDataItem(n);return new Model(s,a,a&&a.ecModel)},t.prototype.diff=function(n){var a=this;return new DataDiffer(n?n.getStore().getIndices():[],this.getStore().getIndices(),function(s){return getId(n,s)},function(s){return getId(a,s)})},t.prototype.getVisual=function(n){var a=this._visual;return a&&a[n]},t.prototype.setVisual=function(n,a){this._visual=this._visual||{},isObject$1(n)?extend(this._visual,n):this._visual[n]=a},t.prototype.getItemVisual=function(n,a){var s=this._itemVisuals[n],l=s&&s[a];return l??this.getVisual(a)},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(n,a){var s=this._itemVisuals,l=s[n];l||(l=s[n]={});var u=l[a];return u==null&&(u=this.getVisual(a),isArray$1(u)?u=u.slice():isObject$1(u)&&(u=extend({},u)),l[a]=u),u},t.prototype.setItemVisual=function(n,a,s){var l=this._itemVisuals[n]||{};this._itemVisuals[n]=l,isObject$1(a)?extend(l,a):l[a]=s},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(n,a){isObject$1(n)?extend(this._layout,n):this._layout[n]=a},t.prototype.getLayout=function(n){return this._layout[n]},t.prototype.getItemLayout=function(n){return this._itemLayouts[n]},t.prototype.setItemLayout=function(n,a,s){this._itemLayouts[n]=s?extend(this._itemLayouts[n]||{},a):a},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(n,a){var s=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(s,this.dataType,n,a),this._graphicEls[n]=a},t.prototype.getItemGraphicEl=function(n){return this._graphicEls[n]},t.prototype.eachItemGraphicEl=function(n,a){each$f(this._graphicEls,function(s,l){s&&n&&n.call(a,s,l)})},t.prototype.cloneShallow=function(n){return n||(n=new t(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(n,this),n._store=this._store,n},t.prototype.wrapMethod=function(n,a){var s=this[n];isFunction$1(s)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(n),this[n]=function(){var l=s.apply(this,arguments);return a.apply(this,[l].concat(slice(arguments)))})},t.internalField=function(){prepareInvertedIndex=function(n){var a=n._invertedIndicesMap;each$f(a,function(s,l){var u=n._dimInfos[l],c=u.ordinalMeta,p=n._store;if(c){s=a[l]=new CtorInt32Array(c.categories.length);for(var d=0;d<s.length;d++)s[d]=INDEX_NOT_FOUND;for(var d=0;d<p.count();d++)s[p.get(u.storeDimIndex,d)]=d}})},getIdNameFromStore=function(n,a,s){return convertOptionIdName(n._getCategory(a,s),null)},getId=function(n,a){var s=n._idList[a];return s==null&&n._idDimIdx!=null&&(s=getIdNameFromStore(n,n._idDimIdx,a)),s==null&&(s=ID_PREFIX+a),s},normalizeDimensions=function(n){return isArray$1(n)||(n=n!=null?[n]:[]),n},cloneListForMapAndSample=function(n){var a=new t(n._schema?n._schema:map(n.dimensions,n._getDimInfo,n),n.hostModel);return transferProperties(a,n),a},transferProperties=function(n,a){each$f(TRANSFERABLE_PROPERTIES.concat(a.__wrappedMethods||[]),function(s){a.hasOwnProperty(s)&&(n[s]=a[s])}),n.__wrappedMethods=a.__wrappedMethods,each$f(CLONE_PROPERTIES,function(s){n[s]=clone$4(a[s])}),n._calculationInfo=extend({},a._calculationInfo)},makeIdFromName=function(n,a){var s=n._nameList,l=n._idList,u=n._nameDimIdx,c=n._idDimIdx,p=s[a],d=l[a];if(p==null&&u!=null&&(s[a]=p=getIdNameFromStore(n,u,a)),d==null&&c!=null&&(l[a]=d=getIdNameFromStore(n,c,a)),d==null&&p!=null){var x=n._nameRepeatCount,_=x[p]=(x[p]||0)+1;d=p,_>1&&(d+="__ec__"+_),l[a]=d}}}(),t}();function createDimensions(t,n){return prepareSeriesDataSchema(t,n).dimensions}function prepareSeriesDataSchema(t,n){isSourceInstance(t)||(t=createSourceFromSeriesDataOption(t)),n=n||{};var a=n.coordDimensions||[],s=n.dimensionsDefine||t.dimensionsDefine||[],l=createHashMap(),u=[],c=getDimCount(t,a,s,n.dimensionsCount),p=n.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(c),d=s===t.dimensionsDefine,x=d?ensureSourceDimNameMap(t):createDimNameMap(s),_=n.encodeDefine;!_&&n.encodeDefaulter&&(_=n.encodeDefaulter(t,c));for(var S=createHashMap(_),T=new CtorInt32Array$1(c),A=0;A<T.length;A++)T[A]=-1;function R(Ct){var Q=T[Ct];if(Q<0){var on=s[Ct],gn=isObject$3(on)?on:{name:on},In=new SeriesDimensionDefine,dn=gn.name;dn!=null&&x.get(dn)!=null&&(In.name=In.displayName=dn),gn.type!=null&&(In.type=gn.type),gn.displayName!=null&&(In.displayName=gn.displayName);var ix=u.length;return T[Ct]=ix,In.storeDimIndex=Ct,u.push(In),In}return u[Q]}if(!p)for(var A=0;A<c;A++)R(A);S.each(function(Ct,Q){var on=normalizeToArray(Ct).slice();if(on.length===1&&!isString$1(on[0])&&on[0]<0){S.set(Q,!1);return}var gn=S.set(Q,[]);each$f(on,function(In,dn){var ix=isString$1(In)?x.get(In):In;ix!=null&&ix<c&&(gn[dn]=ix,O(R(ix),Q,dn))})});var D=0;each$f(a,function(Ct){var Q,on,gn,In;if(isString$1(Ct))Q=Ct,In={};else{In=Ct,Q=In.name;var dn=In.ordinalMeta;In.ordinalMeta=null,In=extend({},In),In.ordinalMeta=dn,on=In.dimsDef,gn=In.otherDims,In.name=In.coordDim=In.coordDimIndex=In.dimsDef=In.otherDims=null}var ix=S.get(Q);if(ix!==!1){if(ix=normalizeToArray(ix),!ix.length)for(var Cn=0;Cn<(on&&on.length||1);Cn++){for(;D<c&&R(D).coordDim!=null;)D++;D<c&&ix.push(D++)}each$f(ix,function(ax,sx){var lx=R(ax);if(d&&In.type!=null&&(lx.type=In.type),O(defaults(lx,In),Q,sx),lx.name==null&&on){var ox=on[sx];!isObject$3(ox)&&(ox={name:ox}),lx.name=lx.displayName=ox.name,lx.defaultTooltip=ox.defaultTooltip}gn&&defaults(lx.otherDims,gn)})}});function O(Ct,Q,on){VISUAL_DIMENSIONS.get(Q)!=null?Ct.otherDims[Q]=on:(Ct.coordDim=Q,Ct.coordDimIndex=on,l.set(Q,!0))}var F=n.generateCoord,z=n.generateCoordCount,j=z!=null;z=F?z||1:0;var Z=F||"value";function W(Ct){Ct.name==null&&(Ct.name=Ct.coordDim)}if(p)each$f(u,function(Ct){W(Ct)}),u.sort(function(Ct,Q){return Ct.storeDimIndex-Q.storeDimIndex});else for(var J=0;J<c;J++){var en=R(J),tn=en.coordDim;tn==null&&(en.coordDim=genCoordDimName(Z,l,j),en.coordDimIndex=0,(!F||z<=0)&&(en.isExtraCoord=!0),z--),W(en),en.type==null&&(guessOrdinal(t,J)===BE_ORDINAL.Must||en.isExtraCoord&&(en.otherDims.itemName!=null||en.otherDims.seriesName!=null))&&(en.type="ordinal")}return removeDuplication(u),new SeriesDataSchema({source:t,dimensions:u,fullDimensionCount:c,dimensionOmitted:p})}function removeDuplication(t){for(var n=createHashMap(),a=0;a<t.length;a++){var s=t[a],l=s.name,u=n.get(l)||0;u>0&&(s.name=l+(u-1)),u++,n.set(l,u)}}function getDimCount(t,n,a,s){var l=Math.max(t.dimensionsDetectedCount||1,n.length,a.length,s||0);return each$f(n,function(u){var c;isObject$3(u)&&(c=u.dimsDef)&&(l=Math.max(l,c.length))}),l}function genCoordDimName(t,n,a){if(a||n.hasKey(t)){for(var s=0;n.hasKey(t+s);)s++;t+=s}return n.set(t,!0),t}var CoordSysInfo=function(){function t(n){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=n}return t}();function getCoordSysInfoBySeries(t){var n=t.get("coordinateSystem"),a=new CoordSysInfo(n),s=fetchers[n];if(s)return s(t,a,a.axisMap,a.categoryAxisMap),a}var fetchers={cartesian2d:function(t,n,a,s){var l=t.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],u=t.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];n.coordSysDims=["x","y"],a.set("x",l),a.set("y",u),isCategory(l)&&(s.set("x",l),n.firstCategoryDimIndex=0),isCategory(u)&&(s.set("y",u),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},singleAxis:function(t,n,a,s){var l=t.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];n.coordSysDims=["single"],a.set("single",l),isCategory(l)&&(s.set("single",l),n.firstCategoryDimIndex=0)},polar:function(t,n,a,s){var l=t.getReferringComponents("polar",SINGLE_REFERRING).models[0],u=l.findAxisModel("radiusAxis"),c=l.findAxisModel("angleAxis");n.coordSysDims=["radius","angle"],a.set("radius",u),a.set("angle",c),isCategory(u)&&(s.set("radius",u),n.firstCategoryDimIndex=0),isCategory(c)&&(s.set("angle",c),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},geo:function(t,n,a,s){n.coordSysDims=["lng","lat"]},parallel:function(t,n,a,s){var l=t.ecModel,u=l.getComponent("parallel",t.get("parallelIndex")),c=n.coordSysDims=u.dimensions.slice();each$f(u.parallelAxisIndex,function(p,d){var x=l.getComponent("parallelAxis",p),_=c[d];a.set(_,x),isCategory(x)&&(s.set(_,x),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=d))})}};function isCategory(t){return t.get("type")==="category"}function enableDataStack(t,n,a){a=a||{};var s=a.byIndex,l=a.stackedCoordDimension,u,c,p;isLegacyDimensionsInput(n)?u=n:(c=n.schema,u=c.dimensions,p=n.store);var d=!!(t&&t.get("stack")),x,_,S,T;if(each$f(u,function(z,j){isString$1(z)&&(u[j]=z={name:z}),d&&!z.isExtraCoord&&(!s&&!x&&z.ordinalMeta&&(x=z),!_&&z.type!=="ordinal"&&z.type!=="time"&&(!l||l===z.coordDim)&&(_=z))}),_&&!s&&!x&&(s=!0),_){S="__\0ecstackresult_"+t.id,T="__\0ecstackedover_"+t.id,x&&(x.createInvertedIndices=!0);var A=_.coordDim,R=_.type,D=0;each$f(u,function(z){z.coordDim===A&&D++});var O={name:S,coordDim:A,coordDimIndex:D,type:R,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length},F={name:T,coordDim:T,coordDimIndex:D+1,type:R,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length+1};c?(p&&(O.storeDimIndex=p.ensureCalculationDimension(T,R),F.storeDimIndex=p.ensureCalculationDimension(S,R)),c.appendCalculationDimension(O),c.appendCalculationDimension(F)):(u.push(O),u.push(F))}return{stackedDimension:_&&_.name,stackedByDimension:x&&x.name,isStackedByIndex:s,stackedOverDimension:T,stackResultDimension:S}}function isLegacyDimensionsInput(t){return!isSeriesDataSchema(t.schema)}function isDimensionStacked(t,n){return!!n&&n===t.getCalculationInfo("stackedDimension")}function getStackedDimension(t,n){return isDimensionStacked(t,n)?t.getCalculationInfo("stackResultDimension"):n}function getCoordSysDimDefs(t,n){var a=t.get("coordinateSystem"),s=CoordinateSystemManager.get(a),l;return n&&n.coordSysDims&&(l=map$1(n.coordSysDims,function(u){var c={name:u},p=n.axisMap.get(u);if(p){var d=p.get("type");c.type=getDimensionTypeByAxis(d)}return c})),l||(l=s&&(s.getDimensionsInfo?s.getDimensionsInfo():s.dimensions.slice())||["x","y"]),l}function injectOrdinalMeta(t,n,a){var s,l;return a&&each$f(t,function(u,c){var p=u.coordDim,d=a.categoryAxisMap.get(p);d&&(s==null&&(s=c),u.ordinalMeta=d.getOrdinalMeta(),n&&(u.createInvertedIndices=!0)),u.otherDims.itemName!=null&&(l=!0)}),!l&&s!=null&&(t[s].otherDims.itemName=0),s}function createSeriesData(t,n,a){a=a||{};var s=n.getSourceManager(),l,u=!1;t?(u=!0,l=createSourceFromSeriesDataOption(t)):(l=s.getSource(),u=l.sourceFormat===SOURCE_FORMAT_ORIGINAL);var c=getCoordSysInfoBySeries(n),p=getCoordSysDimDefs(n,c),d=a.useEncodeDefaulter,x=isFunction$1(d)?d:d?curry$1(makeSeriesEncodeForAxisCoordSys,p,n):null,_={coordDimensions:p,generateCoord:a.generateCoord,encodeDefine:n.getEncode(),encodeDefaulter:x,canOmitUnusedDimensions:!u},S=prepareSeriesDataSchema(l,_),T=injectOrdinalMeta(S.dimensions,a.createInvertedIndices,c),A=u?null:s.getSharedDataStore(S),R=enableDataStack(n,{schema:S,store:A}),D=new SeriesData(S,n);D.setCalculationInfo(R);var O=T!=null&&isNeedCompleteOrdinalData(l)?function(F,z,j,Z){return Z===T?j:this.defaultDimValueGetter(F,z,j,Z)}:null;return D.hasItemOption=!1,D.initData(u?l:A,null,O),D}function isNeedCompleteOrdinalData(t){if(t.sourceFormat===SOURCE_FORMAT_ORIGINAL){var n=firstDataNotNull(t.data||[]);return!isArray$1(getDataItemValue(n))}}function firstDataNotNull(t){for(var n=0;n<t.length&&t[n]==null;)n++;return t[n]}var Scale=function(){function t(n){this._setting=n||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(n){return this._setting[n]},t.prototype.unionExtent=function(n){var a=this._extent;n[0]<a[0]&&(a[0]=n[0]),n[1]>a[1]&&(a[1]=n[1])},t.prototype.unionExtentFromData=function(n,a){this.unionExtent(n.getApproximateExtent(a))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(n,a){var s=this._extent;isNaN(n)||(s[0]=n),isNaN(a)||(s[1]=a)},t.prototype.isInExtentRange=function(n){return this._extent[0]<=n&&this._extent[1]>=n},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(n){this._isBlank=n},t}();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=function(){function t(n){this.categories=n.categories||[],this._needCollect=n.needCollect,this._deduplication=n.deduplication,this.uid=++uidBase}return t.createByAxisModel=function(n){var a=n.option,s=a.data,l=s&&map$1(s,getName);return new t({categories:l,needCollect:!l,deduplication:a.dedplication!==!1})},t.prototype.getOrdinal=function(n){return this._getOrCreateMap().get(n)},t.prototype.parseAndCollect=function(n){var a,s=this._needCollect;if(!isString$1(n)&&!s)return n;if(s&&!this._deduplication)return a=this.categories.length,this.categories[a]=n,a;var l=this._getOrCreateMap();return a=l.get(n),a==null&&(s?(a=this.categories.length,this.categories[a]=n,l.set(n,a)):a=NaN),a},t.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},t}();function getName(t){return isObject$3(t)&&t.value!=null?t.value:t+""}function isIntervalOrLogScale(t){return t.type==="interval"||t.type==="log"}function intervalScaleNiceTicks(t,n,a,s){var l={},u=t[1]-t[0],c=l.interval=nice(u/n,!0);a!=null&&c<a&&(c=l.interval=a),s!=null&&c>s&&(c=l.interval=s);var p=l.intervalPrecision=getIntervalPrecision(c),d=l.niceTickExtent=[round$3(Math.ceil(t[0]/c)*c,p),round$3(Math.floor(t[1]/c)*c,p)];return fixExtent(d,t),l}function increaseInterval(t){var n=Math.pow(10,quantityExponent(t)),a=t/n;return a?a===2?a=3:a===3?a=5:a*=2:a=1,round$3(a*n)}function getIntervalPrecision(t){return getPrecision(t)+2}function clamp(t,n,a){t[n]=Math.max(Math.min(t[n],a[1]),a[0])}function fixExtent(t,n){!isFinite(t[0])&&(t[0]=n[0]),!isFinite(t[1])&&(t[1]=n[1]),clamp(t,0,n),clamp(t,1,n),t[0]>t[1]&&(t[0]=t[1])}function contain$1(t,n){return t>=n[0]&&t<=n[1]}function normalize$2(t,n){return n[1]===n[0]?.5:(t-n[0])/(n[1]-n[0])}function scale(t,n){return t*(n[1]-n[0])+n[0]}var OrdinalScale=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;s.type="ordinal";var l=s.getSetting("ordinalMeta");return l||(l=new OrdinalMeta({})),isArray$1(l)&&(l=new OrdinalMeta({categories:map$1(l,function(u){return isObject$3(u)?u.value:u})})),s._ordinalMeta=l,s._extent=s.getSetting("extent")||[0,l.categories.length-1],s}return n.prototype.parse=function(a){return a==null?NaN:isString$1(a)?this._ordinalMeta.getOrdinal(a):Math.round(a)},n.prototype.contain=function(a){return a=this.parse(a),contain$1(a,this._extent)&&this._ordinalMeta.categories[a]!=null},n.prototype.normalize=function(a){return a=this._getTickNumber(this.parse(a)),normalize$2(a,this._extent)},n.prototype.scale=function(a){return a=Math.round(scale(a,this._extent)),this.getRawOrdinalNumber(a)},n.prototype.getTicks=function(){for(var a=[],s=this._extent,l=s[0];l<=s[1];)a.push({value:l}),l++;return a},n.prototype.getMinorTicks=function(a){},n.prototype.setSortInfo=function(a){if(a==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var s=a.ordinalNumbers,l=this._ordinalNumbersByTick=[],u=this._ticksByOrdinalNumber=[],c=0,p=this._ordinalMeta.categories.length,d=Math.min(p,s.length);c<d;++c){var x=s[c];l[c]=x,u[x]=c}for(var _=0;c<p;++c){for(;u[_]!=null;)_++;l.push(_),u[_]=c}},n.prototype._getTickNumber=function(a){var s=this._ticksByOrdinalNumber;return s&&a>=0&&a<s.length?s[a]:a},n.prototype.getRawOrdinalNumber=function(a){var s=this._ordinalNumbersByTick;return s&&a>=0&&a<s.length?s[a]:a},n.prototype.getLabel=function(a){if(!this.isBlank()){var s=this.getRawOrdinalNumber(a.value),l=this._ordinalMeta.categories[s];return l==null?"":l+""}},n.prototype.count=function(){return this._extent[1]-this._extent[0]+1},n.prototype.unionExtentFromData=function(a,s){this.unionExtent(a.getApproximateExtent(s))},n.prototype.isInExtentRange=function(a){return a=this._getTickNumber(a),this._extent[0]<=a&&this._extent[1]>=a},n.prototype.getOrdinalMeta=function(){return this._ordinalMeta},n.prototype.calcNiceTicks=function(){},n.prototype.calcNiceExtent=function(){},n.type="ordinal",n}(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$3,IntervalScale=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="interval",a._interval=0,a._intervalPrecision=2,a}return n.prototype.parse=function(a){return a},n.prototype.contain=function(a){return contain$1(a,this._extent)},n.prototype.normalize=function(a){return normalize$2(a,this._extent)},n.prototype.scale=function(a){return scale(a,this._extent)},n.prototype.setExtent=function(a,s){var l=this._extent;isNaN(a)||(l[0]=parseFloat(a)),isNaN(s)||(l[1]=parseFloat(s))},n.prototype.unionExtent=function(a){var s=this._extent;a[0]<s[0]&&(s[0]=a[0]),a[1]>s[1]&&(s[1]=a[1]),this.setExtent(s[0],s[1])},n.prototype.getInterval=function(){return this._interval},n.prototype.setInterval=function(a){this._interval=a,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(a)},n.prototype.getTicks=function(a){var s=this._interval,l=this._extent,u=this._niceExtent,c=this._intervalPrecision,p=[];if(!s)return p;var d=1e4;l[0]<u[0]&&(a?p.push({value:roundNumber(u[0]-s,c)}):p.push({value:l[0]}));for(var x=u[0];x<=u[1]&&(p.push({value:x}),x=roundNumber(x+s,c),x!==p[p.length-1].value);)if(p.length>d)return[];var _=p.length?p[p.length-1].value:u[1];return l[1]>_&&(a?p.push({value:roundNumber(_+s,c)}):p.push({value:l[1]})),p},n.prototype.getMinorTicks=function(a){for(var s=this.getTicks(!0),l=[],u=this.getExtent(),c=1;c<s.length;c++){for(var p=s[c],d=s[c-1],x=0,_=[],S=p.value-d.value,T=S/a;x<a-1;){var A=roundNumber(d.value+(x+1)*T);A>u[0]&&A<u[1]&&_.push(A),x++}l.push(_)}return l},n.prototype.getLabel=function(a,s){if(a==null)return"";var l=s&&s.precision;l==null?l=getPrecision(a.value)||0:l==="auto"&&(l=this._intervalPrecision);var u=roundNumber(a.value,l,!0);return addCommas(u)},n.prototype.calcNiceTicks=function(a,s,l){a=a||5;var u=this._extent,c=u[1]-u[0];if(isFinite(c)){c<0&&(c=-c,u.reverse());var p=intervalScaleNiceTicks(u,a,s,l);this._intervalPrecision=p.intervalPrecision,this._interval=p.interval,this._niceExtent=p.niceTickExtent}},n.prototype.calcNiceExtent=function(a){var s=this._extent;if(s[0]===s[1])if(s[0]!==0){var l=Math.abs(s[0]);a.fixMax||(s[1]+=l/2),s[0]-=l/2}else s[1]=1;var u=s[1]-s[0];isFinite(u)||(s[0]=0,s[1]=1),this.calcNiceTicks(a.splitNumber,a.minInterval,a.maxInterval);var c=this._interval;a.fixMin||(s[0]=roundNumber(Math.floor(s[0]/c)*c)),a.fixMax||(s[1]=roundNumber(Math.ceil(s[1]/c)*c))},n.prototype.setNiceExtent=function(a,s){this._niceExtent=[a,s]},n.type="interval",n}(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(t){return isArray$1(t)?supportFloat32Array?new Float32Array(t):t:new Float32ArrayCtor(t)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(t){return t.get("stack")||STACK_PREFIX+t.seriesIndex}function getAxisKey$1(t){return t.dim+t.index}function getLayoutOnAxis(t){var n=[],a=t.axis,s="axis0";if(a.type==="category"){for(var l=a.getBandWidth(),u=0;u<t.count;u++)n.push(defaults({bandWidth:l,axisKey:s,stackId:STACK_PREFIX+u},t));for(var c=doCalBarWidthAndOffset(n),p=[],u=0;u<t.count;u++){var d=c[s][STACK_PREFIX+u];d.offsetCenter=d.offset+d.width/2,p.push(d)}return p}}function prepareLayoutBarSeries(t,n){var a=[];return n.eachSeriesByType(t,function(s){isOnCartesian(s)&&a.push(s)}),a}function getValueAxesMinGaps(t){var n={};each$f(t,function(d){var x=d.coordinateSystem,_=x.getBaseAxis();if(!(_.type!=="time"&&_.type!=="value"))for(var S=d.getData(),T=_.dim+"_"+_.index,A=S.getDimensionIndex(S.mapDimension(_.dim)),R=S.getStore(),D=0,O=R.count();D<O;++D){var F=R.get(A,D);n[T]?n[T].push(F):n[T]=[F]}});var a={};for(var s in n)if(n.hasOwnProperty(s)){var l=n[s];if(l){l.sort(function(d,x){return d-x});for(var u=null,c=1;c<l.length;++c){var p=l[c]-l[c-1];p>0&&(u=u===null?p:Math.min(u,p))}a[s]=u}}return a}function makeColumnLayout(t){var n=getValueAxesMinGaps(t),a=[];return each$f(t,function(s){var l=s.coordinateSystem,u=l.getBaseAxis(),c=u.getExtent(),p;if(u.type==="category")p=u.getBandWidth();else if(u.type==="value"||u.type==="time"){var d=u.dim+"_"+u.index,x=n[d],_=Math.abs(c[1]-c[0]),S=u.scale.getExtent(),T=Math.abs(S[1]-S[0]);p=x?_/T*x:_}else{var A=s.getData();p=Math.abs(c[1]-c[0])/A.count()}var R=parsePercent(s.get("barWidth"),p),D=parsePercent(s.get("barMaxWidth"),p),O=parsePercent(s.get("barMinWidth")||(isInLargeMode(s)?.5:1),p),F=s.get("barGap"),z=s.get("barCategoryGap");a.push({bandWidth:p,barWidth:R,barMaxWidth:D,barMinWidth:O,barGap:F,barCategoryGap:z,axisKey:getAxisKey$1(u),stackId:getSeriesStackId$1(s)})}),doCalBarWidthAndOffset(a)}function doCalBarWidthAndOffset(t){var n={};each$f(t,function(s,l){var u=s.axisKey,c=s.bandWidth,p=n[u]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},d=p.stacks;n[u]=p;var x=s.stackId;d[x]||p.autoWidthCount++,d[x]=d[x]||{width:0,maxWidth:0};var _=s.barWidth;_&&!d[x].width&&(d[x].width=_,_=Math.min(p.remainedWidth,_),p.remainedWidth-=_);var S=s.barMaxWidth;S&&(d[x].maxWidth=S);var T=s.barMinWidth;T&&(d[x].minWidth=T);var A=s.barGap;A!=null&&(p.gap=A);var R=s.barCategoryGap;R!=null&&(p.categoryGap=R)});var a={};return each$f(n,function(s,l){a[l]={};var u=s.stacks,c=s.bandWidth,p=s.categoryGap;if(p==null){var d=keys(u).length;p=Math.max(35-d*4,15)+"%"}var x=parsePercent(p,c),_=parsePercent(s.gap,1),S=s.remainedWidth,T=s.autoWidthCount,A=(S-x)/(T+(T-1)*_);A=Math.max(A,0),each$f(u,function(F){var z=F.maxWidth,j=F.minWidth;if(F.width){var Z=F.width;z&&(Z=Math.min(Z,z)),j&&(Z=Math.max(Z,j)),F.width=Z,S-=Z+_*Z,T--}else{var Z=A;z&&z<Z&&(Z=Math.min(z,S)),j&&j>Z&&(Z=j),Z!==A&&(F.width=Z,S-=Z+_*Z,T--)}}),A=(S-x)/(T+(T-1)*_),A=Math.max(A,0);var R=0,D;each$f(u,function(F,z){F.width||(F.width=A),D=F,R+=F.width*(1+_)}),D&&(R-=D.width*_);var O=-R/2;each$f(u,function(F,z){a[l][z]=a[l][z]||{bandWidth:c,offset:O,width:F.width},O+=F.width*(1+_)})}),a}function retrieveColumnLayout(t,n,a){if(t&&n){var s=t[getAxisKey$1(n)];return s}}function layout$3(t,n){var a=prepareLayoutBarSeries(t,n),s=makeColumnLayout(a);each$f(a,function(l){var u=l.getData(),c=l.coordinateSystem,p=c.getBaseAxis(),d=getSeriesStackId$1(l),x=s[getAxisKey$1(p)][d],_=x.offset,S=x.width;u.setLayout({bandWidth:x.bandWidth,offset:_,size:S})})}function createProgressiveLayout(t){return{seriesType:t,plan:createRenderPlanner(),reset:function(n){if(isOnCartesian(n)){var a=n.getData(),s=n.coordinateSystem,l=s.getBaseAxis(),u=s.getOtherAxis(l),c=a.getDimensionIndex(a.mapDimension(u.dim)),p=a.getDimensionIndex(a.mapDimension(l.dim)),d=n.get("showBackground",!0),x=a.mapDimension(u.dim),_=a.getCalculationInfo("stackResultDimension"),S=isDimensionStacked(a,x)&&!!a.getCalculationInfo("stackedOnSeries"),T=u.isHorizontal(),A=getValueAxisStart(l,u),R=isInLargeMode(n),D=n.get("barMinHeight")||0,O=_&&a.getDimensionIndex(_),F=a.getLayout("size"),z=a.getLayout("offset");return{progress:function(j,Z){for(var W=j.count,J=R&&createFloat32Array(W*3),en=R&&d&&createFloat32Array(W*3),tn=R&&createFloat32Array(W),Ct=s.master.getRect(),Q=T?Ct.width:Ct.height,on,gn=Z.getStore(),In=0;(on=j.next())!=null;){var dn=gn.get(S?O:c,on),ix=gn.get(p,on),Cn=A,ax=void 0;S&&(ax=+dn-gn.get(c,on));var sx=void 0,lx=void 0,ox=void 0,hx=void 0;if(T){var _x=s.dataToPoint([dn,ix]);if(S){var ux=s.dataToPoint([ax,ix]);Cn=ux[0]}sx=Cn,lx=_x[1]+z,ox=_x[0]-Cn,hx=F,Math.abs(ox)<D&&(ox=(ox<0?-1:1)*D)}else{var _x=s.dataToPoint([ix,dn]);if(S){var ux=s.dataToPoint([ix,ax]);Cn=ux[1]}sx=_x[0]+z,lx=Cn,ox=F,hx=_x[1]-Cn,Math.abs(hx)<D&&(hx=(hx<=0?-1:1)*D)}R?(J[In]=sx,J[In+1]=lx,J[In+2]=T?ox:hx,en&&(en[In]=T?Ct.x:sx,en[In+1]=T?lx:Ct.y,en[In+2]=Q),tn[on]=on):Z.setItemLayout(on,{x:sx,y:lx,width:ox,height:hx}),In+=3}R&&Z.setLayout({largePoints:J,largeDataIndices:tn,largeBackgroundPoints:en,valueAxisHorizontal:T})}}}}}}function isOnCartesian(t){return t.coordinateSystem&&t.coordinateSystem.type==="cartesian2d"}function isInLargeMode(t){return t.pipelineContext&&t.pipelineContext.large}function getValueAxisStart(t,n){var a=n.model.get("startValue");return a||(a=0),n.toGlobalCoord(n.dataToCoord(n.type==="log"?a>0?a:1:a))}var bisect=function(t,n,a,s){for(;a<s;){var l=a+s>>>1;t[l][1]<n?a=l+1:s=l}return a},TimeScale=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="time",s}return n.prototype.getLabel=function(a){var s=this.getSetting("useUTC");return format$1(a.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,s,this.getSetting("locale"))},n.prototype.getFormattedLabel=function(a,s,l){var u=this.getSetting("useUTC"),c=this.getSetting("locale");return leveledFormat(a,s,l,c,u)},n.prototype.getTicks=function(){var a=this._interval,s=this._extent,l=[];if(!a)return l;l.push({value:s[0],level:0});var u=this.getSetting("useUTC"),c=getIntervalTicks(this._minLevelUnit,this._approxInterval,u,s);return l=l.concat(c),l.push({value:s[1],level:0}),l},n.prototype.calcNiceExtent=function(a){var s=this._extent;if(s[0]===s[1]&&(s[0]-=ONE_DAY,s[1]+=ONE_DAY),s[1]===-1/0&&s[0]===1/0){var l=new Date;s[1]=+new Date(l.getFullYear(),l.getMonth(),l.getDate()),s[0]=s[1]-ONE_DAY}this.calcNiceTicks(a.splitNumber,a.minInterval,a.maxInterval)},n.prototype.calcNiceTicks=function(a,s,l){a=a||10;var u=this._extent,c=u[1]-u[0];this._approxInterval=c/a,s!=null&&this._approxInterval<s&&(this._approxInterval=s),l!=null&&this._approxInterval>l&&(this._approxInterval=l);var p=scaleIntervals.length,d=Math.min(bisect(scaleIntervals,this._approxInterval,0,p),p-1);this._interval=scaleIntervals[d][1],this._minLevelUnit=scaleIntervals[Math.max(d-1,0)][0]},n.prototype.parse=function(a){return isNumber(a)?a:+parseDate(a)},n.prototype.contain=function(a){return contain$1(this.parse(a),this._extent)},n.prototype.normalize=function(a){return normalize$2(this.parse(a),this._extent)},n.prototype.scale=function(a){return scale(a,this._extent)},n.type="time",n}(IntervalScale),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(t,n,a,s){var l=parseDate(n),u=parseDate(a),c=function(R){return getUnitValue(l,R,s)===getUnitValue(u,R,s)},p=function(){return c("year")},d=function(){return p()&&c("month")},x=function(){return d()&&c("day")},_=function(){return x()&&c("hour")},S=function(){return _()&&c("minute")},T=function(){return S()&&c("second")},A=function(){return T()&&c("millisecond")};switch(t){case"year":return p();case"month":return d();case"day":return x();case"hour":return _();case"minute":return S();case"second":return T();case"millisecond":return A()}}function getDateInterval(t,n){return t/=ONE_DAY,t>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function getMonthInterval(t){var n=30*ONE_DAY;return t/=n,t>6?6:t>3?3:t>2?2:1}function getHourInterval(t){return t/=ONE_HOUR,t>12?12:t>6?6:t>3.5?4:t>2?2:1}function getMinutesAndSecondsInterval(t,n){return t/=n?ONE_MINUTE:ONE_SECOND,t>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function getMillisecondsInterval(t){return nice(t,!0)}function getFirstTimestampOfUnit(t,n,a){var s=new Date(t);switch(getPrimaryTimeUnit(n)){case"year":case"month":s[monthSetterName(a)](0);case"day":s[dateSetterName(a)](1);case"hour":s[hoursSetterName(a)](0);case"minute":s[minutesSetterName(a)](0);case"second":s[secondsSetterName(a)](0),s[millisecondsSetterName(a)](0)}return s.getTime()}function getIntervalTicks(t,n,a,s){var l=1e4,u=timeUnits,c=0;function p(Q,on,gn,In,dn,ix,Cn){for(var ax=new Date(on),sx=on,lx=ax[In]();sx<gn&&sx<=s[1];)Cn.push({value:sx}),lx+=Q,ax[dn](lx),sx=ax.getTime();Cn.push({value:sx,notAdd:!0})}function d(Q,on,gn){var In=[],dn=!on.length;if(!isUnitValueSame(getPrimaryTimeUnit(Q),s[0],s[1],a)){dn&&(on=[{value:getFirstTimestampOfUnit(new Date(s[0]),Q,a)},{value:s[1]}]);for(var ix=0;ix<on.length-1;ix++){var Cn=on[ix].value,ax=on[ix+1].value;if(Cn!==ax){var sx=void 0,lx=void 0,ox=void 0,hx=!1;switch(Q){case"year":sx=Math.max(1,Math.round(n/ONE_DAY/365)),lx=fullYearGetterName(a),ox=fullYearSetterName(a);break;case"half-year":case"quarter":case"month":sx=getMonthInterval(n),lx=monthGetterName(a),ox=monthSetterName(a);break;case"week":case"half-week":case"day":sx=getDateInterval(n),lx=dateGetterName(a),ox=dateSetterName(a),hx=!0;break;case"half-day":case"quarter-day":case"hour":sx=getHourInterval(n),lx=hoursGetterName(a),ox=hoursSetterName(a);break;case"minute":sx=getMinutesAndSecondsInterval(n,!0),lx=minutesGetterName(a),ox=minutesSetterName(a);break;case"second":sx=getMinutesAndSecondsInterval(n,!1),lx=secondsGetterName(a),ox=secondsSetterName(a);break;case"millisecond":sx=getMillisecondsInterval(n),lx=millisecondsGetterName(a),ox=millisecondsSetterName(a);break}p(sx,Cn,ax,lx,ox,hx,In),Q==="year"&&gn.length>1&&ix===0&&gn.unshift({value:gn[0].value-sx})}}for(var ix=0;ix<In.length;ix++)gn.push(In[ix]);return In}}for(var x=[],_=[],S=0,T=0,A=0;A<u.length&&c++<l;++A){var R=getPrimaryTimeUnit(u[A]);if(isPrimaryTimeUnit(u[A])){d(u[A],x[x.length-1]||[],_);var D=u[A+1]?getPrimaryTimeUnit(u[A+1]):null;if(R!==D){if(_.length){T=S,_.sort(function(Q,on){return Q.value-on.value});for(var O=[],F=0;F<_.length;++F){var z=_[F].value;(F===0||_[F-1].value!==z)&&(O.push(_[F]),z>=s[0]&&z<=s[1]&&S++)}var j=(s[1]-s[0])/n;if(S>j*1.5&&T>j/1.5||(x.push(O),S>j||t===u[A]))break}_=[]}}}for(var Z=filter(map$1(x,function(Q){return filter(Q,function(on){return on.value>=s[0]&&on.value<=s[1]&&!on.notAdd})}),function(Q){return Q.length>0}),W=[],J=Z.length-1,A=0;A<Z.length;++A)for(var en=Z[A],tn=0;tn<en.length;++tn)W.push({value:en[tn].value,level:J-A});W.sort(function(Q,on){return Q.value-on.value});for(var Ct=[],A=0;A<W.length;++A)(A===0||W[A].value!==W[A-1].value)&&Ct.push(W[A]);return Ct}Scale.registerClass(TimeScale);var scaleProto=Scale.prototype,intervalScaleProto=IntervalScale.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="log",a.base=10,a._originalScale=new IntervalScale,a._interval=0,a}return n.prototype.getTicks=function(a){var s=this._originalScale,l=this._extent,u=s.getExtent(),c=intervalScaleProto.getTicks.call(this,a);return map$1(c,function(p){var d=p.value,x=round$3(mathPow$1(this.base,d));return x=d===l[0]&&this._fixMin?fixRoundingError(x,u[0]):x,x=d===l[1]&&this._fixMax?fixRoundingError(x,u[1]):x,{value:x}},this)},n.prototype.setExtent=function(a,s){var l=mathLog$1(this.base);a=mathLog$1(Math.max(0,a))/l,s=mathLog$1(Math.max(0,s))/l,intervalScaleProto.setExtent.call(this,a,s)},n.prototype.getExtent=function(){var a=this.base,s=scaleProto.getExtent.call(this);s[0]=mathPow$1(a,s[0]),s[1]=mathPow$1(a,s[1]);var l=this._originalScale,u=l.getExtent();return this._fixMin&&(s[0]=fixRoundingError(s[0],u[0])),this._fixMax&&(s[1]=fixRoundingError(s[1],u[1])),s},n.prototype.unionExtent=function(a){this._originalScale.unionExtent(a);var s=this.base;a[0]=mathLog$1(a[0])/mathLog$1(s),a[1]=mathLog$1(a[1])/mathLog$1(s),scaleProto.unionExtent.call(this,a)},n.prototype.unionExtentFromData=function(a,s){this.unionExtent(a.getApproximateExtent(s))},n.prototype.calcNiceTicks=function(a){a=a||10;var s=this._extent,l=s[1]-s[0];if(!(l===1/0||l<=0)){var u=quantity(l),c=a/l*u;for(c<=.5&&(u*=10);!isNaN(u)&&Math.abs(u)<1&&Math.abs(u)>0;)u*=10;var p=[round$3(mathCeil$1(s[0]/u)*u),round$3(mathFloor$1(s[1]/u)*u)];this._interval=u,this._niceExtent=p}},n.prototype.calcNiceExtent=function(a){intervalScaleProto.calcNiceExtent.call(this,a),this._fixMin=a.fixMin,this._fixMax=a.fixMax},n.prototype.parse=function(a){return a},n.prototype.contain=function(a){return a=mathLog$1(a)/mathLog$1(this.base),contain$1(a,this._extent)},n.prototype.normalize=function(a){return a=mathLog$1(a)/mathLog$1(this.base),normalize$2(a,this._extent)},n.prototype.scale=function(a){return a=scale(a,this._extent),mathPow$1(this.base,a)},n.type="log",n}(Scale),proto=LogScale.prototype;proto.getMinorTicks=intervalScaleProto.getMinorTicks;proto.getLabel=intervalScaleProto.getLabel;function fixRoundingError(t,n){return roundingErrorFix(t,getPrecision(n))}Scale.registerClass(LogScale);var ScaleRawExtentInfo=function(){function t(n,a,s){this._prepareParams(n,a,s)}return t.prototype._prepareParams=function(n,a,s){s[1]<s[0]&&(s=[NaN,NaN]),this._dataMin=s[0],this._dataMax=s[1];var l=this._isOrdinal=n.type==="ordinal";this._needCrossZero=n.type==="interval"&&a.getNeedCrossZero&&a.getNeedCrossZero();var u=a.get("min",!0);u==null&&(u=a.get("startValue",!0));var c=this._modelMinRaw=u;isFunction$1(c)?this._modelMinNum=parseAxisModelMinMax(n,c({min:s[0],max:s[1]})):c!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(n,c));var p=this._modelMaxRaw=a.get("max",!0);if(isFunction$1(p)?this._modelMaxNum=parseAxisModelMinMax(n,p({min:s[0],max:s[1]})):p!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(n,p)),l)this._axisDataLen=a.getCategories().length;else{var d=a.get("boundaryGap"),x=isArray$1(d)?d:[d||0,d||0];typeof x[0]=="boolean"||typeof x[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(x[0],1),parsePercent$1(x[1],1)]}},t.prototype.calculate=function(){var n=this._isOrdinal,a=this._dataMin,s=this._dataMax,l=this._axisDataLen,u=this._boundaryGapInner,c=n?null:s-a||Math.abs(a),p=this._modelMinRaw==="dataMin"?a:this._modelMinNum,d=this._modelMaxRaw==="dataMax"?s:this._modelMaxNum,x=p!=null,_=d!=null;p==null&&(p=n?l?0:NaN:a-u[0]*c),d==null&&(d=n?l?l-1:NaN:s+u[1]*c),(p==null||!isFinite(p))&&(p=NaN),(d==null||!isFinite(d))&&(d=NaN);var S=eqNaN(p)||eqNaN(d)||n&&!l;this._needCrossZero&&(p>0&&d>0&&!x&&(p=0),p<0&&d<0&&!_&&(d=0));var T=this._determinedMin,A=this._determinedMax;return T!=null&&(p=T,x=!0),A!=null&&(d=A,_=!0),{min:p,max:d,minFixed:x,maxFixed:_,isBlank:S}},t.prototype.modifyDataMinMax=function(n,a){this[DATA_MIN_MAX_ATTR[n]]=a},t.prototype.setDeterminedMinMax=function(n,a){var s=DETERMINED_MIN_MAX_ATTR[n];this[s]=a},t.prototype.freeze=function(){this.frozen=!0},t}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(t,n,a){var s=t.rawExtentInfo;return s||(s=new ScaleRawExtentInfo(t,n,a),t.rawExtentInfo=s,s)}function parseAxisModelMinMax(t,n){return n==null?null:eqNaN(n)?NaN:t.parse(n)}function getScaleExtent(t,n){var a=t.type,s=ensureScaleRawExtentInfo(t,n,t.getExtent()).calculate();t.setBlank(s.isBlank);var l=s.min,u=s.max,c=n.ecModel;if(c&&a==="time"){var p=prepareLayoutBarSeries("bar",c),d=!1;if(each$f(p,function(S){d=d||S.getBaseAxis()===n.axis}),d){var x=makeColumnLayout(p),_=adjustScaleForOverflow(l,u,n,x);l=_.min,u=_.max}}return{extent:[l,u],fixMin:s.minFixed,fixMax:s.maxFixed}}function adjustScaleForOverflow(t,n,a,s){var l=a.axis.getExtent(),u=Math.abs(l[1]-l[0]),c=retrieveColumnLayout(s,a.axis);if(c===void 0)return{min:t,max:n};var p=1/0;each$f(c,function(A){p=Math.min(A.offset,p)});var d=-1/0;each$f(c,function(A){d=Math.max(A.offset+A.width,d)}),p=Math.abs(p),d=Math.abs(d);var x=p+d,_=n-t,S=1-(p+d)/u,T=_/S-_;return n+=T*(d/x),t-=T*(p/x),{min:t,max:n}}function niceScaleExtent(t,n){var a=n,s=getScaleExtent(t,a),l=s.extent,u=a.get("splitNumber");t instanceof LogScale&&(t.base=a.get("logBase"));var c=t.type,p=a.get("interval"),d=c==="interval"||c==="time";t.setExtent(l[0],l[1]),t.calcNiceExtent({splitNumber:u,fixMin:s.fixMin,fixMax:s.fixMax,minInterval:d?a.get("minInterval"):null,maxInterval:d?a.get("maxInterval"):null}),p!=null&&t.setInterval&&t.setInterval(p)}function createScaleByModel$1(t,n){if(n=n||t.get("type"),n)switch(n){case"category":return new OrdinalScale({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(Scale.getClass(n)||IntervalScale)}}function ifAxisCrossZero(t){var n=t.scale.getExtent(),a=n[0],s=n[1];return!(a>0&&s>0||a<0&&s<0)}function makeLabelFormatter(t){var n=t.getLabelModel().get("formatter"),a=t.type==="category"?t.scale.getExtent()[0]:null;return t.scale.type==="time"?function(s){return function(l,u){return t.scale.getFormattedLabel(l,u,s)}}(n):isString$1(n)?function(s){return function(l){var u=t.scale.getLabel(l),c=s.replace("{value}",u??"");return c}}(n):isFunction$1(n)?function(s){return function(l,u){return a!=null&&(u=l.value-a),s(getAxisRawValue(t,l),u,l.level!=null?{level:l.level}:null)}}(n):function(s){return t.scale.getLabel(s)}}function getAxisRawValue(t,n){return t.type==="category"?t.scale.getLabel(n):n.value}function estimateLabelUnionRect(t){var n=t.model,a=t.scale;if(!(!n.get(["axisLabel","show"])||a.isBlank())){var s,l,u=a.getExtent();a instanceof OrdinalScale?l=a.count():(s=a.getTicks(),l=s.length);var c=t.getLabelModel(),p=makeLabelFormatter(t),d,x=1;l>40&&(x=Math.ceil(l/40));for(var _=0;_<l;_+=x){var S=s?s[_]:{value:u[0]+_},T=p(S,_),A=c.getTextRect(T),R=rotateTextRect(A,c.get("rotate")||0);d?d.union(R):d=R}return d}}function rotateTextRect(t,n){var a=n*Math.PI/180,s=t.width,l=t.height,u=s*Math.abs(Math.cos(a))+Math.abs(l*Math.sin(a)),c=s*Math.abs(Math.sin(a))+Math.abs(l*Math.cos(a)),p=new BoundingRect(t.x,t.y,u,c);return p}function getOptionCategoryInterval(t){var n=t.get("interval");return n??"auto"}function shouldShowAllLabels(t){return t.type==="category"&&getOptionCategoryInterval(t.getLabelModel())===0}function getDataDimensionsOnAxis(t,n){var a={};return each$f(t.mapDimensionsAll(n),function(s){a[getStackedDimension(t,s)]=!0}),keys(a)}function unionAxisExtentFromData(t,n,a){n&&each$f(getDataDimensionsOnAxis(n,a),function(s){var l=n.getApproximateExtent(s);l[0]<t[0]&&(t[0]=l[0]),l[1]>t[1]&&(t[1]=l[1])})}var AxisModelCommonMixin=function(){function t(){}return t.prototype.getNeedCrossZero=function(){var n=this.option;return!n.scale},t.prototype.getCoordSysModel=function(){},t}();function createList$2(t){return createSeriesData(null,t)}var dataStack={isDimensionStacked,enableDataStack,getStackedDimension};function createScale(t,n){var a=n;n instanceof Model||(a=new Model(n));var s=createScaleByModel$1(a);return s.setExtent(t[0],t[1]),niceScaleExtent(s,a),s}function mixinAxisModelCommonMethods(t){mixin(t,AxisModelCommonMixin)}function createTextStyle(t,n){return n=n||{},createTextStyle$1(t,null,null,n.state!=="normal")}const helper=Object.freeze(Object.defineProperty({__proto__:null,createDimensions,createList:createList$2,createScale,createSymbol:createSymbol$1,createTextStyle,dataStack,enableHoverEmphasis,getECData,getLayoutRect,mixinAxisModelCommonMethods},Symbol.toStringTag,{value:"Module"}));var EPSILON=1e-8;function isAroundEqual(t,n){return Math.abs(t-n)<EPSILON}function contain(t,n,a){var s=0,l=t[0];if(!l)return!1;for(var u=1;u<t.length;u++){var c=t[u];s+=windingLine(l[0],l[1],c[0],c[1],n,a),l=c}var p=t[0];return(!isAroundEqual(l[0],p[0])||!isAroundEqual(l[1],p[1]))&&(s+=windingLine(l[0],l[1],p[0],p[1],n,a)),s!==0}var TMP_TRANSFORM=[];function transformPoints(t,n){for(var a=0;a<t.length;a++)applyTransform$1(t[a],t[a],n)}function updateBBoxFromPoints(t,n,a,s){for(var l=0;l<t.length;l++){var u=t[l];s&&(u=s.project(u)),u&&isFinite(u[0])&&isFinite(u[1])&&(min$1(n,n,u),max$1(a,a,u))}}function centroid$1(t){for(var n=0,a=0,s=0,l=t.length,u=t[l-1][0],c=t[l-1][1],p=0;p<l;p++){var d=t[p][0],x=t[p][1],_=u*x-d*c;n+=_,a+=(u+d)*_,s+=(c+x)*_,u=d,c=x}return n?[a/n/3,s/n/3,n]:[t[0][0]||0,t[0][1]||0]}var Region=function(){function t(n){this.name=n}return t.prototype.setCenter=function(n){this._center=n},t.prototype.getCenter=function(){var n=this._center;return n||(n=this._center=this.calcCenter()),n},t}(),GeoJSONPolygonGeometry=function(){function t(n,a){this.type="polygon",this.exterior=n,this.interiors=a}return t}(),GeoJSONLineStringGeometry=function(){function t(n){this.type="linestring",this.points=n}return t}(),GeoJSONRegion=function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,a)||this;return u.type="geoJSON",u.geometries=s,u._center=l&&[l[0],l[1]],u}return n.prototype.calcCenter=function(){for(var a=this.geometries,s,l=0,u=0;u<a.length;u++){var c=a[u],p=c.exterior,d=p&&p.length;d>l&&(s=c,l=d)}if(s)return centroid$1(s.exterior);var x=this.getBoundingRect();return[x.x+x.width/2,x.y+x.height/2]},n.prototype.getBoundingRect=function(a){var s=this._rect;if(s&&!a)return s;var l=[1/0,1/0],u=[-1/0,-1/0],c=this.geometries;return each$f(c,function(p){p.type==="polygon"?updateBBoxFromPoints(p.exterior,l,u,a):each$f(p.points,function(d){updateBBoxFromPoints(d,l,u,a)})}),isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])||(l[0]=l[1]=u[0]=u[1]=0),s=new BoundingRect(l[0],l[1],u[0]-l[0],u[1]-l[1]),a||(this._rect=s),s},n.prototype.contain=function(a){var s=this.getBoundingRect(),l=this.geometries;if(!s.contain(a[0],a[1]))return!1;e:for(var u=0,c=l.length;u<c;u++){var p=l[u];if(p.type==="polygon"){var d=p.exterior,x=p.interiors;if(contain(d,a[0],a[1])){for(var _=0;_<(x?x.length:0);_++)if(contain(x[_],a[0],a[1]))continue e;return!0}}}return!1},n.prototype.transformTo=function(a,s,l,u){var c=this.getBoundingRect(),p=c.width/c.height;l?u||(u=l/p):l=p*u;for(var d=new BoundingRect(a,s,l,u),x=c.calculateTransform(d),_=this.geometries,S=0;S<_.length;S++){var T=_[S];T.type==="polygon"?(transformPoints(T.exterior,x),each$f(T.interiors,function(A){transformPoints(A,x)})):each$f(T.points,function(A){transformPoints(A,x)})}c=this._rect,c.copy(d),this._center=[c.x+c.width/2,c.y+c.height/2]},n.prototype.cloneShallow=function(a){a==null&&(a=this.name);var s=new n(a,this.geometries,this._center);return s._rect=this._rect,s.transformTo=null,s},n}(Region),GeoSVGRegion=function(t){__extends(n,t);function n(a,s){var l=t.call(this,a)||this;return l.type="geoSVG",l._elOnlyForCalculate=s,l}return n.prototype.calcCenter=function(){for(var a=this._elOnlyForCalculate,s=a.getBoundingRect(),l=[s.x+s.width/2,s.y+s.height/2],u=identity(TMP_TRANSFORM),c=a;c&&!c.isGeoSVGGraphicRoot;)mul(u,c.getLocalTransform(),u),c=c.parent;return invert(u,u),applyTransform$1(l,l,u),l},n}(Region);function decode(t){if(!t.UTF8Encoding)return t;var n=t,a=n.UTF8Scale;a==null&&(a=1024);var s=n.features;return each$f(s,function(l){var u=l.geometry,c=u.encodeOffsets,p=u.coordinates;if(c)switch(u.type){case"LineString":u.coordinates=decodeRing(p,c,a);break;case"Polygon":decodeRings(p,c,a);break;case"MultiLineString":decodeRings(p,c,a);break;case"MultiPolygon":each$f(p,function(d,x){return decodeRings(d,c[x],a)})}}),n.UTF8Encoding=!1,n}function decodeRings(t,n,a){for(var s=0;s<t.length;s++)t[s]=decodeRing(t[s],n[s],a)}function decodeRing(t,n,a){for(var s=[],l=n[0],u=n[1],c=0;c<t.length;c+=2){var p=t.charCodeAt(c)-64,d=t.charCodeAt(c+1)-64;p=p>>1^-(p&1),d=d>>1^-(d&1),p+=l,d+=u,l=p,u=d,s.push([p/a,d/a])}return s}function parseGeoJSON(t,n){return t=decode(t),map$1(filter(t.features,function(a){return a.geometry&&a.properties&&a.geometry.coordinates.length>0}),function(a){var s=a.properties,l=a.geometry,u=[];switch(l.type){case"Polygon":var c=l.coordinates;u.push(new GeoJSONPolygonGeometry(c[0],c.slice(1)));break;case"MultiPolygon":each$f(l.coordinates,function(d){d[0]&&u.push(new GeoJSONPolygonGeometry(d[0],d.slice(1)))});break;case"LineString":u.push(new GeoJSONLineStringGeometry([l.coordinates]));break;case"MultiLineString":u.push(new GeoJSONLineStringGeometry(l.coordinates))}var p=new GeoJSONRegion(s[n||"name"],u,s.cp);return p.properties=s,p})}const number=Object.freeze(Object.defineProperty({__proto__:null,MAX_SAFE_INTEGER,asc:asc$2,getPercentWithPrecision,getPixelPrecision,getPrecision,getPrecisionSafe,isNumeric,isRadianAroundZero,linearMap:linearMap$2,nice,numericToNumber,parseDate,quantile,quantity,quantityExponent,reformIntervals,remRadian,round:round$3},Symbol.toStringTag,{value:"Module"})),time=Object.freeze(Object.defineProperty({__proto__:null,format:format$1,parse:parseDate},Symbol.toStringTag,{value:"Module"})),graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,initProps,makeImage,makePath,mergePath,registerShape,resizePath,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"})),format=Object.freeze(Object.defineProperty({__proto__:null,addCommas,capitalFirst,encodeHTML,formatTime,formatTpl,getTextRect,getTooltipMarker,normalizeCssArray,toCamelCase,truncateText},Symbol.toStringTag,{value:"Module"})),util=Object.freeze(Object.defineProperty({__proto__:null,bind:bind$1,clone:clone$4,curry:curry$1,defaults,each:each$f,extend,filter,indexOf,inherits,isArray:isArray$1,isFunction:isFunction$1,isObject:isObject$3,isString:isString$1,map:map$1,merge,reduce},Symbol.toStringTag,{value:"Module"}));var inner$g=makeInner();function tickValuesToNumbers(t,n){var a=map$1(n,function(s){return t.scale.parse(s)});return t.type==="time"&&a.length>0&&(a.sort(),a.unshift(a[0]),a.push(a[a.length-1])),a}function createAxisLabels(t){var n=t.getLabelModel().get("customValues");if(n){var a=makeLabelFormatter(t),s=t.scale.getExtent(),l=tickValuesToNumbers(t,n),u=filter(l,function(c){return c>=s[0]&&c<=s[1]});return{labels:map$1(u,function(c){var p={value:c};return{formattedLabel:a(p),rawLabel:t.scale.getLabel(p),tickValue:c}})}}return t.type==="category"?makeCategoryLabels(t):makeRealNumberLabels(t)}function createAxisTicks(t,n){var a=t.getTickModel().get("customValues");if(a){var s=t.scale.getExtent(),l=tickValuesToNumbers(t,a);return{ticks:filter(l,function(u){return u>=s[0]&&u<=s[1]})}}return t.type==="category"?makeCategoryTicks(t,n):{ticks:map$1(t.scale.getTicks(),function(u){return u.value})}}function makeCategoryLabels(t){var n=t.getLabelModel(),a=makeCategoryLabelsActually(t,n);return!n.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:a.labelCategoryInterval}:a}function makeCategoryLabelsActually(t,n){var a=getListCache(t,"labels"),s=getOptionCategoryInterval(n),l=listCacheGet(a,s);if(l)return l;var u,c;return isFunction$1(s)?u=makeLabelsByCustomizedCategoryInterval(t,s):(c=s==="auto"?makeAutoCategoryInterval(t):s,u=makeLabelsByNumericCategoryInterval(t,c)),listCacheSet(a,s,{labels:u,labelCategoryInterval:c})}function makeCategoryTicks(t,n){var a=getListCache(t,"ticks"),s=getOptionCategoryInterval(n),l=listCacheGet(a,s);if(l)return l;var u,c;if((!n.get("show")||t.scale.isBlank())&&(u=[]),isFunction$1(s))u=makeLabelsByCustomizedCategoryInterval(t,s,!0);else if(s==="auto"){var p=makeCategoryLabelsActually(t,t.getLabelModel());c=p.labelCategoryInterval,u=map$1(p.labels,function(d){return d.tickValue})}else c=s,u=makeLabelsByNumericCategoryInterval(t,c,!0);return listCacheSet(a,s,{ticks:u,tickCategoryInterval:c})}function makeRealNumberLabels(t){var n=t.scale.getTicks(),a=makeLabelFormatter(t);return{labels:map$1(n,function(s,l){return{level:s.level,formattedLabel:a(s,l),rawLabel:t.scale.getLabel(s),tickValue:s.value}})}}function getListCache(t,n){return inner$g(t)[n]||(inner$g(t)[n]=[])}function listCacheGet(t,n){for(var a=0;a<t.length;a++)if(t[a].key===n)return t[a].value}function listCacheSet(t,n,a){return t.push({key:n,value:a}),a}function makeAutoCategoryInterval(t){var n=inner$g(t).autoInterval;return n??(inner$g(t).autoInterval=t.calculateCategoryInterval())}function calculateCategoryInterval(t){var n=fetchAutoCategoryIntervalCalculationParams(t),a=makeLabelFormatter(t),s=(n.axisRotate-n.labelRotate)/180*Math.PI,l=t.scale,u=l.getExtent(),c=l.count();if(u[1]-u[0]<1)return 0;var p=1;c>40&&(p=Math.max(1,Math.floor(c/40)));for(var d=u[0],x=t.dataToCoord(d+1)-t.dataToCoord(d),_=Math.abs(x*Math.cos(s)),S=Math.abs(x*Math.sin(s)),T=0,A=0;d<=u[1];d+=p){var R=0,D=0,O=getBoundingRect(a({value:d}),n.font,"center","top");R=O.width*1.3,D=O.height*1.3,T=Math.max(T,R,7),A=Math.max(A,D,7)}var F=T/_,z=A/S;isNaN(F)&&(F=1/0),isNaN(z)&&(z=1/0);var j=Math.max(0,Math.floor(Math.min(F,z))),Z=inner$g(t.model),W=t.getExtent(),J=Z.lastAutoInterval,en=Z.lastTickCount;return J!=null&&en!=null&&Math.abs(J-j)<=1&&Math.abs(en-c)<=1&&J>j&&Z.axisExtent0===W[0]&&Z.axisExtent1===W[1]?j=J:(Z.lastTickCount=c,Z.lastAutoInterval=j,Z.axisExtent0=W[0],Z.axisExtent1=W[1]),j}function fetchAutoCategoryIntervalCalculationParams(t){var n=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:n.get("rotate")||0,font:n.getFont()}}function makeLabelsByNumericCategoryInterval(t,n,a){var s=makeLabelFormatter(t),l=t.scale,u=l.getExtent(),c=t.getLabelModel(),p=[],d=Math.max((n||0)+1,1),x=u[0],_=l.count();x!==0&&d>1&&_/d>2&&(x=Math.round(Math.ceil(x/d)*d));var S=shouldShowAllLabels(t),T=c.get("showMinLabel")||S,A=c.get("showMaxLabel")||S;T&&x!==u[0]&&D(u[0]);for(var R=x;R<=u[1];R+=d)D(R);A&&R-d!==u[1]&&D(u[1]);function D(O){var F={value:O};p.push(a?O:{formattedLabel:s(F),rawLabel:l.getLabel(F),tickValue:O})}return p}function makeLabelsByCustomizedCategoryInterval(t,n,a){var s=t.scale,l=makeLabelFormatter(t),u=[];return each$f(s.getTicks(),function(c){var p=s.getLabel(c),d=c.value;n(c.value,p)&&u.push(a?d:{formattedLabel:l(c),rawLabel:p,tickValue:d})}),u}var NORMALIZED_EXTENT=[0,1],Axis=function(){function t(n,a,s){this.onBand=!1,this.inverse=!1,this.dim=n,this.scale=a,this._extent=s||[0,0]}return t.prototype.contain=function(n){var a=this._extent,s=Math.min(a[0],a[1]),l=Math.max(a[0],a[1]);return n>=s&&n<=l},t.prototype.containData=function(n){return this.scale.contain(n)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(n){return getPixelPrecision(n||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(n,a){var s=this._extent;s[0]=n,s[1]=a},t.prototype.dataToCoord=function(n,a){var s=this._extent,l=this.scale;return n=l.normalize(n),this.onBand&&l.type==="ordinal"&&(s=s.slice(),fixExtentWithBands(s,l.count())),linearMap$2(n,NORMALIZED_EXTENT,s,a)},t.prototype.coordToData=function(n,a){var s=this._extent,l=this.scale;this.onBand&&l.type==="ordinal"&&(s=s.slice(),fixExtentWithBands(s,l.count()));var u=linearMap$2(n,s,NORMALIZED_EXTENT,a);return this.scale.scale(u)},t.prototype.pointToData=function(n,a){},t.prototype.getTicksCoords=function(n){n=n||{};var a=n.tickModel||this.getTickModel(),s=createAxisTicks(this,a),l=s.ticks,u=map$1(l,function(p){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(p):p),tickValue:p}},this),c=a.get("alignWithLabel");return fixOnBandTicksCoords(this,u,c,n.clamp),u},t.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var n=this.model.getModel("minorTick"),a=n.get("splitNumber");a>0&&a<100||(a=5);var s=this.scale.getMinorTicks(a),l=map$1(s,function(u){return map$1(u,function(c){return{coord:this.dataToCoord(c),tickValue:c}},this)},this);return l},t.prototype.getViewLabels=function(){return createAxisLabels(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var n=this._extent,a=this.scale.getExtent(),s=a[1]-a[0]+(this.onBand?1:0);s===0&&(s=1);var l=Math.abs(n[1]-n[0]);return Math.abs(l)/s},t.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},t}();function fixExtentWithBands(t,n){var a=t[1]-t[0],s=n,l=a/s/2;t[0]+=l,t[1]-=l}function fixOnBandTicksCoords(t,n,a,s){var l=n.length;if(!t.onBand||a||!l)return;var u=t.getExtent(),c,p;if(l===1)n[0].coord=u[0],c=n[1]={coord:u[1],tickValue:n[0].tickValue};else{var d=n[l-1].tickValue-n[0].tickValue,x=(n[l-1].coord-n[0].coord)/d;each$f(n,function(A){A.coord-=x/2});var _=t.scale.getExtent();p=1+_[1]-n[l-1].tickValue,c={coord:n[l-1].coord+x*p,tickValue:_[1]+1},n.push(c)}var S=u[0]>u[1];T(n[0].coord,u[0])&&(s?n[0].coord=u[0]:n.shift()),s&&T(u[0],n[0].coord)&&n.unshift({coord:u[0]}),T(u[1],c.coord)&&(s?c.coord=u[1]:n.pop()),s&&T(c.coord,u[1])&&n.push({coord:u[1]});function T(A,R){return A=round$3(A),R=round$3(R),S?A>R:A<R}}function extendComponentModel(t){var n=ComponentModel.extend(t);return ComponentModel.registerClass(n),n}function extendComponentView(t){var n=ComponentView.extend(t);return ComponentView.registerClass(n),n}function extendSeriesModel(t){var n=SeriesModel.extend(t);return SeriesModel.registerClass(n),n}function extendChartView(t){var n=ChartView.extend(t);return ChartView.registerClass(n),n}var PI2$2=Math.PI*2,CMD$1=PathProxy.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(t,n,a,s,l){var u=a.width,c=a.height;switch(t){case"top":s.set(a.x+u/2,a.y-n),l.set(0,-1);break;case"bottom":s.set(a.x+u/2,a.y+c+n),l.set(0,1);break;case"left":s.set(a.x-n,a.y+c/2),l.set(-1,0);break;case"right":s.set(a.x+u+n,a.y+c/2),l.set(1,0);break}}function projectPointToArc(t,n,a,s,l,u,c,p,d){c-=t,p-=n;var x=Math.sqrt(c*c+p*p);c/=x,p/=x;var _=c*a+t,S=p*a+n;if(Math.abs(s-l)%PI2$2<1e-4)return d[0]=_,d[1]=S,x-a;if(u){var T=s;s=normalizeRadian(l),l=normalizeRadian(T)}else s=normalizeRadian(s),l=normalizeRadian(l);s>l&&(l+=PI2$2);var A=Math.atan2(p,c);if(A<0&&(A+=PI2$2),A>=s&&A<=l||A+PI2$2>=s&&A+PI2$2<=l)return d[0]=_,d[1]=S,x-a;var R=a*Math.cos(s)+t,D=a*Math.sin(s)+n,O=a*Math.cos(l)+t,F=a*Math.sin(l)+n,z=(R-c)*(R-c)+(D-p)*(D-p),j=(O-c)*(O-c)+(F-p)*(F-p);return z<j?(d[0]=R,d[1]=D,Math.sqrt(z)):(d[0]=O,d[1]=F,Math.sqrt(j))}function projectPointToLine(t,n,a,s,l,u,c,p){var d=l-t,x=u-n,_=a-t,S=s-n,T=Math.sqrt(_*_+S*S);_/=T,S/=T;var A=d*_+x*S,R=A/T;p&&(R=Math.min(Math.max(R,0),1)),R*=T;var D=c[0]=t+R*_,O=c[1]=n+R*S;return Math.sqrt((D-l)*(D-l)+(O-u)*(O-u))}function projectPointToRect(t,n,a,s,l,u,c){a<0&&(t=t+a,a=-a),s<0&&(n=n+s,s=-s);var p=t+a,d=n+s,x=c[0]=Math.min(Math.max(l,t),p),_=c[1]=Math.min(Math.max(u,n),d);return Math.sqrt((x-l)*(x-l)+(_-u)*(_-u))}var tmpPt=[];function nearestPointOnRect(t,n,a){var s=projectPointToRect(n.x,n.y,n.width,n.height,t.x,t.y,tmpPt);return a.set(tmpPt[0],tmpPt[1]),s}function nearestPointOnPath(t,n,a){for(var s=0,l=0,u=0,c=0,p,d,x=1/0,_=n.data,S=t.x,T=t.y,A=0;A<_.length;){var R=_[A++];A===1&&(s=_[A],l=_[A+1],u=s,c=l);var D=x;switch(R){case CMD$1.M:u=_[A++],c=_[A++],s=u,l=c;break;case CMD$1.L:D=projectPointToLine(s,l,_[A],_[A+1],S,T,tmpPt,!0),s=_[A++],l=_[A++];break;case CMD$1.C:D=cubicProjectPoint(s,l,_[A++],_[A++],_[A++],_[A++],_[A],_[A+1],S,T,tmpPt),s=_[A++],l=_[A++];break;case CMD$1.Q:D=quadraticProjectPoint(s,l,_[A++],_[A++],_[A],_[A+1],S,T,tmpPt),s=_[A++],l=_[A++];break;case CMD$1.A:var O=_[A++],F=_[A++],z=_[A++],j=_[A++],Z=_[A++],W=_[A++];A+=1;var J=!!(1-_[A++]);p=Math.cos(Z)*z+O,d=Math.sin(Z)*j+F,A<=1&&(u=p,c=d);var en=(S-O)*j/z+O;D=projectPointToArc(O,F,j,Z,Z+W,J,en,T,tmpPt),s=Math.cos(Z+W)*z+O,l=Math.sin(Z+W)*j+F;break;case CMD$1.R:u=s=_[A++],c=l=_[A++];var tn=_[A++],Ct=_[A++];D=projectPointToRect(u,c,tn,Ct,S,T,tmpPt);break;case CMD$1.Z:D=projectPointToLine(s,l,u,c,S,T,tmpPt,!0),s=u,l=c;break}D<x&&(x=D,a.set(tmpPt[0],tmpPt[1]))}return x}var pt0=new Point,pt1=new Point,pt2=new Point,dir=new Point,dir2=new Point;function updateLabelLinePoints(t,n){if(t){var a=t.getTextGuideLine(),s=t.getTextContent();if(s&&a){var l=t.textGuideLineConfig||{},u=[[0,0],[0,0],[0,0]],c=l.candidates||DEFAULT_SEARCH_SPACE,p=s.getBoundingRect().clone();p.applyTransform(s.getComputedTransform());var d=1/0,x=l.anchor,_=t.getComputedTransform(),S=_&&invert([],_),T=n.get("length2")||0;x&&pt2.copy(x);for(var A=0;A<c.length;A++){var R=c[A];getCandidateAnchor(R,0,p,pt0,dir),Point.scaleAndAdd(pt1,pt0,dir,T),pt1.transform(S);var D=t.getBoundingRect(),O=x?x.distance(pt1):t instanceof Path?nearestPointOnPath(pt1,t.path,pt2):nearestPointOnRect(pt1,D,pt2);O<d&&(d=O,pt1.transform(_),pt2.transform(_),pt2.toArray(u[0]),pt1.toArray(u[1]),pt0.toArray(u[2]))}limitTurnAngle(u,n.get("minTurnAngle")),a.setShape({points:u})}}}var tmpArr=[],tmpProjPoint=new Point;function limitTurnAngle(t,n){if(n<=180&&n>0){n=n/180*Math.PI,pt0.fromArray(t[0]),pt1.fromArray(t[1]),pt2.fromArray(t[2]),Point.sub(dir,pt0,pt1),Point.sub(dir2,pt2,pt1);var a=dir.len(),s=dir2.len();if(!(a<.001||s<.001)){dir.scale(1/a),dir2.scale(1/s);var l=dir.dot(dir2),u=Math.cos(n);if(u<l){var c=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,c/Math.tan(Math.PI-n));var p=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(p))return;p<0?Point.copy(tmpProjPoint,pt1):p>1&&Point.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(t[1])}}}}function limitSurfaceAngle(t,n,a){if(a<=180&&a>0){a=a/180*Math.PI,pt0.fromArray(t[0]),pt1.fromArray(t[1]),pt2.fromArray(t[2]),Point.sub(dir,pt1,pt0),Point.sub(dir2,pt2,pt1);var s=dir.len(),l=dir2.len();if(!(s<.001||l<.001)){dir.scale(1/s),dir2.scale(1/l);var u=dir.dot(n),c=Math.cos(a);if(u<c){var p=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var d=Math.PI/2,x=Math.acos(dir2.dot(n)),_=d+x-a;if(_>=d)Point.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,p/Math.tan(Math.PI/2-_));var S=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(S))return;S<0?Point.copy(tmpProjPoint,pt1):S>1&&Point.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(t[1])}}}}function setLabelLineState(t,n,a,s){var l=a==="normal",u=l?t:t.ensureState(a);u.ignore=n;var c=s.get("smooth");c&&c===!0&&(c=.3),u.shape=u.shape||{},c>0&&(u.shape.smooth=c);var p=s.getModel("lineStyle").getLineStyle();l?t.useStyle(p):u.style=p}function buildLabelLinePath(t,n){var a=n.smooth,s=n.points;if(s)if(t.moveTo(s[0][0],s[0][1]),a>0&&s.length>=3){var l=dist$1(s[0],s[1]),u=dist$1(s[1],s[2]);if(!l||!u){t.lineTo(s[1][0],s[1][1]),t.lineTo(s[2][0],s[2][1]);return}var c=Math.min(l,u)*a,p=lerp$1([],s[1],s[0],c/l),d=lerp$1([],s[1],s[2],c/u),x=lerp$1([],p,d,.5);t.bezierCurveTo(p[0],p[1],p[0],p[1],x[0],x[1]),t.bezierCurveTo(d[0],d[1],d[0],d[1],s[2][0],s[2][1])}else for(var _=1;_<s.length;_++)t.lineTo(s[_][0],s[_][1])}function setLabelLineStyle(t,n,a){var s=t.getTextGuideLine(),l=t.getTextContent();if(!l){s&&t.removeTextGuideLine();return}for(var u=n.normal,c=u.get("show"),p=l.ignore,d=0;d<DISPLAY_STATES.length;d++){var x=DISPLAY_STATES[d],_=n[x],S=x==="normal";if(_){var T=_.get("show"),A=S?p:retrieve2(l.states[x]&&l.states[x].ignore,p);if(A||!retrieve2(T,c)){var R=S?s:s&&s.states[x];R&&(R.ignore=!0),s&&setLabelLineState(s,!0,x,_);continue}s||(s=new Polyline$1,t.setTextGuideLine(s),!S&&(p||!c)&&setLabelLineState(s,!0,"normal",n.normal),t.stateProxy&&(s.stateProxy=t.stateProxy)),setLabelLineState(s,!1,x,_)}}if(s){defaults(s.style,a),s.style.fill=null;var D=u.get("showAbove"),O=t.textGuideLineConfig=t.textGuideLineConfig||{};O.showAbove=D||!1,s.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(t,n){n=n||"labelLine";for(var a={normal:t.getModel(n)},s=0;s<SPECIAL_STATES.length;s++){var l=SPECIAL_STATES[s];a[l]=t.getModel([l,n])}return a}function prepareLayoutList(t){for(var n=[],a=0;a<t.length;a++){var s=t[a];if(!s.defaultAttr.ignore){var l=s.label,u=l.getComputedTransform(),c=l.getBoundingRect(),p=!u||u[1]<1e-5&&u[2]<1e-5,d=l.style.margin||0,x=c.clone();x.applyTransform(u),x.x-=d/2,x.y-=d/2,x.width+=d,x.height+=d;var _=p?new OrientedBoundingRect(c,u):null;n.push({label:l,labelLine:s.labelLine,rect:x,localRect:c,obb:_,priority:s.priority,defaultAttr:s.defaultAttr,layoutOption:s.computedLayoutOption,axisAligned:p,transform:u})}}return n}function shiftLayout(t,n,a,s,l,u){var c=t.length;if(c<2)return;t.sort(function(J,en){return J.rect[n]-en.rect[n]});for(var p=0,d,x=!1,_=0;_<c;_++){var S=t[_],T=S.rect;d=T[n]-p,d<0&&(T[n]-=d,S.label[n]-=d,x=!0),p=T[n]+T[a]}var A=t[0],R=t[c-1],D,O;F(),D<0&&Z(-D,.8),O<0&&Z(O,.8),F(),z(D,O,1),z(O,D,-1),F(),D<0&&W(-D),O<0&&W(O);function F(){D=A.rect[n]-s,O=l-R.rect[n]-R.rect[a]}function z(J,en,tn){if(J<0){var Ct=Math.min(en,-J);if(Ct>0){j(Ct*tn,0,c);var Q=Ct+J;Q<0&&Z(-Q*tn,1)}else Z(-J*tn,1)}}function j(J,en,tn){J!==0&&(x=!0);for(var Ct=en;Ct<tn;Ct++){var Q=t[Ct],on=Q.rect;on[n]+=J,Q.label[n]+=J}}function Z(J,en){for(var tn=[],Ct=0,Q=1;Q<c;Q++){var on=t[Q-1].rect,gn=Math.max(t[Q].rect[n]-on[n]-on[a],0);tn.push(gn),Ct+=gn}if(Ct){var In=Math.min(Math.abs(J)/Ct,en);if(J>0)for(var Q=0;Q<c-1;Q++){var dn=tn[Q]*In;j(dn,0,Q+1)}else for(var Q=c-1;Q>0;Q--){var dn=tn[Q-1]*In;j(-dn,Q,c)}}}function W(J){var en=J<0?-1:1;J=Math.abs(J);for(var tn=Math.ceil(J/(c-1)),Ct=0;Ct<c-1;Ct++)if(en>0?j(tn,0,Ct+1):j(-tn,c-Ct-1,c),J-=tn,J<=0)return}return x}function shiftLayoutOnX(t,n,a,s){return shiftLayout(t,"x","width",n,a)}function shiftLayoutOnY(t,n,a,s){return shiftLayout(t,"y","height",n,a)}function hideOverlap(t){var n=[];t.sort(function(D,O){return O.priority-D.priority});var a=new BoundingRect(0,0,0,0);function s(D){if(!D.ignore){var O=D.ensureState("emphasis");O.ignore==null&&(O.ignore=!1)}D.ignore=!0}for(var l=0;l<t.length;l++){var u=t[l],c=u.axisAligned,p=u.localRect,d=u.transform,x=u.label,_=u.labelLine;a.copy(u.rect),a.width-=.1,a.height-=.1,a.x+=.05,a.y+=.05;for(var S=u.obb,T=!1,A=0;A<n.length;A++){var R=n[A];if(a.intersect(R.rect)){if(c&&R.axisAligned){T=!0;break}if(R.obb||(R.obb=new OrientedBoundingRect(R.localRect,R.transform)),S||(S=new OrientedBoundingRect(p,d)),S.intersect(R.obb)){T=!0;break}}}T?(s(x),_&&s(_)):(x.attr("ignore",u.defaultAttr.ignore),_&&_.attr("ignore",u.defaultAttr.labelGuideIgnore),n.push(u))}}function cloneArr(t){if(t){for(var n=[],a=0;a<t.length;a++)n.push(t[a].slice());return n}}function prepareLayoutCallbackParams(t,n){var a=t.label,s=n&&n.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:a.style.align,verticalAlign:a.style.verticalAlign,labelLinePoints:cloneArr(s&&s.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(t,n,a){for(var s=0;s<a.length;s++){var l=a[s];n[l]!=null&&(t[l]=n[l])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(n,a,s,l,u){var c=l.style,p=l.__hostTarget,d=p.textConfig||{},x=l.getComputedTransform(),_=l.getBoundingRect().plain();BoundingRect.applyTransform(_,_,x),x?dummyTransformable.setLocalTransform(x):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var S=l.__hostTarget,T;if(S){T=S.getBoundingRect().plain();var A=S.getComputedTransform();BoundingRect.applyTransform(T,T,A)}var R=T&&S.getTextGuideLine();this._labelList.push({label:l,labelLine:R,seriesModel:s,dataIndex:n,dataType:a,layoutOption:u,computedLayoutOption:null,rect:_,hostRect:T,priority:T?T.width*T.height:0,defaultAttr:{ignore:l.ignore,labelGuideIgnore:R&&R.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:c.x,y:c.y,align:c.align,verticalAlign:c.verticalAlign,width:c.width,height:c.height,fontSize:c.fontSize},cursor:l.cursor,attachedPos:d.position,attachedRot:d.rotation}})},t.prototype.addLabelsOfSeries=function(n){var a=this;this._chartViewList.push(n);var s=n.__model,l=s.get("labelLayout");(isFunction$1(l)||keys(l).length)&&n.group.traverse(function(u){if(u.ignore)return!0;var c=u.getTextContent(),p=getECData(u);c&&!c.disableLabelLayout&&a._addLabel(p.dataIndex,p.dataType,s,c,l)})},t.prototype.updateLayoutConfig=function(n){var a=n.getWidth(),s=n.getHeight();function l(j,Z){return function(){updateLabelLinePoints(j,Z)}}for(var u=0;u<this._labelList.length;u++){var c=this._labelList[u],p=c.label,d=p.__hostTarget,x=c.defaultAttr,_=void 0;isFunction$1(c.layoutOption)?_=c.layoutOption(prepareLayoutCallbackParams(c,d)):_=c.layoutOption,_=_||{},c.computedLayoutOption=_;var S=Math.PI/180;d&&d.setTextConfig({local:!1,position:_.x!=null||_.y!=null?null:x.attachedPos,rotation:_.rotate!=null?_.rotate*S:x.attachedRot,offset:[_.dx||0,_.dy||0]});var T=!1;if(_.x!=null?(p.x=parsePercent(_.x,a),p.setStyle("x",0),T=!0):(p.x=x.x,p.setStyle("x",x.style.x)),_.y!=null?(p.y=parsePercent(_.y,s),p.setStyle("y",0),T=!0):(p.y=x.y,p.setStyle("y",x.style.y)),_.labelLinePoints){var A=d.getTextGuideLine();A&&(A.setShape({points:_.labelLinePoints}),T=!1)}var R=labelLayoutInnerStore(p);R.needsUpdateLabelLine=T,p.rotation=_.rotate!=null?_.rotate*S:x.rotation,p.scaleX=x.scaleX,p.scaleY=x.scaleY;for(var D=0;D<LABEL_OPTION_TO_STYLE_KEYS.length;D++){var O=LABEL_OPTION_TO_STYLE_KEYS[D];p.setStyle(O,_[O]!=null?_[O]:x.style[O])}if(_.draggable){if(p.draggable=!0,p.cursor="move",d){var F=c.seriesModel;if(c.dataIndex!=null){var z=c.seriesModel.getData(c.dataType);F=z.getItemModel(c.dataIndex)}p.on("drag",l(d,F.getModel("labelLine")))}}else p.off("drag"),p.cursor=x.cursor}},t.prototype.layout=function(n){var a=n.getWidth(),s=n.getHeight(),l=prepareLayoutList(this._labelList),u=filter(l,function(d){return d.layoutOption.moveOverlap==="shiftX"}),c=filter(l,function(d){return d.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(u,0,a),shiftLayoutOnY(c,0,s);var p=filter(l,function(d){return d.layoutOption.hideOverlap});hideOverlap(p)},t.prototype.processLabelsOverall=function(){var n=this;each$f(this._chartViewList,function(a){var s=a.__model,l=a.ignoreLabelLineUpdate,u=s.isAnimationEnabled();a.group.traverse(function(c){if(c.ignore&&!c.forceLabelAnimation)return!0;var p=!l,d=c.getTextContent();!p&&d&&(p=labelLayoutInnerStore(d).needsUpdateLabelLine),p&&n._updateLabelLine(c,s),u&&n._animateLabels(c,s)})})},t.prototype._updateLabelLine=function(n,a){var s=n.getTextContent(),l=getECData(n),u=l.dataIndex;if(s&&u!=null){var c=a.getData(l.dataType),p=c.getItemModel(u),d={},x=c.getItemVisual(u,"style");if(x){var _=c.getVisual("drawType");d.stroke=x[_]}var S=p.getModel("labelLine");setLabelLineStyle(n,getLabelLineStatesModels(p),d),updateLabelLinePoints(n,S)}},t.prototype._animateLabels=function(n,a){var s=n.getTextContent(),l=n.getTextGuideLine();if(s&&(n.forceLabelAnimation||!s.ignore&&!s.invisible&&!n.disableLabelAnimation&&!isElementRemoved(n))){var u=labelLayoutInnerStore(s),c=u.oldLayout,p=getECData(n),d=p.dataIndex,x={x:s.x,y:s.y,rotation:s.rotation},_=a.getData(p.dataType);if(c){s.attr(c);var T=n.prevStates;T&&(indexOf(T,"select")>=0&&s.attr(u.oldLayoutSelect),indexOf(T,"emphasis")>=0&&s.attr(u.oldLayoutEmphasis)),updateProps$1(s,x,a,d)}else if(s.attr(x),!labelInner(s).valueAnimation){var S=retrieve2(s.style.opacity,1);s.style.opacity=0,initProps(s,{style:{opacity:S}},a,d)}if(u.oldLayout=x,s.states.select){var A=u.oldLayoutSelect={};extendWithKeys(A,x,LABEL_LAYOUT_PROPS),extendWithKeys(A,s.states.select,LABEL_LAYOUT_PROPS)}if(s.states.emphasis){var R=u.oldLayoutEmphasis={};extendWithKeys(R,x,LABEL_LAYOUT_PROPS),extendWithKeys(R,s.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(s,d,_,a,a)}if(l&&!l.ignore&&!l.invisible){var u=labelLineAnimationStore(l),c=u.oldLayout,D={points:l.shape.points};c?(l.attr({shape:c}),updateProps$1(l,{shape:D},a)):(l.setShape(D),l.style.strokePercent=0,initProps(l,{style:{strokePercent:1}},a)),u.oldLayout=D}},t}(),getLabelManager=makeInner();function installLabelLayout(t){t.registerUpdateLifecycle("series:beforeupdate",function(n,a,s){var l=getLabelManager(a).labelManager;l||(l=getLabelManager(a).labelManager=new LabelManager),l.clearLabels()}),t.registerUpdateLifecycle("series:layoutlabels",function(n,a,s){var l=getLabelManager(a).labelManager;s.updatedSeries.forEach(function(u){l.addLabelsOfSeries(a.getViewOfSeriesModel(u))}),l.updateLayoutConfig(a),l.layout(a),l.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=function(){function t(){}return t.prototype.reset=function(n){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,n||4)},t.prototype.moveTo=function(n,a){this._add("M",n,a)},t.prototype.lineTo=function(n,a){this._add("L",n,a)},t.prototype.bezierCurveTo=function(n,a,s,l,u,c){this._add("C",n,a,s,l,u,c)},t.prototype.quadraticCurveTo=function(n,a,s,l){this._add("Q",n,a,s,l)},t.prototype.arc=function(n,a,s,l,u,c){this.ellipse(n,a,s,s,0,l,u,c)},t.prototype.ellipse=function(n,a,s,l,u,c,p,d){var x=p-c,_=!d,S=Math.abs(x),T=isAroundZero(S-PI2$1)||(_?x>=PI2$1:-x>=PI2$1),A=x>0?x%PI2$1:x%PI2$1+PI2$1,R=!1;T?R=!0:isAroundZero(S)?R=!1:R=A>=PI$4==!!_;var D=n+s*mathCos(c),O=a+l*mathSin(c);this._start&&this._add("M",D,O);var F=Math.round(u*degree);if(T){var z=1/this._p,j=(_?1:-1)*(PI2$1-z);this._add("A",s,l,F,1,+_,n+s*mathCos(c+j),a+l*mathSin(c+j)),z>.01&&this._add("A",s,l,F,0,+_,D,O)}else{var Z=n+s*mathCos(p),W=a+l*mathSin(p);this._add("A",s,l,F,+R,+_,Z,W)}},t.prototype.rect=function(n,a,s,l){this._add("M",n,a),this._add("l",s,0),this._add("l",0,l),this._add("l",-s,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(n,a,s,l,u,c,p,d,x){for(var _=[],S=this._p,T=1;T<arguments.length;T++){var A=arguments[T];if(isNaN(A)){this._invalid=!0;return}_.push(Math.round(A*S)/S)}this._d.push(n+_.join(" ")),this._start=n==="Z"},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),NONE="none",mathRound=Math.round;function pathHasFill(t){var n=t.fill;return n!=null&&n!==NONE}function pathHasStroke(t){var n=t.stroke;return n!=null&&n!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(t){return"stroke-"+t.toLowerCase()});function mapStyleToAttrs(t,n,a,s){var l=n.opacity==null?1:n.opacity;if(a instanceof ZRImage){t("opacity",l);return}if(pathHasFill(n)){var u=normalizeColor(n.fill);t("fill",u.color);var c=n.fillOpacity!=null?n.fillOpacity*u.opacity*l:u.opacity*l;c<1&&t("fill-opacity",c)}else t("fill",NONE);if(pathHasStroke(n)){var p=normalizeColor(n.stroke);t("stroke",p.color);var d=n.strokeNoScale?a.getLineScale():1,x=d?(n.lineWidth||0)/d:0,_=n.strokeOpacity!=null?n.strokeOpacity*p.opacity*l:p.opacity*l,S=n.strokeFirst;if(x!==1&&t("stroke-width",x),S&&t("paint-order",S?"stroke":"fill"),_<1&&t("stroke-opacity",_),n.lineDash){var T=getLineDash(a),A=T[0],R=T[1];A&&(R=mathRound(R||0),t("stroke-dasharray",A.join(",")),(R||s)&&t("stroke-dashoffset",R))}for(var D=0;D<strokeProps.length;D++){var O=strokeProps[D];if(n[O]!==DEFAULT_PATH_STYLE[O]){var F=n[O]||DEFAULT_PATH_STYLE[O];F&&t(svgStrokeProps[D],F)}}}}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(t){return document.createElementNS(SVGNS,t)}function createVNode(t,n,a,s,l){return{tag:t,attrs:a||{},children:s,text:l,key:n}}function createElementOpen(t,n){var a=[];if(n)for(var s in n){var l=n[s],u=s;l!==!1&&(l!==!0&&l!=null&&(u+='="'+l+'"'),a.push(u))}return"<"+t+" "+a.join(" ")+">"}function createElementClose(t){return"</"+t+">"}function vNodeToString(t,n){n=n||{};var a=n.newline?`
`:"";function s(l){var u=l.children,c=l.tag,p=l.attrs,d=l.text;return createElementOpen(c,p)+(c!=="style"?encodeHTML(d):d||"")+(u?""+a+map$1(u,function(x){return s(x)}).join(a)+a:"")+createElementClose(c)}return s(t)}function getCssString(t,n,a){a=a||{};var s=a.newline?`
`:"",l=" {"+s,u=s+"}",c=map$1(keys(t),function(d){return d+l+map$1(keys(t[d]),function(x){return x+":"+t[d][x]+";"}).join(s)+u}).join(s),p=map$1(keys(n),function(d){return"@keyframes "+d+l+map$1(keys(n[d]),function(x){return x+l+map$1(keys(n[d][x]),function(_){var S=n[d][x][_];return _==="d"&&(S='path("'+S+'")'),_+":"+S+";"}).join(s)+u}).join(s)+u}).join(s);return!c&&!p?"":["<![CDATA[",c,p,"]]>"].join(s)}function createBrushScope(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(t,n,a,s){return createVNode("svg","root",{width:t,height:n,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:s?"0 0 "+t+" "+n:!1},a)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(t,n,a){var s=extend({},t.shape);extend(s,n),t.buildPath(a,s);var l=new SVGPathRebuilder;return l.reset(getPathPrecision(t)),a.rebuildPath(l,1),l.generateStr(),l.getStr()}function setTransformOrigin(t,n){var a=n.originX,s=n.originY;(a||s)&&(t[transformOriginKey]=a+"px "+s+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(t,n){var a=n.zrId+"-ani-"+n.cssAnimIdx++;return n.cssAnims[a]=t,a}function createCompoundPathCSSAnimation(t,n,a){var s=t.shape.paths,l={},u,c;if(each$f(s,function(d){var x=createBrushScope(a.zrId);x.animation=!0,createCSSAnimation(d,{},x,!0);var _=x.cssAnims,S=x.cssNodes,T=keys(_),A=T.length;if(A){c=T[A-1];var R=_[c];for(var D in R){var O=R[D];l[D]=l[D]||{d:""},l[D].d+=O.d||""}for(var F in S){var z=S[F].animation;z.indexOf(c)>=0&&(u=z)}}}),!!u){n.d=!1;var p=addAnimation(l,a);return u.replace(c,p)}}function getEasingFunc(t){return isString$1(t)?EASING_MAP[t]?"cubic-bezier("+EASING_MAP[t]+")":createCubicEasingFunc(t)?t:"":""}function createCSSAnimation(t,n,a,s){var l=t.animators,u=l.length,c=[];if(t instanceof CompoundPath){var p=createCompoundPathCSSAnimation(t,n,a);if(p)c.push(p);else if(!u)return}else if(!u)return;for(var d={},x=0;x<u;x++){var _=l[x],S=[_.getMaxTime()/1e3+"s"],T=getEasingFunc(_.getClip().easing),A=_.getDelay();T?S.push(T):S.push("linear"),A&&S.push(A/1e3+"s"),_.getLoop()&&S.push("infinite");var R=S.join(" ");d[R]=d[R]||[R,[]],d[R][1].push(_)}function D(z){var j=z[1],Z=j.length,W={},J={},en={},tn="animation-timing-function";function Ct(Sx,Ex,Cx){for(var Ax=Sx.getTracks(),Tx=Sx.getMaxTime(),kx=0;kx<Ax.length;kx++){var Rx=Ax[kx];if(Rx.needsAnimate()){var $x=Rx.keyframes,Gx=Rx.propName;if(Cx&&(Gx=Cx(Gx)),Gx)for(var qx=0;qx<$x.length;qx++){var Dx=$x[qx],lE=Math.round(Dx.time/Tx*100)+"%",cE=getEasingFunc(Dx.easing),nE=Dx.rawValue;(isString$1(nE)||isNumber(nE))&&(Ex[lE]=Ex[lE]||{},Ex[lE][Gx]=Dx.rawValue,cE&&(Ex[lE][tn]=cE))}}}}for(var Q=0;Q<Z;Q++){var on=j[Q],gn=on.targetName;gn?gn==="shape"&&Ct(on,J):!s&&Ct(on,W)}for(var In in W){var dn={};copyTransform(dn,t),extend(dn,W[In]);var ix=getSRTTransformString(dn),Cn=W[In][tn];en[In]=ix?{transform:ix}:{},setTransformOrigin(en[In],dn),Cn&&(en[In][tn]=Cn)}var ax,sx=!0;for(var In in J){en[In]=en[In]||{};var lx=!ax,Cn=J[In][tn];lx&&(ax=new PathProxy);var ox=ax.len();ax.reset(),en[In].d=buildPathString(t,J[In],ax);var hx=ax.len();if(!lx&&ox!==hx){sx=!1;break}Cn&&(en[In][tn]=Cn)}if(!sx)for(var In in en)delete en[In].d;if(!s)for(var Q=0;Q<Z;Q++){var on=j[Q],gn=on.targetName;gn==="style"&&Ct(on,en,function(Ax){return ANIMATE_STYLE_MAP[Ax]})}for(var _x=keys(en),ux=!0,px,Q=1;Q<_x.length;Q++){var dx=_x[Q-1],mx=_x[Q];if(en[dx][transformOriginKey]!==en[mx][transformOriginKey]){ux=!1;break}px=en[dx][transformOriginKey]}if(ux&&px){for(var In in en)en[In][transformOriginKey]&&delete en[In][transformOriginKey];n[transformOriginKey]=px}if(filter(_x,function(Sx){return keys(en[Sx]).length>0}).length){var gx=addAnimation(en,a);return gx+" "+z[0]+" both"}}for(var O in d){var p=D(d[O]);p&&c.push(p)}if(c.length){var F=a.zrId+"-cls-"+getClassId();a.cssNodes["."+F]={animation:c.join(",")},n.class=F}}function createCSSEmphasis(t,n,a){if(!t.ignore)if(t.isSilent()){var s={"pointer-events":"none"};setClassAttribute(s,n,a)}else{var l=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},u=l.fill;if(!u){var c=t.style&&t.style.fill,p=t.states.select&&t.states.select.style&&t.states.select.style.fill,d=t.currentStates.indexOf("select")>=0&&p||c;d&&(u=liftColor(d))}var x=l.lineWidth;if(x){var _=!l.strokeNoScale&&t.transform?t.transform[0]:1;x=x/_}var s={cursor:"pointer"};u&&(s.fill=u),l.stroke&&(s.stroke=l.stroke),x&&(s["stroke-width"]=x),setClassAttribute(s,n,a)}}function setClassAttribute(t,n,a,s){var l=JSON.stringify(t),u=a.cssStyleCache[l];u||(u=a.zrId+"-cls-"+getClassId(),a.cssStyleCache[l]=u,a.cssNodes["."+u+":hover"]=t),n.class=n.class?n.class+" "+u:u}var round$1=Math.round;function isImageLike(t){return t&&isString$1(t.src)}function isCanvasLike(t){return t&&isFunction$1(t.toDataURL)}function setStyleAttrs(t,n,a,s){mapStyleToAttrs(function(l,u){var c=l==="fill"||l==="stroke";c&&isGradient(u)?setGradient(n,t,l,s):c&&isPattern(u)?setPattern(a,t,l,s):t[l]=u,c&&s.ssr&&u==="none"&&(t["pointer-events"]="visible")},n,a,!1),setShadow(a,t,s)}function setMetaData(t,n){var a=getElementSSRData(n);a&&(a.each(function(s,l){s!=null&&(t[(META_DATA_PREFIX+l).toLowerCase()]=s+"")}),n.isSilent()&&(t[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(t){return isAroundZero(t[0]-1)&&isAroundZero(t[1])&&isAroundZero(t[2])&&isAroundZero(t[3]-1)}function noTranslate(t){return isAroundZero(t[4])&&isAroundZero(t[5])}function setTransform(t,n,a){if(n&&!(noTranslate(n)&&noRotateScale(n))){var s=1e4;t.transform=noRotateScale(n)?"translate("+round$1(n[4]*s)/s+" "+round$1(n[5]*s)/s+")":getMatrixStr(n)}}function convertPolyShape(t,n,a){for(var s=t.points,l=[],u=0;u<s.length;u++)l.push(round$1(s[u][0]*a)/a),l.push(round$1(s[u][1]*a)/a);n.points=l.join(" ")}function validatePolyShape(t){return!t.smooth}function createAttrsConvert(t){var n=map$1(t,function(a){return typeof a=="string"?[a,a]:a});return function(a,s,l){for(var u=0;u<n.length;u++){var c=n[u],p=a[c[0]];p!=null&&(s[c[1]]=round$1(p*l)/l)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(t){for(var n=t.animators,a=0;a<n.length;a++)if(n[a].targetName==="shape")return!0;return!1}function brushSVGPath(t,n){var a=t.style,s=t.shape,l=builtinShapesDef[t.type],u={},c=n.animation,p="path",d=t.style.strokePercent,x=n.compress&&getPathPrecision(t)||4;if(l&&!n.willUpdate&&!(l[1]&&!l[1](s))&&!(c&&hasShapeAnimation(t))&&!(d<1)){p=t.type;var _=Math.pow(10,x);l[0](s,u,_)}else{var S=!t.path||t.shapeChanged();t.path||t.createPathProxy();var T=t.path;S&&(T.beginPath(),t.buildPath(T,t.shape),t.pathUpdated());var A=T.getVersion(),R=t,D=R.__svgPathBuilder;(R.__svgPathVersion!==A||!D||d!==R.__svgPathStrokePercent)&&(D||(D=R.__svgPathBuilder=new SVGPathRebuilder),D.reset(x),T.rebuildPath(D,d),D.generateStr(),R.__svgPathVersion=A,R.__svgPathStrokePercent=d),u.d=D.getStr()}return setTransform(u,t.transform),setStyleAttrs(u,a,t,n),setMetaData(u,t),n.animation&&createCSSAnimation(t,u,n),n.emphasis&&createCSSEmphasis(t,u,n),createVNode(p,t.id+"",u)}function brushSVGImage(t,n){var a=t.style,s=a.image;if(s&&!isString$1(s)&&(isImageLike(s)?s=s.src:isCanvasLike(s)&&(s=s.toDataURL())),!!s){var l=a.x||0,u=a.y||0,c=a.width,p=a.height,d={href:s,width:c,height:p};return l&&(d.x=l),u&&(d.y=u),setTransform(d,t.transform),setStyleAttrs(d,a,t,n),setMetaData(d,t),n.animation&&createCSSAnimation(t,d,n),createVNode("image",t.id+"",d)}}function brushSVGTSpan(t,n){var a=t.style,s=a.text;if(s!=null&&(s+=""),!(!s||isNaN(a.x)||isNaN(a.y))){var l=a.font||DEFAULT_FONT,u=a.x||0,c=adjustTextY$1(a.y||0,getLineHeight(l),a.textBaseline),p=TEXT_ALIGN_TO_ANCHOR[a.textAlign]||a.textAlign,d={"dominant-baseline":"central","text-anchor":p};if(hasSeparateFont(a)){var x="",_=a.fontStyle,S=parseFontSize(a.fontSize);if(!parseFloat(S))return;var T=a.fontFamily||DEFAULT_FONT_FAMILY,A=a.fontWeight;x+="font-size:"+S+";font-family:"+T+";",_&&_!=="normal"&&(x+="font-style:"+_+";"),A&&A!=="normal"&&(x+="font-weight:"+A+";"),d.style=x}else d.style="font: "+l;return s.match(/\s/)&&(d["xml:space"]="preserve"),u&&(d.x=u),c&&(d.y=c),setTransform(d,t.transform),setStyleAttrs(d,a,t,n),setMetaData(d,t),n.animation&&createCSSAnimation(t,d,n),createVNode("text",t.id+"",d,void 0,s)}}function brush(t,n){if(t instanceof Path)return brushSVGPath(t,n);if(t instanceof ZRImage)return brushSVGImage(t,n);if(t instanceof TSpan)return brushSVGTSpan(t,n)}function setShadow(t,n,a){var s=t.style;if(hasShadow(s)){var l=getShadowKey(t),u=a.shadowCache,c=u[l];if(!c){var p=t.getGlobalScale(),d=p[0],x=p[1];if(!d||!x)return;var _=s.shadowOffsetX||0,S=s.shadowOffsetY||0,T=s.shadowBlur,A=normalizeColor(s.shadowColor),R=A.opacity,D=A.color,O=T/2/d,F=T/2/x,z=O+" "+F;c=a.zrId+"-s"+a.shadowIdx++,a.defs[c]=createVNode("filter",c,{id:c,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:_/d,dy:S/x,stdDeviation:z,"flood-color":D,"flood-opacity":R})]),u[l]=c}n.filter=getIdURL(c)}}function setGradient(t,n,a,s){var l=t[a],u,c={gradientUnits:l.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(l))u="linearGradient",c.x1=l.x,c.y1=l.y,c.x2=l.x2,c.y2=l.y2;else if(isRadialGradient(l))u="radialGradient",c.cx=retrieve2(l.x,.5),c.cy=retrieve2(l.y,.5),c.r=retrieve2(l.r,.5);else return;for(var p=l.colorStops,d=[],x=0,_=p.length;x<_;++x){var S=round4(p[x].offset)*100+"%",T=p[x].color,A=normalizeColor(T),R=A.color,D=A.opacity,O={offset:S};O["stop-color"]=R,D<1&&(O["stop-opacity"]=D),d.push(createVNode("stop",x+"",O))}var F=createVNode(u,"",c,d),z=vNodeToString(F),j=s.gradientCache,Z=j[z];Z||(Z=s.zrId+"-g"+s.gradientIdx++,j[z]=Z,c.id=Z,s.defs[Z]=createVNode(u,Z,c,d)),n[a]=getIdURL(Z)}function setPattern(t,n,a,s){var l=t.style[a],u=t.getBoundingRect(),c={},p=l.repeat,d=p==="no-repeat",x=p==="repeat-x",_=p==="repeat-y",S;if(isImagePattern(l)){var T=l.imageWidth,A=l.imageHeight,R=void 0,D=l.image;if(isString$1(D)?R=D:isImageLike(D)?R=D.src:isCanvasLike(D)&&(R=D.toDataURL()),typeof Image>"u"){var O="Image width/height must been given explictly in svg-ssr renderer.";assert(T,O),assert(A,O)}else if(T==null||A==null){var F=function(Q,on){if(Q){var gn=Q.elm,In=T||on.width,dn=A||on.height;Q.tag==="pattern"&&(x?(dn=1,In/=u.width):_&&(In=1,dn/=u.height)),Q.attrs.width=In,Q.attrs.height=dn,gn&&(gn.setAttribute("width",In),gn.setAttribute("height",dn))}},z=createOrUpdateImage(R,null,t,function(Q){d||F(J,Q),F(S,Q)});z&&z.width&&z.height&&(T=T||z.width,A=A||z.height)}S=createVNode("image","img",{href:R,width:T,height:A}),c.width=T,c.height=A}else l.svgElement&&(S=clone$4(l.svgElement),c.width=l.svgWidth,c.height=l.svgHeight);if(S){var j,Z;d?j=Z=1:x?(Z=1,j=c.width/u.width):_?(j=1,Z=c.height/u.height):c.patternUnits="userSpaceOnUse",j!=null&&!isNaN(j)&&(c.width=j),Z!=null&&!isNaN(Z)&&(c.height=Z);var W=getSRTTransformString(l);W&&(c.patternTransform=W);var J=createVNode("pattern","",c,[S]),en=vNodeToString(J),tn=s.patternCache,Ct=tn[en];Ct||(Ct=s.zrId+"-p"+s.patternIdx++,tn[en]=Ct,c.id=Ct,J=s.defs[Ct]=createVNode("pattern",Ct,c,[S])),n[a]=getIdURL(Ct)}}function setClipPath(t,n,a){var s=a.clipPathCache,l=a.defs,u=s[t.id];if(!u){u=a.zrId+"-c"+a.clipPathIdx++;var c={id:u};s[t.id]=u,l[u]=createVNode("clipPath",u,c,[brushSVGPath(t,a)])}n["clip-path"]=getIdURL(u)}function createTextNode(t){return document.createTextNode(t)}function insertBefore(t,n,a){t.insertBefore(n,a)}function removeChild(t,n){t.removeChild(n)}function appendChild(t,n){t.appendChild(n)}function parentNode(t){return t.parentNode}function nextSibling(t){return t.nextSibling}function setTextContent(t,n){t.textContent=n}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(t){return t===void 0}function isDef(t){return t!==void 0}function createKeyToOldIdx(t,n,a){for(var s={},l=n;l<=a;++l){var u=t[l].key;u!==void 0&&(s[u]=l)}return s}function sameVnode(t,n){var a=t.key===n.key,s=t.tag===n.tag;return s&&a}function createElm(t){var n,a=t.children,s=t.tag;if(isDef(s)){var l=t.elm=createElement(s);if(updateAttrs(emptyNode,t),isArray$1(a))for(n=0;n<a.length;++n){var u=a[n];u!=null&&appendChild(l,createElm(u))}else isDef(t.text)&&!isObject$3(t.text)&&appendChild(l,createTextNode(t.text))}else t.elm=createTextNode(t.text);return t.elm}function addVnodes(t,n,a,s,l){for(;s<=l;++s){var u=a[s];u!=null&&insertBefore(t,createElm(u),n)}}function removeVnodes(t,n,a,s){for(;a<=s;++a){var l=n[a];if(l!=null)if(isDef(l.tag)){var u=parentNode(l.elm);removeChild(u,l.elm)}else removeChild(t,l.elm)}}function updateAttrs(t,n){var a,s=n.elm,l=t&&t.attrs||{},u=n.attrs||{};if(l!==u){for(a in u){var c=u[a],p=l[a];p!==c&&(c===!0?s.setAttribute(a,""):c===!1?s.removeAttribute(a):a==="style"?s.style.cssText=c:a.charCodeAt(0)!==xChar?s.setAttribute(a,c):a==="xmlns:xlink"||a==="xmlns"?s.setAttributeNS(XMLNS,a,c):a.charCodeAt(3)===colonChar?s.setAttributeNS(XML_NAMESPACE,a,c):a.charCodeAt(5)===colonChar?s.setAttributeNS(XLINKNS,a,c):s.setAttribute(a,c))}for(a in l)a in u||s.removeAttribute(a)}}function updateChildren(t,n,a){for(var s=0,l=0,u=n.length-1,c=n[0],p=n[u],d=a.length-1,x=a[0],_=a[d],S,T,A,R;s<=u&&l<=d;)c==null?c=n[++s]:p==null?p=n[--u]:x==null?x=a[++l]:_==null?_=a[--d]:sameVnode(c,x)?(patchVnode(c,x),c=n[++s],x=a[++l]):sameVnode(p,_)?(patchVnode(p,_),p=n[--u],_=a[--d]):sameVnode(c,_)?(patchVnode(c,_),insertBefore(t,c.elm,nextSibling(p.elm)),c=n[++s],_=a[--d]):sameVnode(p,x)?(patchVnode(p,x),insertBefore(t,p.elm,c.elm),p=n[--u],x=a[++l]):(isUndef(S)&&(S=createKeyToOldIdx(n,s,u)),T=S[x.key],isUndef(T)?insertBefore(t,createElm(x),c.elm):(A=n[T],A.tag!==x.tag?insertBefore(t,createElm(x),c.elm):(patchVnode(A,x),n[T]=void 0,insertBefore(t,A.elm,c.elm))),x=a[++l]);(s<=u||l<=d)&&(s>u?(R=a[d+1]==null?null:a[d+1].elm,addVnodes(t,R,a,l,d)):removeVnodes(t,n,s,u))}function patchVnode(t,n){var a=n.elm=t.elm,s=t.children,l=n.children;t!==n&&(updateAttrs(t,n),isUndef(n.text)?isDef(s)&&isDef(l)?s!==l&&updateChildren(a,s,l):isDef(l)?(isDef(t.text)&&setTextContent(a,""),addVnodes(a,null,l,0,l.length-1)):isDef(s)?removeVnodes(a,s,0,s.length-1):isDef(t.text)&&setTextContent(a,""):t.text!==n.text&&(isDef(s)&&removeVnodes(a,s,0,s.length-1),setTextContent(a,n.text)))}function patch(t,n){if(sameVnode(t,n))patchVnode(t,n);else{var a=t.elm,s=parentNode(a);createElm(n),s!==null&&(insertBefore(s,n.elm,nextSibling(a)),removeVnodes(s,[t],0,0))}return n}var svgId=0,SVGPainter=function(){function t(n,a,s){if(this.type="svg",this.refreshHover=createMethodNotSupport(),this.configLayer=createMethodNotSupport(),this.storage=a,this._opts=s=extend({},s),this.root=n,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(s.width,s.height),n&&!s.ssr){var l=this._viewport=document.createElement("div");l.style.cssText="position:relative;overflow:hidden";var u=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),l.appendChild(u),n.appendChild(l)}this.resize(s.width,s.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var n=this.renderToVNode({willUpdate:!0});n.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,n),this._oldVNode=n}},t.prototype.renderOneToVNode=function(n){return brush(n,createBrushScope(this._id))},t.prototype.renderToVNode=function(n){n=n||{};var a=this.storage.getDisplayList(!0),s=this._width,l=this._height,u=createBrushScope(this._id);u.animation=n.animation,u.willUpdate=n.willUpdate,u.compress=n.compress,u.emphasis=n.emphasis,u.ssr=this._opts.ssr;var c=[],p=this._bgVNode=createBackgroundVNode(s,l,this._backgroundColor,u);p&&c.push(p);var d=n.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(a,u,d?d.children:c),d&&c.push(d);var x=map$1(keys(u.defs),function(T){return u.defs[T]});if(x.length&&c.push(createVNode("defs","defs",{},x)),n.animation){var _=getCssString(u.cssNodes,u.cssAnims,{newline:!0});if(_){var S=createVNode("style","stl",{},[],_);c.push(S)}}return createSVGVNode(s,l,c,n.useViewBox)},t.prototype.renderToString=function(n){return n=n||{},vNodeToString(this.renderToVNode({animation:retrieve2(n.cssAnimation,!0),emphasis:retrieve2(n.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(n.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(n){this._backgroundColor=n},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(n,a,s){for(var l=n.length,u=[],c=0,p,d,x=0,_=0;_<l;_++){var S=n[_];if(!S.invisible){var T=S.__clipPaths,A=T&&T.length||0,R=d&&d.length||0,D=void 0;for(D=Math.max(A-1,R-1);D>=0&&!(T&&d&&T[D]===d[D]);D--);for(var O=R-1;O>D;O--)c--,p=u[c-1];for(var F=D+1;F<A;F++){var z={};setClipPath(T[F],z,a);var j=createVNode("g","clip-g-"+x++,z,[]);(p?p.children:s).push(j),u[c++]=j,p=j}d=T;var Z=brush(S,a);Z&&(p?p.children:s).push(Z)}}},t.prototype.resize=function(n,a){var s=this._opts,l=this.root,u=this._viewport;if(n!=null&&(s.width=n),a!=null&&(s.height=a),l&&u&&(u.style.display="none",n=getSize$1(l,0,s),a=getSize$1(l,1,s),u.style.display=""),this._width!==n||this._height!==a){if(this._width=n,this._height=a,u){var c=u.style;c.width=n+"px",c.height=a+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var p=this._svgDom;p&&(p.setAttribute("width",n),p.setAttribute("height",a));var d=this._bgVNode&&this._bgVNode.elm;d&&(d.setAttribute("width",n),d.setAttribute("height",a))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(n){var a=this.renderToString(),s="data:image/svg+xml;";return n?(a=encodeBase64(a),a&&s+"base64,"+a):s+"charset=UTF-8,"+encodeURIComponent(a)},t}();function createMethodNotSupport(t){return function(){}}function createBackgroundVNode(t,n,a,s){var l;if(a&&a!=="none")if(l=createVNode("rect","bg",{width:t,height:n,x:"0",y:"0"}),isGradient(a))setGradient({fill:a},l.attrs,"fill",s);else if(isPattern(a))setPattern({style:{fill:a},dirty:noop,getBoundingRect:function(){return{width:t,height:n}}},l.attrs,"fill",s);else{var u=normalizeColor(a),c=u.color,p=u.opacity;l.attrs.fill=c,p<1&&(l.attrs["fill-opacity"]=p)}return l}function install$S(t){t.registerPainter("svg",SVGPainter)}function createDom(t,n,a){var s=platformApi.createCanvas(),l=n.getWidth(),u=n.getHeight(),c=s.style;return c&&(c.position="absolute",c.left="0",c.top="0",c.width=l+"px",c.height=u+"px",s.setAttribute("data-zr-dom-id",t)),s.width=l*a,s.height=u*a,s}var Layer=function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;u.motionBlur=!1,u.lastFrameAlpha=.7,u.dpr=1,u.virtual=!1,u.config={},u.incremental=!1,u.zlevel=0,u.maxRepaintRectCount=5,u.__dirty=!0,u.__firstTimePaint=!0,u.__used=!1,u.__drawIndex=0,u.__startIndex=0,u.__endIndex=0,u.__prevStartIndex=null,u.__prevEndIndex=null;var c;l=l||devicePixelRatio,typeof a=="string"?c=createDom(a,s,l):isObject$3(a)&&(c=a,a=c.id),u.id=a,u.dom=c;var p=c.style;return p&&(disableUserSelect(c),c.onselectstart=function(){return!1},p.padding="0",p.margin="0",p.borderWidth="0"),u.painter=s,u.dpr=l,u}return n.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},n.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},n.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},n.prototype.setUnpainted=function(){this.__firstTimePaint=!0},n.prototype.createBackBuffer=function(){var a=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,a),this.ctxBack=this.domBack.getContext("2d"),a!==1&&this.ctxBack.scale(a,a)},n.prototype.createRepaintRects=function(a,s,l,u){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var c=[],p=this.maxRepaintRectCount,d=!1,x=new BoundingRect(0,0,0,0);function _(z){if(!(!z.isFinite()||z.isZero()))if(c.length===0){var j=new BoundingRect(0,0,0,0);j.copy(z),c.push(j)}else{for(var Z=!1,W=1/0,J=0,en=0;en<c.length;++en){var tn=c[en];if(tn.intersect(z)){var Ct=new BoundingRect(0,0,0,0);Ct.copy(tn),Ct.union(z),c[en]=Ct,Z=!0;break}else if(d){x.copy(z),x.union(tn);var Q=z.width*z.height,on=tn.width*tn.height,gn=x.width*x.height,In=gn-Q-on;In<W&&(W=In,J=en)}}if(d&&(c[J].union(z),Z=!0),!Z){var j=new BoundingRect(0,0,0,0);j.copy(z),c.push(j)}d||(d=c.length>=p)}}for(var S=this.__startIndex;S<this.__endIndex;++S){var T=a[S];if(T){var A=T.shouldBePainted(l,u,!0,!0),R=T.__isRendered&&(T.__dirty&REDRAW_BIT||!A)?T.getPrevPaintRect():null;R&&_(R);var D=A&&(T.__dirty&REDRAW_BIT||!T.__isRendered)?T.getPaintRect():null;D&&_(D)}}for(var S=this.__prevStartIndex;S<this.__prevEndIndex;++S){var T=s[S],A=T&&T.shouldBePainted(l,u,!0,!0);if(T&&(!A||!T.__zr)&&T.__isRendered){var R=T.getPrevPaintRect();R&&_(R)}}var O;do{O=!1;for(var S=0;S<c.length;){if(c[S].isZero()){c.splice(S,1);continue}for(var F=S+1;F<c.length;)c[S].intersect(c[F])?(O=!0,c[S].union(c[F]),c.splice(F,1)):F++;S++}}while(O);return this._paintRects=c,c},n.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},n.prototype.resize=function(a,s){var l=this.dpr,u=this.dom,c=u.style,p=this.domBack;c&&(c.width=a+"px",c.height=s+"px"),u.width=a*l,u.height=s*l,p&&(p.width=a*l,p.height=s*l,l!==1&&this.ctxBack.scale(l,l))},n.prototype.clear=function(a,s,l){var u=this.dom,c=this.ctx,p=u.width,d=u.height;s=s||this.clearColor;var x=this.motionBlur&&!a,_=this.lastFrameAlpha,S=this.dpr,T=this;x&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(u,0,0,p/S,d/S));var A=this.domBack;function R(D,O,F,z){if(c.clearRect(D,O,F,z),s&&s!=="transparent"){var j=void 0;if(isGradientObject(s)){var Z=s.global||s.__width===F&&s.__height===z;j=Z&&s.__canvasGradient||getCanvasGradient(c,s,{x:0,y:0,width:F,height:z}),s.__canvasGradient=j,s.__width=F,s.__height=z}else isImagePatternObject(s)&&(s.scaleX=s.scaleX||S,s.scaleY=s.scaleY||S,j=createCanvasPattern(c,s,{dirty:function(){T.setUnpainted(),T.painter.refresh()}}));c.save(),c.fillStyle=j||s,c.fillRect(D,O,F,z),c.restore()}x&&(c.save(),c.globalAlpha=_,c.drawImage(A,D,O,F,z),c.restore())}!l||x?R(0,0,p,d):l.length&&each$f(l,function(D){R(D.x*S,D.y*S,D.width*S,D.height*S)})},n}(Eventful),HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(t){return t?t.__builtin__?!0:!(typeof t.resize!="function"||typeof t.refresh!="function"):!1}function createRoot(t,n){var a=document.createElement("div");return a.style.cssText=["position:relative","width:"+t+"px","height:"+n+"px","padding:0","margin:0","border-width:0"].join(";")+";",a}var CanvasPainter=function(){function t(n,a,s,l){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var u=!n.nodeName||n.nodeName.toUpperCase()==="CANVAS";this._opts=s=extend({},s||{}),this.dpr=s.devicePixelRatio||devicePixelRatio,this._singleCanvas=u,this.root=n;var c=n.style;c&&(disableUserSelect(n),n.innerHTML=""),this.storage=a;var p=this._zlevelList;this._prevDisplayList=[];var d=this._layers;if(u){var _=n,S=_.width,T=_.height;s.width!=null&&(S=s.width),s.height!=null&&(T=s.height),this.dpr=s.devicePixelRatio||1,_.width=S*this.dpr,_.height=T*this.dpr,this._width=S,this._height=T;var A=new Layer(_,this,this.dpr);A.__builtin__=!0,A.initContext(),d[CANVAS_ZLEVEL]=A,A.zlevel=CANVAS_ZLEVEL,p.push(CANVAS_ZLEVEL),this._domRoot=n}else{this._width=getSize$1(n,0,s),this._height=getSize$1(n,1,s);var x=this._domRoot=createRoot(this._width,this._height);n.appendChild(x)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},t.prototype.refresh=function(n){var a=this.storage.getDisplayList(!0),s=this._prevDisplayList,l=this._zlevelList;this._redrawId=Math.random(),this._paintList(a,s,n,this._redrawId);for(var u=0;u<l.length;u++){var c=l[u],p=this._layers[c];if(!p.__builtin__&&p.refresh){var d=u===0?this._backgroundColor:null;p.refresh(d)}}return this._opts.useDirtyRect&&(this._prevDisplayList=a.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(n){var a=n.length,s=this._hoverlayer;if(s&&s.clear(),!!a){for(var l={inHover:!0,viewWidth:this._width,viewHeight:this._height},u,c=0;c<a;c++){var p=n[c];p.__inHover&&(s||(s=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),u||(u=s.ctx,u.save()),brush$1(u,p,l,c===a-1))}u&&u.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},t.prototype.paintOne=function(n,a){brushSingle(n,a)},t.prototype._paintList=function(n,a,s,l){if(this._redrawId===l){s=s||!1,this._updateLayerStatus(n);var u=this._doPaintList(n,a,s),c=u.finished,p=u.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),p&&this._paintHoverList(n),c)this.eachLayer(function(x){x.afterBrush&&x.afterBrush()});else{var d=this;requestAnimationFrame$1(function(){d._paintList(n,a,s,l)})}}},t.prototype._compositeManually=function(){var n=this.getLayer(CANVAS_ZLEVEL).ctx,a=this._domRoot.width,s=this._domRoot.height;n.clearRect(0,0,a,s),this.eachBuiltinLayer(function(l){l.virtual&&n.drawImage(l.dom,0,0,a,s)})},t.prototype._doPaintList=function(n,a,s){for(var l=this,u=[],c=this._opts.useDirtyRect,p=0;p<this._zlevelList.length;p++){var d=this._zlevelList[p],x=this._layers[d];x.__builtin__&&x!==this._hoverlayer&&(x.__dirty||s)&&u.push(x)}for(var _=!0,S=!1,T=function(D){var O=u[D],F=O.ctx,z=c&&O.createRepaintRects(n,a,A._width,A._height),j=s?O.__startIndex:O.__drawIndex,Z=!s&&O.incremental&&Date.now,W=Z&&Date.now(),J=O.zlevel===A._zlevelList[0]?A._backgroundColor:null;if(O.__startIndex===O.__endIndex)O.clear(!1,J,z);else if(j===O.__startIndex){var en=n[j];(!en.incremental||!en.notClear||s)&&O.clear(!1,J,z)}j===-1&&(console.error("For some unknown reason. drawIndex is -1"),j=O.__startIndex);var tn,Ct=function(In){var dn={inHover:!1,allClipped:!1,prevEl:null,viewWidth:l._width,viewHeight:l._height};for(tn=j;tn<O.__endIndex;tn++){var ix=n[tn];if(ix.__inHover&&(S=!0),l._doPaintEl(ix,O,c,In,dn,tn===O.__endIndex-1),Z){var Cn=Date.now()-W;if(Cn>15)break}}dn.prevElClipPaths&&F.restore()};if(z)if(z.length===0)tn=O.__endIndex;else for(var Q=A.dpr,on=0;on<z.length;++on){var gn=z[on];F.save(),F.beginPath(),F.rect(gn.x*Q,gn.y*Q,gn.width*Q,gn.height*Q),F.clip(),Ct(gn),F.restore()}else F.save(),Ct(),F.restore();O.__drawIndex=tn,O.__drawIndex<O.__endIndex&&(_=!1)},A=this,R=0;R<u.length;R++)T(R);return env.wxa&&each$f(this._layers,function(D){D&&D.ctx&&D.ctx.draw&&D.ctx.draw()}),{finished:_,needsRefreshHover:S}},t.prototype._doPaintEl=function(n,a,s,l,u,c){var p=a.ctx;if(s){var d=n.getPaintRect();(!l||d&&d.intersect(l))&&(brush$1(p,n,u,c),n.setPrevPaintRect(d))}else brush$1(p,n,u,c)},t.prototype.getLayer=function(n,a){this._singleCanvas&&!this._needsManuallyCompositing&&(n=CANVAS_ZLEVEL);var s=this._layers[n];return s||(s=new Layer("zr_"+n,this,this.dpr),s.zlevel=n,s.__builtin__=!0,this._layerConfig[n]?merge(s,this._layerConfig[n],!0):this._layerConfig[n-EL_AFTER_INCREMENTAL_INC]&&merge(s,this._layerConfig[n-EL_AFTER_INCREMENTAL_INC],!0),a&&(s.virtual=a),this.insertLayer(n,s),s.initContext()),s},t.prototype.insertLayer=function(n,a){var s=this._layers,l=this._zlevelList,u=l.length,c=this._domRoot,p=null,d=-1;if(!s[n]&&isLayerValid(a)){if(u>0&&n>l[0]){for(d=0;d<u-1&&!(l[d]<n&&l[d+1]>n);d++);p=s[l[d]]}if(l.splice(d+1,0,n),s[n]=a,!a.virtual)if(p){var x=p.dom;x.nextSibling?c.insertBefore(a.dom,x.nextSibling):c.appendChild(a.dom)}else c.firstChild?c.insertBefore(a.dom,c.firstChild):c.appendChild(a.dom);a.painter||(a.painter=this)}},t.prototype.eachLayer=function(n,a){for(var s=this._zlevelList,l=0;l<s.length;l++){var u=s[l];n.call(a,this._layers[u],u)}},t.prototype.eachBuiltinLayer=function(n,a){for(var s=this._zlevelList,l=0;l<s.length;l++){var u=s[l],c=this._layers[u];c.__builtin__&&n.call(a,c,u)}},t.prototype.eachOtherLayer=function(n,a){for(var s=this._zlevelList,l=0;l<s.length;l++){var u=s[l],c=this._layers[u];c.__builtin__||n.call(a,c,u)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(n){this.eachBuiltinLayer(function(S,T){S.__dirty=S.__used=!1});function a(S){u&&(u.__endIndex!==S&&(u.__dirty=!0),u.__endIndex=S)}if(this._singleCanvas)for(var s=1;s<n.length;s++){var l=n[s];if(l.zlevel!==n[s-1].zlevel||l.incremental){this._needsManuallyCompositing=!0;break}}var u=null,c=0,p,d;for(d=0;d<n.length;d++){var l=n[d],x=l.zlevel,_=void 0;p!==x&&(p=x,c=0),l.incremental?(_=this.getLayer(x+INCREMENTAL_INC,this._needsManuallyCompositing),_.incremental=!0,c=1):_=this.getLayer(x+(c>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),_.__builtin__||logError("ZLevel "+x+" has been used by unkown layer "+_.id),_!==u&&(_.__used=!0,_.__startIndex!==d&&(_.__dirty=!0),_.__startIndex=d,_.incremental?_.__drawIndex=-1:_.__drawIndex=d,a(d),u=_),l.__dirty&REDRAW_BIT&&!l.__inHover&&(_.__dirty=!0,_.incremental&&_.__drawIndex<0&&(_.__drawIndex=d))}a(d),this.eachBuiltinLayer(function(S,T){!S.__used&&S.getElementCount()>0&&(S.__dirty=!0,S.__startIndex=S.__endIndex=S.__drawIndex=0),S.__dirty&&S.__drawIndex<0&&(S.__drawIndex=S.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(n){n.clear()},t.prototype.setBackgroundColor=function(n){this._backgroundColor=n,each$f(this._layers,function(a){a.setUnpainted()})},t.prototype.configLayer=function(n,a){if(a){var s=this._layerConfig;s[n]?merge(s[n],a,!0):s[n]=a;for(var l=0;l<this._zlevelList.length;l++){var u=this._zlevelList[l];if(u===n||u===n+EL_AFTER_INCREMENTAL_INC){var c=this._layers[u];merge(c,s[n],!0)}}}},t.prototype.delLayer=function(n){var a=this._layers,s=this._zlevelList,l=a[n];l&&(l.dom.parentNode.removeChild(l.dom),delete a[n],s.splice(indexOf(s,n),1))},t.prototype.resize=function(n,a){if(this._domRoot.style){var s=this._domRoot;s.style.display="none";var l=this._opts,u=this.root;if(n!=null&&(l.width=n),a!=null&&(l.height=a),n=getSize$1(u,0,l),a=getSize$1(u,1,l),s.style.display="",this._width!==n||a!==this._height){s.style.width=n+"px",s.style.height=a+"px";for(var c in this._layers)this._layers.hasOwnProperty(c)&&this._layers[c].resize(n,a);this.refresh(!0)}this._width=n,this._height=a}else{if(n==null||a==null)return;this._width=n,this._height=a,this.getLayer(CANVAS_ZLEVEL).resize(n,a)}return this},t.prototype.clearLayer=function(n){var a=this._layers[n];a&&a.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(n){if(n=n||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var a=new Layer("image",this,n.pixelRatio||this.dpr);a.initContext(),a.clear(!1,n.backgroundColor||this._backgroundColor);var s=a.ctx;if(n.pixelRatio<=this.dpr){this.refresh();var l=a.dom.width,u=a.dom.height;this.eachLayer(function(S){S.__builtin__?s.drawImage(S.dom,0,0,l,u):S.renderToCanvas&&(s.save(),S.renderToCanvas(s),s.restore())})}else for(var c={inHover:!1,viewWidth:this._width,viewHeight:this._height},p=this.storage.getDisplayList(!0),d=0,x=p.length;d<x;d++){var _=p[d];brush$1(s,_,c,d===x-1)}return a.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}();function install$R(t){t.registerPainter("canvas",CanvasPainter)}var LineSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getLegendIcon=function(a){var s=new Group$3,l=createSymbol$1("line",0,a.itemHeight/2,a.itemWidth,0,a.lineStyle.stroke,!1);s.add(l),l.setStyle(a.lineStyle);var u=this.getData().getVisual("symbol"),c=this.getData().getVisual("symbolRotate"),p=u==="none"?"circle":u,d=a.itemHeight*.8,x=createSymbol$1(p,(a.itemWidth-d)/2,(a.itemHeight-d)/2,d,d,a.itemStyle.fill);s.add(x),x.setStyle(a.itemStyle);var _=a.iconRotate==="inherit"?c:a.iconRotate||0;return x.rotation=_*Math.PI/180,x.setOrigin([a.itemWidth/2,a.itemHeight/2]),p.indexOf("empty")>-1&&(x.style.stroke=x.style.fill,x.style.fill="#fff",x.style.lineWidth=2),s},n.type="series.line",n.dependencies=["grid","polar"],n.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},n}(SeriesModel);function getDefaultLabel(t,n){var a=t.mapDimensionsAll("defaultedLabel"),s=a.length;if(s===1){var l=retrieveRawValue(t,n,a[0]);return l!=null?l+"":null}else if(s){for(var u=[],c=0;c<a.length;c++)u.push(retrieveRawValue(t,n,a[c]));return u.join(" ")}}function getDefaultInterpolatedLabel(t,n){var a=t.mapDimensionsAll("defaultedLabel");if(!isArray$1(n))return n+"";for(var s=[],l=0;l<a.length;l++){var u=t.getDimensionIndex(a[l]);u>=0&&s.push(n[u])}return s.join(" ")}var Symbol$1=function(t){__extends(n,t);function n(a,s,l,u){var c=t.call(this)||this;return c.updateData(a,s,l,u),c}return n.prototype._createSymbol=function(a,s,l,u,c){this.removeAll();var p=createSymbol$1(a,-1,-1,2,2,null,c);p.attr({z2:100,culling:!0,scaleX:u[0]/2,scaleY:u[1]/2}),p.drift=driftSymbol,this._symbolType=a,this.add(p)},n.prototype.stopSymbolAnimation=function(a){this.childAt(0).stopAnimation(null,a)},n.prototype.getSymbolType=function(){return this._symbolType},n.prototype.getSymbolPath=function(){return this.childAt(0)},n.prototype.highlight=function(){enterEmphasis(this.childAt(0))},n.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},n.prototype.setZ=function(a,s){var l=this.childAt(0);l.zlevel=a,l.z=s},n.prototype.setDraggable=function(a,s){var l=this.childAt(0);l.draggable=a,l.cursor=!s&&a?"move":l.cursor},n.prototype.updateData=function(a,s,l,u){this.silent=!1;var c=a.getItemVisual(s,"symbol")||"circle",p=a.hostModel,d=n.getSymbolSize(a,s),x=c!==this._symbolType,_=u&&u.disableAnimation;if(x){var S=a.getItemVisual(s,"symbolKeepAspect");this._createSymbol(c,a,s,d,S)}else{var T=this.childAt(0);T.silent=!1;var A={scaleX:d[0]/2,scaleY:d[1]/2};_?T.attr(A):updateProps$1(T,A,p,s),saveOldStyle(T)}if(this._updateCommon(a,s,d,l,u),x){var T=this.childAt(0);if(!_){var A={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:T.style.opacity}};T.scaleX=T.scaleY=0,T.style.opacity=0,initProps(T,A,p,s)}}_&&this.childAt(0).stopAnimation("leave")},n.prototype._updateCommon=function(a,s,l,u,c){var p=this.childAt(0),d=a.hostModel,x,_,S,T,A,R,D,O,F;if(u&&(x=u.emphasisItemStyle,_=u.blurItemStyle,S=u.selectItemStyle,T=u.focus,A=u.blurScope,D=u.labelStatesModels,O=u.hoverScale,F=u.cursorStyle,R=u.emphasisDisabled),!u||a.hasItemOption){var z=u&&u.itemModel?u.itemModel:a.getItemModel(s),j=z.getModel("emphasis");x=j.getModel("itemStyle").getItemStyle(),S=z.getModel(["select","itemStyle"]).getItemStyle(),_=z.getModel(["blur","itemStyle"]).getItemStyle(),T=j.get("focus"),A=j.get("blurScope"),R=j.get("disabled"),D=getLabelStatesModels(z),O=j.getShallow("scale"),F=z.getShallow("cursor")}var Z=a.getItemVisual(s,"symbolRotate");p.attr("rotation",(Z||0)*Math.PI/180||0);var W=normalizeSymbolOffset(a.getItemVisual(s,"symbolOffset"),l);W&&(p.x=W[0],p.y=W[1]),F&&p.attr("cursor",F);var J=a.getItemVisual(s,"style"),en=J.fill;if(p instanceof ZRImage){var tn=p.style;p.useStyle(extend({image:tn.image,x:tn.x,y:tn.y,width:tn.width,height:tn.height},J))}else p.__isEmptyBrush?p.useStyle(extend({},J)):p.useStyle(J),p.style.decal=null,p.setColor(en,c&&c.symbolInnerColor),p.style.strokeNoScale=!0;var Ct=a.getItemVisual(s,"liftZ"),Q=this._z2;Ct!=null?Q==null&&(this._z2=p.z2,p.z2+=Ct):Q!=null&&(p.z2=Q,this._z2=null);var on=c&&c.useNameLabel;setLabelStyle(p,D,{labelFetcher:d,labelDataIndex:s,defaultText:gn,inheritColor:en,defaultOpacity:J.opacity});function gn(ix){return on?a.getName(ix):getDefaultLabel(a,ix)}this._sizeX=l[0]/2,this._sizeY=l[1]/2;var In=p.ensureState("emphasis");In.style=x,p.ensureState("select").style=S,p.ensureState("blur").style=_;var dn=O==null||O===!0?Math.max(1.1,3/this._sizeY):isFinite(O)&&O>0?+O:1;In.scaleX=this._sizeX*dn,In.scaleY=this._sizeY*dn,this.setSymbolScale(1),toggleHoverEmphasis(this,T,A,R)},n.prototype.setSymbolScale=function(a){this.scaleX=this.scaleY=a},n.prototype.fadeOut=function(a,s,l){var u=this.childAt(0),c=getECData(this).dataIndex,p=l&&l.animation;if(this.silent=u.silent=!0,l&&l.fadeLabel){var d=u.getTextContent();d&&removeElement(d,{style:{opacity:0}},s,{dataIndex:c,removeOpt:p,cb:function(){u.removeTextContent()}})}else u.removeTextContent();removeElement(u,{style:{opacity:0},scaleX:0,scaleY:0},s,{dataIndex:c,cb:a,removeOpt:p})},n.getSymbolSize=function(a,s){return normalizeSymbolSize(a.getItemVisual(s,"symbolSize"))},n}(Group$3);function driftSymbol(t,n){this.parent.drift(t,n)}function symbolNeedsDraw$1(t,n,a,s){return n&&!isNaN(n[0])&&!isNaN(n[1])&&!(s.isIgnore&&s.isIgnore(a))&&!(s.clipShape&&!s.clipShape.contain(n[0],n[1]))&&t.getItemVisual(a,"symbol")!=="none"}function normalizeUpdateOpt(t){return t!=null&&!isObject$3(t)&&(t={isIgnore:t}),t||{}}function makeSeriesScope$2(t){var n=t.hostModel,a=n.getModel("emphasis");return{emphasisItemStyle:a.getModel("itemStyle").getItemStyle(),blurItemStyle:n.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:n.getModel(["select","itemStyle"]).getItemStyle(),focus:a.get("focus"),blurScope:a.get("blurScope"),emphasisDisabled:a.get("disabled"),hoverScale:a.get("scale"),labelStatesModels:getLabelStatesModels(n),cursorStyle:n.get("cursor")}}var SymbolDraw=function(){function t(n){this.group=new Group$3,this._SymbolCtor=n||Symbol$1}return t.prototype.updateData=function(n,a){this._progressiveEls=null,a=normalizeUpdateOpt(a);var s=this.group,l=n.hostModel,u=this._data,c=this._SymbolCtor,p=a.disableAnimation,d=makeSeriesScope$2(n),x={disableAnimation:p},_=a.getSymbolPoint||function(S){return n.getItemLayout(S)};u||s.removeAll(),n.diff(u).add(function(S){var T=_(S);if(symbolNeedsDraw$1(n,T,S,a)){var A=new c(n,S,d,x);A.setPosition(T),n.setItemGraphicEl(S,A),s.add(A)}}).update(function(S,T){var A=u.getItemGraphicEl(T),R=_(S);if(!symbolNeedsDraw$1(n,R,S,a)){s.remove(A);return}var D=n.getItemVisual(S,"symbol")||"circle",O=A&&A.getSymbolType&&A.getSymbolType();if(!A||O&&O!==D)s.remove(A),A=new c(n,S,d,x),A.setPosition(R);else{A.updateData(n,S,d,x);var F={x:R[0],y:R[1]};p?A.attr(F):updateProps$1(A,F,l)}s.add(A),n.setItemGraphicEl(S,A)}).remove(function(S){var T=u.getItemGraphicEl(S);T&&T.fadeOut(function(){s.remove(T)},l)}).execute(),this._getSymbolPoint=_,this._data=n},t.prototype.updateLayout=function(){var n=this,a=this._data;a&&a.eachItemGraphicEl(function(s,l){var u=n._getSymbolPoint(l);s.setPosition(u),s.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=makeSeriesScope$2(n),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(n,a,s){this._progressiveEls=[],s=normalizeUpdateOpt(s);function l(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var u=n.start;u<n.end;u++){var c=a.getItemLayout(u);if(symbolNeedsDraw$1(a,c,u,s)){var p=new this._SymbolCtor(a,u,this._seriesScope);p.traverse(l),p.setPosition(c),this.group.add(p),a.setItemGraphicEl(u,p),this._progressiveEls.push(p)}}},t.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},t.prototype.remove=function(n){var a=this.group,s=this._data;s&&n?s.eachItemGraphicEl(function(l){l.fadeOut(function(){a.remove(l)},s.hostModel)}):a.removeAll()},t}();function prepareDataCoordInfo(t,n,a){var s=t.getBaseAxis(),l=t.getOtherAxis(s),u=getValueStart(l,a),c=s.dim,p=l.dim,d=n.mapDimension(p),x=n.mapDimension(c),_=p==="x"||p==="radius"?1:0,S=map$1(t.dimensions,function(R){return n.mapDimension(R)}),T=!1,A=n.getCalculationInfo("stackResultDimension");return isDimensionStacked(n,S[0])&&(T=!0,S[0]=A),isDimensionStacked(n,S[1])&&(T=!0,S[1]=A),{dataDimsForPoint:S,valueStart:u,valueAxisDim:p,baseAxisDim:c,stacked:!!T,valueDim:d,baseDim:x,baseDataOffset:_,stackedOverDimension:n.getCalculationInfo("stackedOverDimension")}}function getValueStart(t,n){var a=0,s=t.scale.getExtent();return n==="start"?a=s[0]:n==="end"?a=s[1]:isNumber(n)&&!isNaN(n)?a=n:s[0]>0?a=s[0]:s[1]<0&&(a=s[1]),a}function getStackedOnPoint(t,n,a,s){var l=NaN;t.stacked&&(l=a.get(a.getCalculationInfo("stackedOverDimension"),s)),isNaN(l)&&(l=t.valueStart);var u=t.baseDataOffset,c=[];return c[u]=a.get(t.baseDim,s),c[1-u]=l,n.dataToPoint(c)}function diffData(t,n){var a=[];return n.diff(t).add(function(s){a.push({cmd:"+",idx:s})}).update(function(s,l){a.push({cmd:"=",idx:l,idx1:s})}).remove(function(s){a.push({cmd:"-",idx:s})}).execute(),a}function lineAnimationDiff(t,n,a,s,l,u,c,p){for(var d=diffData(t,n),x=[],_=[],S=[],T=[],A=[],R=[],D=[],O=prepareDataCoordInfo(l,n,c),F=t.getLayout("points")||[],z=n.getLayout("points")||[],j=0;j<d.length;j++){var Z=d[j],W=!0,J=void 0,en=void 0;switch(Z.cmd){case"=":J=Z.idx*2,en=Z.idx1*2;var tn=F[J],Ct=F[J+1],Q=z[en],on=z[en+1];(isNaN(tn)||isNaN(Ct))&&(tn=Q,Ct=on),x.push(tn,Ct),_.push(Q,on),S.push(a[J],a[J+1]),T.push(s[en],s[en+1]),D.push(n.getRawIndex(Z.idx1));break;case"+":var gn=Z.idx,In=O.dataDimsForPoint,dn=l.dataToPoint([n.get(In[0],gn),n.get(In[1],gn)]);en=gn*2,x.push(dn[0],dn[1]),_.push(z[en],z[en+1]);var ix=getStackedOnPoint(O,l,n,gn);S.push(ix[0],ix[1]),T.push(s[en],s[en+1]),D.push(n.getRawIndex(gn));break;case"-":W=!1}W&&(A.push(Z),R.push(R.length))}R.sort(function(dx,mx){return D[dx]-D[mx]});for(var Cn=x.length,ax=createFloat32Array(Cn),sx=createFloat32Array(Cn),lx=createFloat32Array(Cn),ox=createFloat32Array(Cn),hx=[],j=0;j<R.length;j++){var _x=R[j],ux=j*2,px=_x*2;ax[ux]=x[px],ax[ux+1]=x[px+1],sx[ux]=_[px],sx[ux+1]=_[px+1],lx[ux]=S[px],lx[ux+1]=S[px+1],ox[ux]=T[px],ox[ux+1]=T[px+1],hx[j]=A[_x]}return{current:ax,next:sx,stackedOnCurrent:lx,stackedOnNext:ox,status:hx}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(t,n){return isNaN(t)||isNaN(n)}function drawSegment(t,n,a,s,l,u,c,p,d){for(var x,_,S,T,A,R,D=a,O=0;O<s;O++){var F=n[D*2],z=n[D*2+1];if(D>=l||D<0)break;if(isPointNull$1(F,z)){if(d){D+=u;continue}break}if(D===a)t[u>0?"moveTo":"lineTo"](F,z),S=F,T=z;else{var j=F-x,Z=z-_;if(j*j+Z*Z<.5){D+=u;continue}if(c>0){for(var W=D+u,J=n[W*2],en=n[W*2+1];J===F&&en===z&&O<s;)O++,W+=u,D+=u,J=n[W*2],en=n[W*2+1],F=n[D*2],z=n[D*2+1],j=F-x,Z=z-_;var tn=O+1;if(d)for(;isPointNull$1(J,en)&&tn<s;)tn++,W+=u,J=n[W*2],en=n[W*2+1];var Ct=.5,Q=0,on=0,gn=void 0,In=void 0;if(tn>=s||isPointNull$1(J,en))A=F,R=z;else{Q=J-x,on=en-_;var dn=F-x,ix=J-F,Cn=z-_,ax=en-z,sx=void 0,lx=void 0;if(p==="x"){sx=Math.abs(dn),lx=Math.abs(ix);var ox=Q>0?1:-1;A=F-ox*sx*c,R=z,gn=F+ox*lx*c,In=z}else if(p==="y"){sx=Math.abs(Cn),lx=Math.abs(ax);var hx=on>0?1:-1;A=F,R=z-hx*sx*c,gn=F,In=z+hx*lx*c}else sx=Math.sqrt(dn*dn+Cn*Cn),lx=Math.sqrt(ix*ix+ax*ax),Ct=lx/(lx+sx),A=F-Q*c*(1-Ct),R=z-on*c*(1-Ct),gn=F+Q*c*Ct,In=z+on*c*Ct,gn=mathMin$5(gn,mathMax$5(J,F)),In=mathMin$5(In,mathMax$5(en,z)),gn=mathMax$5(gn,mathMin$5(J,F)),In=mathMax$5(In,mathMin$5(en,z)),Q=gn-F,on=In-z,A=F-Q*sx/lx,R=z-on*sx/lx,A=mathMin$5(A,mathMax$5(x,F)),R=mathMin$5(R,mathMax$5(_,z)),A=mathMax$5(A,mathMin$5(x,F)),R=mathMax$5(R,mathMin$5(_,z)),Q=F-A,on=z-R,gn=F+Q*lx/sx,In=z+on*lx/sx}t.bezierCurveTo(S,T,A,R,F,z),S=gn,T=In}else t.lineTo(F,z)}x=F,_=z,D+=u}return O}var ECPolylineShape=function(){function t(){this.smooth=0,this.smoothConstraint=!0}return t}(),ECPolyline=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="ec-polyline",s}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new ECPolylineShape},n.prototype.buildPath=function(a,s){var l=s.points,u=0,c=l.length/2;if(s.connectNulls){for(;c>0&&isPointNull$1(l[c*2-2],l[c*2-1]);c--);for(;u<c&&isPointNull$1(l[u*2],l[u*2+1]);u++);}for(;u<c;)u+=drawSegment(a,l,u,c,c,1,s.smooth,s.smoothMonotone,s.connectNulls)+1},n.prototype.getPointOn=function(a,s){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var l=this.path,u=l.data,c=PathProxy.CMD,p,d,x=s==="x",_=[],S=0;S<u.length;){var T=u[S++],A=void 0,R=void 0,D=void 0,O=void 0,F=void 0,z=void 0,j=void 0;switch(T){case c.M:p=u[S++],d=u[S++];break;case c.L:if(A=u[S++],R=u[S++],j=x?(a-p)/(A-p):(a-d)/(R-d),j<=1&&j>=0){var Z=x?(R-d)*j+d:(A-p)*j+p;return x?[a,Z]:[Z,a]}p=A,d=R;break;case c.C:A=u[S++],R=u[S++],D=u[S++],O=u[S++],F=u[S++],z=u[S++];var W=x?cubicRootAt(p,A,D,F,a,_):cubicRootAt(d,R,O,z,a,_);if(W>0)for(var J=0;J<W;J++){var en=_[J];if(en<=1&&en>=0){var Z=x?cubicAt(d,R,O,z,en):cubicAt(p,A,D,F,en);return x?[a,Z]:[Z,a]}}p=F,d=z;break}}},n}(Path),ECPolygonShape=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n}(ECPolylineShape),ECPolygon=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="ec-polygon",s}return n.prototype.getDefaultShape=function(){return new ECPolygonShape},n.prototype.buildPath=function(a,s){var l=s.points,u=s.stackedOnPoints,c=0,p=l.length/2,d=s.smoothMonotone;if(s.connectNulls){for(;p>0&&isPointNull$1(l[p*2-2],l[p*2-1]);p--);for(;c<p&&isPointNull$1(l[c*2],l[c*2+1]);c++);}for(;c<p;){var x=drawSegment(a,l,c,p,p,1,s.smooth,d,s.connectNulls);drawSegment(a,u,c+x-1,x,p,-1,s.stackedOnSmooth,d,s.connectNulls),c+=x+1,a.closePath()}},n}(Path);function createGridClipPath(t,n,a,s,l){var u=t.getArea(),c=u.x,p=u.y,d=u.width,x=u.height,_=a.get(["lineStyle","width"])||0;c-=_/2,p-=_/2,d+=_,x+=_,d=Math.ceil(d),c!==Math.floor(c)&&(c=Math.floor(c),d++);var S=new Rect$2({shape:{x:c,y:p,width:d,height:x}});if(n){var T=t.getBaseAxis(),A=T.isHorizontal(),R=T.inverse;A?(R&&(S.shape.x+=d),S.shape.width=0):(R||(S.shape.y+=x),S.shape.height=0);var D=isFunction$1(l)?function(O){l(O,S)}:null;initProps(S,{shape:{width:d,height:x,x:c,y:p}},a,null,s,D)}return S}function createPolarClipPath(t,n,a){var s=t.getArea(),l=round$3(s.r0,1),u=round$3(s.r,1),c=new Sector({shape:{cx:round$3(t.cx,1),cy:round$3(t.cy,1),r0:l,r:u,startAngle:s.startAngle,endAngle:s.endAngle,clockwise:s.clockwise}});if(n){var p=t.getBaseAxis().dim==="angle";p?c.shape.endAngle=s.startAngle:c.shape.r=l,initProps(c,{shape:{endAngle:s.endAngle,r:u}},a)}return c}function createClipPath(t,n,a,s,l){if(t){if(t.type==="polar")return createPolarClipPath(t,n,a);if(t.type==="cartesian2d")return createGridClipPath(t,n,a,s,l)}else return null;return null}function isCoordinateSystemType(t,n){return t.type===n}function isPointsSame(t,n){if(t.length===n.length){for(var a=0;a<t.length;a++)if(t[a]!==n[a])return;return!0}}function bboxFromPoints(t){for(var n=1/0,a=1/0,s=-1/0,l=-1/0,u=0;u<t.length;){var c=t[u++],p=t[u++];isNaN(c)||(n=Math.min(c,n),s=Math.max(c,s)),isNaN(p)||(a=Math.min(p,a),l=Math.max(p,l))}return[[n,a],[s,l]]}function getBoundingDiff(t,n){var a=bboxFromPoints(t),s=a[0],l=a[1],u=bboxFromPoints(n),c=u[0],p=u[1];return Math.max(Math.abs(s[0]-c[0]),Math.abs(s[1]-c[1]),Math.abs(l[0]-p[0]),Math.abs(l[1]-p[1]))}function getSmooth(t){return isNumber(t)?t:t?.5:0}function getStackedOnPoints(t,n,a){if(!a.valueDim)return[];for(var s=n.count(),l=createFloat32Array(s*2),u=0;u<s;u++){var c=getStackedOnPoint(a,t,n,u);l[u*2]=c[0],l[u*2+1]=c[1]}return l}function turnPointsIntoStep(t,n,a,s,l){var u=a.getBaseAxis(),c=u.dim==="x"||u.dim==="radius"?0:1,p=[],d=0,x=[],_=[],S=[],T=[];if(l){for(d=0;d<t.length;d+=2){var A=n||t;!isNaN(A[d])&&!isNaN(A[d+1])&&T.push(t[d],t[d+1])}t=T}for(d=0;d<t.length-2;d+=2)switch(S[0]=t[d+2],S[1]=t[d+3],_[0]=t[d],_[1]=t[d+1],p.push(_[0],_[1]),s){case"end":x[c]=S[c],x[1-c]=_[1-c],p.push(x[0],x[1]);break;case"middle":var R=(_[c]+S[c])/2,D=[];x[c]=D[c]=R,x[1-c]=_[1-c],D[1-c]=S[1-c],p.push(x[0],x[1]),p.push(D[0],D[1]);break;default:x[c]=_[c],x[1-c]=S[1-c],p.push(x[0],x[1])}return p.push(t[d++],t[d++]),p}function clipColorStops(t,n){var a=[],s=t.length,l,u;function c(_,S,T){var A=_.coord,R=(T-A)/(S.coord-A),D=lerp(R,[_.color,S.color]);return{coord:T,color:D}}for(var p=0;p<s;p++){var d=t[p],x=d.coord;if(x<0)l=d;else if(x>n){u?a.push(c(u,d,n)):l&&a.push(c(l,d,0),c(l,d,n));break}else l&&(a.push(c(l,d,0)),l=null),a.push(d),u=d}return a}function getVisualGradient(t,n,a){var s=t.getVisual("visualMeta");if(!(!s||!s.length||!t.count())&&n.type==="cartesian2d"){for(var l,u,c=s.length-1;c>=0;c--){var p=t.getDimensionInfo(s[c].dimension);if(l=p&&p.coordDim,l==="x"||l==="y"){u=s[c];break}}if(u){var d=n.getAxis(l),x=map$1(u.stops,function(j){return{coord:d.toGlobalCoord(d.dataToCoord(j.value)),color:j.color}}),_=x.length,S=u.outerColors.slice();_&&x[0].coord>x[_-1].coord&&(x.reverse(),S.reverse());var T=clipColorStops(x,l==="x"?a.getWidth():a.getHeight()),A=T.length;if(!A&&_)return x[0].coord<0?S[1]?S[1]:x[_-1].color:S[0]?S[0]:x[0].color;var R=10,D=T[0].coord-R,O=T[A-1].coord+R,F=O-D;if(F<.001)return"transparent";each$f(T,function(j){j.offset=(j.coord-D)/F}),T.push({offset:A?T[A-1].offset:.5,color:S[1]||"transparent"}),T.unshift({offset:A?T[0].offset:.5,color:S[0]||"transparent"});var z=new LinearGradient(0,0,0,0,T,!0);return z[l]=D,z[l+"2"]=O,z}}}function getIsIgnoreFunc(t,n,a){var s=t.get("showAllSymbol"),l=s==="auto";if(!(s&&!l)){var u=a.getAxesByScale("ordinal")[0];if(u&&!(l&&canShowAllSymbolForCategory(u,n))){var c=n.mapDimension(u.dim),p={};return each$f(u.getViewLabels(),function(d){var x=u.scale.getRawOrdinalNumber(d.tickValue);p[x]=1}),function(d){return!p.hasOwnProperty(n.get(c,d))}}}}function canShowAllSymbolForCategory(t,n){var a=t.getExtent(),s=Math.abs(a[1]-a[0])/t.scale.count();isNaN(s)&&(s=0);for(var l=n.count(),u=Math.max(1,Math.round(l/5)),c=0;c<l;c+=u)if(Symbol$1.getSymbolSize(n,c)[t.isHorizontal()?1:0]*1.5>s)return!1;return!0}function isPointNull(t,n){return isNaN(t)||isNaN(n)}function getLastIndexNotNull(t){for(var n=t.length/2;n>0&&isPointNull(t[n*2-2],t[n*2-1]);n--);return n-1}function getPointAtIndex(t,n){return[t[n*2],t[n*2+1]]}function getIndexRange(t,n,a){for(var s=t.length/2,l=a==="x"?0:1,u,c,p=0,d=-1,x=0;x<s;x++)if(c=t[x*2+l],!(isNaN(c)||isNaN(t[x*2+1-l]))){if(x===0){u=c;continue}if(u<=n&&c>=n||u>=n&&c<=n){d=x;break}p=x,u=c}return{range:[p,d],t:(n-u)/(c-u)}}function anyStateShowEndLabel(t){if(t.get(["endLabel","show"]))return!0;for(var n=0;n<SPECIAL_STATES.length;n++)if(t.get([SPECIAL_STATES[n],"endLabel","show"]))return!0;return!1}function createLineClipPath(t,n,a,s){if(isCoordinateSystemType(n,"cartesian2d")){var l=s.getModel("endLabel"),u=l.get("valueAnimation"),c=s.getData(),p={lastFrameIndex:0},d=anyStateShowEndLabel(s)?function(A,R){t._endLabelOnDuring(A,R,c,p,u,l,n)}:null,x=n.getBaseAxis().isHorizontal(),_=createGridClipPath(n,a,s,function(){var A=t._endLabel;A&&a&&p.originalX!=null&&A.attr({x:p.originalX,y:p.originalY})},d);if(!s.get("clip",!0)){var S=_.shape,T=Math.max(S.width,S.height);x?(S.y-=T,S.height+=T*2):(S.x-=T,S.width+=T*2)}return d&&d(1,_),_}else return createPolarClipPath(n,a,s)}function getEndLabelStateSpecified(t,n){var a=n.getBaseAxis(),s=a.isHorizontal(),l=a.inverse,u=s?l?"right":"left":"center",c=s?"middle":l?"top":"bottom";return{normal:{align:t.get("align")||u,verticalAlign:t.get("verticalAlign")||c}}}var LineView=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(){var a=new Group$3,s=new SymbolDraw;this.group.add(s.group),this._symbolDraw=s,this._lineGroup=a,this._changePolyState=bind$1(this._changePolyState,this)},n.prototype.render=function(a,s,l){var u=a.coordinateSystem,c=this.group,p=a.getData(),d=a.getModel("lineStyle"),x=a.getModel("areaStyle"),_=p.getLayout("points")||[],S=u.type==="polar",T=this._coordSys,A=this._symbolDraw,R=this._polyline,D=this._polygon,O=this._lineGroup,F=!s.ssr&&a.get("animation"),z=!x.isEmpty(),j=x.get("origin"),Z=prepareDataCoordInfo(u,p,j),W=z&&getStackedOnPoints(u,p,Z),J=a.get("showSymbol"),en=a.get("connectNulls"),tn=J&&!S&&getIsIgnoreFunc(a,p,u),Ct=this._data;Ct&&Ct.eachItemGraphicEl(function(dx,mx){dx.__temp&&(c.remove(dx),Ct.setItemGraphicEl(mx,null))}),J||A.remove(),c.add(O);var Q=S?!1:a.get("step"),on;u&&u.getArea&&a.get("clip",!0)&&(on=u.getArea(),on.width!=null?(on.x-=.1,on.y-=.1,on.width+=.2,on.height+=.2):on.r0&&(on.r0-=.5,on.r+=.5)),this._clipShapeForSymbol=on;var gn=getVisualGradient(p,u,l)||p.getVisual("style")[p.getVisual("drawType")];if(!(R&&T.type===u.type&&Q===this._step))J&&A.updateData(p,{isIgnore:tn,clipShape:on,disableAnimation:!0,getSymbolPoint:function(dx){return[_[dx*2],_[dx*2+1]]}}),F&&this._initSymbolLabelAnimation(p,u,on),Q&&(W&&(W=turnPointsIntoStep(W,_,u,Q,en)),_=turnPointsIntoStep(_,null,u,Q,en)),R=this._newPolyline(_),z?D=this._newPolygon(_,W):D&&(O.remove(D),D=this._polygon=null),S||this._initOrUpdateEndLabel(a,u,convertToColorString(gn)),O.setClipPath(createLineClipPath(this,u,!0,a));else{z&&!D?D=this._newPolygon(_,W):D&&!z&&(O.remove(D),D=this._polygon=null),S||this._initOrUpdateEndLabel(a,u,convertToColorString(gn));var In=O.getClipPath();if(In){var dn=createLineClipPath(this,u,!1,a);initProps(In,{shape:dn.shape},a)}else O.setClipPath(createLineClipPath(this,u,!0,a));J&&A.updateData(p,{isIgnore:tn,clipShape:on,disableAnimation:!0,getSymbolPoint:function(dx){return[_[dx*2],_[dx*2+1]]}}),(!isPointsSame(this._stackedOnPoints,W)||!isPointsSame(this._points,_))&&(F?this._doUpdateAnimation(p,W,u,l,Q,j,en):(Q&&(W&&(W=turnPointsIntoStep(W,_,u,Q,en)),_=turnPointsIntoStep(_,null,u,Q,en)),R.setShape({points:_}),D&&D.setShape({points:_,stackedOnPoints:W})))}var ix=a.getModel("emphasis"),Cn=ix.get("focus"),ax=ix.get("blurScope"),sx=ix.get("disabled");if(R.useStyle(defaults(d.getLineStyle(),{fill:"none",stroke:gn,lineJoin:"bevel"})),setStatesStylesFromModel(R,a,"lineStyle"),R.style.lineWidth>0&&a.get(["emphasis","lineStyle","width"])==="bolder"){var lx=R.getState("emphasis").style;lx.lineWidth=+R.style.lineWidth+1}getECData(R).seriesIndex=a.seriesIndex,toggleHoverEmphasis(R,Cn,ax,sx);var ox=getSmooth(a.get("smooth")),hx=a.get("smoothMonotone");if(R.setShape({smooth:ox,smoothMonotone:hx,connectNulls:en}),D){var _x=p.getCalculationInfo("stackedOnSeries"),ux=0;D.useStyle(defaults(x.getAreaStyle(),{fill:gn,opacity:.7,lineJoin:"bevel",decal:p.getVisual("style").decal})),_x&&(ux=getSmooth(_x.get("smooth"))),D.setShape({smooth:ox,stackedOnSmooth:ux,smoothMonotone:hx,connectNulls:en}),setStatesStylesFromModel(D,a,"areaStyle"),getECData(D).seriesIndex=a.seriesIndex,toggleHoverEmphasis(D,Cn,ax,sx)}var px=this._changePolyState;p.eachItemGraphicEl(function(dx){dx&&(dx.onHoverStateChange=px)}),this._polyline.onHoverStateChange=px,this._data=p,this._coordSys=u,this._stackedOnPoints=W,this._points=_,this._step=Q,this._valueOrigin=j,a.get("triggerLineEvent")&&(this.packEventData(a,R),D&&this.packEventData(a,D))},n.prototype.packEventData=function(a,s){getECData(s).eventData={componentType:"series",componentSubType:"line",componentIndex:a.componentIndex,seriesIndex:a.seriesIndex,seriesName:a.name,seriesType:"line"}},n.prototype.highlight=function(a,s,l,u){var c=a.getData(),p=queryDataIndex(c,u);if(this._changePolyState("emphasis"),!(p instanceof Array)&&p!=null&&p>=0){var d=c.getLayout("points"),x=c.getItemGraphicEl(p);if(!x){var _=d[p*2],S=d[p*2+1];if(isNaN(_)||isNaN(S)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(_,S))return;var T=a.get("zlevel")||0,A=a.get("z")||0;x=new Symbol$1(c,p),x.x=_,x.y=S,x.setZ(T,A);var R=x.getSymbolPath().getTextContent();R&&(R.zlevel=T,R.z=A,R.z2=this._polyline.z2+1),x.__temp=!0,c.setItemGraphicEl(p,x),x.stopSymbolAnimation(!0),this.group.add(x)}x.highlight()}else ChartView.prototype.highlight.call(this,a,s,l,u)},n.prototype.downplay=function(a,s,l,u){var c=a.getData(),p=queryDataIndex(c,u);if(this._changePolyState("normal"),p!=null&&p>=0){var d=c.getItemGraphicEl(p);d&&(d.__temp?(c.setItemGraphicEl(p,null),this.group.remove(d)):d.downplay())}else ChartView.prototype.downplay.call(this,a,s,l,u)},n.prototype._changePolyState=function(a){var s=this._polygon;setStatesFlag(this._polyline,a),s&&setStatesFlag(s,a)},n.prototype._newPolyline=function(a){var s=this._polyline;return s&&this._lineGroup.remove(s),s=new ECPolyline({shape:{points:a},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(s),this._polyline=s,s},n.prototype._newPolygon=function(a,s){var l=this._polygon;return l&&this._lineGroup.remove(l),l=new ECPolygon({shape:{points:a,stackedOnPoints:s},segmentIgnoreThreshold:2}),this._lineGroup.add(l),this._polygon=l,l},n.prototype._initSymbolLabelAnimation=function(a,s,l){var u,c,p=s.getBaseAxis(),d=p.inverse;s.type==="cartesian2d"?(u=p.isHorizontal(),c=!1):s.type==="polar"&&(u=p.dim==="angle",c=!0);var x=a.hostModel,_=x.get("animationDuration");isFunction$1(_)&&(_=_(null));var S=x.get("animationDelay")||0,T=isFunction$1(S)?S(null):S;a.eachItemGraphicEl(function(A,R){var D=A;if(D){var O=[A.x,A.y],F=void 0,z=void 0,j=void 0;if(l)if(c){var Z=l,W=s.pointToCoord(O);u?(F=Z.startAngle,z=Z.endAngle,j=-W[1]/180*Math.PI):(F=Z.r0,z=Z.r,j=W[0])}else{var J=l;u?(F=J.x,z=J.x+J.width,j=A.x):(F=J.y+J.height,z=J.y,j=A.y)}var en=z===F?0:(j-F)/(z-F);d&&(en=1-en);var tn=isFunction$1(S)?S(R):_*en+T,Ct=D.getSymbolPath(),Q=Ct.getTextContent();D.attr({scaleX:0,scaleY:0}),D.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:tn}),Q&&Q.animateFrom({style:{opacity:0}},{duration:300,delay:tn}),Ct.disableLabelAnimation=!0}})},n.prototype._initOrUpdateEndLabel=function(a,s,l){var u=a.getModel("endLabel");if(anyStateShowEndLabel(a)){var c=a.getData(),p=this._polyline,d=c.getLayout("points");if(!d){p.removeTextContent(),this._endLabel=null;return}var x=this._endLabel;x||(x=this._endLabel=new ZRText({z2:200}),x.ignoreClip=!0,p.setTextContent(this._endLabel),p.disableLabelAnimation=!0);var _=getLastIndexNotNull(d);_>=0&&(setLabelStyle(p,getLabelStatesModels(a,"endLabel"),{inheritColor:l,labelFetcher:a,labelDataIndex:_,defaultText:function(S,T,A){return A!=null?getDefaultInterpolatedLabel(c,A):getDefaultLabel(c,S)},enableTextSetter:!0},getEndLabelStateSpecified(u,s)),p.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},n.prototype._endLabelOnDuring=function(a,s,l,u,c,p,d){var x=this._endLabel,_=this._polyline;if(x){a<1&&u.originalX==null&&(u.originalX=x.x,u.originalY=x.y);var S=l.getLayout("points"),T=l.hostModel,A=T.get("connectNulls"),R=p.get("precision"),D=p.get("distance")||0,O=d.getBaseAxis(),F=O.isHorizontal(),z=O.inverse,j=s.shape,Z=z?F?j.x:j.y+j.height:F?j.x+j.width:j.y,W=(F?D:0)*(z?-1:1),J=(F?0:-D)*(z?-1:1),en=F?"x":"y",tn=getIndexRange(S,Z,en),Ct=tn.range,Q=Ct[1]-Ct[0],on=void 0;if(Q>=1){if(Q>1&&!A){var gn=getPointAtIndex(S,Ct[0]);x.attr({x:gn[0]+W,y:gn[1]+J}),c&&(on=T.getRawValue(Ct[0]))}else{var gn=_.getPointOn(Z,en);gn&&x.attr({x:gn[0]+W,y:gn[1]+J});var In=T.getRawValue(Ct[0]),dn=T.getRawValue(Ct[1]);c&&(on=interpolateRawValues(l,R,In,dn,tn.t))}u.lastFrameIndex=Ct[0]}else{var ix=a===1||u.lastFrameIndex>0?Ct[0]:0,gn=getPointAtIndex(S,ix);c&&(on=T.getRawValue(ix)),x.attr({x:gn[0]+W,y:gn[1]+J})}if(c){var Cn=labelInner(x);typeof Cn.setLabelText=="function"&&Cn.setLabelText(on)}}},n.prototype._doUpdateAnimation=function(a,s,l,u,c,p,d){var x=this._polyline,_=this._polygon,S=a.hostModel,T=lineAnimationDiff(this._data,a,this._stackedOnPoints,s,this._coordSys,l,this._valueOrigin),A=T.current,R=T.stackedOnCurrent,D=T.next,O=T.stackedOnNext;if(c&&(R=turnPointsIntoStep(T.stackedOnCurrent,T.current,l,c,d),A=turnPointsIntoStep(T.current,null,l,c,d),O=turnPointsIntoStep(T.stackedOnNext,T.next,l,c,d),D=turnPointsIntoStep(T.next,null,l,c,d)),getBoundingDiff(A,D)>3e3||_&&getBoundingDiff(R,O)>3e3){x.stopAnimation(),x.setShape({points:D}),_&&(_.stopAnimation(),_.setShape({points:D,stackedOnPoints:O}));return}x.shape.__points=T.current,x.shape.points=A;var F={shape:{points:D}};T.current!==A&&(F.shape.__points=T.next),x.stopAnimation(),updateProps$1(x,F,S),_&&(_.setShape({points:A,stackedOnPoints:R}),_.stopAnimation(),updateProps$1(_,{shape:{stackedOnPoints:O}},S),x.shape.points!==_.shape.points&&(_.shape.points=x.shape.points));for(var z=[],j=T.status,Z=0;Z<j.length;Z++){var W=j[Z].cmd;if(W==="="){var J=a.getItemGraphicEl(j[Z].idx1);J&&z.push({el:J,ptIdx:Z})}}x.animators&&x.animators.length&&x.animators[0].during(function(){_&&_.dirtyShape();for(var en=x.shape.__points,tn=0;tn<z.length;tn++){var Ct=z[tn].el,Q=z[tn].ptIdx*2;Ct.x=en[Q],Ct.y=en[Q+1],Ct.markRedraw()}})},n.prototype.remove=function(a){var s=this.group,l=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),l&&l.eachItemGraphicEl(function(u,c){u.__temp&&(s.remove(u),l.setItemGraphicEl(c,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},n.type="line",n}(ChartView);function pointsLayout(t,n){return{seriesType:t,plan:createRenderPlanner(),reset:function(a){var s=a.getData(),l=a.coordinateSystem,u=a.pipelineContext,c=n||u.large;if(l){var p=map$1(l.dimensions,function(A){return s.mapDimension(A)}).slice(0,2),d=p.length,x=s.getCalculationInfo("stackResultDimension");isDimensionStacked(s,p[0])&&(p[0]=x),isDimensionStacked(s,p[1])&&(p[1]=x);var _=s.getStore(),S=s.getDimensionIndex(p[0]),T=s.getDimensionIndex(p[1]);return d&&{progress:function(A,R){for(var D=A.end-A.start,O=c&&createFloat32Array(D*d),F=[],z=[],j=A.start,Z=0;j<A.end;j++){var W=void 0;if(d===1){var J=_.get(S,j);W=l.dataToPoint(J,null,z)}else F[0]=_.get(S,j),F[1]=_.get(T,j),W=l.dataToPoint(F,null,z);c?(O[Z++]=W[0],O[Z++]=W[1]):R.setItemLayout(j,W.slice())}c&&R.setLayout("points",O)}}}}}}var samplers={average:function(t){for(var n=0,a=0,s=0;s<t.length;s++)isNaN(t[s])||(n+=t[s],a++);return a===0?NaN:n/a},sum:function(t){for(var n=0,a=0;a<t.length;a++)n+=t[a]||0;return n},max:function(t){for(var n=-1/0,a=0;a<t.length;a++)t[a]>n&&(n=t[a]);return isFinite(n)?n:NaN},min:function(t){for(var n=1/0,a=0;a<t.length;a++)t[a]<n&&(n=t[a]);return isFinite(n)?n:NaN},nearest:function(t){return t[0]}},indexSampler=function(t){return Math.round(t.length/2)};function dataSample(t){return{seriesType:t,reset:function(n,a,s){var l=n.getData(),u=n.get("sampling"),c=n.coordinateSystem,p=l.count();if(p>10&&c.type==="cartesian2d"&&u){var d=c.getBaseAxis(),x=c.getOtherAxis(d),_=d.getExtent(),S=s.getDevicePixelRatio(),T=Math.abs(_[1]-_[0])*(S||1),A=Math.round(p/T);if(isFinite(A)&&A>1){u==="lttb"?n.setData(l.lttbDownSample(l.mapDimension(x.dim),1/A)):u==="minmax"&&n.setData(l.minmaxDownSample(l.mapDimension(x.dim),1/A));var R=void 0;isString$1(u)?R=samplers[u]:isFunction$1(u)&&(R=u),R&&n.setData(l.downSample(l.mapDimension(x.dim),1/A,R,indexSampler))}}}}}function install$Q(t){t.registerChartView(LineView),t.registerSeriesModel(LineSeriesModel),t.registerLayout(pointsLayout("line",!0)),t.registerVisual({seriesType:"line",reset:function(n){var a=n.getData(),s=n.getModel("lineStyle").getLineStyle();s&&!s.stroke&&(s.stroke=a.getVisual("style").fill),a.setVisual("legendLineStyle",s)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getMarkerPosition=function(a,s,l){var u=this.coordinateSystem;if(u&&u.clampData){var c=u.clampData(a),p=u.dataToPoint(c);if(l)each$f(u.getAxes(),function(T,A){if(T.type==="category"&&s!=null){var R=T.getTicksCoords(),D=T.getTickModel().get("alignWithLabel"),O=c[A],F=s[A]==="x1"||s[A]==="y1";if(F&&!D&&(O+=1),R.length<2)return;if(R.length===2){p[A]=T.toGlobalCoord(T.getExtent()[F?1:0]);return}for(var z=void 0,j=void 0,Z=1,W=0;W<R.length;W++){var J=R[W].coord,en=W===R.length-1?R[W-1].tickValue+Z:R[W].tickValue;if(en===O){j=J;break}else if(en<O)z=J;else if(z!=null&&en>O){j=(J+z)/2;break}W===1&&(Z=en-R[0].tickValue)}j==null&&(z?z&&(j=R[R.length-1].coord):j=R[0].coord),p[A]=T.toGlobalCoord(j)}});else{var d=this.getData(),x=d.getLayout("offset"),_=d.getLayout("size"),S=u.getBaseAxis().isHorizontal()?0:1;p[S]+=x+_/2}return p}return[NaN,NaN]},n.type="series.__base_bar__",n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},n}(SeriesModel);SeriesModel.registerClass(BaseBarSeriesModel);var BarSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},n.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},n.prototype.getProgressiveThreshold=function(){var a=this.get("progressiveThreshold"),s=this.get("largeThreshold");return s>a&&(a=s),a},n.prototype.brushSelector=function(a,s,l){return l.rect(s.getItemLayout(a))},n.type="series.bar",n.dependencies=["grid","polar"],n.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),n}(BaseBarSeriesModel),SausageShape=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),SausagePath=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="sausage",s}return n.prototype.getDefaultShape=function(){return new SausageShape},n.prototype.buildPath=function(a,s){var l=s.cx,u=s.cy,c=Math.max(s.r0||0,0),p=Math.max(s.r,0),d=(p-c)*.5,x=c+d,_=s.startAngle,S=s.endAngle,T=s.clockwise,A=Math.PI*2,R=T?S-_<A:_-S<A;R||(_=S-(T?A:-A));var D=Math.cos(_),O=Math.sin(_),F=Math.cos(S),z=Math.sin(S);R?(a.moveTo(D*c+l,O*c+u),a.arc(D*x+l,O*x+u,d,-Math.PI+_,_,!T)):a.moveTo(D*p+l,O*p+u),a.arc(l,u,p,_,S,!T),a.arc(F*x+l,z*x+u,d,S-Math.PI*2,S-Math.PI,!T),c!==0&&a.arc(l,u,c,S,_,T)},n}(Path);function createSectorCalculateTextPosition(t,n){n=n||{};var a=n.isRoundCap;return function(s,l,u){var c=l.position;if(!c||c instanceof Array)return calculateTextPosition(s,l,u);var p=t(c),d=l.distance!=null?l.distance:5,x=this.shape,_=x.cx,S=x.cy,T=x.r,A=x.r0,R=(T+A)/2,D=x.startAngle,O=x.endAngle,F=(D+O)/2,z=a?Math.abs(T-A)/2:0,j=Math.cos,Z=Math.sin,W=_+T*j(D),J=S+T*Z(D),en="left",tn="top";switch(p){case"startArc":W=_+(A-d)*j(F),J=S+(A-d)*Z(F),en="center",tn="top";break;case"insideStartArc":W=_+(A+d)*j(F),J=S+(A+d)*Z(F),en="center",tn="bottom";break;case"startAngle":W=_+R*j(D)+adjustAngleDistanceX(D,d+z,!1),J=S+R*Z(D)+adjustAngleDistanceY(D,d+z,!1),en="right",tn="middle";break;case"insideStartAngle":W=_+R*j(D)+adjustAngleDistanceX(D,-d+z,!1),J=S+R*Z(D)+adjustAngleDistanceY(D,-d+z,!1),en="left",tn="middle";break;case"middle":W=_+R*j(F),J=S+R*Z(F),en="center",tn="middle";break;case"endArc":W=_+(T+d)*j(F),J=S+(T+d)*Z(F),en="center",tn="bottom";break;case"insideEndArc":W=_+(T-d)*j(F),J=S+(T-d)*Z(F),en="center",tn="top";break;case"endAngle":W=_+R*j(O)+adjustAngleDistanceX(O,d+z,!0),J=S+R*Z(O)+adjustAngleDistanceY(O,d+z,!0),en="left",tn="middle";break;case"insideEndAngle":W=_+R*j(O)+adjustAngleDistanceX(O,-d+z,!0),J=S+R*Z(O)+adjustAngleDistanceY(O,-d+z,!0),en="right",tn="middle";break;default:return calculateTextPosition(s,l,u)}return s=s||{},s.x=W,s.y=J,s.align=en,s.verticalAlign=tn,s}}function setSectorTextRotation(t,n,a,s){if(isNumber(s)){t.setTextConfig({rotation:s});return}else if(isArray$1(n)){t.setTextConfig({rotation:0});return}var l=t.shape,u=l.clockwise?l.startAngle:l.endAngle,c=l.clockwise?l.endAngle:l.startAngle,p=(u+c)/2,d,x=a(n);switch(x){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":d=p;break;case"startAngle":case"insideStartAngle":d=u;break;case"endAngle":case"insideEndAngle":d=c;break;default:t.setTextConfig({rotation:0});return}var _=Math.PI*1.5-d;x==="middle"&&_>Math.PI/2&&_<Math.PI*1.5&&(_-=Math.PI),t.setTextConfig({rotation:_})}function adjustAngleDistanceX(t,n,a){return n*Math.sin(t)*(a?-1:1)}function adjustAngleDistanceY(t,n,a){return n*Math.cos(t)*(a?1:-1)}function getSectorCornerRadius(t,n,a){var s=t.get("borderRadius");if(s==null)return a?{cornerRadius:0}:null;isArray$1(s)||(s=[s,s,s,s]);var l=Math.abs(n.r||0-n.r0||0);return{cornerRadius:map$1(s,function(u){return parsePercent$1(u,l)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(t,n){var a=t.getArea&&t.getArea();if(isCoordinateSystemType(t,"cartesian2d")){var s=t.getBaseAxis();if(s.type!=="category"||!s.onBand){var l=n.getLayout("bandWidth");s.isHorizontal()?(a.x-=l,a.width+=l*2):(a.y-=l,a.height+=l*2)}}return a}var BarView=function(t){__extends(n,t);function n(){var a=t.call(this)||this;return a.type=n.type,a._isFirstFrame=!0,a}return n.prototype.render=function(a,s,l,u){this._model=a,this._removeOnRenderedListener(l),this._updateDrawMode(a);var c=a.get("coordinateSystem");(c==="cartesian2d"||c==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(a,s,l):this._renderNormal(a,s,l,u))},n.prototype.incrementalPrepareRender=function(a){this._clear(),this._updateDrawMode(a),this._updateLargeClip(a)},n.prototype.incrementalRender=function(a,s){this._progressiveEls=[],this._incrementalRenderLarge(a,s)},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype._updateDrawMode=function(a){var s=a.pipelineContext.large;(this._isLargeDraw==null||s!==this._isLargeDraw)&&(this._isLargeDraw=s,this._clear())},n.prototype._renderNormal=function(a,s,l,u){var c=this.group,p=a.getData(),d=this._data,x=a.coordinateSystem,_=x.getBaseAxis(),S;x.type==="cartesian2d"?S=_.isHorizontal():x.type==="polar"&&(S=_.dim==="angle");var T=a.isAnimationEnabled()?a:null,A=shouldRealtimeSort(a,x);A&&this._enableRealtimeSort(A,p,l);var R=a.get("clip",!0)||A,D=getClipArea(x,p);c.removeClipPath();var O=a.get("roundCap",!0),F=a.get("showBackground",!0),z=a.getModel("backgroundStyle"),j=z.get("borderRadius")||0,Z=[],W=this._backgroundEls,J=u&&u.isInitSort,en=u&&u.type==="changeAxisOrder";function tn(on){var gn=getLayout[x.type](p,on),In=createBackgroundEl(x,S,gn);return In.useStyle(z.getItemStyle()),x.type==="cartesian2d"?In.setShape("r",j):In.setShape("cornerRadius",j),Z[on]=In,In}p.diff(d).add(function(on){var gn=p.getItemModel(on),In=getLayout[x.type](p,on,gn);if(F&&tn(on),!(!p.hasValue(on)||!isValidLayout[x.type](In))){var dn=!1;R&&(dn=clip[x.type](D,In));var ix=elementCreator[x.type](a,p,on,In,S,T,_.model,!1,O);A&&(ix.forceLabelAnimation=!0),updateStyle(ix,p,on,gn,In,a,S,x.type==="polar"),J?ix.attr({shape:In}):A?updateRealtimeAnimation(A,T,ix,In,on,S,!1,!1):initProps(ix,{shape:In},a,on),p.setItemGraphicEl(on,ix),c.add(ix),ix.ignore=dn}}).update(function(on,gn){var In=p.getItemModel(on),dn=getLayout[x.type](p,on,In);if(F){var ix=void 0;W.length===0?ix=tn(gn):(ix=W[gn],ix.useStyle(z.getItemStyle()),x.type==="cartesian2d"?ix.setShape("r",j):ix.setShape("cornerRadius",j),Z[on]=ix);var Cn=getLayout[x.type](p,on),ax=createBackgroundShape(S,Cn,x);updateProps$1(ix,{shape:ax},T,on)}var sx=d.getItemGraphicEl(gn);if(!p.hasValue(on)||!isValidLayout[x.type](dn)){c.remove(sx);return}var lx=!1;if(R&&(lx=clip[x.type](D,dn),lx&&c.remove(sx)),sx?saveOldStyle(sx):sx=elementCreator[x.type](a,p,on,dn,S,T,_.model,!!sx,O),A&&(sx.forceLabelAnimation=!0),en){var ox=sx.getTextContent();if(ox){var hx=labelInner(ox);hx.prevValue!=null&&(hx.prevValue=hx.value)}}else updateStyle(sx,p,on,In,dn,a,S,x.type==="polar");J?sx.attr({shape:dn}):A?updateRealtimeAnimation(A,T,sx,dn,on,S,!0,en):updateProps$1(sx,{shape:dn},a,on,null),p.setItemGraphicEl(on,sx),sx.ignore=lx,c.add(sx)}).remove(function(on){var gn=d.getItemGraphicEl(on);gn&&removeElementWithFadeOut(gn,a,on)}).execute();var Ct=this._backgroundGroup||(this._backgroundGroup=new Group$3);Ct.removeAll();for(var Q=0;Q<Z.length;++Q)Ct.add(Z[Q]);c.add(Ct),this._backgroundEls=Z,this._data=p},n.prototype._renderLarge=function(a,s,l){this._clear(),createLarge$1(a,this.group),this._updateLargeClip(a)},n.prototype._incrementalRenderLarge=function(a,s){this._removeBackground(),createLarge$1(s,this.group,this._progressiveEls,!0)},n.prototype._updateLargeClip=function(a){var s=a.get("clip",!0)&&createClipPath(a.coordinateSystem,!1,a),l=this.group;s?l.setClipPath(s):l.removeClipPath()},n.prototype._enableRealtimeSort=function(a,s,l){var u=this;if(s.count()){var c=a.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(s,a,l),this._isFirstFrame=!1;else{var p=function(d){var x=s.getItemGraphicEl(d),_=x&&x.shape;return _&&Math.abs(c.isHorizontal()?_.height:_.width)||0};this._onRendered=function(){u._updateSortWithinSameData(s,p,c,l)},l.getZr().on("rendered",this._onRendered)}}},n.prototype._dataSort=function(a,s,l){var u=[];return a.each(a.mapDimension(s.dim),function(c,p){var d=l(p);d=d??NaN,u.push({dataIndex:p,mappedValue:d,ordinalNumber:c})}),u.sort(function(c,p){return p.mappedValue-c.mappedValue}),{ordinalNumbers:map$1(u,function(c){return c.ordinalNumber})}},n.prototype._isOrderChangedWithinSameData=function(a,s,l){for(var u=l.scale,c=a.mapDimension(l.dim),p=Number.MAX_VALUE,d=0,x=u.getOrdinalMeta().categories.length;d<x;++d){var _=a.rawIndexOf(c,u.getRawOrdinalNumber(d)),S=_<0?Number.MIN_VALUE:s(a.indexOfRawIndex(_));if(S>p)return!0;p=S}return!1},n.prototype._isOrderDifferentInView=function(a,s){for(var l=s.scale,u=l.getExtent(),c=Math.max(0,u[0]),p=Math.min(u[1],l.getOrdinalMeta().categories.length-1);c<=p;++c)if(a.ordinalNumbers[c]!==l.getRawOrdinalNumber(c))return!0},n.prototype._updateSortWithinSameData=function(a,s,l,u){if(this._isOrderChangedWithinSameData(a,s,l)){var c=this._dataSort(a,l,s);this._isOrderDifferentInView(c,l)&&(this._removeOnRenderedListener(u),u.dispatchAction({type:"changeAxisOrder",componentType:l.dim+"Axis",axisId:l.index,sortInfo:c}))}},n.prototype._dispatchInitSort=function(a,s,l){var u=s.baseAxis,c=this._dataSort(a,u,function(p){return a.get(a.mapDimension(s.otherAxis.dim),p)});l.dispatchAction({type:"changeAxisOrder",componentType:u.dim+"Axis",isInitSort:!0,axisId:u.index,sortInfo:c})},n.prototype.remove=function(a,s){this._clear(this._model),this._removeOnRenderedListener(s)},n.prototype.dispose=function(a,s){this._removeOnRenderedListener(s)},n.prototype._removeOnRenderedListener=function(a){this._onRendered&&(a.getZr().off("rendered",this._onRendered),this._onRendered=null)},n.prototype._clear=function(a){var s=this.group,l=this._data;a&&a.isAnimationEnabled()&&l&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],l.eachItemGraphicEl(function(u){removeElementWithFadeOut(u,a,getECData(u).dataIndex)})):s.removeAll(),this._data=null,this._isFirstFrame=!0},n.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},n.type="bar",n}(ChartView),clip={cartesian2d:function(t,n){var a=n.width<0?-1:1,s=n.height<0?-1:1;a<0&&(n.x+=n.width,n.width=-n.width),s<0&&(n.y+=n.height,n.height=-n.height);var l=t.x+t.width,u=t.y+t.height,c=mathMax$4(n.x,t.x),p=mathMin$4(n.x+n.width,l),d=mathMax$4(n.y,t.y),x=mathMin$4(n.y+n.height,u),_=p<c,S=x<d;return n.x=_&&c>l?p:c,n.y=S&&d>u?x:d,n.width=_?0:p-c,n.height=S?0:x-d,a<0&&(n.x+=n.width,n.width=-n.width),s<0&&(n.y+=n.height,n.height=-n.height),_||S},polar:function(t,n){var a=n.r0<=n.r?1:-1;if(a<0){var s=n.r;n.r=n.r0,n.r0=s}var l=mathMin$4(n.r,t.r),u=mathMax$4(n.r0,t.r0);n.r=l,n.r0=u;var c=l-u<0;if(a<0){var s=n.r;n.r=n.r0,n.r0=s}return c}},elementCreator={cartesian2d:function(t,n,a,s,l,u,c,p,d){var x=new Rect$2({shape:extend({},s),z2:1});if(x.__dataIndex=a,x.name="item",u){var _=x.shape,S=l?"height":"width";_[S]=0}return x},polar:function(t,n,a,s,l,u,c,p,d){var x=!l&&d?SausagePath:Sector,_=new x({shape:s,z2:1});_.name="item";var S=createPolarPositionMapping(l);if(_.calculateTextPosition=createSectorCalculateTextPosition(S,{isRoundCap:x===SausagePath}),u){var T=_.shape,A=l?"r":"endAngle",R={};T[A]=l?s.r0:s.startAngle,R[A]=s[A],(p?updateProps$1:initProps)(_,{shape:R},u)}return _}};function shouldRealtimeSort(t,n){var a=t.get("realtimeSort",!0),s=n.getBaseAxis();if(a&&s.type==="category"&&n.type==="cartesian2d")return{baseAxis:s,otherAxis:n.getOtherAxis(s)}}function updateRealtimeAnimation(t,n,a,s,l,u,c,p){var d,x;u?(x={x:s.x,width:s.width},d={y:s.y,height:s.height}):(x={y:s.y,height:s.height},d={x:s.x,width:s.width}),p||(c?updateProps$1:initProps)(a,{shape:d},n,l,null);var _=n?t.baseAxis.model:null;(c?updateProps$1:initProps)(a,{shape:x},_,l)}function checkPropertiesNotValid(t,n){for(var a=0;a<n.length;a++)if(!isFinite(t[n[a]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(t){return!checkPropertiesNotValid(t,rectPropties)},polar:function(t){return!checkPropertiesNotValid(t,polarPropties)}},getLayout={cartesian2d:function(t,n,a){var s=t.getItemLayout(n),l=a?getLineWidth(a,s):0,u=s.width>0?1:-1,c=s.height>0?1:-1;return{x:s.x+u*l/2,y:s.y+c*l/2,width:s.width-u*l,height:s.height-c*l}},polar:function(t,n,a){var s=t.getItemLayout(n);return{cx:s.cx,cy:s.cy,r0:s.r0,r:s.r,startAngle:s.startAngle,endAngle:s.endAngle,clockwise:s.clockwise}}};function isZeroOnPolar(t){return t.startAngle!=null&&t.endAngle!=null&&t.startAngle===t.endAngle}function createPolarPositionMapping(t){return function(n){var a=n?"Arc":"Angle";return function(s){switch(s){case"start":case"insideStart":case"end":case"insideEnd":return s+a;default:return s}}}(t)}function updateStyle(t,n,a,s,l,u,c,p){var d=n.getItemVisual(a,"style");if(p){if(!u.get("roundCap")){var _=t.shape,S=getSectorCornerRadius(s.getModel("itemStyle"),_,!0);extend(_,S),t.setShape(_)}}else{var x=s.get(["itemStyle","borderRadius"])||0;t.setShape("r",x)}t.useStyle(d);var T=s.getShallow("cursor");T&&t.attr("cursor",T);var A=p?c?l.r>=l.r0?"endArc":"startArc":l.endAngle>=l.startAngle?"endAngle":"startAngle":c?l.height>=0?"bottom":"top":l.width>=0?"right":"left",R=getLabelStatesModels(s);setLabelStyle(t,R,{labelFetcher:u,labelDataIndex:a,defaultText:getDefaultLabel(u.getData(),a),inheritColor:d.fill,defaultOpacity:d.opacity,defaultOutsidePosition:A});var D=t.getTextContent();if(p&&D){var O=s.get(["label","position"]);t.textConfig.inside=O==="middle"?!0:null,setSectorTextRotation(t,O==="outside"?A:O,createPolarPositionMapping(c),s.get(["label","rotate"]))}setLabelValueAnimation(D,R,u.getRawValue(a),function(z){return getDefaultInterpolatedLabel(n,z)});var F=s.getModel(["emphasis"]);toggleHoverEmphasis(t,F.get("focus"),F.get("blurScope"),F.get("disabled")),setStatesStylesFromModel(t,s),isZeroOnPolar(l)&&(t.style.fill="none",t.style.stroke="none",each$f(t.states,function(z){z.style&&(z.style.fill=z.style.stroke="none")}))}function getLineWidth(t,n){var a=t.get(["itemStyle","borderColor"]);if(!a||a==="none")return 0;var s=t.get(["itemStyle","borderWidth"])||0,l=isNaN(n.width)?Number.MAX_VALUE:Math.abs(n.width),u=isNaN(n.height)?Number.MAX_VALUE:Math.abs(n.height);return Math.min(s,l,u)}var LagePathShape=function(){function t(){}return t}(),LargePath=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="largeBar",s}return n.prototype.getDefaultShape=function(){return new LagePathShape},n.prototype.buildPath=function(a,s){for(var l=s.points,u=this.baseDimIdx,c=1-this.baseDimIdx,p=[],d=[],x=this.barWidth,_=0;_<l.length;_+=3)d[u]=x,d[c]=l[_+2],p[u]=l[_+u],p[c]=l[_+c],a.rect(p[0],p[1],d[0],d[1])},n}(Path);function createLarge$1(t,n,a,s){var l=t.getData(),u=l.getLayout("valueAxisHorizontal")?1:0,c=l.getLayout("largeDataIndices"),p=l.getLayout("size"),d=t.getModel("backgroundStyle"),x=l.getLayout("largeBackgroundPoints");if(x){var _=new LargePath({shape:{points:x},incremental:!!s,silent:!0,z2:0});_.baseDimIdx=u,_.largeDataIndices=c,_.barWidth=p,_.useStyle(d.getItemStyle()),n.add(_),a&&a.push(_)}var S=new LargePath({shape:{points:l.getLayout("largePoints")},incremental:!!s,ignoreCoarsePointer:!0,z2:1});S.baseDimIdx=u,S.largeDataIndices=c,S.barWidth=p,n.add(S),S.useStyle(l.getVisual("style")),S.style.stroke=null,getECData(S).seriesIndex=t.seriesIndex,t.get("silent")||(S.on("mousedown",largePathUpdateDataIndex),S.on("mousemove",largePathUpdateDataIndex)),a&&a.push(S)}var largePathUpdateDataIndex=throttle(function(t){var n=this,a=largePathFindDataIndex(n,t.offsetX,t.offsetY);getECData(n).dataIndex=a>=0?a:null},30,!1);function largePathFindDataIndex(t,n,a){for(var s=t.baseDimIdx,l=1-s,u=t.shape.points,c=t.largeDataIndices,p=[],d=[],x=t.barWidth,_=0,S=u.length/3;_<S;_++){var T=_*3;if(d[s]=x,d[l]=u[T+2],p[s]=u[T+s],p[l]=u[T+l],d[l]<0&&(p[l]+=d[l],d[l]=-d[l]),n>=p[0]&&n<=p[0]+d[0]&&a>=p[1]&&a<=p[1]+d[1])return c[_]}return-1}function createBackgroundShape(t,n,a){if(isCoordinateSystemType(a,"cartesian2d")){var s=n,l=a.getArea();return{x:t?s.x:l.x,y:t?l.y:s.y,width:t?s.width:l.width,height:t?l.height:s.height}}else{var l=a.getArea(),u=n;return{cx:l.cx,cy:l.cy,r0:t?l.r0:u.r0,r:t?l.r:u.r,startAngle:t?u.startAngle:0,endAngle:t?u.endAngle:Math.PI*2}}}function createBackgroundEl(t,n,a){var s=t.type==="polar"?Sector:Rect$2;return new s({shape:createBackgroundShape(n,a,t),silent:!0,z2:0})}function install$P(t){t.registerChartView(BarView),t.registerSeriesModel(BarSeriesModel),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(n,a){var s=n.componentType||"series";a.eachComponent({mainType:s,query:n},function(l){n.sortInfo&&l.axis.setCategorySortInfo(n.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function getBasicPieLayout(t,n){var a=getViewRect$5(t,n),s=t.get("center"),l=t.get("radius");isArray$1(l)||(l=[0,l]);var u=parsePercent(a.width,n.getWidth()),c=parsePercent(a.height,n.getHeight()),p=Math.min(u,c),d=parsePercent(l[0],p/2),x=parsePercent(l[1],p/2),_,S,T=t.coordinateSystem;if(T){var A=T.dataToPoint(s);_=A[0]||0,S=A[1]||0}else isArray$1(s)||(s=[s,s]),_=parsePercent(s[0],u)+a.x,S=parsePercent(s[1],c)+a.y;return{cx:_,cy:S,r0:d,r:x}}function pieLayout(t,n,a){n.eachSeriesByType(t,function(s){var l=s.getData(),u=l.mapDimension("value"),c=getViewRect$5(s,a),p=getBasicPieLayout(s,a),d=p.cx,x=p.cy,_=p.r,S=p.r0,T=-s.get("startAngle")*RADIAN$2,A=s.get("endAngle"),R=s.get("padAngle")*RADIAN$2;A=A==="auto"?T-PI2:-A*RADIAN$2;var D=s.get("minAngle")*RADIAN$2,O=D+R,F=0;l.each(u,function(ax){!isNaN(ax)&&F++});var z=l.getSum(u),j=Math.PI/(z||F)*2,Z=s.get("clockwise"),W=s.get("roseType"),J=s.get("stillShowZeroSum"),en=l.getDataExtent(u);en[0]=0;var tn=Z?1:-1,Ct=[T,A],Q=tn*R/2;normalizeArcAngles(Ct,!Z),T=Ct[0],A=Ct[1];var on=getSeriesLayoutData(s);on.startAngle=T,on.endAngle=A,on.clockwise=Z;var gn=Math.abs(A-T),In=gn,dn=0,ix=T;if(l.setLayout({viewRect:c,r:_}),l.each(u,function(ax,sx){var lx;if(isNaN(ax)){l.setItemLayout(sx,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:Z,cx:d,cy:x,r0:S,r:W?NaN:_});return}W!=="area"?lx=z===0&&J?j:ax*j:lx=gn/F,lx<O?(lx=O,In-=O):dn+=ax;var ox=ix+tn*lx,hx=0,_x=0;R>lx?(hx=ix+tn*lx/2,_x=hx):(hx=ix+Q,_x=ox-Q),l.setItemLayout(sx,{angle:lx,startAngle:hx,endAngle:_x,clockwise:Z,cx:d,cy:x,r0:S,r:W?linearMap$2(ax,en,[S,_]):_}),ix=ox}),In<PI2&&F)if(In<=.001){var Cn=gn/F;l.each(u,function(ax,sx){if(!isNaN(ax)){var lx=l.getItemLayout(sx);lx.angle=Cn;var ox=0,hx=0;Cn<R?(ox=T+tn*(sx+1/2)*Cn,hx=ox):(ox=T+tn*sx*Cn+Q,hx=T+tn*(sx+1)*Cn-Q),lx.startAngle=ox,lx.endAngle=hx}})}else j=In/dn,ix=T,l.each(u,function(ax,sx){if(!isNaN(ax)){var lx=l.getItemLayout(sx),ox=lx.angle===O?O:ax*j,hx=0,_x=0;ox<R?(hx=ix+tn*ox/2,_x=hx):(hx=ix+Q,_x=ix+tn*ox-Q),lx.startAngle=hx,lx.endAngle=_x,ix+=tn*ox}})})}var getSeriesLayoutData=makeInner();function dataFilter$1(t){return{seriesType:t,reset:function(n,a){var s=a.findComponents({mainType:"legend"});if(!(!s||!s.length)){var l=n.getData();l.filterSelf(function(u){for(var c=l.getName(u),p=0;p<s.length;p++)if(!s[p].isSelected(c))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(t,n,a,s,l,u,c,p,d,x){if(t.length<2)return;function _(D){for(var O=D.rB,F=O*O,z=0;z<D.list.length;z++){var j=D.list[z],Z=Math.abs(j.label.y-a),W=s+j.len,J=W*W,en=Math.sqrt(Math.abs((1-Z*Z/F)*J)),tn=n+(en+j.len2)*l,Ct=tn-j.label.x,Q=j.targetTextWidth-Ct*l;constrainTextWidth(j,Q,!0),j.label.x=tn}}function S(D){for(var O={list:[],maxY:0},F={list:[],maxY:0},z=0;z<D.length;z++)if(D[z].labelAlignTo==="none"){var j=D[z],Z=j.label.y>a?F:O,W=Math.abs(j.label.y-a);if(W>=Z.maxY){var J=j.label.x-n-j.len2*l,en=s+j.len,tn=Math.abs(J)<en?Math.sqrt(W*W/(1-J*J/en/en)):en;Z.rB=tn,Z.maxY=W}Z.list.push(j)}_(O),_(F)}for(var T=t.length,A=0;A<T;A++)if(t[A].position==="outer"&&t[A].labelAlignTo==="labelLine"){var R=t[A].label.x-x;t[A].linePoints[1][0]+=R,t[A].label.x=x}shiftLayoutOnY(t,d,d+c)&&S(t)}function avoidOverlap(t,n,a,s,l,u,c,p){for(var d=[],x=[],_=Number.MAX_VALUE,S=-Number.MAX_VALUE,T=0;T<t.length;T++){var A=t[T].label;isPositionCenter(t[T])||(A.x<n?(_=Math.min(_,A.x),d.push(t[T])):(S=Math.max(S,A.x),x.push(t[T])))}for(var T=0;T<t.length;T++){var R=t[T];if(!isPositionCenter(R)&&R.linePoints){if(R.labelStyleWidth!=null)continue;var A=R.label,D=R.linePoints,O=void 0;R.labelAlignTo==="edge"?A.x<n?O=D[2][0]-R.labelDistance-c-R.edgeDistance:O=c+l-R.edgeDistance-D[2][0]-R.labelDistance:R.labelAlignTo==="labelLine"?A.x<n?O=_-c-R.bleedMargin:O=c+l-S-R.bleedMargin:A.x<n?O=A.x-c-R.bleedMargin:O=c+l-A.x-R.bleedMargin,R.targetTextWidth=O,constrainTextWidth(R,O)}}adjustSingleSide(x,n,a,s,1,l,u,c,p,S),adjustSingleSide(d,n,a,s,-1,l,u,c,p,_);for(var T=0;T<t.length;T++){var R=t[T];if(!isPositionCenter(R)&&R.linePoints){var A=R.label,D=R.linePoints,F=R.labelAlignTo==="edge",z=A.style.padding,j=z?z[1]+z[3]:0,Z=A.style.backgroundColor?0:j,W=R.rect.width+Z,J=D[1][0]-D[2][0];F?A.x<n?D[2][0]=c+R.edgeDistance+W+R.labelDistance:D[2][0]=c+l-R.edgeDistance-W-R.labelDistance:(A.x<n?D[2][0]=A.x+R.labelDistance:D[2][0]=A.x-R.labelDistance,D[1][0]=D[2][0]+J),D[1][1]=D[2][1]=A.y}}}function constrainTextWidth(t,n,a){if(a===void 0&&(a=!1),t.labelStyleWidth==null){var s=t.label,l=s.style,u=t.rect,c=l.backgroundColor,p=l.padding,d=p?p[1]+p[3]:0,x=l.overflow,_=u.width+(c?0:d);if(n<_||a){var S=u.height;if(x&&x.match("break")){s.setStyle("backgroundColor",null),s.setStyle("width",n-d);var T=s.getBoundingRect();s.setStyle("width",Math.ceil(T.width)),s.setStyle("backgroundColor",c)}else{var A=n-d,R=n<_?A:a?A>t.unconstrainedWidth?null:A:null;s.setStyle("width",R)}var D=s.getBoundingRect();u.width=D.width;var O=(s.style.margin||0)+2.1;u.height=D.height+O,u.y-=(u.height-S)/2}}}function isPositionCenter(t){return t.position==="center"}function pieLabelLayout(t){var n=t.getData(),a=[],s,l,u=!1,c=(t.get("minShowLabelAngle")||0)*RADIAN$1,p=n.getLayout("viewRect"),d=n.getLayout("r"),x=p.width,_=p.x,S=p.y,T=p.height;function A(J){J.ignore=!0}function R(J){if(!J.ignore)return!0;for(var en in J.states)if(J.states[en].ignore===!1)return!0;return!1}n.each(function(J){var en=n.getItemGraphicEl(J),tn=en.shape,Ct=en.getTextContent(),Q=en.getTextGuideLine(),on=n.getItemModel(J),gn=on.getModel("label"),In=gn.get("position")||on.get(["emphasis","label","position"]),dn=gn.get("distanceToLabelLine"),ix=gn.get("alignTo"),Cn=parsePercent(gn.get("edgeDistance"),x),ax=gn.get("bleedMargin"),sx=on.getModel("labelLine"),lx=sx.get("length");lx=parsePercent(lx,x);var ox=sx.get("length2");if(ox=parsePercent(ox,x),Math.abs(tn.endAngle-tn.startAngle)<c){each$f(Ct.states,A),Ct.ignore=!0,Q&&(each$f(Q.states,A),Q.ignore=!0);return}if(R(Ct)){var hx=(tn.startAngle+tn.endAngle)/2,_x=Math.cos(hx),ux=Math.sin(hx),px,dx,mx,gx;s=tn.cx,l=tn.cy;var Sx=In==="inside"||In==="inner";if(In==="center")px=tn.cx,dx=tn.cy,gx="center";else{var Ex=(Sx?(tn.r+tn.r0)/2*_x:tn.r*_x)+s,Cx=(Sx?(tn.r+tn.r0)/2*ux:tn.r*ux)+l;if(px=Ex+_x*3,dx=Cx+ux*3,!Sx){var Ax=Ex+_x*(lx+d-tn.r),Tx=Cx+ux*(lx+d-tn.r),kx=Ax+(_x<0?-1:1)*ox,Rx=Tx;ix==="edge"?px=_x<0?_+Cn:_+x-Cn:px=kx+(_x<0?-dn:dn),dx=Rx,mx=[[Ex,Cx],[Ax,Tx],[kx,Rx]]}gx=Sx?"center":ix==="edge"?_x>0?"right":"left":_x>0?"left":"right"}var $x=Math.PI,Gx=0,qx=gn.get("rotate");if(isNumber(qx))Gx=qx*($x/180);else if(In==="center")Gx=0;else if(qx==="radial"||qx===!0){var Dx=_x<0?-hx+$x:-hx;Gx=Dx}else if(qx==="tangential"&&In!=="outside"&&In!=="outer"){var lE=Math.atan2(_x,ux);lE<0&&(lE=$x*2+lE);var cE=ux>0;cE&&(lE=$x+lE),Gx=lE-$x}if(u=!!Gx,Ct.x=px,Ct.y=dx,Ct.rotation=Gx,Ct.setStyle({verticalAlign:"middle"}),Sx){Ct.setStyle({align:gx});var _E=Ct.states.select;_E&&(_E.x+=Ct.x,_E.y+=Ct.y)}else{var nE=Ct.getBoundingRect().clone();nE.applyTransform(Ct.getComputedTransform());var iE=(Ct.style.margin||0)+2.1;nE.y-=iE/2,nE.height+=iE,a.push({label:Ct,labelLine:Q,position:In,len:lx,len2:ox,minTurnAngle:sx.get("minTurnAngle"),maxSurfaceAngle:sx.get("maxSurfaceAngle"),surfaceNormal:new Point(_x,ux),linePoints:mx,textAlign:gx,labelDistance:dn,labelAlignTo:ix,edgeDistance:Cn,bleedMargin:ax,rect:nE,unconstrainedWidth:nE.width,labelStyleWidth:Ct.style.width})}en.setTextConfig({inside:Sx})}}),!u&&t.get("avoidLabelOverlap")&&avoidOverlap(a,s,l,d,x,T,_,S);for(var D=0;D<a.length;D++){var O=a[D],F=O.label,z=O.labelLine,j=isNaN(F.x)||isNaN(F.y);if(F){F.setStyle({align:O.textAlign}),j&&(each$f(F.states,A),F.ignore=!0);var Z=F.states.select;Z&&(Z.x+=F.x,Z.y+=F.y)}if(z){var W=O.linePoints;j||!W?(each$f(z.states,A),z.ignore=!0):(limitTurnAngle(W,O.minTurnAngle),limitSurfaceAngle(W,O.surfaceNormal,O.maxSurfaceAngle),z.setShape({points:W}),F.__hostTarget.textGuideLineConfig={anchor:new Point(W[0][0],W[0][1])})}}}var PiePiece=function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;u.z2=2;var c=new ZRText;return u.setTextContent(c),u.updateData(a,s,l,!0),u}return n.prototype.updateData=function(a,s,l,u){var c=this,p=a.hostModel,d=a.getItemModel(s),x=d.getModel("emphasis"),_=a.getItemLayout(s),S=extend(getSectorCornerRadius(d.getModel("itemStyle"),_,!0),_);if(isNaN(S.startAngle)){c.setShape(S);return}if(u){c.setShape(S);var T=p.getShallow("animationType");p.ecModel.ssr?(initProps(c,{scaleX:0,scaleY:0},p,{dataIndex:s,isFrom:!0}),c.originX=S.cx,c.originY=S.cy):T==="scale"?(c.shape.r=_.r0,initProps(c,{shape:{r:_.r}},p,s)):l!=null?(c.setShape({startAngle:l,endAngle:l}),initProps(c,{shape:{startAngle:_.startAngle,endAngle:_.endAngle}},p,s)):(c.shape.endAngle=_.startAngle,updateProps$1(c,{shape:{endAngle:_.endAngle}},p,s))}else saveOldStyle(c),updateProps$1(c,{shape:S},p,s);c.useStyle(a.getItemVisual(s,"style")),setStatesStylesFromModel(c,d);var A=(_.startAngle+_.endAngle)/2,R=p.get("selectedOffset"),D=Math.cos(A)*R,O=Math.sin(A)*R,F=d.getShallow("cursor");F&&c.attr("cursor",F),this._updateLabel(p,a,s),c.ensureState("emphasis").shape=extend({r:_.r+(x.get("scale")&&x.get("scaleSize")||0)},getSectorCornerRadius(x.getModel("itemStyle"),_)),extend(c.ensureState("select"),{x:D,y:O,shape:getSectorCornerRadius(d.getModel(["select","itemStyle"]),_)}),extend(c.ensureState("blur"),{shape:getSectorCornerRadius(d.getModel(["blur","itemStyle"]),_)});var z=c.getTextGuideLine(),j=c.getTextContent();z&&extend(z.ensureState("select"),{x:D,y:O}),extend(j.ensureState("select"),{x:D,y:O}),toggleHoverEmphasis(this,x.get("focus"),x.get("blurScope"),x.get("disabled"))},n.prototype._updateLabel=function(a,s,l){var u=this,c=s.getItemModel(l),p=c.getModel("labelLine"),d=s.getItemVisual(l,"style"),x=d&&d.fill,_=d&&d.opacity;setLabelStyle(u,getLabelStatesModels(c),{labelFetcher:s.hostModel,labelDataIndex:l,inheritColor:x,defaultOpacity:_,defaultText:a.getFormattedLabel(l,"normal")||s.getName(l)});var S=u.getTextContent();u.setTextConfig({position:null,rotation:null}),S.attr({z2:10});var T=a.get(["label","position"]);if(T!=="outside"&&T!=="outer")u.removeTextGuideLine();else{var A=this.getTextGuideLine();A||(A=new Polyline$1,this.setTextGuideLine(A)),setLabelLineStyle(this,getLabelLineStatesModels(c),{stroke:x,opacity:retrieve3(p.get(["lineStyle","opacity"]),_,1)})}},n}(Sector),PieView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.ignoreLabelLineUpdate=!0,a}return n.prototype.render=function(a,s,l,u){var c=a.getData(),p=this._data,d=this.group,x;if(!p&&c.count()>0){for(var _=c.getItemLayout(0),S=1;isNaN(_&&_.startAngle)&&S<c.count();++S)_=c.getItemLayout(S);_&&(x=_.startAngle)}if(this._emptyCircleSector&&d.remove(this._emptyCircleSector),c.count()===0&&a.get("showEmptyCircle")){var T=getSeriesLayoutData(a),A=new Sector({shape:extend(getBasicPieLayout(a,l),T)});A.useStyle(a.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=A,d.add(A)}c.diff(p).add(function(R){var D=new PiePiece(c,R,x);c.setItemGraphicEl(R,D),d.add(D)}).update(function(R,D){var O=p.getItemGraphicEl(D);O.updateData(c,R,x),O.off("click"),d.add(O),c.setItemGraphicEl(R,O)}).remove(function(R){var D=p.getItemGraphicEl(R);removeElementWithFadeOut(D,a,R)}).execute(),pieLabelLayout(a),a.get("animationTypeUpdate")!=="expansion"&&(this._data=c)},n.prototype.dispose=function(){},n.prototype.containPoint=function(a,s){var l=s.getData(),u=l.getItemLayout(0);if(u){var c=a[0]-u.cx,p=a[1]-u.cy,d=Math.sqrt(c*c+p*p);return d<=u.r&&d>=u.r0}},n.type="pie",n}(ChartView);function createSeriesDataSimply(t,n,a){n=isArray$1(n)&&{coordDimensions:n}||extend({encodeDefine:t.getEncode()},n);var s=t.getSource(),l=prepareSeriesDataSchema(s,n).dimensions,u=new SeriesData(l,t);return u.initData(s,a),u}var LegendVisualProvider=function(){function t(n,a){this._getDataWithEncodedVisual=n,this._getRawData=a}return t.prototype.getAllNames=function(){var n=this._getRawData();return n.mapArray(n.getName)},t.prototype.containName=function(n){var a=this._getRawData();return a.indexOfName(n)>=0},t.prototype.indexOfName=function(n){var a=this._getDataWithEncodedVisual();return a.indexOfName(n)},t.prototype.getItemVisual=function(n,a){var s=this._getDataWithEncodedVisual();return s.getItemVisual(n,a)},t}(),innerData=makeInner(),PieSeriesModel=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(a)},n.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},n.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},n.prototype.getDataParams=function(a){var s=this.getData(),l=innerData(s),u=l.seats;if(!u){var c=[];s.each(s.mapDimension("value"),function(d){c.push(d)}),u=l.seats=getPercentSeats(c,s.hostModel.get("percentPrecision"))}var p=t.prototype.getDataParams.call(this,a);return p.percent=u[a]||0,p.$vars.push("percent"),p},n.prototype._defaultLabelLine=function(a){defaultEmphasis(a,"labelLine",["show"]);var s=a.labelLine,l=a.emphasis.labelLine;s.show=s.show&&a.label.show,l.show=l.show&&a.emphasis.label.show},n.type="series.pie",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},n}(SeriesModel);function negativeDataFilter(t){return{seriesType:t,reset:function(n,a){var s=n.getData();s.filterSelf(function(l){var u=s.mapDimension("value"),c=s.get(u,l);return!(isNumber(c)&&!isNaN(c)&&c<0)})}}}function install$O(t){t.registerChartView(PieView),t.registerSeriesModel(PieSeriesModel),createLegacyDataSelectAction("pie",t.registerAction),t.registerLayout(curry$1(pieLayout,"pie")),t.registerProcessor(dataFilter$1("pie")),t.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?5e3:this.get("progressive"))},n.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?1e4:this.get("progressiveThreshold"))},n.prototype.brushSelector=function(a,s,l){return l.point(s.getItemLayout(a))},n.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},n.type="series.scatter",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},n}(SeriesModel),BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function t(){}return t}(),LargeSymbolPath=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s._off=0,s.hoverDataIdx=-1,s}return n.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.buildPath=function(a,s){var l=s.points,u=s.size,c=this.symbolProxy,p=c.shape,d=a.getContext?a.getContext():a,x=d&&u[0]<BOOST_SIZE_THRESHOLD,_=this.softClipShape,S;if(x){this._ctx=d;return}for(this._ctx=null,S=this._off;S<l.length;){var T=l[S++],A=l[S++];isNaN(T)||isNaN(A)||_&&!_.contain(T,A)||(p.x=T-u[0]/2,p.y=A-u[1]/2,p.width=u[0],p.height=u[1],c.buildPath(a,p,!0))}this.incremental&&(this._off=S,this.notClear=!0)},n.prototype.afterBrush=function(){var a=this.shape,s=a.points,l=a.size,u=this._ctx,c=this.softClipShape,p;if(u){for(p=this._off;p<s.length;){var d=s[p++],x=s[p++];isNaN(d)||isNaN(x)||c&&!c.contain(d,x)||u.fillRect(d-l[0]/2,x-l[1]/2,l[0],l[1])}this.incremental&&(this._off=p,this.notClear=!0)}},n.prototype.findDataIndex=function(a,s){for(var l=this.shape,u=l.points,c=l.size,p=Math.max(c[0],4),d=Math.max(c[1],4),x=u.length/2-1;x>=0;x--){var _=x*2,S=u[_]-p/2,T=u[_+1]-d/2;if(a>=S&&s>=T&&a<=S+p&&s<=T+d)return x}return-1},n.prototype.contain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect();if(a=l[0],s=l[1],u.contain(a,s)){var c=this.hoverDataIdx=this.findDataIndex(a,s);return c>=0}return this.hoverDataIdx=-1,!1},n.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var s=this.shape,l=s.points,u=s.size,c=u[0],p=u[1],d=1/0,x=1/0,_=-1/0,S=-1/0,T=0;T<l.length;){var A=l[T++],R=l[T++];d=Math.min(A,d),_=Math.max(A,_),x=Math.min(R,x),S=Math.max(R,S)}a=this._rect=new BoundingRect(d-c/2,x-p/2,_-d+c,S-x+p)}return a},n}(Path),LargeSymbolDraw=function(){function t(){this.group=new Group$3}return t.prototype.updateData=function(n,a){this._clear();var s=this._create();s.setShape({points:n.getLayout("points")}),this._setCommon(s,n,a)},t.prototype.updateLayout=function(n){var a=n.getLayout("points");this.group.eachChild(function(s){if(s.startIndex!=null){var l=(s.endIndex-s.startIndex)*2,u=s.startIndex*4*2;a=new Float32Array(a.buffer,u,l)}s.setShape("points",a),s.reset()})},t.prototype.incrementalPrepareUpdate=function(n){this._clear()},t.prototype.incrementalUpdate=function(n,a,s){var l=this._newAdded[0],u=a.getLayout("points"),c=l&&l.shape.points;if(c&&c.length<2e4){var p=c.length,d=new Float32Array(p+u.length);d.set(c),d.set(u,p),l.endIndex=n.end,l.setShape({points:d})}else{this._newAdded=[];var x=this._create();x.startIndex=n.start,x.endIndex=n.end,x.incremental=!0,x.setShape({points:u}),this._setCommon(x,a,s)}},t.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},t.prototype._create=function(){var n=new LargeSymbolPath({cursor:"default"});return n.ignoreCoarsePointer=!0,this.group.add(n),this._newAdded.push(n),n},t.prototype._setCommon=function(n,a,s){var l=a.hostModel;s=s||{};var u=a.getVisual("symbolSize");n.setShape("size",u instanceof Array?u:[u,u]),n.softClipShape=s.clipShape||null,n.symbolProxy=createSymbol$1(a.getVisual("symbol"),0,0,0,0),n.setColor=n.symbolProxy.setColor;var c=n.shape.size[0]<BOOST_SIZE_THRESHOLD;n.useStyle(l.getModel("itemStyle").getItemStyle(c?["color","shadowBlur","shadowColor"]:["color"]));var p=a.getVisual("style"),d=p&&p.fill;d&&n.setColor(d);var x=getECData(n);x.seriesIndex=l.seriesIndex,n.on("mousemove",function(_){x.dataIndex=null;var S=n.hoverDataIdx;S>=0&&(x.dataIndex=S+(n.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),ScatterView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this._updateSymbolDraw(u,a);c.updateData(u,{clipShape:this._getClipShape(a)}),this._finished=!0},n.prototype.incrementalPrepareRender=function(a,s,l){var u=a.getData(),c=this._updateSymbolDraw(u,a);c.incrementalPrepareUpdate(u),this._finished=!1},n.prototype.incrementalRender=function(a,s,l){this._symbolDraw.incrementalUpdate(a,s.getData(),{clipShape:this._getClipShape(s)}),this._finished=a.end===s.getData().count()},n.prototype.updateTransform=function(a,s,l){var u=a.getData();if(this.group.dirty(),!this._finished||u.count()>1e4)return{update:!0};var c=pointsLayout("").reset(a,s,l);c.progress&&c.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout(u)},n.prototype.eachRendered=function(a){this._symbolDraw&&this._symbolDraw.eachRendered(a)},n.prototype._getClipShape=function(a){if(a.get("clip",!0)){var s=a.coordinateSystem;return s&&s.getArea&&s.getArea(.1)}},n.prototype._updateSymbolDraw=function(a,s){var l=this._symbolDraw,u=s.pipelineContext,c=u.large;return(!l||c!==this._isLargeDraw)&&(l&&l.remove(),l=this._symbolDraw=c?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=c,this.group.removeAll()),this.group.add(l.group),l},n.prototype.remove=function(a,s){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},n.prototype.dispose=function(){},n.type="scatter",n}(ChartView),GridModel=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.type="grid",n.dependencies=["xAxis","yAxis"],n.layoutMode="box",n.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},n}(ComponentModel),CartesianAxisModel=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},n.type="cartesian2dAxis",n}(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(t,n,a,s){each$f(AXIS_TYPES,function(l,u){var c=merge(merge({},axisDefault[u],!0),s,!0),p=function(d){__extends(x,d);function x(){var _=d!==null&&d.apply(this,arguments)||this;return _.type=n+"Axis."+u,_}return x.prototype.mergeDefaultAndTheme=function(_,S){var T=fetchLayoutMode(this),A=T?getLayoutParams(_):{},R=S.getTheme();merge(_,R.get(u+"Axis")),merge(_,this.getDefaultOption()),_.type=getAxisType(_),T&&mergeLayoutParam(_,A,T)},x.prototype.optionUpdated=function(){var _=this.option;_.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},x.prototype.getCategories=function(_){var S=this.option;if(S.type==="category")return _?S.data:this.__ordinalMeta.categories},x.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},x.type=n+"Axis."+u,x.defaultOption=c,x}(a);t.registerComponentModel(p)}),t.registerSubTypeDefaulter(n+"Axis",getAxisType)}function getAxisType(t){return t.type||(t.data?"category":"value")}var Cartesian=function(){function t(n){this.type="cartesian",this._dimList=[],this._axes={},this.name=n||""}return t.prototype.getAxis=function(n){return this._axes[n]},t.prototype.getAxes=function(){return map$1(this._dimList,function(n){return this._axes[n]},this)},t.prototype.getAxesByScale=function(n){return n=n.toLowerCase(),filter(this.getAxes(),function(a){return a.scale.type===n})},t.prototype.addAxis=function(n){var a=n.dim;this._axes[a]=n,this._dimList.push(a)},t}(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(t){return t.type==="interval"||t.type==="time"}var Cartesian2D=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="cartesian2d",a.dimensions=cartesian2DDimensions,a}return n.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var a=this.getAxis("x").scale,s=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(a)||!canCalculateAffineTransform(s))){var l=a.getExtent(),u=s.getExtent(),c=this.dataToPoint([l[0],u[0]]),p=this.dataToPoint([l[1],u[1]]),d=l[1]-l[0],x=u[1]-u[0];if(!(!d||!x)){var _=(p[0]-c[0])/d,S=(p[1]-c[1])/x,T=c[0]-l[0]*_,A=c[1]-u[0]*S,R=this._transform=[_,0,0,S,T,A];this._invTransform=invert([],R)}}},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},n.prototype.containPoint=function(a){var s=this.getAxis("x"),l=this.getAxis("y");return s.contain(s.toLocalCoord(a[0]))&&l.contain(l.toLocalCoord(a[1]))},n.prototype.containData=function(a){return this.getAxis("x").containData(a[0])&&this.getAxis("y").containData(a[1])},n.prototype.containZone=function(a,s){var l=this.dataToPoint(a),u=this.dataToPoint(s),c=this.getArea(),p=new BoundingRect(l[0],l[1],u[0]-l[0],u[1]-l[1]);return c.intersect(p)},n.prototype.dataToPoint=function(a,s,l){l=l||[];var u=a[0],c=a[1];if(this._transform&&u!=null&&isFinite(u)&&c!=null&&isFinite(c))return applyTransform$1(l,a,this._transform);var p=this.getAxis("x"),d=this.getAxis("y");return l[0]=p.toGlobalCoord(p.dataToCoord(u,s)),l[1]=d.toGlobalCoord(d.dataToCoord(c,s)),l},n.prototype.clampData=function(a,s){var l=this.getAxis("x").scale,u=this.getAxis("y").scale,c=l.getExtent(),p=u.getExtent(),d=l.parse(a[0]),x=u.parse(a[1]);return s=s||[],s[0]=Math.min(Math.max(Math.min(c[0],c[1]),d),Math.max(c[0],c[1])),s[1]=Math.min(Math.max(Math.min(p[0],p[1]),x),Math.max(p[0],p[1])),s},n.prototype.pointToData=function(a,s){var l=[];if(this._invTransform)return applyTransform$1(l,a,this._invTransform);var u=this.getAxis("x"),c=this.getAxis("y");return l[0]=u.coordToData(u.toLocalCoord(a[0]),s),l[1]=c.coordToData(c.toLocalCoord(a[1]),s),l},n.prototype.getOtherAxis=function(a){return this.getAxis(a.dim==="x"?"y":"x")},n.prototype.getArea=function(a){a=a||0;var s=this.getAxis("x").getGlobalExtent(),l=this.getAxis("y").getGlobalExtent(),u=Math.min(s[0],s[1])-a,c=Math.min(l[0],l[1])-a,p=Math.max(s[0],s[1])-u+a,d=Math.max(l[0],l[1])-c+a;return new BoundingRect(u,c,p,d)},n}(Cartesian),Axis2D=function(t){__extends(n,t);function n(a,s,l,u,c){var p=t.call(this,a,s,l)||this;return p.index=0,p.type=u||"value",p.position=c||"bottom",p}return n.prototype.isHorizontal=function(){var a=this.position;return a==="top"||a==="bottom"},n.prototype.getGlobalExtent=function(a){var s=this.getExtent();return s[0]=this.toGlobalCoord(s[0]),s[1]=this.toGlobalCoord(s[1]),a&&s[0]>s[1]&&s.reverse(),s},n.prototype.pointToData=function(a,s){return this.coordToData(this.toLocalCoord(a[this.dim==="x"?0:1]),s)},n.prototype.setCategorySortInfo=function(a){if(this.type!=="category")return!1;this.model.option.categorySortInfo=a,this.scale.setSortInfo(a)},n}(Axis);function layout$2(t,n,a){a=a||{};var s=t.coordinateSystem,l=n.axis,u={},c=l.getAxesOnZeroOf()[0],p=l.position,d=c?"onZero":p,x=l.dim,_=s.getRect(),S=[_.x,_.x+_.width,_.y,_.y+_.height],T={left:0,right:1,top:0,bottom:1,onZero:2},A=n.get("offset")||0,R=x==="x"?[S[2]-A,S[3]+A]:[S[0]-A,S[1]+A];if(c){var D=c.toGlobalCoord(c.dataToCoord(0));R[T.onZero]=Math.max(Math.min(D,R[1]),R[0])}u.position=[x==="y"?R[T[d]]:S[0],x==="x"?R[T[d]]:S[3]],u.rotation=Math.PI/2*(x==="x"?0:1);var O={top:-1,bottom:1,left:-1,right:1};u.labelDirection=u.tickDirection=u.nameDirection=O[p],u.labelOffset=c?R[T[p]]-R[T.onZero]:0,n.get(["axisTick","inside"])&&(u.tickDirection=-u.tickDirection),retrieve(a.labelInside,n.get(["axisLabel","inside"]))&&(u.labelDirection=-u.labelDirection);var F=n.get(["axisLabel","rotate"]);return u.labelRotate=d==="top"?-F:F,u.z2=1,u}function isCartesian2DSeries(t){return t.get("coordinateSystem")==="cartesian2d"}function findAxisModels(t){var n={xAxisModel:null,yAxisModel:null};return each$f(n,function(a,s){var l=s.replace(/Model$/,""),u=t.getReferringComponents(l,SINGLE_REFERRING).models[0];n[s]=u}),n}var mathLog=Math.log;function alignScaleTicks(t,n,a){var s=IntervalScale.prototype,l=s.getTicks.call(a),u=s.getTicks.call(a,!0),c=l.length-1,p=s.getInterval.call(a),d=getScaleExtent(t,n),x=d.extent,_=d.fixMin,S=d.fixMax;if(t.type==="log"){var T=mathLog(t.base);x=[mathLog(x[0])/T,mathLog(x[1])/T]}t.setExtent(x[0],x[1]),t.calcNiceExtent({splitNumber:c,fixMin:_,fixMax:S});var A=s.getExtent.call(t);_&&(x[0]=A[0]),S&&(x[1]=A[1]);var R=s.getInterval.call(t),D=x[0],O=x[1];if(_&&S)R=(O-D)/c;else if(_)for(O=x[0]+R*c;O<x[1]&&isFinite(O)&&isFinite(x[1]);)R=increaseInterval(R),O=x[0]+R*c;else if(S)for(D=x[1]-R*c;D>x[0]&&isFinite(D)&&isFinite(x[0]);)R=increaseInterval(R),D=x[1]-R*c;else{var F=t.getTicks().length-1;F>c&&(R=increaseInterval(R));var z=R*c;O=Math.ceil(x[1]/R)*R,D=round$3(O-z),D<0&&x[0]>=0?(D=0,O=round$3(z)):O>0&&x[1]<=0&&(O=0,D=-round$3(z))}var j=(l[0].value-u[0].value)/p,Z=(l[c].value-u[c].value)/p;s.setExtent.call(t,D+R*j,O+R*Z),s.setInterval.call(t,R),(j||Z)&&s.setNiceExtent.call(t,D+R,O-R)}var Grid=function(){function t(n,a,s){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(n,a,s),this.model=n}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(n,a){var s=this._axesMap;this._updateScale(n,this.model);function l(c){var p,d=keys(c),x=d.length;if(x){for(var _=[],S=x-1;S>=0;S--){var T=+d[S],A=c[T],R=A.model,D=A.scale;isIntervalOrLogScale(D)&&R.get("alignTicks")&&R.get("interval")==null?_.push(A):(niceScaleExtent(D,R),isIntervalOrLogScale(D)&&(p=A))}_.length&&(p||(p=_.pop(),niceScaleExtent(p.scale,p.model)),each$f(_,function(O){alignScaleTicks(O.scale,O.model,p.scale)}))}}l(s.x),l(s.y);var u={};each$f(s.x,function(c){fixAxisOnZero(s,"y",c,u)}),each$f(s.y,function(c){fixAxisOnZero(s,"x",c,u)}),this.resize(this.model,a)},t.prototype.resize=function(n,a,s){var l=n.getBoxLayoutParams(),u=!s&&n.get("containLabel"),c=getLayoutRect(l,{width:a.getWidth(),height:a.getHeight()});this._rect=c;var p=this._axesList;d(),u&&(each$f(p,function(x){if(!x.model.get(["axisLabel","inside"])){var _=estimateLabelUnionRect(x);if(_){var S=x.isHorizontal()?"height":"width",T=x.model.get(["axisLabel","margin"]);c[S]-=_[S]+T,x.position==="top"?c.y+=_.height+T:x.position==="left"&&(c.x+=_.width+T)}}}),d()),each$f(this._coordsList,function(x){x.calcAffineTransform()});function d(){each$f(p,function(x){var _=x.isHorizontal(),S=_?[0,c.width]:[0,c.height],T=x.inverse?1:0;x.setExtent(S[T],S[1-T]),updateAxisTransform(x,_?c.x:c.y)})}},t.prototype.getAxis=function(n,a){var s=this._axesMap[n];if(s!=null)return s[a||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(n,a){if(n!=null&&a!=null){var s="x"+n+"y"+a;return this._coordsMap[s]}isObject$3(n)&&(a=n.yAxisIndex,n=n.xAxisIndex);for(var l=0,u=this._coordsList;l<u.length;l++)if(u[l].getAxis("x").index===n||u[l].getAxis("y").index===a)return u[l]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(n,a,s){var l=this._findConvertTarget(a);return l.cartesian?l.cartesian.dataToPoint(s):l.axis?l.axis.toGlobalCoord(l.axis.dataToCoord(s)):null},t.prototype.convertFromPixel=function(n,a,s){var l=this._findConvertTarget(a);return l.cartesian?l.cartesian.pointToData(s):l.axis?l.axis.coordToData(l.axis.toLocalCoord(s)):null},t.prototype._findConvertTarget=function(n){var a=n.seriesModel,s=n.xAxisModel||a&&a.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],l=n.yAxisModel||a&&a.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],u=n.gridModel,c=this._coordsList,p,d;if(a)p=a.coordinateSystem,indexOf(c,p)<0&&(p=null);else if(s&&l)p=this.getCartesian(s.componentIndex,l.componentIndex);else if(s)d=this.getAxis("x",s.componentIndex);else if(l)d=this.getAxis("y",l.componentIndex);else if(u){var x=u.coordinateSystem;x===this&&(p=this._coordsList[0])}return{cartesian:p,axis:d}},t.prototype.containPoint=function(n){var a=this._coordsList[0];if(a)return a.containPoint(n)},t.prototype._initCartesian=function(n,a,s){var l=this,u=this,c={left:!1,right:!1,top:!1,bottom:!1},p={x:{},y:{}},d={x:0,y:0};if(a.eachComponent("xAxis",x("x"),this),a.eachComponent("yAxis",x("y"),this),!d.x||!d.y){this._axesMap={},this._axesList=[];return}this._axesMap=p,each$f(p.x,function(_,S){each$f(p.y,function(T,A){var R="x"+S+"y"+A,D=new Cartesian2D(R);D.master=l,D.model=n,l._coordsMap[R]=D,l._coordsList.push(D),D.addAxis(_),D.addAxis(T)})});function x(_){return function(S,T){if(isAxisUsedInTheGrid(S,n)){var A=S.get("position");_==="x"?A!=="top"&&A!=="bottom"&&(A=c.bottom?"top":"bottom"):A!=="left"&&A!=="right"&&(A=c.left?"right":"left"),c[A]=!0;var R=new Axis2D(_,createScaleByModel$1(S),[0,0],S.get("type"),A),D=R.type==="category";R.onBand=D&&S.get("boundaryGap"),R.inverse=S.get("inverse"),S.axis=R,R.model=S,R.grid=u,R.index=T,u._axesList.push(R),p[_][T]=R,d[_]++}}}},t.prototype._updateScale=function(n,a){each$f(this._axesList,function(l){if(l.scale.setExtent(1/0,-1/0),l.type==="category"){var u=l.model.get("categorySortInfo");l.scale.setSortInfo(u)}}),n.eachSeries(function(l){if(isCartesian2DSeries(l)){var u=findAxisModels(l),c=u.xAxisModel,p=u.yAxisModel;if(!isAxisUsedInTheGrid(c,a)||!isAxisUsedInTheGrid(p,a))return;var d=this.getCartesian(c.componentIndex,p.componentIndex),x=l.getData(),_=d.getAxis("x"),S=d.getAxis("y");s(x,_),s(x,S)}},this);function s(l,u){each$f(getDataDimensionsOnAxis(l,u.dim),function(c){u.scale.unionExtentFromData(l,c)})}},t.prototype.getTooltipAxes=function(n){var a=[],s=[];return each$f(this.getCartesians(),function(l){var u=n!=null&&n!=="auto"?l.getAxis(n):l.getBaseAxis(),c=l.getOtherAxis(u);indexOf(a,u)<0&&a.push(u),indexOf(s,c)<0&&s.push(c)}),{baseAxes:a,otherAxes:s}},t.create=function(n,a){var s=[];return n.eachComponent("grid",function(l,u){var c=new t(l,n,a);c.name="grid_"+u,c.resize(l,a,!0),l.coordinateSystem=c,s.push(c)}),n.eachSeries(function(l){if(isCartesian2DSeries(l)){var u=findAxisModels(l),c=u.xAxisModel,p=u.yAxisModel,d=c.getCoordSysModel(),x=d.coordinateSystem;l.coordinateSystem=x.getCartesian(c.componentIndex,p.componentIndex)}}),s},t.dimensions=cartesian2DDimensions,t}();function isAxisUsedInTheGrid(t,n){return t.getCoordSysModel()===n}function fixAxisOnZero(t,n,a,s){a.getAxesOnZeroOf=function(){return u?[u]:[]};var l=t[n],u,c=a.model,p=c.get(["axisLine","onZero"]),d=c.get(["axisLine","onZeroAxisIndex"]);if(!p)return;if(d!=null)canOnZeroToAxis(l[d])&&(u=l[d]);else for(var x in l)if(l.hasOwnProperty(x)&&canOnZeroToAxis(l[x])&&!s[_(l[x])]){u=l[x];break}u&&(s[_(u)]=!0);function _(S){return S.dim+"_"+S.index}}function canOnZeroToAxis(t){return t&&t.type!=="category"&&t.type!=="time"&&ifAxisCrossZero(t)}function updateAxisTransform(t,n){var a=t.getExtent(),s=a[0]+a[1];t.toGlobalCoord=t.dim==="x"?function(l){return l+n}:function(l){return s-l+n},t.toLocalCoord=t.dim==="x"?function(l){return l-n}:function(l){return s-l+n}}var PI$3=Math.PI,AxisBuilder=function(){function t(n,a){this.group=new Group$3,this.opt=a,this.axisModel=n,defaults(a,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var s=new Group$3({x:a.position[0],y:a.position[1],rotation:a.rotation});s.updateTransform(),this._transformGroup=s}return t.prototype.hasBuilder=function(n){return!!builders[n]},t.prototype.add=function(n){builders[n](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(n,a,s){var l=remRadian(a-n),u,c;return isRadianAroundZero(l)?(c=s>0?"top":"bottom",u="center"):isRadianAroundZero(l-PI$3)?(c=s>0?"bottom":"top",u="center"):(c="middle",l>0&&l<PI$3?u=s>0?"right":"left":u=s>0?"left":"right"),{rotation:l,textAlign:u,textVerticalAlign:c}},t.makeAxisEventDataBase=function(n){var a={componentType:n.mainType,componentIndex:n.componentIndex};return a[n.mainType+"Index"]=n.componentIndex,a},t.isLabelSilent=function(n){var a=n.get("tooltip");return n.get("silent")||!(n.get("triggerEvent")||a&&a.show)},t}(),builders={axisLine:function(t,n,a,s){var l=n.get(["axisLine","show"]);if(l==="auto"&&t.handleAutoShown&&(l=t.handleAutoShown("axisLine")),!!l){var u=n.axis.getExtent(),c=s.transform,p=[u[0],0],d=[u[1],0],x=p[0]>d[0];c&&(applyTransform$1(p,p,c),applyTransform$1(d,d,c));var _=extend({lineCap:"round"},n.getModel(["axisLine","lineStyle"]).getLineStyle()),S=new Line$1({shape:{x1:p[0],y1:p[1],x2:d[0],y2:d[1]},style:_,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(S.shape,S.style.lineWidth),S.anid="line",a.add(S);var T=n.get(["axisLine","symbol"]);if(T!=null){var A=n.get(["axisLine","symbolSize"]);isString$1(T)&&(T=[T,T]),(isString$1(A)||isNumber(A))&&(A=[A,A]);var R=normalizeSymbolOffset(n.get(["axisLine","symbolOffset"])||0,A),D=A[0],O=A[1];each$f([{rotate:t.rotation+Math.PI/2,offset:R[0],r:0},{rotate:t.rotation-Math.PI/2,offset:R[1],r:Math.sqrt((p[0]-d[0])*(p[0]-d[0])+(p[1]-d[1])*(p[1]-d[1]))}],function(F,z){if(T[z]!=="none"&&T[z]!=null){var j=createSymbol$1(T[z],-D/2,-O/2,D,O,_.stroke,!0),Z=F.r+F.offset,W=x?d:p;j.attr({rotation:F.rotate,x:W[0]+Z*Math.cos(t.rotation),y:W[1]-Z*Math.sin(t.rotation),silent:!0,z2:11}),a.add(j)}})}}},axisTickLabel:function(t,n,a,s){var l=buildAxisMajorTicks(a,s,n,t),u=buildAxisLabel(a,s,n,t);if(fixMinMaxLabelShow(n,u,l),buildAxisMinorTicks(a,s,n,t.tickDirection),n.get(["axisLabel","hideOverlap"])){var c=prepareLayoutList(map$1(u,function(p){return{label:p,priority:p.z2,defaultAttr:{ignore:p.ignore}}}));hideOverlap(c)}},axisName:function(t,n,a,s){var l=retrieve(t.axisName,n.get("name"));if(l){var u=n.get("nameLocation"),c=t.nameDirection,p=n.getModel("nameTextStyle"),d=n.get("nameGap")||0,x=n.axis.getExtent(),_=x[0]>x[1]?-1:1,S=[u==="start"?x[0]-_*d:u==="end"?x[1]+_*d:(x[0]+x[1])/2,isNameLocationCenter(u)?t.labelOffset+c*d:0],T,A=n.get("nameRotate");A!=null&&(A=A*PI$3/180);var R;isNameLocationCenter(u)?T=AxisBuilder.innerTextLayout(t.rotation,A??t.rotation,c):(T=endTextLayout(t.rotation,u,A||0,x),R=t.axisNameAvailableWidth,R!=null&&(R=Math.abs(R/Math.sin(T.rotation)),!isFinite(R)&&(R=null)));var D=p.getFont(),O=n.get("nameTruncate",!0)||{},F=O.ellipsis,z=retrieve(t.nameTruncateMaxWidth,O.maxWidth,R),j=new ZRText({x:S[0],y:S[1],rotation:T.rotation,silent:AxisBuilder.isLabelSilent(n),style:createTextStyle$1(p,{text:l,font:D,overflow:"truncate",width:z,ellipsis:F,fill:p.getTextColor()||n.get(["axisLine","lineStyle","color"]),align:p.get("align")||T.textAlign,verticalAlign:p.get("verticalAlign")||T.textVerticalAlign}),z2:1});if(setTooltipConfig({el:j,componentModel:n,itemName:l}),j.__fullText=l,j.anid="name",n.get("triggerEvent")){var Z=AxisBuilder.makeAxisEventDataBase(n);Z.targetType="axisName",Z.name=l,getECData(j).eventData=Z}s.add(j),j.updateTransform(),a.add(j),j.decomposeTransform()}}};function endTextLayout(t,n,a,s){var l=remRadian(a-t),u,c,p=s[0]>s[1],d=n==="start"&&!p||n!=="start"&&p;return isRadianAroundZero(l-PI$3/2)?(c=d?"bottom":"top",u="center"):isRadianAroundZero(l-PI$3*1.5)?(c=d?"top":"bottom",u="center"):(c="middle",l<PI$3*1.5&&l>PI$3/2?u=d?"left":"right":u=d?"right":"left"),{rotation:l,textAlign:u,textVerticalAlign:c}}function fixMinMaxLabelShow(t,n,a){if(!shouldShowAllLabels(t.axis)){var s=t.get(["axisLabel","showMinLabel"]),l=t.get(["axisLabel","showMaxLabel"]);n=n||[],a=a||[];var u=n[0],c=n[1],p=n[n.length-1],d=n[n.length-2],x=a[0],_=a[1],S=a[a.length-1],T=a[a.length-2];s===!1?(ignoreEl(u),ignoreEl(x)):isTwoLabelOverlapped(u,c)&&(s?(ignoreEl(c),ignoreEl(_)):(ignoreEl(u),ignoreEl(x))),l===!1?(ignoreEl(p),ignoreEl(S)):isTwoLabelOverlapped(d,p)&&(l?(ignoreEl(d),ignoreEl(T)):(ignoreEl(p),ignoreEl(S)))}}function ignoreEl(t){t&&(t.ignore=!0)}function isTwoLabelOverlapped(t,n){var a=t&&t.getBoundingRect().clone(),s=n&&n.getBoundingRect().clone();if(!(!a||!s)){var l=identity([]);return rotate(l,l,-t.rotation),a.applyTransform(mul([],l,t.getLocalTransform())),s.applyTransform(mul([],l,n.getLocalTransform())),a.intersect(s)}}function isNameLocationCenter(t){return t==="middle"||t==="center"}function createTicks(t,n,a,s,l){for(var u=[],c=[],p=[],d=0;d<t.length;d++){var x=t[d].coord;c[0]=x,c[1]=0,p[0]=x,p[1]=a,n&&(applyTransform$1(c,c,n),applyTransform$1(p,p,n));var _=new Line$1({shape:{x1:c[0],y1:c[1],x2:p[0],y2:p[1]},style:s,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(_.shape,_.style.lineWidth),_.anid=l+"_"+t[d].tickValue,u.push(_)}return u}function buildAxisMajorTicks(t,n,a,s){var l=a.axis,u=a.getModel("axisTick"),c=u.get("show");if(c==="auto"&&s.handleAutoShown&&(c=s.handleAutoShown("axisTick")),!(!c||l.scale.isBlank())){for(var p=u.getModel("lineStyle"),d=s.tickDirection*u.get("length"),x=l.getTicksCoords(),_=createTicks(x,n.transform,d,defaults(p.getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])}),"ticks"),S=0;S<_.length;S++)t.add(_[S]);return _}}function buildAxisMinorTicks(t,n,a,s){var l=a.axis,u=a.getModel("minorTick");if(!(!u.get("show")||l.scale.isBlank())){var c=l.getMinorTicksCoords();if(c.length)for(var p=u.getModel("lineStyle"),d=s*u.get("length"),x=defaults(p.getLineStyle(),defaults(a.getModel("axisTick").getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])})),_=0;_<c.length;_++)for(var S=createTicks(c[_],n.transform,d,x,"minorticks_"+_),T=0;T<S.length;T++)t.add(S[T])}}function buildAxisLabel(t,n,a,s){var l=a.axis,u=retrieve(s.axisLabelShow,a.get(["axisLabel","show"]));if(!(!u||l.scale.isBlank())){var c=a.getModel("axisLabel"),p=c.get("margin"),d=l.getViewLabels(),x=(retrieve(s.labelRotate,c.get("rotate"))||0)*PI$3/180,_=AxisBuilder.innerTextLayout(s.rotation,x,s.labelDirection),S=a.getCategories&&a.getCategories(!0),T=[],A=AxisBuilder.isLabelSilent(a),R=a.get("triggerEvent");return each$f(d,function(D,O){var F=l.scale.type==="ordinal"?l.scale.getRawOrdinalNumber(D.tickValue):D.tickValue,z=D.formattedLabel,j=D.rawLabel,Z=c;if(S&&S[F]){var W=S[F];isObject$3(W)&&W.textStyle&&(Z=new Model(W.textStyle,c,a.ecModel))}var J=Z.getTextColor()||a.get(["axisLine","lineStyle","color"]),en=l.dataToCoord(F),tn=Z.getShallow("align",!0)||_.textAlign,Ct=retrieve2(Z.getShallow("alignMinLabel",!0),tn),Q=retrieve2(Z.getShallow("alignMaxLabel",!0),tn),on=Z.getShallow("verticalAlign",!0)||Z.getShallow("baseline",!0)||_.textVerticalAlign,gn=retrieve2(Z.getShallow("verticalAlignMinLabel",!0),on),In=retrieve2(Z.getShallow("verticalAlignMaxLabel",!0),on),dn=new ZRText({x:en,y:s.labelOffset+s.labelDirection*p,rotation:_.rotation,silent:A,z2:10+(D.level||0),style:createTextStyle$1(Z,{text:z,align:O===0?Ct:O===d.length-1?Q:tn,verticalAlign:O===0?gn:O===d.length-1?In:on,fill:isFunction$1(J)?J(l.type==="category"?j:l.type==="value"?F+"":F,O):J})});if(dn.anid="label_"+F,setTooltipConfig({el:dn,componentModel:a,itemName:z,formatterParamsExtra:{isTruncated:function(){return dn.isTruncated},value:j,tickIndex:O}}),R){var ix=AxisBuilder.makeAxisEventDataBase(a);ix.targetType="axisLabel",ix.value=j,ix.tickIndex=O,l.type==="category"&&(ix.dataIndex=F),getECData(dn).eventData=ix}n.add(dn),dn.updateTransform(),T.push(dn),t.add(dn),dn.decomposeTransform()}),T}}function collect(t,n){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(a,t,n),a.seriesInvolved&&collectSeriesInfo(a,t),a}function collectAxesInfo(t,n,a){var s=n.getComponent("tooltip"),l=n.getComponent("axisPointer"),u=l.get("link",!0)||[],c=[];each$f(a.getCoordinateSystems(),function(p){if(!p.axisPointerEnabled)return;var d=makeKey(p.model),x=t.coordSysAxesInfo[d]={};t.coordSysMap[d]=p;var _=p.model,S=_.getModel("tooltip",s);if(each$f(p.getAxes(),curry$1(D,!1,null)),p.getTooltipAxes&&s&&S.get("show")){var T=S.get("trigger")==="axis",A=S.get(["axisPointer","type"])==="cross",R=p.getTooltipAxes(S.get(["axisPointer","axis"]));(T||A)&&each$f(R.baseAxes,curry$1(D,A?"cross":!0,T)),A&&each$f(R.otherAxes,curry$1(D,"cross",!1))}function D(O,F,z){var j=z.model.getModel("axisPointer",l),Z=j.get("show");if(!(!Z||Z==="auto"&&!O&&!isHandleTrigger(j))){F==null&&(F=j.get("triggerTooltip")),j=O?makeAxisPointerModel(z,S,l,n,O,F):j;var W=j.get("snap"),J=j.get("triggerEmphasis"),en=makeKey(z.model),tn=F||W||z.type==="category",Ct=t.axesInfo[en]={key:en,axis:z,coordSys:p,axisPointerModel:j,triggerTooltip:F,triggerEmphasis:J,involveSeries:tn,snap:W,useHandle:isHandleTrigger(j),seriesModels:[],linkGroup:null};x[en]=Ct,t.seriesInvolved=t.seriesInvolved||tn;var Q=getLinkGroupIndex(u,z);if(Q!=null){var on=c[Q]||(c[Q]={axesInfo:{}});on.axesInfo[en]=Ct,on.mapper=u[Q].mapper,Ct.linkGroup=on}}}})}function makeAxisPointerModel(t,n,a,s,l,u){var c=n.getModel("axisPointer"),p=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],d={};each$f(p,function(T){d[T]=clone$4(c.get(T))}),d.snap=t.type!=="category"&&!!u,c.get("type")==="cross"&&(d.type="line");var x=d.label||(d.label={});if(x.show==null&&(x.show=!1),l==="cross"){var _=c.get(["label","show"]);if(x.show=_??!0,!u){var S=d.lineStyle=c.get("crossStyle");S&&defaults(x,S.textStyle)}}return t.model.getModel("axisPointer",new Model(d,a,s))}function collectSeriesInfo(t,n){n.eachSeries(function(a){var s=a.coordinateSystem,l=a.get(["tooltip","trigger"],!0),u=a.get(["tooltip","show"],!0);!s||l==="none"||l===!1||l==="item"||u===!1||a.get(["axisPointer","show"],!0)===!1||each$f(t.coordSysAxesInfo[makeKey(s.model)],function(c){var p=c.axis;s.getAxis(p.dim)===p&&(c.seriesModels.push(a),c.seriesDataCount==null&&(c.seriesDataCount=0),c.seriesDataCount+=a.getData().count())})})}function getLinkGroupIndex(t,n){for(var a=n.model,s=n.dim,l=0;l<t.length;l++){var u=t[l]||{};if(checkPropInLink(u[s+"AxisId"],a.id)||checkPropInLink(u[s+"AxisIndex"],a.componentIndex)||checkPropInLink(u[s+"AxisName"],a.name))return l}}function checkPropInLink(t,n){return t==="all"||isArray$1(t)&&indexOf(t,n)>=0||t===n}function fixValue(t){var n=getAxisInfo$1(t);if(n){var a=n.axisPointerModel,s=n.axis.scale,l=a.option,u=a.get("status"),c=a.get("value");c!=null&&(c=s.parse(c));var p=isHandleTrigger(a);u==null&&(l.status=p?"show":"hide");var d=s.getExtent().slice();d[0]>d[1]&&d.reverse(),(c==null||c>d[1])&&(c=d[1]),c<d[0]&&(c=d[0]),l.value=c,p&&(l.status=n.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(t){var n=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return n&&n.axesInfo[makeKey(t)]}function getAxisPointerModel(t){var n=getAxisInfo$1(t);return n&&n.axisPointerModel}function isHandleTrigger(t){return!!t.get(["handle","show"])}function makeKey(t){return t.type+"||"+t.id}var axisPointerClazz={},AxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){this.axisPointerClass&&fixValue(a),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(a,l,!0)},n.prototype.updateAxisPointer=function(a,s,l,u){this._doUpdateAxisPointerClass(a,l,!1)},n.prototype.remove=function(a,s){var l=this._axisPointer;l&&l.remove(s)},n.prototype.dispose=function(a,s){this._disposeAxisPointer(s),t.prototype.dispose.apply(this,arguments)},n.prototype._doUpdateAxisPointerClass=function(a,s,l){var u=n.getAxisPointerClass(this.axisPointerClass);if(u){var c=getAxisPointerModel(a);c?(this._axisPointer||(this._axisPointer=new u)).render(a,c,s,l):this._disposeAxisPointer(s)}},n.prototype._disposeAxisPointer=function(a){this._axisPointer&&this._axisPointer.dispose(a),this._axisPointer=null},n.registerAxisPointerClass=function(a,s){axisPointerClazz[a]=s},n.getAxisPointerClass=function(a){return a&&axisPointerClazz[a]},n.type="axis",n}(ComponentView),inner$f=makeInner();function rectCoordAxisBuildSplitArea(t,n,a,s){var l=a.axis;if(!l.scale.isBlank()){var u=a.getModel("splitArea"),c=u.getModel("areaStyle"),p=c.get("color"),d=s.coordinateSystem.getRect(),x=l.getTicksCoords({tickModel:u,clamp:!0});if(x.length){var _=p.length,S=inner$f(t).splitAreaColors,T=createHashMap(),A=0;if(S)for(var R=0;R<x.length;R++){var D=S.get(x[R].tickValue);if(D!=null){A=(D+(_-1)*R)%_;break}}var O=l.toGlobalCoord(x[0].coord),F=c.getAreaStyle();p=isArray$1(p)?p:[p];for(var R=1;R<x.length;R++){var z=l.toGlobalCoord(x[R].coord),j=void 0,Z=void 0,W=void 0,J=void 0;l.isHorizontal()?(j=O,Z=d.y,W=z-j,J=d.height,O=j+W):(j=d.x,Z=O,W=d.width,J=z-Z,O=Z+J);var en=x[R-1].tickValue;en!=null&&T.set(en,A),n.add(new Rect$2({anid:en!=null?"area_"+en:null,shape:{x:j,y:Z,width:W,height:J},style:defaults({fill:p[A]},F),autoBatch:!0,silent:!0})),A=(A+1)%_}inner$f(t).splitAreaColors=T}}}function rectCoordAxisHandleRemove(t){inner$f(t).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="CartesianAxisPointer",a}return n.prototype.render=function(a,s,l,u){this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!a.get("show")){var p=a.getCoordSysModel(),d=layout$2(p,a),x=new AxisBuilder(a,extend({handleAutoShown:function(S){for(var T=p.coordinateSystem.getCartesians(),A=0;A<T.length;A++)if(isIntervalOrLogScale(T[A].getOtherAxis(a.axis).scale))return!0;return!1}},d));each$f(axisBuilderAttrs$3,x.add,x),this._axisGroup.add(x.getGroup()),each$f(selfBuilderAttrs$2,function(S){a.get([S,"show"])&&axisElementBuilders$2[S](this,this._axisGroup,a,p)},this);var _=u&&u.type==="changeAxisOrder"&&u.isInitSort;_||groupTransition(c,this._axisGroup,a),t.prototype.render.call(this,a,s,l,u)}},n.prototype.remove=function(){rectCoordAxisHandleRemove(this)},n.type="cartesianAxis",n}(AxisView),axisElementBuilders$2={splitLine:function(t,n,a,s){var l=a.axis;if(!l.scale.isBlank()){var u=a.getModel("splitLine"),c=u.getModel("lineStyle"),p=c.get("color"),d=u.get("showMinLine")!==!1,x=u.get("showMaxLine")!==!1;p=isArray$1(p)?p:[p];for(var _=s.coordinateSystem.getRect(),S=l.isHorizontal(),T=0,A=l.getTicksCoords({tickModel:u}),R=[],D=[],O=c.getLineStyle(),F=0;F<A.length;F++){var z=l.toGlobalCoord(A[F].coord);if(!(F===0&&!d||F===A.length-1&&!x)){var j=A[F].tickValue;S?(R[0]=z,R[1]=_.y,D[0]=z,D[1]=_.y+_.height):(R[0]=_.x,R[1]=z,D[0]=_.x+_.width,D[1]=z);var Z=T++%p.length,W=new Line$1({anid:j!=null?"line_"+j:null,autoBatch:!0,shape:{x1:R[0],y1:R[1],x2:D[0],y2:D[1]},style:defaults({stroke:p[Z]},O),silent:!0});subPixelOptimizeLine(W.shape,O.lineWidth),n.add(W)}}}},minorSplitLine:function(t,n,a,s){var l=a.axis,u=a.getModel("minorSplitLine"),c=u.getModel("lineStyle"),p=s.coordinateSystem.getRect(),d=l.isHorizontal(),x=l.getMinorTicksCoords();if(x.length)for(var _=[],S=[],T=c.getLineStyle(),A=0;A<x.length;A++)for(var R=0;R<x[A].length;R++){var D=l.toGlobalCoord(x[A][R].coord);d?(_[0]=D,_[1]=p.y,S[0]=D,S[1]=p.y+p.height):(_[0]=p.x,_[1]=D,S[0]=p.x+p.width,S[1]=D);var O=new Line$1({anid:"minor_line_"+x[A][R].tickValue,autoBatch:!0,shape:{x1:_[0],y1:_[1],x2:S[0],y2:S[1]},style:T,silent:!0});subPixelOptimizeLine(O.shape,T.lineWidth),n.add(O)}},splitArea:function(t,n,a,s){rectCoordAxisBuildSplitArea(t,n,a,s)}},CartesianXAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="xAxis",n}(CartesianAxisView),CartesianYAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=CartesianXAxisView.type,a}return n.type="yAxis",n}(CartesianAxisView),GridView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="grid",a}return n.prototype.render=function(a,s){this.group.removeAll(),a.get("show")&&this.group.add(new Rect$2({shape:a.coordinateSystem.getRect(),style:defaults({fill:a.get("backgroundColor")},a.getItemStyle()),silent:!0,z2:-1}))},n.type="grid",n}(ComponentView),extraOption={offset:0};function install$N(t){t.registerComponentView(GridView),t.registerComponentModel(GridModel),t.registerCoordinateSystem("cartesian2d",Grid),axisModelCreator(t,"x",CartesianAxisModel,extraOption),axisModelCreator(t,"y",CartesianAxisModel,extraOption),t.registerComponentView(CartesianXAxisView),t.registerComponentView(CartesianYAxisView),t.registerPreprocessor(function(n){n.xAxis&&n.yAxis&&!n.grid&&(n.grid={})})}function install$M(t){use(install$N),t.registerSeriesModel(ScatterSeriesModel),t.registerChartView(ScatterView),t.registerLayout(pointsLayout("scatter"))}function radarLayout(t){t.eachSeriesByType("radar",function(n){var a=n.getData(),s=[],l=n.coordinateSystem;if(l){var u=l.getIndicatorAxes();each$f(u,function(c,p){a.each(a.mapDimension(u[p].dim),function(d,x){s[x]=s[x]||[];var _=l.dataToPoint(d,p);s[x][p]=isValidPoint(_)?_:getValueMissingPoint(l)})}),a.each(function(c){var p=find(s[c],function(d){return isValidPoint(d)})||getValueMissingPoint(l);s[c].push(p.slice()),a.setItemLayout(c,s[c])})}})}function isValidPoint(t){return!isNaN(t[0])&&!isNaN(t[1])}function getValueMissingPoint(t){return[t.cx,t.cy]}function radarBackwardCompat(t){var n=t.polar;if(n){isArray$1(n)||(n=[n]);var a=[];each$f(n,function(s,l){s.indicator?(s.type&&!s.shape&&(s.shape=s.type),t.radar=t.radar||[],isArray$1(t.radar)||(t.radar=[t.radar]),t.radar.push(s)):a.push(s)}),t.polar=a}each$f(t.series,function(s){s&&s.type==="radar"&&s.polarIndex&&(s.radarIndex=s.polarIndex)})}var RadarView$1=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=a.coordinateSystem,c=this.group,p=a.getData(),d=this._data;function x(T,A){var R=T.getItemVisual(A,"symbol")||"circle";if(R!=="none"){var D=normalizeSymbolSize(T.getItemVisual(A,"symbolSize")),O=createSymbol$1(R,-1,-1,2,2),F=T.getItemVisual(A,"symbolRotate")||0;return O.attr({style:{strokeNoScale:!0},z2:100,scaleX:D[0]/2,scaleY:D[1]/2,rotation:F*Math.PI/180||0}),O}}function _(T,A,R,D,O,F){R.removeAll();for(var z=0;z<A.length-1;z++){var j=x(D,O);j&&(j.__dimIdx=z,T[z]?(j.setPosition(T[z]),graphic$1[F?"initProps":"updateProps"](j,{x:A[z][0],y:A[z][1]},a,O)):j.setPosition(A[z]),R.add(j))}}function S(T){return map$1(T,function(A){return[u.cx,u.cy]})}p.diff(d).add(function(T){var A=p.getItemLayout(T);if(A){var R=new Polygon,D=new Polyline$1,O={shape:{points:A}};R.shape.points=S(A),D.shape.points=S(A),initProps(R,O,a,T),initProps(D,O,a,T);var F=new Group$3,z=new Group$3;F.add(D),F.add(R),F.add(z),_(D.shape.points,A,z,p,T,!0),p.setItemGraphicEl(T,F)}}).update(function(T,A){var R=d.getItemGraphicEl(A),D=R.childAt(0),O=R.childAt(1),F=R.childAt(2),z={shape:{points:p.getItemLayout(T)}};z.shape.points&&(_(D.shape.points,z.shape.points,F,p,T,!1),saveOldStyle(O),saveOldStyle(D),updateProps$1(D,z,a),updateProps$1(O,z,a),p.setItemGraphicEl(T,R))}).remove(function(T){c.remove(d.getItemGraphicEl(T))}).execute(),p.eachItemGraphicEl(function(T,A){var R=p.getItemModel(A),D=T.childAt(0),O=T.childAt(1),F=T.childAt(2),z=p.getItemVisual(A,"style"),j=z.fill;c.add(T),D.useStyle(defaults(R.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:j})),setStatesStylesFromModel(D,R,"lineStyle"),setStatesStylesFromModel(O,R,"areaStyle");var Z=R.getModel("areaStyle"),W=Z.isEmpty()&&Z.parentModel.isEmpty();O.ignore=W,each$f(["emphasis","select","blur"],function(tn){var Ct=R.getModel([tn,"areaStyle"]),Q=Ct.isEmpty()&&Ct.parentModel.isEmpty();O.ensureState(tn).ignore=Q&&W}),O.useStyle(defaults(Z.getAreaStyle(),{fill:j,opacity:.7,decal:z.decal}));var J=R.getModel("emphasis"),en=J.getModel("itemStyle").getItemStyle();F.eachChild(function(tn){if(tn instanceof ZRImage){var Ct=tn.style;tn.useStyle(extend({image:Ct.image,x:Ct.x,y:Ct.y,width:Ct.width,height:Ct.height},z))}else tn.useStyle(z),tn.setColor(j),tn.style.strokeNoScale=!0;var Q=tn.ensureState("emphasis");Q.style=clone$4(en);var on=p.getStore().get(p.getDimensionIndex(tn.__dimIdx),A);(on==null||isNaN(on))&&(on=""),setLabelStyle(tn,getLabelStatesModels(R),{labelFetcher:p.hostModel,labelDataIndex:A,labelDimIndex:tn.__dimIdx,defaultText:on,inheritColor:j,defaultOpacity:z.opacity})}),toggleHoverEmphasis(T,J.get("focus"),J.get("blurScope"),J.get("disabled"))}),this._data=p},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.type="radar",n}(ChartView),RadarSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},n.prototype.getInitialData=function(a,s){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=this.coordinateSystem,p=c.getIndicatorAxes(),d=this.getData().getName(a),x=d===""?this.name:d,_=retrieveVisualColorForTooltipMarker(this,a);return createTooltipMarkup("section",{header:x,sortBlocks:!0,blocks:map$1(p,function(S){var T=u.get(u.mapDimension(S.dim),a);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:_,name:S.name,value:T,sortParam:T})})})},n.prototype.getTooltipPosition=function(a){if(a!=null){for(var s=this.getData(),l=this.coordinateSystem,u=s.getValues(map$1(l.dimensions,function(x){return s.mapDimension(x)}),a),c=0,p=u.length;c<p;c++)if(!isNaN(u[c])){var d=l.getIndicatorAxes();return l.coordToPoint(d[c].dataToCoord(u[c]),c)}}},n.type="series.radar",n.dependencies=["radar"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},n}(SeriesModel),valueAxisDefault=axisDefault.value;function defaultsShow(t,n){return defaults({show:n},t)}var RadarModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(){var a=this.get("boundaryGap"),s=this.get("splitNumber"),l=this.get("scale"),u=this.get("axisLine"),c=this.get("axisTick"),p=this.get("axisLabel"),d=this.get("axisName"),x=this.get(["axisName","show"]),_=this.get(["axisName","formatter"]),S=this.get("axisNameGap"),T=this.get("triggerEvent"),A=map$1(this.get("indicator")||[],function(R){R.max!=null&&R.max>0&&!R.min?R.min=0:R.min!=null&&R.min<0&&!R.max&&(R.max=0);var D=d;R.color!=null&&(D=defaults({color:R.color},d));var O=merge(clone$4(R),{boundaryGap:a,splitNumber:s,scale:l,axisLine:u,axisTick:c,axisLabel:p,name:R.text,showName:x,nameLocation:"end",nameGap:S,nameTextStyle:D,triggerEvent:T},!1);if(isString$1(_)){var F=O.name;O.name=_.replace("{value}",F??"")}else isFunction$1(_)&&(O.name=_(O.name,O));var z=new Model(O,null,this.ecModel);return mixin(z,AxisModelCommonMixin.prototype),z.mainType="radar",z.componentIndex=this.componentIndex,z},this);this._indicatorModels=A},n.prototype.getIndicatorModels=function(){return this._indicatorModels},n.type="radar",n.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},n}(ComponentModel),axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=this.group;u.removeAll(),this._buildAxes(a),this._buildSplitLineAndArea(a)},n.prototype._buildAxes=function(a){var s=a.coordinateSystem,l=s.getIndicatorAxes(),u=map$1(l,function(c){var p=c.model.get("showName")?c.name:"",d=new AxisBuilder(c.model,{axisName:p,position:[s.cx,s.cy],rotation:c.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return d});each$f(u,function(c){each$f(axisBuilderAttrs$2,c.add,c),this.group.add(c.getGroup())},this)},n.prototype._buildSplitLineAndArea=function(a){var s=a.coordinateSystem,l=s.getIndicatorAxes();if(!l.length)return;var u=a.get("shape"),c=a.getModel("splitLine"),p=a.getModel("splitArea"),d=c.getModel("lineStyle"),x=p.getModel("areaStyle"),_=c.get("show"),S=p.get("show"),T=d.get("color"),A=x.get("color"),R=isArray$1(T)?T:[T],D=isArray$1(A)?A:[A],O=[],F=[];function z(ix,Cn,ax){var sx=ax%Cn.length;return ix[sx]=ix[sx]||[],sx}if(u==="circle")for(var j=l[0].getTicksCoords(),Z=s.cx,W=s.cy,J=0;J<j.length;J++){if(_){var en=z(O,R,J);O[en].push(new Circle({shape:{cx:Z,cy:W,r:j[J].coord}}))}if(S&&J<j.length-1){var en=z(F,D,J);F[en].push(new Ring({shape:{cx:Z,cy:W,r0:j[J].coord,r:j[J+1].coord}}))}}else for(var tn,Ct=map$1(l,function(ix,Cn){var ax=ix.getTicksCoords();return tn=tn==null?ax.length-1:Math.min(ax.length-1,tn),map$1(ax,function(sx){return s.coordToPoint(sx.coord,Cn)})}),Q=[],J=0;J<=tn;J++){for(var on=[],gn=0;gn<l.length;gn++)on.push(Ct[gn][J]);if(on[0]&&on.push(on[0].slice()),_){var en=z(O,R,J);O[en].push(new Polyline$1({shape:{points:on}}))}if(S&&Q){var en=z(F,D,J-1);F[en].push(new Polygon({shape:{points:on.concat(Q)}}))}Q=on.slice().reverse()}var In=d.getLineStyle(),dn=x.getAreaStyle();each$f(F,function(ix,Cn){this.group.add(mergePath(ix,{style:defaults({stroke:"none",fill:D[Cn%D.length]},dn),silent:!0}))},this),each$f(O,function(ix,Cn){this.group.add(mergePath(ix,{style:defaults({fill:"none",stroke:R[Cn%R.length]},In),silent:!0}))},this)},n.type="radar",n}(ComponentView),IndicatorAxis=function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,a,s,l)||this;return u.type="value",u.angle=0,u.name="",u}return n}(Axis),Radar=function(){function t(n,a,s){this.dimensions=[],this._model=n,this._indicatorAxes=map$1(n.getIndicatorModels(),function(l,u){var c="indicator_"+u,p=new IndicatorAxis(c,new IntervalScale);return p.name=l.get("name"),p.model=l,l.axis=p,this.dimensions.push(c),p},this),this.resize(n,s)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(n,a){var s=this._indicatorAxes[a];return this.coordToPoint(s.dataToCoord(n),a)},t.prototype.coordToPoint=function(n,a){var s=this._indicatorAxes[a],l=s.angle,u=this.cx+n*Math.cos(l),c=this.cy-n*Math.sin(l);return[u,c]},t.prototype.pointToData=function(n){var a=n[0]-this.cx,s=n[1]-this.cy,l=Math.sqrt(a*a+s*s);a/=l,s/=l;for(var u=Math.atan2(-s,a),c=1/0,p,d=-1,x=0;x<this._indicatorAxes.length;x++){var _=this._indicatorAxes[x],S=Math.abs(u-_.angle);S<c&&(p=_,d=x,c=S)}return[d,+(p&&p.coordToData(l))]},t.prototype.resize=function(n,a){var s=n.get("center"),l=a.getWidth(),u=a.getHeight(),c=Math.min(l,u)/2;this.cx=parsePercent(s[0],l),this.cy=parsePercent(s[1],u),this.startAngle=n.get("startAngle")*Math.PI/180;var p=n.get("radius");(isString$1(p)||isNumber(p))&&(p=[0,p]),this.r0=parsePercent(p[0],c),this.r=parsePercent(p[1],c),each$f(this._indicatorAxes,function(d,x){d.setExtent(this.r0,this.r);var _=this.startAngle+x*Math.PI*2/this._indicatorAxes.length;_=Math.atan2(Math.sin(_),Math.cos(_)),d.angle=_},this)},t.prototype.update=function(n,a){var s=this._indicatorAxes,l=this._model;each$f(s,function(p){p.scale.setExtent(1/0,-1/0)}),n.eachSeriesByType("radar",function(p,d){if(!(p.get("coordinateSystem")!=="radar"||n.getComponent("radar",p.get("radarIndex"))!==l)){var x=p.getData();each$f(s,function(_){_.scale.unionExtentFromData(x,x.mapDimension(_.dim))})}},this);var u=l.get("splitNumber"),c=new IntervalScale;c.setExtent(0,u),c.setInterval(1),each$f(s,function(p,d){alignScaleTicks(p.scale,p.model,c)})},t.prototype.convertToPixel=function(n,a,s){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(n,a,s){return console.warn("Not implemented."),null},t.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},t.create=function(n,a){var s=[];return n.eachComponent("radar",function(l){var u=new t(l,n,a);s.push(u),l.coordinateSystem=u}),n.eachSeriesByType("radar",function(l){l.get("coordinateSystem")==="radar"&&(l.coordinateSystem=s[l.get("radarIndex")||0])}),s},t.dimensions=[],t}();function install$L(t){t.registerCoordinateSystem("radar",Radar),t.registerComponentModel(RadarModel),t.registerComponentView(RadarView),t.registerVisual({seriesType:"radar",reset:function(n){var a=n.getData();a.each(function(s){a.setItemVisual(s,"legendIcon","roundRect")}),a.setVisual("legendIcon","roundRect")}})}function install$K(t){use(install$L),t.registerChartView(RadarView$1),t.registerSeriesModel(RadarSeriesModel),t.registerLayout(radarLayout),t.registerProcessor(dataFilter$1("radar")),t.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(t,n,a){var s=getStore(t);s[n]=a}function release(t,n,a){var s=getStore(t),l=s[n];l===a&&(s[n]=null)}function isTaken(t,n){return!!getStore(t)[n]}function getStore(t){return t[ATTR]||(t[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var RoamController=function(t){__extends(n,t);function n(a){var s=t.call(this)||this;s._zr=a;var l=bind$1(s._mousedownHandler,s),u=bind$1(s._mousemoveHandler,s),c=bind$1(s._mouseupHandler,s),p=bind$1(s._mousewheelHandler,s),d=bind$1(s._pinchHandler,s);return s.enable=function(x,_){this.disable(),this._opt=defaults(clone$4(_)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),x==null&&(x=!0),(x===!0||x==="move"||x==="pan")&&(a.on("mousedown",l),a.on("mousemove",u),a.on("mouseup",c)),(x===!0||x==="scale"||x==="zoom")&&(a.on("mousewheel",p),a.on("pinch",d))},s.disable=function(){a.off("mousedown",l),a.off("mousemove",u),a.off("mouseup",c),a.off("mousewheel",p),a.off("pinch",d)},s}return n.prototype.isDragging=function(){return this._dragging},n.prototype.isPinching=function(){return this._pinching},n.prototype.setPointerChecker=function(a){this.pointerChecker=a},n.prototype.dispose=function(){this.disable()},n.prototype._mousedownHandler=function(a){if(!isMiddleOrRightButtonOnMouseUpDown(a)){for(var s=a.target;s;){if(s.draggable)return;s=s.__hostTarget||s.parent}var l=a.offsetX,u=a.offsetY;this.pointerChecker&&this.pointerChecker(a,l,u)&&(this._x=l,this._y=u,this._dragging=!0)}},n.prototype._mousemoveHandler=function(a){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",a,this._opt)||a.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var s=a.offsetX,l=a.offsetY,u=this._x,c=this._y,p=s-u,d=l-c;this._x=s,this._y=l,this._opt.preventDefaultMouseMove&&stop(a.event),trigger$1(this,"pan","moveOnMouseMove",a,{dx:p,dy:d,oldX:u,oldY:c,newX:s,newY:l,isAvailableBehavior:null})}},n.prototype._mouseupHandler=function(a){isMiddleOrRightButtonOnMouseUpDown(a)||(this._dragging=!1)},n.prototype._mousewheelHandler=function(a){var s=isAvailableBehavior("zoomOnMouseWheel",a,this._opt),l=isAvailableBehavior("moveOnMouseWheel",a,this._opt),u=a.wheelDelta,c=Math.abs(u),p=a.offsetX,d=a.offsetY;if(!(u===0||!s&&!l)){if(s){var x=c>3?1.4:c>1?1.2:1.1,_=u>0?x:1/x;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",a,{scale:_,originX:p,originY:d,isAvailableBehavior:null})}if(l){var S=Math.abs(u),T=(u>0?1:-1)*(S>3?.4:S>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",a,{scrollDelta:T,originX:p,originY:d,isAvailableBehavior:null})}}},n.prototype._pinchHandler=function(a){if(!isTaken(this._zr,"globalPan")){var s=a.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,a,{scale:s,originX:a.pinchX,originY:a.pinchY,isAvailableBehavior:null})}},n}(Eventful);function checkPointerAndTrigger(t,n,a,s,l){t.pointerChecker&&t.pointerChecker(s,l.originX,l.originY)&&(stop(s.event),trigger$1(t,n,a,s,l))}function trigger$1(t,n,a,s,l){l.isAvailableBehavior=bind$1(isAvailableBehavior,null,a,s),t.trigger(n,l)}function isAvailableBehavior(t,n,a){var s=a[t];return!t||s&&(!isString$1(s)||n.event[s+"Key"])}function updateViewOnPan(t,n,a){var s=t.target;s.x+=n,s.y+=a,s.dirty()}function updateViewOnZoom(t,n,a,s){var l=t.target,u=t.zoomLimit,c=t.zoom=t.zoom||1;if(c*=n,u){var p=u.min||0,d=u.max||1/0;c=Math.max(Math.min(d,c),p)}var x=c/t.zoom;t.zoom=c,l.x-=(a-l.x)*(x-1),l.y-=(s-l.y)*(x-1),l.scaleX*=x,l.scaleY*=x,l.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(t,n,a){var s=n.getComponentByElement(t.topTarget),l=s&&s.coordinateSystem;return s&&s!==a&&!IRRELEVANT_EXCLUDES.hasOwnProperty(s.mainType)&&l&&l.model!==a}function parseXML(t){if(isString$1(t)){var n=new DOMParser;t=n.parseFromString(t,"text/xml")}var a=t;for(a.nodeType===9&&(a=a.firstChild);a.nodeName.toLowerCase()!=="svg"||a.nodeType!==1;)a=a.nextSibling;return a}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(n,a){a=a||{};var s=parseXML(n);this._defsUsePending=[];var l=new Group$3;this._root=l;var u=[],c=s.getAttribute("viewBox")||"",p=parseFloat(s.getAttribute("width")||a.width),d=parseFloat(s.getAttribute("height")||a.height);isNaN(p)&&(p=null),isNaN(d)&&(d=null),parseAttributes(s,l,null,!0,!1);for(var x=s.firstChild;x;)this._parseNode(x,l,u,null,!1,!1),x=x.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var _,S;if(c){var T=splitNumberSequence(c);T.length>=4&&(_={x:parseFloat(T[0]||0),y:parseFloat(T[1]||0),width:parseFloat(T[2]),height:parseFloat(T[3])})}if(_&&p!=null&&d!=null&&(S=makeViewBoxTransform(_,{x:0,y:0,width:p,height:d}),!a.ignoreViewBox)){var A=l;l=new Group$3,l.add(A),A.scaleX=A.scaleY=S.scale,A.x=S.x,A.y=S.y}return!a.ignoreRootClip&&p!=null&&d!=null&&l.setClipPath(new Rect$2({shape:{x:0,y:0,width:p,height:d}})),{root:l,width:p,height:d,viewBoxRect:_,viewBoxTransform:S,named:u}},t.prototype._parseNode=function(n,a,s,l,u,c){var p=n.nodeName.toLowerCase(),d,x=l;if(p==="defs"&&(u=!0),p==="text"&&(c=!0),p==="defs"||p==="switch")d=a;else{if(!u){var _=nodeParsers[p];if(_&&hasOwn(nodeParsers,p)){d=_.call(this,n,a);var S=n.getAttribute("name");if(S){var T={name:S,namedFrom:null,svgNodeTagLower:p,el:d};s.push(T),p==="g"&&(x=T)}else l&&s.push({name:l.name,namedFrom:l,svgNodeTagLower:p,el:d});a.add(d)}}var A=paintServerParsers[p];if(A&&hasOwn(paintServerParsers,p)){var R=A.call(this,n),D=n.getAttribute("id");D&&(this._defs[D]=R)}}if(d&&d.isGroup)for(var O=n.firstChild;O;)O.nodeType===1?this._parseNode(O,d,s,x,u,c):O.nodeType===3&&c&&this._parseText(O,d),O=O.nextSibling},t.prototype._parseText=function(n,a){var s=new TSpan({style:{text:n.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),applyTextAlignment(s,a);var l=s.style,u=l.fontSize;u&&u<9&&(l.fontSize=9,s.scaleX*=u/9,s.scaleY*=u/9);var c=(l.fontSize||l.fontFamily)&&[l.fontStyle,l.fontWeight,(l.fontSize||12)+"px",l.fontFamily||"sans-serif"].join(" ");l.font=c;var p=s.getBoundingRect();return this._textX+=p.width,a.add(s),s},t.internalField=function(){nodeParsers={g:function(n,a){var s=new Group$3;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s},rect:function(n,a){var s=new Rect$2;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setShape({x:parseFloat(n.getAttribute("x")||"0"),y:parseFloat(n.getAttribute("y")||"0"),width:parseFloat(n.getAttribute("width")||"0"),height:parseFloat(n.getAttribute("height")||"0")}),s.silent=!0,s},circle:function(n,a){var s=new Circle;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),r:parseFloat(n.getAttribute("r")||"0")}),s.silent=!0,s},line:function(n,a){var s=new Line$1;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setShape({x1:parseFloat(n.getAttribute("x1")||"0"),y1:parseFloat(n.getAttribute("y1")||"0"),x2:parseFloat(n.getAttribute("x2")||"0"),y2:parseFloat(n.getAttribute("y2")||"0")}),s.silent=!0,s},ellipse:function(n,a){var s=new Ellipse;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),rx:parseFloat(n.getAttribute("rx")||"0"),ry:parseFloat(n.getAttribute("ry")||"0")}),s.silent=!0,s},polygon:function(n,a){var s=n.getAttribute("points"),l;s&&(l=parsePoints(s));var u=new Polygon({shape:{points:l||[]},silent:!0});return inheritStyle(a,u),parseAttributes(n,u,this._defsUsePending,!1,!1),u},polyline:function(n,a){var s=n.getAttribute("points"),l;s&&(l=parsePoints(s));var u=new Polyline$1({shape:{points:l||[]},silent:!0});return inheritStyle(a,u),parseAttributes(n,u,this._defsUsePending,!1,!1),u},image:function(n,a){var s=new ZRImage;return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.setStyle({image:n.getAttribute("xlink:href")||n.getAttribute("href"),x:+n.getAttribute("x"),y:+n.getAttribute("y"),width:+n.getAttribute("width"),height:+n.getAttribute("height")}),s.silent=!0,s},text:function(n,a){var s=n.getAttribute("x")||"0",l=n.getAttribute("y")||"0",u=n.getAttribute("dx")||"0",c=n.getAttribute("dy")||"0";this._textX=parseFloat(s)+parseFloat(u),this._textY=parseFloat(l)+parseFloat(c);var p=new Group$3;return inheritStyle(a,p),parseAttributes(n,p,this._defsUsePending,!1,!0),p},tspan:function(n,a){var s=n.getAttribute("x"),l=n.getAttribute("y");s!=null&&(this._textX=parseFloat(s)),l!=null&&(this._textY=parseFloat(l));var u=n.getAttribute("dx")||"0",c=n.getAttribute("dy")||"0",p=new Group$3;return inheritStyle(a,p),parseAttributes(n,p,this._defsUsePending,!1,!0),this._textX+=parseFloat(u),this._textY+=parseFloat(c),p},path:function(n,a){var s=n.getAttribute("d")||"",l=createFromString(s);return inheritStyle(a,l),parseAttributes(n,l,this._defsUsePending,!1,!1),l.silent=!0,l}}}(),t}(),paintServerParsers={lineargradient:function(t){var n=parseInt(t.getAttribute("x1")||"0",10),a=parseInt(t.getAttribute("y1")||"0",10),s=parseInt(t.getAttribute("x2")||"10",10),l=parseInt(t.getAttribute("y2")||"0",10),u=new LinearGradient(n,a,s,l);return parsePaintServerUnit(t,u),parseGradientColorStops(t,u),u},radialgradient:function(t){var n=parseInt(t.getAttribute("cx")||"0",10),a=parseInt(t.getAttribute("cy")||"0",10),s=parseInt(t.getAttribute("r")||"0",10),l=new RadialGradient(n,a,s);return parsePaintServerUnit(t,l),parseGradientColorStops(t,l),l}};function parsePaintServerUnit(t,n){var a=t.getAttribute("gradientUnits");a==="userSpaceOnUse"&&(n.global=!0)}function parseGradientColorStops(t,n){for(var a=t.firstChild;a;){if(a.nodeType===1&&a.nodeName.toLocaleLowerCase()==="stop"){var s=a.getAttribute("offset"),l=void 0;s&&s.indexOf("%")>0?l=parseInt(s,10)/100:s?l=parseFloat(s):l=0;var u={};parseInlineStyle(a,u,u);var c=u.stopColor||a.getAttribute("stop-color")||"#000000";n.colorStops.push({offset:l,color:c})}a=a.nextSibling}}function inheritStyle(t,n){t&&t.__inheritedStyle&&(n.__inheritedStyle||(n.__inheritedStyle={}),defaults(n.__inheritedStyle,t.__inheritedStyle))}function parsePoints(t){for(var n=splitNumberSequence(t),a=[],s=0;s<n.length;s+=2){var l=parseFloat(n[s]),u=parseFloat(n[s+1]);a.push([l,u])}return a}function parseAttributes(t,n,a,s,l){var u=n,c=u.__inheritedStyle=u.__inheritedStyle||{},p={};t.nodeType===1&&(parseTransformAttribute(t,n),parseInlineStyle(t,c,p),s||parseAttributeStyle(t,c,p)),u.style=u.style||{},c.fill!=null&&(u.style.fill=getFillStrokeStyle(u,"fill",c.fill,a)),c.stroke!=null&&(u.style.stroke=getFillStrokeStyle(u,"stroke",c.stroke,a)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(d){c[d]!=null&&(u.style[d]=parseFloat(c[d]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(d){c[d]!=null&&(u.style[d]=c[d])}),l&&(u.__selfStyle=p),c.lineDash&&(u.style.lineDash=map$1(splitNumberSequence(c.lineDash),function(d){return parseFloat(d)})),(c.visibility==="hidden"||c.visibility==="collapse")&&(u.invisible=!0),c.display==="none"&&(u.ignore=!0)}function applyTextAlignment(t,n){var a=n.__selfStyle;if(a){var s=a.textBaseline,l=s;!s||s==="auto"||s==="baseline"?l="alphabetic":s==="before-edge"||s==="text-before-edge"?l="top":s==="after-edge"||s==="text-after-edge"?l="bottom":(s==="central"||s==="mathematical")&&(l="middle"),t.style.textBaseline=l}var u=n.__inheritedStyle;if(u){var c=u.textAlign,p=c;c&&(c==="middle"&&(p="center"),t.style.textAlign=p)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(t,n,a,s){var l=a&&a.match(urlRegex);if(l){var u=trim$1(l[1]);s.push([t,n,u]);return}return a==="none"&&(a=null),a}function applyDefs(t,n){for(var a=0;a<n.length;a++){var s=n[a];s[0].style[s[1]]=t[s[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(t){return t.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(t,n){var a=t.getAttribute("transform");if(a){a=a.replace(/,/g," ");var s=[],l=null;a.replace(transformRegex,function(S,T,A){return s.push(T,A),""});for(var u=s.length-1;u>0;u-=2){var c=s[u],p=s[u-1],d=splitNumberSequence(c);switch(l=l||create$1(),p){case"translate":translate(l,l,[parseFloat(d[0]),parseFloat(d[1]||"0")]);break;case"scale":scale$1(l,l,[parseFloat(d[0]),parseFloat(d[1]||d[0])]);break;case"rotate":rotate(l,l,-parseFloat(d[0])*DEGREE_TO_ANGLE,[parseFloat(d[1]||"0"),parseFloat(d[2]||"0")]);break;case"skewX":var x=Math.tan(parseFloat(d[0])*DEGREE_TO_ANGLE);mul(l,[1,0,x,1,0,0],l);break;case"skewY":var _=Math.tan(parseFloat(d[0])*DEGREE_TO_ANGLE);mul(l,[1,_,0,1,0,0],l);break;case"matrix":l[0]=parseFloat(d[0]),l[1]=parseFloat(d[1]),l[2]=parseFloat(d[2]),l[3]=parseFloat(d[3]),l[4]=parseFloat(d[4]),l[5]=parseFloat(d[5]);break}}n.setLocalTransform(l)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(t,n,a){var s=t.getAttribute("style");if(s){styleRegex.lastIndex=0;for(var l;(l=styleRegex.exec(s))!=null;){var u=l[1],c=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,u)?INHERITABLE_STYLE_ATTRIBUTES_MAP[u]:null;c&&(n[c]=l[2]);var p=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,u)?SELF_STYLE_ATTRIBUTES_MAP[u]:null;p&&(a[p]=l[2])}}}function parseAttributeStyle(t,n,a){for(var s=0;s<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;s++){var l=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[s],u=t.getAttribute(l);u!=null&&(n[INHERITABLE_STYLE_ATTRIBUTES_MAP[l]]=u)}for(var s=0;s<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;s++){var l=SELF_STYLE_ATTRIBUTES_MAP_KEYS[s],u=t.getAttribute(l);u!=null&&(a[SELF_STYLE_ATTRIBUTES_MAP[l]]=u)}}function makeViewBoxTransform(t,n){var a=n.width/t.width,s=n.height/t.height,l=Math.min(a,s);return{scale:l,x:-(t.x+t.width/2)*l+(n.x+n.width/2),y:-(t.y+t.height/2)*l+(n.y+n.height/2)}}function parseSVG(t,n){var a=new SVGParser;return a.parse(t,n)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function t(n,a){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=n,this._parsedXML=parseXML(a)}return t.prototype.load=function(){var n=this._firstGraphic;if(!n){n=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(n),this._boundingRect=this._firstGraphic.boundingRect.clone();var a=createRegions(n.named),s=a.regions,l=a.regionsMap;this._regions=s,this._regionsMap=l}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(n){var a,s;try{a=n&&parseSVG(n,{ignoreViewBox:!0,ignoreRootClip:!0})||{},s=a.root,assert(s!=null)}catch(O){throw new Error(`Invalid svg format
`+O.message)}var l=new Group$3;l.add(s),l.isGeoSVGGraphicRoot=!0;var u=a.width,c=a.height,p=a.viewBoxRect,d=this._boundingRect;if(!d){var x=void 0,_=void 0,S=void 0,T=void 0;if(u!=null?(x=0,S=u):p&&(x=p.x,S=p.width),c!=null?(_=0,T=c):p&&(_=p.y,T=p.height),x==null||_==null){var A=s.getBoundingRect();x==null&&(x=A.x,S=A.width),_==null&&(_=A.y,T=A.height)}d=this._boundingRect=new BoundingRect(x,_,S,T)}if(p){var R=makeViewBoxTransform(p,d);s.scaleX=s.scaleY=R.scale,s.x=R.x,s.y=R.y}l.setClipPath(new Rect$2({shape:d.plain()}));var D=[];return each$f(a.named,function(O){REGION_AVAILABLE_SVG_TAG_MAP.get(O.svgNodeTagLower)!=null&&(D.push(O),setSilent(O.el))}),{root:l,boundingRect:d,named:D}},t.prototype.useGraphic=function(n){var a=this._usedGraphicMap,s=a.get(n);return s||(s=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),a.set(n,s),s)},t.prototype.freeGraphic=function(n){var a=this._usedGraphicMap,s=a.get(n);s&&(a.removeKey(n),this._freedGraphics.push(s))},t}();function setSilent(t){t.silent=!1,t.isGroup&&t.traverse(function(n){n.silent=!1})}function createRegions(t){var n=[],a=createHashMap();return each$f(t,function(s){if(s.namedFrom==null){var l=new GeoSVGRegion(s.name,s.el);n.push(l),a.set(s.name,l)}}),{regions:n,regionsMap:a}}var geoCoord=[126,25],nanhaiName="",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(t,n){if(t==="china"){for(var a=0;a<n.length;a++)if(n[a].name===nanhaiName)return;n.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(s){return{type:"polygon",exterior:s}}),geoCoord))}}var coordsOffsetMap={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function fixTextCoords(t,n){if(t==="china"){var a=coordsOffsetMap[n.name];if(a){var s=n.getCenter();s[0]+=a[0]/10.5,s[1]+=-a[1]/(10.5/.75),n.setCenter(s)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(t,n){t==="china"&&n.name===""&&n.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function t(n,a,s){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=n,this._specialAreas=s,this._geoJSON=parseInput(a)}return t.prototype.load=function(n,a){a=a||DEFAULT_NAME_PROPERTY;var s=this._parsedMap.get(a);if(!s){var l=this._parseToRegions(a);s=this._parsedMap.set(a,{regions:l,boundingRect:calculateBoundingRect(l)})}var u=createHashMap(),c=[];return each$f(s.regions,function(p){var d=p.name;n&&hasOwn(n,d)&&(p=p.cloneShallow(d=n[d])),c.push(p),u.set(d,p)}),{regions:c,boundingRect:s.boundingRect||new BoundingRect(0,0,0,0),regionsMap:u}},t.prototype._parseToRegions=function(n){var a=this._mapName,s=this._geoJSON,l;try{l=s?parseGeoJSON(s,n):[]}catch(u){throw new Error(`Invalid geoJson format
`+u.message)}return fixNanhai(a,l),each$f(l,function(u){var c=u.name;fixTextCoords(a,u),fixDiaoyuIsland(a,u);var p=this._specialAreas&&this._specialAreas[c];p&&u.transformTo(p.left,p.top,p.width,p.height)},this),l},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t}();function calculateBoundingRect(t){for(var n,a=0;a<t.length;a++){var s=t[a].getBoundingRect();n=n||s.clone(),n.union(s)}return n}function parseInput(t){return isString$1(t)?typeof JSON<"u"&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t}var storage=createHashMap();const geoSourceManager={registerMap:function(t,n,a){if(n.svg){var s=new GeoSVGResource(t,n.svg);storage.set(t,s)}else{var l=n.geoJson||n.geoJSON;l&&!n.features?a=n.specialAreas:l=n;var s=new GeoJSONResource(t,l,a);storage.set(t,s)}},getGeoResource:function(t){return storage.get(t)},getMapForUser:function(t){var n=storage.get(t);return n&&n.type==="geoJSON"&&n.getMapForUser()},load:function(t,n,a){var s=storage.get(t);if(s)return s.load(n,a)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(t){var n=t.getItemStyle(),a=t.get("areaColor");return a!=null&&(n.fill=a),n}function fixLineStyle(t){var n=t.style;n&&(n.stroke=n.stroke||n.fill,n.fill=null)}var MapDraw=function(){function t(n){var a=new Group$3;this.uid=getUID("ec_map_draw"),this._controller=new RoamController(n.getZr()),this._controllerHost={target:a},this.group=a,a.add(this._regionsGroup=new Group$3),a.add(this._svgGroup=new Group$3)}return t.prototype.draw=function(n,a,s,l,u){var c=n.mainType==="geo",p=n.getData&&n.getData();c&&a.eachComponent({mainType:"series",subType:"map"},function(F){!p&&F.getHostGeoModel()===n&&(p=F.getData())});var d=n.coordinateSystem,x=this._regionsGroup,_=this.group,S=d.getTransformInfo(),T=S.raw,A=S.roam,R=!x.childAt(0)||u;R?(_.x=A.x,_.y=A.y,_.scaleX=A.scaleX,_.scaleY=A.scaleY,_.dirty()):updateProps$1(_,A,n);var D=p&&p.getVisual("visualMeta")&&p.getVisual("visualMeta").length>0,O={api:s,geo:d,mapOrGeoModel:n,data:p,isVisualEncodedByVisualMap:D,isGeo:c,transformInfoRaw:T};d.resourceType==="geoJSON"?this._buildGeoJSON(O):d.resourceType==="geoSVG"&&this._buildSVG(O),this._updateController(n,a,s),this._updateMapSelectHandler(n,x,s,l)},t.prototype._buildGeoJSON=function(n){var a=this._regionsGroupByName=createHashMap(),s=createHashMap(),l=this._regionsGroup,u=n.transformInfoRaw,c=n.mapOrGeoModel,p=n.data,d=n.geo.projection,x=d&&d.stream;function _(A,R){return R&&(A=R(A)),A&&[A[0]*u.scaleX+u.x,A[1]*u.scaleY+u.y]}function S(A){for(var R=[],D=!x&&d&&d.project,O=0;O<A.length;++O){var F=_(A[O],D);F&&R.push(F)}return R}function T(A){return{shape:{points:S(A)}}}l.removeAll(),each$f(n.geo.regions,function(A){var R=A.name,D=a.get(R),O=s.get(R)||{},F=O.dataIdx,z=O.regionModel;if(!D){D=a.set(R,new Group$3),l.add(D),F=p?p.indexOfName(R):null,z=n.isGeo?c.getRegionModel(R):p?p.getItemModel(F):null;var j=z.get("silent",!0);j!=null&&(D.silent=j),s.set(R,{dataIdx:F,regionModel:z})}var Z=[],W=[];each$f(A.geometries,function(tn){if(tn.type==="polygon"){var Ct=[tn.exterior].concat(tn.interiors||[]);x&&(Ct=projectPolys(Ct,x)),each$f(Ct,function(on){Z.push(new Polygon(T(on)))})}else{var Q=tn.points;x&&(Q=projectPolys(Q,x,!0)),each$f(Q,function(on){W.push(new Polyline$1(T(on)))})}});var J=_(A.getCenter(),d&&d.project);function en(tn,Ct){if(tn.length){var Q=new CompoundPath({culling:!0,segmentIgnoreThreshold:1,shape:{paths:tn}});D.add(Q),applyOptionStyleForRegion(n,Q,F,z),resetLabelForRegion(n,Q,R,z,c,F,J),Ct&&(fixLineStyle(Q),each$f(Q.states,fixLineStyle))}}en(Z),en(W,!0)}),a.each(function(A,R){var D=s.get(R),O=D.dataIdx,F=D.regionModel;resetEventTriggerForRegion(n,A,R,F,c,O),resetTooltipForRegion(n,A,R,F,c),resetStateTriggerForRegion(n,A,R,F,c)},this)},t.prototype._buildSVG=function(n){var a=n.geo.map,s=n.transformInfoRaw;this._svgGroup.x=s.x,this._svgGroup.y=s.y,this._svgGroup.scaleX=s.scaleX,this._svgGroup.scaleY=s.scaleY,this._svgResourceChanged(a)&&(this._freeSVG(),this._useSVG(a));var l=this._svgDispatcherMap=createHashMap(),u=!1;each$f(this._svgGraphicRecord.named,function(c){var p=c.name,d=n.mapOrGeoModel,x=n.data,_=c.svgNodeTagLower,S=c.el,T=x?x.indexOfName(p):null,A=d.getRegionModel(p);OPTION_STYLE_ENABLED_TAG_MAP.get(_)!=null&&S instanceof Displayable&&applyOptionStyleForRegion(n,S,T,A),S instanceof Displayable&&(S.culling=!0);var R=A.get("silent",!0);if(R!=null&&(S.silent=R),S.z2EmphasisLift=0,!c.namedFrom&&(LABEL_HOST_MAP.get(_)!=null&&resetLabelForRegion(n,S,p,A,d,T,null),resetEventTriggerForRegion(n,S,p,A,d,T),resetTooltipForRegion(n,S,p,A,d),STATE_TRIGGER_TAG_MAP.get(_)!=null)){var D=resetStateTriggerForRegion(n,S,p,A,d);D==="self"&&(u=!0);var O=l.get(p)||l.set(p,[]);O.push(S)}},this),this._enableBlurEntireSVG(u,n)},t.prototype._enableBlurEntireSVG=function(n,a){if(n&&a.isGeo){var s=a.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),l=s.opacity;this._svgGraphicRecord.root.traverse(function(u){if(!u.isGroup){setDefaultStateProxy(u);var c=u.ensureState("blur").style||{};c.opacity==null&&l!=null&&(c.opacity=l),u.ensureState("emphasis")}})}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(n,a){if(n==null)return[];var s=a.coordinateSystem;if(s.resourceType==="geoJSON"){var l=this._regionsGroupByName;if(l){var u=l.get(n);return u?[u]:[]}}else if(s.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(n)||[]},t.prototype._svgResourceChanged=function(n){return this._svgMapName!==n},t.prototype._useSVG=function(n){var a=geoSourceManager.getGeoResource(n);if(a&&a.type==="geoSVG"){var s=a.useGraphic(this.uid);this._svgGroup.add(s.root),this._svgGraphicRecord=s,this._svgMapName=n}},t.prototype._freeSVG=function(){var n=this._svgMapName;if(n!=null){var a=geoSourceManager.getGeoResource(n);a&&a.type==="geoSVG"&&a.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(n,a,s){var l=n.coordinateSystem,u=this._controller,c=this._controllerHost;c.zoomLimit=n.get("scaleLimit"),c.zoom=l.getZoom(),u.enable(n.get("roam")||!1);var p=n.mainType;function d(){var x={type:"geoRoam",componentType:p};return x[p+"Id"]=n.id,x}u.off("pan").on("pan",function(x){this._mouseDownFlag=!1,updateViewOnPan(c,x.dx,x.dy),s.dispatchAction(extend(d(),{dx:x.dx,dy:x.dy,animation:{duration:0}}))},this),u.off("zoom").on("zoom",function(x){this._mouseDownFlag=!1,updateViewOnZoom(c,x.scale,x.originX,x.originY),s.dispatchAction(extend(d(),{totalZoom:c.zoom,zoom:x.scale,originX:x.originX,originY:x.originY,animation:{duration:0}}))},this),u.setPointerChecker(function(x,_,S){return l.containPoint([_,S])&&!onIrrelevantElement(x,s,n)})},t.prototype.resetForLabelLayout=function(){this.group.traverse(function(n){var a=n.getTextContent();a&&(a.ignore=mapLabelRaw(a).ignore)})},t.prototype._updateMapSelectHandler=function(n,a,s,l){var u=this;a.off("mousedown"),a.off("click"),n.get("selectedMode")&&(a.on("mousedown",function(){u._mouseDownFlag=!0}),a.on("click",function(c){u._mouseDownFlag&&(u._mouseDownFlag=!1)}))},t}();function applyOptionStyleForRegion(t,n,a,s){var l=s.getModel("itemStyle"),u=s.getModel(["emphasis","itemStyle"]),c=s.getModel(["blur","itemStyle"]),p=s.getModel(["select","itemStyle"]),d=getFixedItemStyle(l),x=getFixedItemStyle(u),_=getFixedItemStyle(p),S=getFixedItemStyle(c),T=t.data;if(T){var A=T.getItemVisual(a,"style"),R=T.getItemVisual(a,"decal");t.isVisualEncodedByVisualMap&&A.fill&&(d.fill=A.fill),R&&(d.decal=createOrUpdatePatternFromDecal(R,t.api))}n.setStyle(d),n.style.strokeNoScale=!0,n.ensureState("emphasis").style=x,n.ensureState("select").style=_,n.ensureState("blur").style=S,setDefaultStateProxy(n)}function resetLabelForRegion(t,n,a,s,l,u,c){var p=t.data,d=t.isGeo,x=p&&isNaN(p.get(p.mapDimension("value"),u)),_=p&&p.getItemLayout(u);if(d||x||_&&_.showLabel){var S=d?a:u,T=void 0;(!p||u>=0)&&(T=l);var A=c?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(n,getLabelStatesModels(s),{labelFetcher:T,labelDataIndex:S,defaultText:a},A);var R=n.getTextContent();if(R&&(mapLabelRaw(R).ignore=R.ignore,n.textConfig&&c)){var D=n.getBoundingRect().clone();n.textConfig.layoutRect=D,n.textConfig.position=[(c[0]-D.x)/D.width*100+"%",(c[1]-D.y)/D.height*100+"%"]}n.disableLabelAnimation=!0}else n.removeTextContent(),n.removeTextConfig(),n.disableLabelAnimation=null}function resetEventTriggerForRegion(t,n,a,s,l,u){t.data?t.data.setItemGraphicEl(u,n):getECData(n).eventData={componentType:"geo",componentIndex:l.componentIndex,geoIndex:l.componentIndex,name:a,region:s&&s.option||{}}}function resetTooltipForRegion(t,n,a,s,l){t.data||setTooltipConfig({el:n,componentModel:l,itemName:a,itemTooltipOption:s.get("tooltip")})}function resetStateTriggerForRegion(t,n,a,s,l){n.highDownSilentOnTouch=!!l.get("selectedMode");var u=s.getModel("emphasis"),c=u.get("focus");return toggleHoverEmphasis(n,c,u.get("blurScope"),u.get("disabled")),t.isGeo&&enableComponentHighDownFeatures(n,l,a),c}function projectPolys(t,n,a){var s=[],l;function u(){l=[]}function c(){l.length&&(s.push(l),l=[])}var p=n({polygonStart:u,polygonEnd:c,lineStart:u,lineEnd:c,point:function(d,x){isFinite(d)&&isFinite(x)&&l.push([d,x])},sphere:function(){}});return!a&&p.polygonStart(),each$f(t,function(d){p.lineStart();for(var x=0;x<d.length;x++)p.point(d[x][0],d[x][1]);p.lineEnd()}),!a&&p.polygonEnd(),s}var MapView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){if(!(u&&u.type==="mapToggleSelect"&&u.from===this.uid)){var c=this.group;if(c.removeAll(),!a.getHostGeoModel()){if(this._mapDraw&&u&&u.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),u&&u.type==="geoRoam"&&u.componentType==="series"&&u.seriesId===a.id){var p=this._mapDraw;p&&c.add(p.group)}else if(a.needsDrawMap){var p=this._mapDraw||new MapDraw(l);c.add(p.group),p.draw(a,s,l,this,u),this._mapDraw=p}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;a.get("showLegendSymbol")&&s.getComponent("legend")&&this._renderSymbols(a,s,l)}}},n.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},n.prototype._renderSymbols=function(a,s,l){var u=a.originalData,c=this.group;u.each(u.mapDimension("value"),function(p,d){if(!isNaN(p)){var x=u.getItemLayout(d);if(!(!x||!x.point)){var _=x.point,S=x.offset,T=new Circle({style:{fill:a.getData().getVisual("style").fill},shape:{cx:_[0]+S*9,cy:_[1],r:3},silent:!0,z2:8+(S?0:Z2_EMPHASIS_LIFT+1)});if(!S){var A=a.mainSeries.getData(),R=u.getName(d),D=A.indexOfName(R),O=u.getItemModel(d),F=O.getModel("label"),z=A.getItemGraphicEl(D);setLabelStyle(T,getLabelStatesModels(O),{labelFetcher:{getFormattedLabel:function(j,Z){return a.getFormattedLabel(D,Z)}},defaultText:R}),T.disableLabelAnimation=!0,F.get("position")||T.setTextConfig({position:"bottom"}),z.onHoverStateChange=function(j){setStatesFlag(T,j)}}c.add(T)}}})},n.type="map",n}(ChartView),MapSeries=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.needsDrawMap=!1,a.seriesGroup=[],a.getTooltipPosition=function(s){if(s!=null){var l=this.getData().getName(s),u=this.coordinateSystem,c=u.getRegion(l);return c&&u.dataToPoint(c.getCenter())}},a}return n.prototype.getInitialData=function(a){for(var s=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),l=createHashMap(),u=[],c=0,p=s.count();c<p;c++){var d=s.getName(c);l.set(d,c)}var x=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(x.regions,function(_){var S=_.name,T=l.get(S),A=_.properties&&_.properties.echartsStyle,R;T==null?(R={name:S},u.push(R)):R=s.getRawDataItem(T),A&&merge(R,A)}),s.appendData(u),s},n.prototype.getHostGeoModel=function(){var a=this.option.geoIndex;return a!=null?this.ecModel.getComponent("geo",a):null},n.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},n.prototype.getRawValue=function(a){var s=this.getData();return s.get(s.mapDimension("value"),a)},n.prototype.getRegionModel=function(a){var s=this.getData();return s.getItemModel(s.indexOfName(a))},n.prototype.formatTooltip=function(a,s,l){for(var u=this.getData(),c=this.getRawValue(a),p=u.getName(a),d=this.seriesGroup,x=[],_=0;_<d.length;_++){var S=d[_].originalData.indexOfName(p),T=u.mapDimension("value");isNaN(d[_].originalData.get(T,S))||x.push(d[_].name)}return createTooltipMarkup("section",{header:x.join(", "),noHeader:!x.length,blocks:[createTooltipMarkup("nameValue",{name:p,value:c})]})},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.getLegendIcon=function(a){var s=a.icon||"roundRect",l=createSymbol$1(s,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill);return l.setStyle(a.itemStyle),l.style.stroke="none",s.indexOf("empty")>-1&&(l.style.stroke=l.style.fill,l.style.fill="#fff",l.style.lineWidth=2),l},n.type="series.map",n.dependencies=["geo"],n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},n}(SeriesModel);function dataStatistics(t,n){var a={};return each$f(t,function(s){s.each(s.mapDimension("value"),function(l,u){var c="ec-"+s.getName(u);a[c]=a[c]||[],isNaN(l)||a[c].push(l)})}),t[0].map(t[0].mapDimension("value"),function(s,l){for(var u="ec-"+t[0].getName(l),c=0,p=1/0,d=-1/0,x=a[u].length,_=0;_<x;_++)p=Math.min(p,a[u][_]),d=Math.max(d,a[u][_]),c+=a[u][_];var S;return n==="min"?S=p:n==="max"?S=d:n==="average"?S=c/x:S=c,x===0?NaN:S})}function mapDataStatistic(t){var n={};t.eachSeriesByType("map",function(a){var s=a.getHostGeoModel(),l=s?"o"+s.id:"i"+a.getMapType();(n[l]=n[l]||[]).push(a)}),each$f(n,function(a,s){for(var l=dataStatistics(map$1(a,function(c){return c.getData()}),a[0].get("mapValueCalculation")),u=0;u<a.length;u++)a[u].originalData=a[u].getData();for(var u=0;u<a.length;u++)a[u].seriesGroup=a,a[u].needsDrawMap=u===0&&!a[u].getHostGeoModel(),a[u].setData(l.cloneShallow()),a[u].mainSeries=a[0]})}function mapSymbolLayout(t){var n={};t.eachSeriesByType("map",function(a){var s=a.getMapType();if(!(a.getHostGeoModel()||n[s])){var l={};each$f(a.seriesGroup,function(c){var p=c.coordinateSystem,d=c.originalData;c.get("showLegendSymbol")&&t.getComponent("legend")&&d.each(d.mapDimension("value"),function(x,_){var S=d.getName(_),T=p.getRegion(S);if(!(!T||isNaN(x))){var A=l[S]||0,R=p.dataToPoint(T.getCenter());l[S]=A+1,d.setItemLayout(_,{point:R,offset:A})}})});var u=a.getData();u.each(function(c){var p=u.getName(c),d=u.getItemLayout(c)||{};d.showLabel=!l[p],u.setItemLayout(c,d)}),n[s]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s.type="view",s.dimensions=["x","y"],s._roamTransformable=new Transformable,s._rawTransformable=new Transformable,s.name=a,s}return n.prototype.setBoundingRect=function(a,s,l,u){return this._rect=new BoundingRect(a,s,l,u),this._rect},n.prototype.getBoundingRect=function(){return this._rect},n.prototype.setViewRect=function(a,s,l,u){this._transformTo(a,s,l,u),this._viewRect=new BoundingRect(a,s,l,u)},n.prototype._transformTo=function(a,s,l,u){var c=this.getBoundingRect(),p=this._rawTransformable;p.transform=c.calculateTransform(new BoundingRect(a,s,l,u));var d=p.parent;p.parent=null,p.decomposeTransform(),p.parent=d,this._updateTransform()},n.prototype.setCenter=function(a,s){a&&(this._center=[parsePercent(a[0],s.getWidth()),parsePercent(a[1],s.getHeight())],this._updateCenterAndZoom())},n.prototype.setZoom=function(a){a=a||1;var s=this.zoomLimit;s&&(s.max!=null&&(a=Math.min(s.max,a)),s.min!=null&&(a=Math.max(s.min,a))),this._zoom=a,this._updateCenterAndZoom()},n.prototype.getDefaultCenter=function(){var a=this.getBoundingRect(),s=a.x+a.width/2,l=a.y+a.height/2;return[s,l]},n.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},n.prototype.getZoom=function(){return this._zoom||1},n.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},n.prototype._updateCenterAndZoom=function(){var a=this._rawTransformable.getLocalTransform(),s=this._roamTransformable,l=this.getDefaultCenter(),u=this.getCenter(),c=this.getZoom();u=applyTransform$1([],u,a),l=applyTransform$1([],l,a),s.originX=u[0],s.originY=u[1],s.x=l[0]-u[0],s.y=l[1]-u[1],s.scaleX=s.scaleY=c,this._updateTransform()},n.prototype._updateTransform=function(){var a=this._roamTransformable,s=this._rawTransformable;s.parent=a,a.updateTransform(),s.updateTransform(),copy(this.transform||(this.transform=[]),s.transform||create$1()),this._rawTransform=s.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},n.prototype.getTransformInfo=function(){var a=this._rawTransformable,s=this._roamTransformable,l=new Transformable;return l.transform=s.transform,l.decomposeTransform(),{roam:{x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY},raw:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY}}},n.prototype.getViewRect=function(){return this._viewRect},n.prototype.getViewRectAfterRoam=function(){var a=this.getBoundingRect().clone();return a.applyTransform(this.transform),a},n.prototype.dataToPoint=function(a,s,l){var u=s?this._rawTransform:this.transform;return l=l||[],u?v2ApplyTransform(l,a,u):copy$1(l,a)},n.prototype.pointToData=function(a){var s=this.invTransform;return s?v2ApplyTransform([],a,s):[a[0],a[1]]},n.prototype.convertToPixel=function(a,s,l){var u=getCoordSys$4(s);return u===this?u.dataToPoint(l):null},n.prototype.convertFromPixel=function(a,s,l){var u=getCoordSys$4(s);return u===this?u.pointToData(l):null},n.prototype.containPoint=function(a){return this.getViewRectAfterRoam().contain(a[0],a[1])},n.dimensions=["x","y"],n}(Transformable);function getCoordSys$4(t){var n=t.seriesModel;return n?n.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(t){__extends(n,t);function n(a,s,l){var u=t.call(this,a)||this;u.dimensions=geo2DDimensions,u.type="geo",u._nameCoordMap=createHashMap(),u.map=s;var c=l.projection,p=geoSourceManager.load(s,l.nameMap,l.nameProperty),d=geoSourceManager.getGeoResource(s);u.resourceType=d?d.type:null;var x=u.regions=p.regions,_=GEO_DEFAULT_PARAMS[d.type];u._regionsMap=p.regionsMap,u.regions=p.regions,u.projection=c;var S;if(c)for(var T=0;T<x.length;T++){var A=x[T].getBoundingRect(c);S=S||A.clone(),S.union(A)}else S=p.boundingRect;return u.setBoundingRect(S.x,S.y,S.width,S.height),u.aspectScale=c?1:retrieve2(l.aspectScale,_.aspectScale),u._invertLongitute=c?!1:_.invertLongitute,u}return n.prototype._transformTo=function(a,s,l,u){var c=this.getBoundingRect(),p=this._invertLongitute;c=c.clone(),p&&(c.y=-c.y-c.height);var d=this._rawTransformable;d.transform=c.calculateTransform(new BoundingRect(a,s,l,u));var x=d.parent;d.parent=null,d.decomposeTransform(),d.parent=x,p&&(d.scaleY=-d.scaleY),this._updateTransform()},n.prototype.getRegion=function(a){return this._regionsMap.get(a)},n.prototype.getRegionByCoord=function(a){for(var s=this.regions,l=0;l<s.length;l++){var u=s[l];if(u.type==="geoJSON"&&u.contain(a))return s[l]}},n.prototype.addGeoCoord=function(a,s){this._nameCoordMap.set(a,s)},n.prototype.getGeoCoord=function(a){var s=this._regionsMap.get(a);return this._nameCoordMap.get(a)||s&&s.getCenter()},n.prototype.dataToPoint=function(a,s,l){if(isString$1(a)&&(a=this.getGeoCoord(a)),a){var u=this.projection;return u&&(a=u.project(a)),a&&this.projectedToPoint(a,s,l)}},n.prototype.pointToData=function(a){var s=this.projection;return s&&(a=s.unproject(a)),a&&this.pointToProjected(a)},n.prototype.pointToProjected=function(a){return t.prototype.pointToData.call(this,a)},n.prototype.projectedToPoint=function(a,s,l){return t.prototype.dataToPoint.call(this,a,s,l)},n.prototype.convertToPixel=function(a,s,l){var u=getCoordSys$3(s);return u===this?u.dataToPoint(l):null},n.prototype.convertFromPixel=function(a,s,l){var u=getCoordSys$3(s);return u===this?u.pointToData(l):null},n}(View);mixin(Geo,View);function getCoordSys$3(t){var n=t.geoModel,a=t.seriesModel;return n?n.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}function resizeGeo(t,n){var a=t.get("boundingCoords");if(a!=null){var s=a[0],l=a[1];if(isFinite(s[0])&&isFinite(s[1])&&isFinite(l[0])&&isFinite(l[1])){var u=this.projection;if(u){var c=s[0],p=s[1],d=l[0],x=l[1];s=[1/0,1/0],l=[-1/0,-1/0];var _=function(J,en,tn,Ct){for(var Q=tn-J,on=Ct-en,gn=0;gn<=100;gn++){var In=gn/100,dn=u.project([J+Q*In,en+on*In]);min$1(s,s,dn),max$1(l,l,dn)}};_(c,p,d,p),_(d,p,d,x),_(d,x,c,x),_(c,x,d,p)}this.setBoundingRect(s[0],s[1],l[0]-s[0],l[1]-s[1])}}var S=this.getBoundingRect(),T=t.get("layoutCenter"),A=t.get("layoutSize"),R=n.getWidth(),D=n.getHeight(),O=S.width/S.height*this.aspectScale,F=!1,z,j;T&&A&&(z=[parsePercent(T[0],R),parsePercent(T[1],D)],j=parsePercent(A,Math.min(R,D)),!isNaN(z[0])&&!isNaN(z[1])&&!isNaN(j)&&(F=!0));var Z;if(F)Z={},O>1?(Z.width=j,Z.height=j/O):(Z.height=j,Z.width=j*O),Z.y=z[1]-Z.height/2,Z.x=z[0]-Z.width/2;else{var W=t.getBoxLayoutParams();W.aspect=O,Z=getLayoutRect(W,{width:R,height:D})}this.setViewRect(Z.x,Z.y,Z.width,Z.height),this.setCenter(t.get("center"),n),this.setZoom(t.get("zoom"))}function setGeoCoords(t,n){each$f(n.get("geoCoord"),function(a,s){t.addGeoCoord(s,a)})}var GeoCreator=function(){function t(){this.dimensions=geo2DDimensions}return t.prototype.create=function(n,a){var s=[];function l(c){return{nameProperty:c.get("nameProperty"),aspectScale:c.get("aspectScale"),projection:c.get("projection")}}n.eachComponent("geo",function(c,p){var d=c.get("map"),x=new Geo(d+p,d,extend({nameMap:c.get("nameMap")},l(c)));x.zoomLimit=c.get("scaleLimit"),s.push(x),c.coordinateSystem=x,x.model=c,x.resize=resizeGeo,x.resize(c,a)}),n.eachSeries(function(c){var p=c.get("coordinateSystem");if(p==="geo"){var d=c.get("geoIndex")||0;c.coordinateSystem=s[d]}});var u={};return n.eachSeriesByType("map",function(c){if(!c.getHostGeoModel()){var p=c.getMapType();u[p]=u[p]||[],u[p].push(c)}}),each$f(u,function(c,p){var d=map$1(c,function(_){return _.get("nameMap")}),x=new Geo(p,p,extend({nameMap:mergeAll(d)},l(c[0])));x.zoomLimit=retrieve.apply(null,map$1(c,function(_){return _.get("scaleLimit")})),s.push(x),x.resize=resizeGeo,x.resize(c[0],a),each$f(c,function(_){_.coordinateSystem=x,setGeoCoords(x,_)})}),s},t.prototype.getFilledRegions=function(n,a,s,l){for(var u=(n||[]).slice(),c=createHashMap(),p=0;p<u.length;p++)c.set(u[p].name,u[p]);var d=geoSourceManager.load(a,s,l);return each$f(d.regions,function(x){var _=x.name,S=c.get(_),T=x.properties&&x.properties.echartsStyle;S||(S={name:_},u.push(S)),T&&merge(S,T)}),u},t}(),geoCreator=new GeoCreator,GeoModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s,l){var u=geoSourceManager.getGeoResource(a.map);if(u&&u.type==="geoJSON"){var c=a.itemStyle=a.itemStyle||{};"color"in c||(c.color="#eee")}this.mergeDefaultAndTheme(a,l),defaultEmphasis(a,"label",["show"])},n.prototype.optionUpdated=function(){var a=this,s=this.option;s.regions=geoCreator.getFilledRegions(s.regions,s.map,s.nameMap,s.nameProperty);var l={};this._optionModelMap=reduce(s.regions||[],function(u,c){var p=c.name;return p&&(u.set(p,new Model(c,a,a.ecModel)),c.selected&&(l[p]=!0)),u},createHashMap()),s.selectedMap||(s.selectedMap=l)},n.prototype.getRegionModel=function(a){return this._optionModelMap.get(a)||new Model(null,this,this.ecModel)},n.prototype.getFormattedLabel=function(a,s){var l=this.getRegionModel(a),u=s==="normal"?l.get(["label","formatter"]):l.get(["emphasis","label","formatter"]),c={name:a};if(isFunction$1(u))return c.status=s,u(c);if(isString$1(u))return u.replace("{a}",a??"")},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.select=function(a){var s=this.option,l=s.selectedMode;if(l){l!=="multiple"&&(s.selectedMap=null);var u=s.selectedMap||(s.selectedMap={});u[a]=!0}},n.prototype.unSelect=function(a){var s=this.option.selectedMap;s&&(s[a]=!1)},n.prototype.toggleSelected=function(a){this[this.isSelected(a)?"unSelect":"select"](a)},n.prototype.isSelected=function(a){var s=this.option.selectedMap;return!!(s&&s[a])},n.type="geo",n.layoutMode="box",n.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},n}(ComponentModel);function getCenterCoord(t,n){return t.pointToProjected?t.pointToProjected(n):t.pointToData(n)}function updateCenterAndZoom(t,n,a,s){var l=t.getZoom(),u=t.getCenter(),c=n.zoom,p=t.projectedToPoint?t.projectedToPoint(u):t.dataToPoint(u);if(n.dx!=null&&n.dy!=null&&(p[0]-=n.dx,p[1]-=n.dy,t.setCenter(getCenterCoord(t,p),s)),c!=null){if(a){var d=a.min||0,x=a.max||1/0;c=Math.max(Math.min(l*c,x),d)/l}t.scaleX*=c,t.scaleY*=c;var _=(n.originX-t.x)*(c-1),S=(n.originY-t.y)*(c-1);t.x-=_,t.y-=S,t.updateTransform(),t.setCenter(getCenterCoord(t,p),s),t.setZoom(c*l)}return{center:t.getCenter(),zoom:t.getZoom()}}var GeoView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.focusBlurEnabled=!0,a}return n.prototype.init=function(a,s){this._api=s},n.prototype.render=function(a,s,l,u){if(this._model=a,!a.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw(l));var c=this._mapDraw;c.draw(a,s,l,this,u),c.group.on("click",this._handleRegionClick,this),c.group.silent=a.get("silent"),this.group.add(c.group),this.updateSelectStatus(a,s,l)},n.prototype._handleRegionClick=function(a){var s;findEventDispatcher(a.target,function(l){return(s=getECData(l).eventData)!=null},!0),s&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:s.name})},n.prototype.updateSelectStatus=function(a,s,l){var u=this;this._mapDraw.group.traverse(function(c){var p=getECData(c).eventData;if(p)return u._model.isSelected(p.name)?l.enterSelect(c):l.leaveSelect(c),!0})},n.prototype.findHighDownDispatchers=function(a){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(a,this._model)},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},n.type="geo",n}(ComponentView);function registerMap(t,n,a){geoSourceManager.registerMap(t,n,a)}function install$J(t){t.registerCoordinateSystem("geo",geoCreator),t.registerComponentModel(GeoModel),t.registerComponentView(GeoView),t.registerImpl("registerMap",registerMap),t.registerImpl("getMap",function(a){return geoSourceManager.getMapForUser(a)});function n(a,s){s.update="geo:updateSelectStatus",t.registerAction(s,function(l,u){var c={},p=[];return u.eachComponent({mainType:"geo",query:l},function(d){d[a](l.name);var x=d.coordinateSystem;each$f(x.regions,function(S){c[S.name]=d.isSelected(S.name)||!1});var _=[];each$f(c,function(S,T){c[T]&&_.push(T)}),p.push({geoIndex:d.componentIndex,name:_})}),{selected:c,allSelected:p,name:l.name}})}n("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),n("select",{type:"geoSelect",event:"geoselected"}),n("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(a,s,l){var u=a.componentType||"series";s.eachComponent({mainType:u,query:a},function(c){var p=c.coordinateSystem;if(p.type==="geo"){var d=updateCenterAndZoom(p,a,c.get("scaleLimit"),l);c.setCenter&&c.setCenter(d.center),c.setZoom&&c.setZoom(d.zoom),u==="series"&&each$f(c.seriesGroup,function(x){x.setCenter(d.center),x.setZoom(d.zoom)})}})})}function install$I(t){use(install$J),t.registerChartView(MapView),t.registerSeriesModel(MapSeries),t.registerLayout(mapSymbolLayout),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",t.registerAction)}function init(t){var n=t;n.hierNode={defaultAncestor:null,ancestor:n,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var a=[n],s,l;s=a.pop();)if(l=s.children,s.isExpand&&l.length)for(var u=l.length,c=u-1;c>=0;c--){var p=l[c];p.hierNode={defaultAncestor:null,ancestor:p,prelim:0,modifier:0,change:0,shift:0,i:c,thread:null},a.push(p)}}function firstWalk(t,n){var a=t.isExpand?t.children:[],s=t.parentNode.children,l=t.hierNode.i?s[t.hierNode.i-1]:null;if(a.length){executeShifts(t);var u=(a[0].hierNode.prelim+a[a.length-1].hierNode.prelim)/2;l?(t.hierNode.prelim=l.hierNode.prelim+n(t,l),t.hierNode.modifier=t.hierNode.prelim-u):t.hierNode.prelim=u}else l&&(t.hierNode.prelim=l.hierNode.prelim+n(t,l));t.parentNode.hierNode.defaultAncestor=apportion(t,l,t.parentNode.hierNode.defaultAncestor||s[0],n)}function secondWalk(t){var n=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:n},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function separation(t){return arguments.length?t:defaultSeparation}function radialCoordinate(t,n){return t-=Math.PI/2,{x:n*Math.cos(t),y:n*Math.sin(t)}}function getViewRect$4(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function executeShifts(t){for(var n=t.children,a=n.length,s=0,l=0;--a>=0;){var u=n[a];u.hierNode.prelim+=s,u.hierNode.modifier+=s,l+=u.hierNode.change,s+=u.hierNode.shift+l}}function apportion(t,n,a,s){if(n){for(var l=t,u=t,c=u.parentNode.children[0],p=n,d=l.hierNode.modifier,x=u.hierNode.modifier,_=c.hierNode.modifier,S=p.hierNode.modifier;p=nextRight(p),u=nextLeft(u),p&&u;){l=nextRight(l),c=nextLeft(c),l.hierNode.ancestor=t;var T=p.hierNode.prelim+S-u.hierNode.prelim-x+s(p,u);T>0&&(moveSubtree(nextAncestor(p,t,a),t,T),x+=T,d+=T),S+=p.hierNode.modifier,x+=u.hierNode.modifier,d+=l.hierNode.modifier,_+=c.hierNode.modifier}p&&!nextRight(l)&&(l.hierNode.thread=p,l.hierNode.modifier+=S-d),u&&!nextLeft(c)&&(c.hierNode.thread=u,c.hierNode.modifier+=x-_,a=t)}return a}function nextRight(t){var n=t.children;return n.length&&t.isExpand?n[n.length-1]:t.hierNode.thread}function nextLeft(t){var n=t.children;return n.length&&t.isExpand?n[0]:t.hierNode.thread}function nextAncestor(t,n,a){return t.hierNode.ancestor.parentNode===n.parentNode?t.hierNode.ancestor:a}function moveSubtree(t,n,a){var s=a/(n.hierNode.i-t.hierNode.i);n.hierNode.change-=s,n.hierNode.shift+=a,n.hierNode.modifier+=a,n.hierNode.prelim+=a,t.hierNode.change+=s}function defaultSeparation(t,n){return t.parentNode===n.parentNode?1:2}var TreeEdgeShape=function(){function t(){this.parentPoint=[],this.childPoints=[]}return t}(),TreePath=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new TreeEdgeShape},n.prototype.buildPath=function(a,s){var l=s.childPoints,u=l.length,c=s.parentPoint,p=l[0],d=l[u-1];if(u===1){a.moveTo(c[0],c[1]),a.lineTo(p[0],p[1]);return}var x=s.orient,_=x==="TB"||x==="BT"?0:1,S=1-_,T=parsePercent(s.forkPosition,1),A=[];A[_]=c[_],A[S]=c[S]+(d[S]-c[S])*T,a.moveTo(c[0],c[1]),a.lineTo(A[0],A[1]),a.moveTo(p[0],p[1]),A[_]=p[_],a.lineTo(A[0],A[1]),A[_]=d[_],a.lineTo(A[0],A[1]),a.lineTo(d[0],d[1]);for(var R=1;R<u-1;R++){var D=l[R];a.moveTo(D[0],D[1]),A[_]=D[_],a.lineTo(A[0],A[1])}},n}(Path),TreeView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._mainGroup=new Group$3,a}return n.prototype.init=function(a,s){this._controller=new RoamController(s.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},n.prototype.render=function(a,s,l){var u=a.getData(),c=a.layoutInfo,p=this._mainGroup,d=a.get("layout");d==="radial"?(p.x=c.x+c.width/2,p.y=c.y+c.height/2):(p.x=c.x,p.y=c.y),this._updateViewCoordSys(a,l),this._updateController(a,s,l);var x=this._data;u.diff(x).add(function(_){symbolNeedsDraw(u,_)&&updateNode(u,_,null,p,a)}).update(function(_,S){var T=x.getItemGraphicEl(S);if(!symbolNeedsDraw(u,_)){T&&removeNode(x,S,T,p,a);return}updateNode(u,_,T,p,a)}).remove(function(_){var S=x.getItemGraphicEl(_);S&&removeNode(x,_,S,p,a)}).execute(),this._nodeScaleRatio=a.get("nodeScaleRatio"),this._updateNodeAndLinkScale(a),a.get("expandAndCollapse")===!0&&u.eachItemGraphicEl(function(_,S){_.off("click").on("click",function(){l.dispatchAction({type:"treeExpandAndCollapse",seriesId:a.id,dataIndex:S})})}),this._data=u},n.prototype._updateViewCoordSys=function(a,s){var l=a.getData(),u=[];l.each(function(S){var T=l.getItemLayout(S);T&&!isNaN(T.x)&&!isNaN(T.y)&&u.push([+T.x,+T.y])});var c=[],p=[];fromPoints(u,c,p);var d=this._min,x=this._max;p[0]-c[0]===0&&(c[0]=d?d[0]:c[0]-1,p[0]=x?x[0]:p[0]+1),p[1]-c[1]===0&&(c[1]=d?d[1]:c[1]-1,p[1]=x?x[1]:p[1]+1);var _=a.coordinateSystem=new View;_.zoomLimit=a.get("scaleLimit"),_.setBoundingRect(c[0],c[1],p[0]-c[0],p[1]-c[1]),_.setCenter(a.get("center"),s),_.setZoom(a.get("zoom")),this.group.attr({x:_.x,y:_.y,scaleX:_.scaleX,scaleY:_.scaleY}),this._min=c,this._max=p},n.prototype._updateController=function(a,s,l){var u=this,c=this._controller,p=this._controllerHost,d=this.group;c.setPointerChecker(function(x,_,S){var T=d.getBoundingRect();return T.applyTransform(d.transform),T.contain(_,S)&&!onIrrelevantElement(x,l,a)}),c.enable(a.get("roam")),p.zoomLimit=a.get("scaleLimit"),p.zoom=a.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(x){updateViewOnPan(p,x.dx,x.dy),l.dispatchAction({seriesId:a.id,type:"treeRoam",dx:x.dx,dy:x.dy})}).on("zoom",function(x){updateViewOnZoom(p,x.scale,x.originX,x.originY),l.dispatchAction({seriesId:a.id,type:"treeRoam",zoom:x.scale,originX:x.originX,originY:x.originY}),u._updateNodeAndLinkScale(a),l.updateLabelLayout()})},n.prototype._updateNodeAndLinkScale=function(a){var s=a.getData(),l=this._getNodeGlobalScale(a);s.eachItemGraphicEl(function(u,c){u.setSymbolScale(l)})},n.prototype._getNodeGlobalScale=function(a){var s=a.coordinateSystem;if(s.type!=="view")return 1;var l=this._nodeScaleRatio,u=s.scaleX||1,c=s.getZoom(),p=(c-1)*l+1;return p/u},n.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},n.type="tree",n}(ChartView);function symbolNeedsDraw(t,n){var a=t.getItemLayout(n);return a&&!isNaN(a.x)&&!isNaN(a.y)}function updateNode(t,n,a,s,l){var u=!a,c=t.tree.getNodeByDataIndex(n),p=c.getModel(),d=c.getVisual("style").fill,x=c.isExpand===!1&&c.children.length!==0?d:"#fff",_=t.tree.root,S=c.parentNode===_?c:c.parentNode||c,T=t.getItemGraphicEl(S.dataIndex),A=S.getLayout(),R=T?{x:T.__oldX,y:T.__oldY,rawX:T.__radialOldRawX,rawY:T.__radialOldRawY}:A,D=c.getLayout();u?(a=new Symbol$1(t,n,null,{symbolInnerColor:x,useNameLabel:!0}),a.x=R.x,a.y=R.y):a.updateData(t,n,null,{symbolInnerColor:x,useNameLabel:!0}),a.__radialOldRawX=a.__radialRawX,a.__radialOldRawY=a.__radialRawY,a.__radialRawX=D.rawX,a.__radialRawY=D.rawY,s.add(a),t.setItemGraphicEl(n,a),a.__oldX=a.x,a.__oldY=a.y,updateProps$1(a,{x:D.x,y:D.y},l);var O=a.getSymbolPath();if(l.get("layout")==="radial"){var F=_.children[0],z=F.getLayout(),j=F.children.length,Z=void 0,W=void 0;if(D.x===z.x&&c.isExpand===!0&&F.children.length){var J={x:(F.children[0].getLayout().x+F.children[j-1].getLayout().x)/2,y:(F.children[0].getLayout().y+F.children[j-1].getLayout().y)/2};Z=Math.atan2(J.y-z.y,J.x-z.x),Z<0&&(Z=Math.PI*2+Z),W=J.x<z.x,W&&(Z=Z-Math.PI)}else Z=Math.atan2(D.y-z.y,D.x-z.x),Z<0&&(Z=Math.PI*2+Z),c.children.length===0||c.children.length!==0&&c.isExpand===!1?(W=D.x<z.x,W&&(Z=Z-Math.PI)):(W=D.x>z.x,W||(Z=Z-Math.PI));var en=W?"left":"right",tn=p.getModel("label"),Ct=tn.get("rotate"),Q=Ct*(Math.PI/180),on=O.getTextContent();on&&(O.setTextConfig({position:tn.get("position")||en,rotation:Ct==null?-Z:Q,origin:"center"}),on.setStyle("verticalAlign","middle"))}var gn=p.get(["emphasis","focus"]),In=gn==="relative"?concatArray(c.getAncestorsIndices(),c.getDescendantIndices()):gn==="ancestor"?c.getAncestorsIndices():gn==="descendant"?c.getDescendantIndices():null;In&&(getECData(a).focus=In),drawEdge(l,c,_,a,R,A,D,s),a.__edge&&(a.onHoverStateChange=function(dn){if(dn!=="blur"){var ix=c.parentNode&&t.getItemGraphicEl(c.parentNode.dataIndex);ix&&ix.hoverState===HOVER_STATE_BLUR||setStatesFlag(a.__edge,dn)}})}function drawEdge(t,n,a,s,l,u,c,p){var d=n.getModel(),x=t.get("edgeShape"),_=t.get("layout"),S=t.getOrient(),T=t.get(["lineStyle","curveness"]),A=t.get("edgeForkPosition"),R=d.getModel("lineStyle").getLineStyle(),D=s.__edge;if(x==="curve")n.parentNode&&n.parentNode!==a&&(D||(D=s.__edge=new BezierCurve({shape:getEdgeShape(_,S,T,l,l)})),updateProps$1(D,{shape:getEdgeShape(_,S,T,u,c)},t));else if(x==="polyline"&&_==="orthogonal"&&n!==a&&n.children&&n.children.length!==0&&n.isExpand===!0){for(var O=n.children,F=[],z=0;z<O.length;z++){var j=O[z].getLayout();F.push([j.x,j.y])}D||(D=s.__edge=new TreePath({shape:{parentPoint:[c.x,c.y],childPoints:[[c.x,c.y]],orient:S,forkPosition:A}})),updateProps$1(D,{shape:{parentPoint:[c.x,c.y],childPoints:F}},t)}D&&!(x==="polyline"&&!n.isExpand)&&(D.useStyle(defaults({strokeNoScale:!0,fill:null},R)),setStatesStylesFromModel(D,d,"lineStyle"),setDefaultStateProxy(D),p.add(D))}function removeNodeEdge(t,n,a,s,l){var u=n.tree.root,c=getSourceNode(u,t),p=c.source,d=c.sourceLayout,x=n.getItemGraphicEl(t.dataIndex);if(x){var _=n.getItemGraphicEl(p.dataIndex),S=_.__edge,T=x.__edge||(p.isExpand===!1||p.children.length===1?S:void 0),A=s.get("edgeShape"),R=s.get("layout"),D=s.get("orient"),O=s.get(["lineStyle","curveness"]);T&&(A==="curve"?removeElement(T,{shape:getEdgeShape(R,D,O,d,d),style:{opacity:0}},s,{cb:function(){a.remove(T)},removeOpt:l}):A==="polyline"&&s.get("layout")==="orthogonal"&&removeElement(T,{shape:{parentPoint:[d.x,d.y],childPoints:[[d.x,d.y]]},style:{opacity:0}},s,{cb:function(){a.remove(T)},removeOpt:l}))}}function getSourceNode(t,n){for(var a=n.parentNode===t?n:n.parentNode||n,s;s=a.getLayout(),s==null;)a=a.parentNode===t?a:a.parentNode||a;return{source:a,sourceLayout:s}}function removeNode(t,n,a,s,l){var u=t.tree.getNodeByDataIndex(n),c=t.tree.root,p=getSourceNode(c,u).sourceLayout,d={duration:l.get("animationDurationUpdate"),easing:l.get("animationEasingUpdate")};removeElement(a,{x:p.x+1,y:p.y+1},l,{cb:function(){s.remove(a),t.setItemGraphicEl(n,null)},removeOpt:d}),a.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:d}),u.children.forEach(function(x){removeNodeEdge(x,t,s,l,d)}),removeNodeEdge(u,t,s,l,d)}function getEdgeShape(t,n,a,s,l){var u,c,p,d,x,_,S,T;if(t==="radial"){x=s.rawX,S=s.rawY,_=l.rawX,T=l.rawY;var A=radialCoordinate(x,S),R=radialCoordinate(x,S+(T-S)*a),D=radialCoordinate(_,T+(S-T)*a),O=radialCoordinate(_,T);return{x1:A.x||0,y1:A.y||0,x2:O.x||0,y2:O.y||0,cpx1:R.x||0,cpy1:R.y||0,cpx2:D.x||0,cpy2:D.y||0}}else x=s.x,S=s.y,_=l.x,T=l.y,(n==="LR"||n==="RL")&&(u=x+(_-x)*a,c=S,p=_+(x-_)*a,d=T),(n==="TB"||n==="BT")&&(u=x,c=S+(T-S)*a,p=_,d=T+(S-T)*a);return{x1:x,y1:S,x2:_,y2:T,cpx1:u,cpy1:c,cpx2:p,cpy2:d}}var inner$e=makeInner();function linkSeriesData(t){var n=t.mainData,a=t.datas;a||(a={main:n},t.datasAttr={main:"data"}),t.datas=t.mainData=null,linkAll(n,a,t),each$f(a,function(s){each$f(n.TRANSFERABLE_METHODS,function(l){s.wrapMethod(l,curry$1(transferInjection,t))})}),n.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,t)),each$f(n.CHANGABLE_METHODS,function(s){n.wrapMethod(s,curry$1(changeInjection,t))}),assert(a[n.dataType]===n)}function transferInjection(t,n){if(isMainData(this)){var a=extend({},inner$e(this).datas);a[this.dataType]=n,linkAll(n,a,t)}else linkSingle(n,this.dataType,inner$e(this).mainData,t);return n}function changeInjection(t,n){return t.struct&&t.struct.update(),n}function cloneShallowInjection(t,n){return each$f(inner$e(n).datas,function(a,s){a!==n&&linkSingle(a.cloneShallow(),s,n,t)}),n}function getLinkedData(t){var n=inner$e(this).mainData;return t==null||n==null?n:inner$e(n).datas[t]}function getLinkedDataAll(){var t=inner$e(this).mainData;return t==null?[{data:t}]:map$1(keys(inner$e(t).datas),function(n){return{type:n,data:inner$e(t).datas[n]}})}function isMainData(t){return inner$e(t).mainData===t}function linkAll(t,n,a){inner$e(t).datas={},each$f(n,function(s,l){linkSingle(s,l,t,a)})}function linkSingle(t,n,a,s){inner$e(a).datas[n]=t,inner$e(t).mainData=a,t.dataType=n,s.struct&&(t[s.structAttr]=s.struct,s.struct[s.datasAttr[n]]=t),t.getLinkedData=getLinkedData,t.getLinkedDataAll=getLinkedDataAll}var TreeNode=function(){function t(n,a){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=n||"",this.hostTree=a}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(n,a,s){isFunction$1(n)&&(s=a,a=n,n=null),n=n||{},isString$1(n)&&(n={order:n});var l=n.order||"preorder",u=this[n.attr||"children"],c;l==="preorder"&&(c=a.call(s,this));for(var p=0;!c&&p<u.length;p++)u[p].eachNode(n,a,s);l==="postorder"&&a.call(s,this)},t.prototype.updateDepthAndHeight=function(n){var a=0;this.depth=n;for(var s=0;s<this.children.length;s++){var l=this.children[s];l.updateDepthAndHeight(n+1),l.height>a&&(a=l.height)}this.height=a+1},t.prototype.getNodeById=function(n){if(this.getId()===n)return this;for(var a=0,s=this.children,l=s.length;a<l;a++){var u=s[a].getNodeById(n);if(u)return u}},t.prototype.contains=function(n){if(n===this)return!0;for(var a=0,s=this.children,l=s.length;a<l;a++){var u=s[a].contains(n);if(u)return u}},t.prototype.getAncestors=function(n){for(var a=[],s=n?this:this.parentNode;s;)a.push(s),s=s.parentNode;return a.reverse(),a},t.prototype.getAncestorsIndices=function(){for(var n=[],a=this;a;)n.push(a.dataIndex),a=a.parentNode;return n.reverse(),n},t.prototype.getDescendantIndices=function(){var n=[];return this.eachNode(function(a){n.push(a.dataIndex)}),n},t.prototype.getValue=function(n){var a=this.hostTree.data;return a.getStore().get(a.getDimensionIndex(n||"value"),this.dataIndex)},t.prototype.setLayout=function(n,a){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,n,a)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(n){if(!(this.dataIndex<0)){var a=this.hostTree,s=a.data.getItemModel(this.dataIndex);return s.getModel(n)}},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(n,a){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,n,a)},t.prototype.getVisual=function(n){return this.hostTree.data.getItemVisual(this.dataIndex,n)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var n=this.parentNode.children,a=0;a<n.length;++a)if(n[a]===this)return a;return-1}return-1},t.prototype.isAncestorOf=function(n){for(var a=n.parentNode;a;){if(a===this)return!0;a=a.parentNode}return!1},t.prototype.isDescendantOf=function(n){return n!==this&&n.isAncestorOf(this)},t}(),Tree=function(){function t(n){this.type="tree",this._nodes=[],this.hostModel=n}return t.prototype.eachNode=function(n,a,s){this.root.eachNode(n,a,s)},t.prototype.getNodeByDataIndex=function(n){var a=this.data.getRawIndex(n);return this._nodes[a]},t.prototype.getNodeById=function(n){return this.root.getNodeById(n)},t.prototype.update=function(){for(var n=this.data,a=this._nodes,s=0,l=a.length;s<l;s++)a[s].dataIndex=-1;for(var s=0,l=n.count();s<l;s++)a[n.getRawIndex(s)].dataIndex=s},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(n,a,s){var l=new t(a),u=[],c=1;p(n);function p(_,S){var T=_.value;c=Math.max(c,isArray$1(T)?T.length:1),u.push(_);var A=new TreeNode(convertOptionIdName(_.name,""),l);S?addChild(A,S):l.root=A,l._nodes.push(A);var R=_.children;if(R)for(var D=0;D<R.length;D++)p(R[D],A)}l.root.updateDepthAndHeight(0);var d=prepareSeriesDataSchema(u,{coordDimensions:["value"],dimensionsCount:c}).dimensions,x=new SeriesData(d,a);return x.initData(u),s&&s(x),linkSeriesData({mainData:x,struct:l,structAttr:"tree"}),l.update(),l},t}();function addChild(t,n){var a=n.children;t.parentNode!==n&&(a.push(t),t.parentNode=n)}function retrieveTargetInfo(t,n,a){if(t&&indexOf(n,t.type)>=0){var s=a.getData().tree.root,l=t.targetNode;if(isString$1(l)&&(l=s.getNodeById(l)),l&&s.contains(l))return{node:l};var u=t.targetNodeId;if(u!=null&&(l=s.getNodeById(u)))return{node:l}}}function getPathToRoot(t){for(var n=[];t;)t=t.parentNode,t&&n.push(t);return n.reverse()}function aboveViewRoot(t,n){var a=getPathToRoot(t);return indexOf(a,n)>=0}function wrapTreePathInfo(t,n){for(var a=[];t;){var s=t.dataIndex;a.push({name:t.name,dataIndex:s,value:n.getRawValue(s)}),t=t.parentNode}return a.reverse(),a}var TreeSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.hasSymbolVisual=!0,a.ignoreStyleOnData=!0,a}return n.prototype.getInitialData=function(a){var s={name:a.name,children:a.data},l=a.leaves||{},u=new Model(l,this,this.ecModel),c=Tree.createTree(s,this,p);function p(S){S.wrapMethod("getItemModel",function(T,A){var R=c.getNodeByDataIndex(A);return R&&R.children.length&&R.isExpand||(T.parentModel=u),T})}var d=0;c.eachNode("preorder",function(S){S.depth>d&&(d=S.depth)});var x=a.expandAndCollapse,_=x&&a.initialTreeDepth>=0?a.initialTreeDepth:d;return c.root.eachNode("preorder",function(S){var T=S.hostTree.data.getRawDataItem(S.dataIndex);S.isExpand=T&&T.collapsed!=null?!T.collapsed:S.depth<=_}),c.data},n.prototype.getOrient=function(){var a=this.get("orient");return a==="horizontal"?a="LR":a==="vertical"&&(a="TB"),a},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.formatTooltip=function(a,s,l){for(var u=this.getData().tree,c=u.root.children[0],p=u.getNodeByDataIndex(a),d=p.getValue(),x=p.name;p&&p!==c;)x=p.parentNode.name+"."+x,p=p.parentNode;return createTooltipMarkup("nameValue",{name:x,value:d,noValue:isNaN(d)||d==null})},n.prototype.getDataParams=function(a){var s=t.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(a);return s.treeAncestors=wrapTreePathInfo(l,this),s.collapsed=!l.isExpand,s},n.type="series.tree",n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},n}(SeriesModel);function eachAfter(t,n,a){for(var s=[t],l=[],u;u=s.pop();)if(l.push(u),u.isExpand){var c=u.children;if(c.length)for(var p=0;p<c.length;p++)s.push(c[p])}for(;u=l.pop();)n(u,a)}function eachBefore(t,n){for(var a=[t],s;s=a.pop();)if(n(s),s.isExpand){var l=s.children;if(l.length)for(var u=l.length-1;u>=0;u--)a.push(l[u])}}function treeLayout(t,n){t.eachSeriesByType("tree",function(a){commonLayout(a,n)})}function commonLayout(t,n){var a=getViewRect$4(t,n);t.layoutInfo=a;var s=t.get("layout"),l=0,u=0,c=null;s==="radial"?(l=2*Math.PI,u=Math.min(a.height,a.width)/2,c=separation(function(j,Z){return(j.parentNode===Z.parentNode?1:2)/j.depth})):(l=a.width,u=a.height,c=separation());var p=t.getData().tree.root,d=p.children[0];if(d){init(p),eachAfter(d,firstWalk,c),p.hierNode.modifier=-d.hierNode.prelim,eachBefore(d,secondWalk);var x=d,_=d,S=d;eachBefore(d,function(j){var Z=j.getLayout().x;Z<x.getLayout().x&&(x=j),Z>_.getLayout().x&&(_=j),j.depth>S.depth&&(S=j)});var T=x===_?1:c(x,_)/2,A=T-x.getLayout().x,R=0,D=0,O=0,F=0;if(s==="radial")R=l/(_.getLayout().x+T+A),D=u/(S.depth-1||1),eachBefore(d,function(j){O=(j.getLayout().x+A)*R,F=(j.depth-1)*D;var Z=radialCoordinate(O,F);j.setLayout({x:Z.x,y:Z.y,rawX:O,rawY:F},!0)});else{var z=t.getOrient();z==="RL"||z==="LR"?(D=u/(_.getLayout().x+T+A),R=l/(S.depth-1||1),eachBefore(d,function(j){F=(j.getLayout().x+A)*D,O=z==="LR"?(j.depth-1)*R:l-(j.depth-1)*R,j.setLayout({x:O,y:F},!0)})):(z==="TB"||z==="BT")&&(R=l/(_.getLayout().x+T+A),D=u/(S.depth-1||1),eachBefore(d,function(j){O=(j.getLayout().x+A)*R,F=z==="TB"?(j.depth-1)*D:u-(j.depth-1)*D,j.setLayout({x:O,y:F},!0)}))}}}function treeVisual(t){t.eachSeriesByType("tree",function(n){var a=n.getData(),s=a.tree;s.eachNode(function(l){var u=l.getModel(),c=u.getModel("itemStyle").getItemStyle(),p=a.ensureUniqueItemVisual(l.dataIndex,"style");extend(p,c)})})}function installTreeAction(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(n,a){a.eachComponent({mainType:"series",subType:"tree",query:n},function(s){var l=n.dataIndex,u=s.getData().tree,c=u.getNodeByDataIndex(l);c.isExpand=!c.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(n,a,s){a.eachComponent({mainType:"series",subType:"tree",query:n},function(l){var u=l.coordinateSystem,c=updateCenterAndZoom(u,n,void 0,s);l.setCenter&&l.setCenter(c.center),l.setZoom&&l.setZoom(c.zoom)})})}function install$H(t){t.registerChartView(TreeView),t.registerSeriesModel(TreeSeriesModel),t.registerLayout(treeLayout),t.registerVisual(treeVisual),installTreeAction(t)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(t){for(var n=0;n<actionTypes.length;n++)t.registerAction({type:actionTypes[n],update:"updateView"},noop);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(a,s){s.eachComponent({mainType:"series",subType:"treemap",query:a},l);function l(u,c){var p=["treemapZoomToNode","treemapRootToNode"],d=retrieveTargetInfo(a,p,u);if(d){var x=u.getViewRoot();x&&(a.direction=aboveViewRoot(x,d.node)?"rollUp":"drillDown"),u.resetViewRoot(d.node)}}})}function enableAriaDecalForTree(t){var n=t.getData(),a=n.tree,s={};a.eachNode(function(l){for(var u=l;u&&u.depth>1;)u=u.parentNode;var c=getDecalFromPalette(t.ecModel,u.name||u.dataIndex+"",s);l.setVisual("decal",c)})}var TreemapSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.preventUsingHoverLayer=!0,a}return n.prototype.getInitialData=function(a,s){var l={name:a.name,children:a.data};completeTreeValue$1(l);var u=a.levels||[],c=this.designatedVisualItemStyle={},p=new Model({itemStyle:c},this,s);u=a.levels=setDefault(u,s);var d=map$1(u||[],function(S){return new Model(S,p,s)},this),x=Tree.createTree(l,this,_);function _(S){S.wrapMethod("getItemModel",function(T,A){var R=x.getNodeByDataIndex(A),D=R?d[R.depth]:null;return T.parentModel=D||p,T})}return x.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=this.getRawValue(a),p=u.getName(a);return createTooltipMarkup("nameValue",{name:p,value:c})},n.prototype.getDataParams=function(a){var s=t.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(a);return s.treeAncestors=wrapTreePathInfo(l,this),s.treePathInfo=s.treeAncestors,s},n.prototype.setLayoutInfo=function(a){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,a)},n.prototype.mapIdToIndex=function(a){var s=this._idIndexMap;s||(s=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var l=s.get(a);return l==null&&s.set(a,l=this._idIndexMapCount++),l},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var s=this.getRawData().tree.root;(!a||a!==s&&!s.contains(a))&&(this._viewRoot=s)},n.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},n.type="series.treemap",n.layoutMode="box",n.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},n}(SeriesModel);function completeTreeValue$1(t){var n=0;each$f(t.children,function(s){completeTreeValue$1(s);var l=s.value;isArray$1(l)&&(l=l[0]),n+=l});var a=t.value;isArray$1(a)&&(a=a[0]),(a==null||isNaN(a))&&(a=n),a<0&&(a=0),isArray$1(t.value)?t.value[0]=a:t.value=a}function setDefault(t,n){var a=normalizeToArray(n.get("color")),s=normalizeToArray(n.get(["aria","decal","decals"]));if(a){t=t||[];var l,u;each$f(t,function(p){var d=new Model(p),x=d.get("color"),_=d.get("decal");(d.get(["itemStyle","color"])||x&&x!=="none")&&(l=!0),(d.get(["itemStyle","decal"])||_&&_!=="none")&&(u=!0)});var c=t[0]||(t[0]={});return l||(c.color=a.slice()),!u&&s&&(c.decal=s.slice()),t}}var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=function(){function t(n){this.group=new Group$3,n.add(this.group)}return t.prototype.render=function(n,a,s,l){var u=n.getModel("breadcrumb"),c=this.group;if(c.removeAll(),!(!u.get("show")||!s)){var p=u.getModel("itemStyle"),d=u.getModel("emphasis"),x=p.getModel("textStyle"),_=d.getModel(["itemStyle","textStyle"]),S={pos:{left:u.get("left"),right:u.get("right"),top:u.get("top"),bottom:u.get("bottom")},box:{width:a.getWidth(),height:a.getHeight()},emptyItemWidth:u.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(s,S,x),this._renderContent(n,S,p,d,x,_,l),positionElement(c,S.pos,S.box)}},t.prototype._prepare=function(n,a,s){for(var l=n;l;l=l.parentNode){var u=convertOptionIdName(l.getModel().get("name"),""),c=s.getTextRect(u),p=Math.max(c.width+TEXT_PADDING*2,a.emptyItemWidth);a.totalWidth+=p+ITEM_GAP,a.renderList.push({node:l,text:u,width:p})}},t.prototype._renderContent=function(n,a,s,l,u,c,p){for(var d=0,x=a.emptyItemWidth,_=n.get(["breadcrumb","height"]),S=getAvailableSize(a.pos,a.box),T=a.totalWidth,A=a.renderList,R=l.getModel("itemStyle").getItemStyle(),D=A.length-1;D>=0;D--){var O=A[D],F=O.node,z=O.width,j=O.text;T>S.width&&(T-=z-x,z=x,j=null);var Z=new Polygon({shape:{points:makeItemPoints(d,0,z,_,D===A.length-1,D===0)},style:defaults(s.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText({style:createTextStyle$1(u,{text:j})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(p,F)});Z.disableLabelAnimation=!0,Z.getTextContent().ensureState("emphasis").style=createTextStyle$1(c,{text:j}),Z.ensureState("emphasis").style=R,toggleHoverEmphasis(Z,l.get("focus"),l.get("blurScope"),l.get("disabled")),this.group.add(Z),packEventData(Z,n,F),d+=z+ITEM_GAP}},t.prototype.remove=function(){this.group.removeAll()},t}();function makeItemPoints(t,n,a,s,l,u){var c=[[l?t:t-ARRAY_LENGTH,n],[t+a,n],[t+a,n+s],[l?t:t-ARRAY_LENGTH,n+s]];return!u&&c.splice(2,0,[t+a+ARRAY_LENGTH,n+s/2]),!l&&c.push([t,n+s/2]),c}function packEventData(t,n,a){getECData(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&wrapTreePathInfo(a,n)}}var AnimationWrap=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(n,a,s,l,u){return this._elExistsMap[n.id]?!1:(this._elExistsMap[n.id]=!0,this._storage.push({el:n,target:a,duration:s,delay:l,easing:u}),!0)},t.prototype.finished=function(n){return this._finishedCallback=n,this},t.prototype.start=function(){for(var n=this,a=this._storage.length,s=function(){a--,a<=0&&(n._storage.length=0,n._elExistsMap={},n._finishedCallback&&n._finishedCallback())},l=0,u=this._storage.length;l<u;l++){var c=this._storage[l];c.el.animateTo(c.target,{duration:c.duration,delay:c.delay,easing:c.easing,setToFinal:!0,done:s,aborted:s})}return this},t}();function createWrap(){return new AnimationWrap}var Group$2=Group$3,Rect$1=Rect$2,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(t){var n=getStateItemStyle(t);return n.stroke=n.fill=n.lineWidth=null,n},inner$d=makeInner(),TreemapView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._state="ready",a._storage=createStorage(),a}return n.prototype.render=function(a,s,l,u){var c=s.findComponents({mainType:"series",subType:"treemap",query:u});if(!(indexOf(c,a)<0)){this.seriesModel=a,this.api=l,this.ecModel=s;var p=["treemapZoomToNode","treemapRootToNode"],d=retrieveTargetInfo(u,p,a),x=u&&u.type,_=a.layoutInfo,S=!this._oldTree,T=this._storage,A=x==="treemapRootToNode"&&d&&T?{rootNodeGroup:T.nodeGroup[d.node.getRawIndex()],direction:u.direction}:null,R=this._giveContainerGroup(_),D=a.get("animation"),O=this._doRender(R,a,A);D&&!S&&(!x||x==="treemapZoomToNode"||x==="treemapRootToNode")?this._doAnimation(R,O,a,A):O.renderFinally(),this._resetController(l),this._renderBreadcrumb(a,l,d)}},n.prototype._giveContainerGroup=function(a){var s=this._containerGroup;return s||(s=this._containerGroup=new Group$2,this._initEvents(s),this.group.add(s)),s.x=a.x,s.y=a.y,s},n.prototype._doRender=function(a,s,l){var u=s.getData().tree,c=this._oldTree,p=createStorage(),d=createStorage(),x=this._storage,_=[];function S(z,j,Z,W){return renderNode(s,d,x,l,p,_,z,j,Z,W)}D(u.root?[u.root]:[],c&&c.root?[c.root]:[],a,u===c||!c,0);var T=O(x);if(this._oldTree=u,this._storage=d,this._controllerHost){var A=this.seriesModel.layoutInfo,R=u.root.getLayout();R.width===A.width&&R.height===A.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:p,willDeleteEls:T,renderFinally:F};function D(z,j,Z,W,J){W?(j=z,each$f(z,function(Ct,Q){!Ct.isRemoved()&&tn(Q,Q)})):new DataDiffer(j,z,en,en).add(tn).update(tn).remove(curry$1(tn,null)).execute();function en(Ct){return Ct.getId()}function tn(Ct,Q){var on=Ct!=null?z[Ct]:null,gn=Q!=null?j[Q]:null,In=S(on,gn,Z,J);In&&D(on&&on.viewChildren||[],gn&&gn.viewChildren||[],In,W,J+1)}}function O(z){var j=createStorage();return z&&each$f(z,function(Z,W){var J=j[W];each$f(Z,function(en){en&&(J.push(en),inner$d(en).willDelete=!0)})}),j}function F(){each$f(T,function(z){each$f(z,function(j){j.parent&&j.parent.remove(j)})}),each$f(_,function(z){z.invisible=!0,z.dirty()})}},n.prototype._doAnimation=function(a,s,l,u){var c=l.get("animationDurationUpdate"),p=l.get("animationEasing"),d=(isFunction$1(c)?0:c)||0,x=(isFunction$1(p)?null:p)||"cubicOut",_=createWrap();each$f(s.willDeleteEls,function(S,T){each$f(S,function(A,R){if(!A.invisible){var D=A.parent,O,F=inner$d(D);if(u&&u.direction==="drillDown")O=D===u.rootNodeGroup?{shape:{x:0,y:0,width:F.nodeWidth,height:F.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var z=0,j=0;F.willDelete||(z=F.nodeWidth/2,j=F.nodeHeight/2),O=T==="nodeGroup"?{x:z,y:j,style:{opacity:0}}:{shape:{x:z,y:j,width:0,height:0},style:{opacity:0}}}O&&_.add(A,O,d,0,x)}})}),each$f(this._storage,function(S,T){each$f(S,function(A,R){var D=s.lastsForAnimation[T][R],O={};D&&(A instanceof Group$3?D.oldX!=null&&(O.x=A.x,O.y=A.y,A.x=D.oldX,A.y=D.oldY):(D.oldShape&&(O.shape=extend({},A.shape),A.setShape(D.oldShape)),D.fadein?(A.setStyle("opacity",0),O.style={opacity:1}):A.style.opacity!==1&&(O.style={opacity:1})),_.add(A,O,d,0,x))})},this),this._state="animating",_.finished(bind$1(function(){this._state="ready",s.renderFinally()},this)).start()},n.prototype._resetController=function(a){var s=this._controller,l=this._controllerHost;l||(this._controllerHost={target:this.group},l=this._controllerHost),s||(s=this._controller=new RoamController(a.getZr()),s.enable(this.seriesModel.get("roam")),l.zoomLimit=this.seriesModel.get("scaleLimit"),l.zoom=this.seriesModel.get("zoom"),s.on("pan",bind$1(this._onPan,this)),s.on("zoom",bind$1(this._onZoom,this)));var u=new BoundingRect(0,0,a.getWidth(),a.getHeight());s.setPointerChecker(function(c,p,d){return u.contain(p,d)})},n.prototype._clearController=function(){var a=this._controller;this._controllerHost=null,a&&(a.dispose(),a=null)},n.prototype._onPan=function(a){if(this._state!=="animating"&&(Math.abs(a.dx)>DRAG_THRESHOLD||Math.abs(a.dy)>DRAG_THRESHOLD)){var s=this.seriesModel.getData().tree.root;if(!s)return;var l=s.getLayout();if(!l)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x+a.dx,y:l.y+a.dy,width:l.width,height:l.height}})}},n.prototype._onZoom=function(a){var s=a.originX,l=a.originY,u=a.scale;if(this._state!=="animating"){var c=this.seriesModel.getData().tree.root;if(!c)return;var p=c.getLayout();if(!p)return;var d=new BoundingRect(p.x,p.y,p.width,p.height),x=null,_=this._controllerHost;x=_.zoomLimit;var S=_.zoom=_.zoom||1;if(S*=u,x){var T=x.min||0,A=x.max||1/0;S=Math.max(Math.min(A,S),T)}var R=S/_.zoom;_.zoom=S;var D=this.seriesModel.layoutInfo;s-=D.x,l-=D.y;var O=create$1();translate(O,O,[-s,-l]),scale$1(O,O,[R,R]),translate(O,O,[s,l]),d.applyTransform(O),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:d.x,y:d.y,width:d.width,height:d.height}})}},n.prototype._initEvents=function(a){var s=this;a.on("click",function(l){if(s._state==="ready"){var u=s.seriesModel.get("nodeClick",!0);if(u){var c=s.findTarget(l.offsetX,l.offsetY);if(c){var p=c.node;if(p.getLayout().isLeafRoot)s._rootToNode(c);else if(u==="zoomToNode")s._zoomToNode(c);else if(u==="link"){var d=p.hostTree.data.getItemModel(p.dataIndex),x=d.get("link",!0),_=d.get("target",!0)||"blank";x&&windowOpen(x,_)}}}}},this)},n.prototype._renderBreadcrumb=function(a,s,l){var u=this;l||(l=a.get("leafDepth",!0)!=null?{node:a.getViewRoot()}:this.findTarget(s.getWidth()/2,s.getHeight()/2),l||(l={node:a.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(a,s,l.node,function(c){u._state!=="animating"&&(aboveViewRoot(a.getViewRoot(),c)?u._rootToNode({node:c}):u._zoomToNode({node:c}))})},n.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},n.prototype.dispose=function(){this._clearController()},n.prototype._zoomToNode=function(a){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},n.prototype._rootToNode=function(a){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},n.prototype.findTarget=function(a,s){var l,u=this.seriesModel.getViewRoot();return u.eachNode({attr:"viewChildren",order:"preorder"},function(c){var p=this._storage.background[c.getRawIndex()];if(p){var d=p.transformCoordToLocal(a,s),x=p.shape;if(x.x<=d[0]&&d[0]<=x.x+x.width&&x.y<=d[1]&&d[1]<=x.y+x.height)l={node:c,offsetX:d[0],offsetY:d[1]};else return!1}},this),l},n.type="treemap",n}(ChartView);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(t,n,a,s,l,u,c,p,d,x){if(!c)return;var _=c.getLayout(),S=t.getData(),T=c.getModel();if(S.setItemGraphicEl(c.dataIndex,null),!_||!_.isInView)return;var A=_.width,R=_.height,D=_.borderWidth,O=_.invisible,F=c.getRawIndex(),z=p&&p.getRawIndex(),j=c.viewChildren,Z=_.upperHeight,W=j&&j.length,J=T.getModel("itemStyle"),en=T.getModel(["emphasis","itemStyle"]),tn=T.getModel(["blur","itemStyle"]),Ct=T.getModel(["select","itemStyle"]),Q=J.get("borderRadius")||0,on=dx("nodeGroup",Group$2);if(!on)return;if(d.add(on),on.x=_.x||0,on.y=_.y||0,on.markRedraw(),inner$d(on).nodeWidth=A,inner$d(on).nodeHeight=R,_.isAboveViewRoot)return on;var gn=dx("background",Rect$1,x,Z2_BG);gn&&ox(on,gn,W&&_.upperLabelHeight);var In=T.getModel("emphasis"),dn=In.get("focus"),ix=In.get("blurScope"),Cn=In.get("disabled"),ax=dn==="ancestor"?c.getAncestorsIndices():dn==="descendant"?c.getDescendantIndices():dn;if(W)isHighDownDispatcher(on)&&setAsHighDownDispatcher(on,!1),gn&&(setAsHighDownDispatcher(gn,!Cn),S.setItemGraphicEl(c.dataIndex,gn),enableHoverFocus(gn,ax,ix));else{var sx=dx("content",Rect$1,x,Z2_CONTENT);sx&&hx(on,sx),gn.disableMorphing=!0,gn&&isHighDownDispatcher(gn)&&setAsHighDownDispatcher(gn,!1),setAsHighDownDispatcher(on,!Cn),S.setItemGraphicEl(c.dataIndex,on);var lx=T.getShallow("cursor");lx&&sx.attr("cursor",lx),enableHoverFocus(on,ax,ix)}return on;function ox(Sx,Ex,Cx){var Ax=getECData(Ex);if(Ax.dataIndex=c.dataIndex,Ax.seriesIndex=t.seriesIndex,Ex.setShape({x:0,y:0,width:A,height:R,r:Q}),O)_x(Ex);else{Ex.invisible=!1;var Tx=c.getVisual("style"),kx=Tx.stroke,Rx=getItemStyleNormal(J);Rx.fill=kx;var $x=getStateItemStyle(en);$x.fill=en.get("borderColor");var Gx=getStateItemStyle(tn);Gx.fill=tn.get("borderColor");var qx=getStateItemStyle(Ct);if(qx.fill=Ct.get("borderColor"),Cx){var Dx=A-2*D;ux(Ex,kx,Tx.opacity,{x:D,y:0,width:Dx,height:Z})}else Ex.removeTextContent();Ex.setStyle(Rx),Ex.ensureState("emphasis").style=$x,Ex.ensureState("blur").style=Gx,Ex.ensureState("select").style=qx,setDefaultStateProxy(Ex)}Sx.add(Ex)}function hx(Sx,Ex){var Cx=getECData(Ex);Cx.dataIndex=c.dataIndex,Cx.seriesIndex=t.seriesIndex;var Ax=Math.max(A-2*D,0),Tx=Math.max(R-2*D,0);if(Ex.culling=!0,Ex.setShape({x:D,y:D,width:Ax,height:Tx,r:Q}),O)_x(Ex);else{Ex.invisible=!1;var kx=c.getVisual("style"),Rx=kx.fill,$x=getItemStyleNormal(J);$x.fill=Rx,$x.decal=kx.decal;var Gx=getStateItemStyle(en),qx=getStateItemStyle(tn),Dx=getStateItemStyle(Ct);ux(Ex,Rx,kx.opacity,null),Ex.setStyle($x),Ex.ensureState("emphasis").style=Gx,Ex.ensureState("blur").style=qx,Ex.ensureState("select").style=Dx,setDefaultStateProxy(Ex)}Sx.add(Ex)}function _x(Sx){!Sx.invisible&&u.push(Sx)}function ux(Sx,Ex,Cx,Ax){var Tx=T.getModel(Ax?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),kx=convertOptionIdName(T.get("name"),null),Rx=Tx.getShallow("show");setLabelStyle(Sx,getLabelStatesModels(T,Ax?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:Rx?kx:null,inheritColor:Ex,defaultOpacity:Cx,labelFetcher:t,labelDataIndex:c.dataIndex});var $x=Sx.getTextContent();if($x){var Gx=$x.style,qx=normalizeCssArray$1(Gx.padding||0);Ax&&(Sx.setTextConfig({layoutRect:Ax}),$x.disableLabelLayout=!0),$x.beforeUpdate=function(){var lE=Math.max((Ax?Ax.width:Sx.shape.width)-qx[1]-qx[3],0),cE=Math.max((Ax?Ax.height:Sx.shape.height)-qx[0]-qx[2],0);(Gx.width!==lE||Gx.height!==cE)&&$x.setStyle({width:lE,height:cE})},Gx.truncateMinChar=2,Gx.lineOverflow="truncate",px(Gx,Ax,_);var Dx=$x.getState("emphasis");px(Dx?Dx.style:null,Ax,_)}}function px(Sx,Ex,Cx){var Ax=Sx?Sx.text:null;if(!Ex&&Cx.isLeafRoot&&Ax!=null){var Tx=t.get("drillDownIcon",!0);Sx.text=Tx?Tx+" "+Ax:Ax}}function dx(Sx,Ex,Cx,Ax){var Tx=z!=null&&a[Sx][z],kx=l[Sx];return Tx?(a[Sx][z]=null,mx(kx,Tx)):O||(Tx=new Ex,Tx instanceof Displayable&&(Tx.z2=calculateZ2(Cx,Ax)),gx(kx,Tx)),n[Sx][F]=Tx}function mx(Sx,Ex){var Cx=Sx[F]={};Ex instanceof Group$2?(Cx.oldX=Ex.x,Cx.oldY=Ex.y):Cx.oldShape=extend({},Ex.shape)}function gx(Sx,Ex){var Cx=Sx[F]={},Ax=c.parentNode,Tx=Ex instanceof Group$3;if(Ax&&(!s||s.direction==="drillDown")){var kx=0,Rx=0,$x=l.background[Ax.getRawIndex()];!s&&$x&&$x.oldShape&&(kx=$x.oldShape.width,Rx=$x.oldShape.height),Tx?(Cx.oldX=0,Cx.oldY=Rx):Cx.oldShape={x:kx,y:Rx,width:0,height:0}}Cx.fadein=!Tx}}function calculateZ2(t,n){return t*Z2_BASE+n}var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function t(n){var a=n.mappingMethod,s=n.type,l=this.option=clone$4(n);this.type=s,this.mappingMethod=a,this._normalizeData=normalizers[a];var u=t.visualHandlers[s];this.applyVisual=u.applyVisual,this.getColorMapper=u.getColorMapper,this._normalizedToVisual=u._normalizedToVisual[a],a==="piecewise"?(normalizeVisualRange(l),preprocessForPiecewise(l)):a==="category"?l.categories?preprocessForSpecifiedCategory(l):normalizeVisualRange(l,!0):(assert(a!=="linear"||l.dataExtent),normalizeVisualRange(l))}return t.prototype.mapValueToVisual=function(n){var a=this._normalizeData(n);return this._normalizedToVisual(a,n)},t.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},t.listVisualTypes=function(){return keys(t.visualHandlers)},t.isValidType=function(n){return t.visualHandlers.hasOwnProperty(n)},t.eachVisual=function(n,a,s){isObject$3(n)?each$f(n,a,s):a.call(s,n)},t.mapVisual=function(n,a,s){var l,u=isArray$1(n)?[]:isObject$3(n)?{}:(l=!0,null);return t.eachVisual(n,function(c,p){var d=a.call(s,c,p);l?u=d:u[p]=d}),u},t.retrieveVisuals=function(n){var a={},s;return n&&each$c(t.visualHandlers,function(l,u){n.hasOwnProperty(u)&&(a[u]=n[u],s=!0)}),s?a:null},t.prepareVisualTypes=function(n){if(isArray$1(n))n=n.slice();else if(isObject(n)){var a=[];each$c(n,function(s,l){a.push(l)}),n=a}else return[];return n.sort(function(s,l){return l==="color"&&s!=="color"&&s.indexOf("color")===0?1:-1}),n},t.dependsOn=function(n,a){return a==="color"?!!(n&&n.indexOf(a)===0):n===a},t.findPieceIndex=function(n,a,s){for(var l,u=1/0,c=0,p=a.length;c<p;c++){var d=a[c].value;if(d!=null){if(d===n||isString$1(d)&&d===n+"")return c;s&&T(d,c)}}for(var c=0,p=a.length;c<p;c++){var x=a[c],_=x.interval,S=x.close;if(_){if(_[0]===-1/0){if(littleThan(S[1],n,_[1]))return c}else if(_[1]===1/0){if(littleThan(S[0],_[0],n))return c}else if(littleThan(S[0],_[0],n)&&littleThan(S[1],n,_[1]))return c;s&&T(_[0],c),s&&T(_[1],c)}}if(s)return n===1/0?a.length-1:n===-1/0?0:l;function T(A,R){var D=Math.abs(A-n);D<u&&(u=D,l=R)}},t.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var n=this.option;return bind$1(n.mappingMethod==="category"?function(a,s){return!s&&(a=this._normalizeData(a)),doMapCategory.call(this,a)}:function(a,s,l){var u=!!l;return!s&&(a=this._normalizeData(a)),l=fastLerp(a,n.parsedVisual,l),u?l:stringify(l,"rgba")},this)},_normalizedToVisual:{linear:function(n){return stringify(fastLerp(n,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(n,a){var s=getSpecifiedVisual.call(this,a);return s==null&&(s=stringify(fastLerp(n,this.option.parsedVisual),"rgba")),s},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,a)}),colorSaturation:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,null,a)}),colorLightness:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,null,null,a)}),colorAlpha:makePartialColorVisualHandler(function(n,a){return modifyAlpha(n,a)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(n,a,s){var l=this.mapValueToVisual(n);s("symbol",l)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(n,a){var s=getSpecifiedVisual.call(this,a);return s==null&&(s=doMapToArray.call(this,n)),s},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},t}();function preprocessForPiecewise(t){var n=t.pieceList;t.hasSpecialVisual=!1,each$f(n,function(a,s){a.originIndex=s,a.visual!=null&&(t.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(t){var n=t.categories,a=t.categoryMap={},s=t.visual;if(each$c(n,function(c,p){a[c]=p}),!isArray$1(s)){var l=[];isObject$3(s)?each$c(s,function(c,p){var d=a[p];l[d??CATEGORY_DEFAULT_VISUAL_INDEX]=c}):l[CATEGORY_DEFAULT_VISUAL_INDEX]=s,s=setVisualToOption(t,l)}for(var u=n.length-1;u>=0;u--)s[u]==null&&(delete a[n[u]],n.pop())}function normalizeVisualRange(t,n){var a=t.visual,s=[];isObject$3(a)?each$c(a,function(u){s.push(u)}):a!=null&&s.push(a);var l={color:1,symbol:1};!n&&s.length===1&&!l.hasOwnProperty(t.type)&&(s[1]=s[0]),setVisualToOption(t,s)}function makePartialColorVisualHandler(t){return{applyVisual:function(n,a,s){var l=this.mapValueToVisual(n);s("color",t(a("color"),l))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(t){var n=this.option.visual;return n[Math.round(linearMap$2(t,[0,1],[0,n.length-1],!0))]||{}}function makeApplyVisual(t){return function(n,a,s){s(t,this.mapValueToVisual(n))}}function doMapCategory(t){var n=this.option.visual;return n[this.option.loop&&t!==CATEGORY_DEFAULT_VISUAL_INDEX?t%n.length:t]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(t){return{linear:function(n){return linearMap$2(n,t,this.option.visual,!0)},category:doMapCategory,piecewise:function(n,a){var s=getSpecifiedVisual.call(this,a);return s==null&&(s=linearMap$2(n,t,this.option.visual,!0)),s},fixed:doMapFixed}}function getSpecifiedVisual(t){var n=this.option,a=n.pieceList;if(n.hasSpecialVisual){var s=VisualMapping.findPieceIndex(t,a),l=a[s];if(l&&l.visual)return l.visual[this.type]}}function setVisualToOption(t,n){return t.visual=n,t.type==="color"&&(t.parsedVisual=map$1(n,function(a){var s=parse(a);return s||[0,0,0,1]})),n}var normalizers={linear:function(t){return linearMap$2(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var n=this.option.pieceList,a=VisualMapping.findPieceIndex(t,n,!0);if(a!=null)return linearMap$2(a,[0,n.length-1],[0,1],!0)},category:function(t){var n=this.option.categories?this.option.categoryMap[t]:t;return n??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop};function littleThan(t,n,a){return t?n<=a:n<a}var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(t){var n=t.getData().tree,a=n.root;a.isRemoved()||travelTree(a,{},t.getViewRoot().getAncestors(),t)}};function travelTree(t,n,a,s){var l=t.getModel(),u=t.getLayout(),c=t.hostTree.data;if(!(!u||u.invisible||!u.isInView)){var p=l.getModel(ITEM_STYLE_NORMAL),d=buildVisuals(p,n,s),x=c.ensureUniqueItemVisual(t.dataIndex,"style"),_=p.get("borderColor"),S=p.get("borderColorSaturation"),T;S!=null&&(T=calculateColor(d),_=calculateBorderColor(S,T)),x.stroke=_;var A=t.viewChildren;if(!A||!A.length)T=calculateColor(d),x.fill=T;else{var R=buildVisualMapping(t,l,u,p,d,A);each$f(A,function(D,O){if(D.depth>=a.length||D===a[D.depth]){var F=mapVisual$1(l,d,D,O,R,s);travelTree(D,F,a,s)}})}}}function buildVisuals(t,n,a){var s=extend({},n),l=a.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(u){l[u]=n[u];var c=t.get(u);l[u]=null,c!=null&&(s[u]=c)}),s}function calculateColor(t){var n=getValueVisualDefine(t,"color");if(n){var a=getValueVisualDefine(t,"colorAlpha"),s=getValueVisualDefine(t,"colorSaturation");return s&&(n=modifyHSL(n,null,null,s)),a&&(n=modifyAlpha(n,a)),n}}function calculateBorderColor(t,n){return n!=null?modifyHSL(n,null,null,t):null}function getValueVisualDefine(t,n){var a=t[n];if(a!=null&&a!=="none")return a}function buildVisualMapping(t,n,a,s,l,u){if(!(!u||!u.length)){var c=getRangeVisual(n,"color")||l.color!=null&&l.color!=="none"&&(getRangeVisual(n,"colorAlpha")||getRangeVisual(n,"colorSaturation"));if(c){var p=n.get("visualMin"),d=n.get("visualMax"),x=a.dataExtent.slice();p!=null&&p<x[0]&&(x[0]=p),d!=null&&d>x[1]&&(x[1]=d);var _=n.get("colorMappingBy"),S={type:c.name,dataExtent:x,visual:c.range};S.type==="color"&&(_==="index"||_==="id")?(S.mappingMethod="category",S.loop=!0):S.mappingMethod="linear";var T=new VisualMapping(S);return inner$c(T).drColorMappingBy=_,T}}}function getRangeVisual(t,n){var a=t.get(n);return isArray$1(a)&&a.length?{name:n,range:a}:null}function mapVisual$1(t,n,a,s,l,u){var c=extend({},n);if(l){var p=l.type,d=p==="color"&&inner$c(l).drColorMappingBy,x=d==="index"?s:d==="id"?u.mapIdToIndex(a.getId()):a.getValue(t.get("visualDimension"));c[p]=l.mapValueToVisual(x)}return c}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(t,n,a,s){var l=a.getWidth(),u=a.getHeight(),c=t.option,p=getLayoutRect(t.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),d=c.size||[],x=parsePercent(retrieveValue(p.width,d[0]),l),_=parsePercent(retrieveValue(p.height,d[1]),u),S=s&&s.type,T=["treemapZoomToNode","treemapRootToNode"],A=retrieveTargetInfo(s,T,t),R=S==="treemapRender"||S==="treemapMove"?s.rootRect:null,D=t.getViewRoot(),O=getPathToRoot(D);if(S!=="treemapMove"){var F=S==="treemapZoomToNode"?estimateRootSize(t,A,D,x,_):R?[R.width,R.height]:[x,_],z=c.sort;z&&z!=="asc"&&z!=="desc"&&(z="desc");var j={squareRatio:c.squareRatio,sort:z,leafDepth:c.leafDepth};D.hostTree.clearLayouts();var Z={x:0,y:0,width:F[0],height:F[1],area:F[0]*F[1]};D.setLayout(Z),squarify(D,j,!1,0),Z=D.getLayout(),each$b(O,function(J,en){var tn=(O[en+1]||D).getValue();J.setLayout(extend({dataExtent:[tn,tn],borderWidth:0,upperHeight:0},Z))})}var W=t.getData().tree.root;W.setLayout(calculateRootPosition(p,R,A),!0),t.setLayoutInfo(p),prunning(W,new BoundingRect(-p.x,-p.y,l,u),O,D,0)}};function squarify(t,n,a,s){var l,u;if(!t.isRemoved()){var c=t.getLayout();l=c.width,u=c.height;var p=t.getModel(),d=p.get(PATH_BORDER_WIDTH),x=p.get(PATH_GAP_WIDTH)/2,_=getUpperLabelHeight(p),S=Math.max(d,_),T=d-x,A=S-x;t.setLayout({borderWidth:d,upperHeight:S,upperLabelHeight:_},!0),l=mathMax$3(l-2*T,0),u=mathMax$3(u-T-A,0);var R=l*u,D=initChildren$1(t,p,R,n,a,s);if(D.length){var O={x:T,y:A,width:l,height:u},F=mathMin$3(l,u),z=1/0,j=[];j.area=0;for(var Z=0,W=D.length;Z<W;){var J=D[Z];j.push(J),j.area+=J.getLayout().area;var en=worst(j,F,n.squareRatio);en<=z?(Z++,z=en):(j.area-=j.pop().getLayout().area,position(j,F,O,x,!1),F=mathMin$3(O.width,O.height),j.length=j.area=0,z=1/0)}if(j.length&&position(j,F,O,x,!0),!a){var tn=p.get("childrenVisibleMin");tn!=null&&R<tn&&(a=!0)}for(var Z=0,W=D.length;Z<W;Z++)squarify(D[Z],n,a,s+1)}}}function initChildren$1(t,n,a,s,l,u){var c=t.children||[],p=s.sort;p!=="asc"&&p!=="desc"&&(p=null);var d=s.leafDepth!=null&&s.leafDepth<=u;if(l&&!d)return t.viewChildren=[];c=filter(c,function(A){return!A.isRemoved()}),sort$1(c,p);var x=statistic(n,c,p);if(x.sum===0)return t.viewChildren=[];if(x.sum=filterByThreshold(n,a,x.sum,p,c),x.sum===0)return t.viewChildren=[];for(var _=0,S=c.length;_<S;_++){var T=c[_].getValue()/x.sum*a;c[_].setLayout({area:T})}return d&&(c.length&&t.setLayout({isLeafRoot:!0},!0),c.length=0),t.viewChildren=c,t.setLayout({dataExtent:x.dataExtent},!0),c}function filterByThreshold(t,n,a,s,l){if(!s)return a;for(var u=t.get("visibleMin"),c=l.length,p=c,d=c-1;d>=0;d--){var x=l[s==="asc"?c-d-1:d].getValue();x/a*n<u&&(p=d,a-=x)}return s==="asc"?l.splice(0,c-p):l.splice(p,c-p),a}function sort$1(t,n){return n&&t.sort(function(a,s){var l=n==="asc"?a.getValue()-s.getValue():s.getValue()-a.getValue();return l===0?n==="asc"?a.dataIndex-s.dataIndex:s.dataIndex-a.dataIndex:l}),t}function statistic(t,n,a){for(var s=0,l=0,u=n.length;l<u;l++)s+=n[l].getValue();var c=t.get("visualDimension"),p;return!n||!n.length?p=[NaN,NaN]:c==="value"&&a?(p=[n[n.length-1].getValue(),n[0].getValue()],a==="asc"&&p.reverse()):(p=[1/0,-1/0],each$b(n,function(d){var x=d.getValue(c);x<p[0]&&(p[0]=x),x>p[1]&&(p[1]=x)})),{sum:s,dataExtent:p}}function worst(t,n,a){for(var s=0,l=1/0,u=0,c=void 0,p=t.length;u<p;u++)c=t[u].getLayout().area,c&&(c<l&&(l=c),c>s&&(s=c));var d=t.area*t.area,x=n*n*a;return d?mathMax$3(x*s/d,d/(x*l)):1/0}function position(t,n,a,s,l){var u=n===a.width?0:1,c=1-u,p=["x","y"],d=["width","height"],x=a[p[u]],_=n?t.area/n:0;(l||_>a[d[c]])&&(_=a[d[c]]);for(var S=0,T=t.length;S<T;S++){var A=t[S],R={},D=_?A.getLayout().area/_:0,O=R[d[c]]=mathMax$3(_-2*s,0),F=a[p[u]]+a[d[u]]-x,z=S===T-1||F<D?F:D,j=R[d[u]]=mathMax$3(z-2*s,0);R[p[c]]=a[p[c]]+mathMin$3(s,O/2),R[p[u]]=x+mathMin$3(s,j/2),x+=z,A.setLayout(R,!0)}a[p[c]]+=_,a[d[c]]-=_}function estimateRootSize(t,n,a,s,l){var u=(n||{}).node,c=[s,l];if(!u||u===a)return c;for(var p,d=s*l,x=d*t.option.zoomToNodeRatio;p=u.parentNode;){for(var _=0,S=p.children,T=0,A=S.length;T<A;T++)_+=S[T].getValue();var R=u.getValue();if(R===0)return c;x*=_/R;var D=p.getModel(),O=D.get(PATH_BORDER_WIDTH),F=Math.max(O,getUpperLabelHeight(D));x+=4*O*O+(3*O+F)*Math.pow(x,.5),x>MAX_SAFE_INTEGER&&(x=MAX_SAFE_INTEGER),u=p}x<d&&(x=d);var z=Math.pow(x/d,.5);return[s*z,l*z]}function calculateRootPosition(t,n,a){if(n)return{x:n.x,y:n.y};var s={x:0,y:0};if(!a)return s;var l=a.node,u=l.getLayout();if(!u)return s;for(var c=[u.width/2,u.height/2],p=l;p;){var d=p.getLayout();c[0]+=d.x,c[1]+=d.y,p=p.parentNode}return{x:t.width/2-c[0],y:t.height/2-c[1]}}function prunning(t,n,a,s,l){var u=t.getLayout(),c=a[l],p=c&&c===t;if(!(c&&!p||l===a.length&&t!==s)){t.setLayout({isInView:!0,invisible:!p&&!n.intersect(u),isAboveViewRoot:p},!0);var d=new BoundingRect(n.x-u.x,n.y-u.y,n.width,n.height);each$b(t.viewChildren||[],function(x){prunning(x,d,a,s,l+1)})}}function getUpperLabelHeight(t){return t.get(PATH_UPPER_LABEL_SHOW)?t.get(PATH_UPPER_LABEL_HEIGHT):0}function install$G(t){t.registerSeriesModel(TreemapSeriesModel),t.registerChartView(TreemapView),t.registerVisual(treemapVisual),t.registerLayout(treemapLayout),installTreemapAction(t)}function categoryFilter(t){var n=t.findComponents({mainType:"legend"});!n||!n.length||t.eachSeriesByType("graph",function(a){var s=a.getCategoriesData(),l=a.getGraph(),u=l.data,c=s.mapArray(s.getName);u.filterSelf(function(p){var d=u.getItemModel(p),x=d.getShallow("category");if(x!=null){isNumber(x)&&(x=c[x]);for(var _=0;_<n.length;_++)if(!n[_].isSelected(x))return!1}return!0})})}function categoryVisual(t){var n={};t.eachSeriesByType("graph",function(a){var s=a.getCategoriesData(),l=a.getData(),u={};s.each(function(c){var p=s.getName(c);u["ec-"+p]=c;var d=s.getItemModel(c),x=d.getModel("itemStyle").getItemStyle();x.fill||(x.fill=a.getColorFromPalette(p,n)),s.setItemVisual(c,"style",x);for(var _=["symbol","symbolSize","symbolKeepAspect"],S=0;S<_.length;S++){var T=d.getShallow(_[S],!0);T!=null&&s.setItemVisual(c,_[S],T)}}),s.count()&&l.each(function(c){var p=l.getItemModel(c),d=p.getShallow("category");if(d!=null){isString$1(d)&&(d=u["ec-"+d]);var x=s.getItemVisual(d,"style"),_=l.ensureUniqueItemVisual(c,"style");extend(_,x);for(var S=["symbol","symbolSize","symbolKeepAspect"],T=0;T<S.length;T++)l.setItemVisual(c,S[T],s.getItemVisual(d,S[T]))}})})}function normalize$1(t){return t instanceof Array||(t=[t,t]),t}function graphEdgeVisual(t){t.eachSeriesByType("graph",function(n){var a=n.getGraph(),s=n.getEdgeData(),l=normalize$1(n.get("edgeSymbol")),u=normalize$1(n.get("edgeSymbolSize"));s.setVisual("fromSymbol",l&&l[0]),s.setVisual("toSymbol",l&&l[1]),s.setVisual("fromSymbolSize",u&&u[0]),s.setVisual("toSymbolSize",u&&u[1]),s.setVisual("style",n.getModel("lineStyle").getLineStyle()),s.each(function(c){var p=s.getItemModel(c),d=a.getEdgeByIndex(c),x=normalize$1(p.getShallow("symbol",!0)),_=normalize$1(p.getShallow("symbolSize",!0)),S=p.getModel("lineStyle").getLineStyle(),T=s.ensureUniqueItemVisual(c,"style");switch(extend(T,S),T.stroke){case"source":{var A=d.node1.getVisual("style");T.stroke=A&&A.fill;break}case"target":{var A=d.node2.getVisual("style");T.stroke=A&&A.fill;break}}x[0]&&d.setVisual("fromSymbol",x[0]),x[1]&&d.setVisual("toSymbol",x[1]),_[0]&&d.setVisual("fromSymbolSize",_[0]),_[1]&&d.setVisual("toSymbolSize",_[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(t){return t.get("autoCurveness")||null},createCurveness=function(t,n){var a=getAutoCurvenessParams(t),s=20,l=[];if(isNumber(a))s=a;else if(isArray$1(a)){t.__curvenessList=a;return}n>s&&(s=n);var u=s%2?s+2:s+3;l=[];for(var c=0;c<u;c++)l.push((c%2?c+1:c)/10*(c%2?-1:1));t.__curvenessList=l},getKeyOfEdges=function(t,n,a){var s=[t.id,t.dataIndex].join("."),l=[n.id,n.dataIndex].join(".");return[a.uid,s,l].join(KEY_DELIMITER)},getOppositeKey=function(t){var n=t.split(KEY_DELIMITER);return[n[0],n[2],n[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(t,n){var a=getKeyOfEdges(t.node1,t.node2,n);return n.__edgeMap[a]},getTotalLengthBetweenNodes=function(t,n){var a=getEdgeMapLengthWithKey(getKeyOfEdges(t.node1,t.node2,n),n),s=getEdgeMapLengthWithKey(getKeyOfEdges(t.node2,t.node1,n),n);return a+s},getEdgeMapLengthWithKey=function(t,n){var a=n.__edgeMap;return a[t]?a[t].length:0};function initCurvenessList(t){getAutoCurvenessParams(t)&&(t.__curvenessList=[],t.__edgeMap={},createCurveness(t))}function createEdgeMapForCurveness(t,n,a,s){if(getAutoCurvenessParams(a)){var l=getKeyOfEdges(t,n,a),u=a.__edgeMap,c=u[getOppositeKey(l)];u[l]&&!c?u[l].isForward=!0:c&&u[l]&&(c.isForward=!0,u[l].isForward=!1),u[l]=u[l]||[],u[l].push(s)}}function getCurvenessForEdge(t,n,a,s){var l=getAutoCurvenessParams(n),u=isArray$1(l);if(!l)return null;var c=getEdgeFromMap(t,n);if(!c)return null;for(var p=-1,d=0;d<c.length;d++)if(c[d]===a){p=d;break}var x=getTotalLengthBetweenNodes(t,n);createCurveness(n,x),t.lineStyle=t.lineStyle||{};var _=getKeyOfEdges(t.node1,t.node2,n),S=n.__curvenessList,T=u||x%2?0:1;if(c.isForward)return S[T+p];var A=getOppositeKey(_),R=getEdgeMapLengthWithKey(A,n),D=S[p+R+T];return s?u?l&&l[0]===0?(R+T)%2?D:-D:((R%2?0:1)+T)%2?D:-D:(R+T)%2?D:-D:S[p+R+T]}function simpleLayout(t){var n=t.coordinateSystem;if(!(n&&n.type!=="view")){var a=t.getGraph();a.eachNode(function(s){var l=s.getModel();s.setLayout([+l.get("x"),+l.get("y")])}),simpleLayoutEdge(a,t)}}function simpleLayoutEdge(t,n){t.eachEdge(function(a,s){var l=retrieve3(a.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(a,n,s,!0),0),u=clone$3(a.node1.getLayout()),c=clone$3(a.node2.getLayout()),p=[u,c];+l&&p.push([(u[0]+c[0])/2-(u[1]-c[1])*l,(u[1]+c[1])/2-(c[0]-u[0])*l]),a.setLayout(p)})}function graphSimpleLayout(t,n){t.eachSeriesByType("graph",function(a){var s=a.get("layout"),l=a.coordinateSystem;if(l&&l.type!=="view"){var u=a.getData(),c=[];each$f(l.dimensions,function(T){c=c.concat(u.mapDimensionsAll(T))});for(var p=0;p<u.count();p++){for(var d=[],x=!1,_=0;_<c.length;_++){var S=u.get(c[_],p);isNaN(S)||(x=!0),d.push(S)}x?u.setItemLayout(p,l.dataToPoint(d)):u.setItemLayout(p,[NaN,NaN])}simpleLayoutEdge(u.graph,a)}else(!s||s==="none")&&simpleLayout(a)})}function getNodeGlobalScale(t){var n=t.coordinateSystem;if(n.type!=="view")return 1;var a=t.option.nodeScaleRatio,s=n.scaleX,l=n.getZoom(),u=(l-1)*a+1;return u/s}function getSymbolSize(t){var n=t.getVisual("symbolSize");return n instanceof Array&&(n=(n[0]+n[1])/2),+n}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(t,n,a,s){var l=t.coordinateSystem;if(!(l&&l.type!=="view")){var u=l.getBoundingRect(),c=t.getData(),p=c.graph,d=u.width/2+u.x,x=u.height/2+u.y,_=Math.min(u.width,u.height)/2,S=c.count();if(c.setLayout({cx:d,cy:x}),!!S){if(a){var T=l.pointToData(s),A=T[0],R=T[1],D=[A-d,R-x];normalize$3(D,D),scale$2(D,D,_),a.setLayout([d+D[0],x+D[1]],!0);var O=t.get(["circular","rotateLabel"]);rotateNodeLabel(a,O,d,x)}_layoutNodesBasedOn[n](t,p,c,_,d,x,S),p.eachEdge(function(F,z){var j=retrieve3(F.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(F,t,z),0),Z=clone$3(F.node1.getLayout()),W=clone$3(F.node2.getLayout()),J,en=(Z[0]+W[0])/2,tn=(Z[1]+W[1])/2;+j&&(j*=3,J=[d*j+en*(1-j),x*j+tn*(1-j)]),F.setLayout([Z,W,J])})}}}var _layoutNodesBasedOn={value:function(t,n,a,s,l,u,c){var p=0,d=a.getSum("value"),x=Math.PI*2/(d||c);n.eachNode(function(_){var S=_.getValue("value"),T=x*(d?S:1)/2;p+=T,_.setLayout([s*Math.cos(p)+l,s*Math.sin(p)+u]),p+=T})},symbolSize:function(t,n,a,s,l,u,c){var p=0;_symbolRadiansHalf.length=c;var d=getNodeGlobalScale(t);n.eachNode(function(S){var T=getSymbolSize(S);isNaN(T)&&(T=2),T<0&&(T=0),T*=d;var A=Math.asin(T/2/s);isNaN(A)&&(A=PI$2/2),_symbolRadiansHalf[S.dataIndex]=A,p+=A*2});var x=(2*PI$2-p)/c/2,_=0;n.eachNode(function(S){var T=x+_symbolRadiansHalf[S.dataIndex];_+=T,(!S.getLayout()||!S.getLayout().fixed)&&S.setLayout([s*Math.cos(_)+l,s*Math.sin(_)+u]),_+=T})}};function rotateNodeLabel(t,n,a,s){var l=t.getGraphicEl();if(l){var u=t.getModel(),c=u.get(["label","rotate"])||0,p=l.getSymbolPath();if(n){var d=t.getLayout(),x=Math.atan2(d[1]-s,d[0]-a);x<0&&(x=Math.PI*2+x);var _=d[0]<a;_&&(x=x-Math.PI);var S=_?"left":"right";p.setTextConfig({rotation:-x,position:S,origin:"center"});var T=p.ensureState("emphasis");extend(T.textConfig||(T.textConfig={}),{position:S})}else p.setTextConfig({rotation:c*=Math.PI/180})}}function graphCircularLayout(t){t.eachSeriesByType("graph",function(n){n.get("layout")==="circular"&&circularLayout(n,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(t,n,a){for(var s=t,l=n,u=a.rect,c=u.width,p=u.height,d=[u.x+c/2,u.y+p/2],x=a.gravity==null?.1:a.gravity,_=0;_<s.length;_++){var S=s[_];S.p||(S.p=create$2(c*(Math.random()-.5)+d[0],p*(Math.random()-.5)+d[1])),S.pp=clone$3(S.p),S.edges=null}var T=a.friction==null?.6:a.friction,A=T,R,D;return{warmUp:function(){A=T*.8},setFixed:function(O){s[O].fixed=!0},setUnfixed:function(O){s[O].fixed=!1},beforeStep:function(O){R=O},afterStep:function(O){D=O},step:function(O){R&&R(s,l);for(var F=[],z=s.length,j=0;j<l.length;j++){var Z=l[j];if(!Z.ignoreForceLayout){var W=Z.n1,J=Z.n2;sub(F,J.p,W.p);var en=len(F)-Z.d,tn=J.w/(W.w+J.w);isNaN(tn)&&(tn=0),normalize$3(F,F),!W.fixed&&scaleAndAdd(W.p,W.p,F,tn*en*A),!J.fixed&&scaleAndAdd(J.p,J.p,F,-(1-tn)*en*A)}}for(var j=0;j<z;j++){var Ct=s[j];Ct.fixed||(sub(F,d,Ct.p),scaleAndAdd(Ct.p,Ct.p,F,x*A))}for(var j=0;j<z;j++)for(var W=s[j],Q=j+1;Q<z;Q++){var J=s[Q];sub(F,J.p,W.p);var en=len(F);en===0&&(set$1(F,Math.random()-.5,Math.random()-.5),en=1);var on=(W.rep+J.rep)/en/en;!W.fixed&&scaleAndAdd(W.pp,W.pp,F,on),!J.fixed&&scaleAndAdd(J.pp,J.pp,F,-on)}for(var gn=[],j=0;j<z;j++){var Ct=s[j];Ct.fixed||(sub(gn,Ct.p,Ct.pp),scaleAndAdd(Ct.p,Ct.p,gn,A),copy$1(Ct.pp,Ct.p))}A=A*.992;var In=A<.01;D&&D(s,l,In),O&&O(In)}}}function graphForceLayout(t){t.eachSeriesByType("graph",function(n){var a=n.coordinateSystem;if(!(a&&a.type!=="view"))if(n.get("layout")==="force"){var s=n.preservedPoints||{},l=n.getGraph(),u=l.data,c=l.edgeData,p=n.getModel("force"),d=p.get("initLayout");n.preservedPoints?u.each(function(j){var Z=u.getId(j);u.setItemLayout(j,s[Z]||[NaN,NaN])}):!d||d==="none"?simpleLayout(n):d==="circular"&&circularLayout(n,"value");var x=u.getDataExtent("value"),_=c.getDataExtent("value"),S=p.get("repulsion"),T=p.get("edgeLength"),A=isArray$1(S)?S:[S,S],R=isArray$1(T)?T:[T,T];R=[R[1],R[0]];var D=u.mapArray("value",function(j,Z){var W=u.getItemLayout(Z),J=linearMap$2(j,x,A);return isNaN(J)&&(J=(A[0]+A[1])/2),{w:J,rep:J,fixed:u.getItemModel(Z).get("fixed"),p:!W||isNaN(W[0])||isNaN(W[1])?null:W}}),O=c.mapArray("value",function(j,Z){var W=l.getEdgeByIndex(Z),J=linearMap$2(j,_,R);isNaN(J)&&(J=(R[0]+R[1])/2);var en=W.getModel(),tn=retrieve3(W.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(W,n,Z,!0),0);return{n1:D[W.node1.dataIndex],n2:D[W.node2.dataIndex],d:J,curveness:tn,ignoreForceLayout:en.get("ignoreForceLayout")}}),F=a.getBoundingRect(),z=forceLayout(D,O,{rect:F,gravity:p.get("gravity"),friction:p.get("friction")});z.beforeStep(function(j,Z){for(var W=0,J=j.length;W<J;W++)j[W].fixed&&copy$1(j[W].p,l.getNodeByIndex(W).getLayout())}),z.afterStep(function(j,Z,W){for(var J=0,en=j.length;J<en;J++)j[J].fixed||l.getNodeByIndex(J).setLayout(j[J].p),s[u.getId(J)]=j[J].p;for(var J=0,en=Z.length;J<en;J++){var tn=Z[J],Ct=l.getEdgeByIndex(J),Q=tn.n1.p,on=tn.n2.p,gn=Ct.getLayout();gn=gn?gn.slice():[],gn[0]=gn[0]||[],gn[1]=gn[1]||[],copy$1(gn[0],Q),copy$1(gn[1],on),+tn.curveness&&(gn[2]=[(Q[0]+on[0])/2-(Q[1]-on[1])*tn.curveness,(Q[1]+on[1])/2-(on[0]-Q[0])*tn.curveness]),Ct.setLayout(gn)}}),n.forceLayout=z,n.preservedPoints=s,z.step()}else n.forceLayout=null})}function getViewRect$3(t,n,a){var s=extend(t.getBoxLayoutParams(),{aspect:a});return getLayoutRect(s,{width:n.getWidth(),height:n.getHeight()})}function createViewCoordSys(t,n){var a=[];return t.eachSeriesByType("graph",function(s){var l=s.get("coordinateSystem");if(!l||l==="view"){var u=s.getData(),c=u.mapArray(function(O){var F=u.getItemModel(O);return[+F.get("x"),+F.get("y")]}),p=[],d=[];fromPoints(c,p,d),d[0]-p[0]===0&&(d[0]+=1,p[0]-=1),d[1]-p[1]===0&&(d[1]+=1,p[1]-=1);var x=(d[0]-p[0])/(d[1]-p[1]),_=getViewRect$3(s,n,x);isNaN(x)&&(p=[_.x,_.y],d=[_.x+_.width,_.y+_.height]);var S=d[0]-p[0],T=d[1]-p[1],A=_.width,R=_.height,D=s.coordinateSystem=new View;D.zoomLimit=s.get("scaleLimit"),D.setBoundingRect(p[0],p[1],S,T),D.setViewRect(_.x,_.y,A,R),D.setCenter(s.get("center"),n),D.setZoom(s.get("zoom")),a.push(D)}}),a}var straightLineProto=Line$1.prototype,bezierCurveProto=BezierCurve.prototype,StraightLineShape=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}();(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(StraightLineShape);function isStraightLine(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var ECLinePath=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="ec-line",s}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new StraightLineShape},n.prototype.buildPath=function(a,s){isStraightLine(s)?straightLineProto.buildPath.call(this,a,s):bezierCurveProto.buildPath.call(this,a,s)},n.prototype.pointAt=function(a){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,a):bezierCurveProto.pointAt.call(this,a)},n.prototype.tangentAt=function(a){var s=this.shape,l=isStraightLine(s)?[s.x2-s.x1,s.y2-s.y1]:bezierCurveProto.tangentAt.call(this,a);return normalize$3(l,l)},n}(Path),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(t){return"_"+t+"Type"}function makeSymbolTypeValue(t,n,a){var s=n.getItemVisual(a,t);if(!s||s==="none")return s;var l=n.getItemVisual(a,t+"Size"),u=n.getItemVisual(a,t+"Rotate"),c=n.getItemVisual(a,t+"Offset"),p=n.getItemVisual(a,t+"KeepAspect"),d=normalizeSymbolSize(l),x=normalizeSymbolOffset(c||0,d);return s+d+x+(u||"")+(p||"")}function createSymbol(t,n,a){var s=n.getItemVisual(a,t);if(!(!s||s==="none")){var l=n.getItemVisual(a,t+"Size"),u=n.getItemVisual(a,t+"Rotate"),c=n.getItemVisual(a,t+"Offset"),p=n.getItemVisual(a,t+"KeepAspect"),d=normalizeSymbolSize(l),x=normalizeSymbolOffset(c||0,d),_=createSymbol$1(s,-d[0]/2+x[0],-d[1]/2+x[1],d[0],d[1],null,p);return _.__specifiedRotation=u==null||isNaN(u)?void 0:+u*Math.PI/180||0,_.name=t,_}}function createLine(t){var n=new ECLinePath({name:"line",subPixelOptimize:!0});return setLinePoints(n.shape,t),n}function setLinePoints(t,n){t.x1=n[0][0],t.y1=n[0][1],t.x2=n[1][0],t.y2=n[1][1],t.percent=1;var a=n[2];a?(t.cpx1=a[0],t.cpy1=a[1]):(t.cpx1=NaN,t.cpy1=NaN)}var Line=function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;return u._createLine(a,s,l),u}return n.prototype._createLine=function(a,s,l){var u=a.hostModel,c=a.getItemLayout(s),p=createLine(c);p.shape.percent=0,initProps(p,{shape:{percent:1}},u,s),this.add(p),each$f(SYMBOL_CATEGORIES,function(d){var x=createSymbol(d,a,s);this.add(x),this[makeSymbolTypeKey(d)]=makeSymbolTypeValue(d,a,s)},this),this._updateCommonStl(a,s,l)},n.prototype.updateData=function(a,s,l){var u=a.hostModel,c=this.childOfName("line"),p=a.getItemLayout(s),d={shape:{}};setLinePoints(d.shape,p),updateProps$1(c,d,u,s),each$f(SYMBOL_CATEGORIES,function(x){var _=makeSymbolTypeValue(x,a,s),S=makeSymbolTypeKey(x);if(this[S]!==_){this.remove(this.childOfName(x));var T=createSymbol(x,a,s);this.add(T)}this[S]=_},this),this._updateCommonStl(a,s,l)},n.prototype.getLinePath=function(){return this.childAt(0)},n.prototype._updateCommonStl=function(a,s,l){var u=a.hostModel,c=this.childOfName("line"),p=l&&l.emphasisLineStyle,d=l&&l.blurLineStyle,x=l&&l.selectLineStyle,_=l&&l.labelStatesModels,S=l&&l.emphasisDisabled,T=l&&l.focus,A=l&&l.blurScope;if(!l||a.hasItemOption){var R=a.getItemModel(s),D=R.getModel("emphasis");p=D.getModel("lineStyle").getLineStyle(),d=R.getModel(["blur","lineStyle"]).getLineStyle(),x=R.getModel(["select","lineStyle"]).getLineStyle(),S=D.get("disabled"),T=D.get("focus"),A=D.get("blurScope"),_=getLabelStatesModels(R)}var O=a.getItemVisual(s,"style"),F=O.stroke;c.useStyle(O),c.style.fill=null,c.style.strokeNoScale=!0,c.ensureState("emphasis").style=p,c.ensureState("blur").style=d,c.ensureState("select").style=x,each$f(SYMBOL_CATEGORIES,function(J){var en=this.childOfName(J);if(en){en.setColor(F),en.style.opacity=O.opacity;for(var tn=0;tn<SPECIAL_STATES.length;tn++){var Ct=SPECIAL_STATES[tn],Q=c.getState(Ct);if(Q){var on=Q.style||{},gn=en.ensureState(Ct),In=gn.style||(gn.style={});on.stroke!=null&&(In[en.__isEmptyBrush?"stroke":"fill"]=on.stroke),on.opacity!=null&&(In.opacity=on.opacity)}}en.markRedraw()}},this);var z=u.getRawValue(s);setLabelStyle(this,_,{labelDataIndex:s,labelFetcher:{getFormattedLabel:function(J,en){return u.getFormattedLabel(J,en,a.dataType)}},inheritColor:F||"#000",defaultOpacity:O.opacity,defaultText:(z==null?a.getName(s):isFinite(z)?round$3(z):z)+""});var j=this.getTextContent();if(j){var Z=_.normal;j.__align=j.style.align,j.__verticalAlign=j.style.verticalAlign,j.__position=Z.get("position")||"middle";var W=Z.get("distance");isArray$1(W)||(W=[W,W]),j.__labelDistance=W}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,T,A,S)},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n.prototype.updateLayout=function(a,s){this.setLinePoints(a.getItemLayout(s))},n.prototype.setLinePoints=function(a){var s=this.childOfName("line");setLinePoints(s.shape,a),s.dirty()},n.prototype.beforeUpdate=function(){var a=this,s=a.childOfName("fromSymbol"),l=a.childOfName("toSymbol"),u=a.getTextContent();if(!s&&!l&&(!u||u.ignore))return;for(var c=1,p=this.parent;p;)p.scaleX&&(c/=p.scaleX),p=p.parent;var d=a.childOfName("line");if(!this.__dirty&&!d.__dirty)return;var x=d.shape.percent,_=d.pointAt(0),S=d.pointAt(x),T=sub([],S,_);normalize$3(T,T);function A(Q,on){var gn=Q.__specifiedRotation;if(gn==null){var In=d.tangentAt(on);Q.attr("rotation",(on===1?-1:1)*Math.PI/2-Math.atan2(In[1],In[0]))}else Q.attr("rotation",gn)}if(s&&(s.setPosition(_),A(s,0),s.scaleX=s.scaleY=c*x,s.markRedraw()),l&&(l.setPosition(S),A(l,1),l.scaleX=l.scaleY=c*x,l.markRedraw()),u&&!u.ignore){u.x=u.y=0,u.originX=u.originY=0;var R=void 0,D=void 0,O=u.__labelDistance,F=O[0]*c,z=O[1]*c,j=x/2,Z=d.tangentAt(j),W=[Z[1],-Z[0]],J=d.pointAt(j);W[1]>0&&(W[0]=-W[0],W[1]=-W[1]);var en=Z[0]<0?-1:1;if(u.__position!=="start"&&u.__position!=="end"){var tn=-Math.atan2(Z[1],Z[0]);S[0]<_[0]&&(tn=Math.PI+tn),u.rotation=tn}var Ct=void 0;switch(u.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":Ct=-z,D="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":Ct=z,D="top";break;default:Ct=0,D="middle"}switch(u.__position){case"end":u.x=T[0]*F+S[0],u.y=T[1]*z+S[1],R=T[0]>.8?"left":T[0]<-.8?"right":"center",D=T[1]>.8?"top":T[1]<-.8?"bottom":"middle";break;case"start":u.x=-T[0]*F+_[0],u.y=-T[1]*z+_[1],R=T[0]>.8?"right":T[0]<-.8?"left":"center",D=T[1]>.8?"bottom":T[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":u.x=F*en+_[0],u.y=_[1]+Ct,R=Z[0]<0?"right":"left",u.originX=-F*en,u.originY=-Ct;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":u.x=J[0],u.y=J[1]+Ct,R="center",u.originY=-Ct;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":u.x=-F*en+S[0],u.y=S[1]+Ct,R=Z[0]>=0?"right":"left",u.originX=F*en,u.originY=-Ct;break}u.scaleX=u.scaleY=c,u.setStyle({verticalAlign:u.__verticalAlign||D,align:u.__align||R})}},n}(Group$3),LineDraw=function(){function t(n){this.group=new Group$3,this._LineCtor=n||Line}return t.prototype.updateData=function(n){var a=this;this._progressiveEls=null;var s=this,l=s.group,u=s._lineData;s._lineData=n,u||l.removeAll();var c=makeSeriesScope$1(n);n.diff(u).add(function(p){a._doAdd(n,p,c)}).update(function(p,d){a._doUpdate(u,n,d,p,c)}).remove(function(p){l.remove(u.getItemGraphicEl(p))}).execute()},t.prototype.updateLayout=function(){var n=this._lineData;n&&n.eachItemGraphicEl(function(a,s){a.updateLayout(n,s)},this)},t.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=makeSeriesScope$1(n),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(n,a){this._progressiveEls=[];function s(p){!p.isGroup&&!isEffectObject(p)&&(p.incremental=!0,p.ensureState("emphasis").hoverLayer=!0)}for(var l=n.start;l<n.end;l++){var u=a.getItemLayout(l);if(lineNeedsDraw(u)){var c=new this._LineCtor(a,l,this._seriesScope);c.traverse(s),this.group.add(c),a.setItemGraphicEl(l,c),this._progressiveEls.push(c)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},t.prototype._doAdd=function(n,a,s){var l=n.getItemLayout(a);if(lineNeedsDraw(l)){var u=new this._LineCtor(n,a,s);n.setItemGraphicEl(a,u),this.group.add(u)}},t.prototype._doUpdate=function(n,a,s,l,u){var c=n.getItemGraphicEl(s);if(!lineNeedsDraw(a.getItemLayout(l))){this.group.remove(c);return}c?c.updateData(a,l,u):c=new this._LineCtor(a,l,u),a.setItemGraphicEl(l,c),this.group.add(c)},t}();function isEffectObject(t){return t.animators&&t.animators.length>0}function makeSeriesScope$1(t){var n=t.hostModel,a=n.getModel("emphasis");return{lineStyle:n.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:n.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:n.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:getLabelStatesModels(n)}}function isPointNaN(t){return isNaN(t[0])||isNaN(t[1])}function lineNeedsDraw(t){return t&&!isPointNaN(t[0])&&!isPointNaN(t[1])}var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(t,n,a){for(var s=t[0],l=t[1],u=t[2],c=1/0,p,d=a*a,x=.1,_=.1;_<=.9;_+=.1){v1[0]=quadraticAt(s[0],l[0],u[0],_),v1[1]=quadraticAt(s[1],l[1],u[1],_);var S=mathAbs(v2DistSquare(v1,n)-d);S<c&&(c=S,p=_)}for(var T=0;T<32;T++){var A=p+x;v2[0]=quadraticAt(s[0],l[0],u[0],p),v2[1]=quadraticAt(s[1],l[1],u[1],p),v3[0]=quadraticAt(s[0],l[0],u[0],A),v3[1]=quadraticAt(s[1],l[1],u[1],A);var S=v2DistSquare(v2,n)-d;if(mathAbs(S)<.01)break;var R=v2DistSquare(v3,n)-d;x/=2,S<0?R>=0?p=p+x:p=p-x:R>=0?p=p-x:p=p+x}return p}function adjustEdge(t,n){var a=[],s=quadraticSubdivide,l=[[],[],[]],u=[[],[]],c=[];n/=2,t.eachEdge(function(p,d){var x=p.getLayout(),_=p.getVisual("fromSymbol"),S=p.getVisual("toSymbol");x.__original||(x.__original=[clone$3(x[0]),clone$3(x[1])],x[2]&&x.__original.push(clone$3(x[2])));var T=x.__original;if(x[2]!=null){if(copy$1(l[0],T[0]),copy$1(l[1],T[2]),copy$1(l[2],T[1]),_&&_!=="none"){var A=getSymbolSize(p.node1),R=intersectCurveCircle(l,T[0],A*n);s(l[0][0],l[1][0],l[2][0],R,a),l[0][0]=a[3],l[1][0]=a[4],s(l[0][1],l[1][1],l[2][1],R,a),l[0][1]=a[3],l[1][1]=a[4]}if(S&&S!=="none"){var A=getSymbolSize(p.node2),R=intersectCurveCircle(l,T[1],A*n);s(l[0][0],l[1][0],l[2][0],R,a),l[1][0]=a[1],l[2][0]=a[2],s(l[0][1],l[1][1],l[2][1],R,a),l[1][1]=a[1],l[2][1]=a[2]}copy$1(x[0],l[0]),copy$1(x[1],l[2]),copy$1(x[2],l[1])}else{if(copy$1(u[0],T[0]),copy$1(u[1],T[1]),sub(c,u[1],u[0]),normalize$3(c,c),_&&_!=="none"){var A=getSymbolSize(p.node1);scaleAndAdd$1(u[0],u[0],c,A*n)}if(S&&S!=="none"){var A=getSymbolSize(p.node2);scaleAndAdd$1(u[1],u[1],c,-A*n)}copy$1(x[0],u[0]),copy$1(x[1],u[1])}})}function isViewCoordSys(t){return t.type==="view"}var GraphView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){var l=new SymbolDraw,u=new LineDraw,c=this.group;this._controller=new RoamController(s.getZr()),this._controllerHost={target:c},c.add(l.group),c.add(u.group),this._symbolDraw=l,this._lineDraw=u,this._firstRender=!0},n.prototype.render=function(a,s,l){var u=this,c=a.coordinateSystem;this._model=a;var p=this._symbolDraw,d=this._lineDraw,x=this.group;if(isViewCoordSys(c)){var _={x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY};this._firstRender?x.attr(_):updateProps$1(x,_,a)}adjustEdge(a.getGraph(),getNodeGlobalScale(a));var S=a.getData();p.updateData(S);var T=a.getEdgeData();d.updateData(T),this._updateNodeAndLinkScale(),this._updateController(a,s,l),clearTimeout(this._layoutTimeout);var A=a.forceLayout,R=a.get(["force","layoutAnimation"]);A&&this._startForceLayoutIteration(A,R);var D=a.get("layout");S.graph.eachNode(function(j){var Z=j.dataIndex,W=j.getGraphicEl(),J=j.getModel();if(W){W.off("drag").off("dragend");var en=J.get("draggable");en&&W.on("drag",function(Ct){switch(D){case"force":A.warmUp(),!u._layouting&&u._startForceLayoutIteration(A,R),A.setFixed(Z),S.setItemLayout(Z,[W.x,W.y]);break;case"circular":S.setItemLayout(Z,[W.x,W.y]),j.setLayout({fixed:!0},!0),circularLayout(a,"symbolSize",j,[Ct.offsetX,Ct.offsetY]),u.updateLayout(a);break;case"none":default:S.setItemLayout(Z,[W.x,W.y]),simpleLayoutEdge(a.getGraph(),a),u.updateLayout(a);break}}).on("dragend",function(){A&&A.setUnfixed(Z)}),W.setDraggable(en,!!J.get("cursor"));var tn=J.get(["emphasis","focus"]);tn==="adjacency"&&(getECData(W).focus=j.getAdjacentDataIndices())}}),S.graph.eachEdge(function(j){var Z=j.getGraphicEl(),W=j.getModel().get(["emphasis","focus"]);Z&&W==="adjacency"&&(getECData(Z).focus={edge:[j.dataIndex],node:[j.node1.dataIndex,j.node2.dataIndex]})});var O=a.get("layout")==="circular"&&a.get(["circular","rotateLabel"]),F=S.getLayout("cx"),z=S.getLayout("cy");S.graph.eachNode(function(j){rotateNodeLabel(j,O,F,z)}),this._firstRender=!1},n.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype._startForceLayoutIteration=function(a,s){var l=this;(function u(){a.step(function(c){l.updateLayout(l._model),(l._layouting=!c)&&(s?l._layoutTimeout=setTimeout(u,16):u())})})()},n.prototype._updateController=function(a,s,l){var u=this,c=this._controller,p=this._controllerHost,d=this.group;if(c.setPointerChecker(function(x,_,S){var T=d.getBoundingRect();return T.applyTransform(d.transform),T.contain(_,S)&&!onIrrelevantElement(x,l,a)}),!isViewCoordSys(a.coordinateSystem)){c.disable();return}c.enable(a.get("roam")),p.zoomLimit=a.get("scaleLimit"),p.zoom=a.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(x){updateViewOnPan(p,x.dx,x.dy),l.dispatchAction({seriesId:a.id,type:"graphRoam",dx:x.dx,dy:x.dy})}).on("zoom",function(x){updateViewOnZoom(p,x.scale,x.originX,x.originY),l.dispatchAction({seriesId:a.id,type:"graphRoam",zoom:x.scale,originX:x.originX,originY:x.originY}),u._updateNodeAndLinkScale(),adjustEdge(a.getGraph(),getNodeGlobalScale(a)),u._lineDraw.updateLayout(),l.updateLabelLayout()})},n.prototype._updateNodeAndLinkScale=function(){var a=this._model,s=a.getData(),l=getNodeGlobalScale(a);s.eachItemGraphicEl(function(u,c){u&&u.setSymbolScale(l)})},n.prototype.updateLayout=function(a){adjustEdge(a.getGraph(),getNodeGlobalScale(a)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},n.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},n.type="graph",n}(ChartView);function generateNodeKey(t){return"_EC_"+t}var Graph=function(){function t(n){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=n||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(n,a){n=n==null?""+a:""+n;var s=this._nodesMap;if(!s[generateNodeKey(n)]){var l=new GraphNode(n,a);return l.hostGraph=this,this.nodes.push(l),s[generateNodeKey(n)]=l,l}},t.prototype.getNodeByIndex=function(n){var a=this.data.getRawIndex(n);return this.nodes[a]},t.prototype.getNodeById=function(n){return this._nodesMap[generateNodeKey(n)]},t.prototype.addEdge=function(n,a,s){var l=this._nodesMap,u=this._edgesMap;if(isNumber(n)&&(n=this.nodes[n]),isNumber(a)&&(a=this.nodes[a]),n instanceof GraphNode||(n=l[generateNodeKey(n)]),a instanceof GraphNode||(a=l[generateNodeKey(a)]),!(!n||!a)){var c=n.id+"-"+a.id,p=new GraphEdge(n,a,s);return p.hostGraph=this,this._directed&&(n.outEdges.push(p),a.inEdges.push(p)),n.edges.push(p),n!==a&&a.edges.push(p),this.edges.push(p),u[c]=p,p}},t.prototype.getEdgeByIndex=function(n){var a=this.edgeData.getRawIndex(n);return this.edges[a]},t.prototype.getEdge=function(n,a){n instanceof GraphNode&&(n=n.id),a instanceof GraphNode&&(a=a.id);var s=this._edgesMap;return this._directed?s[n+"-"+a]:s[n+"-"+a]||s[a+"-"+n]},t.prototype.eachNode=function(n,a){for(var s=this.nodes,l=s.length,u=0;u<l;u++)s[u].dataIndex>=0&&n.call(a,s[u],u)},t.prototype.eachEdge=function(n,a){for(var s=this.edges,l=s.length,u=0;u<l;u++)s[u].dataIndex>=0&&s[u].node1.dataIndex>=0&&s[u].node2.dataIndex>=0&&n.call(a,s[u],u)},t.prototype.breadthFirstTraverse=function(n,a,s,l){if(a instanceof GraphNode||(a=this._nodesMap[generateNodeKey(a)]),!!a){for(var u=s==="out"?"outEdges":s==="in"?"inEdges":"edges",c=0;c<this.nodes.length;c++)this.nodes[c].__visited=!1;if(!n.call(l,a,null))for(var p=[a];p.length;)for(var d=p.shift(),x=d[u],c=0;c<x.length;c++){var _=x[c],S=_.node1===d?_.node2:_.node1;if(!S.__visited){if(n.call(l,S,d))return;p.push(S),S.__visited=!0}}}},t.prototype.update=function(){for(var n=this.data,a=this.edgeData,s=this.nodes,l=this.edges,u=0,c=s.length;u<c;u++)s[u].dataIndex=-1;for(var u=0,c=n.count();u<c;u++)s[n.getRawIndex(u)].dataIndex=u;a.filterSelf(function(p){var d=l[a.getRawIndex(p)];return d.node1.dataIndex>=0&&d.node2.dataIndex>=0});for(var u=0,c=l.length;u<c;u++)l[u].dataIndex=-1;for(var u=0,c=a.count();u<c;u++)l[a.getRawIndex(u)].dataIndex=u},t.prototype.clone=function(){for(var n=new t(this._directed),a=this.nodes,s=this.edges,l=0;l<a.length;l++)n.addNode(a[l].id,a[l].dataIndex);for(var l=0;l<s.length;l++){var u=s[l];n.addEdge(u.node1.id,u.node2.id,u.dataIndex)}return n},t}(),GraphNode=function(){function t(n,a){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=n??"",this.dataIndex=a??-1}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(n){if(!(this.dataIndex<0)){var a=this.hostGraph,s=a.data.getItemModel(this.dataIndex);return s.getModel(n)}},t.prototype.getAdjacentDataIndices=function(){for(var n={edge:[],node:[]},a=0;a<this.edges.length;a++){var s=this.edges[a];s.dataIndex<0||(n.edge.push(s.dataIndex),n.node.push(s.node1.dataIndex,s.node2.dataIndex))}return n},t.prototype.getTrajectoryDataIndices=function(){for(var n=createHashMap(),a=createHashMap(),s=0;s<this.edges.length;s++){var l=this.edges[s];if(!(l.dataIndex<0)){n.set(l.dataIndex,!0);for(var u=[l.node1],c=[l.node2],p=0;p<u.length;){var d=u[p];p++,a.set(d.dataIndex,!0);for(var x=0;x<d.inEdges.length;x++)n.set(d.inEdges[x].dataIndex,!0),u.push(d.inEdges[x].node1)}for(p=0;p<c.length;){var _=c[p];p++,a.set(_.dataIndex,!0);for(var x=0;x<_.outEdges.length;x++)n.set(_.outEdges[x].dataIndex,!0),c.push(_.outEdges[x].node2)}}}return{edge:n.keys(),node:a.keys()}},t}(),GraphEdge=function(){function t(n,a,s){this.dataIndex=-1,this.node1=n,this.node2=a,this.dataIndex=s??-1}return t.prototype.getModel=function(n){if(!(this.dataIndex<0)){var a=this.hostGraph,s=a.edgeData.getItemModel(this.dataIndex);return s.getModel(n)}},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var n=createHashMap(),a=createHashMap();n.set(this.dataIndex,!0);for(var s=[this.node1],l=[this.node2],u=0;u<s.length;){var c=s[u];u++,a.set(c.dataIndex,!0);for(var p=0;p<c.inEdges.length;p++)n.set(c.inEdges[p].dataIndex,!0),s.push(c.inEdges[p].node1)}for(u=0;u<l.length;){var d=l[u];u++,a.set(d.dataIndex,!0);for(var p=0;p<d.outEdges.length;p++)n.set(d.outEdges[p].dataIndex,!0),l.push(d.outEdges[p].node2)}return{edge:n.keys(),node:a.keys()}},t}();function createGraphDataProxyMixin(t,n){return{getValue:function(a){var s=this[t][n];return s.getStore().get(s.getDimensionIndex(a||"value"),this.dataIndex)},setVisual:function(a,s){this.dataIndex>=0&&this[t][n].setItemVisual(this.dataIndex,a,s)},getVisual:function(a){return this[t][n].getItemVisual(this.dataIndex,a)},setLayout:function(a,s){this.dataIndex>=0&&this[t][n].setItemLayout(this.dataIndex,a,s)},getLayout:function(){return this[t][n].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][n].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][n].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));function createGraphFromNodeEdge(t,n,a,s,l){for(var u=new Graph(s),c=0;c<t.length;c++)u.addNode(retrieve(t[c].id,t[c].name,c),c);for(var p=[],d=[],x=0,c=0;c<n.length;c++){var _=n[c],S=_.source,T=_.target;u.addEdge(S,T,x)&&(d.push(_),p.push(retrieve(convertOptionIdName(_.id,null),S+" > "+T)),x++)}var A=a.get("coordinateSystem"),R;if(A==="cartesian2d"||A==="polar")R=createSeriesData(t,a);else{var D=CoordinateSystemManager.get(A),O=D?D.dimensions||[]:[];indexOf(O,"value")<0&&O.concat(["value"]);var F=prepareSeriesDataSchema(t,{coordDimensions:O,encodeDefine:a.getEncode()}).dimensions;R=new SeriesData(F,a),R.initData(t)}var z=new SeriesData(["value"],a);return z.initData(d,p),l&&l(R,z),linkSeriesData({mainData:R,struct:u,structAttr:"graph",datas:{node:R,edge:z},datasAttr:{node:"data",edge:"edgeData"}}),u.update(),u}var GraphSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments);var s=this;function l(){return s._categoriesData}this.legendVisualProvider=new LegendVisualProvider(l,l),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},n.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},n.prototype.mergeDefaultAndTheme=function(a){t.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(a,"edgeLabel",["show"])},n.prototype.getInitialData=function(a,s){var l=a.edges||a.links||[],u=a.data||a.nodes||[],c=this;if(u&&l){initCurvenessList(this);var p=createGraphFromNodeEdge(u,l,this,!0,d);return each$f(p.edges,function(x){createEdgeMapForCurveness(x.node1,x.node2,this,x.dataIndex)},this),p.data}function d(x,_){x.wrapMethod("getItemModel",function(R){var D=c._categoriesModels,O=R.getShallow("category"),F=D[O];return F&&(F.parentModel=R.parentModel,R.parentModel=F),R});var S=Model.prototype.getModel;function T(R,D){var O=S.call(this,R,D);return O.resolveParentPath=A,O}_.wrapMethod("getItemModel",function(R){return R.resolveParentPath=A,R.getModel=T,R});function A(R){if(R&&(R[0]==="label"||R[1]==="label")){var D=R.slice();return R[0]==="label"?D[0]="edgeLabel":R[1]==="label"&&(D[1]="edgeLabel"),D}return R}}},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.getCategoriesData=function(){return this._categoriesData},n.prototype.formatTooltip=function(a,s,l){if(l==="edge"){var u=this.getData(),c=this.getDataParams(a,l),p=u.graph.getEdgeByIndex(a),d=u.getName(p.node1.dataIndex),x=u.getName(p.node2.dataIndex),_=[];return d!=null&&_.push(d),x!=null&&_.push(x),createTooltipMarkup("nameValue",{name:_.join(" > "),value:c.value,noValue:c.value==null})}var S=defaultSeriesFormatTooltip({series:this,dataIndex:a,multipleSeries:s});return S},n.prototype._updateCategoriesData=function(){var a=map$1(this.option.categories||[],function(l){return l.value!=null?l:extend({value:0},l)}),s=new SeriesData(["value"],this);s.initData(a),this._categoriesData=s,this._categoriesModels=s.mapArray(function(l){return s.getItemModel(l)})},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},n.type="series.graph",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n}(SeriesModel),actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$F(t){t.registerChartView(GraphView),t.registerSeriesModel(GraphSeriesModel),t.registerProcessor(categoryFilter),t.registerVisual(categoryVisual),t.registerVisual(graphEdgeVisual),t.registerLayout(graphSimpleLayout),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),t.registerLayout(graphForceLayout),t.registerCoordinateSystem("graphView",{dimensions:View.dimensions,create:createViewCoordSys}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),t.registerAction(actionInfo$1,function(n,a,s){a.eachComponent({mainType:"series",query:n},function(l){var u=l.coordinateSystem,c=updateCenterAndZoom(u,n,void 0,s);l.setCenter&&l.setCenter(c.center),l.setZoom&&l.setZoom(c.zoom)})})}var PointerShape=function(){function t(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return t}(),PointerPath=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="pointer",s}return n.prototype.getDefaultShape=function(){return new PointerShape},n.prototype.buildPath=function(a,s){var l=Math.cos,u=Math.sin,c=s.r,p=s.width,d=s.angle,x=s.x-l(d)*p*(p>=c/3?1:2),_=s.y-u(d)*p*(p>=c/3?1:2);d=s.angle-Math.PI/2,a.moveTo(x,_),a.lineTo(s.x+l(d)*p,s.y+u(d)*p),a.lineTo(s.x+l(s.angle)*c,s.y+u(s.angle)*c),a.lineTo(s.x-l(d)*p,s.y-u(d)*p),a.lineTo(x,_)},n}(Path);function parsePosition(t,n){var a=t.get("center"),s=n.getWidth(),l=n.getHeight(),u=Math.min(s,l),c=parsePercent(a[0],n.getWidth()),p=parsePercent(a[1],n.getHeight()),d=parsePercent(t.get("radius"),u/2);return{cx:c,cy:p,r:d}}function formatLabel(t,n){var a=t==null?"":t+"";return n&&(isString$1(n)?a=n.replace("{value}",a):isFunction$1(n)&&(a=n(t))),a}var GaugeView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){this.group.removeAll();var u=a.get(["axisLine","lineStyle","color"]),c=parsePosition(a,l);this._renderMain(a,s,l,u,c),this._data=a.getData()},n.prototype.dispose=function(){},n.prototype._renderMain=function(a,s,l,u,c){var p=this.group,d=a.get("clockwise"),x=-a.get("startAngle")/180*Math.PI,_=-a.get("endAngle")/180*Math.PI,S=a.getModel("axisLine"),T=S.get("roundCap"),A=T?SausagePath:Sector,R=S.get("show"),D=S.getModel("lineStyle"),O=D.get("width"),F=[x,_];normalizeArcAngles(F,!d),x=F[0],_=F[1];for(var z=_-x,j=x,Z=[],W=0;R&&W<u.length;W++){var J=Math.min(Math.max(u[W][0],0),1);_=x+z*J;var en=new A({shape:{startAngle:j,endAngle:_,cx:c.cx,cy:c.cy,clockwise:d,r0:c.r-O,r:c.r},silent:!0});en.setStyle({fill:u[W][1]}),en.setStyle(D.getLineStyle(["color","width"])),Z.push(en),j=_}Z.reverse(),each$f(Z,function(Ct){return p.add(Ct)});var tn=function(Ct){if(Ct<=0)return u[0][1];var Q;for(Q=0;Q<u.length;Q++)if(u[Q][0]>=Ct&&(Q===0?0:u[Q-1][0])<Ct)return u[Q][1];return u[Q-1][1]};this._renderTicks(a,s,l,tn,c,x,_,d,O),this._renderTitleAndDetail(a,s,l,tn,c),this._renderAnchor(a,c),this._renderPointer(a,s,l,tn,c,x,_,d,O)},n.prototype._renderTicks=function(a,s,l,u,c,p,d,x,_){for(var S=this.group,T=c.cx,A=c.cy,R=c.r,D=+a.get("min"),O=+a.get("max"),F=a.getModel("splitLine"),z=a.getModel("axisTick"),j=a.getModel("axisLabel"),Z=a.get("splitNumber"),W=z.get("splitNumber"),J=parsePercent(F.get("length"),R),en=parsePercent(z.get("length"),R),tn=p,Ct=(d-p)/Z,Q=Ct/W,on=F.getModel("lineStyle").getLineStyle(),gn=z.getModel("lineStyle").getLineStyle(),In=F.get("distance"),dn,ix,Cn=0;Cn<=Z;Cn++){if(dn=Math.cos(tn),ix=Math.sin(tn),F.get("show")){var ax=In?In+_:_,sx=new Line$1({shape:{x1:dn*(R-ax)+T,y1:ix*(R-ax)+A,x2:dn*(R-J-ax)+T,y2:ix*(R-J-ax)+A},style:on,silent:!0});on.stroke==="auto"&&sx.setStyle({stroke:u(Cn/Z)}),S.add(sx)}if(j.get("show")){var ax=j.get("distance")+In,lx=formatLabel(round$3(Cn/Z*(O-D)+D),j.get("formatter")),ox=u(Cn/Z),hx=dn*(R-J-ax)+T,_x=ix*(R-J-ax)+A,ux=j.get("rotate"),px=0;ux==="radial"?(px=-tn+2*Math.PI,px>Math.PI/2&&(px+=Math.PI)):ux==="tangential"?px=-tn-Math.PI/2:isNumber(ux)&&(px=ux*Math.PI/180),px===0?S.add(new ZRText({style:createTextStyle$1(j,{text:lx,x:hx,y:_x,verticalAlign:ix<-.8?"top":ix>.8?"bottom":"middle",align:dn<-.4?"left":dn>.4?"right":"center"},{inheritColor:ox}),silent:!0})):S.add(new ZRText({style:createTextStyle$1(j,{text:lx,x:hx,y:_x,verticalAlign:"middle",align:"center"},{inheritColor:ox}),silent:!0,originX:hx,originY:_x,rotation:px}))}if(z.get("show")&&Cn!==Z){var ax=z.get("distance");ax=ax?ax+_:_;for(var dx=0;dx<=W;dx++){dn=Math.cos(tn),ix=Math.sin(tn);var mx=new Line$1({shape:{x1:dn*(R-ax)+T,y1:ix*(R-ax)+A,x2:dn*(R-en-ax)+T,y2:ix*(R-en-ax)+A},silent:!0,style:gn});gn.stroke==="auto"&&mx.setStyle({stroke:u((Cn+dx/W)/Z)}),S.add(mx),tn+=Q}tn-=Q}else tn+=Ct}},n.prototype._renderPointer=function(a,s,l,u,c,p,d,x,_){var S=this.group,T=this._data,A=this._progressEls,R=[],D=a.get(["pointer","show"]),O=a.getModel("progress"),F=O.get("show"),z=a.getData(),j=z.mapDimension("value"),Z=+a.get("min"),W=+a.get("max"),J=[Z,W],en=[p,d];function tn(Q,on){var gn=z.getItemModel(Q),In=gn.getModel("pointer"),dn=parsePercent(In.get("width"),c.r),ix=parsePercent(In.get("length"),c.r),Cn=a.get(["pointer","icon"]),ax=In.get("offsetCenter"),sx=parsePercent(ax[0],c.r),lx=parsePercent(ax[1],c.r),ox=In.get("keepAspect"),hx;return Cn?hx=createSymbol$1(Cn,sx-dn/2,lx-ix,dn,ix,null,ox):hx=new PointerPath({shape:{angle:-Math.PI/2,width:dn,r:ix,x:sx,y:lx}}),hx.rotation=-(on+Math.PI/2),hx.x=c.cx,hx.y=c.cy,hx}function Ct(Q,on){var gn=O.get("roundCap"),In=gn?SausagePath:Sector,dn=O.get("overlap"),ix=dn?O.get("width"):_/z.count(),Cn=dn?c.r-ix:c.r-(Q+1)*ix,ax=dn?c.r:c.r-Q*ix,sx=new In({shape:{startAngle:p,endAngle:on,cx:c.cx,cy:c.cy,clockwise:x,r0:Cn,r:ax}});return dn&&(sx.z2=linearMap$2(z.get(j,Q),[Z,W],[100,0],!0)),sx}(F||D)&&(z.diff(T).add(function(Q){var on=z.get(j,Q);if(D){var gn=tn(Q,p);initProps(gn,{rotation:-((isNaN(+on)?en[0]:linearMap$2(on,J,en,!0))+Math.PI/2)},a),S.add(gn),z.setItemGraphicEl(Q,gn)}if(F){var In=Ct(Q,p),dn=O.get("clip");initProps(In,{shape:{endAngle:linearMap$2(on,J,en,dn)}},a),S.add(In),setCommonECData(a.seriesIndex,z.dataType,Q,In),R[Q]=In}}).update(function(Q,on){var gn=z.get(j,Q);if(D){var In=T.getItemGraphicEl(on),dn=In?In.rotation:p,ix=tn(Q,dn);ix.rotation=dn,updateProps$1(ix,{rotation:-((isNaN(+gn)?en[0]:linearMap$2(gn,J,en,!0))+Math.PI/2)},a),S.add(ix),z.setItemGraphicEl(Q,ix)}if(F){var Cn=A[on],ax=Cn?Cn.shape.endAngle:p,sx=Ct(Q,ax),lx=O.get("clip");updateProps$1(sx,{shape:{endAngle:linearMap$2(gn,J,en,lx)}},a),S.add(sx),setCommonECData(a.seriesIndex,z.dataType,Q,sx),R[Q]=sx}}).execute(),z.each(function(Q){var on=z.getItemModel(Q),gn=on.getModel("emphasis"),In=gn.get("focus"),dn=gn.get("blurScope"),ix=gn.get("disabled");if(D){var Cn=z.getItemGraphicEl(Q),ax=z.getItemVisual(Q,"style"),sx=ax.fill;if(Cn instanceof ZRImage){var lx=Cn.style;Cn.useStyle(extend({image:lx.image,x:lx.x,y:lx.y,width:lx.width,height:lx.height},ax))}else Cn.useStyle(ax),Cn.type!=="pointer"&&Cn.setColor(sx);Cn.setStyle(on.getModel(["pointer","itemStyle"]).getItemStyle()),Cn.style.fill==="auto"&&Cn.setStyle("fill",u(linearMap$2(z.get(j,Q),J,[0,1],!0))),Cn.z2EmphasisLift=0,setStatesStylesFromModel(Cn,on),toggleHoverEmphasis(Cn,In,dn,ix)}if(F){var ox=R[Q];ox.useStyle(z.getItemVisual(Q,"style")),ox.setStyle(on.getModel(["progress","itemStyle"]).getItemStyle()),ox.z2EmphasisLift=0,setStatesStylesFromModel(ox,on),toggleHoverEmphasis(ox,In,dn,ix)}}),this._progressEls=R)},n.prototype._renderAnchor=function(a,s){var l=a.getModel("anchor"),u=l.get("show");if(u){var c=l.get("size"),p=l.get("icon"),d=l.get("offsetCenter"),x=l.get("keepAspect"),_=createSymbol$1(p,s.cx-c/2+parsePercent(d[0],s.r),s.cy-c/2+parsePercent(d[1],s.r),c,c,null,x);_.z2=l.get("showAbove")?1:0,_.setStyle(l.getModel("itemStyle").getItemStyle()),this.group.add(_)}},n.prototype._renderTitleAndDetail=function(a,s,l,u,c){var p=this,d=a.getData(),x=d.mapDimension("value"),_=+a.get("min"),S=+a.get("max"),T=new Group$3,A=[],R=[],D=a.isAnimationEnabled(),O=a.get(["pointer","showAbove"]);d.diff(this._data).add(function(F){A[F]=new ZRText({silent:!0}),R[F]=new ZRText({silent:!0})}).update(function(F,z){A[F]=p._titleEls[z],R[F]=p._detailEls[z]}).execute(),d.each(function(F){var z=d.getItemModel(F),j=d.get(x,F),Z=new Group$3,W=u(linearMap$2(j,[_,S],[0,1],!0)),J=z.getModel("title");if(J.get("show")){var en=J.get("offsetCenter"),tn=c.cx+parsePercent(en[0],c.r),Ct=c.cy+parsePercent(en[1],c.r),Q=A[F];Q.attr({z2:O?0:2,style:createTextStyle$1(J,{x:tn,y:Ct,text:d.getName(F),align:"center",verticalAlign:"middle"},{inheritColor:W})}),Z.add(Q)}var on=z.getModel("detail");if(on.get("show")){var gn=on.get("offsetCenter"),In=c.cx+parsePercent(gn[0],c.r),dn=c.cy+parsePercent(gn[1],c.r),ix=parsePercent(on.get("width"),c.r),Cn=parsePercent(on.get("height"),c.r),ax=a.get(["progress","show"])?d.getItemVisual(F,"style").fill:W,Q=R[F],sx=on.get("formatter");Q.attr({z2:O?0:2,style:createTextStyle$1(on,{x:In,y:dn,text:formatLabel(j,sx),width:isNaN(ix)?null:ix,height:isNaN(Cn)?null:Cn,align:"center",verticalAlign:"middle"},{inheritColor:ax})}),setLabelValueAnimation(Q,{normal:on},j,function(ox){return formatLabel(ox,sx)}),D&&animateLabelValue(Q,F,d,a,{getFormattedLabel:function(ox,hx,_x,ux,px,dx){return formatLabel(dx?dx.interpolatedValue:j,sx)}}),Z.add(Q)}T.add(Z)}),this.group.add(T),this._titleEls=A,this._detailEls=R},n.type="gauge",n}(ChartView),GaugeSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.visualStyleAccessPath="itemStyle",a}return n.prototype.getInitialData=function(a,s){return createSeriesDataSimply(this,["value"])},n.type="series.gauge",n.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},n}(SeriesModel);function install$E(t){t.registerChartView(GaugeView),t.registerSeriesModel(GaugeSeriesModel)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(t){__extends(n,t);function n(a,s){var l=t.call(this)||this,u=l,c=new Polyline$1,p=new ZRText;return u.setTextContent(p),l.setTextGuideLine(c),l.updateData(a,s,!0),l}return n.prototype.updateData=function(a,s,l){var u=this,c=a.hostModel,p=a.getItemModel(s),d=a.getItemLayout(s),x=p.getModel("emphasis"),_=p.get(opacityAccessPath$1);_=_??1,l||saveOldStyle(u),u.useStyle(a.getItemVisual(s,"style")),u.style.lineJoin="round",l?(u.setShape({points:d.points}),u.style.opacity=0,initProps(u,{style:{opacity:_}},c,s)):updateProps$1(u,{style:{opacity:_},shape:{points:d.points}},c,s),setStatesStylesFromModel(u,p),this._updateLabel(a,s),toggleHoverEmphasis(this,x.get("focus"),x.get("blurScope"),x.get("disabled"))},n.prototype._updateLabel=function(a,s){var l=this,u=this.getTextGuideLine(),c=l.getTextContent(),p=a.hostModel,d=a.getItemModel(s),x=a.getItemLayout(s),_=x.label,S=a.getItemVisual(s,"style"),T=S.fill;setLabelStyle(c,getLabelStatesModels(d),{labelFetcher:a.hostModel,labelDataIndex:s,defaultOpacity:S.opacity,defaultText:a.getName(s)},{normal:{align:_.textAlign,verticalAlign:_.verticalAlign}}),l.setTextConfig({local:!0,inside:!!_.inside,insideStroke:T,outsideFill:T});var A=_.linePoints;u.setShape({points:A}),l.textGuideLineConfig={anchor:A?new Point(A[0][0],A[0][1]):null},updateProps$1(c,{style:{x:_.x,y:_.y}},p,s),c.attr({rotation:_.rotation,originX:_.x,originY:_.y,z2:10}),setLabelLineStyle(l,getLabelLineStatesModels(d),{stroke:T})},n}(Polygon),FunnelView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.ignoreLabelLineUpdate=!0,a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this._data,p=this.group;u.diff(c).add(function(d){var x=new FunnelPiece(u,d);u.setItemGraphicEl(d,x),p.add(x)}).update(function(d,x){var _=c.getItemGraphicEl(x);_.updateData(u,d),p.add(_),u.setItemGraphicEl(d,_)}).remove(function(d){var x=c.getItemGraphicEl(d);removeElementWithFadeOut(x,a,d)}).execute(),this._data=u},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.prototype.dispose=function(){},n.type="funnel",n}(ChartView),FunnelSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(a)},n.prototype.getInitialData=function(a,s){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},n.prototype._defaultLabelLine=function(a){defaultEmphasis(a,"labelLine",["show"]);var s=a.labelLine,l=a.emphasis.labelLine;s.show=s.show&&a.label.show,l.show=l.show&&a.emphasis.label.show},n.prototype.getDataParams=function(a){var s=this.getData(),l=t.prototype.getDataParams.call(this,a),u=s.mapDimension("value"),c=s.getSum(u);return l.percent=c?+(s.get(u,a)/c*100).toFixed(2):0,l.$vars.push("percent"),l},n.type="series.funnel",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n}(SeriesModel);function getViewRect$2(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function getSortedIndices(t,n){for(var a=t.mapDimension("value"),s=t.mapArray(a,function(d){return d}),l=[],u=n==="ascending",c=0,p=t.count();c<p;c++)l[c]=c;return isFunction$1(n)?l.sort(n):n!=="none"&&l.sort(function(d,x){return u?s[d]-s[x]:s[x]-s[d]}),l}function labelLayout(t){var n=t.hostModel,a=n.get("orient");t.each(function(s){var l=t.getItemModel(s),u=l.getModel("label"),c=u.get("position"),p=l.getModel("labelLine"),d=t.getItemLayout(s),x=d.points,_=c==="inner"||c==="inside"||c==="center"||c==="insideLeft"||c==="insideRight",S,T,A,R;if(_)c==="insideLeft"?(T=(x[0][0]+x[3][0])/2+5,A=(x[0][1]+x[3][1])/2,S="left"):c==="insideRight"?(T=(x[1][0]+x[2][0])/2-5,A=(x[1][1]+x[2][1])/2,S="right"):(T=(x[0][0]+x[1][0]+x[2][0]+x[3][0])/4,A=(x[0][1]+x[1][1]+x[2][1]+x[3][1])/4,S="center"),R=[[T,A],[T,A]];else{var D=void 0,O=void 0,F=void 0,z=void 0,j=p.get("length");c==="left"?(D=(x[3][0]+x[0][0])/2,O=(x[3][1]+x[0][1])/2,F=D-j,T=F-5,S="right"):c==="right"?(D=(x[1][0]+x[2][0])/2,O=(x[1][1]+x[2][1])/2,F=D+j,T=F+5,S="left"):c==="top"?(D=(x[3][0]+x[0][0])/2,O=(x[3][1]+x[0][1])/2,z=O-j,A=z-5,S="center"):c==="bottom"?(D=(x[1][0]+x[2][0])/2,O=(x[1][1]+x[2][1])/2,z=O+j,A=z+5,S="center"):c==="rightTop"?(D=a==="horizontal"?x[3][0]:x[1][0],O=a==="horizontal"?x[3][1]:x[1][1],a==="horizontal"?(z=O-j,A=z-5,S="center"):(F=D+j,T=F+5,S="top")):c==="rightBottom"?(D=x[2][0],O=x[2][1],a==="horizontal"?(z=O+j,A=z+5,S="center"):(F=D+j,T=F+5,S="bottom")):c==="leftTop"?(D=x[0][0],O=a==="horizontal"?x[0][1]:x[1][1],a==="horizontal"?(z=O-j,A=z-5,S="center"):(F=D-j,T=F-5,S="right")):c==="leftBottom"?(D=a==="horizontal"?x[1][0]:x[3][0],O=a==="horizontal"?x[1][1]:x[2][1],a==="horizontal"?(z=O+j,A=z+5,S="center"):(F=D-j,T=F-5,S="right")):(D=(x[1][0]+x[2][0])/2,O=(x[1][1]+x[2][1])/2,a==="horizontal"?(z=O+j,A=z+5,S="center"):(F=D+j,T=F+5,S="left")),a==="horizontal"?(F=D,T=F):(z=O,A=z),R=[[D,O],[F,z]]}d.label={linePoints:R,x:T,y:A,verticalAlign:"middle",textAlign:S,inside:_}})}function funnelLayout(t,n){t.eachSeriesByType("funnel",function(a){var s=a.getData(),l=s.mapDimension("value"),u=a.get("sort"),c=getViewRect$2(a,n),p=a.get("orient"),d=c.width,x=c.height,_=getSortedIndices(s,u),S=c.x,T=c.y,A=p==="horizontal"?[parsePercent(a.get("minSize"),x),parsePercent(a.get("maxSize"),x)]:[parsePercent(a.get("minSize"),d),parsePercent(a.get("maxSize"),d)],R=s.getDataExtent(l),D=a.get("min"),O=a.get("max");D==null&&(D=Math.min(R[0],0)),O==null&&(O=R[1]);var F=a.get("funnelAlign"),z=a.get("gap"),j=p==="horizontal"?d:x,Z=(j-z*(s.count()-1))/s.count(),W=function(dn,ix){if(p==="horizontal"){var Cn=s.get(l,dn)||0,ax=linearMap$2(Cn,[D,O],A,!0),sx=void 0;switch(F){case"top":sx=T;break;case"center":sx=T+(x-ax)/2;break;case"bottom":sx=T+(x-ax);break}return[[ix,sx],[ix,sx+ax]]}var lx=s.get(l,dn)||0,ox=linearMap$2(lx,[D,O],A,!0),hx;switch(F){case"left":hx=S;break;case"center":hx=S+(d-ox)/2;break;case"right":hx=S+d-ox;break}return[[hx,ix],[hx+ox,ix]]};u==="ascending"&&(Z=-Z,z=-z,p==="horizontal"?S+=d:T+=x,_=_.reverse());for(var J=0;J<_.length;J++){var en=_[J],tn=_[J+1],Ct=s.getItemModel(en);if(p==="horizontal"){var Q=Ct.get(["itemStyle","width"]);Q==null?Q=Z:(Q=parsePercent(Q,d),u==="ascending"&&(Q=-Q));var on=W(en,S),gn=W(tn,S+Q);S+=Q+z,s.setItemLayout(en,{points:on.concat(gn.slice().reverse())})}else{var In=Ct.get(["itemStyle","height"]);In==null?In=Z:(In=parsePercent(In,x),u==="ascending"&&(In=-In));var on=W(en,T),gn=W(tn,T+In);T+=In+z,s.setItemLayout(en,{points:on.concat(gn.slice().reverse())})}}labelLayout(s)})}function install$D(t){t.registerChartView(FunnelView),t.registerSeriesModel(FunnelSeriesModel),t.registerLayout(funnelLayout),t.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$1=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._dataGroup=new Group$3,a._initialized=!1,a}return n.prototype.init=function(){this.group.add(this._dataGroup)},n.prototype.render=function(a,s,l,u){this._progressiveEls=null;var c=this._dataGroup,p=a.getData(),d=this._data,x=a.coordinateSystem,_=x.dimensions,S=makeSeriesScope(a);p.diff(d).add(T).update(A).remove(R).execute();function T(O){var F=addEl(p,c,O,_,x);updateElCommon(F,p,O,S)}function A(O,F){var z=d.getItemGraphicEl(F),j=createLinePoints(p,O,_,x);p.setItemGraphicEl(O,z),updateProps$1(z,{shape:{points:j}},a,O),saveOldStyle(z),updateElCommon(z,p,O,S)}function R(O){var F=d.getItemGraphicEl(O);c.remove(F)}if(!this._initialized){this._initialized=!0;var D=createGridClipShape$2(x,a,function(){setTimeout(function(){c.removeClipPath()})});c.setClipPath(D)}this._data=p},n.prototype.incrementalPrepareRender=function(a,s,l){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},n.prototype.incrementalRender=function(a,s,l){for(var u=s.getData(),c=s.coordinateSystem,p=c.dimensions,d=makeSeriesScope(s),x=this._progressiveEls=[],_=a.start;_<a.end;_++){var S=addEl(u,this._dataGroup,_,p,c);S.incremental=!0,updateElCommon(S,u,_,d),x.push(S)}},n.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},n.type="parallel",n}(ChartView);function createGridClipShape$2(t,n,a){var s=t.model,l=t.getRect(),u=new Rect$2({shape:{x:l.x,y:l.y,width:l.width,height:l.height}}),c=s.get("layout")==="horizontal"?"width":"height";return u.setShape(c,0),initProps(u,{shape:{width:l.width,height:l.height}},n,a),u}function createLinePoints(t,n,a,s){for(var l=[],u=0;u<a.length;u++){var c=a[u],p=t.get(t.mapDimension(c),n);isEmptyValue(p,s.getAxis(c).type)||l.push(s.dataToPoint(p,c))}return l}function addEl(t,n,a,s,l){var u=createLinePoints(t,a,s,l),c=new Polyline$1({shape:{points:u},z2:10});return n.add(c),t.setItemGraphicEl(a,c),c}function makeSeriesScope(t){var n=t.get("smooth",!0);return n===!0&&(n=DEFAULT_SMOOTH),n=numericToNumber(n),eqNaN(n)&&(n=0),{smooth:n}}function updateElCommon(t,n,a,s){t.useStyle(n.getItemVisual(a,"style")),t.style.fill=null,t.setShape("smooth",s.smooth);var l=n.getItemModel(a),u=l.getModel("emphasis");setStatesStylesFromModel(t,l,"lineStyle"),toggleHoverEmphasis(t,u.get("focus"),u.get("blurScope"),u.get("disabled"))}function isEmptyValue(t,n){return n==="category"?t==null:t==null||isNaN(t)}var ParallelSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},n.prototype.getRawIndicesByActiveState=function(a){var s=this.coordinateSystem,l=this.getData(),u=[];return s.eachActiveState(l,function(c,p){a===c&&u.push(l.getRawIndex(p))}),u},n.type="series.parallel",n.dependencies=["parallel"],n.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},n}(SeriesModel);function makeDefaultEncode(t){var n=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(n){var a={};return each$f(n.dimensions,function(s){var l=convertDimNameToNumber(s);a[s]=l}),a}}function convertDimNameToNumber(t){return+t.replace("dim","")}var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(t,n){var a=t.coordinateSystem,s={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(l,u){a.eachActiveState(u,function(c,p){var d=s[c];if(c==="normal"&&u.hasItemOption){var x=u.getItemModel(p).get(opacityAccessPath,!0);x!=null&&(d=x)}var _=u.ensureUniqueItemVisual(p,"style");_.opacity=d},l.start,l.end)}}}};function parallelPreprocessor(t){createParallelIfNeeded(t),mergeAxisOptionFromParallel(t)}function createParallelIfNeeded(t){if(!t.parallel){var n=!1;each$f(t.series,function(a){a&&a.type==="parallel"&&(n=!0)}),n&&(t.parallel=[{}])}}function mergeAxisOptionFromParallel(t){var n=normalizeToArray(t.parallelAxis);each$f(n,function(a){if(isObject$3(a)){var s=a.parallelIndex||0,l=normalizeToArray(t.parallel)[s];l&&l.parallelAxisDefault&&merge(a,l.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){this._model=a,this._api=l,this._handlers||(this._handlers={},each$f(handlers$1,function(u,c){l.getZr().on(c,this._handlers[c]=bind$1(u,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",a.get("axisExpandRate"),"fixRate")},n.prototype.dispose=function(a,s){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(l,u){s.getZr().off(u,l)}),this._handlers=null},n.prototype._throttledDispatchExpand=function(a){this._dispatchExpand(a)},n.prototype._dispatchExpand=function(a){a&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},a))},n.type="parallel",n}(ComponentView),handlers$1={mousedown:function(t){checkTrigger(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var n=this._mouseDownPoint;if(checkTrigger(this,"click")&&n){var a=[t.offsetX,t.offsetY],s=Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2);if(s>CLICK_THRESHOLD)return;var l=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);l.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:l.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var n=this._model,a=n.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),s=a.behavior;s==="jump"&&this._throttledDispatchExpand.debounceNextCall(n.get("axisExpandDebounce")),this._throttledDispatchExpand(s==="none"?null:{axisExpandWindow:a.axisExpandWindow,animation:s==="jump"?null:{duration:0}})}}};function checkTrigger(t,n){var a=t._model;return a.get("axisExpandable")&&a.get("axisExpandTriggerOn")===n}var ParallelModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},n.prototype.mergeOption=function(a){var s=this.option;a&&merge(s,a,!0),this._initDimensions()},n.prototype.contains=function(a,s){var l=a.get("parallelIndex");return l!=null&&s.getComponent("parallel",l)===this},n.prototype.setAxisExpand=function(a){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(s){a.hasOwnProperty(s)&&(this.option[s]=a[s])},this)},n.prototype._initDimensions=function(){var a=this.dimensions=[],s=this.parallelAxisIndex=[],l=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(u){return(u.get("parallelIndex")||0)===this.componentIndex},this);each$f(l,function(u){a.push("dim"+u.get("dim")),s.push(u.componentIndex)})},n.type="parallel",n.dependencies=["parallelAxis"],n.layoutMode="box",n.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},n}(ComponentModel),ParallelAxis=function(t){__extends(n,t);function n(a,s,l,u,c){var p=t.call(this,a,s,l)||this;return p.type=u||"value",p.axisIndex=c,p}return n.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},n}(Axis);function sliderMove(t,n,a,s,l,u){t=t||0;var c=a[1]-a[0];if(l!=null&&(l=restrict$1(l,[0,c])),u!=null&&(u=Math.max(u,l??0)),s==="all"){var p=Math.abs(n[1]-n[0]);p=restrict$1(p,[0,c]),l=u=restrict$1(p,[l,u]),s=0}n[0]=restrict$1(n[0],a),n[1]=restrict$1(n[1],a);var d=getSpanSign(n,s);n[s]+=t;var x=l||0,_=a.slice();d.sign<0?_[0]+=x:_[1]-=x,n[s]=restrict$1(n[s],_);var S;return S=getSpanSign(n,s),l!=null&&(S.sign!==d.sign||S.span<l)&&(n[1-s]=n[s]+d.sign*l),S=getSpanSign(n,s),u!=null&&S.span>u&&(n[1-s]=n[s]+S.sign*u),n}function getSpanSign(t,n){var a=t[n]-t[1-n];return{span:Math.abs(a),sign:a>0?-1:a<0?1:n?-1:1}}function restrict$1(t,n){return Math.min(n[1]!=null?n[1]:1/0,Math.max(n[0]!=null?n[0]:-1/0,t))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$1=Math.PI,Parallel=function(){function t(n,a,s){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=n.dimensions,this._model=n,this._init(n,a,s)}return t.prototype._init=function(n,a,s){var l=n.dimensions,u=n.parallelAxisIndex;each$a(l,function(c,p){var d=u[p],x=a.getComponent("parallelAxis",d),_=this._axesMap.set(c,new ParallelAxis(c,createScaleByModel$1(x),[0,0],x.get("type"),d)),S=_.type==="category";_.onBand=S&&x.get("boundaryGap"),_.inverse=x.get("inverse"),x.axis=_,_.model=x,_.coordinateSystem=x.coordinateSystem=this},this)},t.prototype.update=function(n,a){this._updateAxesFromSeries(this._model,n)},t.prototype.containPoint=function(n){var a=this._makeLayoutInfo(),s=a.axisBase,l=a.layoutBase,u=a.pixelDimIndex,c=n[1-u],p=n[u];return c>=s&&c<=s+a.axisLength&&p>=l&&p<=l+a.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(n,a){a.eachSeries(function(s){if(n.contains(s,a)){var l=s.getData();each$a(this.dimensions,function(u){var c=this._axesMap.get(u);c.scale.unionExtentFromData(l,l.mapDimension(u)),niceScaleExtent(c.scale,c.model)},this)}},this)},t.prototype.resize=function(n,a){this._rect=getLayoutRect(n.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var n=this._model,a=this._rect,s=["x","y"],l=["width","height"],u=n.get("layout"),c=u==="horizontal"?0:1,p=a[l[c]],d=[0,p],x=this.dimensions.length,_=restrict(n.get("axisExpandWidth"),d),S=restrict(n.get("axisExpandCount")||0,[0,x]),T=n.get("axisExpandable")&&x>3&&x>S&&S>1&&_>0&&p>0,A=n.get("axisExpandWindow"),R;if(A)R=restrict(A[1]-A[0],d),A[1]=A[0]+R;else{R=restrict(_*(S-1),d);var D=n.get("axisExpandCenter")||mathFloor(x/2);A=[_*D-R/2],A[1]=A[0]+R}var O=(p-R)/(x-S);O<3&&(O=0);var F=[mathFloor(round(A[0]/_,1))+1,mathCeil(round(A[1]/_,1))-1],z=O/_*A[0];return{layout:u,pixelDimIndex:c,layoutBase:a[s[c]],layoutLength:p,axisBase:a[s[1-c]],axisLength:a[l[1-c]],axisExpandable:T,axisExpandWidth:_,axisCollapseWidth:O,axisExpandWindow:A,axisCount:x,winInnerIndices:F,axisExpandWindow0Pos:z}},t.prototype._layoutAxes=function(){var n=this._rect,a=this._axesMap,s=this.dimensions,l=this._makeLayoutInfo(),u=l.layout;a.each(function(c){var p=[0,l.axisLength],d=c.inverse?1:0;c.setExtent(p[d],p[1-d])}),each$a(s,function(c,p){var d=(l.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(p,l),x={horizontal:{x:d.position,y:l.axisLength},vertical:{x:0,y:d.position}},_={horizontal:PI$1/2,vertical:0},S=[x[u].x+n.x,x[u].y+n.y],T=_[u],A=create$1();rotate(A,A,T),translate(A,A,S),this._axesLayout[c]={position:S,rotation:T,transform:A,axisNameAvailableWidth:d.axisNameAvailableWidth,axisLabelShow:d.axisLabelShow,nameTruncateMaxWidth:d.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},t.prototype.getAxis=function(n){return this._axesMap.get(n)},t.prototype.dataToPoint=function(n,a){return this.axisCoordToPoint(this._axesMap.get(a).dataToCoord(n),a)},t.prototype.eachActiveState=function(n,a,s,l){s==null&&(s=0),l==null&&(l=n.count());var u=this._axesMap,c=this.dimensions,p=[],d=[];each$f(c,function(O){p.push(n.mapDimension(O)),d.push(u.get(O).model)});for(var x=this.hasAxisBrushed(),_=s;_<l;_++){var S=void 0;if(!x)S="normal";else{S="active";for(var T=n.getValues(p,_),A=0,R=c.length;A<R;A++){var D=d[A].getActiveState(T[A]);if(D==="inactive"){S="inactive";break}}}a(S,_)}},t.prototype.hasAxisBrushed=function(){for(var n=this.dimensions,a=this._axesMap,s=!1,l=0,u=n.length;l<u;l++)a.get(n[l]).model.getActiveState()!=="normal"&&(s=!0);return s},t.prototype.axisCoordToPoint=function(n,a){var s=this._axesLayout[a];return applyTransform([n,0],s.transform)},t.prototype.getAxisLayout=function(n){return clone$4(this._axesLayout[n])},t.prototype.getSlidedAxisExpandWindow=function(n){var a=this._makeLayoutInfo(),s=a.pixelDimIndex,l=a.axisExpandWindow.slice(),u=l[1]-l[0],c=[0,a.axisExpandWidth*(a.axisCount-1)];if(!this.containPoint(n))return{behavior:"none",axisExpandWindow:l};var p=n[s]-a.layoutBase-a.axisExpandWindow0Pos,d,x="slide",_=a.axisCollapseWidth,S=this._model.get("axisExpandSlideTriggerArea"),T=S[0]!=null;if(_)T&&_&&p<u*S[0]?(x="jump",d=p-u*S[2]):T&&_&&p>u*(1-S[0])?(x="jump",d=p-u*(1-S[2])):(d=p-u*S[1])>=0&&(d=p-u*(1-S[1]))<=0&&(d=0),d*=a.axisExpandWidth/_,d?sliderMove(d,l,c,"all"):x="none";else{var A=l[1]-l[0],R=c[1]*p/A;l=[mathMax$2(0,R-A/2)],l[1]=mathMin$2(c[1],l[0]+A),l[0]=l[1]-A}return{axisExpandWindow:l,behavior:x}},t}();function restrict(t,n){return mathMin$2(mathMax$2(t,n[0]),n[1])}function layoutAxisWithoutExpand(t,n){var a=n.layoutLength/(n.axisCount-1);return{position:a*t,axisNameAvailableWidth:a,axisLabelShow:!0}}function layoutAxisWithExpand(t,n){var a=n.layoutLength,s=n.axisExpandWidth,l=n.axisCount,u=n.axisCollapseWidth,c=n.winInnerIndices,p,d=u,x=!1,_;return t<c[0]?(p=t*u,_=u):t<=c[1]?(p=n.axisExpandWindow0Pos+t*s-n.axisExpandWindow[0],d=s,x=!0):(p=a-(l-1-t)*u,_=u),{position:p,axisNameAvailableWidth:d,axisLabelShow:x,nameTruncateMaxWidth:_}}function createParallelCoordSys(t,n){var a=[];return t.eachComponent("parallel",function(s,l){var u=new Parallel(s,t,n);u.name="parallel_"+l,u.resize(s,n),s.coordinateSystem=u,u.model=s,a.push(u)}),t.eachSeries(function(s){if(s.get("coordinateSystem")==="parallel"){var l=s.getReferringComponents("parallel",SINGLE_REFERRING).models[0];s.coordinateSystem=l.coordinateSystem}}),a}var parallelCoordSysCreator={create:createParallelCoordSys},ParallelAxisModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.activeIntervals=[],a}return n.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},n.prototype.setActiveIntervals=function(a){var s=this.activeIntervals=clone$4(a);if(s)for(var l=s.length-1;l>=0;l--)asc$2(s[l])},n.prototype.getActiveState=function(a){var s=this.activeIntervals;if(!s.length)return"normal";if(a==null||isNaN(+a))return"inactive";if(s.length===1){var l=s[0];if(l[0]<=a&&a<=l[1])return"active"}else for(var u=0,c=s.length;u<c;u++)if(s[u][0]<=a&&a<=s[u][1])return"active";return"inactive"},n}(ComponentModel);mixin(ParallelAxisModel,AxisModelCommonMixin);var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(t){__extends(n,t);function n(a){var s=t.call(this)||this;return s._track=[],s._covers=[],s._handlers={},s._zr=a,s.group=new Group$3,s._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(l,u){this._handlers[u]=bind$1(l,this)},s),s}return n.prototype.enableBrush=function(a){return this._brushType&&this._doDisableBrush(),a.brushType&&this._doEnableBrush(a),this},n.prototype._doEnableBrush=function(a){var s=this._zr;this._enableGlobalPan||take(s,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(l,u){s.on(u,l)}),this._brushType=a.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),a,!0)},n.prototype._doDisableBrush=function(){var a=this._zr;release(a,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(s,l){a.off(l,s)}),this._brushType=this._brushOption=null},n.prototype.setPanels=function(a){if(a&&a.length){var s=this._panels={};each$f(a,function(l){s[l.panelId]=clone$4(l)})}else this._panels=null;return this},n.prototype.mount=function(a){a=a||{},this._enableGlobalPan=a.enableGlobalPan;var s=this.group;return this._zr.add(s),s.attr({x:a.x||0,y:a.y||0,rotation:a.rotation||0,scaleX:a.scaleX||1,scaleY:a.scaleY||1}),this._transform=s.getLocalTransform(),this},n.prototype.updateCovers=function(a){a=map$1(a,function(T){return merge(clone$4(DEFAULT_BRUSH_OPT),T,!0)});var s="\0-brush-index-",l=this._covers,u=this._covers=[],c=this,p=this._creatingCover;return new DataDiffer(l,a,x,d).add(_).update(_).remove(S).execute(),this;function d(T,A){return(T.id!=null?T.id:s+A)+"-"+T.brushType}function x(T,A){return d(T.__brushOption,A)}function _(T,A){var R=a[T];if(A!=null&&l[A]===p)u[T]=l[A];else{var D=u[T]=A!=null?(l[A].__brushOption=R,l[A]):endCreating(c,createCover(c,R));updateCoverAfterCreation(c,D)}}function S(T){l[T]!==p&&c.group.remove(l[T])}},n.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},n.prototype.dispose=function(){this.unmount(),this.off()},n}(Eventful);function createCover(t,n){var a=coverRenderers[n.brushType].createCover(t,n);return a.__brushOption=n,updateZ$1(a,n),t.group.add(a),a}function endCreating(t,n){var a=getCoverRenderer(n);return a.endCreating&&(a.endCreating(t,n),updateZ$1(n,n.__brushOption)),n}function updateCoverShape(t,n){var a=n.__brushOption;getCoverRenderer(n).updateCoverShape(t,n,a.range,a)}function updateZ$1(t,n){var a=n.z;a==null&&(a=COVER_Z),t.traverse(function(s){s.z=a,s.z2=a})}function updateCoverAfterCreation(t,n){getCoverRenderer(n).updateCommon(t,n),updateCoverShape(t,n)}function getCoverRenderer(t){return coverRenderers[t.__brushOption.brushType]}function getPanelByPoint(t,n,a){var s=t._panels;if(!s)return BRUSH_PANEL_GLOBAL;var l,u=t._transform;return each$f(s,function(c){c.isTargetByCursor(n,a,u)&&(l=c)}),l}function getPanelByCover(t,n){var a=t._panels;if(!a)return BRUSH_PANEL_GLOBAL;var s=n.__brushOption.panelId;return s!=null?a[s]:BRUSH_PANEL_GLOBAL}function clearCovers(t){var n=t._covers,a=n.length;return each$f(n,function(s){t.group.remove(s)},t),n.length=0,!!a}function trigger(t,n){var a=map$1(t._covers,function(s){var l=s.__brushOption,u=clone$4(l.range);return{brushType:l.brushType,panelId:l.panelId,range:u}});t.trigger("brush",{areas:a,isEnd:!!n.isEnd,removeOnClick:!!n.removeOnClick})}function shouldShowCover(t){var n=t._track;if(!n.length)return!1;var a=n[n.length-1],s=n[0],l=a[0]-s[0],u=a[1]-s[1],c=mathPow(l*l+u*u,.5);return c>UNSELECT_THRESHOLD}function getTrackEnds(t){var n=t.length-1;return n<0&&(n=0),[t[0],t[n]]}function createBaseRectCover(t,n,a,s){var l=new Group$3;return l.add(new Rect$2({name:"main",style:makeStyle(a),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,t,n,l,["n","s","w","e"]),ondragend:curry$1(trigger,n,{isEnd:!0})})),each$f(s,function(u){l.add(new Rect$2({name:u.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,t,n,l,u),ondragend:curry$1(trigger,n,{isEnd:!0})}))}),l}function updateBaseRect(t,n,a,s){var l=s.brushStyle.lineWidth||0,u=mathMax$1(l,MIN_RESIZE_LINE_WIDTH),c=a[0][0],p=a[1][0],d=c-l/2,x=p-l/2,_=a[0][1],S=a[1][1],T=_-u+l/2,A=S-u+l/2,R=_-c,D=S-p,O=R+l,F=D+l;updateRectShape(t,n,"main",c,p,R,D),s.transformable&&(updateRectShape(t,n,"w",d,x,u,F),updateRectShape(t,n,"e",T,x,u,F),updateRectShape(t,n,"n",d,x,O,u),updateRectShape(t,n,"s",d,A,O,u),updateRectShape(t,n,"nw",d,x,u,u),updateRectShape(t,n,"ne",T,x,u,u),updateRectShape(t,n,"sw",d,A,u,u),updateRectShape(t,n,"se",T,A,u,u))}function updateCommon$1(t,n){var a=n.__brushOption,s=a.transformable,l=n.childAt(0);l.useStyle(makeStyle(a)),l.attr({silent:!s,cursor:s?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(u){var c=n.childOfName(u.join("")),p=u.length===1?getGlobalDirection1(t,u[0]):getGlobalDirection2(t,u);c&&c.attr({silent:!s,invisible:!s,cursor:s?CURSOR_MAP[p]+"-resize":null})})}function updateRectShape(t,n,a,s,l,u,c){var p=n.childOfName(a);p&&p.setShape(pointsToRect(clipByPanel(t,n,[[s,l],[s+u,l+c]])))}function makeStyle(t){return defaults({strokeNoScale:!0},t.brushStyle)}function formatRectRange(t,n,a,s){var l=[mathMin$1(t,a),mathMin$1(n,s)],u=[mathMax$1(t,a),mathMax$1(n,s)];return[[l[0],u[0]],[l[1],u[1]]]}function getTransform(t){return getTransform$1(t.group)}function getGlobalDirection1(t,n){var a={w:"left",e:"right",n:"top",s:"bottom"},s={left:"w",right:"e",top:"n",bottom:"s"},l=transformDirection(a[n],getTransform(t));return s[l]}function getGlobalDirection2(t,n){var a=[getGlobalDirection1(t,n[0]),getGlobalDirection1(t,n[1])];return(a[0]==="e"||a[0]==="w")&&a.reverse(),a.join("")}function driftRect(t,n,a,s,l,u){var c=a.__brushOption,p=t.toRectRange(c.range),d=toLocalDelta(n,l,u);each$f(s,function(x){var _=DIRECTION_MAP[x];p[_[0]][_[1]]+=d[_[0]]}),c.range=t.fromRectRange(formatRectRange(p[0][0],p[1][0],p[0][1],p[1][1])),updateCoverAfterCreation(n,a),trigger(n,{isEnd:!1})}function driftPolygon(t,n,a,s){var l=n.__brushOption.range,u=toLocalDelta(t,a,s);each$f(l,function(c){c[0]+=u[0],c[1]+=u[1]}),updateCoverAfterCreation(t,n),trigger(t,{isEnd:!1})}function toLocalDelta(t,n,a){var s=t.group,l=s.transformCoordToLocal(n,a),u=s.transformCoordToLocal(0,0);return[l[0]-u[0],l[1]-u[1]]}function clipByPanel(t,n,a){var s=getPanelByCover(t,n);return s&&s!==BRUSH_PANEL_GLOBAL?s.clipPath(a,t._transform):clone$4(a)}function pointsToRect(t){var n=mathMin$1(t[0][0],t[1][0]),a=mathMin$1(t[0][1],t[1][1]),s=mathMax$1(t[0][0],t[1][0]),l=mathMax$1(t[0][1],t[1][1]);return{x:n,y:a,width:s-n,height:l-a}}function resetCursor(t,n,a){if(!(!t._brushType||isOutsideZrArea(t,n.offsetX,n.offsetY))){var s=t._zr,l=t._covers,u=getPanelByPoint(t,n,a);if(!t._dragging)for(var c=0;c<l.length;c++){var p=l[c].__brushOption;if(u&&(u===BRUSH_PANEL_GLOBAL||p.panelId===u.panelId)&&coverRenderers[p.brushType].contain(l[c],a[0],a[1]))return}u&&s.setCursorStyle("crosshair")}}function preventDefault(t){var n=t.event;n.preventDefault&&n.preventDefault()}function mainShapeContain(t,n,a){return t.childOfName("main").contain(n,a)}function updateCoverByMouse(t,n,a,s){var l=t._creatingCover,u=t._creatingPanel,c=t._brushOption,p;if(t._track.push(a.slice()),shouldShowCover(t)||l){if(u&&!l){c.brushMode==="single"&&clearCovers(t);var d=clone$4(c);d.brushType=determineBrushType(d.brushType,u),d.panelId=u===BRUSH_PANEL_GLOBAL?null:u.panelId,l=t._creatingCover=createCover(t,d),t._covers.push(l)}if(l){var x=coverRenderers[determineBrushType(t._brushType,u)],_=l.__brushOption;_.range=x.getCreatingRange(clipByPanel(t,l,t._track)),s&&(endCreating(t,l),x.updateCommon(t,l)),updateCoverShape(t,l),p={isEnd:s}}}else s&&c.brushMode==="single"&&c.removeOnClick&&getPanelByPoint(t,n,a)&&clearCovers(t)&&(p={isEnd:s,removeOnClick:!0});return p}function determineBrushType(t,n){return t==="auto"?n.defaultBrushType:t}var pointerHandlers={mousedown:function(t){if(this._dragging)handleDragEnd(this,t);else if(!t.target||!t.target.draggable){preventDefault(t);var n=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var a=this._creatingPanel=getPanelByPoint(this,t,n);a&&(this._dragging=!0,this._track=[n.slice()])}},mousemove:function(t){var n=t.offsetX,a=t.offsetY,s=this.group.transformCoordToLocal(n,a);if(resetCursor(this,t,s),this._dragging){preventDefault(t);var l=updateCoverByMouse(this,t,s,!1);l&&trigger(this,l)}},mouseup:function(t){handleDragEnd(this,t)}};function handleDragEnd(t,n){if(t._dragging){preventDefault(n);var a=n.offsetX,s=n.offsetY,l=t.group.transformCoordToLocal(a,s),u=updateCoverByMouse(t,n,l,!0);t._dragging=!1,t._track=[],t._creatingCover=null,u&&trigger(t,u)}}function isOutsideZrArea(t,n,a){var s=t._zr;return n<0||n>s.getWidth()||a<0||a>s.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(t,n){function a(s){return s}return createBaseRectCover({toRectRange:a,fromRectRange:a},t,n,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var n=getTrackEnds(t);return formatRectRange(n[1][0],n[1][1],n[0][0],n[0][1])},updateCoverShape:function(t,n,a,s){updateBaseRect(t,n,a,s)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(t,n){var a=new Group$3;return a.add(new Polyline$1({name:"main",style:makeStyle(n),silent:!0})),a},getCreatingRange:function(t){return t},endCreating:function(t,n){n.remove(n.childAt(0)),n.add(new Polygon({name:"main",draggable:!0,drift:curry$1(driftPolygon,t,n),ondragend:curry$1(trigger,t,{isEnd:!0})}))},updateCoverShape:function(t,n,a,s){n.childAt(0).setShape({points:clipByPanel(t,n,a)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(t){return{createCover:function(n,a){return createBaseRectCover({toRectRange:function(s){var l=[s,[0,100]];return t&&l.reverse(),l},fromRectRange:function(s){return s[t]}},n,a,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(n){var a=getTrackEnds(n),s=mathMin$1(a[0][t],a[1][t]),l=mathMax$1(a[0][t],a[1][t]);return[s,l]},updateCoverShape:function(n,a,s,l){var u,c=getPanelByCover(n,a);if(c!==BRUSH_PANEL_GLOBAL&&c.getLinearBrushOtherExtent)u=c.getLinearBrushOtherExtent(t);else{var p=n._zr;u=[0,[p.getWidth(),p.getHeight()][1-t]]}var d=[s,u];t&&d.reverse(),updateBaseRect(n,a,d,l)},updateCommon:updateCommon$1,contain:mainShapeContain}}function makeRectPanelClipPath(t){return t=normalizeRect(t),function(n){return clipPointsByRect(n,t)}}function makeLinearBrushOtherExtent(t,n){return t=normalizeRect(t),function(a){var s=n??a,l=s?t.width:t.height,u=s?t.x:t.y;return[u,u+(l||0)]}}function makeRectIsTargetByCursor(t,n,a){var s=normalizeRect(t);return function(l,u){return s.contain(u[0],u[1])&&!onIrrelevantElement(l,n,a)}}function normalizeRect(t){return BoundingRect.create(t)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){t.prototype.init.apply(this,arguments),(this._brushController=new BrushController(s.getZr())).on("brush",bind$1(this._onBrush,this))},n.prototype.render=function(a,s,l,u){if(!fromAxisAreaSelect(a,s,u)){this.axisModel=a,this.api=l,this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!a.get("show")){var p=getCoordSysModel(a,s),d=p.coordinateSystem,x=a.getAreaSelectStyle(),_=x.width,S=a.axis.dim,T=d.getAxisLayout(S),A=extend({strokeContainThreshold:_},T),R=new AxisBuilder(a,A);each$f(elementList$1,R.add,R),this._axisGroup.add(R.getGroup()),this._refreshBrushController(A,x,a,p,_,l),groupTransition(c,this._axisGroup,a)}}},n.prototype._refreshBrushController=function(a,s,l,u,c,p){var d=l.axis.getExtent(),x=d[1]-d[0],_=Math.min(30,Math.abs(x)*.1),S=BoundingRect.create({x:d[0],y:-c/2,width:x,height:c});S.x-=_,S.width+=2*_,this._brushController.mount({enableGlobalPan:!0,rotation:a.rotation,x:a.position[0],y:a.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(S),isTargetByCursor:makeRectIsTargetByCursor(S,p,u),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(S,0)}]).enableBrush({brushType:"lineX",brushStyle:s,removeOnClick:!0}).updateCovers(getCoverInfoList(l))},n.prototype._onBrush=function(a){var s=a.areas,l=this.axisModel,u=l.axis,c=map$1(s,function(p){return[u.coordToData(p.range[0],!0),u.coordToData(p.range[1],!0)]});(!l.option.realtime===a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:l.id,intervals:c})},n.prototype.dispose=function(){this._brushController.dispose()},n.type="parallelAxis",n}(ComponentView);function fromAxisAreaSelect(t,n,a){return a&&a.type==="axisAreaSelect"&&n.findComponents({mainType:"parallelAxis",query:a})[0]===t}function getCoverInfoList(t){var n=t.axis;return map$1(t.activeIntervals,function(a){return{brushType:"lineX",panelId:"pl",range:[n.dataToCoord(a[0],!0),n.dataToCoord(a[1],!0)]}})}function getCoordSysModel(t,n){return n.getComponent("parallel",t.get("parallelIndex"))}var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(t){t.registerAction(actionInfo,function(n,a){a.eachComponent({mainType:"parallelAxis",query:n},function(s){s.axis.model.setActiveIntervals(n.intervals)})}),t.registerAction("parallelAxisExpand",function(n,a){a.eachComponent({mainType:"parallel",query:n},function(s){s.setAxisExpand(n)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$C(t){t.registerComponentView(ParallelView),t.registerComponentModel(ParallelModel),t.registerCoordinateSystem("parallel",parallelCoordSysCreator),t.registerPreprocessor(parallelPreprocessor),t.registerComponentModel(ParallelAxisModel),t.registerComponentView(ParallelAxisView),axisModelCreator(t,"parallel",ParallelAxisModel,defaultAxisOption),installParallelActions(t)}function install$B(t){use(install$C),t.registerChartView(ParallelView$1),t.registerSeriesModel(ParallelSeriesModel),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,parallelVisual)}var SankeyPathShape=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t}(),SankeyPath=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new SankeyPathShape},n.prototype.buildPath=function(a,s){var l=s.extent;a.moveTo(s.x1,s.y1),a.bezierCurveTo(s.cpx1,s.cpy1,s.cpx2,s.cpy2,s.x2,s.y2),s.orient==="vertical"?(a.lineTo(s.x2+l,s.y2),a.bezierCurveTo(s.cpx2+l,s.cpy2,s.cpx1+l,s.cpy1,s.x1+l,s.y1)):(a.lineTo(s.x2,s.y2+l),a.bezierCurveTo(s.cpx2,s.cpy2+l,s.cpx1,s.cpy1+l,s.x1,s.y1+l)),a.closePath()},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n}(Path),SankeyView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._focusAdjacencyDisabled=!1,a}return n.prototype.render=function(a,s,l){var u=this,c=a.getGraph(),p=this.group,d=a.layoutInfo,x=d.width,_=d.height,S=a.getData(),T=a.getData("edge"),A=a.get("orient");this._model=a,p.removeAll(),p.x=d.x,p.y=d.y,c.eachEdge(function(R){var D=new SankeyPath,O=getECData(D);O.dataIndex=R.dataIndex,O.seriesIndex=a.seriesIndex,O.dataType="edge";var F=R.getModel(),z=F.getModel("lineStyle"),j=z.get("curveness"),Z=R.node1.getLayout(),W=R.node1.getModel(),J=W.get("localX"),en=W.get("localY"),tn=R.node2.getLayout(),Ct=R.node2.getModel(),Q=Ct.get("localX"),on=Ct.get("localY"),gn=R.getLayout(),In,dn,ix,Cn,ax,sx,lx,ox;D.shape.extent=Math.max(1,gn.dy),D.shape.orient=A,A==="vertical"?(In=(J!=null?J*x:Z.x)+gn.sy,dn=(en!=null?en*_:Z.y)+Z.dy,ix=(Q!=null?Q*x:tn.x)+gn.ty,Cn=on!=null?on*_:tn.y,ax=In,sx=dn*(1-j)+Cn*j,lx=ix,ox=dn*j+Cn*(1-j)):(In=(J!=null?J*x:Z.x)+Z.dx,dn=(en!=null?en*_:Z.y)+gn.sy,ix=Q!=null?Q*x:tn.x,Cn=(on!=null?on*_:tn.y)+gn.ty,ax=In*(1-j)+ix*j,sx=dn,lx=In*j+ix*(1-j),ox=Cn),D.setShape({x1:In,y1:dn,x2:ix,y2:Cn,cpx1:ax,cpy1:sx,cpx2:lx,cpy2:ox}),D.useStyle(z.getItemStyle()),applyCurveStyle(D.style,A,R);var hx=""+F.get("value"),_x=getLabelStatesModels(F,"edgeLabel");setLabelStyle(D,_x,{labelFetcher:{getFormattedLabel:function(dx,mx,gx,Sx,Ex,Cx){return a.getFormattedLabel(dx,mx,"edge",Sx,retrieve3(Ex,_x.normal&&_x.normal.get("formatter"),hx),Cx)}},labelDataIndex:R.dataIndex,defaultText:hx}),D.setTextConfig({position:"inside"});var ux=F.getModel("emphasis");setStatesStylesFromModel(D,F,"lineStyle",function(dx){var mx=dx.getItemStyle();return applyCurveStyle(mx,A,R),mx}),p.add(D),T.setItemGraphicEl(R.dataIndex,D);var px=ux.get("focus");toggleHoverEmphasis(D,px==="adjacency"?R.getAdjacentDataIndices():px==="trajectory"?R.getTrajectoryDataIndices():px,ux.get("blurScope"),ux.get("disabled"))}),c.eachNode(function(R){var D=R.getLayout(),O=R.getModel(),F=O.get("localX"),z=O.get("localY"),j=O.getModel("emphasis"),Z=O.get(["itemStyle","borderRadius"])||0,W=new Rect$2({shape:{x:F!=null?F*x:D.x,y:z!=null?z*_:D.y,width:D.dx,height:D.dy,r:Z},style:O.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(W,getLabelStatesModels(O),{labelFetcher:{getFormattedLabel:function(en,tn){return a.getFormattedLabel(en,tn,"node")}},labelDataIndex:R.dataIndex,defaultText:R.id}),W.disableLabelAnimation=!0,W.setStyle("fill",R.getVisual("color")),W.setStyle("decal",R.getVisual("style").decal),setStatesStylesFromModel(W,O),p.add(W),S.setItemGraphicEl(R.dataIndex,W),getECData(W).dataType="node";var J=j.get("focus");toggleHoverEmphasis(W,J==="adjacency"?R.getAdjacentDataIndices():J==="trajectory"?R.getTrajectoryDataIndices():J,j.get("blurScope"),j.get("disabled"))}),S.eachItemGraphicEl(function(R,D){var O=S.getItemModel(D);O.get("draggable")&&(R.drift=function(F,z){u._focusAdjacencyDisabled=!0,this.shape.x+=F,this.shape.y+=z,this.dirty(),l.dispatchAction({type:"dragNode",seriesId:a.id,dataIndex:S.getRawIndex(D),localX:this.shape.x/x,localY:this.shape.y/_})},R.ondragend=function(){u._focusAdjacencyDisabled=!1},R.draggable=!0,R.cursor="move")}),!this._data&&a.isAnimationEnabled()&&p.setClipPath(createGridClipShape$1(p.getBoundingRect(),a,function(){p.removeClipPath()})),this._data=a.getData()},n.prototype.dispose=function(){},n.type="sankey",n}(ChartView);function applyCurveStyle(t,n,a){switch(t.fill){case"source":t.fill=a.node1.getVisual("color"),t.decal=a.node1.getVisual("style").decal;break;case"target":t.fill=a.node2.getVisual("color"),t.decal=a.node2.getVisual("style").decal;break;case"gradient":var s=a.node1.getVisual("color"),l=a.node2.getVisual("color");isString$1(s)&&isString$1(l)&&(t.fill=new LinearGradient(0,0,+(n==="horizontal"),+(n==="vertical"),[{color:s,offset:0},{color:l,offset:1}]))}}function createGridClipShape$1(t,n,a){var s=new Rect$2({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return initProps(s,{shape:{width:t.width+20}},n,a),s}var SankeySeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(a,s){var l=a.edges||a.links||[],u=a.data||a.nodes||[],c=a.levels||[];this.levelModels=[];for(var p=this.levelModels,d=0;d<c.length;d++)c[d].depth!=null&&c[d].depth>=0&&(p[c[d].depth]=new Model(c[d],this,s));var x=createGraphFromNodeEdge(u,l,this,!0,_);return x.data;function _(S,T){S.wrapMethod("getItemModel",function(A,R){var D=A.parentModel,O=D.getData().getItemLayout(R);if(O){var F=O.depth,z=D.levelModels[F];z&&(A.parentModel=z)}return A}),T.wrapMethod("getItemModel",function(A,R){var D=A.parentModel,O=D.getGraph().getEdgeByIndex(R),F=O.node1.getLayout();if(F){var z=F.depth,j=D.levelModels[z];j&&(A.parentModel=j)}return A})}},n.prototype.setNodePosition=function(a,s){var l=this.option.data||this.option.nodes,u=l[a];u.localX=s[0],u.localY=s[1]},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.formatTooltip=function(a,s,l){function u(A){return isNaN(A)||A==null}if(l==="edge"){var c=this.getDataParams(a,l),p=c.data,d=c.value,x=p.source+" -- "+p.target;return createTooltipMarkup("nameValue",{name:x,value:d,noValue:u(d)})}else{var _=this.getGraph().getNodeByIndex(a),S=_.getLayout().value,T=this.getDataParams(a,l).data.name;return createTooltipMarkup("nameValue",{name:T!=null?T+"":null,value:S,noValue:u(S)})}},n.prototype.optionUpdated=function(){},n.prototype.getDataParams=function(a,s){var l=t.prototype.getDataParams.call(this,a,s);if(l.value==null&&s==="node"){var u=this.getGraph().getNodeByIndex(a),c=u.getLayout().value;l.value=c}return l},n.type="series.sankey",n.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},n}(SeriesModel);function sankeyLayout(t,n){t.eachSeriesByType("sankey",function(a){var s=a.get("nodeWidth"),l=a.get("nodeGap"),u=getViewRect$1(a,n);a.layoutInfo=u;var c=u.width,p=u.height,d=a.getGraph(),x=d.nodes,_=d.edges;computeNodeValues(x);var S=filter(x,function(D){return D.getLayout().value===0}),T=S.length!==0?0:a.get("layoutIterations"),A=a.get("orient"),R=a.get("nodeAlign");layoutSankey(x,_,s,l,c,p,T,A,R)})}function getViewRect$1(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function layoutSankey(t,n,a,s,l,u,c,p,d){computeNodeBreadths(t,n,a,l,u,p,d),computeNodeDepths(t,n,u,l,s,c,p),computeEdgeDepths(t,p)}function computeNodeValues(t){each$f(t,function(n){var a=sum(n.outEdges,getEdgeValue),s=sum(n.inEdges,getEdgeValue),l=n.getValue()||0,u=Math.max(a,s,l);n.setLayout({value:u},!0)})}function computeNodeBreadths(t,n,a,s,l,u,c){for(var p=[],d=[],x=[],_=[],S=0,T=0;T<n.length;T++)p[T]=1;for(var T=0;T<t.length;T++)d[T]=t[T].inEdges.length,d[T]===0&&x.push(t[T]);for(var A=-1;x.length;){for(var R=0;R<x.length;R++){var D=x[R],O=D.hostGraph.data.getRawDataItem(D.dataIndex),F=O.depth!=null&&O.depth>=0;F&&O.depth>A&&(A=O.depth),D.setLayout({depth:F?O.depth:S},!0),u==="vertical"?D.setLayout({dy:a},!0):D.setLayout({dx:a},!0);for(var z=0;z<D.outEdges.length;z++){var j=D.outEdges[z],Z=n.indexOf(j);p[Z]=0;var W=j.node2,J=t.indexOf(W);--d[J]===0&&_.indexOf(W)<0&&_.push(W)}}++S,x=_,_=[]}for(var T=0;T<p.length;T++)if(p[T]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var en=A>S-1?A:S-1;c&&c!=="left"&&adjustNodeWithNodeAlign(t,c,u,en);var tn=u==="vertical"?(l-a)/en:(s-a)/en;scaleNodeBreadths(t,tn,u)}function isNodeDepth(t){var n=t.hostGraph.data.getRawDataItem(t.dataIndex);return n.depth!=null&&n.depth>=0}function adjustNodeWithNodeAlign(t,n,a,s){if(n==="right"){for(var l=[],u=t,c=0;u.length;){for(var p=0;p<u.length;p++){var d=u[p];d.setLayout({skNodeHeight:c},!0);for(var x=0;x<d.inEdges.length;x++){var _=d.inEdges[x];l.indexOf(_.node1)<0&&l.push(_.node1)}}u=l,l=[],++c}each$f(t,function(S){isNodeDepth(S)||S.setLayout({depth:Math.max(0,s-S.getLayout().skNodeHeight)},!0)})}else n==="justify"&&moveSinksRight(t,s)}function moveSinksRight(t,n){each$f(t,function(a){!isNodeDepth(a)&&!a.outEdges.length&&a.setLayout({depth:n},!0)})}function scaleNodeBreadths(t,n,a){each$f(t,function(s){var l=s.getLayout().depth*n;a==="vertical"?s.setLayout({y:l},!0):s.setLayout({x:l},!0)})}function computeNodeDepths(t,n,a,s,l,u,c){var p=prepareNodesByBreadth(t,c);initializeNodeDepth(p,n,a,s,l,c),resolveCollisions(p,l,a,s,c);for(var d=1;u>0;u--)d*=.99,relaxRightToLeft(p,d,c),resolveCollisions(p,l,a,s,c),relaxLeftToRight(p,d,c),resolveCollisions(p,l,a,s,c)}function prepareNodesByBreadth(t,n){var a=[],s=n==="vertical"?"y":"x",l=groupData(t,function(u){return u.getLayout()[s]});return l.keys.sort(function(u,c){return u-c}),each$f(l.keys,function(u){a.push(l.buckets.get(u))}),a}function initializeNodeDepth(t,n,a,s,l,u){var c=1/0;each$f(t,function(p){var d=p.length,x=0;each$f(p,function(S){x+=S.getLayout().value});var _=u==="vertical"?(s-(d-1)*l)/x:(a-(d-1)*l)/x;_<c&&(c=_)}),each$f(t,function(p){each$f(p,function(d,x){var _=d.getLayout().value*c;u==="vertical"?(d.setLayout({x},!0),d.setLayout({dx:_},!0)):(d.setLayout({y:x},!0),d.setLayout({dy:_},!0))})}),each$f(n,function(p){var d=+p.getValue()*c;p.setLayout({dy:d},!0)})}function resolveCollisions(t,n,a,s,l){var u=l==="vertical"?"x":"y";each$f(t,function(c){c.sort(function(D,O){return D.getLayout()[u]-O.getLayout()[u]});for(var p,d,x,_=0,S=c.length,T=l==="vertical"?"dx":"dy",A=0;A<S;A++)d=c[A],x=_-d.getLayout()[u],x>0&&(p=d.getLayout()[u]+x,l==="vertical"?d.setLayout({x:p},!0):d.setLayout({y:p},!0)),_=d.getLayout()[u]+d.getLayout()[T]+n;var R=l==="vertical"?s:a;if(x=_-n-R,x>0){p=d.getLayout()[u]-x,l==="vertical"?d.setLayout({x:p},!0):d.setLayout({y:p},!0),_=p;for(var A=S-2;A>=0;--A)d=c[A],x=d.getLayout()[u]+d.getLayout()[T]+n-_,x>0&&(p=d.getLayout()[u]-x,l==="vertical"?d.setLayout({x:p},!0):d.setLayout({y:p},!0)),_=d.getLayout()[u]}})}function relaxRightToLeft(t,n,a){each$f(t.slice().reverse(),function(s){each$f(s,function(l){if(l.outEdges.length){var u=sum(l.outEdges,weightedTarget,a)/sum(l.outEdges,getEdgeValue);if(isNaN(u)){var c=l.outEdges.length;u=c?sum(l.outEdges,centerTarget,a)/c:0}if(a==="vertical"){var p=l.getLayout().x+(u-center(l,a))*n;l.setLayout({x:p},!0)}else{var d=l.getLayout().y+(u-center(l,a))*n;l.setLayout({y:d},!0)}}})})}function weightedTarget(t,n){return center(t.node2,n)*t.getValue()}function centerTarget(t,n){return center(t.node2,n)}function weightedSource(t,n){return center(t.node1,n)*t.getValue()}function centerSource(t,n){return center(t.node1,n)}function center(t,n){return n==="vertical"?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function getEdgeValue(t){return t.getValue()}function sum(t,n,a){for(var s=0,l=t.length,u=-1;++u<l;){var c=+n(t[u],a);isNaN(c)||(s+=c)}return s}function relaxLeftToRight(t,n,a){each$f(t,function(s){each$f(s,function(l){if(l.inEdges.length){var u=sum(l.inEdges,weightedSource,a)/sum(l.inEdges,getEdgeValue);if(isNaN(u)){var c=l.inEdges.length;u=c?sum(l.inEdges,centerSource,a)/c:0}if(a==="vertical"){var p=l.getLayout().x+(u-center(l,a))*n;l.setLayout({x:p},!0)}else{var d=l.getLayout().y+(u-center(l,a))*n;l.setLayout({y:d},!0)}}})})}function computeEdgeDepths(t,n){var a=n==="vertical"?"x":"y";each$f(t,function(s){s.outEdges.sort(function(l,u){return l.node2.getLayout()[a]-u.node2.getLayout()[a]}),s.inEdges.sort(function(l,u){return l.node1.getLayout()[a]-u.node1.getLayout()[a]})}),each$f(t,function(s){var l=0,u=0;each$f(s.outEdges,function(c){c.setLayout({sy:l},!0),l+=c.getLayout().dy}),each$f(s.inEdges,function(c){c.setLayout({ty:u},!0),u+=c.getLayout().dy})})}function sankeyVisual(t){t.eachSeriesByType("sankey",function(n){var a=n.getGraph(),s=a.nodes,l=a.edges;if(s.length){var u=1/0,c=-1/0;each$f(s,function(p){var d=p.getLayout().value;d<u&&(u=d),d>c&&(c=d)}),each$f(s,function(p){var d=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[u,c],visual:n.get("color")}),x=d.mapValueToVisual(p.getLayout().value),_=p.getModel().get(["itemStyle","color"]);_!=null?(p.setVisual("color",_),p.setVisual("style",{fill:_})):(p.setVisual("color",x),p.setVisual("style",{fill:x}))})}l.length&&each$f(l,function(p){var d=p.getModel().get("lineStyle");p.setVisual("style",d)})})}function install$A(t){t.registerChartView(SankeyView),t.registerSeriesModel(SankeySeriesModel),t.registerLayout(sankeyLayout),t.registerVisual(sankeyVisual),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(n,a){a.eachComponent({mainType:"series",subType:"sankey",query:n},function(s){s.setNodePosition(n.dataIndex,[n.localX,n.localY])})})}var WhiskerBoxCommonMixin=function(){function t(){}return t.prototype._hasEncodeRule=function(n){var a=this.getEncode();return a&&a.get(n)!=null},t.prototype.getInitialData=function(n,a){var s,l=a.getComponent("xAxis",this.get("xAxisIndex")),u=a.getComponent("yAxis",this.get("yAxisIndex")),c=l.get("type"),p=u.get("type"),d;c==="category"?(n.layout="horizontal",s=l.getOrdinalMeta(),d=!this._hasEncodeRule("x")):p==="category"?(n.layout="vertical",s=u.getOrdinalMeta(),d=!this._hasEncodeRule("y")):n.layout=n.layout||"horizontal";var x=["x","y"],_=n.layout==="horizontal"?0:1,S=this._baseAxisDim=x[_],T=x[1-_],A=[l,u],R=A[_].get("type"),D=A[1-_].get("type"),O=n.data;if(O&&d){var F=[];each$f(O,function(Z,W){var J;isArray$1(Z)?(J=Z.slice(),Z.unshift(W)):isArray$1(Z.value)?(J=extend({},Z),J.value=J.value.slice(),Z.value.unshift(W)):J=Z,F.push(J)}),n.data=F}var z=this.defaultValueDimensions,j=[{name:S,type:getDimensionTypeByAxis(R),ordinalMeta:s,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:T,type:getDimensionTypeByAxis(D),dimsDef:z.slice()}];return createSeriesDataSimply(this,{coordDimensions:j,dimensionsCount:z.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,j,this)})},t.prototype.getBaseAxis=function(){var n=this._baseAxisDim;return this.ecModel.getComponent(n+"Axis",this.get(n+"AxisIndex")).axis},t}(),BoxplotSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],a.visualDrawType="stroke",a}return n.type="series.boxplot",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},n}(SeriesModel);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);var BoxplotView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this.group,p=this._data;this._data||c.removeAll();var d=a.get("layout")==="horizontal"?1:0;u.diff(p).add(function(x){if(u.hasValue(x)){var _=u.getItemLayout(x),S=createNormalBox$1(_,u,x,d,!0);u.setItemGraphicEl(x,S),c.add(S)}}).update(function(x,_){var S=p.getItemGraphicEl(_);if(!u.hasValue(x)){c.remove(S);return}var T=u.getItemLayout(x);S?(saveOldStyle(S),updateNormalBoxData(T,S,u,x)):S=createNormalBox$1(T,u,x,d),c.add(S),u.setItemGraphicEl(x,S)}).remove(function(x){var _=p.getItemGraphicEl(x);_&&c.remove(_)}).execute(),this._data=u},n.prototype.remove=function(a){var s=this.group,l=this._data;this._data=null,l&&l.eachItemGraphicEl(function(u){u&&s.remove(u)})},n.type="boxplot",n}(ChartView),BoxPathShape=function(){function t(){}return t}(),BoxPath=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="boxplotBoxPath",s}return n.prototype.getDefaultShape=function(){return new BoxPathShape},n.prototype.buildPath=function(a,s){var l=s.points,u=0;for(a.moveTo(l[u][0],l[u][1]),u++;u<4;u++)a.lineTo(l[u][0],l[u][1]);for(a.closePath();u<l.length;u++)a.moveTo(l[u][0],l[u][1]),u++,a.lineTo(l[u][0],l[u][1])},n}(Path);function createNormalBox$1(t,n,a,s,l){var u=t.ends,c=new BoxPath({shape:{points:l?transInit$1(u,s,t):u}});return updateNormalBoxData(t,c,n,a,l),c}function updateNormalBoxData(t,n,a,s,l){var u=a.hostModel,c=graphic$1[l?"initProps":"updateProps"];c(n,{shape:{points:t.ends}},u,s),n.useStyle(a.getItemVisual(s,"style")),n.style.strokeNoScale=!0,n.z2=100;var p=a.getItemModel(s),d=p.getModel("emphasis");setStatesStylesFromModel(n,p),toggleHoverEmphasis(n,d.get("focus"),d.get("blurScope"),d.get("disabled"))}function transInit$1(t,n,a){return map$1(t,function(s){return s=s.slice(),s[n]=a.initBaseline,s})}var each$9=each$f;function boxplotLayout(t){var n=groupSeriesByAxis(t);each$9(n,function(a){var s=a.seriesModels;s.length&&(calculateBase(a),each$9(s,function(l,u){layoutSingleSeries(l,a.boxOffsetList[u],a.boxWidthList[u])}))})}function groupSeriesByAxis(t){var n=[],a=[];return t.eachSeriesByType("boxplot",function(s){var l=s.getBaseAxis(),u=indexOf(a,l);u<0&&(u=a.length,a[u]=l,n[u]={axis:l,seriesModels:[]}),n[u].seriesModels.push(s)}),n}function calculateBase(t){var n=t.axis,a=t.seriesModels,s=a.length,l=t.boxWidthList=[],u=t.boxOffsetList=[],c=[],p;if(n.type==="category")p=n.getBandWidth();else{var d=0;each$9(a,function(R){d=Math.max(d,R.getData().count())});var x=n.getExtent();p=Math.abs(x[1]-x[0])/d}each$9(a,function(R){var D=R.get("boxWidth");isArray$1(D)||(D=[D,D]),c.push([parsePercent(D[0],p)||0,parsePercent(D[1],p)||0])});var _=p*.8-2,S=_/s*.3,T=(_-S*(s-1))/s,A=T/2-_/2;each$9(a,function(R,D){u.push(A),A+=S+T,l.push(Math.min(Math.max(T,c[D][0]),c[D][1]))})}function layoutSingleSeries(t,n,a){var s=t.coordinateSystem,l=t.getData(),u=a/2,c=t.get("layout")==="horizontal"?0:1,p=1-c,d=["x","y"],x=l.mapDimension(d[c]),_=l.mapDimensionsAll(d[p]);if(x==null||_.length<5)return;for(var S=0;S<l.count();S++){var T=l.get(x,S),A=j(T,_[2],S),R=j(T,_[0],S),D=j(T,_[1],S),O=j(T,_[3],S),F=j(T,_[4],S),z=[];Z(z,D,!1),Z(z,O,!0),z.push(R,D,F,O),W(z,R),W(z,F),W(z,A),l.setItemLayout(S,{initBaseline:A[p],ends:z})}function j(J,en,tn){var Ct=l.get(en,tn),Q=[];Q[c]=J,Q[p]=Ct;var on;return isNaN(J)||isNaN(Ct)?on=[NaN,NaN]:(on=s.dataToPoint(Q),on[c]+=n),on}function Z(J,en,tn){var Ct=en.slice(),Q=en.slice();Ct[c]+=u,Q[c]-=u,tn?J.push(Ct,Q):J.push(Q,Ct)}function W(J,en){var tn=en.slice(),Ct=en.slice();tn[c]-=u,Ct[c]+=u,J.push(tn,Ct)}}function prepareBoxplotData(t,n){n=n||{};for(var a=[],s=[],l=n.boundIQR,u=l==="none"||l===0,c=0;c<t.length;c++){var p=asc$2(t[c].slice()),d=quantile(p,.25),x=quantile(p,.5),_=quantile(p,.75),S=p[0],T=p[p.length-1],A=(l??1.5)*(_-d),R=u?S:Math.max(S,d-A),D=u?T:Math.min(T,_+A),O=n.itemNameFormatter,F=isFunction$1(O)?O({value:c}):isString$1(O)?O.replace("{value}",c+""):c+"";a.push([F,R,d,x,_,D]);for(var z=0;z<p.length;z++){var j=p[z];if(j<R||j>D){var Z=[F,j];s.push(Z)}}}return{boxData:a,outliers:s}}var boxplotTransform={type:"echarts:boxplot",transform:function t(n){var a=n.upstream;if(a.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var s="";throwError(s)}var l=prepareBoxplotData(a.getRawData(),n.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:l.boxData},{data:l.outliers}]}};function install$z(t){t.registerSeriesModel(BoxplotSeriesModel),t.registerChartView(BoxplotView),t.registerLayout(boxplotLayout),t.registerTransform(boxplotTransform)}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"];function getColor(t,n){return n.get(t>0?positiveColorQuery:negativeColorQuery)}function getBorderColor(t,n){return n.get(t===0?dojiBorderColorQuery:t>0?positiveBorderColorQuery:negativeBorderColorQuery)}var candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(t,n){if(!n.isSeriesFiltered(t)){var a=t.pipelineContext.large;return!a&&{progress:function(s,l){for(var u;(u=s.next())!=null;){var c=l.getItemModel(u),p=l.getItemLayout(u).sign,d=c.getItemStyle();d.fill=getColor(p,c),d.stroke=getBorderColor(p,c)||d.fill;var x=l.ensureUniqueItemVisual(u,"style");extend(x,d)}}}}}},SKIP_PROPS=["color","borderColor"],CandlestickView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},n.prototype.incrementalPrepareRender=function(a,s,l){this._clear(),this._updateDrawMode(a)},n.prototype.incrementalRender=function(a,s,l,u){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,s):this._incrementalRenderNormal(a,s)},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype._updateDrawMode=function(a){var s=a.pipelineContext.large;(this._isLargeDraw==null||s!==this._isLargeDraw)&&(this._isLargeDraw=s,this._clear())},n.prototype._renderNormal=function(a){var s=a.getData(),l=this._data,u=this.group,c=s.getLayout("isSimpleBox"),p=a.get("clip",!0),d=a.coordinateSystem,x=d.getArea&&d.getArea();this._data||u.removeAll(),s.diff(l).add(function(_){if(s.hasValue(_)){var S=s.getItemLayout(_);if(p&&isNormalBoxClipped(x,S))return;var T=createNormalBox(S,_,!0);initProps(T,{shape:{points:S.ends}},a,_),setBoxCommon(T,s,_,c),u.add(T),s.setItemGraphicEl(_,T)}}).update(function(_,S){var T=l.getItemGraphicEl(S);if(!s.hasValue(_)){u.remove(T);return}var A=s.getItemLayout(_);if(p&&isNormalBoxClipped(x,A)){u.remove(T);return}T?(updateProps$1(T,{shape:{points:A.ends}},a,_),saveOldStyle(T)):T=createNormalBox(A),setBoxCommon(T,s,_,c),u.add(T),s.setItemGraphicEl(_,T)}).remove(function(_){var S=l.getItemGraphicEl(_);S&&u.remove(S)}).execute(),this._data=s},n.prototype._renderLarge=function(a){this._clear(),createLarge(a,this.group);var s=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;s?this.group.setClipPath(s):this.group.removeClipPath()},n.prototype._incrementalRenderNormal=function(a,s){for(var l=s.getData(),u=l.getLayout("isSimpleBox"),c;(c=a.next())!=null;){var p=l.getItemLayout(c),d=createNormalBox(p);setBoxCommon(d,l,c,u),d.incremental=!0,this.group.add(d),this._progressiveEls.push(d)}},n.prototype._incrementalRenderLarge=function(a,s){createLarge(s,this.group,this._progressiveEls,!0)},n.prototype.remove=function(a){this._clear()},n.prototype._clear=function(){this.group.removeAll(),this._data=null},n.type="candlestick",n}(ChartView),NormalBoxPathShape=function(){function t(){}return t}(),NormalBoxPath=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="normalCandlestickBox",s}return n.prototype.getDefaultShape=function(){return new NormalBoxPathShape},n.prototype.buildPath=function(a,s){var l=s.points;this.__simpleBox?(a.moveTo(l[4][0],l[4][1]),a.lineTo(l[6][0],l[6][1])):(a.moveTo(l[0][0],l[0][1]),a.lineTo(l[1][0],l[1][1]),a.lineTo(l[2][0],l[2][1]),a.lineTo(l[3][0],l[3][1]),a.closePath(),a.moveTo(l[4][0],l[4][1]),a.lineTo(l[5][0],l[5][1]),a.moveTo(l[6][0],l[6][1]),a.lineTo(l[7][0],l[7][1]))},n}(Path);function createNormalBox(t,n,a){var s=t.ends;return new NormalBoxPath({shape:{points:a?transInit(s,t):s},z2:100})}function isNormalBoxClipped(t,n){for(var a=!0,s=0;s<n.ends.length;s++)if(t.contain(n.ends[s][0],n.ends[s][1])){a=!1;break}return a}function setBoxCommon(t,n,a,s){var l=n.getItemModel(a);t.useStyle(n.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.__simpleBox=s,setStatesStylesFromModel(t,l);var u=n.getItemLayout(a).sign;each$f(t.states,function(p,d){var x=l.getModel(d),_=getColor(u,x),S=getBorderColor(u,x)||_,T=p.style||(p.style={});_&&(T.fill=_),S&&(T.stroke=S)});var c=l.getModel("emphasis");toggleHoverEmphasis(t,c.get("focus"),c.get("blurScope"),c.get("disabled"))}function transInit(t,n){return map$1(t,function(a){return a=a.slice(),a[1]=n.initBaseline,a})}var LargeBoxPathShape=function(){function t(){}return t}(),LargeBoxPath=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.type="largeCandlestickBox",s}return n.prototype.getDefaultShape=function(){return new LargeBoxPathShape},n.prototype.buildPath=function(a,s){for(var l=s.points,u=0;u<l.length;)if(this.__sign===l[u++]){var c=l[u++];a.moveTo(c,l[u++]),a.lineTo(c,l[u++])}else u+=3},n}(Path);function createLarge(t,n,a,s){var l=t.getData(),u=l.getLayout("largePoints"),c=new LargeBoxPath({shape:{points:u},__sign:1,ignoreCoarsePointer:!0});n.add(c);var p=new LargeBoxPath({shape:{points:u},__sign:-1,ignoreCoarsePointer:!0});n.add(p);var d=new LargeBoxPath({shape:{points:u},__sign:0,ignoreCoarsePointer:!0});n.add(d),setLargeStyle(1,c,t),setLargeStyle(-1,p,t),setLargeStyle(0,d,t),s&&(c.incremental=!0,p.incremental=!0),a&&a.push(c,p)}function setLargeStyle(t,n,a,s){var l=getBorderColor(t,a)||getColor(t,a),u=a.getModel("itemStyle").getItemStyle(SKIP_PROPS);n.useStyle(u),n.style.fill=null,n.style.stroke=l}var CandlestickSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return n.prototype.getShadowDim=function(){return"open"},n.prototype.brushSelector=function(a,s,l){var u=s.getItemLayout(a);return u&&l.rect(u.brushRect)},n.type="series.candlestick",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},n}(SeriesModel);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);function candlestickPreprocessor(t){!t||!isArray$1(t.series)||each$f(t.series,function(n){isObject$3(n)&&n.type==="k"&&(n.type="candlestick")})}var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(t){var n=t.coordinateSystem,a=t.getData(),s=calculateCandleWidth(t,a),l=0,u=1,c=["x","y"],p=a.getDimensionIndex(a.mapDimension(c[l])),d=map$1(a.mapDimensionsAll(c[u]),a.getDimensionIndex,a),x=d[0],_=d[1],S=d[2],T=d[3];if(a.setLayout({candleWidth:s,isSimpleBox:s<=1.3}),p<0||d.length<4)return;return{progress:t.pipelineContext.large?R:A};function A(D,O){for(var F,z=O.getStore();(F=D.next())!=null;){var j=z.get(p,F),Z=z.get(x,F),W=z.get(_,F),J=z.get(S,F),en=z.get(T,F),tn=Math.min(Z,W),Ct=Math.max(Z,W),Q=ax(tn,j),on=ax(Ct,j),gn=ax(J,j),In=ax(en,j),dn=[];sx(dn,on,0),sx(dn,Q,1),dn.push(ox(In),ox(on),ox(gn),ox(Q));var ix=O.getItemModel(F),Cn=!!ix.get(["itemStyle","borderColorDoji"]);O.setItemLayout(F,{sign:getSign(z,F,Z,W,_,Cn),initBaseline:Z>W?on[u]:Q[u],ends:dn,brushRect:lx(J,en,j)})}function ax(hx,_x){var ux=[];return ux[l]=_x,ux[u]=hx,isNaN(_x)||isNaN(hx)?[NaN,NaN]:n.dataToPoint(ux)}function sx(hx,_x,ux){var px=_x.slice(),dx=_x.slice();px[l]=subPixelOptimize(px[l]+s/2,1,!1),dx[l]=subPixelOptimize(dx[l]-s/2,1,!0),ux?hx.push(px,dx):hx.push(dx,px)}function lx(hx,_x,ux){var px=ax(hx,ux),dx=ax(_x,ux);return px[l]-=s/2,dx[l]-=s/2,{x:px[0],y:px[1],width:s,height:dx[1]-px[1]}}function ox(hx){return hx[l]=subPixelOptimize(hx[l],1),hx}}function R(D,O){for(var F=createFloat32Array(D.count*4),z=0,j,Z=[],W=[],J,en=O.getStore(),tn=!!t.get(["itemStyle","borderColorDoji"]);(J=D.next())!=null;){var Ct=en.get(p,J),Q=en.get(x,J),on=en.get(_,J),gn=en.get(S,J),In=en.get(T,J);if(isNaN(Ct)||isNaN(gn)||isNaN(In)){F[z++]=NaN,z+=3;continue}F[z++]=getSign(en,J,Q,on,_,tn),Z[l]=Ct,Z[u]=gn,j=n.dataToPoint(Z,null,W),F[z++]=j?j[0]:NaN,F[z++]=j?j[1]:NaN,Z[u]=In,j=n.dataToPoint(Z,null,W),F[z++]=j?j[1]:NaN}O.setLayout("largePoints",F)}}};function getSign(t,n,a,s,l,u){var c;return a>s?c=-1:a<s?c=1:c=u?0:n>0?t.get(l,n-1)<=s?1:-1:1,c}function calculateCandleWidth(t,n){var a=t.getBaseAxis(),s,l=a.type==="category"?a.getBandWidth():(s=a.getExtent(),Math.abs(s[1]-s[0])/n.count()),u=parsePercent(retrieve2(t.get("barMaxWidth"),l),l),c=parsePercent(retrieve2(t.get("barMinWidth"),1),l),p=t.get("barWidth");return p!=null?parsePercent(p,l):Math.max(Math.min(l/2,u),c)}function install$y(t){t.registerChartView(CandlestickView),t.registerSeriesModel(CandlestickSeriesModel),t.registerPreprocessor(candlestickPreprocessor),t.registerVisual(candlestickVisual),t.registerLayout(candlestickLayout)}function updateRipplePath(t,n){var a=n.rippleEffectColor||n.color;t.eachChild(function(s){s.attr({z:n.z,zlevel:n.zlevel,style:{stroke:n.brushType==="stroke"?a:null,fill:n.brushType==="fill"?a:null}})})}var EffectSymbol=function(t){__extends(n,t);function n(a,s){var l=t.call(this)||this,u=new Symbol$1(a,s),c=new Group$3;return l.add(u),l.add(c),l.updateData(a,s),l}return n.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},n.prototype.startEffectAnimation=function(a){for(var s=a.symbolType,l=a.color,u=a.rippleNumber,c=this.childAt(1),p=0;p<u;p++){var d=createSymbol$1(s,-1,-1,2,2,l);d.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var x=-p/u*a.period+a.effectOffset;d.animate("",!0).when(a.period,{scaleX:a.rippleScale/2,scaleY:a.rippleScale/2}).delay(x).start(),d.animateStyle(!0).when(a.period,{opacity:0}).delay(x).start(),c.add(d)}updateRipplePath(c,a)},n.prototype.updateEffectAnimation=function(a){for(var s=this._effectCfg,l=this.childAt(1),u=["symbolType","period","rippleScale","rippleNumber"],c=0;c<u.length;c++){var p=u[c];if(s[p]!==a[p]){this.stopEffectAnimation(),this.startEffectAnimation(a);return}}updateRipplePath(l,a)},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n.prototype.getSymbolType=function(){var a=this.childAt(0);return a&&a.getSymbolType()},n.prototype.updateData=function(a,s){var l=this,u=a.hostModel;this.childAt(0).updateData(a,s);var c=this.childAt(1),p=a.getItemModel(s),d=a.getItemVisual(s,"symbol"),x=normalizeSymbolSize(a.getItemVisual(s,"symbolSize")),_=a.getItemVisual(s,"style"),S=_&&_.fill,T=p.getModel("emphasis");c.setScale(x),c.traverse(function(O){O.setStyle("fill",S)});var A=normalizeSymbolOffset(a.getItemVisual(s,"symbolOffset"),x);A&&(c.x=A[0],c.y=A[1]);var R=a.getItemVisual(s,"symbolRotate");c.rotation=(R||0)*Math.PI/180||0;var D={};D.showEffectOn=u.get("showEffectOn"),D.rippleScale=p.get(["rippleEffect","scale"]),D.brushType=p.get(["rippleEffect","brushType"]),D.period=p.get(["rippleEffect","period"])*1e3,D.effectOffset=s/a.count(),D.z=u.getShallow("z")||0,D.zlevel=u.getShallow("zlevel")||0,D.symbolType=d,D.color=S,D.rippleEffectColor=p.get(["rippleEffect","color"]),D.rippleNumber=p.get(["rippleEffect","number"]),D.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(D):this.startEffectAnimation(D),this._effectCfg=D):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(O){O==="emphasis"?D.showEffectOn!=="render"&&l.startEffectAnimation(D):O==="normal"&&D.showEffectOn!=="render"&&l.stopEffectAnimation()}),this._effectCfg=D,toggleHoverEmphasis(this,T.get("focus"),T.get("blurScope"),T.get("disabled"))},n.prototype.fadeOut=function(a){a&&a()},n}(Group$3),EffectScatterView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},n.prototype.render=function(a,s,l){var u=a.getData(),c=this._symbolDraw;c.updateData(u,{clipShape:this._getClipShape(a)}),this.group.add(c.group)},n.prototype._getClipShape=function(a){var s=a.coordinateSystem,l=s&&s.getArea&&s.getArea();return a.get("clip",!0)?l:null},n.prototype.updateTransform=function(a,s,l){var u=a.getData();this.group.dirty();var c=pointsLayout("").reset(a,s,l);c.progress&&c.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout()},n.prototype._updateGroupTransform=function(a){var s=a.coordinateSystem;s&&s.getRoamTransform&&(this.group.transform=clone$2(s.getRoamTransform()),this.group.decomposeTransform())},n.prototype.remove=function(a,s){this._symbolDraw&&this._symbolDraw.remove(!0)},n.type="effectScatter",n}(ChartView),EffectScatterSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.brushSelector=function(a,s,l){return l.point(s.getItemLayout(a))},n.type="series.effectScatter",n.dependencies=["grid","polar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},n}(SeriesModel);function install$x(t){t.registerChartView(EffectScatterView),t.registerSeriesModel(EffectScatterSeriesModel),t.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;return u.add(u.createLine(a,s,l)),u._updateEffectSymbol(a,s),u}return n.prototype.createLine=function(a,s,l){return new Line(a,s,l)},n.prototype._updateEffectSymbol=function(a,s){var l=a.getItemModel(s),u=l.getModel("effect"),c=u.get("symbolSize"),p=u.get("symbol");isArray$1(c)||(c=[c,c]);var d=a.getItemVisual(s,"style"),x=u.get("color")||d&&d.stroke,_=this.childAt(1);this._symbolType!==p&&(this.remove(_),_=createSymbol$1(p,-.5,-.5,1,1,x),_.z2=100,_.culling=!0,this.add(_)),_&&(_.setStyle("shadowColor",x),_.setStyle(u.getItemStyle(["color"])),_.scaleX=c[0],_.scaleY=c[1],_.setColor(x),this._symbolType=p,this._symbolScale=c,this._updateEffectAnimation(a,u,s))},n.prototype._updateEffectAnimation=function(a,s,l){var u=this.childAt(1);if(u){var c=a.getItemLayout(l),p=s.get("period")*1e3,d=s.get("loop"),x=s.get("roundTrip"),_=s.get("constantSpeed"),S=retrieve(s.get("delay"),function(A){return A/a.count()*p/3});if(u.ignore=!0,this._updateAnimationPoints(u,c),_>0&&(p=this._getLineLength(u)/_*1e3),p!==this._period||d!==this._loop||x!==this._roundTrip){u.stopAnimation();var T=void 0;isFunction$1(S)?T=S(l):T=S,u.__t>0&&(T=-p*u.__t),this._animateSymbol(u,p,T,d,x)}this._period=p,this._loop=d,this._roundTrip=x}},n.prototype._animateSymbol=function(a,s,l,u,c){if(s>0){a.__t=0;var p=this,d=a.animate("",u).when(c?s*2:s,{__t:c?2:1}).delay(l).during(function(){p._updateSymbolPosition(a)});u||d.done(function(){p.remove(a)}),d.start()}},n.prototype._getLineLength=function(a){return dist$1(a.__p1,a.__cp1)+dist$1(a.__cp1,a.__p2)},n.prototype._updateAnimationPoints=function(a,s){a.__p1=s[0],a.__p2=s[1],a.__cp1=s[2]||[(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]},n.prototype.updateData=function(a,s,l){this.childAt(0).updateData(a,s,l),this._updateEffectSymbol(a,s)},n.prototype._updateSymbolPosition=function(a){var s=a.__p1,l=a.__p2,u=a.__cp1,c=a.__t<1?a.__t:2-a.__t,p=[a.x,a.y],d=p.slice(),x=quadraticAt$1,_=quadraticDerivativeAt;p[0]=x(s[0],u[0],l[0],c),p[1]=x(s[1],u[1],l[1],c);var S=a.__t<1?_(s[0],u[0],l[0],c):_(l[0],u[0],s[0],1-c),T=a.__t<1?_(s[1],u[1],l[1],c):_(l[1],u[1],s[1],1-c);a.rotation=-Math.atan2(T,S)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(a.__lastT!==void 0&&a.__lastT<a.__t?(a.scaleY=dist$1(d,p)*1.05,c===1&&(p[0]=d[0]+(p[0]-d[0])/2,p[1]=d[1]+(p[1]-d[1])/2)):a.__lastT===1?a.scaleY=2*dist$1(s,p):a.scaleY=this._symbolScale[1]),a.__lastT=a.__t,a.ignore=!1,a.x=p[0],a.y=p[1]},n.prototype.updateLayout=function(a,s){this.childAt(0).updateLayout(a,s);var l=a.getItemModel(s).getModel("effect");this._updateEffectAnimation(a,l,s)},n}(Group$3),Polyline=function(t){__extends(n,t);function n(a,s,l){var u=t.call(this)||this;return u._createPolyline(a,s,l),u}return n.prototype._createPolyline=function(a,s,l){var u=a.getItemLayout(s),c=new Polyline$1({shape:{points:u}});this.add(c),this._updateCommonStl(a,s,l)},n.prototype.updateData=function(a,s,l){var u=a.hostModel,c=this.childAt(0),p={shape:{points:a.getItemLayout(s)}};updateProps$1(c,p,u,s),this._updateCommonStl(a,s,l)},n.prototype._updateCommonStl=function(a,s,l){var u=this.childAt(0),c=a.getItemModel(s),p=l&&l.emphasisLineStyle,d=l&&l.focus,x=l&&l.blurScope,_=l&&l.emphasisDisabled;if(!l||a.hasItemOption){var S=c.getModel("emphasis");p=S.getModel("lineStyle").getLineStyle(),_=S.get("disabled"),d=S.get("focus"),x=S.get("blurScope")}u.useStyle(a.getItemVisual(s,"style")),u.style.fill=null,u.style.strokeNoScale=!0;var T=u.ensureState("emphasis");T.style=p,toggleHoverEmphasis(this,d,x,_)},n.prototype.updateLayout=function(a,s){var l=this.childAt(0);l.setShape("points",a.getItemLayout(s))},n}(Group$3),EffectPolyline=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a._lastFrame=0,a._lastFramePercent=0,a}return n.prototype.createLine=function(a,s,l){return new Polyline(a,s,l)},n.prototype._updateAnimationPoints=function(a,s){this._points=s;for(var l=[0],u=0,c=1;c<s.length;c++){var p=s[c-1],d=s[c];u+=dist$1(p,d),l.push(u)}if(u===0){this._length=0;return}for(var c=0;c<l.length;c++)l[c]/=u;this._offsets=l,this._length=u},n.prototype._getLineLength=function(){return this._length},n.prototype._updateSymbolPosition=function(a){var s=a.__t<1?a.__t:2-a.__t,l=this._points,u=this._offsets,c=l.length;if(u){var p=this._lastFrame,d;if(s<this._lastFramePercent){var x=Math.min(p+1,c-1);for(d=x;d>=0&&!(u[d]<=s);d--);d=Math.min(d,c-2)}else{for(d=p;d<c&&!(u[d]>s);d++);d=Math.min(d-1,c-2)}var _=(s-u[d])/(u[d+1]-u[d]),S=l[d],T=l[d+1];a.x=S[0]*(1-_)+_*T[0],a.y=S[1]*(1-_)+_*T[1];var A=a.__t<1?T[0]-S[0]:S[0]-T[0],R=a.__t<1?T[1]-S[1]:S[1]-T[1];a.rotation=-Math.atan2(R,A)-Math.PI/2,this._lastFrame=d,this._lastFramePercent=s,a.ignore=!1}},n}(EffectLine),LargeLinesPathShape=function(){function t(){this.polyline=!1,this.curveness=0,this.segs=[]}return t}(),LargeLinesPath=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s._off=0,s.hoverDataIdx=-1,s}return n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new LargeLinesPathShape},n.prototype.buildPath=function(a,s){var l=s.segs,u=s.curveness,c;if(s.polyline)for(c=this._off;c<l.length;){var p=l[c++];if(p>0){a.moveTo(l[c++],l[c++]);for(var d=1;d<p;d++)a.lineTo(l[c++],l[c++])}}else for(c=this._off;c<l.length;){var x=l[c++],_=l[c++],S=l[c++],T=l[c++];if(a.moveTo(x,_),u>0){var A=(x+S)/2-(_-T)*u,R=(_+T)/2-(S-x)*u;a.quadraticCurveTo(A,R,S,T)}else a.lineTo(S,T)}this.incremental&&(this._off=c,this.notClear=!0)},n.prototype.findDataIndex=function(a,s){var l=this.shape,u=l.segs,c=l.curveness,p=this.style.lineWidth;if(l.polyline)for(var d=0,x=0;x<u.length;){var _=u[x++];if(_>0)for(var S=u[x++],T=u[x++],A=1;A<_;A++){var R=u[x++],D=u[x++];if(containStroke$4(S,T,R,D,p,a,s))return d}d++}else for(var d=0,x=0;x<u.length;){var S=u[x++],T=u[x++],R=u[x++],D=u[x++];if(c>0){var O=(S+R)/2-(T-D)*c,F=(T+D)/2-(R-S)*c;if(containStroke$2(S,T,O,F,R,D,p,a,s))return d}else if(containStroke$4(S,T,R,D,p,a,s))return d;d++}return-1},n.prototype.contain=function(a,s){var l=this.transformCoordToLocal(a,s),u=this.getBoundingRect();if(a=l[0],s=l[1],u.contain(a,s)){var c=this.hoverDataIdx=this.findDataIndex(a,s);return c>=0}return this.hoverDataIdx=-1,!1},n.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var s=this.shape,l=s.segs,u=1/0,c=1/0,p=-1/0,d=-1/0,x=0;x<l.length;){var _=l[x++],S=l[x++];u=Math.min(_,u),p=Math.max(_,p),c=Math.min(S,c),d=Math.max(S,d)}a=this._rect=new BoundingRect(u,c,p,d)}return a},n}(Path),LargeLineDraw=function(){function t(){this.group=new Group$3}return t.prototype.updateData=function(n){this._clear();var a=this._create();a.setShape({segs:n.getLayout("linesPoints")}),this._setCommon(a,n)},t.prototype.incrementalPrepareUpdate=function(n){this.group.removeAll(),this._clear()},t.prototype.incrementalUpdate=function(n,a){var s=this._newAdded[0],l=a.getLayout("linesPoints"),u=s&&s.shape.segs;if(u&&u.length<2e4){var c=u.length,p=new Float32Array(c+l.length);p.set(u),p.set(l,c),s.setShape({segs:p})}else{this._newAdded=[];var d=this._create();d.incremental=!0,d.setShape({segs:l}),this._setCommon(d,a),d.__startIndex=n.start}},t.prototype.remove=function(){this._clear()},t.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},t.prototype._create=function(){var n=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(n),this.group.add(n),n},t.prototype._setCommon=function(n,a,s){var l=a.hostModel;n.setShape({polyline:l.get("polyline"),curveness:l.get(["lineStyle","curveness"])}),n.useStyle(l.getModel("lineStyle").getLineStyle()),n.style.strokeNoScale=!0;var u=a.getVisual("style");u&&u.stroke&&n.setStyle("stroke",u.stroke),n.setStyle("fill",null);var c=getECData(n);c.seriesIndex=l.seriesIndex,n.on("mousemove",function(p){c.dataIndex=null;var d=n.hoverDataIdx;d>0&&(c.dataIndex=d+n.__startIndex)})},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(t){var n=t.coordinateSystem;if(n){var a=t.get("polyline"),s=t.pipelineContext.large;return{progress:function(l,u){var c=[];if(s){var p=void 0,d=l.end-l.start;if(a){for(var x=0,_=l.start;_<l.end;_++)x+=t.getLineCoordsCount(_);p=new Float32Array(d+x*2)}else p=new Float32Array(d*4);for(var S=0,T=[],_=l.start;_<l.end;_++){var A=t.getLineCoords(_,c);a&&(p[S++]=A);for(var R=0;R<A;R++)T=n.dataToPoint(c[R],!1,T),p[S++]=T[0],p[S++]=T[1]}u.setLayout("linesPoints",p)}else for(var _=l.start;_<l.end;_++){var D=u.getItemModel(_),A=t.getLineCoords(_,c),O=[];if(a)for(var F=0;F<A;F++)O.push(n.dataToPoint(c[F]));else{O[0]=n.dataToPoint(c[0]),O[1]=n.dataToPoint(c[1]);var z=D.get(["lineStyle","curveness"]);+z&&(O[2]=[(O[0][0]+O[1][0])/2-(O[0][1]-O[1][1])*z,(O[0][1]+O[1][1])/2-(O[1][0]-O[0][0])*z])}u.setItemLayout(_,O)}}}}}},LinesView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this._updateLineDraw(u,a),p=a.get("zlevel"),d=a.get(["effect","trailLength"]),x=l.getZr(),_=x.painter.getType()==="svg";_||x.painter.getLayer(p).clear(!0),this._lastZlevel!=null&&!_&&x.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(a)&&d>0&&(_||x.configLayer(p,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(d/10+.9,1),0)})),c.updateData(u);var S=a.get("clip",!0)&&createClipPath(a.coordinateSystem,!1,a);S?this.group.setClipPath(S):this.group.removeClipPath(),this._lastZlevel=p,this._finished=!0},n.prototype.incrementalPrepareRender=function(a,s,l){var u=a.getData(),c=this._updateLineDraw(u,a);c.incrementalPrepareUpdate(u),this._clearLayer(l),this._finished=!1},n.prototype.incrementalRender=function(a,s,l){this._lineDraw.incrementalUpdate(a,s.getData()),this._finished=a.end===s.getData().count()},n.prototype.eachRendered=function(a){this._lineDraw&&this._lineDraw.eachRendered(a)},n.prototype.updateTransform=function(a,s,l){var u=a.getData(),c=a.pipelineContext;if(!this._finished||c.large||c.progressiveRender)return{update:!0};var p=linesLayout.reset(a,s,l);p.progress&&p.progress({start:0,end:u.count(),count:u.count()},u),this._lineDraw.updateLayout(),this._clearLayer(l)},n.prototype._updateLineDraw=function(a,s){var l=this._lineDraw,u=this._showEffect(s),c=!!s.get("polyline"),p=s.pipelineContext,d=p.large;return(!l||u!==this._hasEffet||c!==this._isPolyline||d!==this._isLargeDraw)&&(l&&l.remove(),l=this._lineDraw=d?new LargeLineDraw:new LineDraw(c?u?EffectPolyline:Polyline:u?EffectLine:Line),this._hasEffet=u,this._isPolyline=c,this._isLargeDraw=d),this.group.add(l.group),l},n.prototype._showEffect=function(a){return!!a.get(["effect","show"])},n.prototype._clearLayer=function(a){var s=a.getZr(),l=s.painter.getType()==="svg";!l&&this._lastZlevel!=null&&s.painter.getLayer(this._lastZlevel).clear(!0)},n.prototype.remove=function(a,s){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(s)},n.prototype.dispose=function(a,s){this.remove(a,s)},n.type="lines",n}(ChartView),Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(t){var n=t.data;n&&n[0]&&n[0][0]&&n[0][0].coord&&(t.data=map$1(n,function(a){var s=[a[0].coord,a[1].coord],l={coords:s};return a[0].name&&(l.fromName=a[0].name),a[1].name&&(l.toName=a[1].name),mergeAll([l,a[0],a[1]])}))}var LinesSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return n.prototype.init=function(a){a.data=a.data||[],compatEc2(a);var s=this._processFlatCoordsArray(a.data);this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset,s.flatCoords&&(a.data=new Float32Array(s.count)),t.prototype.init.apply(this,arguments)},n.prototype.mergeOption=function(a){if(compatEc2(a),a.data){var s=this._processFlatCoordsArray(a.data);this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset,s.flatCoords&&(a.data=new Float32Array(s.count))}t.prototype.mergeOption.apply(this,arguments)},n.prototype.appendData=function(a){var s=this._processFlatCoordsArray(a.data);s.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,s.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,s.flatCoordsOffset)):(this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset),a.data=new Float32Array(s.count)),this.getRawData().appendData(a.data)},n.prototype._getCoordsFromItemModel=function(a){var s=this.getData().getItemModel(a),l=s.option instanceof Array?s.option:s.getShallow("coords");return l},n.prototype.getLineCoordsCount=function(a){return this._flatCoordsOffset?this._flatCoordsOffset[a*2+1]:this._getCoordsFromItemModel(a).length},n.prototype.getLineCoords=function(a,s){if(this._flatCoordsOffset){for(var l=this._flatCoordsOffset[a*2],u=this._flatCoordsOffset[a*2+1],c=0;c<u;c++)s[c]=s[c]||[],s[c][0]=this._flatCoords[l+c*2],s[c][1]=this._flatCoords[l+c*2+1];return u}else{for(var p=this._getCoordsFromItemModel(a),c=0;c<p.length;c++)s[c]=s[c]||[],s[c][0]=p[c][0],s[c][1]=p[c][1];return p.length}},n.prototype._processFlatCoordsArray=function(a){var s=0;if(this._flatCoords&&(s=this._flatCoords.length),isNumber(a[0])){for(var l=a.length,u=new Uint32Arr(l),c=new Float64Arr(l),p=0,d=0,x=0,_=0;_<l;){x++;var S=a[_++];u[d++]=p+s,u[d++]=S;for(var T=0;T<S;T++){var A=a[_++],R=a[_++];c[p++]=A,c[p++]=R}}return{flatCoordsOffset:new Uint32Array(u.buffer,0,d),flatCoords:c,count:x}}return{flatCoordsOffset:null,flatCoords:null,count:a.length}},n.prototype.getInitialData=function(a,s){var l=new SeriesData(["value"],this);return l.hasItemOption=!1,l.initData(a.data,[],function(u,c,p,d){if(u instanceof Array)return NaN;l.hasItemOption=!0;var x=u.value;if(x!=null)return x instanceof Array?x[d]:x}),l},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=u.getItemModel(a),p=c.get("name");if(p)return p;var d=c.get("fromName"),x=c.get("toName"),_=[];return d!=null&&_.push(d),x!=null&&_.push(x),createTooltipMarkup("nameValue",{name:_.join(" > ")})},n.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},n.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?1e4:this.get("progressive"))},n.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?2e4:this.get("progressiveThreshold"))},n.prototype.getZLevelKey=function(){var a=this.getModel("effect"),s=a.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:a.get("show")&&s>0?s+"":""},n.type="series.lines",n.dependencies=["grid","polar","geo","calendar"],n.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},n}(SeriesModel);function normalize(t){return t instanceof Array||(t=[t,t]),t}var linesVisual={seriesType:"lines",reset:function(t){var n=normalize(t.get("symbol")),a=normalize(t.get("symbolSize")),s=t.getData();s.setVisual("fromSymbol",n&&n[0]),s.setVisual("toSymbol",n&&n[1]),s.setVisual("fromSymbolSize",a&&a[0]),s.setVisual("toSymbolSize",a&&a[1]);function l(u,c){var p=u.getItemModel(c),d=normalize(p.getShallow("symbol",!0)),x=normalize(p.getShallow("symbolSize",!0));d[0]&&u.setItemVisual(c,"fromSymbol",d[0]),d[1]&&u.setItemVisual(c,"toSymbol",d[1]),x[0]&&u.setItemVisual(c,"fromSymbolSize",x[0]),x[1]&&u.setItemVisual(c,"toSymbolSize",x[1])}return{dataEach:s.hasItemOption?l:null}}};function install$w(t){t.registerChartView(LinesView),t.registerSeriesModel(LinesSeriesModel),t.registerLayout(linesLayout),t.registerVisual(linesVisual)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var n=platformApi.createCanvas();this.canvas=n}return t.prototype.update=function(n,a,s,l,u,c){var p=this._getBrush(),d=this._getGradient(u,"inRange"),x=this._getGradient(u,"outOfRange"),_=this.pointSize+this.blurSize,S=this.canvas,T=S.getContext("2d"),A=n.length;S.width=a,S.height=s;for(var R=0;R<A;++R){var D=n[R],O=D[0],F=D[1],z=D[2],j=l(z);T.globalAlpha=j,T.drawImage(p,O-_,F-_)}if(!S.width||!S.height)return S;for(var Z=T.getImageData(0,0,S.width,S.height),W=Z.data,J=0,en=W.length,tn=this.minOpacity,Ct=this.maxOpacity,Q=Ct-tn;J<en;){var j=W[J+3]/256,on=Math.floor(j*(GRADIENT_LEVELS-1))*4;if(j>0){var gn=c(j)?d:x;j>0&&(j=j*Q+tn),W[J++]=gn[on],W[J++]=gn[on+1],W[J++]=gn[on+2],W[J++]=gn[on+3]*j*256}else J+=4}return T.putImageData(Z,0,0),S},t.prototype._getBrush=function(){var n=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),a=this.pointSize+this.blurSize,s=a*2;n.width=s,n.height=s;var l=n.getContext("2d");return l.clearRect(0,0,s,s),l.shadowOffsetX=s,l.shadowBlur=this.blurSize,l.shadowColor="#000",l.beginPath(),l.arc(-a,a,this.pointSize,0,Math.PI*2,!0),l.closePath(),l.fill(),n},t.prototype._getGradient=function(n,a){for(var s=this._gradientPixels,l=s[a]||(s[a]=new Uint8ClampedArray(256*4)),u=[0,0,0,0],c=0,p=0;p<256;p++)n[a](p/255,!0,u),l[c++]=u[0],l[c++]=u[1],l[c++]=u[2],l[c++]=u[3];return l},t}();function getIsInPiecewiseRange(t,n,a){var s=t[1]-t[0];n=map$1(n,function(c){return{interval:[(c.interval[0]-t[0])/s,(c.interval[1]-t[0])/s]}});var l=n.length,u=0;return function(c){var p;for(p=u;p<l;p++){var d=n[p].interval;if(d[0]<=c&&c<=d[1]){u=p;break}}if(p===l)for(p=u-1;p>=0;p--){var d=n[p].interval;if(d[0]<=c&&c<=d[1]){u=p;break}}return p>=0&&p<l&&a[p]}}function getIsInContinuousRange(t,n){var a=t[1]-t[0];return n=[(n[0]-t[0])/a,(n[1]-t[0])/a],function(s){return s>=n[0]&&s<=n[1]}}function isGeoCoordSys(t){var n=t.dimensions;return n[0]==="lng"&&n[1]==="lat"}var HeatmapView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u;s.eachComponent("visualMap",function(p){p.eachTargetSeries(function(d){d===a&&(u=p)})}),this._progressiveEls=null,this.group.removeAll();var c=a.coordinateSystem;c.type==="cartesian2d"||c.type==="calendar"?this._renderOnCartesianAndCalendar(a,l,0,a.getData().count()):isGeoCoordSys(c)&&this._renderOnGeo(c,a,u,l)},n.prototype.incrementalPrepareRender=function(a,s,l){this.group.removeAll()},n.prototype.incrementalRender=function(a,s,l,u){var c=s.coordinateSystem;c&&(isGeoCoordSys(c)?this.render(s,l,u):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(s,u,a.start,a.end,!0)))},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype._renderOnCartesianAndCalendar=function(a,s,l,u,c){var p=a.coordinateSystem,d=isCoordinateSystemType(p,"cartesian2d"),x,_,S,T;if(d){var A=p.getAxis("x"),R=p.getAxis("y");x=A.getBandWidth()+.5,_=R.getBandWidth()+.5,S=A.scale.getExtent(),T=R.scale.getExtent()}for(var D=this.group,O=a.getData(),F=a.getModel(["emphasis","itemStyle"]).getItemStyle(),z=a.getModel(["blur","itemStyle"]).getItemStyle(),j=a.getModel(["select","itemStyle"]).getItemStyle(),Z=a.get(["itemStyle","borderRadius"]),W=getLabelStatesModels(a),J=a.getModel("emphasis"),en=J.get("focus"),tn=J.get("blurScope"),Ct=J.get("disabled"),Q=d?[O.mapDimension("x"),O.mapDimension("y"),O.mapDimension("value")]:[O.mapDimension("time"),O.mapDimension("value")],on=l;on<u;on++){var gn=void 0,In=O.getItemVisual(on,"style");if(d){var dn=O.get(Q[0],on),ix=O.get(Q[1],on);if(isNaN(O.get(Q[2],on))||isNaN(dn)||isNaN(ix)||dn<S[0]||dn>S[1]||ix<T[0]||ix>T[1])continue;var Cn=p.dataToPoint([dn,ix]);gn=new Rect$2({shape:{x:Cn[0]-x/2,y:Cn[1]-_/2,width:x,height:_},style:In})}else{if(isNaN(O.get(Q[1],on)))continue;gn=new Rect$2({z2:1,shape:p.dataToRect([O.get(Q[0],on)]).contentShape,style:In})}if(O.hasItemOption){var ax=O.getItemModel(on),sx=ax.getModel("emphasis");F=sx.getModel("itemStyle").getItemStyle(),z=ax.getModel(["blur","itemStyle"]).getItemStyle(),j=ax.getModel(["select","itemStyle"]).getItemStyle(),Z=ax.get(["itemStyle","borderRadius"]),en=sx.get("focus"),tn=sx.get("blurScope"),Ct=sx.get("disabled"),W=getLabelStatesModels(ax)}gn.shape.r=Z;var lx=a.getRawValue(on),ox="-";lx&&lx[2]!=null&&(ox=lx[2]+""),setLabelStyle(gn,W,{labelFetcher:a,labelDataIndex:on,defaultOpacity:In.opacity,defaultText:ox}),gn.ensureState("emphasis").style=F,gn.ensureState("blur").style=z,gn.ensureState("select").style=j,toggleHoverEmphasis(gn,en,tn,Ct),gn.incremental=c,c&&(gn.states.emphasis.hoverLayer=!0),D.add(gn),O.setItemGraphicEl(on,gn),this._progressiveEls&&this._progressiveEls.push(gn)}},n.prototype._renderOnGeo=function(a,s,l,u){var c=l.targetVisuals.inRange,p=l.targetVisuals.outOfRange,d=s.getData(),x=this._hmLayer||this._hmLayer||new HeatmapLayer;x.blurSize=s.get("blurSize"),x.pointSize=s.get("pointSize"),x.minOpacity=s.get("minOpacity"),x.maxOpacity=s.get("maxOpacity");var _=a.getViewRect().clone(),S=a.getRoamTransform();_.applyTransform(S);var T=Math.max(_.x,0),A=Math.max(_.y,0),R=Math.min(_.width+_.x,u.getWidth()),D=Math.min(_.height+_.y,u.getHeight()),O=R-T,F=D-A,z=[d.mapDimension("lng"),d.mapDimension("lat"),d.mapDimension("value")],j=d.mapArray(z,function(en,tn,Ct){var Q=a.dataToPoint([en,tn]);return Q[0]-=T,Q[1]-=A,Q.push(Ct),Q}),Z=l.getExtent(),W=l.type==="visualMap.continuous"?getIsInContinuousRange(Z,l.option.range):getIsInPiecewiseRange(Z,l.getPieceList(),l.option.selected);x.update(j,O,F,c.color.getNormalizer(),{inRange:c.color.getColorMapper(),outOfRange:p.color.getColorMapper()},W);var J=new ZRImage({style:{width:O,height:F,x:T,y:A,image:x.canvas},silent:!0});this.group.add(J)},n.type="heatmap",n}(ChartView),HeatmapSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{generateCoord:"value"})},n.prototype.preventIncremental=function(){var a=CoordinateSystemManager.get(this.get("coordinateSystem"));if(a&&a.dimensions)return a.dimensions[0]==="lng"&&a.dimensions[1]==="lat"},n.type="series.heatmap",n.dependencies=["grid","geo","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},n}(SeriesModel);function install$v(t){t.registerChartView(HeatmapView),t.registerSeriesModel(HeatmapSeriesModel)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle,PictorialBarView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=this.group,c=a.getData(),p=this._data,d=a.coordinateSystem,x=d.getBaseAxis(),_=x.isHorizontal(),S=d.master.getRect(),T={ecSize:{width:l.getWidth(),height:l.getHeight()},seriesModel:a,coordSys:d,coordSysExtent:[[S.x,S.x+S.width],[S.y,S.y+S.height]],isHorizontal:_,valueDim:LAYOUT_ATTRS[+_],categoryDim:LAYOUT_ATTRS[1-+_]};c.diff(p).add(function(R){if(c.hasValue(R)){var D=getItemModel(c,R),O=getSymbolMeta(c,R,D,T),F=createBar(c,T,O);c.setItemGraphicEl(R,F),u.add(F),updateCommon(F,T,O)}}).update(function(R,D){var O=p.getItemGraphicEl(D);if(!c.hasValue(R)){u.remove(O);return}var F=getItemModel(c,R),z=getSymbolMeta(c,R,F,T),j=getShapeStr(c,z);O&&j!==O.__pictorialShapeStr&&(u.remove(O),c.setItemGraphicEl(R,null),O=null),O?updateBar(O,T,z):O=createBar(c,T,z,!0),c.setItemGraphicEl(R,O),O.__pictorialSymbolMeta=z,u.add(O),updateCommon(O,T,z)}).remove(function(R){var D=p.getItemGraphicEl(R);D&&removeBar(p,R,D.__pictorialSymbolMeta.animationModel,D)}).execute();var A=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;return A?u.setClipPath(A):u.removeClipPath(),this._data=c,this.group},n.prototype.remove=function(a,s){var l=this.group,u=this._data;a.get("animation")?u&&u.eachItemGraphicEl(function(c){removeBar(u,getECData(c).dataIndex,a,c)}):l.removeAll()},n.type="pictorialBar",n}(ChartView);function getSymbolMeta(t,n,a,s){var l=t.getItemLayout(n),u=a.get("symbolRepeat"),c=a.get("symbolClip"),p=a.get("symbolPosition")||"start",d=a.get("symbolRotate"),x=(d||0)*Math.PI/180||0,_=a.get("symbolPatternSize")||2,S=a.isAnimationEnabled(),T={dataIndex:n,layout:l,itemModel:a,symbolType:t.getItemVisual(n,"symbol")||"circle",style:t.getItemVisual(n,"style"),symbolClip:c,symbolRepeat:u,symbolRepeatDirection:a.get("symbolRepeatDirection"),symbolPatternSize:_,rotation:x,animationModel:S?a:null,hoverScale:S&&a.get(["emphasis","scale"]),z2:a.getShallow("z",!0)||0};prepareBarLength(a,u,l,s,T),prepareSymbolSize(t,n,l,u,c,T.boundingLength,T.pxSign,_,s,T),prepareLineWidth(a,T.symbolScale,x,s,T);var A=T.symbolSize,R=normalizeSymbolOffset(a.get("symbolOffset"),A);return prepareLayoutInfo(a,A,l,u,c,R,p,T.valueLineWidth,T.boundingLength,T.repeatCutLength,s,T),T}function prepareBarLength(t,n,a,s,l){var u=s.valueDim,c=t.get("symbolBoundingData"),p=s.coordSys.getOtherAxis(s.coordSys.getBaseAxis()),d=p.toGlobalCoord(p.dataToCoord(0)),x=1-+(a[u.wh]<=0),_;if(isArray$1(c)){var S=[convertToCoordOnAxis(p,c[0])-d,convertToCoordOnAxis(p,c[1])-d];S[1]<S[0]&&S.reverse(),_=S[x]}else c!=null?_=convertToCoordOnAxis(p,c)-d:n?_=s.coordSysExtent[u.index][x]-d:_=a[u.wh];l.boundingLength=_,n&&(l.repeatCutLength=a[u.wh]);var T=u.xy==="x",A=p.inverse;l.pxSign=T&&!A||!T&&A?_>=0?1:-1:_>0?1:-1}function convertToCoordOnAxis(t,n){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(n)))}function prepareSymbolSize(t,n,a,s,l,u,c,p,d,x){var _=d.valueDim,S=d.categoryDim,T=Math.abs(a[S.wh]),A=t.getItemVisual(n,"symbolSize"),R;isArray$1(A)?R=A.slice():A==null?R=["100%","100%"]:R=[A,A],R[S.index]=parsePercent(R[S.index],T),R[_.index]=parsePercent(R[_.index],s?T:Math.abs(u)),x.symbolSize=R;var D=x.symbolScale=[R[0]/p,R[1]/p];D[_.index]*=(d.isHorizontal?-1:1)*c}function prepareLineWidth(t,n,a,s,l){var u=t.get(BAR_BORDER_WIDTH_QUERY)||0;u&&(pathForLineWidth.attr({scaleX:n[0],scaleY:n[1],rotation:a}),pathForLineWidth.updateTransform(),u/=pathForLineWidth.getLineScale(),u*=n[s.valueDim.index]),l.valueLineWidth=u||0}function prepareLayoutInfo(t,n,a,s,l,u,c,p,d,x,_,S){var T=_.categoryDim,A=_.valueDim,R=S.pxSign,D=Math.max(n[A.index]+p,0),O=D;if(s){var F=Math.abs(d),z=retrieve(t.get("symbolMargin"),"15%")+"",j=!1;z.lastIndexOf("!")===z.length-1&&(j=!0,z=z.slice(0,z.length-1));var Z=parsePercent(z,n[A.index]),W=Math.max(D+Z*2,0),J=j?0:Z*2,en=isNumeric(s),tn=en?s:toIntTimes((F+J)/W),Ct=F-tn*D;Z=Ct/2/(j?tn:Math.max(tn-1,1)),W=D+Z*2,J=j?0:Z*2,!en&&s!=="fixed"&&(tn=x?toIntTimes((Math.abs(x)+J)/W):0),O=tn*W-J,S.repeatTimes=tn,S.symbolMargin=Z}var Q=R*(O/2),on=S.pathPosition=[];on[T.index]=a[T.wh]/2,on[A.index]=c==="start"?Q:c==="end"?d-Q:d/2,u&&(on[0]+=u[0],on[1]+=u[1]);var gn=S.bundlePosition=[];gn[T.index]=a[T.xy],gn[A.index]=a[A.xy];var In=S.barRectShape=extend({},a);In[A.wh]=R*Math.max(Math.abs(a[A.wh]),Math.abs(on[A.index]+Q)),In[T.wh]=a[T.wh];var dn=S.clipShape={};dn[T.xy]=-a[T.xy],dn[T.wh]=_.ecSize[T.wh],dn[A.xy]=0,dn[A.wh]=a[A.wh]}function createPath(t){var n=t.symbolPatternSize,a=createSymbol$1(t.symbolType,-n/2,-n/2,n,n);return a.attr({culling:!0}),a.type!=="image"&&a.setStyle({strokeNoScale:!0}),a}function createOrUpdateRepeatSymbols(t,n,a,s){var l=t.__pictorialBundle,u=a.symbolSize,c=a.valueLineWidth,p=a.pathPosition,d=n.valueDim,x=a.repeatTimes||0,_=0,S=u[n.valueDim.index]+c+a.symbolMargin*2;for(eachPath(t,function(D){D.__pictorialAnimationIndex=_,D.__pictorialRepeatTimes=x,_<x?updateAttr(D,null,R(_),a,s):updateAttr(D,null,{scaleX:0,scaleY:0},a,s,function(){l.remove(D)}),_++});_<x;_++){var T=createPath(a);T.__pictorialAnimationIndex=_,T.__pictorialRepeatTimes=x,l.add(T);var A=R(_);updateAttr(T,{x:A.x,y:A.y,scaleX:0,scaleY:0},{scaleX:A.scaleX,scaleY:A.scaleY,rotation:A.rotation},a,s)}function R(D){var O=p.slice(),F=a.pxSign,z=D;return(a.symbolRepeatDirection==="start"?F>0:F<0)&&(z=x-1-D),O[d.index]=S*(z-x/2+.5)+p[d.index],{x:O[0],y:O[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation}}}function createOrUpdateSingleSymbol(t,n,a,s){var l=t.__pictorialBundle,u=t.__pictorialMainPath;u?updateAttr(u,null,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation},a,s):(u=t.__pictorialMainPath=createPath(a),l.add(u),updateAttr(u,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:0,scaleY:0,rotation:a.rotation},{scaleX:a.symbolScale[0],scaleY:a.symbolScale[1]},a,s))}function createOrUpdateBarRect(t,n,a){var s=extend({},n.barRectShape),l=t.__pictorialBarRect;l?updateAttr(l,null,{shape:s},n,a):(l=t.__pictorialBarRect=new Rect$2({z2:2,shape:s,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),l.disableMorphing=!0,t.add(l))}function createOrUpdateClip(t,n,a,s){if(a.symbolClip){var l=t.__pictorialClipPath,u=extend({},a.clipShape),c=n.valueDim,p=a.animationModel,d=a.dataIndex;if(l)updateProps$1(l,{shape:u},p,d);else{u[c.wh]=0,l=new Rect$2({shape:u}),t.__pictorialBundle.setClipPath(l),t.__pictorialClipPath=l;var x={};x[c.wh]=a.clipShape[c.wh],graphic$1[s?"updateProps":"initProps"](l,{shape:x},p,d)}}}function getItemModel(t,n){var a=t.getItemModel(n);return a.getAnimationDelayParams=getAnimationDelayParams,a.isAnimationEnabled=isAnimationEnabled,a}function getAnimationDelayParams(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(t,n,a,s){var l=new Group$3,u=new Group$3;return l.add(u),l.__pictorialBundle=u,u.x=a.bundlePosition[0],u.y=a.bundlePosition[1],a.symbolRepeat?createOrUpdateRepeatSymbols(l,n,a):createOrUpdateSingleSymbol(l,n,a),createOrUpdateBarRect(l,a,s),createOrUpdateClip(l,n,a,s),l.__pictorialShapeStr=getShapeStr(t,a),l.__pictorialSymbolMeta=a,l}function updateBar(t,n,a){var s=a.animationModel,l=a.dataIndex,u=t.__pictorialBundle;updateProps$1(u,{x:a.bundlePosition[0],y:a.bundlePosition[1]},s,l),a.symbolRepeat?createOrUpdateRepeatSymbols(t,n,a,!0):createOrUpdateSingleSymbol(t,n,a,!0),createOrUpdateBarRect(t,a,!0),createOrUpdateClip(t,n,a,!0)}function removeBar(t,n,a,s){var l=s.__pictorialBarRect;l&&l.removeTextContent();var u=[];eachPath(s,function(c){u.push(c)}),s.__pictorialMainPath&&u.push(s.__pictorialMainPath),s.__pictorialClipPath&&(a=null),each$f(u,function(c){removeElement(c,{scaleX:0,scaleY:0},a,n,function(){s.parent&&s.parent.remove(s)})}),t.setItemGraphicEl(n,null)}function getShapeStr(t,n){return[t.getItemVisual(n.dataIndex,"symbol")||"none",!!n.symbolRepeat,!!n.symbolClip].join(":")}function eachPath(t,n,a){each$f(t.__pictorialBundle.children(),function(s){s!==t.__pictorialBarRect&&n.call(a,s)})}function updateAttr(t,n,a,s,l,u){n&&t.attr(n),s.symbolClip&&!l?a&&t.attr(a):a&&graphic$1[l?"updateProps":"initProps"](t,a,s.animationModel,s.dataIndex,u)}function updateCommon(t,n,a){var s=a.dataIndex,l=a.itemModel,u=l.getModel("emphasis"),c=u.getModel("itemStyle").getItemStyle(),p=l.getModel(["blur","itemStyle"]).getItemStyle(),d=l.getModel(["select","itemStyle"]).getItemStyle(),x=l.getShallow("cursor"),_=u.get("focus"),S=u.get("blurScope"),T=u.get("scale");eachPath(t,function(D){if(D instanceof ZRImage){var O=D.style;D.useStyle(extend({image:O.image,x:O.x,y:O.y,width:O.width,height:O.height},a.style))}else D.useStyle(a.style);var F=D.ensureState("emphasis");F.style=c,T&&(F.scaleX=D.scaleX*1.1,F.scaleY=D.scaleY*1.1),D.ensureState("blur").style=p,D.ensureState("select").style=d,x&&(D.cursor=x),D.z2=a.z2});var A=n.valueDim.posDesc[+(a.boundingLength>0)],R=t.__pictorialBarRect;R.ignoreClip=!0,setLabelStyle(R,getLabelStatesModels(l),{labelFetcher:n.seriesModel,labelDataIndex:s,defaultText:getDefaultLabel(n.seriesModel.getData(),s),inheritColor:a.style.fill,defaultOpacity:a.style.opacity,defaultOutsidePosition:A}),toggleHoverEmphasis(t,_,S,u.get("disabled"))}function toIntTimes(t){var n=Math.round(t);return Math.abs(t-n)<1e-4?n:Math.ceil(t)}var PictorialBarSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a.defaultSymbol="roundRect",a}return n.prototype.getInitialData=function(a){return a.stack=null,t.prototype.getInitialData.apply(this,arguments)},n.type="series.pictorialBar",n.dependencies=["grid"],n.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),n}(BaseBarSeriesModel);function install$u(t){t.registerChartView(PictorialBarView),t.registerSeriesModel(PictorialBarSeriesModel),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._layers=[],a}return n.prototype.render=function(a,s,l){var u=a.getData(),c=this,p=this.group,d=a.getLayerSeries(),x=u.getLayout("layoutInfo"),_=x.rect,S=x.boundaryGap;p.x=0,p.y=_.y+S[0];function T(O){return O.name}var A=new DataDiffer(this._layersSeries||[],d,T,T),R=[];A.add(bind$1(D,this,"add")).update(bind$1(D,this,"update")).remove(bind$1(D,this,"remove")).execute();function D(O,F,z){var j=c._layers;if(O==="remove"){p.remove(j[F]);return}for(var Z=[],W=[],J,en=d[F].indices,tn=0;tn<en.length;tn++){var Ct=u.getItemLayout(en[tn]),Q=Ct.x,on=Ct.y0,gn=Ct.y;Z.push(Q,on),W.push(Q,on+gn),J=u.getItemVisual(en[tn],"style")}var In,dn=u.getItemLayout(en[0]),ix=a.getModel("label"),Cn=ix.get("margin"),ax=a.getModel("emphasis");if(O==="add"){var sx=R[F]=new Group$3;In=new ECPolygon({shape:{points:Z,stackedOnPoints:W,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),sx.add(In),p.add(sx),a.isAnimationEnabled()&&In.setClipPath(createGridClipShape(In.getBoundingRect(),a,function(){In.removeClipPath()}))}else{var sx=j[z];In=sx.childAt(0),p.add(sx),R[F]=sx,updateProps$1(In,{shape:{points:Z,stackedOnPoints:W}},a),saveOldStyle(In)}setLabelStyle(In,getLabelStatesModels(a),{labelDataIndex:en[tn-1],defaultText:u.getName(en[tn-1]),inheritColor:J.fill},{normal:{verticalAlign:"middle"}}),In.setTextConfig({position:null,local:!0});var lx=In.getTextContent();lx&&(lx.x=dn.x-Cn,lx.y=dn.y0+dn.y/2),In.useStyle(J),u.setItemGraphicEl(F,In),setStatesStylesFromModel(In,a),toggleHoverEmphasis(In,ax.get("focus"),ax.get("blurScope"),ax.get("disabled"))}this._layersSeries=d,this._layers=R},n.type="themeRiver",n}(ChartView);function createGridClipShape(t,n,a){var s=new Rect$2({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return initProps(s,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},n,a),s}var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},n.prototype.fixData=function(a){var s=a.length,l={},u=groupData(a,function(T){return l.hasOwnProperty(T[0]+"")||(l[T[0]+""]=-1),T[2]}),c=[];u.buckets.each(function(T,A){c.push({name:A,dataList:T})});for(var p=c.length,d=0;d<p;++d){for(var x=c[d].name,_=0;_<c[d].dataList.length;++_){var S=c[d].dataList[_][0]+"";l[S]=d}for(var S in l)l.hasOwnProperty(S)&&l[S]!==d&&(l[S]=d,a[s]=[S,0,x],s++)}return a},n.prototype.getInitialData=function(a,s){for(var l=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],u=l.get("type"),c=filter(a.data,function(R){return R[2]!==void 0}),p=this.fixData(c||[]),d=[],x=this.nameMap=createHashMap(),_=0,S=0;S<p.length;++S)d.push(p[S][DATA_NAME_INDEX]),x.get(p[S][DATA_NAME_INDEX])||(x.set(p[S][DATA_NAME_INDEX],_),_++);var T=prepareSeriesDataSchema(p,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(u)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,A=new SeriesData(T,this);return A.initData(p),A},n.prototype.getLayerSeries=function(){for(var a=this.getData(),s=a.count(),l=[],u=0;u<s;++u)l[u]=u;var c=a.mapDimension("single"),p=groupData(l,function(x){return a.get("name",x)}),d=[];return p.buckets.each(function(x,_){x.sort(function(S,T){return a.get(c,S)-a.get(c,T)}),d.push({name:_,indices:x})}),d},n.prototype.getAxisTooltipData=function(a,s,l){isArray$1(a)||(a=a?[a]:[]);for(var u=this.getData(),c=this.getLayerSeries(),p=[],d=c.length,x,_=0;_<d;++_){for(var S=Number.MAX_VALUE,T=-1,A=c[_].indices.length,R=0;R<A;++R){var D=u.get(a[0],c[_].indices[R]),O=Math.abs(D-s);O<=S&&(x=D,S=O,T=c[_].indices[R])}p.push(T)}return{dataIndices:p,nestestValue:x}},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=u.getName(a),p=u.get(u.mapDimension("value"),a);return createTooltipMarkup("nameValue",{name:c,value:p})},n.type="series.themeRiver",n.dependencies=["singleAxis"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},n}(SeriesModel);function themeRiverLayout(t,n){t.eachSeriesByType("themeRiver",function(a){var s=a.getData(),l=a.coordinateSystem,u={},c=l.getRect();u.rect=c;var p=a.get("boundaryGap"),d=l.getAxis();if(u.boundaryGap=p,d.orient==="horizontal"){p[0]=parsePercent(p[0],c.height),p[1]=parsePercent(p[1],c.height);var x=c.height-p[0]-p[1];doThemeRiverLayout(s,a,x)}else{p[0]=parsePercent(p[0],c.width),p[1]=parsePercent(p[1],c.width);var _=c.width-p[0]-p[1];doThemeRiverLayout(s,a,_)}s.setLayout("layoutInfo",u)})}function doThemeRiverLayout(t,n,a){if(t.count())for(var s=n.coordinateSystem,l=n.getLayerSeries(),u=t.mapDimension("single"),c=t.mapDimension("value"),p=map$1(l,function(O){return map$1(O.indices,function(F){var z=s.dataToPoint(t.get(u,F));return z[1]=t.get(c,F),z})}),d=computeBaseline(p),x=d.y0,_=a/d.max,S=l.length,T=l[0].indices.length,A,R=0;R<T;++R){A=x[R]*_,t.setItemLayout(l[0].indices[R],{layerIndex:0,x:p[0][R][0],y0:A,y:p[0][R][1]*_});for(var D=1;D<S;++D)A+=p[D-1][R][1]*_,t.setItemLayout(l[D].indices[R],{layerIndex:D,x:p[D][R][0],y0:A,y:p[D][R][1]*_})}}function computeBaseline(t){for(var n=t.length,a=t[0].length,s=[],l=[],u=0,c=0;c<a;++c){for(var p=0,d=0;d<n;++d)p+=t[d][c][1];p>u&&(u=p),s.push(p)}for(var x=0;x<a;++x)l[x]=(u-s[x])/2;u=0;for(var _=0;_<a;++_){var S=s[_]+l[_];S>u&&(u=S)}return{y0:l,max:u}}function install$t(t){t.registerChartView(ThemeRiverView),t.registerSeriesModel(ThemeRiverSeriesModel),t.registerLayout(themeRiverLayout),t.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(t){__extends(n,t);function n(a,s,l,u){var c=t.call(this)||this;c.z2=DEFAULT_SECTOR_Z,c.textConfig={inside:!0},getECData(c).seriesIndex=s.seriesIndex;var p=new ZRText({z2:DEFAULT_TEXT_Z,silent:a.getModel().get(["label","silent"])});return c.setTextContent(p),c.updateData(!0,a,s,l,u),c}return n.prototype.updateData=function(a,s,l,u,c){this.node=s,s.piece=this,l=l||this._seriesModel,u=u||this._ecModel;var p=this;getECData(p).dataIndex=s.dataIndex;var d=s.getModel(),x=d.getModel("emphasis"),_=s.getLayout(),S=extend({},_);S.label=null;var T=s.getVisual("style");T.lineJoin="bevel";var A=s.getVisual("decal");A&&(T.decal=createOrUpdatePatternFromDecal(A,c));var R=getSectorCornerRadius(d.getModel("itemStyle"),S,!0);extend(S,R),each$f(SPECIAL_STATES,function(z){var j=p.ensureState(z),Z=d.getModel([z,"itemStyle"]);j.style=Z.getItemStyle();var W=getSectorCornerRadius(Z,S);W&&(j.shape=W)}),a?(p.setShape(S),p.shape.r=_.r0,initProps(p,{shape:{r:_.r}},l,s.dataIndex)):(updateProps$1(p,{shape:S},l),saveOldStyle(p)),p.useStyle(T),this._updateLabel(l);var D=d.getShallow("cursor");D&&p.attr("cursor",D),this._seriesModel=l||this._seriesModel,this._ecModel=u||this._ecModel;var O=x.get("focus"),F=O==="relative"?concatArray(s.getAncestorsIndices(),s.getDescendantIndices()):O==="ancestor"?s.getAncestorsIndices():O==="descendant"?s.getDescendantIndices():O;toggleHoverEmphasis(this,F,x.get("blurScope"),x.get("disabled"))},n.prototype._updateLabel=function(a){var s=this,l=this.node.getModel(),u=l.getModel("label"),c=this.node.getLayout(),p=c.endAngle-c.startAngle,d=(c.startAngle+c.endAngle)/2,x=Math.cos(d),_=Math.sin(d),S=this,T=S.getTextContent(),A=this.node.dataIndex,R=u.get("minAngle")/180*Math.PI,D=u.get("show")&&!(R!=null&&Math.abs(p)<R);T.ignore=!D,each$f(DISPLAY_STATES,function(F){var z=F==="normal"?l.getModel("label"):l.getModel([F,"label"]),j=F==="normal",Z=j?T:T.ensureState(F),W=a.getFormattedLabel(A,F);j&&(W=W||s.node.name),Z.style=createTextStyle$1(z,{},null,F!=="normal",!0),W&&(Z.style.text=W);var J=z.get("show");J!=null&&!j&&(Z.ignore=!J);var en=O(z,"position"),tn=j?S:S.states[F],Ct=tn.style.fill;tn.textConfig={outsideFill:z.get("color")==="inherit"?Ct:null,inside:en!=="outside"};var Q,on=O(z,"distance")||0,gn=O(z,"align"),In=O(z,"rotate"),dn=Math.PI*.5,ix=Math.PI*1.5,Cn=normalizeRadian(In==="tangential"?Math.PI/2-d:d),ax=Cn>dn&&!isRadianAroundZero(Cn-dn)&&Cn<ix;en==="outside"?(Q=c.r+on,gn=ax?"right":"left"):!gn||gn==="center"?(p===2*Math.PI&&c.r0===0?Q=0:Q=(c.r+c.r0)/2,gn="center"):gn==="left"?(Q=c.r0+on,gn=ax?"right":"left"):gn==="right"&&(Q=c.r-on,gn=ax?"left":"right"),Z.style.align=gn,Z.style.verticalAlign=O(z,"verticalAlign")||"middle",Z.x=Q*x+c.cx,Z.y=Q*_+c.cy;var sx=0;In==="radial"?sx=normalizeRadian(-d)+(ax?Math.PI:0):In==="tangential"?sx=normalizeRadian(Math.PI/2-d)+(ax?Math.PI:0):isNumber(In)&&(sx=In*Math.PI/180),Z.rotation=normalizeRadian(sx)});function O(F,z){var j=F.get(z);return j??u.get(z)}T.dirtyStyle()},n}(Sector),ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(t){t.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(n,a){a.eachComponent({mainType:"series",subType:"sunburst",query:n},s);function s(l,u){var c=retrieveTargetInfo(n,[ROOT_TO_NODE_ACTION],l);if(c){var p=l.getViewRoot();p&&(n.direction=aboveViewRoot(p,c.node)?"rollUp":"drillDown"),l.resetViewRoot(c.node)}}}),t.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(n,a,s){n=extend({},n),a.eachComponent({mainType:"series",subType:"sunburst",query:n},l);function l(u){var c=retrieveTargetInfo(n,[HIGHLIGHT_ACTION],u);c&&(n.dataIndex=c.node.dataIndex)}s.dispatchAction(extend(n,{type:"highlight"}))}),t.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(n,a,s){n=extend({},n),s.dispatchAction(extend(n,{type:"downplay"}))})}var SunburstView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){var c=this;this.seriesModel=a,this.api=l,this.ecModel=s;var p=a.getData(),d=p.tree.root,x=a.getViewRoot(),_=this.group,S=a.get("renderLabelForZeroData"),T=[];x.eachNode(function(z){T.push(z)});var A=this._oldChildren||[];R(T,A),F(d,x),this._initEvents(),this._oldChildren=T;function R(z,j){if(z.length===0&&j.length===0)return;new DataDiffer(j,z,Z,Z).add(W).update(W).remove(curry$1(W,null)).execute();function Z(J){return J.getId()}function W(J,en){var tn=J==null?null:z[J],Ct=en==null?null:j[en];D(tn,Ct)}}function D(z,j){if(!S&&z&&!z.getValue()&&(z=null),z!==d&&j!==d){if(j&&j.piece)z?(j.piece.updateData(!1,z,a,s,l),p.setItemGraphicEl(z.dataIndex,j.piece)):O(j);else if(z){var Z=new SunburstPiece(z,a,s,l);_.add(Z),p.setItemGraphicEl(z.dataIndex,Z)}}}function O(z){z&&z.piece&&(_.remove(z.piece),z.piece=null)}function F(z,j){j.depth>0?(c.virtualPiece?c.virtualPiece.updateData(!1,z,a,s,l):(c.virtualPiece=new SunburstPiece(z,a,s,l),_.add(c.virtualPiece)),j.piece.off("click"),c.virtualPiece.on("click",function(Z){c._rootToNode(j.parentNode)})):c.virtualPiece&&(_.remove(c.virtualPiece),c.virtualPiece=null)}},n.prototype._initEvents=function(){var a=this;this.group.off("click"),this.group.on("click",function(s){var l=!1,u=a.seriesModel.getViewRoot();u.eachNode(function(c){if(!l&&c.piece&&c.piece===s.target){var p=c.getModel().get("nodeClick");if(p==="rootToNode")a._rootToNode(c);else if(p==="link"){var d=c.getModel(),x=d.get("link");if(x){var _=d.get("target",!0)||"_blank";windowOpen(x,_)}}l=!0}})})},n.prototype._rootToNode=function(a){a!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:a})},n.prototype.containPoint=function(a,s){var l=s.getData(),u=l.getItemLayout(0);if(u){var c=a[0]-u.cx,p=a[1]-u.cy,d=Math.sqrt(c*c+p*p);return d<=u.r&&d>=u.r0}},n.type="sunburst",n}(ChartView),SunburstSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.ignoreStyleOnData=!0,a}return n.prototype.getInitialData=function(a,s){var l={name:a.name,children:a.data};completeTreeValue(l);var u=this._levelModels=map$1(a.levels||[],function(d){return new Model(d,this,s)},this),c=Tree.createTree(l,this,p);function p(d){d.wrapMethod("getItemModel",function(x,_){var S=c.getNodeByDataIndex(_),T=u[S.depth];return T&&(x.parentModel=T),x})}return c.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.getDataParams=function(a){var s=t.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(a);return s.treePathInfo=wrapTreePathInfo(l,this),s},n.prototype.getLevelModel=function(a){return this._levelModels&&this._levelModels[a.depth]},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var s=this.getRawData().tree.root;(!a||a!==s&&!s.contains(a))&&(this._viewRoot=s)},n.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},n.type="series.sunburst",n.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},n}(SeriesModel);function completeTreeValue(t){var n=0;each$f(t.children,function(s){completeTreeValue(s);var l=s.value;isArray$1(l)&&(l=l[0]),n+=l});var a=t.value;isArray$1(a)&&(a=a[0]),(a==null||isNaN(a))&&(a=n),a<0&&(a=0),isArray$1(t.value)?t.value[0]=a:t.value=a}var RADIAN=Math.PI/180;function sunburstLayout(t,n,a){n.eachSeriesByType(t,function(s){var l=s.get("center"),u=s.get("radius");isArray$1(u)||(u=[0,u]),isArray$1(l)||(l=[l,l]);var c=a.getWidth(),p=a.getHeight(),d=Math.min(c,p),x=parsePercent(l[0],c),_=parsePercent(l[1],p),S=parsePercent(u[0],d/2),T=parsePercent(u[1],d/2),A=-s.get("startAngle")*RADIAN,R=s.get("minAngle")*RADIAN,D=s.getData().tree.root,O=s.getViewRoot(),F=O.depth,z=s.get("sort");z!=null&&initChildren(O,z);var j=0;each$f(O.children,function(Cn){!isNaN(Cn.getValue())&&j++});var Z=O.getValue(),W=Math.PI/(Z||j)*2,J=O.depth>0,en=O.height-(J?-1:1),tn=(T-S)/(en||1),Ct=s.get("clockwise"),Q=s.get("stillShowZeroSum"),on=Ct?1:-1,gn=function(Cn,ax){if(Cn){var sx=ax;if(Cn!==D){var lx=Cn.getValue(),ox=Z===0&&Q?W:lx*W;ox<R&&(ox=R),sx=ax+on*ox;var hx=Cn.depth-F-(J?-1:1),_x=S+tn*hx,ux=S+tn*(hx+1),px=s.getLevelModel(Cn);if(px){var dx=px.get("r0",!0),mx=px.get("r",!0),gx=px.get("radius",!0);gx!=null&&(dx=gx[0],mx=gx[1]),dx!=null&&(_x=parsePercent(dx,d/2)),mx!=null&&(ux=parsePercent(mx,d/2))}Cn.setLayout({angle:ox,startAngle:ax,endAngle:sx,clockwise:Ct,cx:x,cy:_,r0:_x,r:ux})}if(Cn.children&&Cn.children.length){var Sx=0;each$f(Cn.children,function(Ex){Sx+=gn(Ex,ax+Sx)})}return sx-ax}};if(J){var In=S,dn=S+tn,ix=Math.PI*2;D.setLayout({angle:ix,startAngle:A,endAngle:A+ix,clockwise:Ct,cx:x,cy:_,r0:In,r:dn})}gn(O,A)})}function initChildren(t,n){var a=t.children||[];t.children=sort(a,n),a.length&&each$f(t.children,function(s){initChildren(s,n)})}function sort(t,n){if(isFunction$1(n)){var a=map$1(t,function(l,u){var c=l.getValue();return{params:{depth:l.depth,height:l.height,dataIndex:l.dataIndex,getValue:function(){return c}},index:u}});return a.sort(function(l,u){return n(l.params,u.params)}),map$1(a,function(l){return t[l.index]})}else{var s=n==="asc";return t.sort(function(l,u){var c=(l.getValue()-u.getValue())*(s?1:-1);return c===0?(l.dataIndex-u.dataIndex)*(s?-1:1):c})}}function sunburstVisual(t){var n={};function a(s,l,u){for(var c=s;c&&c.depth>1;)c=c.parentNode;var p=l.getColorFromPalette(c.name||c.dataIndex+"",n);return s.depth>1&&isString$1(p)&&(p=lift(p,(s.depth-1)/(u-1)*.5)),p}t.eachSeriesByType("sunburst",function(s){var l=s.getData(),u=l.tree;u.eachNode(function(c){var p=c.getModel(),d=p.getModel("itemStyle").getItemStyle();d.fill||(d.fill=a(c,s,u.root.height));var x=l.ensureUniqueItemVisual(c.dataIndex,"style");extend(x,d)})})}function install$s(t){t.registerChartView(SunburstView),t.registerSeriesModel(SunburstSeriesModel),t.registerLayout(curry$1(sunburstLayout,"sunburst")),t.registerProcessor(curry$1(dataFilter$1,"sunburst")),t.registerVisual(sunburstVisual),installSunburstAction(t)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},n.prototype.getInitialData=function(a,s){return createSeriesData(null,this)},n.prototype.getDataParams=function(a,s,l){var u=t.prototype.getDataParams.call(this,a,s);return l&&(u.info=customInnerStore(l).info),u},n.type="series.custom",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},n}(SeriesModel);function dataToCoordSize$3(t,n){return n=n||[0,0],map$1(["x","y"],function(a,s){var l=this.getAxis(a),u=n[s],c=t[s]/2;return l.type==="category"?l.getBandWidth():Math.abs(l.dataToCoord(u-c)-l.dataToCoord(u+c))},this)}function cartesianPrepareCustom(t){var n=t.master.getRect();return{coordSys:{type:"cartesian2d",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(a){return t.dataToPoint(a)},size:bind$1(dataToCoordSize$3,t)}}}function dataToCoordSize$2(t,n){return n=n||[0,0],map$1([0,1],function(a){var s=n[a],l=t[a]/2,u=[],c=[];return u[a]=s-l,c[a]=s+l,u[1-a]=c[1-a]=n[1-a],Math.abs(this.dataToPoint(u)[a]-this.dataToPoint(c)[a])},this)}function geoPrepareCustom(t){var n=t.getBoundingRect();return{coordSys:{type:"geo",x:n.x,y:n.y,width:n.width,height:n.height,zoom:t.getZoom()},api:{coord:function(a){return t.dataToPoint(a)},size:bind$1(dataToCoordSize$2,t)}}}function dataToCoordSize$1(t,n){var a=this.getAxis(),s=n instanceof Array?n[0]:n,l=(t instanceof Array?t[0]:t)/2;return a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(s-l)-a.dataToCoord(s+l))}function singlePrepareCustom(t){var n=t.getRect();return{coordSys:{type:"singleAxis",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(a){return t.dataToPoint(a)},size:bind$1(dataToCoordSize$1,t)}}}function dataToCoordSize(t,n){return n=n||[0,0],map$1(["Radius","Angle"],function(a,s){var l="get"+a+"Axis",u=this[l](),c=n[s],p=t[s]/2,d=u.type==="category"?u.getBandWidth():Math.abs(u.dataToCoord(c-p)-u.dataToCoord(c+p));return a==="Angle"&&(d=d*Math.PI/180),d},this)}function polarPrepareCustom(t){var n=t.getRadiusAxis(),a=t.getAngleAxis(),s=n.getExtent();return s[0]>s[1]&&s.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:s[1],r0:s[0]},api:{coord:function(l){var u=n.dataToRadius(l[0]),c=a.dataToAngle(l[1]),p=t.coordToPoint([u,c]);return p.push(u,c*Math.PI/180),p},size:bind$1(dataToCoordSize,t)}}}function calendarPrepareCustom(t){var n=t.getRect(),a=t.getRangeInfo();return{coordSys:{type:"calendar",x:n.x,y:n.y,width:n.width,height:n.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:a.start,end:a.end,weeks:a.weeks,dayCount:a.allDay}},api:{coord:function(s,l){return t.dataToPoint(s,l)}}}}function isEC4CompatibleStyle(t,n,a,s){return t&&(t.legacy||t.legacy!==!1&&!a&&!s&&n!=="tspan"&&(n==="text"||hasOwn(t,"text")))}function convertFromEC4CompatibleStyle(t,n,a){var s=t,l,u,c;if(n==="text")c=s;else{c={},hasOwn(s,"text")&&(c.text=s.text),hasOwn(s,"rich")&&(c.rich=s.rich),hasOwn(s,"textFill")&&(c.fill=s.textFill),hasOwn(s,"textStroke")&&(c.stroke=s.textStroke),hasOwn(s,"fontFamily")&&(c.fontFamily=s.fontFamily),hasOwn(s,"fontSize")&&(c.fontSize=s.fontSize),hasOwn(s,"fontStyle")&&(c.fontStyle=s.fontStyle),hasOwn(s,"fontWeight")&&(c.fontWeight=s.fontWeight),u={type:"text",style:c,silent:!0},l={};var p=hasOwn(s,"textPosition");a?l.position=p?s.textPosition:"inside":p&&(l.position=s.textPosition),hasOwn(s,"textPosition")&&(l.position=s.textPosition),hasOwn(s,"textOffset")&&(l.offset=s.textOffset),hasOwn(s,"textRotation")&&(l.rotation=s.textRotation),hasOwn(s,"textDistance")&&(l.distance=s.textDistance)}return convertEC4CompatibleRichItem(c,t),each$f(c.rich,function(d){convertEC4CompatibleRichItem(d,d)}),{textConfig:l,textContent:u}}function convertEC4CompatibleRichItem(t,n){n&&(n.font=n.textFont||n.font,hasOwn(n,"textStrokeWidth")&&(t.lineWidth=n.textStrokeWidth),hasOwn(n,"textAlign")&&(t.align=n.textAlign),hasOwn(n,"textVerticalAlign")&&(t.verticalAlign=n.textVerticalAlign),hasOwn(n,"textLineHeight")&&(t.lineHeight=n.textLineHeight),hasOwn(n,"textWidth")&&(t.width=n.textWidth),hasOwn(n,"textHeight")&&(t.height=n.textHeight),hasOwn(n,"textBackgroundColor")&&(t.backgroundColor=n.textBackgroundColor),hasOwn(n,"textPadding")&&(t.padding=n.textPadding),hasOwn(n,"textBorderColor")&&(t.borderColor=n.textBorderColor),hasOwn(n,"textBorderWidth")&&(t.borderWidth=n.textBorderWidth),hasOwn(n,"textBorderRadius")&&(t.borderRadius=n.textBorderRadius),hasOwn(n,"textBoxShadowColor")&&(t.shadowColor=n.textBoxShadowColor),hasOwn(n,"textBoxShadowBlur")&&(t.shadowBlur=n.textBoxShadowBlur),hasOwn(n,"textBoxShadowOffsetX")&&(t.shadowOffsetX=n.textBoxShadowOffsetX),hasOwn(n,"textBoxShadowOffsetY")&&(t.shadowOffsetY=n.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(t,n,a){var s=t;s.textPosition=s.textPosition||a.position||"inside",a.offset!=null&&(s.textOffset=a.offset),a.rotation!=null&&(s.textRotation=a.rotation),a.distance!=null&&(s.textDistance=a.distance);var l=s.textPosition.indexOf("inside")>=0,u=t.fill||"#000";convertToEC4RichItem(s,n);var c=s.textFill==null;return l?c&&(s.textFill=a.insideFill||"#fff",!s.textStroke&&a.insideStroke&&(s.textStroke=a.insideStroke),!s.textStroke&&(s.textStroke=u),s.textStrokeWidth==null&&(s.textStrokeWidth=2)):(c&&(s.textFill=t.fill||a.outsideFill||"#000"),!s.textStroke&&a.outsideStroke&&(s.textStroke=a.outsideStroke)),s.text=n.text,s.rich=n.rich,each$f(n.rich,function(p){convertToEC4RichItem(p,p)}),s}function convertToEC4RichItem(t,n){n&&(hasOwn(n,"fill")&&(t.textFill=n.fill),hasOwn(n,"stroke")&&(t.textStroke=n.fill),hasOwn(n,"lineWidth")&&(t.textStrokeWidth=n.lineWidth),hasOwn(n,"font")&&(t.font=n.font),hasOwn(n,"fontStyle")&&(t.fontStyle=n.fontStyle),hasOwn(n,"fontWeight")&&(t.fontWeight=n.fontWeight),hasOwn(n,"fontSize")&&(t.fontSize=n.fontSize),hasOwn(n,"fontFamily")&&(t.fontFamily=n.fontFamily),hasOwn(n,"align")&&(t.textAlign=n.align),hasOwn(n,"verticalAlign")&&(t.textVerticalAlign=n.verticalAlign),hasOwn(n,"lineHeight")&&(t.textLineHeight=n.lineHeight),hasOwn(n,"width")&&(t.textWidth=n.width),hasOwn(n,"height")&&(t.textHeight=n.height),hasOwn(n,"backgroundColor")&&(t.textBackgroundColor=n.backgroundColor),hasOwn(n,"padding")&&(t.textPadding=n.padding),hasOwn(n,"borderColor")&&(t.textBorderColor=n.borderColor),hasOwn(n,"borderWidth")&&(t.textBorderWidth=n.borderWidth),hasOwn(n,"borderRadius")&&(t.textBorderRadius=n.borderRadius),hasOwn(n,"shadowColor")&&(t.textBoxShadowColor=n.shadowColor),hasOwn(n,"shadowBlur")&&(t.textBoxShadowBlur=n.shadowBlur),hasOwn(n,"shadowOffsetX")&&(t.textBoxShadowOffsetX=n.shadowOffsetX),hasOwn(n,"shadowOffsetY")&&(t.textBoxShadowOffsetY=n.shadowOffsetY),hasOwn(n,"textShadowColor")&&(t.textShadowColor=n.textShadowColor),hasOwn(n,"textShadowBlur")&&(t.textShadowBlur=n.textShadowBlur),hasOwn(n,"textShadowOffsetX")&&(t.textShadowOffsetX=n.textShadowOffsetX),hasOwn(n,"textShadowOffsetY")&&(t.textShadowOffsetY=n.textShadowOffsetY))}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP);reduce(TRANSFORMABLE_PROPS,function(t,n){return t[n]=1,t},{});TRANSFORMABLE_PROPS.join(", ");var ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(t,n,a,s,l){var u=t+"Animation",c=getAnimationConfig(t,s,l)||{},p=transitionInnerStore(n).userDuring;return c.duration>0&&(c.during=p?bind$1(duringCall,{el:n,userDuring:p}):null,c.setToFinal=!0,c.scope=t),extend(c,a[u]),c}function applyUpdateTransition(t,n,a,s){s=s||{};var l=s.dataIndex,u=s.isInit,c=s.clearStyle,p=a.isAnimationEnabled(),d=transitionInnerStore(t),x=n.style;d.userDuring=n.during;var _={},S={};if(prepareTransformAllPropsFinal(t,n,S),prepareShapeOrExtraAllPropsFinal("shape",n,S),prepareShapeOrExtraAllPropsFinal("extra",n,S),!u&&p&&(prepareTransformTransitionFrom(t,n,_),prepareShapeOrExtraTransitionFrom("shape",t,n,_),prepareShapeOrExtraTransitionFrom("extra",t,n,_),prepareStyleTransitionFrom(t,n,x,_)),S.style=x,applyPropsDirectly(t,S,c),applyMiscProps(t,n),p)if(u){var T={};each$f(ELEMENT_ANIMATABLE_PROPS,function(R){var D=R?n[R]:n;D&&D.enterFrom&&(R&&(T[R]=T[R]||{}),extend(R?T[R]:T,D.enterFrom))});var A=getElementAnimationConfig("enter",t,n,a,l);A.duration>0&&t.animateFrom(T,A)}else applyPropsTransition(t,n,l||0,a,_);updateLeaveTo(t,n),x?t.dirty():t.markRedraw()}function updateLeaveTo(t,n){for(var a=transitionInnerStore(t).leaveToProps,s=0;s<ELEMENT_ANIMATABLE_PROPS.length;s++){var l=ELEMENT_ANIMATABLE_PROPS[s],u=l?n[l]:n;u&&u.leaveTo&&(a||(a=transitionInnerStore(t).leaveToProps={}),l&&(a[l]=a[l]||{}),extend(l?a[l]:a,u.leaveTo))}}function applyLeaveTransition(t,n,a,s){if(t){var l=t.parent,u=transitionInnerStore(t).leaveToProps;if(u){var c=getElementAnimationConfig("update",t,n,a,0);c.done=function(){l.remove(t)},t.animateTo(u,c)}else l.remove(t)}}function isTransitionAll(t){return t==="all"}function applyPropsDirectly(t,n,a){var s=n.style;if(!t.isGroup&&s){if(a){t.useStyle({});for(var l=t.animators,u=0;u<l.length;u++){var c=l[u];c.targetName==="style"&&c.changeTarget(t.style)}}t.setStyle(s)}n&&(n.style=null,n&&t.attr(n),n.style=s)}function applyPropsTransition(t,n,a,s,l){if(l){var u=getElementAnimationConfig("update",t,n,s,a);u.duration>0&&t.animateFrom(l,u)}}function applyMiscProps(t,n){hasOwn(n,"silent")&&(t.silent=n.silent),hasOwn(n,"ignore")&&(t.ignore=n.ignore),t instanceof Displayable&&hasOwn(n,"invisible")&&(t.invisible=n.invisible),t instanceof Path&&hasOwn(n,"autoBatch")&&(t.autoBatch=n.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(t,n){return tmpDuringScope.el[t]=n,this},getTransform:function(t){return tmpDuringScope.el[t]},setShape:function(t,n){var a=tmpDuringScope.el,s=a.shape||(a.shape={});return s[t]=n,a.dirtyShape&&a.dirtyShape(),this},getShape:function(t){var n=tmpDuringScope.el.shape;if(n)return n[t]},setStyle:function(t,n){var a=tmpDuringScope.el,s=a.style;return s&&(s[t]=n,a.dirtyStyle&&a.dirtyStyle()),this},getStyle:function(t){var n=tmpDuringScope.el.style;if(n)return n[t]},setExtra:function(t,n){var a=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return a[t]=n,this},getExtra:function(t){var n=tmpDuringScope.el.extra;if(n)return n[t]}};function duringCall(){var t=this,n=t.el;if(n){var a=transitionInnerStore(n).userDuring,s=t.userDuring;if(a!==s){t.el=t.userDuring=null;return}tmpDuringScope.el=n,s(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(t,n,a,s){var l=a[t];if(l){var u=n[t],c;if(u){var p=a.transition,d=l.transition;if(d)if(!c&&(c=s[t]={}),isTransitionAll(d))extend(c,u);else for(var x=normalizeToArray(d),_=0;_<x.length;_++){var S=x[_],T=u[S];c[S]=T}else if(isTransitionAll(p)||indexOf(p,t)>=0){!c&&(c=s[t]={});for(var A=keys(u),_=0;_<A.length;_++){var S=A[_],T=u[S];isNonStyleTransitionEnabled(l[S],T)&&(c[S]=T)}}}}}function prepareShapeOrExtraAllPropsFinal(t,n,a){var s=n[t];if(s)for(var l=a[t]={},u=keys(s),c=0;c<u.length;c++){var p=u[c];l[p]=cloneValue(s[p])}}function prepareTransformTransitionFrom(t,n,a){for(var s=n.transition,l=isTransitionAll(s)?TRANSFORMABLE_PROPS:normalizeToArray(s||[]),u=0;u<l.length;u++){var c=l[u];if(!(c==="style"||c==="shape"||c==="extra")){var p=t[c];a[c]=p}}}function prepareTransformAllPropsFinal(t,n,a){for(var s=0;s<LEGACY_TRANSFORM_PROPS.length;s++){var l=LEGACY_TRANSFORM_PROPS[s],u=LEGACY_TRANSFORM_PROPS_MAP[l],c=n[l];c&&(a[u[0]]=c[0],a[u[1]]=c[1])}for(var s=0;s<TRANSFORMABLE_PROPS.length;s++){var p=TRANSFORMABLE_PROPS[s];n[p]!=null&&(a[p]=n[p])}}function prepareStyleTransitionFrom(t,n,a,s){if(a){var l=t.style,u;if(l){var c=a.transition,p=n.transition;if(c&&!isTransitionAll(c)){var d=normalizeToArray(c);!u&&(u=s.style={});for(var x=0;x<d.length;x++){var _=d[x],S=l[_];u[_]=S}}else if(t.getAnimationStyleProps&&(isTransitionAll(p)||isTransitionAll(c)||indexOf(p,"style")>=0)){var T=t.getAnimationStyleProps(),A=T?T.style:null;if(A){!u&&(u=s.style={});for(var R=keys(a),x=0;x<R.length;x++){var _=R[x];if(A[_]){var S=l[_];u[_]=S}}}}}}}function isNonStyleTransitionEnabled(t,n){return isArrayLike(t)?t!==n:t!=null&&isFinite(t)}var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(t){t.stopAnimation("keyframe"),t.attr(getStateToRestore(t))}function applyKeyframeAnimation(t,n,a){if(!(!a.isAnimationEnabled()||!n)){if(isArray$1(n)){each$f(n,function(p){applyKeyframeAnimation(t,p,a)});return}var s=n.keyframes,l=n.duration;if(a&&l==null){var u=getAnimationConfig("enter",a,0);l=u&&u.duration}if(!(!s||!l)){var c=getStateToRestore(t);each$f(ELEMENT_ANIMATABLE_PROPS,function(p){if(!(p&&!t[p])){var d;s.sort(function(x,_){return x.percent-_.percent}),each$f(s,function(x){var _=t.animators,S=p?x[p]:x;if(S){var T=keys(S);if(p||(T=filter(T,function(D){return indexOf(KEYFRAME_EXCLUDE_KEYS,D)<0})),!!T.length){d||(d=t.animate(p,n.loop,!0),d.scope="keyframe");for(var A=0;A<_.length;A++)_[A]!==d&&_[A].targetName===d.targetName&&_[A].stopTracks(T);p&&(c[p]=c[p]||{});var R=p?c[p]:c;each$f(T,function(D){R[D]=((p?t[p]:t)||{})[D]}),d.whenWithKeys(l*x.percent,S,T,x.easing)}}}),d&&d.delay(n.delay||0).duration(l).start(n.easing)}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(t){return t instanceof Path}function isDisplayable(t){return t instanceof Displayable}function copyElement(t,n){n.copyTransform(t),isDisplayable(n)&&isDisplayable(t)&&(n.setStyle(t.style),n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel,n.invisible=t.invisible,n.ignore=t.ignore,isPath(n)&&isPath(t)&&n.setShape(t.shape))}var CustomChartView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){this._progressiveEls=null;var c=this._data,p=a.getData(),d=this.group,x=makeRenderItem(a,p,s,l);c||d.removeAll(),p.diff(c).add(function(S){createOrUpdateItem(l,null,S,x(S,u),a,d,p)}).remove(function(S){var T=c.getItemGraphicEl(S);T&&applyLeaveTransition(T,customInnerStore(T).option,a)}).update(function(S,T){var A=c.getItemGraphicEl(T);createOrUpdateItem(l,A,S,x(S,u),a,d,p)}).execute();var _=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;_?d.setClipPath(_):d.removeClipPath(),this._data=p},n.prototype.incrementalPrepareRender=function(a,s,l){this.group.removeAll(),this._data=null},n.prototype.incrementalRender=function(a,s,l,u,c){var p=s.getData(),d=makeRenderItem(s,p,l,u),x=this._progressiveEls=[];function _(A){A.isGroup||(A.incremental=!0,A.ensureState("emphasis").hoverLayer=!0)}for(var S=a.start;S<a.end;S++){var T=createOrUpdateItem(null,null,S,d(S,c),s,this.group,p);T&&(T.traverse(_),x.push(T))}},n.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},n.prototype.filterForExposedEvent=function(a,s,l,u){var c=s.element;if(c==null||l.name===c)return!0;for(;(l=l.__hostTarget||l.parent)&&l!==this.group;)if(l.name===c)return!0;return!1},n.type="custom",n}(ChartView);function createEl$1(t){var n=t.type,a;if(n==="path"){var s=t.shape,l=s.width!=null&&s.height!=null?{x:s.x||0,y:s.y||0,width:s.width,height:s.height}:null,u=getPathData(s);a=makePath(u,null,l,s.layout||"center"),customInnerStore(a).customPathData=u}else if(n==="image")a=new ZRImage({}),customInnerStore(a).customImagePath=t.style.image;else if(n==="text")a=new ZRText({});else if(n==="group")a=new Group$3;else{if(n==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var c=getShapeClass(n);if(!c){var p="";throwError(p)}a=new c}return customInnerStore(a).customGraphicType=n,a.name=t.name,a.z2EmphasisLift=1,a.z2SelectLift=1,a}function updateElNormal(t,n,a,s,l,u,c){stopPreviousKeyframeAnimationAndRestore(n);var p=l&&l.normal.cfg;p&&n.setTextConfig(p),s&&s.transition==null&&(s.transition=DEFAULT_TRANSITION);var d=s&&s.style;if(d){if(n.type==="text"){var x=d;hasOwn(x,"textFill")&&(x.fill=x.textFill),hasOwn(x,"textStroke")&&(x.stroke=x.textStroke)}var _=void 0,S=isPath(n)?d.decal:null;t&&S&&(S.dirty=!0,_=createOrUpdatePatternFromDecal(S,t)),d.__decalPattern=_}if(isDisplayable(n)&&d){var _=d.__decalPattern;_&&(d.decal=_)}applyUpdateTransition(n,s,u,{dataIndex:a,isInit:c,clearStyle:!0}),applyKeyframeAnimation(n,s.keyframeAnimation,u)}function updateElOnState(t,n,a,s,l){var u=n.isGroup?null:n,c=l&&l[t].cfg;if(u){var p=u.ensureState(t);if(s===!1){var d=u.getState(t);d&&(d.style=null)}else p.style=s||null;c&&(p.textConfig=c),setDefaultStateProxy(u)}}function updateZ(t,n,a){if(!t.isGroup){var s=t,l=a.currentZ,u=a.currentZLevel;s.z=l,s.zlevel=u;var c=n.z2;c!=null&&(s.z2=c||0);for(var p=0;p<STATES.length;p++)updateZForEachState(s,n,STATES[p])}}function updateZForEachState(t,n,a){var s=a===NORMAL,l=s?n:retrieveStateOption(n,a),u=l?l.z2:null,c;u!=null&&(c=s?t:t.ensureState(a),c.z2=u||0)}function makeRenderItem(t,n,a,s){var l=t.get("renderItem"),u=t.coordinateSystem,c={};u&&(c=u.prepareCustoms?u.prepareCustoms(u):prepareCustoms[u.type](u));for(var p=defaults({getWidth:s.getWidth,getHeight:s.getHeight,getZr:s.getZr,getDevicePixelRatio:s.getDevicePixelRatio,value:Z,style:J,ordinalRawValue:W,styleEmphasis:en,visual:Q,barLayout:on,currentSeriesIndices:gn,font:In},c.api||{}),d={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:c.coordSys,dataInsideLength:n.count(),encode:wrapEncodeDef(t.getData())},x,_,S={},T={},A={},R={},D=0;D<STATES.length;D++){var O=STATES[D];A[O]=t.getModel(PATH_ITEM_STYLE[O]),R[O]=t.getModel(PATH_LABEL[O])}function F(dn){return dn===x?_||(_=n.getItemModel(dn)):n.getItemModel(dn)}function z(dn,ix){return n.hasItemOption?dn===x?S[ix]||(S[ix]=F(dn).getModel(PATH_ITEM_STYLE[ix])):F(dn).getModel(PATH_ITEM_STYLE[ix]):A[ix]}function j(dn,ix){return n.hasItemOption?dn===x?T[ix]||(T[ix]=F(dn).getModel(PATH_LABEL[ix])):F(dn).getModel(PATH_LABEL[ix]):R[ix]}return function(dn,ix){return x=dn,_=null,S={},T={},l&&l(defaults({dataIndexInside:dn,dataIndex:n.getRawIndex(dn),actionType:ix?ix.type:null},d),p)};function Z(dn,ix){return ix==null&&(ix=x),n.getStore().get(n.getDimensionIndex(dn||0),ix)}function W(dn,ix){ix==null&&(ix=x),dn=dn||0;var Cn=n.getDimensionInfo(dn);if(!Cn){var ax=n.getDimensionIndex(dn);return ax>=0?n.getStore().get(ax,ix):void 0}var sx=n.get(Cn.name,ix),lx=Cn&&Cn.ordinalMeta;return lx?lx.categories[sx]:sx}function J(dn,ix){ix==null&&(ix=x);var Cn=n.getItemVisual(ix,"style"),ax=Cn&&Cn.fill,sx=Cn&&Cn.opacity,lx=z(ix,NORMAL).getItemStyle();ax!=null&&(lx.fill=ax),sx!=null&&(lx.opacity=sx);var ox={inheritColor:isString$1(ax)?ax:"#000"},hx=j(ix,NORMAL),_x=createTextStyle$1(hx,null,ox,!1,!0);_x.text=hx.getShallow("show")?retrieve2(t.getFormattedLabel(ix,NORMAL),getDefaultLabel(n,ix)):null;var ux=createTextConfig(hx,ox,!1);return Ct(dn,lx),lx=convertToEC4StyleForCustomSerise(lx,_x,ux),dn&&tn(lx,dn),lx.legacy=!0,lx}function en(dn,ix){ix==null&&(ix=x);var Cn=z(ix,EMPHASIS).getItemStyle(),ax=j(ix,EMPHASIS),sx=createTextStyle$1(ax,null,null,!0,!0);sx.text=ax.getShallow("show")?retrieve3(t.getFormattedLabel(ix,EMPHASIS),t.getFormattedLabel(ix,NORMAL),getDefaultLabel(n,ix)):null;var lx=createTextConfig(ax,null,!0);return Ct(dn,Cn),Cn=convertToEC4StyleForCustomSerise(Cn,sx,lx),dn&&tn(Cn,dn),Cn.legacy=!0,Cn}function tn(dn,ix){for(var Cn in ix)hasOwn(ix,Cn)&&(dn[Cn]=ix[Cn])}function Ct(dn,ix){dn&&(dn.textFill&&(ix.textFill=dn.textFill),dn.textPosition&&(ix.textPosition=dn.textPosition))}function Q(dn,ix){if(ix==null&&(ix=x),hasOwn(STYLE_VISUAL_TYPE,dn)){var Cn=n.getItemVisual(ix,"style");return Cn?Cn[STYLE_VISUAL_TYPE[dn]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,dn))return n.getItemVisual(ix,dn)}function on(dn){if(u.type==="cartesian2d"){var ix=u.getBaseAxis();return getLayoutOnAxis(defaults({axis:ix},dn))}}function gn(){return a.getCurrentSeriesIndices()}function In(dn){return getFont(dn,a)}}function wrapEncodeDef(t){var n={};return each$f(t.dimensions,function(a){var s=t.getDimensionInfo(a);if(!s.isExtraCoord){var l=s.coordDim,u=n[l]=n[l]||[];u[s.coordDimIndex]=t.getDimensionIndex(a)}}),n}function createOrUpdateItem(t,n,a,s,l,u,c){if(!s){u.remove(n);return}var p=doCreateOrUpdateEl(t,n,a,s,l,u);return p&&c.setItemGraphicEl(a,p),p&&toggleHoverEmphasis(p,s.focus,s.blurScope,s.emphasisDisabled),p}function doCreateOrUpdateEl(t,n,a,s,l,u){var c=-1,p=n;n&&doesElNeedRecreate(n,s,l)&&(c=indexOf(u.childrenRef(),n),n=null);var d=!n,x=n;x?x.clearStates():(x=createEl$1(s),p&&copyElement(p,x)),s.morph===!1?x.disableMorphing=!0:x.disableMorphing&&(x.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(x,a,s,l,d,attachedTxInfoTmp),doCreateOrUpdateClipPath(x,a,s,l,d),updateElNormal(t,x,a,s,attachedTxInfoTmp,l,d),hasOwn(s,"info")&&(customInnerStore(x).info=s.info);for(var _=0;_<STATES.length;_++){var S=STATES[_];if(S!==NORMAL){var T=retrieveStateOption(s,S),A=retrieveStyleOptionOnState(s,T,S);updateElOnState(S,x,T,A,attachedTxInfoTmp)}}return updateZ(x,s,l),s.type==="group"&&mergeChildren(t,x,a,s,l),c>=0?u.replaceAt(x,c):u.add(x),x}function doesElNeedRecreate(t,n,a){var s=customInnerStore(t),l=n.type,u=n.shape,c=n.style;return a.isUniversalTransitionEnabled()||l!=null&&l!==s.customGraphicType||l==="path"&&hasOwnPathData(u)&&getPathData(u)!==s.customPathData||l==="image"&&hasOwn(c,"image")&&c.image!==s.customImagePath}function doCreateOrUpdateClipPath(t,n,a,s,l){var u=a.clipPath;if(u===!1)t&&t.getClipPath()&&t.removeClipPath();else if(u){var c=t.getClipPath();c&&doesElNeedRecreate(c,u,s)&&(c=null),c||(c=createEl$1(u),t.setClipPath(c)),updateElNormal(null,c,n,u,null,s,l)}}function doCreateOrUpdateAttachedTx(t,n,a,s,l,u){if(!t.isGroup){processTxInfo(a,null,u),processTxInfo(a,EMPHASIS,u);var c=u.normal.conOpt,p=u.emphasis.conOpt,d=u.blur.conOpt,x=u.select.conOpt;if(c!=null||p!=null||x!=null||d!=null){var _=t.getTextContent();if(c===!1)_&&t.removeTextContent();else{c=u.normal.conOpt=c||{type:"text"},_?_.clearStates():(_=createEl$1(c),t.setTextContent(_)),updateElNormal(null,_,n,c,null,s,l);for(var S=c&&c.style,T=0;T<STATES.length;T++){var A=STATES[T];if(A!==NORMAL){var R=u[A].conOpt;updateElOnState(A,_,R,retrieveStyleOptionOnState(c,R,A),null)}}S?_.dirty():_.markRedraw()}}}}function processTxInfo(t,n,a){var s=n?retrieveStateOption(t,n):t,l=n?retrieveStyleOptionOnState(t,s,EMPHASIS):t.style,u=t.type,c=s?s.textConfig:null,p=t.textContent,d=p?n?retrieveStateOption(p,n):p:null;if(l&&(a.isLegacy||isEC4CompatibleStyle(l,u,!!c,!!d))){a.isLegacy=!0;var x=convertFromEC4CompatibleStyle(l,u,!n);!c&&x.textConfig&&(c=x.textConfig),!d&&x.textContent&&(d=x.textContent)}if(!n&&d){var _=d;!_.type&&(_.type="text")}var S=n?a[n]:a.normal;S.cfg=c,S.conOpt=d}function retrieveStateOption(t,n){return n?t?t[n]:null:t}function retrieveStyleOptionOnState(t,n,a){var s=n&&n.style;return s==null&&a===EMPHASIS&&t&&(s=t.styleEmphasis),s}function mergeChildren(t,n,a,s,l){var u=s.children,c=u?u.length:0,p=s.$mergeChildren,d=p==="byName"||s.diffChildrenByName,x=p===!1;if(!(!c&&!d&&!x)){if(d){diffGroupChildren({api:t,oldChildren:n.children()||[],newChildren:u||[],dataIndex:a,seriesModel:l,group:n});return}x&&n.removeAll();for(var _=0;_<c;_++){var S=u[_],T=n.childAt(_);S?(S.ignore==null&&(S.ignore=!1),doCreateOrUpdateEl(t,T,a,S,l,n)):T.ignore=!0}for(var A=n.childCount()-1;A>=_;A--){var R=n.childAt(A);removeChildFromGroup(n,R,l)}}}function removeChildFromGroup(t,n,a){n&&applyLeaveTransition(n,customInnerStore(t).option,a)}function diffGroupChildren(t){new DataDiffer(t.oldChildren,t.newChildren,getKey,getKey,t).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(t,n){var a=t&&t.name;return a??GROUP_DIFF_PREFIX+n}function processAddUpdate(t,n){var a=this.context,s=t!=null?a.newChildren[t]:null,l=n!=null?a.oldChildren[n]:null;doCreateOrUpdateEl(a.api,l,a.dataIndex,s,a.seriesModel,a.group)}function processRemove(t){var n=this.context,a=n.oldChildren[t];a&&applyLeaveTransition(a,customInnerStore(a).option,n.seriesModel)}function getPathData(t){return t&&(t.pathData||t.d)}function hasOwnPathData(t){return t&&(hasOwn(t,"pathData")||hasOwn(t,"d"))}function install$r(t){t.registerChartView(CustomChartView),t.registerSeriesModel(CustomSeriesModel)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(n,a,s,l){var u=a.get("value"),c=a.get("status");if(this._axisModel=n,this._axisPointerModel=a,this._api=s,!(!l&&this._lastValue===u&&this._lastStatus===c)){this._lastValue=u,this._lastStatus=c;var p=this._group,d=this._handle;if(!c||c==="hide"){p&&p.hide(),d&&d.hide();return}p&&p.show(),d&&d.show();var x={};this.makeElOption(x,u,n,a,s);var _=x.graphicKey;_!==this._lastGraphicKey&&this.clear(s),this._lastGraphicKey=_;var S=this._moveAnimation=this.determineAnimation(n,a);if(!p)p=this._group=new Group$3,this.createPointerEl(p,x,n,a),this.createLabelEl(p,x,n,a),s.getZr().add(p);else{var T=curry$1(updateProps,a,S);this.updatePointerEl(p,x,T),this.updateLabelEl(p,x,T,a)}updateMandatoryProps(p,a,!0),this._renderHandle(u)}},t.prototype.remove=function(n){this.clear(n)},t.prototype.dispose=function(n){this.clear(n)},t.prototype.determineAnimation=function(n,a){var s=a.get("animation"),l=n.axis,u=l.type==="category",c=a.get("snap");if(!c&&!u)return!1;if(s==="auto"||s==null){var p=this.animationThreshold;if(u&&l.getBandWidth()>p)return!0;if(c){var d=getAxisInfo$1(n).seriesDataCount,x=l.getExtent();return Math.abs(x[0]-x[1])/d>p}return!1}return s===!0},t.prototype.makeElOption=function(n,a,s,l,u){},t.prototype.createPointerEl=function(n,a,s,l){var u=a.pointer;if(u){var c=inner$b(n).pointerEl=new graphic$1[u.type](clone$1(a.pointer));n.add(c)}},t.prototype.createLabelEl=function(n,a,s,l){if(a.label){var u=inner$b(n).labelEl=new ZRText(clone$1(a.label));n.add(u),updateLabelShowHide(u,l)}},t.prototype.updatePointerEl=function(n,a,s){var l=inner$b(n).pointerEl;l&&a.pointer&&(l.setStyle(a.pointer.style),s(l,{shape:a.pointer.shape}))},t.prototype.updateLabelEl=function(n,a,s,l){var u=inner$b(n).labelEl;u&&(u.setStyle(a.label.style),s(u,{x:a.label.x,y:a.label.y}),updateLabelShowHide(u,l))},t.prototype._renderHandle=function(n){if(!(this._dragging||!this.updateHandleTransform)){var a=this._axisPointerModel,s=this._api.getZr(),l=this._handle,u=a.getModel("handle"),c=a.get("status");if(!u.get("show")||!c||c==="hide"){l&&s.remove(l),this._handle=null;return}var p;this._handle||(p=!0,l=this._handle=createIcon(u.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(x){stop(x.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),s.add(l)),updateMandatoryProps(l,a,!1),l.setStyle(u.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var d=u.get("size");isArray$1(d)||(d=[d,d]),l.scaleX=d[0]/2,l.scaleY=d[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",u.get("throttle")||0,"fixRate"),this._moveHandleToValue(n,p)}},t.prototype._moveHandleToValue=function(n,a){updateProps(this._axisPointerModel,!a&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(n,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(n,a){var s=this._handle;if(s){this._dragging=!0;var l=this.updateHandleTransform(getHandleTransProps(s),[n,a],this._axisModel,this._axisPointerModel);this._payloadInfo=l,s.stopAnimation(),s.attr(getHandleTransProps(l)),inner$b(s).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var n=this._handle;if(n){var a=this._payloadInfo,s=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:a.cursorPoint[0],y:a.cursorPoint[1],tooltipOption:a.tooltipOption,axesInfo:[{axisDim:s.axis.dim,axisIndex:s.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var n=this._handle;if(n){var a=this._axisPointerModel.get("value");this._moveHandleToValue(a),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(n){this._lastValue=null,this._lastStatus=null;var a=n.getZr(),s=this._group,l=this._handle;a&&s&&(this._lastGraphicKey=null,s&&a.remove(s),l&&a.remove(l),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(n,a,s){return s=s||0,{x:n[s],y:n[1-s],width:a[s],height:a[1-s]}},t}();function updateProps(t,n,a,s){propsEqual(inner$b(a).lastProp,s)||(inner$b(a).lastProp=s,n?updateProps$1(a,s,t):(a.stopAnimation(),a.attr(s)))}function propsEqual(t,n){if(isObject$3(t)&&isObject$3(n)){var a=!0;return each$f(n,function(s,l){a=a&&propsEqual(t[l],s)}),!!a}else return t===n}function updateLabelShowHide(t,n){t[n.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function updateMandatoryProps(t,n,a){var s=n.get("z"),l=n.get("zlevel");t&&t.traverse(function(u){u.type!=="group"&&(s!=null&&(u.z=s),l!=null&&(u.zlevel=l),u.silent=a)})}function buildElStyle(t){var n=t.get("type"),a=t.getModel(n+"Style"),s;return n==="line"?(s=a.getLineStyle(),s.fill=null):n==="shadow"&&(s=a.getAreaStyle(),s.stroke=null),s}function buildLabelElOption(t,n,a,s,l){var u=a.get("value"),c=getValueLabel(u,n.axis,n.ecModel,a.get("seriesDataIndices"),{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])}),p=a.getModel("label"),d=normalizeCssArray(p.get("padding")||0),x=p.getFont(),_=getBoundingRect(c,x),S=l.position,T=_.width+d[1]+d[3],A=_.height+d[0]+d[2],R=l.align;R==="right"&&(S[0]-=T),R==="center"&&(S[0]-=T/2);var D=l.verticalAlign;D==="bottom"&&(S[1]-=A),D==="middle"&&(S[1]-=A/2),confineInContainer(S,T,A,s);var O=p.get("backgroundColor");(!O||O==="auto")&&(O=n.get(["axisLine","lineStyle","color"])),t.label={x:S[0],y:S[1],style:createTextStyle$1(p,{text:c,font:x,fill:p.getTextColor(),padding:d,backgroundColor:O}),z2:10}}function confineInContainer(t,n,a,s){var l=s.getWidth(),u=s.getHeight();t[0]=Math.min(t[0]+n,l)-n,t[1]=Math.min(t[1]+a,u)-a,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function getValueLabel(t,n,a,s,l){t=n.scale.parse(t);var u=n.scale.getLabel({value:t},{precision:l.precision}),c=l.formatter;if(c){var p={value:getAxisRawValue(n,{value:t}),axisDimension:n.dim,axisIndex:n.index,seriesData:[]};each$f(s,function(d){var x=a.getSeriesByIndex(d.seriesIndex),_=d.dataIndexInside,S=x&&x.getDataParams(_);S&&p.seriesData.push(S)}),isString$1(c)?u=c.replace("{value}",u):isFunction$1(c)&&(u=c(p))}return u}function getTransformedPosition(t,n,a){var s=create$1();return rotate(s,s,a.rotation),translate(s,s,a.position),applyTransform([t.dataToCoord(n),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],s)}function buildCartesianSingleLabelElOption(t,n,a,s,l,u){var c=AxisBuilder.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=l.get(["label","margin"]),buildLabelElOption(n,s,l,u,{position:getTransformedPosition(s.axis,t,a),align:c.textAlign,verticalAlign:c.textVerticalAlign})}function makeLineShape(t,n,a){return a=a||0,{x1:t[a],y1:t[1-a],x2:n[a],y2:n[1-a]}}function makeRectShape(t,n,a){return a=a||0,{x:t[a],y:t[1-a],width:n[a],height:n[1-a]}}function makeSectorShape(t,n,a,s,l,u){return{cx:t,cy:n,r0:a,r:s,startAngle:l,endAngle:u,clockwise:!0}}var CartesianAxisPointer=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.makeElOption=function(a,s,l,u,c){var p=l.axis,d=p.grid,x=u.get("type"),_=getCartesian(d,p).getOtherAxis(p).getGlobalExtent(),S=p.toGlobalCoord(p.dataToCoord(s,!0));if(x&&x!=="none"){var T=buildElStyle(u),A=pointerShapeBuilder$2[x](p,S,_);A.style=T,a.graphicKey=A.type,a.pointer=A}var R=layout$2(d.model,l);buildCartesianSingleLabelElOption(s,a,R,l,u,c)},n.prototype.getHandleTransform=function(a,s,l){var u=layout$2(s.axis.grid.model,s,{labelInside:!1});u.labelMargin=l.get(["handle","margin"]);var c=getTransformedPosition(s.axis,a,u);return{x:c[0],y:c[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(a,s,l,u){var c=l.axis,p=c.grid,d=c.getGlobalExtent(!0),x=getCartesian(p,c).getOtherAxis(c).getGlobalExtent(),_=c.dim==="x"?0:1,S=[a.x,a.y];S[_]+=s[_],S[_]=Math.min(d[1],S[_]),S[_]=Math.max(d[0],S[_]);var T=(x[1]+x[0])/2,A=[T,T];A[_]=S[_];var R=[{verticalAlign:"middle"},{align:"center"}];return{x:S[0],y:S[1],rotation:a.rotation,cursorPoint:A,tooltipOption:R[_]}},n}(BaseAxisPointer);function getCartesian(t,n){var a={};return a[n.dim+"AxisIndex"]=n.index,t.getCartesian(a)}var pointerShapeBuilder$2={line:function(t,n,a){var s=makeLineShape([n,a[0]],[n,a[1]],getAxisDimIndex(t));return{type:"Line",subPixelOptimize:!0,shape:s}},shadow:function(t,n,a){var s=Math.max(1,t.getBandWidth()),l=a[1]-a[0];return{type:"Rect",shape:makeRectShape([n-s/2,a[0]],[s,l],getAxisDimIndex(t))}}};function getAxisDimIndex(t){return t.dim==="x"?0:1}var AxisPointerModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="axisPointer",n.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},n}(ComponentModel),inner$a=makeInner(),each$8=each$f;function register(t,n,a){if(!env.node){var s=n.getZr();inner$a(s).records||(inner$a(s).records={}),initGlobalListeners(s,n);var l=inner$a(s).records[t]||(inner$a(s).records[t]={});l.handler=a}}function initGlobalListeners(t,n){if(inner$a(t).initialized)return;inner$a(t).initialized=!0,a("click",curry$1(doEnter,"click")),a("mousemove",curry$1(doEnter,"mousemove")),a("globalout",onLeave);function a(s,l){t.on(s,function(u){var c=makeDispatchAction$1(n);each$8(inner$a(t).records,function(p){p&&l(p,u,c.dispatchAction)}),dispatchTooltipFinally(c.pendings,n)})}}function dispatchTooltipFinally(t,n){var a=t.showTip.length,s=t.hideTip.length,l;a?l=t.showTip[a-1]:s&&(l=t.hideTip[s-1]),l&&(l.dispatchAction=null,n.dispatchAction(l))}function onLeave(t,n,a){t.handler("leave",null,a)}function doEnter(t,n,a,s){n.handler(t,a,s)}function makeDispatchAction$1(t){var n={showTip:[],hideTip:[]},a=function(s){var l=n[s.type];l?l.push(s):(s.dispatchAction=a,t.dispatchAction(s))};return{dispatchAction:a,pendings:n}}function unregister(t,n){if(!env.node){var a=n.getZr(),s=(inner$a(a).records||{})[t];s&&(inner$a(a).records[t]=null)}}var AxisPointerView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=s.getComponent("tooltip"),c=a.get("triggerOn")||u&&u.get("triggerOn")||"mousemove|click";register("axisPointer",l,function(p,d,x){c!=="none"&&(p==="leave"||c.indexOf(p)>=0)&&x({type:"updateAxisPointer",currTrigger:p,x:d&&d.offsetX,y:d&&d.offsetY})})},n.prototype.remove=function(a,s){unregister("axisPointer",s)},n.prototype.dispose=function(a,s){unregister("axisPointer",s)},n.type="axisPointer",n}(ComponentView);function findPointFromSeries(t,n){var a=[],s=t.seriesIndex,l;if(s==null||!(l=n.getSeriesByIndex(s)))return{point:[]};var u=l.getData(),c=queryDataIndex(u,t);if(c==null||c<0||isArray$1(c))return{point:[]};var p=u.getItemGraphicEl(c),d=l.coordinateSystem;if(l.getTooltipPosition)a=l.getTooltipPosition(c)||[];else if(d&&d.dataToPoint)if(t.isStacked){var x=d.getBaseAxis(),_=d.getOtherAxis(x),S=_.dim,T=x.dim,A=S==="x"||S==="radius"?1:0,R=u.mapDimension(T),D=[];D[A]=u.get(R,c),D[1-A]=u.get(u.getCalculationInfo("stackResultDimension"),c),a=d.dataToPoint(D)||[]}else a=d.dataToPoint(u.getValues(map$1(d.dimensions,function(F){return u.mapDimension(F)}),c))||[];else if(p){var O=p.getBoundingRect().clone();O.applyTransform(p.transform),a=[O.x+O.width/2,O.y+O.height/2]}return{point:a,el:p}}var inner$9=makeInner();function axisTrigger(t,n,a){var s=t.currTrigger,l=[t.x,t.y],u=t,c=t.dispatchAction||bind$1(a.dispatchAction,a),p=n.getComponent("axisPointer").coordSysAxesInfo;if(p){illegalPoint(l)&&(l=findPointFromSeries({seriesIndex:u.seriesIndex,dataIndex:u.dataIndex},n).point);var d=illegalPoint(l),x=u.axesInfo,_=p.axesInfo,S=s==="leave"||illegalPoint(l),T={},A={},R={list:[],map:{}},D={showPointer:curry$1(showPointer,A),showTooltip:curry$1(showTooltip,R)};each$f(p.coordSysMap,function(F,z){var j=d||F.containPoint(l);each$f(p.coordSysAxesInfo[z],function(Z,W){var J=Z.axis,en=findInputAxisInfo(x,Z);if(!S&&j&&(!x||en)){var tn=en&&en.value;tn==null&&!d&&(tn=J.pointToData(l)),tn!=null&&processOnAxis(Z,tn,D,!1,T)}})});var O={};return each$f(_,function(F,z){var j=F.linkGroup;j&&!A[z]&&each$f(j.axesInfo,function(Z,W){var J=A[W];if(Z!==F&&J){var en=J.value;j.mapper&&(en=F.axis.scale.parse(j.mapper(en,makeMapperParam(Z),makeMapperParam(F)))),O[F.key]=en}})}),each$f(O,function(F,z){processOnAxis(_[z],F,D,!0,T)}),updateModelActually(A,_,T),dispatchTooltipActually(R,l,t,c),dispatchHighDownActually(_,c,a),T}}function processOnAxis(t,n,a,s,l){var u=t.axis;if(!(u.scale.isBlank()||!u.containData(n))){if(!t.involveSeries){a.showPointer(t,n);return}var c=buildPayloadsBySeries(n,t),p=c.payloadBatch,d=c.snapToValue;p[0]&&l.seriesIndex==null&&extend(l,p[0]),!s&&t.snap&&u.containData(d)&&d!=null&&(n=d),a.showPointer(t,n,p),a.showTooltip(t,c,d)}}function buildPayloadsBySeries(t,n){var a=n.axis,s=a.dim,l=t,u=[],c=Number.MAX_VALUE,p=-1;return each$f(n.seriesModels,function(d,x){var _=d.getData().mapDimensionsAll(s),S,T;if(d.getAxisTooltipData){var A=d.getAxisTooltipData(_,t,a);T=A.dataIndices,S=A.nestestValue}else{if(T=d.getData().indicesOfNearest(_[0],t,a.type==="category"?.5:null),!T.length)return;S=d.getData().get(_[0],T[0])}if(!(S==null||!isFinite(S))){var R=t-S,D=Math.abs(R);D<=c&&((D<c||R>=0&&p<0)&&(c=D,p=R,l=S,u.length=0),each$f(T,function(O){u.push({seriesIndex:d.seriesIndex,dataIndexInside:O,dataIndex:d.getData().getRawIndex(O)})}))}}),{payloadBatch:u,snapToValue:l}}function showPointer(t,n,a,s){t[n.key]={value:a,payloadBatch:s}}function showTooltip(t,n,a,s){var l=a.payloadBatch,u=n.axis,c=u.model,p=n.axisPointerModel;if(!(!n.triggerTooltip||!l.length)){var d=n.coordSys.model,x=makeKey(d),_=t.map[x];_||(_=t.map[x]={coordSysId:d.id,coordSysIndex:d.componentIndex,coordSysType:d.type,coordSysMainType:d.mainType,dataByAxis:[]},t.list.push(_)),_.dataByAxis.push({axisDim:u.dim,axisIndex:c.componentIndex,axisType:c.type,axisId:c.id,value:s,valueLabelOpt:{precision:p.get(["label","precision"]),formatter:p.get(["label","formatter"])},seriesDataIndices:l.slice()})}}function updateModelActually(t,n,a){var s=a.axesInfo=[];each$f(n,function(l,u){var c=l.axisPointerModel.option,p=t[u];p?(!l.useHandle&&(c.status="show"),c.value=p.value,c.seriesDataIndices=(p.payloadBatch||[]).slice()):!l.useHandle&&(c.status="hide"),c.status==="show"&&s.push({axisDim:l.axis.dim,axisIndex:l.axis.model.componentIndex,value:c.value})})}function dispatchTooltipActually(t,n,a,s){if(illegalPoint(n)||!t.list.length){s({type:"hideTip"});return}var l=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};s({type:"showTip",escapeConnect:!0,x:n[0],y:n[1],tooltipOption:a.tooltipOption,position:a.position,dataIndexInside:l.dataIndexInside,dataIndex:l.dataIndex,seriesIndex:l.seriesIndex,dataByCoordSys:t.list})}function dispatchHighDownActually(t,n,a){var s=a.getZr(),l="axisPointerLastHighlights",u=inner$9(s)[l]||{},c=inner$9(s)[l]={};each$f(t,function(x,_){var S=x.axisPointerModel.option;S.status==="show"&&x.triggerEmphasis&&each$f(S.seriesDataIndices,function(T){var A=T.seriesIndex+" | "+T.dataIndex;c[A]=T})});var p=[],d=[];each$f(u,function(x,_){!c[_]&&d.push(x)}),each$f(c,function(x,_){!u[_]&&p.push(x)}),d.length&&a.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:d}),p.length&&a.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:p})}function findInputAxisInfo(t,n){for(var a=0;a<(t||[]).length;a++){var s=t[a];if(n.axis.dim===s.axisDim&&n.axis.model.componentIndex===s.axisIndex)return s}}function makeMapperParam(t){var n=t.axis.model,a={},s=a.axisDim=t.axis.dim;return a.axisIndex=a[s+"AxisIndex"]=n.componentIndex,a.axisName=a[s+"AxisName"]=n.name,a.axisId=a[s+"AxisId"]=n.id,a}function illegalPoint(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}function install$q(t){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),t.registerComponentModel(AxisPointerModel),t.registerComponentView(AxisPointerView),t.registerPreprocessor(function(n){if(n){(!n.axisPointer||n.axisPointer.length===0)&&(n.axisPointer={});var a=n.axisPointer.link;a&&!isArray$1(a)&&(n.axisPointer.link=[a])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(n,a){n.getComponent("axisPointer").coordSysAxesInfo=collect(n,a)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$p(t){use(install$N),use(install$q)}var PolarAxisPointer=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.makeElOption=function(a,s,l,u,c){var p=l.axis;p.dim==="angle"&&(this.animationThreshold=Math.PI/18);var d=p.polar,x=d.getOtherAxis(p),_=x.getExtent(),S=p.dataToCoord(s),T=u.get("type");if(T&&T!=="none"){var A=buildElStyle(u),R=pointerShapeBuilder$1[T](p,d,S,_);R.style=A,a.graphicKey=R.type,a.pointer=R}var D=u.get(["label","margin"]),O=getLabelPosition(s,l,u,d,D);buildLabelElOption(a,l,u,c,O)},n}(BaseAxisPointer);function getLabelPosition(t,n,a,s,l){var u=n.axis,c=u.dataToCoord(t),p=s.getAngleAxis().getExtent()[0];p=p/180*Math.PI;var d=s.getRadiusAxis().getExtent(),x,_,S;if(u.dim==="radius"){var T=create$1();rotate(T,T,p),translate(T,T,[s.cx,s.cy]),x=applyTransform([c,-l],T);var A=n.getModel("axisLabel").get("rotate")||0,R=AxisBuilder.innerTextLayout(p,A*Math.PI/180,-1);_=R.textAlign,S=R.textVerticalAlign}else{var D=d[1];x=s.coordToPoint([D+l,c]);var O=s.cx,F=s.cy;_=Math.abs(x[0]-O)/D<.3?"center":x[0]>O?"left":"right",S=Math.abs(x[1]-F)/D<.3?"middle":x[1]>F?"top":"bottom"}return{position:x,align:_,verticalAlign:S}}var pointerShapeBuilder$1={line:function(t,n,a,s){return t.dim==="angle"?{type:"Line",shape:makeLineShape(n.coordToPoint([s[0],a]),n.coordToPoint([s[1],a]))}:{type:"Circle",shape:{cx:n.cx,cy:n.cy,r:a}}},shadow:function(t,n,a,s){var l=Math.max(1,t.getBandWidth()),u=Math.PI/180;return t.dim==="angle"?{type:"Sector",shape:makeSectorShape(n.cx,n.cy,s[0],s[1],(-a-l/2)*u,(-a+l/2)*u)}:{type:"Sector",shape:makeSectorShape(n.cx,n.cy,a-l/2,a+l/2,0,Math.PI*2)}}},PolarModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.findAxisModel=function(a){var s,l=this.ecModel;return l.eachComponent(a,function(u){u.getCoordSysModel()===this&&(s=u)},this),s},n.type="polar",n.dependencies=["radiusAxis","angleAxis"],n.defaultOption={z:0,center:["50%","50%"],radius:"80%"},n}(ComponentModel),PolarAxisModel=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},n.type="polarAxis",n}(ComponentModel);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="angleAxis",n}(PolarAxisModel),RadiusAxisModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="radiusAxis",n}(PolarAxisModel),RadiusAxis=function(t){__extends(n,t);function n(a,s){return t.call(this,"radius",a,s)||this}return n.prototype.pointToData=function(a,s){return this.polar.pointToData(a,s)[this.dim==="radius"?0:1]},n}(Axis);RadiusAxis.prototype.dataToRadius=Axis.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis.prototype.coordToData;var inner$8=makeInner(),AngleAxis=function(t){__extends(n,t);function n(a,s){return t.call(this,"angle",a,s||[0,360])||this}return n.prototype.pointToData=function(a,s){return this.polar.pointToData(a,s)[this.dim==="radius"?0:1]},n.prototype.calculateCategoryInterval=function(){var a=this,s=a.getLabelModel(),l=a.scale,u=l.getExtent(),c=l.count();if(u[1]-u[0]<1)return 0;var p=u[0],d=a.dataToCoord(p+1)-a.dataToCoord(p),x=Math.abs(d),_=getBoundingRect(p==null?"":p+"",s.getFont(),"center","top"),S=Math.max(_.height,7),T=S/x;isNaN(T)&&(T=1/0);var A=Math.max(0,Math.floor(T)),R=inner$8(a.model),D=R.lastAutoInterval,O=R.lastTickCount;return D!=null&&O!=null&&Math.abs(D-A)<=1&&Math.abs(O-c)<=1&&D>A?A=D:(R.lastTickCount=c,R.lastAutoInterval=A),A},n}(Axis);AngleAxis.prototype.dataToAngle=Axis.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis.prototype.coordToData;var polarDimensions=["radius","angle"],Polar=function(){function t(n){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis,this.axisPointerEnabled=!0,this.name=n||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(n){var a=this.pointToCoord(n);return this._radiusAxis.contain(a[0])&&this._angleAxis.contain(a[1])},t.prototype.containData=function(n){return this._radiusAxis.containData(n[0])&&this._angleAxis.containData(n[1])},t.prototype.getAxis=function(n){var a="_"+n+"Axis";return this[a]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(n){var a=[],s=this._angleAxis,l=this._radiusAxis;return s.scale.type===n&&a.push(s),l.scale.type===n&&a.push(l),a},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(n){var a=this._angleAxis;return n===a?this._radiusAxis:a},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(n){var a=n!=null&&n!=="auto"?this.getAxis(n):this.getBaseAxis();return{baseAxes:[a],otherAxes:[this.getOtherAxis(a)]}},t.prototype.dataToPoint=function(n,a){return this.coordToPoint([this._radiusAxis.dataToRadius(n[0],a),this._angleAxis.dataToAngle(n[1],a)])},t.prototype.pointToData=function(n,a){var s=this.pointToCoord(n);return[this._radiusAxis.radiusToData(s[0],a),this._angleAxis.angleToData(s[1],a)]},t.prototype.pointToCoord=function(n){var a=n[0]-this.cx,s=n[1]-this.cy,l=this.getAngleAxis(),u=l.getExtent(),c=Math.min(u[0],u[1]),p=Math.max(u[0],u[1]);l.inverse?c=p-360:p=c+360;var d=Math.sqrt(a*a+s*s);a/=d,s/=d;for(var x=Math.atan2(-s,a)/Math.PI*180,_=x<c?1:-1;x<c||x>p;)x+=_*360;return[d,x]},t.prototype.coordToPoint=function(n){var a=n[0],s=n[1]/180*Math.PI,l=Math.cos(s)*a+this.cx,u=-Math.sin(s)*a+this.cy;return[l,u]},t.prototype.getArea=function(){var n=this.getAngleAxis(),a=this.getRadiusAxis(),s=a.getExtent().slice();s[0]>s[1]&&s.reverse();var l=n.getExtent(),u=Math.PI/180,c=1e-4;return{cx:this.cx,cy:this.cy,r0:s[0],r:s[1],startAngle:-l[0]*u,endAngle:-l[1]*u,clockwise:n.inverse,contain:function(p,d){var x=p-this.cx,_=d-this.cy,S=x*x+_*_,T=this.r,A=this.r0;return T!==A&&S-c<=T*T&&S+c>=A*A}}},t.prototype.convertToPixel=function(n,a,s){var l=getCoordSys$2(a);return l===this?this.dataToPoint(s):null},t.prototype.convertFromPixel=function(n,a,s){var l=getCoordSys$2(a);return l===this?this.pointToData(s):null},t}();function getCoordSys$2(t){var n=t.seriesModel,a=t.polarModel;return a&&a.coordinateSystem||n&&n.coordinateSystem}function resizePolar(t,n,a){var s=n.get("center"),l=a.getWidth(),u=a.getHeight();t.cx=parsePercent(s[0],l),t.cy=parsePercent(s[1],u);var c=t.getRadiusAxis(),p=Math.min(l,u)/2,d=n.get("radius");d==null?d=[0,"100%"]:isArray$1(d)||(d=[0,d]);var x=[parsePercent(d[0],p),parsePercent(d[1],p)];c.inverse?c.setExtent(x[1],x[0]):c.setExtent(x[0],x[1])}function updatePolarScale(t,n){var a=this,s=a.getAngleAxis(),l=a.getRadiusAxis();if(s.scale.setExtent(1/0,-1/0),l.scale.setExtent(1/0,-1/0),t.eachSeries(function(p){if(p.coordinateSystem===a){var d=p.getData();each$f(getDataDimensionsOnAxis(d,"radius"),function(x){l.scale.unionExtentFromData(d,x)}),each$f(getDataDimensionsOnAxis(d,"angle"),function(x){s.scale.unionExtentFromData(d,x)})}}),niceScaleExtent(s.scale,s.model),niceScaleExtent(l.scale,l.model),s.type==="category"&&!s.onBand){var u=s.getExtent(),c=360/s.scale.count();s.inverse?u[1]+=c:u[1]-=c,s.setExtent(u[0],u[1])}}function isAngleAxisModel(t){return t.mainType==="angleAxis"}function setAxis(t,n){var a;if(t.type=n.get("type"),t.scale=createScaleByModel$1(n),t.onBand=n.get("boundaryGap")&&t.type==="category",t.inverse=n.get("inverse"),isAngleAxisModel(n)){t.inverse=t.inverse!==n.get("clockwise");var s=n.get("startAngle"),l=(a=n.get("endAngle"))!==null&&a!==void 0?a:s+(t.inverse?-360:360);t.setExtent(s,l)}n.axis=t,t.model=n}var polarCreator={dimensions:polarDimensions,create:function(t,n){var a=[];return t.eachComponent("polar",function(s,l){var u=new Polar(l+"");u.update=updatePolarScale;var c=u.getRadiusAxis(),p=u.getAngleAxis(),d=s.findAxisModel("radiusAxis"),x=s.findAxisModel("angleAxis");setAxis(c,d),setAxis(p,x),resizePolar(u,s,n),a.push(u),s.coordinateSystem=u,u.model=s}),t.eachSeries(function(s){if(s.get("coordinateSystem")==="polar"){var l=s.getReferringComponents("polar",SINGLE_REFERRING).models[0];s.coordinateSystem=l.coordinateSystem}}),a}},elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(t,n,a){n[1]>n[0]&&(n=n.slice().reverse());var s=t.coordToPoint([n[0],a]),l=t.coordToPoint([n[1],a]);return{x1:s[0],y1:s[1],x2:l[0],y2:l[1]}}function getRadiusIdx(t){var n=t.getRadiusAxis();return n.inverse?0:1}function fixAngleOverlap(t){var n=t[0],a=t[t.length-1];n&&a&&Math.abs(Math.abs(n.coord-a.coord)-360)<1e-4&&t.pop()}var AngleAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="PolarAxisPointer",a}return n.prototype.render=function(a,s){if(this.group.removeAll(),!!a.get("show")){var l=a.axis,u=l.polar,c=u.getRadiusAxis().getExtent(),p=l.getTicksCoords(),d=l.getMinorTicksCoords(),x=map$1(l.getViewLabels(),function(_){_=clone$4(_);var S=l.scale,T=S.type==="ordinal"?S.getRawOrdinalNumber(_.tickValue):_.tickValue;return _.coord=l.dataToCoord(T),_});fixAngleOverlap(x),fixAngleOverlap(p),each$f(elementList,function(_){a.get([_,"show"])&&(!l.scale.isBlank()||_==="axisLine")&&angelAxisElementsBuilders[_](this.group,a,u,p,d,c,x)},this)}},n.type="angleAxis",n}(AxisView),angelAxisElementsBuilders={axisLine:function(t,n,a,s,l,u){var c=n.getModel(["axisLine","lineStyle"]),p=a.getAngleAxis(),d=Math.PI/180,x=p.getExtent(),_=getRadiusIdx(a),S=_?0:1,T,A=Math.abs(x[1]-x[0])===360?"Circle":"Arc";u[S]===0?T=new graphic$1[A]({shape:{cx:a.cx,cy:a.cy,r:u[_],startAngle:-x[0]*d,endAngle:-x[1]*d,clockwise:p.inverse},style:c.getLineStyle(),z2:1,silent:!0}):T=new Ring({shape:{cx:a.cx,cy:a.cy,r:u[_],r0:u[S]},style:c.getLineStyle(),z2:1,silent:!0}),T.style.fill=null,t.add(T)},axisTick:function(t,n,a,s,l,u){var c=n.getModel("axisTick"),p=(c.get("inside")?-1:1)*c.get("length"),d=u[getRadiusIdx(a)],x=map$1(s,function(_){return new Line$1({shape:getAxisLineShape(a,[d,d+p],_.coord)})});t.add(mergePath(x,{style:defaults(c.getModel("lineStyle").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,n,a,s,l,u){if(l.length){for(var c=n.getModel("axisTick"),p=n.getModel("minorTick"),d=(c.get("inside")?-1:1)*p.get("length"),x=u[getRadiusIdx(a)],_=[],S=0;S<l.length;S++)for(var T=0;T<l[S].length;T++)_.push(new Line$1({shape:getAxisLineShape(a,[x,x+d],l[S][T].coord)}));t.add(mergePath(_,{style:defaults(p.getModel("lineStyle").getLineStyle(),defaults(c.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,n,a,s,l,u,c){var p=n.getCategories(!0),d=n.getModel("axisLabel"),x=d.get("margin"),_=n.get("triggerEvent");each$f(c,function(S,T){var A=d,R=S.tickValue,D=u[getRadiusIdx(a)],O=a.coordToPoint([D+x,S.coord]),F=a.cx,z=a.cy,j=Math.abs(O[0]-F)/D<.3?"center":O[0]>F?"left":"right",Z=Math.abs(O[1]-z)/D<.3?"middle":O[1]>z?"top":"bottom";if(p&&p[R]){var W=p[R];isObject$3(W)&&W.textStyle&&(A=new Model(W.textStyle,d,d.ecModel))}var J=new ZRText({silent:AxisBuilder.isLabelSilent(n),style:createTextStyle$1(A,{x:O[0],y:O[1],fill:A.getTextColor()||n.get(["axisLine","lineStyle","color"]),text:S.formattedLabel,align:j,verticalAlign:Z})});if(t.add(J),_){var en=AxisBuilder.makeAxisEventDataBase(n);en.targetType="axisLabel",en.value=S.rawLabel,getECData(J).eventData=en}},this)},splitLine:function(t,n,a,s,l,u){var c=n.getModel("splitLine"),p=c.getModel("lineStyle"),d=p.get("color"),x=0;d=d instanceof Array?d:[d];for(var _=[],S=0;S<s.length;S++){var T=x++%d.length;_[T]=_[T]||[],_[T].push(new Line$1({shape:getAxisLineShape(a,u,s[S].coord)}))}for(var S=0;S<_.length;S++)t.add(mergePath(_[S],{style:defaults({stroke:d[S%d.length]},p.getLineStyle()),silent:!0,z:n.get("z")}))},minorSplitLine:function(t,n,a,s,l,u){if(l.length){for(var c=n.getModel("minorSplitLine"),p=c.getModel("lineStyle"),d=[],x=0;x<l.length;x++)for(var _=0;_<l[x].length;_++)d.push(new Line$1({shape:getAxisLineShape(a,u,l[x][_].coord)}));t.add(mergePath(d,{style:p.getLineStyle(),silent:!0,z:n.get("z")}))}},splitArea:function(t,n,a,s,l,u){if(s.length){var c=n.getModel("splitArea"),p=c.getModel("areaStyle"),d=p.get("color"),x=0;d=d instanceof Array?d:[d];for(var _=[],S=Math.PI/180,T=-s[0].coord*S,A=Math.min(u[0],u[1]),R=Math.max(u[0],u[1]),D=n.get("clockwise"),O=1,F=s.length;O<=F;O++){var z=O===F?s[0].coord:s[O].coord,j=x++%d.length;_[j]=_[j]||[],_[j].push(new Sector({shape:{cx:a.cx,cy:a.cy,r0:A,r:R,startAngle:T,endAngle:-z*S,clockwise:D},silent:!0})),T=-z*S}for(var O=0;O<_.length;O++)t.add(mergePath(_[O],{style:defaults({fill:d[O%d.length]},p.getAreaStyle()),silent:!0}))}}},axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="PolarAxisPointer",a}return n.prototype.render=function(a,s){if(this.group.removeAll(),!!a.get("show")){var l=this._axisGroup,u=this._axisGroup=new Group$3;this.group.add(u);var c=a.axis,p=c.polar,d=p.getAngleAxis(),x=c.getTicksCoords(),_=c.getMinorTicksCoords(),S=d.getExtent()[0],T=c.getExtent(),A=layoutAxis(p,a,S),R=new AxisBuilder(a,A);each$f(axisBuilderAttrs$1,R.add,R),u.add(R.getGroup()),groupTransition(l,u,a),each$f(selfBuilderAttrs$1,function(D){a.get([D,"show"])&&!c.scale.isBlank()&&axisElementBuilders$1[D](this.group,a,p,S,T,x,_)},this)}},n.type="radiusAxis",n}(AxisView),axisElementBuilders$1={splitLine:function(t,n,a,s,l,u){var c=n.getModel("splitLine"),p=c.getModel("lineStyle"),d=p.get("color"),x=0,_=a.getAngleAxis(),S=Math.PI/180,T=_.getExtent(),A=Math.abs(T[1]-T[0])===360?"Circle":"Arc";d=d instanceof Array?d:[d];for(var R=[],D=0;D<u.length;D++){var O=x++%d.length;R[O]=R[O]||[],R[O].push(new graphic$1[A]({shape:{cx:a.cx,cy:a.cy,r:Math.max(u[D].coord,0),startAngle:-T[0]*S,endAngle:-T[1]*S,clockwise:_.inverse}}))}for(var D=0;D<R.length;D++)t.add(mergePath(R[D],{style:defaults({stroke:d[D%d.length],fill:null},p.getLineStyle()),silent:!0}))},minorSplitLine:function(t,n,a,s,l,u,c){if(c.length){for(var p=n.getModel("minorSplitLine"),d=p.getModel("lineStyle"),x=[],_=0;_<c.length;_++)for(var S=0;S<c[_].length;S++)x.push(new Circle({shape:{cx:a.cx,cy:a.cy,r:c[_][S].coord}}));t.add(mergePath(x,{style:defaults({fill:null},d.getLineStyle()),silent:!0}))}},splitArea:function(t,n,a,s,l,u){if(u.length){var c=n.getModel("splitArea"),p=c.getModel("areaStyle"),d=p.get("color"),x=0;d=d instanceof Array?d:[d];for(var _=[],S=u[0].coord,T=1;T<u.length;T++){var A=x++%d.length;_[A]=_[A]||[],_[A].push(new Sector({shape:{cx:a.cx,cy:a.cy,r0:S,r:u[T].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),S=u[T].coord}for(var T=0;T<_.length;T++)t.add(mergePath(_[T],{style:defaults({fill:d[T%d.length]},p.getAreaStyle()),silent:!0}))}}};function layoutAxis(t,n,a){return{position:[t.cx,t.cy],rotation:a/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:n.getModel("axisLabel").get("rotate"),z2:1}}function getSeriesStackId(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function getAxisKey(t,n){return n.dim+t.model.componentIndex}function barLayoutPolar(t,n,a){var s={},l=calRadialBar(filter(n.getSeriesByType(t),function(u){return!n.isSeriesFiltered(u)&&u.coordinateSystem&&u.coordinateSystem.type==="polar"}));n.eachSeriesByType(t,function(u){if(u.coordinateSystem.type==="polar"){var c=u.getData(),p=u.coordinateSystem,d=p.getBaseAxis(),x=getAxisKey(p,d),_=getSeriesStackId(u),S=l[x][_],T=S.offset,A=S.width,R=p.getOtherAxis(d),D=u.coordinateSystem.cx,O=u.coordinateSystem.cy,F=u.get("barMinHeight")||0,z=u.get("barMinAngle")||0;s[_]=s[_]||[];for(var j=c.mapDimension(R.dim),Z=c.mapDimension(d.dim),W=isDimensionStacked(c,j),J=d.dim!=="radius"||!u.get("roundCap",!0),en=R.model,tn=en.get("startValue"),Ct=R.dataToCoord(tn||0),Q=0,on=c.count();Q<on;Q++){var gn=c.get(j,Q),In=c.get(Z,Q),dn=gn>=0?"p":"n",ix=Ct;W&&(s[_][In]||(s[_][In]={p:Ct,n:Ct}),ix=s[_][In][dn]);var Cn=void 0,ax=void 0,sx=void 0,lx=void 0;if(R.dim==="radius"){var ox=R.dataToCoord(gn)-Ct,hx=d.dataToCoord(In);Math.abs(ox)<F&&(ox=(ox<0?-1:1)*F),Cn=ix,ax=ix+ox,sx=hx-T,lx=sx-A,W&&(s[_][In][dn]=ax)}else{var _x=R.dataToCoord(gn,J)-Ct,ux=d.dataToCoord(In);Math.abs(_x)<z&&(_x=(_x<0?-1:1)*z),Cn=ux+T,ax=Cn+A,sx=ix,lx=ix+_x,W&&(s[_][In][dn]=lx)}c.setItemLayout(Q,{cx:D,cy:O,r0:Cn,r:ax,startAngle:-sx*Math.PI/180,endAngle:-lx*Math.PI/180,clockwise:sx>=lx})}}})}function calRadialBar(t){var n={};each$f(t,function(s,l){var u=s.getData(),c=s.coordinateSystem,p=c.getBaseAxis(),d=getAxisKey(c,p),x=p.getExtent(),_=p.type==="category"?p.getBandWidth():Math.abs(x[1]-x[0])/u.count(),S=n[d]||{bandWidth:_,remainedWidth:_,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},T=S.stacks;n[d]=S;var A=getSeriesStackId(s);T[A]||S.autoWidthCount++,T[A]=T[A]||{width:0,maxWidth:0};var R=parsePercent(s.get("barWidth"),_),D=parsePercent(s.get("barMaxWidth"),_),O=s.get("barGap"),F=s.get("barCategoryGap");R&&!T[A].width&&(R=Math.min(S.remainedWidth,R),T[A].width=R,S.remainedWidth-=R),D&&(T[A].maxWidth=D),O!=null&&(S.gap=O),F!=null&&(S.categoryGap=F)});var a={};return each$f(n,function(s,l){a[l]={};var u=s.stacks,c=s.bandWidth,p=parsePercent(s.categoryGap,c),d=parsePercent(s.gap,1),x=s.remainedWidth,_=s.autoWidthCount,S=(x-p)/(_+(_-1)*d);S=Math.max(S,0),each$f(u,function(D,O){var F=D.maxWidth;F&&F<S&&(F=Math.min(F,x),D.width&&(F=Math.min(F,D.width)),x-=F,D.width=F,_--)}),S=(x-p)/(_+(_-1)*d),S=Math.max(S,0);var T=0,A;each$f(u,function(D,O){D.width||(D.width=S),A=D,T+=D.width*(1+d)}),A&&(T-=A.width*d);var R=-T/2;each$f(u,function(D,O){a[l][O]=a[l][O]||{offset:R,width:D.width},R+=D.width*(1+d)})}),a}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="polar",n}(ComponentView);function install$o(t){use(install$q),AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer),t.registerCoordinateSystem("polar",polarCreator),t.registerComponentModel(PolarModel),t.registerComponentView(PolarView),axisModelCreator(t,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(t,"radius",RadiusAxisModel,radiusAxisExtraOption),t.registerComponentView(AngleAxisView),t.registerComponentView(RadiusAxisView),t.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$1(t,n){n=n||{};var a=t.coordinateSystem,s=t.axis,l={},u=s.position,c=s.orient,p=a.getRect(),d=[p.x,p.x+p.width,p.y,p.y+p.height],x={horizontal:{top:d[2],bottom:d[3]},vertical:{left:d[0],right:d[1]}};l.position=[c==="vertical"?x.vertical[u]:d[0],c==="horizontal"?x.horizontal[u]:d[3]];var _={horizontal:0,vertical:1};l.rotation=Math.PI/2*_[c];var S={top:-1,bottom:1,right:1,left:-1};l.labelDirection=l.tickDirection=l.nameDirection=S[u],t.get(["axisTick","inside"])&&(l.tickDirection=-l.tickDirection),retrieve(n.labelInside,t.get(["axisLabel","inside"]))&&(l.labelDirection=-l.labelDirection);var T=n.rotate;return T==null&&(T=t.get(["axisLabel","rotate"])),l.labelRotation=u==="top"?-T:T,l.z2=1,l}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="SingleAxisPointer",a}return n.prototype.render=function(a,s,l,u){var c=this.group;c.removeAll();var p=this._axisGroup;this._axisGroup=new Group$3;var d=layout$1(a),x=new AxisBuilder(a,d);each$f(axisBuilderAttrs,x.add,x),c.add(this._axisGroup),c.add(x.getGroup()),each$f(selfBuilderAttrs,function(_){a.get([_,"show"])&&axisElementBuilders[_](this,this.group,this._axisGroup,a)},this),groupTransition(p,this._axisGroup,a),t.prototype.render.call(this,a,s,l,u)},n.prototype.remove=function(){rectCoordAxisHandleRemove(this)},n.type="singleAxis",n}(AxisView),axisElementBuilders={splitLine:function(t,n,a,s){var l=s.axis;if(!l.scale.isBlank()){var u=s.getModel("splitLine"),c=u.getModel("lineStyle"),p=c.get("color");p=p instanceof Array?p:[p];for(var d=c.get("width"),x=s.coordinateSystem.getRect(),_=l.isHorizontal(),S=[],T=0,A=l.getTicksCoords({tickModel:u}),R=[],D=[],O=0;O<A.length;++O){var F=l.toGlobalCoord(A[O].coord);_?(R[0]=F,R[1]=x.y,D[0]=F,D[1]=x.y+x.height):(R[0]=x.x,R[1]=F,D[0]=x.x+x.width,D[1]=F);var z=new Line$1({shape:{x1:R[0],y1:R[1],x2:D[0],y2:D[1]},silent:!0});subPixelOptimizeLine(z.shape,d);var j=T++%p.length;S[j]=S[j]||[],S[j].push(z)}for(var Z=c.getLineStyle(["color"]),O=0;O<S.length;++O)n.add(mergePath(S[O],{style:defaults({stroke:p[O%p.length]},Z),silent:!0}))}},splitArea:function(t,n,a,s){rectCoordAxisBuildSplitArea(t,a,s,s)}},SingleAxisModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.getCoordSysModel=function(){return this},n.type="singleAxis",n.layoutMode="box",n.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},n}(ComponentModel);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);var SingleAxis=function(t){__extends(n,t);function n(a,s,l,u,c){var p=t.call(this,a,s,l)||this;return p.type=u||"value",p.position=c||"bottom",p}return n.prototype.isHorizontal=function(){var a=this.position;return a==="top"||a==="bottom"},n.prototype.pointToData=function(a,s){return this.coordinateSystem.pointToData(a)[0]},n}(Axis),singleDimensions=["single"],Single=function(){function t(n,a,s){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=n,this._init(n,a,s)}return t.prototype._init=function(n,a,s){var l=this.dimension,u=new SingleAxis(l,createScaleByModel$1(n),[0,0],n.get("type"),n.get("position")),c=u.type==="category";u.onBand=c&&n.get("boundaryGap"),u.inverse=n.get("inverse"),u.orient=n.get("orient"),n.axis=u,u.model=n,u.coordinateSystem=this,this._axis=u},t.prototype.update=function(n,a){n.eachSeries(function(s){if(s.coordinateSystem===this){var l=s.getData();each$f(l.mapDimensionsAll(this.dimension),function(u){this._axis.scale.unionExtentFromData(l,u)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},t.prototype.resize=function(n,a){this._rect=getLayoutRect({left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")},{width:a.getWidth(),height:a.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var n=this._rect,a=this._axis,s=a.isHorizontal(),l=s?[0,n.width]:[0,n.height],u=a.inverse?1:0;a.setExtent(l[u],l[1-u]),this._updateAxisTransform(a,s?n.x:n.y)},t.prototype._updateAxisTransform=function(n,a){var s=n.getExtent(),l=s[0]+s[1],u=n.isHorizontal();n.toGlobalCoord=u?function(c){return c+a}:function(c){return l-c+a},n.toLocalCoord=u?function(c){return c-a}:function(c){return l-c+a}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(n){var a=this.getRect(),s=this.getAxis(),l=s.orient;return l==="horizontal"?s.contain(s.toLocalCoord(n[0]))&&n[1]>=a.y&&n[1]<=a.y+a.height:s.contain(s.toLocalCoord(n[1]))&&n[0]>=a.y&&n[0]<=a.y+a.height},t.prototype.pointToData=function(n){var a=this.getAxis();return[a.coordToData(a.toLocalCoord(n[a.orient==="horizontal"?0:1]))]},t.prototype.dataToPoint=function(n){var a=this.getAxis(),s=this.getRect(),l=[],u=a.orient==="horizontal"?0:1;return n instanceof Array&&(n=n[0]),l[u]=a.toGlobalCoord(a.dataToCoord(+n)),l[1-u]=u===0?s.y+s.height/2:s.x+s.width/2,l},t.prototype.convertToPixel=function(n,a,s){var l=getCoordSys$1(a);return l===this?this.dataToPoint(s):null},t.prototype.convertFromPixel=function(n,a,s){var l=getCoordSys$1(a);return l===this?this.pointToData(s):null},t}();function getCoordSys$1(t){var n=t.seriesModel,a=t.singleAxisModel;return a&&a.coordinateSystem||n&&n.coordinateSystem}function create(t,n){var a=[];return t.eachComponent("singleAxis",function(s,l){var u=new Single(s,t,n);u.name="single_"+l,u.resize(s,n),s.coordinateSystem=u,a.push(u)}),t.eachSeries(function(s){if(s.get("coordinateSystem")==="singleAxis"){var l=s.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];s.coordinateSystem=l&&l.coordinateSystem}}),a}var singleCreator={create,dimensions:singleDimensions},XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.makeElOption=function(a,s,l,u,c){var p=l.axis,d=p.coordinateSystem,x=getGlobalExtent(d,1-getPointDimIndex(p)),_=d.dataToPoint(s)[0],S=u.get("type");if(S&&S!=="none"){var T=buildElStyle(u),A=pointerShapeBuilder[S](p,_,x);A.style=T,a.graphicKey=A.type,a.pointer=A}var R=layout$1(l);buildCartesianSingleLabelElOption(s,a,R,l,u,c)},n.prototype.getHandleTransform=function(a,s,l){var u=layout$1(s,{labelInside:!1});u.labelMargin=l.get(["handle","margin"]);var c=getTransformedPosition(s.axis,a,u);return{x:c[0],y:c[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(a,s,l,u){var c=l.axis,p=c.coordinateSystem,d=getPointDimIndex(c),x=getGlobalExtent(p,d),_=[a.x,a.y];_[d]+=s[d],_[d]=Math.min(x[1],_[d]),_[d]=Math.max(x[0],_[d]);var S=getGlobalExtent(p,1-d),T=(S[1]+S[0])/2,A=[T,T];return A[d]=_[d],{x:_[0],y:_[1],rotation:a.rotation,cursorPoint:A,tooltipOption:{verticalAlign:"middle"}}},n}(BaseAxisPointer),pointerShapeBuilder={line:function(t,n,a){var s=makeLineShape([n,a[0]],[n,a[1]],getPointDimIndex(t));return{type:"Line",subPixelOptimize:!0,shape:s}},shadow:function(t,n,a){var s=t.getBandWidth(),l=a[1]-a[0];return{type:"Rect",shape:makeRectShape([n-s/2,a[0]],[s,l],getPointDimIndex(t))}}};function getPointDimIndex(t){return t.isHorizontal()?0:1}function getGlobalExtent(t,n){var a=t.getRect();return[a[XY$1[n]],a[XY$1[n]]+a[WH$1[n]]]}var SingleView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="single",n}(ComponentView);function install$n(t){use(install$q),AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer),t.registerComponentView(SingleView),t.registerComponentView(SingleAxisView),t.registerComponentModel(SingleAxisModel),axisModelCreator(t,"single",SingleAxisModel,SingleAxisModel.defaultOption),t.registerCoordinateSystem("single",singleCreator)}var CalendarModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s,l){var u=getLayoutParams(a);t.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(a,u)},n.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,a)},n.prototype.getCellSize=function(){return this.option.cellSize},n.type="calendar",n.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},n}(ComponentModel);function mergeAndNormalizeLayoutParams$1(t,n){var a=t.cellSize,s;isArray$1(a)?s=a:s=t.cellSize=[a,a],s.length===1&&(s[1]=s[0]);var l=map$1([0,1],function(u){return sizeCalculable(n,u)&&(s[u]="auto"),s[u]!=null&&s[u]!=="auto"});mergeLayoutParam(t,n,{type:"box",ignoreSize:l})}var CalendarView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){var u=this.group;u.removeAll();var c=a.coordinateSystem,p=c.getRangeInfo(),d=c.getOrient(),x=s.getLocaleModel();this._renderDayRect(a,p,u),this._renderLines(a,p,d,u),this._renderYearText(a,p,d,u),this._renderMonthText(a,x,d,u),this._renderWeekText(a,x,p,d,u)},n.prototype._renderDayRect=function(a,s,l){for(var u=a.coordinateSystem,c=a.getModel("itemStyle").getItemStyle(),p=u.getCellWidth(),d=u.getCellHeight(),x=s.start.time;x<=s.end.time;x=u.getNextNDay(x,1).time){var _=u.dataToRect([x],!1).tl,S=new Rect$2({shape:{x:_[0],y:_[1],width:p,height:d},cursor:"default",style:c});l.add(S)}},n.prototype._renderLines=function(a,s,l,u){var c=this,p=a.coordinateSystem,d=a.getModel(["splitLine","lineStyle"]).getLineStyle(),x=a.get(["splitLine","show"]),_=d.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var S=s.start,T=0;S.time<=s.end.time;T++){R(S.formatedDate),T===0&&(S=p.getDateInfo(s.start.y+"-"+s.start.m));var A=S.date;A.setMonth(A.getMonth()+1),S=p.getDateInfo(A)}R(p.getNextNDay(s.end.time,1).formatedDate);function R(D){c._firstDayOfMonth.push(p.getDateInfo(D)),c._firstDayPoints.push(p.dataToRect([D],!1).tl);var O=c._getLinePointsOfOneWeek(a,D,l);c._tlpoints.push(O[0]),c._blpoints.push(O[O.length-1]),x&&c._drawSplitline(O,d,u)}x&&this._drawSplitline(c._getEdgesPoints(c._tlpoints,_,l),d,u),x&&this._drawSplitline(c._getEdgesPoints(c._blpoints,_,l),d,u)},n.prototype._getEdgesPoints=function(a,s,l){var u=[a[0].slice(),a[a.length-1].slice()],c=l==="horizontal"?0:1;return u[0][c]=u[0][c]-s/2,u[1][c]=u[1][c]+s/2,u},n.prototype._drawSplitline=function(a,s,l){var u=new Polyline$1({z2:20,shape:{points:a},style:s});l.add(u)},n.prototype._getLinePointsOfOneWeek=function(a,s,l){for(var u=a.coordinateSystem,c=u.getDateInfo(s),p=[],d=0;d<7;d++){var x=u.getNextNDay(c.time,d),_=u.dataToRect([x.time],!1);p[2*x.day]=_.tl,p[2*x.day+1]=_[l==="horizontal"?"bl":"tr"]}return p},n.prototype._formatterLabel=function(a,s){return isString$1(a)&&a?formatTplSimple(a,s):isFunction$1(a)?a(s):s.nameMap},n.prototype._yearTextPositionControl=function(a,s,l,u,c){var p=s[0],d=s[1],x=["center","bottom"];u==="bottom"?(d+=c,x=["center","top"]):u==="left"?p-=c:u==="right"?(p+=c,x=["center","top"]):d-=c;var _=0;return(u==="left"||u==="right")&&(_=Math.PI/2),{rotation:_,x:p,y:d,style:{align:x[0],verticalAlign:x[1]}}},n.prototype._renderYearText=function(a,s,l,u){var c=a.getModel("yearLabel");if(c.get("show")){var p=c.get("margin"),d=c.get("position");d||(d=l!=="horizontal"?"top":"left");var x=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],_=(x[0][0]+x[1][0])/2,S=(x[0][1]+x[1][1])/2,T=l==="horizontal"?0:1,A={top:[_,x[T][1]],bottom:[_,x[1-T][1]],left:[x[1-T][0],S],right:[x[T][0],S]},R=s.start.y;+s.end.y>+s.start.y&&(R=R+"-"+s.end.y);var D=c.get("formatter"),O={start:s.start.y,end:s.end.y,nameMap:R},F=this._formatterLabel(D,O),z=new ZRText({z2:30,style:createTextStyle$1(c,{text:F}),silent:c.get("silent")});z.attr(this._yearTextPositionControl(z,A[d],l,d,p)),u.add(z)}},n.prototype._monthTextPositionControl=function(a,s,l,u,c){var p="left",d="top",x=a[0],_=a[1];return l==="horizontal"?(_=_+c,s&&(p="center"),u==="start"&&(d="bottom")):(x=x+c,s&&(d="middle"),u==="start"&&(p="right")),{x,y:_,align:p,verticalAlign:d}},n.prototype._renderMonthText=function(a,s,l,u){var c=a.getModel("monthLabel");if(c.get("show")){var p=c.get("nameMap"),d=c.get("margin"),x=c.get("position"),_=c.get("align"),S=[this._tlpoints,this._blpoints];(!p||isString$1(p))&&(p&&(s=getLocaleModel(p)||s),p=s.get(["time","monthAbbr"])||[]);var T=x==="start"?0:1,A=l==="horizontal"?0:1;d=x==="start"?-d:d;for(var R=_==="center",D=c.get("silent"),O=0;O<S[T].length-1;O++){var F=S[T][O].slice(),z=this._firstDayOfMonth[O];if(R){var j=this._firstDayPoints[O];F[A]=(j[A]+S[0][O+1][A])/2}var Z=c.get("formatter"),W=p[+z.m-1],J={yyyy:z.y,yy:(z.y+"").slice(2),MM:z.m,M:+z.m,nameMap:W},en=this._formatterLabel(Z,J),tn=new ZRText({z2:30,style:extend(createTextStyle$1(c,{text:en}),this._monthTextPositionControl(F,R,l,x,d)),silent:D});u.add(tn)}}},n.prototype._weekTextPositionControl=function(a,s,l,u,c){var p="center",d="middle",x=a[0],_=a[1],S=l==="start";return s==="horizontal"?(x=x+u+(S?1:-1)*c[0]/2,p=S?"right":"left"):(_=_+u+(S?1:-1)*c[1]/2,d=S?"bottom":"top"),{x,y:_,align:p,verticalAlign:d}},n.prototype._renderWeekText=function(a,s,l,u,c){var p=a.getModel("dayLabel");if(p.get("show")){var d=a.coordinateSystem,x=p.get("position"),_=p.get("nameMap"),S=p.get("margin"),T=d.getFirstDayOfWeek();if(!_||isString$1(_)){_&&(s=getLocaleModel(_)||s);var A=s.get(["time","dayOfWeekShort"]);_=A||map$1(s.get(["time","dayOfWeekAbbr"]),function(J){return J[0]})}var R=d.getNextNDay(l.end.time,7-l.lweek).time,D=[d.getCellWidth(),d.getCellHeight()];S=parsePercent(S,Math.min(D[1],D[0])),x==="start"&&(R=d.getNextNDay(l.start.time,-(7+l.fweek)).time,S=-S);for(var O=p.get("silent"),F=0;F<7;F++){var z=d.getNextNDay(R,F),j=d.dataToRect([z.time],!1).center,Z=F;Z=Math.abs((F+T)%7);var W=new ZRText({z2:30,style:extend(createTextStyle$1(p,{text:_[Z]}),this._weekTextPositionControl(j,u,x,S,D)),silent:O});c.add(W)}}},n.type="calendar",n}(ComponentView),PROXIMATE_ONE_DAY=864e5,Calendar=function(){function t(n,a,s){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=n}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(n){n=parseDate(n);var a=n.getFullYear(),s=n.getMonth()+1,l=s<10?"0"+s:""+s,u=n.getDate(),c=u<10?"0"+u:""+u,p=n.getDay();return p=Math.abs((p+7-this.getFirstDayOfWeek())%7),{y:a+"",m:l,d:c,day:p,time:n.getTime(),formatedDate:a+"-"+l+"-"+c,date:n}},t.prototype.getNextNDay=function(n,a){return a=a||0,a===0?this.getDateInfo(n):(n=new Date(this.getDateInfo(n).time),n.setDate(n.getDate()+a),this.getDateInfo(n))},t.prototype.update=function(n,a){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var s=this._rangeInfo.weeks||1,l=["width","height"],u=this._model.getCellSize().slice(),c=this._model.getBoxLayoutParams(),p=this._orient==="horizontal"?[s,7]:[7,s];each$f([0,1],function(S){_(u,S)&&(c[l[S]]=u[S]*p[S])});var d={width:a.getWidth(),height:a.getHeight()},x=this._rect=getLayoutRect(c,d);each$f([0,1],function(S){_(u,S)||(u[S]=x[l[S]]/p[S])});function _(S,T){return S[T]!=null&&S[T]!=="auto"}this._sw=u[0],this._sh=u[1]},t.prototype.dataToPoint=function(n,a){isArray$1(n)&&(n=n[0]),a==null&&(a=!0);var s=this.getDateInfo(n),l=this._rangeInfo,u=s.formatedDate;if(a&&!(s.time>=l.start.time&&s.time<l.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var c=s.day,p=this._getRangeInfo([l.start.time,u]).nthWeek;return this._orient==="vertical"?[this._rect.x+c*this._sw+this._sw/2,this._rect.y+p*this._sh+this._sh/2]:[this._rect.x+p*this._sw+this._sw/2,this._rect.y+c*this._sh+this._sh/2]},t.prototype.pointToData=function(n){var a=this.pointToDate(n);return a&&a.time},t.prototype.dataToRect=function(n,a){var s=this.dataToPoint(n,a);return{contentShape:{x:s[0]-(this._sw-this._lineWidth)/2,y:s[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:s,tl:[s[0]-this._sw/2,s[1]-this._sh/2],tr:[s[0]+this._sw/2,s[1]-this._sh/2],br:[s[0]+this._sw/2,s[1]+this._sh/2],bl:[s[0]-this._sw/2,s[1]+this._sh/2]}},t.prototype.pointToDate=function(n){var a=Math.floor((n[0]-this._rect.x)/this._sw)+1,s=Math.floor((n[1]-this._rect.y)/this._sh)+1,l=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(s,a-1,l):this._getDateByWeeksAndDay(a,s-1,l)},t.prototype.convertToPixel=function(n,a,s){var l=getCoordSys(a);return l===this?l.dataToPoint(s):null},t.prototype.convertFromPixel=function(n,a,s){var l=getCoordSys(a);return l===this?l.pointToData(s):null},t.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var n=this._model.get("range"),a;if(isArray$1(n)&&n.length===1&&(n=n[0]),isArray$1(n))a=n;else{var s=n.toString();if(/^\d{4}$/.test(s)&&(a=[s+"-01-01",s+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(s)){var l=this.getDateInfo(s),u=l.date;u.setMonth(u.getMonth()+1);var c=this.getNextNDay(u,-1);a=[l.formatedDate,c.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(s)&&(a=[s,s])}if(!a)return n;var p=this._getRangeInfo(a);return p.start.time>p.end.time&&a.reverse(),a},t.prototype._getRangeInfo=function(n){var a=[this.getDateInfo(n[0]),this.getDateInfo(n[1])],s;a[0].time>a[1].time&&(s=!0,a.reverse());var l=Math.floor(a[1].time/PROXIMATE_ONE_DAY)-Math.floor(a[0].time/PROXIMATE_ONE_DAY)+1,u=new Date(a[0].time),c=u.getDate(),p=a[1].date.getDate();u.setDate(c+l-1);var d=u.getDate();if(d!==p)for(var x=u.getTime()-a[1].time>0?1:-1;(d=u.getDate())!==p&&(u.getTime()-a[1].time)*x>0;)l-=x,u.setDate(d-x);var _=Math.floor((l+a[0].day+6)/7),S=s?-_+1:_-1;return s&&a.reverse(),{range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:l,weeks:_,nthWeek:S,fweek:a[0].day,lweek:a[1].day}},t.prototype._getDateByWeeksAndDay=function(n,a,s){var l=this._getRangeInfo(s);if(n>l.weeks||n===0&&a<l.fweek||n===l.weeks&&a>l.lweek)return null;var u=(n-1)*7-l.fweek+a,c=new Date(l.start.time);return c.setDate(+l.start.d+u),this.getDateInfo(c)},t.create=function(n,a){var s=[];return n.eachComponent("calendar",function(l){var u=new t(l);s.push(u),l.coordinateSystem=u}),n.eachSeries(function(l){l.get("coordinateSystem")==="calendar"&&(l.coordinateSystem=s[l.get("calendarIndex")||0])}),s},t.dimensions=["time","value"],t}();function getCoordSys(t){var n=t.calendarModel,a=t.seriesModel,s=n?n.coordinateSystem:a?a.coordinateSystem:null;return s}function install$m(t){t.registerComponentModel(CalendarModel),t.registerComponentView(CalendarView),t.registerCoordinateSystem("calendar",Calendar)}function setKeyInfoToNewElOption(t,n){var a=t.existing;if(n.id=t.keyInfo.id,!n.type&&a&&(n.type=a.type),n.parentId==null){var s=n.parentOption;s?n.parentId=s.id:a&&(n.parentId=a.parentId)}n.parentOption=null}function isSetLoc(t,n){var a;return each$f(n,function(s){t[s]!=null&&t[s]!=="auto"&&(a=!0)}),a}function mergeNewElOptionToExist(t,n,a){var s=extend({},a),l=t[n],u=a.$action||"merge";u==="merge"?l?(merge(l,s,!0),mergeLayoutParam(l,s,{ignoreSize:!0}),copyLayoutParams(a,l),copyTransitionInfo(a,l),copyTransitionInfo(a,l,"shape"),copyTransitionInfo(a,l,"style"),copyTransitionInfo(a,l,"extra"),a.clipPath=l.clipPath):t[n]=s:u==="replace"?t[n]=s:u==="remove"&&l&&(t[n]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(t,n,a){if(a&&(!t[a]&&n[a]&&(t[a]={}),t=t[a],n=n[a]),!(!t||!n))for(var s=a?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,l=0;l<s.length;l++){var u=s[l];t[u]==null&&n[u]!=null&&(t[u]=n[u])}}function setLayoutInfoToExist(t,n){if(t&&(t.hv=n.hv=[isSetLoc(n,["left","right"]),isSetLoc(n,["top","bottom"])],t.type==="group")){var a=t,s=n;a.width==null&&(a.width=s.width=0),a.height==null&&(a.height=s.height=0)}}var GraphicComponentModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.preventAutoZ=!0,a}return n.prototype.mergeOption=function(a,s){var l=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,a,s),this.option.elements=l},n.prototype.optionUpdated=function(a,s){var l=this.option,u=(s?l:a).elements,c=l.elements=s?[]:l.elements,p=[];this._flatten(u,p,null);var d=mappingToExists(c,p,"normalMerge"),x=this._elOptionsToUpdate=[];each$f(d,function(_,S){var T=_.newOption;T&&(x.push(T),setKeyInfoToNewElOption(_,T),mergeNewElOptionToExist(c,S,T),setLayoutInfoToExist(c[S],T))},this),l.elements=filter(c,function(_){return _&&delete _.$action,_!=null})},n.prototype._flatten=function(a,s,l){each$f(a,function(u){if(u){l&&(u.parentOption=l),s.push(u);var c=u.children;c&&c.length&&this._flatten(c,s,u),delete u.children}},this)},n.prototype.useElOptionsToUpdate=function(){var a=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,a},n.type="graphic",n.defaultOption={elements:[]},n}(ComponentModel),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$3,image:ZRImage,text:ZRText},inner$7=makeInner(),GraphicComponentView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){this._elMap=createHashMap()},n.prototype.render=function(a,s,l){a!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=a,this._updateElements(a),this._relocate(a,l)},n.prototype._updateElements=function(a){var s=a.useElOptionsToUpdate();if(s){var l=this._elMap,u=this.group,c=a.get("z"),p=a.get("zlevel");each$f(s,function(d){var x=convertOptionIdName(d.id,null),_=x!=null?l.get(x):null,S=convertOptionIdName(d.parentId,null),T=S!=null?l.get(S):u,A=d.type,R=d.style;A==="text"&&R&&d.hv&&d.hv[1]&&(R.textVerticalAlign=R.textBaseline=R.verticalAlign=R.align=null);var D=d.textContent,O=d.textConfig;if(R&&isEC4CompatibleStyle(R,A,!!O,!!D)){var F=convertFromEC4CompatibleStyle(R,A,!0);!O&&F.textConfig&&(O=d.textConfig=F.textConfig),!D&&F.textContent&&(D=F.textContent)}var z=getCleanedElOption(d),j=d.$action||"merge",Z=j==="merge",W=j==="replace";if(Z){var J=!_,en=_;J?en=createEl(x,T,d.type,l):(en&&(inner$7(en).isNew=!1),stopPreviousKeyframeAnimationAndRestore(en)),en&&(applyUpdateTransition(en,z,a,{isInit:J}),updateCommonAttrs(en,d,c,p))}else if(W){removeEl$1(_,d,l,a);var tn=createEl(x,T,d.type,l);tn&&(applyUpdateTransition(tn,z,a,{isInit:!0}),updateCommonAttrs(tn,d,c,p))}else j==="remove"&&(updateLeaveTo(_,d),removeEl$1(_,d,l,a));var Ct=l.get(x);if(Ct&&D)if(Z){var Q=Ct.getTextContent();Q?Q.attr(D):Ct.setTextContent(new ZRText(D))}else W&&Ct.setTextContent(new ZRText(D));if(Ct){var on=d.clipPath;if(on){var gn=on.type,In=void 0,J=!1;if(Z){var dn=Ct.getClipPath();J=!dn||inner$7(dn).type!==gn,In=J?newEl(gn):dn}else W&&(J=!0,In=newEl(gn));Ct.setClipPath(In),applyUpdateTransition(In,on,a,{isInit:J}),applyKeyframeAnimation(In,on.keyframeAnimation,a)}var ix=inner$7(Ct);Ct.setTextConfig(O),ix.option=d,setEventData(Ct,a,d),setTooltipConfig({el:Ct,componentModel:a,itemName:Ct.name,itemTooltipOption:d.tooltip}),applyKeyframeAnimation(Ct,d.keyframeAnimation,a)}})}},n.prototype._relocate=function(a,s){for(var l=a.option.elements,u=this.group,c=this._elMap,p=s.getWidth(),d=s.getHeight(),x=["x","y"],_=0;_<l.length;_++){var S=l[_],T=convertOptionIdName(S.id,null),A=T!=null?c.get(T):null;if(!(!A||!A.isGroup)){var R=A.parent,D=R===u,O=inner$7(A),F=inner$7(R);O.width=parsePercent(O.option.width,D?p:F.width)||0,O.height=parsePercent(O.option.height,D?d:F.height)||0}}for(var _=l.length-1;_>=0;_--){var S=l[_],T=convertOptionIdName(S.id,null),A=T!=null?c.get(T):null;if(A){var R=A.parent,F=inner$7(R),z=R===u?{width:p,height:d}:{width:F.width,height:F.height},j={},Z=positionElement(A,S,z,null,{hv:S.hv,boundingMode:S.bounding},j);if(!inner$7(A).isNew&&Z){for(var W=S.transition,J={},en=0;en<x.length;en++){var tn=x[en],Ct=j[tn];W&&(isTransitionAll(W)||indexOf(W,tn)>=0)?J[tn]=Ct:A[tn]=Ct}updateProps$1(A,J,a,0)}else A.attr(j)}}},n.prototype._clear=function(){var a=this,s=this._elMap;s.each(function(l){removeEl$1(l,inner$7(l).option,s,a._lastGraphicModel)}),this._elMap=createHashMap()},n.prototype.dispose=function(){this._clear()},n.type="graphic",n}(ComponentView);function newEl(t){var n=hasOwn(nonShapeGraphicElements,t)?nonShapeGraphicElements[t]:getShapeClass(t),a=new n({});return inner$7(a).type=t,a}function createEl(t,n,a,s){var l=newEl(a);return n.add(l),s.set(t,l),inner$7(l).id=t,inner$7(l).isNew=!0,l}function removeEl$1(t,n,a,s){var l=t&&t.parent;l&&(t.type==="group"&&t.traverse(function(u){removeEl$1(u,n,a,s)}),applyLeaveTransition(t,n,s),a.removeKey(inner$7(t).id))}function updateCommonAttrs(t,n,a,s){t.isGroup||each$f([["cursor",Displayable.prototype.cursor],["zlevel",s||0],["z",a||0],["z2",0]],function(l){var u=l[0];hasOwn(n,u)?t[u]=retrieve2(n[u],l[1]):t[u]==null&&(t[u]=l[1])}),each$f(keys(n),function(l){if(l.indexOf("on")===0){var u=n[l];t[l]=isFunction$1(u)?u:null}}),hasOwn(n,"draggable")&&(t.draggable=n.draggable),n.name!=null&&(t.name=n.name),n.id!=null&&(t.id=n.id)}function getCleanedElOption(t){return t=extend({},t),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(n){delete t[n]}),t}function setEventData(t,n,a){var s=getECData(t).eventData;!t.silent&&!t.ignore&&!s&&(s=getECData(t).eventData={componentType:"graphic",componentIndex:n.componentIndex,name:t.name}),s&&(s.info=a.info)}function install$l(t){t.registerComponentModel(GraphicComponentModel),t.registerComponentView(GraphicComponentView),t.registerPreprocessor(function(n){var a=n.graphic;isArray$1(a)?!a[0]||!a[0].elements?n.graphic=[{elements:a}]:n.graphic=[n.graphic[0]]:a&&!a.elements&&(n.graphic=[{elements:[a]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(t){var n=t.get("coordinateSystem");return indexOf(SERIES_COORDS,n)>=0}function getAxisMainType(t){return t+"Axis"}function findEffectedDataZooms(t,n){var a=createHashMap(),s=[],l=createHashMap();t.eachComponent({mainType:"dataZoom",query:n},function(_){l.get(_.uid)||p(_)});var u;do u=!1,t.eachComponent("dataZoom",c);while(u);function c(_){!l.get(_.uid)&&d(_)&&(p(_),u=!0)}function p(_){l.set(_.uid,!0),s.push(_),x(_)}function d(_){var S=!1;return _.eachTargetAxis(function(T,A){var R=a.get(T);R&&R[A]&&(S=!0)}),S}function x(_){_.eachTargetAxis(function(S,T){(a.get(S)||a.set(S,[]))[T]=!0})}return s}function collectReferCoordSysModelInfo(t){var n=t.ecModel,a={infoList:[],infoMap:createHashMap()};return t.eachTargetAxis(function(s,l){var u=n.getComponent(getAxisMainType(s),l);if(u){var c=u.getCoordSysModel();if(c){var p=c.uid,d=a.infoMap.get(p);d||(d={model:c,axisModels:[]},a.infoList.push(d),a.infoMap.set(p,d)),d.axisModels.push(u)}}}),a}var DataZoomAxisInfo=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(n){this.indexMap[n]||(this.indexList.push(n),this.indexMap[n]=!0)},t}(),DataZoomModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._autoThrottle=!0,a._noTarget=!0,a._rangePropMode=["percent","percent"],a}return n.prototype.init=function(a,s,l){var u=retrieveRawOption(a);this.settledOption=u,this.mergeDefaultAndTheme(a,l),this._doInit(u)},n.prototype.mergeOption=function(a){var s=retrieveRawOption(a);merge(this.option,a,!0),merge(this.settledOption,s,!0),this._doInit(s)},n.prototype._doInit=function(a){var s=this.option;this._setDefaultThrottle(a),this._updateRangeUse(a);var l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u,c){this._rangePropMode[c]==="value"&&(s[u[0]]=l[u[0]]=null)},this),this._resetTarget()},n.prototype._resetTarget=function(){var a=this.get("orient",!0),s=this._targetAxisInfoMap=createHashMap(),l=this._fillSpecifiedTargetAxis(s);l?this._orient=a||this._makeAutoOrientByTargetAxis():(this._orient=a||"horizontal",this._fillAutoTargetAxisByOrient(s,this._orient)),this._noTarget=!0,s.each(function(u){u.indexList.length&&(this._noTarget=!1)},this)},n.prototype._fillSpecifiedTargetAxis=function(a){var s=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(l){var u=this.getReferringComponents(getAxisMainType(l),MULTIPLE_REFERRING);if(u.specified){s=!0;var c=new DataZoomAxisInfo;each$f(u.models,function(p){c.add(p.componentIndex)}),a.set(l,c)}},this),s},n.prototype._fillAutoTargetAxisByOrient=function(a,s){var l=this.ecModel,u=!0;if(u){var c=s==="vertical"?"y":"x",p=l.findComponents({mainType:c+"Axis"});d(p,c)}if(u){var p=l.findComponents({mainType:"singleAxis",filter:function(_){return _.get("orient",!0)===s}});d(p,"single")}function d(x,_){var S=x[0];if(S){var T=new DataZoomAxisInfo;if(T.add(S.componentIndex),a.set(_,T),u=!1,_==="x"||_==="y"){var A=S.getReferringComponents("grid",SINGLE_REFERRING).models[0];A&&each$f(x,function(R){S.componentIndex!==R.componentIndex&&A===R.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&T.add(R.componentIndex)})}}}u&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(x){if(u){var _=l.findComponents({mainType:getAxisMainType(x),filter:function(T){return T.get("type",!0)==="category"}});if(_[0]){var S=new DataZoomAxisInfo;S.add(_[0].componentIndex),a.set(x,S),u=!1}}},this)},n.prototype._makeAutoOrientByTargetAxis=function(){var a;return this.eachTargetAxis(function(s){!a&&(a=s)},this),a==="y"?"vertical":"horizontal"},n.prototype._setDefaultThrottle=function(a){if(a.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var s=this.ecModel.option;this.option.throttle=s.animation&&s.animationDurationUpdate>0?100:20}},n.prototype._updateRangeUse=function(a){var s=this._rangePropMode,l=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(u,c){var p=a[u[0]]!=null,d=a[u[1]]!=null;p&&!d?s[c]="percent":!p&&d?s[c]="value":l?s[c]=l[c]:p&&(s[c]="percent")})},n.prototype.noTarget=function(){return this._noTarget},n.prototype.getFirstTargetAxisModel=function(){var a;return this.eachTargetAxis(function(s,l){a==null&&(a=this.ecModel.getComponent(getAxisMainType(s),l))},this),a},n.prototype.eachTargetAxis=function(a,s){this._targetAxisInfoMap.each(function(l,u){each$f(l.indexList,function(c){a.call(s,u,c)})})},n.prototype.getAxisProxy=function(a,s){var l=this.getAxisModel(a,s);if(l)return l.__dzAxisProxy},n.prototype.getAxisModel=function(a,s){var l=this._targetAxisInfoMap.get(a);if(l&&l.indexMap[s])return this.ecModel.getComponent(getAxisMainType(a),s)},n.prototype.setRawRange=function(a){var s=this.option,l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u){(a[u[0]]!=null||a[u[1]]!=null)&&(s[u[0]]=l[u[0]]=a[u[0]],s[u[1]]=l[u[1]]=a[u[1]])},this),this._updateRangeUse(a)},n.prototype.setCalculatedRange=function(a){var s=this.option;each$f(["start","startValue","end","endValue"],function(l){s[l]=a[l]})},n.prototype.getPercentRange=function(){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataPercentWindow()},n.prototype.getValueRange=function(a,s){if(a==null&&s==null){var l=this.findRepresentativeAxisProxy();if(l)return l.getDataValueWindow()}else return this.getAxisProxy(a,s).getDataValueWindow()},n.prototype.findRepresentativeAxisProxy=function(a){if(a)return a.__dzAxisProxy;for(var s,l=this._targetAxisInfoMap.keys(),u=0;u<l.length;u++)for(var c=l[u],p=this._targetAxisInfoMap.get(c),d=0;d<p.indexList.length;d++){var x=this.getAxisProxy(c,p.indexList[d]);if(x.hostedBy(this))return x;s||(s=x)}return s},n.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},n.prototype.getOrient=function(){return this._orient},n.type="dataZoom",n.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],n.defaultOption={z:4,filterMode:"filter",start:0,end:100},n}(ComponentModel);function retrieveRawOption(t){var n={};return each$f(["start","end","startValue","endValue","throttle"],function(a){t.hasOwnProperty(a)&&(n[a]=t[a])}),n}var SelectDataZoomModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.select",n}(DataZoomModel),DataZoomView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l,u){this.dataZoomModel=a,this.ecModel=s,this.api=l},n.type="dataZoom",n}(ComponentView),SelectDataZoomView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.select",n}(DataZoomView),each$7=each$f,asc$1=asc$2,AxisProxy=function(){function t(n,a,s,l){this._dimName=n,this._axisIndex=a,this.ecModel=l,this._dataZoomModel=s}return t.prototype.hostedBy=function(n){return this._dataZoomModel===n},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var n=[];return this.ecModel.eachSeries(function(a){if(isCoordSupported(a)){var s=getAxisMainType(this._dimName),l=a.getReferringComponents(s,SINGLE_REFERRING).models[0];l&&this._axisIndex===l.componentIndex&&n.push(a)}},this),n},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},t.prototype.calculateDataWindow=function(n){var a=this._dataExtent,s=this.getAxisModel(),l=s.axis.scale,u=this._dataZoomModel.getRangePropMode(),c=[0,100],p=[],d=[],x;each$7(["start","end"],function(T,A){var R=n[T],D=n[T+"Value"];u[A]==="percent"?(R==null&&(R=c[A]),D=l.parse(linearMap$2(R,c,a))):(x=!0,D=D==null?a[A]:l.parse(D),R=linearMap$2(D,a,c)),d[A]=D==null||isNaN(D)?a[A]:D,p[A]=R==null||isNaN(R)?c[A]:R}),asc$1(d),asc$1(p);var _=this._minMaxSpan;x?S(d,p,a,c,!1):S(p,d,c,a,!0);function S(T,A,R,D,O){var F=O?"Span":"ValueSpan";sliderMove(0,T,R,"all",_["min"+F],_["max"+F]);for(var z=0;z<2;z++)A[z]=linearMap$2(T[z],R,D,!0),O&&(A[z]=l.parse(A[z]))}return{valueWindow:d,percentWindow:p}},t.prototype.reset=function(n){if(n===this._dataZoomModel){var a=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,a),this._updateMinMaxSpan();var s=this.calculateDataWindow(n.settledOption);this._valueWindow=s.valueWindow,this._percentWindow=s.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(n,a){if(n!==this._dataZoomModel)return;var s=this._dimName,l=this.getTargetSeriesModels(),u=n.get("filterMode"),c=this._valueWindow;if(u==="none")return;each$7(l,function(d){var x=d.getData(),_=x.mapDimensionsAll(s);if(_.length){if(u==="weakFilter"){var S=x.getStore(),T=map$1(_,function(A){return x.getDimensionIndex(A)},x);x.filterSelf(function(A){for(var R,D,O,F=0;F<_.length;F++){var z=S.get(T[F],A),j=!isNaN(z),Z=z<c[0],W=z>c[1];if(j&&!Z&&!W)return!0;j&&(O=!0),Z&&(R=!0),W&&(D=!0)}return O&&R&&D})}else each$7(_,function(A){if(u==="empty")d.setData(x=x.map(A,function(D){return p(D)?D:NaN}));else{var R={};R[A]=c,x.selectRange(R)}});each$7(_,function(A){x.setApproximateExtent(c,A)})}});function p(d){return d>=c[0]&&d<=c[1]}},t.prototype._updateMinMaxSpan=function(){var n=this._minMaxSpan={},a=this._dataZoomModel,s=this._dataExtent;each$7(["min","max"],function(l){var u=a.get(l+"Span"),c=a.get(l+"ValueSpan");c!=null&&(c=this.getAxisModel().axis.scale.parse(c)),c!=null?u=linearMap$2(s[0]+c,s,[0,100],!0):u!=null&&(c=linearMap$2(u,[0,100],s,!0)-s[0]),n[l+"Span"]=u,n[l+"ValueSpan"]=c},this)},t.prototype._setAxisModel=function(){var n=this.getAxisModel(),a=this._percentWindow,s=this._valueWindow;if(a){var l=getPixelPrecision(s,[0,500]);l=Math.min(l,20);var u=n.axis.scale.rawExtentInfo;a[0]!==0&&u.setDeterminedMinMax("min",+s[0].toFixed(l)),a[1]!==100&&u.setDeterminedMinMax("max",+s[1].toFixed(l)),u.freeze()}},t}();function calculateDataExtent(t,n,a){var s=[1/0,-1/0];each$7(a,function(c){unionAxisExtentFromData(s,c.getData(),n)});var l=t.getAxisModel(),u=ensureScaleRawExtentInfo(l.axis.scale,l,s).calculate();return[u.min,u.max]}var dataZoomProcessor={getTargetSeries:function(t){function n(l){t.eachComponent("dataZoom",function(u){u.eachTargetAxis(function(c,p){var d=t.getComponent(getAxisMainType(c),p);l(c,p,d,u)})})}n(function(l,u,c,p){c.__dzAxisProxy=null});var a=[];n(function(l,u,c,p){c.__dzAxisProxy||(c.__dzAxisProxy=new AxisProxy(l,u,p,t),a.push(c.__dzAxisProxy))});var s=createHashMap();return each$f(a,function(l){each$f(l.getTargetSeriesModels(),function(u){s.set(u.uid,u)})}),s},overallReset:function(t,n){t.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(s,l){a.getAxisProxy(s,l).reset(a)}),a.eachTargetAxis(function(s,l){a.getAxisProxy(s,l).filterData(a,n)})}),t.eachComponent("dataZoom",function(a){var s=a.findRepresentativeAxisProxy();if(s){var l=s.getDataPercentWindow(),u=s.getDataValueWindow();a.setCalculatedRange({start:l[0],end:l[1],startValue:u[0],endValue:u[1]})}})}};function installDataZoomAction(t){t.registerAction("dataZoom",function(n,a){var s=findEffectedDataZooms(a,n);each$f(s,function(l){l.setRawRange({start:n.start,end:n.end,startValue:n.startValue,endValue:n.endValue})})})}var installed$1=!1;function installCommon$1(t){installed$1||(installed$1=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor),installDataZoomAction(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$k(t){t.registerComponentModel(SelectDataZoomModel),t.registerComponentView(SelectDataZoomView),installCommon$1(t)}var ToolboxFeature=function(){function t(){}return t}(),features={};function registerFeature(t,n){features[t]=n}function getFeature(t){return features[t]}var ToolboxModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var a=this.ecModel;each$f(this.option.feature,function(s,l){var u=getFeature(l);u&&(u.getDefaultOption&&(u.defaultOption=u.getDefaultOption(a)),merge(s,u.defaultOption))})},n.type="toolbox",n.layoutMode={type:"box",ignoreSize:!0},n.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},n}(ComponentModel);function layout(t,n,a){var s=n.getBoxLayoutParams(),l=n.get("padding"),u={width:a.getWidth(),height:a.getHeight()},c=getLayoutRect(s,u,l);box(n.get("orient"),t,n.get("itemGap"),c.width,c.height),positionElement(t,s,u,l)}function makeBackground(t,n){var a=normalizeCssArray(n.get("padding")),s=n.getItemStyle(["color","opacity"]);return s.fill=n.get("backgroundColor"),t=new Rect$2({shape:{x:t.x-a[3],y:t.y-a[0],width:t.width+a[1]+a[3],height:t.height+a[0]+a[2],r:n.get("borderRadius")},style:s,silent:!0,z2:-1}),t}var ToolboxView=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(a,s,l,u){var c=this.group;if(c.removeAll(),!a.get("show"))return;var p=+a.get("itemSize"),d=a.get("orient")==="vertical",x=a.get("feature")||{},_=this._features||(this._features={}),S=[];each$f(x,function(R,D){S.push(D)}),new DataDiffer(this._featureNames||[],S).add(T).update(T).remove(curry$1(T,null)).execute(),this._featureNames=S;function T(R,D){var O=S[R],F=S[D],z=x[O],j=new Model(z,a,a.ecModel),Z;if(u&&u.newTitle!=null&&u.featureName===O&&(z.title=u.newTitle),O&&!F){if(isUserFeatureName(O))Z={onclick:j.option.onclick,featureName:O};else{var W=getFeature(O);if(!W)return;Z=new W}_[O]=Z}else if(Z=_[F],!Z)return;Z.uid=getUID("toolbox-feature"),Z.model=j,Z.ecModel=s,Z.api=l;var J=Z instanceof ToolboxFeature;if(!O&&F){J&&Z.dispose&&Z.dispose(s,l);return}if(!j.get("show")||J&&Z.unusable){J&&Z.remove&&Z.remove(s,l);return}A(j,Z,O),j.setIconStatus=function(en,tn){var Ct=this.option,Q=this.iconPaths;Ct.iconStatus=Ct.iconStatus||{},Ct.iconStatus[en]=tn,Q[en]&&(tn==="emphasis"?enterEmphasis:leaveEmphasis)(Q[en])},Z instanceof ToolboxFeature&&Z.render&&Z.render(j,s,l,u)}function A(R,D,O){var F=R.getModel("iconStyle"),z=R.getModel(["emphasis","iconStyle"]),j=D instanceof ToolboxFeature&&D.getIcons?D.getIcons():R.get("icon"),Z=R.get("title")||{},W,J;isString$1(j)?(W={},W[O]=j):W=j,isString$1(Z)?(J={},J[O]=Z):J=Z;var en=R.iconPaths={};each$f(W,function(tn,Ct){var Q=createIcon(tn,{},{x:-p/2,y:-p/2,width:p,height:p});Q.setStyle(F.getItemStyle());var on=Q.ensureState("emphasis");on.style=z.getItemStyle();var gn=new ZRText({style:{text:J[Ct],align:z.get("textAlign"),borderRadius:z.get("textBorderRadius"),padding:z.get("textPadding"),fill:null,font:getFont({fontStyle:z.get("textFontStyle"),fontFamily:z.get("textFontFamily"),fontSize:z.get("textFontSize"),fontWeight:z.get("textFontWeight")},s)},ignore:!0});Q.setTextContent(gn),setTooltipConfig({el:Q,componentModel:a,itemName:Ct,formatterParamsExtra:{title:J[Ct]}}),Q.__title=J[Ct],Q.on("mouseover",function(){var In=z.getItemStyle(),dn=d?a.get("right")==null&&a.get("left")!=="right"?"right":"left":a.get("bottom")==null&&a.get("top")!=="bottom"?"bottom":"top";gn.setStyle({fill:z.get("textFill")||In.fill||In.stroke||"#000",backgroundColor:z.get("textBackgroundColor")}),Q.setTextConfig({position:z.get("textPosition")||dn}),gn.ignore=!a.get("showTitle"),l.enterEmphasis(this)}).on("mouseout",function(){R.get(["iconStatus",Ct])!=="emphasis"&&l.leaveEmphasis(this),gn.hide()}),(R.get(["iconStatus",Ct])==="emphasis"?enterEmphasis:leaveEmphasis)(Q),c.add(Q),Q.on("click",bind$1(D.onclick,D,s,l,Ct)),en[Ct]=Q})}layout(c,a,l),c.add(makeBackground(c.getBoundingRect(),a)),d||c.eachChild(function(R){var D=R.__title,O=R.ensureState("emphasis"),F=O.textConfig||(O.textConfig={}),z=R.getTextContent(),j=z&&z.ensureState("emphasis");if(j&&!isFunction$1(j)&&D){var Z=j.style||(j.style={}),W=getBoundingRect(D,ZRText.makeFont(Z)),J=R.x+c.x,en=R.y+c.y+p,tn=!1;en+W.height>l.getHeight()&&(F.position="top",tn=!0);var Ct=tn?-5-W.height:p+10;J+W.width/2>l.getWidth()?(F.position=["100%",Ct],Z.align="right"):J-W.width/2<0&&(F.position=[0,Ct],Z.align="left")}})},n.prototype.updateView=function(a,s,l,u){each$f(this._features,function(c){c instanceof ToolboxFeature&&c.updateView&&c.updateView(c.model,s,l,u)})},n.prototype.remove=function(a,s){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.remove&&l.remove(a,s)}),this.group.removeAll()},n.prototype.dispose=function(a,s){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.dispose&&l.dispose(a,s)})},n.type="toolbox",n}(ComponentView);function isUserFeatureName(t){return t.indexOf("my")===0}var SaveAsImage=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.onclick=function(a,s){var l=this.model,u=l.get("name")||a.get("title.0.text")||"echarts",c=s.getZr().painter.getType()==="svg",p=c?"svg":l.get("type",!0)||"png",d=s.getConnectedDataURL({type:p,backgroundColor:l.get("backgroundColor",!0)||a.get("backgroundColor")||"#fff",connectedBackgroundColor:l.get("connectedBackgroundColor"),excludeComponents:l.get("excludeComponents"),pixelRatio:l.get("pixelRatio")}),x=env.browser;if(typeof MouseEvent=="function"&&(x.newEdge||!x.ie&&!x.edge)){var _=document.createElement("a");_.download=u+"."+p,_.target="_blank",_.href=d;var S=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});_.dispatchEvent(S)}else if(window.navigator.msSaveOrOpenBlob||c){var T=d.split(","),A=T[0].indexOf("base64")>-1,R=c?decodeURIComponent(T[1]):T[1];A&&(R=window.atob(R));var D=u+"."+p;if(window.navigator.msSaveOrOpenBlob){for(var O=R.length,F=new Uint8Array(O);O--;)F[O]=R.charCodeAt(O);var z=new Blob([F]);window.navigator.msSaveOrOpenBlob(z,D)}else{var j=document.createElement("iframe");document.body.appendChild(j);var Z=j.contentWindow,W=Z.document;W.open("image/svg+xml","replace"),W.write(R),W.close(),Z.focus(),W.execCommand("SaveAs",!0,D),document.body.removeChild(j)}}else{var J=l.get("lang"),en='<body style="margin:0;"><img src="'+d+'" style="max-width:100%;" title="'+(J&&J[0]||"")+'" /></body>',tn=window.open();tn.document.write(en),tn.document.title=u}},n.getDefaultOption=function(a){var s={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:a.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:a.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return s},n}(ToolboxFeature),INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getIcons=function(){var a=this.model,s=a.get("icon"),l={};return each$f(a.get("type"),function(u){s[u]&&(l[u]=s[u])}),l},n.getDefaultOption=function(a){var s={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:a.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return s},n.prototype.onclick=function(a,s,l){var u=this.model,c=u.get(["seriesIndex",l]);if(seriesOptGenreator[l]){var p={series:[]},d=function(S){var T=S.subType,A=S.id,R=seriesOptGenreator[l](T,A,S,u);R&&(defaults(R,S.option),p.series.push(R));var D=S.coordinateSystem;if(D&&D.type==="cartesian2d"&&(l==="line"||l==="bar")){var O=D.getAxesByScale("ordinal")[0];if(O){var F=O.dim,z=F+"Axis",j=S.getReferringComponents(z,SINGLE_REFERRING).models[0],Z=j.componentIndex;p[z]=p[z]||[];for(var W=0;W<=Z;W++)p[z][Z]=p[z][Z]||{};p[z][Z].boundaryGap=l==="bar"}}};each$f(radioTypes,function(S){indexOf(S,l)>=0&&each$f(S,function(T){u.setIconStatus(T,"normal")})}),u.setIconStatus(l,"emphasis"),a.eachComponent({mainType:"series",query:c==null?null:{seriesIndex:c}},d);var x,_=l;l==="stack"&&(x=merge({stack:u.option.title.tiled,tiled:u.option.title.stack},u.option.title),u.get(["iconStatus",l])!=="emphasis"&&(_="tiled")),s.dispatchAction({type:"changeMagicType",currentType:_,newOption:p,newTitle:x,featureName:"magicType"})}},n}(ToolboxFeature),seriesOptGenreator={line:function(t,n,a,s){if(t==="bar")return merge({id:n,type:"line",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},s.get(["option","line"])||{},!0)},bar:function(t,n,a,s){if(t==="line")return merge({id:n,type:"bar",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},s.get(["option","bar"])||{},!0)},stack:function(t,n,a,s){var l=a.get("stack")===INNER_STACK_KEYWORD;if(t==="line"||t==="bar")return s.setIconStatus("stack",l?"normal":"emphasis"),merge({id:n,stack:l?"":INNER_STACK_KEYWORD},s.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,n){n.mergeOption(t.newOption)});var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(t){var n={},a=[],s=[];return t.eachRawSeries(function(l){var u=l.coordinateSystem;if(u&&(u.type==="cartesian2d"||u.type==="polar")){var c=u.getBaseAxis();if(c.type==="category"){var p=c.dim+"_"+c.index;n[p]||(n[p]={categoryAxis:c,valueAxis:u.getOtherAxis(c),series:[]},s.push({axisDim:c.dim,axisIndex:c.index})),n[p].series.push(l)}else a.push(l)}else a.push(l)}),{seriesGroupByCategoryAxis:n,other:a,meta:s}}function assembleSeriesWithCategoryAxis(t){var n=[];return each$f(t,function(a,s){var l=a.categoryAxis,u=a.valueAxis,c=u.dim,p=[" "].concat(map$1(a.series,function(A){return A.name})),d=[l.model.getCategories()];each$f(a.series,function(A){var R=A.getRawData();d.push(A.getRawData().mapArray(R.mapDimension(c),function(D){return D}))});for(var x=[p.join(ITEM_SPLITER)],_=0;_<d[0].length;_++){for(var S=[],T=0;T<d.length;T++)S.push(d[T][_]);x.push(S.join(ITEM_SPLITER))}n.push(x.join(`
`))}),n.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(t){return map$1(t,function(n){var a=n.getRawData(),s=[n.name],l=[];return a.each(a.dimensions,function(){for(var u=arguments.length,c=arguments[u-1],p=a.getName(c),d=0;d<u-1;d++)l[d]=arguments[d];s.push((p?p+ITEM_SPLITER:"")+l.join(ITEM_SPLITER))}),s.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(t){var n=groupSeries(t);return{value:filter([assembleSeriesWithCategoryAxis(n.seriesGroupByCategoryAxis),assembleOtherSeries(n.other)],function(a){return!!a.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:n.meta}}function trim(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(t){var n=t.slice(0,t.indexOf(`
`));if(n.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(t){for(var n=t.split(/\n+/g),a=trim(n.shift()).split(itemSplitRegex),s=[],l=map$1(a,function(d){return{name:d,data:[]}}),u=0;u<n.length;u++){var c=trim(n[u]).split(itemSplitRegex);s.push(c.shift());for(var p=0;p<c.length;p++)l[p]&&(l[p].data[u]=c[p])}return{series:l,categories:s}}function parseListContents(t){for(var n=t.split(/\n+/g),a=trim(n.shift()),s=[],l=0;l<n.length;l++){var u=trim(n[l]);if(u){var c=u.split(itemSplitRegex),p="",d=void 0,x=!1;isNaN(c[0])?(x=!0,p=c[0],c=c.slice(1),s[l]={name:p,value:[]},d=s[l].value):d=s[l]=[];for(var _=0;_<c.length;_++)d.push(+c[_]);d.length===1&&(x?s[l].value=d[0]:s[l]=d[0])}}return{name:a,data:s}}function parseContents(t,n){var a=t.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),s={series:[]};return each$f(a,function(l,u){if(isTSVFormat(l)){var c=parseTSVContents(l),p=n[u],d=p.axisDim+"Axis";p&&(s[d]=s[d]||[],s[d][p.axisIndex]={data:c.categories},s.series=s.series.concat(c.series))}else{var c=parseListContents(l);s.series.push(c)}}),s}var DataView$1=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.onclick=function(a,s){setTimeout(function(){s.dispatchAction({type:"hideTip"})});var l=s.getDom(),u=this.model;this._dom&&l.removeChild(this._dom);var c=document.createElement("div");c.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",c.style.backgroundColor=u.get("backgroundColor")||"#fff";var p=document.createElement("h4"),d=u.get("lang")||[];p.innerHTML=d[0]||u.get("title"),p.style.cssText="margin:10px 20px",p.style.color=u.get("textColor");var x=document.createElement("div"),_=document.createElement("textarea");x.style.cssText="overflow:auto";var S=u.get("optionToContent"),T=u.get("contentToOption"),A=getContentFromModel(a);if(isFunction$1(S)){var R=S(s.getOption());isString$1(R)?x.innerHTML=R:isDom(R)&&x.appendChild(R)}else{_.readOnly=u.get("readOnly");var D=_.style;D.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",D.color=u.get("textColor"),D.borderColor=u.get("textareaBorderColor"),D.backgroundColor=u.get("textareaColor"),_.value=A.value,x.appendChild(_)}var O=A.meta,F=document.createElement("div");F.style.cssText="position:absolute;bottom:5px;left:0;right:0";var z="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",j=document.createElement("div"),Z=document.createElement("div");z+=";background-color:"+u.get("buttonColor"),z+=";color:"+u.get("buttonTextColor");var W=this;function J(){l.removeChild(c),W._dom=null}addEventListener(j,"click",J),addEventListener(Z,"click",function(){if(T==null&&S!=null||T!=null&&S==null){J();return}var en;try{isFunction$1(T)?en=T(x,s.getOption()):en=parseContents(_.value,O)}catch(tn){throw J(),new Error("Data view format error "+tn)}en&&s.dispatchAction({type:"changeDataView",newOption:en}),J()}),j.innerHTML=d[1],Z.innerHTML=d[2],Z.style.cssText=j.style.cssText=z,!u.get("readOnly")&&F.appendChild(Z),F.appendChild(j),c.appendChild(p),c.appendChild(x),c.appendChild(F),x.style.height=l.clientHeight-80+"px",l.appendChild(c),this._dom=c},n.prototype.remove=function(a,s){this._dom&&s.getDom().removeChild(this._dom)},n.prototype.dispose=function(a,s){this.remove(a,s)},n.getDefaultOption=function(a){var s={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:a.getLocaleModel().get(["toolbox","dataView","title"]),lang:a.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return s},n}(ToolboxFeature);function tryMergeDataOption(t,n){return map$1(t,function(a,s){var l=n&&n[s];if(isObject$3(l)&&!isArray$1(l)){var u=isObject$3(a)&&!isArray$1(a);u||(a={value:a});var c=l.name!=null&&a.name==null;return a=defaults(a,l),c&&delete a.name,a}else return a})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,n){var a=[];each$f(t.newOption.series,function(s){var l=n.getSeriesByName(s.name)[0];if(!l)a.push(extend({type:"scatter"},s));else{var u=l.get("data");a.push({name:s.name,data:tryMergeDataOption(s.data,u)})}}),n.mergeOption(defaults({series:a},t.newOption))});var each$6=each$f,inner$6=makeInner();function push(t,n){var a=getStoreSnapshots(t);each$6(n,function(s,l){for(var u=a.length-1;u>=0;u--){var c=a[u];if(c[l])break}if(u<0){var p=t.queryComponents({mainType:"dataZoom",subType:"select",id:l})[0];if(p){var d=p.getPercentRange();a[0][l]={dataZoomId:l,start:d[0],end:d[1]}}}}),a.push(n)}function pop(t){var n=getStoreSnapshots(t),a=n[n.length-1];n.length>1&&n.pop();var s={};return each$6(a,function(l,u){for(var c=n.length-1;c>=0;c--)if(l=n[c][u],l){s[u]=l;break}}),s}function clear(t){inner$6(t).snapshots=null}function count(t){return getStoreSnapshots(t).length}function getStoreSnapshots(t){var n=inner$6(t);return n.snapshots||(n.snapshots=[{}]),n.snapshots}var RestoreOption=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.onclick=function(a,s){clear(a),s.dispatchAction({type:"restore",from:this.uid})},n.getDefaultOption=function(a){var s={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:a.getLocaleModel().get(["toolbox","restore","title"])};return s},n}(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,n){n.resetOption("recreate")});var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function t(n,a,s){var l=this;this._targetInfoList=[];var u=parseFinder(a,n);each$f(targetInfoBuilders,function(c,p){(!s||!s.include||indexOf(s.include,p)>=0)&&c(u,l._targetInfoList)})}return t.prototype.setOutputRanges=function(n,a){return this.matchOutputRanges(n,a,function(s,l,u){if((s.coordRanges||(s.coordRanges=[])).push(l),!s.coordRange){s.coordRange=l;var c=coordConvert[s.brushType](0,u,l);s.__rangeOffset={offset:diffProcessor[s.brushType](c.values,s.range,[1,1]),xyMinMax:c.xyMinMax}}}),n},t.prototype.matchOutputRanges=function(n,a,s){each$f(n,function(l){var u=this.findTargetInfo(l,a);u&&u!==!0&&each$f(u.coordSyses,function(c){var p=coordConvert[l.brushType](1,c,l.range,!0);s(l,p.values,c,a)})},this)},t.prototype.setInputRanges=function(n,a){each$f(n,function(s){var l=this.findTargetInfo(s,a);if(s.range=s.range||[],l&&l!==!0){s.panelId=l.panelId;var u=coordConvert[s.brushType](0,l.coordSys,s.coordRange),c=s.__rangeOffset;s.range=c?diffProcessor[s.brushType](u.values,c.offset,getScales(u.xyMinMax,c.xyMinMax)):u.values}},this)},t.prototype.makePanelOpts=function(n,a){return map$1(this._targetInfoList,function(s){var l=s.getPanelRect();return{panelId:s.panelId,defaultBrushType:a?a(s):null,clipPath:makeRectPanelClipPath(l),isTargetByCursor:makeRectIsTargetByCursor(l,n,s.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(l)}})},t.prototype.controlSeries=function(n,a,s){var l=this.findTargetInfo(n,s);return l===!0||l&&indexOf(l.coordSyses,a.coordinateSystem)>=0},t.prototype.findTargetInfo=function(n,a){for(var s=this._targetInfoList,l=parseFinder(a,n),u=0;u<s.length;u++){var c=s[u],p=n.panelId;if(p){if(c.panelId===p)return c}else for(var d=0;d<targetInfoMatchers.length;d++)if(targetInfoMatchers[d](l,c))return c}return!0},t}();function formatMinMax(t){return t[0]>t[1]&&t.reverse(),t}function parseFinder(t,n){return parseFinder$1(t,n,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(t,n){var a=t.xAxisModels,s=t.yAxisModels,l=t.gridModels,u=createHashMap(),c={},p={};!a&&!s&&!l||(each$f(a,function(d){var x=d.axis.grid.model;u.set(x.id,x),c[x.id]=!0}),each$f(s,function(d){var x=d.axis.grid.model;u.set(x.id,x),p[x.id]=!0}),each$f(l,function(d){u.set(d.id,d),c[d.id]=!0,p[d.id]=!0}),u.each(function(d){var x=d.coordinateSystem,_=[];each$f(x.getCartesians(),function(S,T){(indexOf(a,S.getAxis("x").model)>=0||indexOf(s,S.getAxis("y").model)>=0)&&_.push(S)}),n.push({panelId:"grid--"+d.id,gridModel:d,coordSysModel:d,coordSys:_[0],coordSyses:_,getPanelRect:panelRectBuilders.grid,xAxisDeclared:c[d.id],yAxisDeclared:p[d.id]})}))},geo:function(t,n){each$f(t.geoModels,function(a){var s=a.coordinateSystem;n.push({panelId:"geo--"+a.id,geoModel:a,coordSysModel:a,coordSys:s,coordSyses:[s],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(t,n){var a=t.xAxisModel,s=t.yAxisModel,l=t.gridModel;return!l&&a&&(l=a.axis.grid.model),!l&&s&&(l=s.axis.grid.model),l&&l===n.gridModel},function(t,n){var a=t.geoModel;return a&&a===n.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,n=t.getBoundingRect().clone();return n.applyTransform(getTransform$1(t)),n}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(t,n,a,s){var l=t?n.pointToData([a[0][0],a[1][0]],s):n.dataToPoint([a[0][0],a[1][0]],s),u=t?n.pointToData([a[0][1],a[1][1]],s):n.dataToPoint([a[0][1],a[1][1]],s),c=[formatMinMax([l[0],u[0]]),formatMinMax([l[1],u[1]])];return{values:c,xyMinMax:c}},polygon:function(t,n,a,s){var l=[[1/0,-1/0],[1/0,-1/0]],u=map$1(a,function(c){var p=t?n.pointToData(c,s):n.dataToPoint(c,s);return l[0][0]=Math.min(l[0][0],p[0]),l[1][0]=Math.min(l[1][0],p[1]),l[0][1]=Math.max(l[0][1],p[0]),l[1][1]=Math.max(l[1][1],p[1]),p});return{values:u,xyMinMax:l}}};function axisConvert(t,n,a,s){var l=a.getAxis(["x","y"][t]),u=formatMinMax(map$1([0,1],function(p){return n?l.coordToData(l.toLocalCoord(s[p]),!0):l.toGlobalCoord(l.dataToCoord(s[p]))})),c=[];return c[t]=u,c[1-t]=[NaN,NaN],{values:u,xyMinMax:c}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(t,n,a){return[[t[0][0]-a[0]*n[0][0],t[0][1]-a[0]*n[0][1]],[t[1][0]-a[1]*n[1][0],t[1][1]-a[1]*n[1][1]]]},polygon:function(t,n,a){return map$1(t,function(s,l){return[s[0]-a[0]*n[l][0],s[1]-a[1]*n[l][1]]})}};function axisDiffProcessor(t,n,a,s){return[n[0]-s[t]*a[0],n[1]-s[t]*a[1]]}function getScales(t,n){var a=getSize(t),s=getSize(n),l=[a[0]/s[0],a[1]/s[1]];return isNaN(l[0])&&(l[0]=1),isNaN(l[1])&&(l[1]=1),l}function getSize(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(a,s,l,u){this._brushController||(this._brushController=new BrushController(l.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(a,s,this,u,l),updateBackBtnStatus(a,s)},n.prototype.onclick=function(a,s,l){handlers[l].call(this)},n.prototype.remove=function(a,s){this._brushController&&this._brushController.unmount()},n.prototype.dispose=function(a,s){this._brushController&&this._brushController.dispose()},n.prototype._onBrush=function(a){var s=a.areas;if(!a.isEnd||!s.length)return;var l={},u=this.ecModel;this._brushController.updateCovers([]);var c=new BrushTargetManager(makeAxisFinder(this.model),u,{include:["grid"]});c.matchOutputRanges(s,u,function(x,_,S){if(S.type==="cartesian2d"){var T=x.brushType;T==="rect"?(p("x",S,_[0]),p("y",S,_[1])):p({lineX:"x",lineY:"y"}[T],S,_)}}),push(u,l),this._dispatchZoomAction(l);function p(x,_,S){var T=_.getAxis(x),A=T.model,R=d(x,A,u),D=R.findRepresentativeAxisProxy(A).getMinMaxSpan();(D.minValueSpan!=null||D.maxValueSpan!=null)&&(S=sliderMove(0,S.slice(),T.scale.getExtent(),0,D.minValueSpan,D.maxValueSpan)),R&&(l[R.id]={dataZoomId:R.id,startValue:S[0],endValue:S[1]})}function d(x,_,S){var T;return S.eachComponent({mainType:"dataZoom",subType:"select"},function(A){var R=A.getAxisModel(x,_.componentIndex);R&&(T=A)}),T}},n.prototype._dispatchZoomAction=function(a){var s=[];each$5(a,function(l,u){s.push(clone$4(l))}),s.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:s})},n.getDefaultOption=function(a){var s={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:a.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return s},n}(ToolboxFeature),handlers={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(t){var n={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return n.xAxisIndex==null&&n.xAxisId==null&&(n.xAxisIndex="all"),n.yAxisIndex==null&&n.yAxisId==null&&(n.yAxisIndex="all"),n}function updateBackBtnStatus(t,n){t.setIconStatus("back",count(n)>1?"emphasis":"normal")}function updateZoomBtnStatus(t,n,a,s,l){var u=a._isZoomActive;s&&s.type==="takeGlobalCursor"&&(u=s.key==="dataZoomSelect"?s.dataZoomSelectActive:!1),a._isZoomActive=u,t.setIconStatus("zoom",u?"emphasis":"normal");var c=new BrushTargetManager(makeAxisFinder(t),n,{include:["grid"]}),p=c.makePanelOpts(l,function(d){return d.xAxisDeclared&&!d.yAxisDeclared?"lineX":!d.xAxisDeclared&&d.yAxisDeclared?"lineY":"rect"});a._brushController.setPanels(p).enableBrush(u&&p.length?{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(t){var n=t.getComponent("toolbox",0),a=["feature","dataZoom"];if(!n||n.get(a)==null)return;var s=n.getModel(a),l=[],u=makeAxisFinder(s),c=parseFinder$1(t,u);each$5(c.xAxisModels,function(d){return p(d,"xAxis","xAxisIndex")}),each$5(c.yAxisModels,function(d){return p(d,"yAxis","yAxisIndex")});function p(d,x,_){var S=d.componentIndex,T={type:"select",$fromToolbox:!0,filterMode:s.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+x+S};T[_]=S,l.push(T)}return l});function install$j(t){t.registerComponentModel(ToolboxModel),t.registerComponentView(ToolboxView),registerFeature("saveAsImage",SaveAsImage),registerFeature("magicType",MagicType),registerFeature("dataView",DataView$1),registerFeature("dataZoom",DataZoomFeature),registerFeature("restore",RestoreOption),use(install$k)}var TooltipModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="tooltip",n.dependencies=["axisPointer"],n.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},n}(ComponentModel);function shouldTooltipConfine(t){var n=t.get("confine");return n!=null?!!n:t.get("renderMode")==="richText"}function testStyle(t){if(env.domSupported){for(var n=document.documentElement.style,a=0,s=t.length;a<s;a++)if(t[a]in n)return t[a]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(t,n){if(!t)return n;n=toCamelCase(n,!0);var a=t.indexOf(n);return t=a===-1?n:"-"+t.slice(0,a)+"-"+n,t.toLowerCase()}function getComputedStyle$1(t,n){var a=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return a?a[n]:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function mirrorPos(t){return t=t==="left"?"right":t==="right"?"left":t==="top"?"bottom":"top",t}function assembleArrow(t,n,a){if(!isString$1(a)||a==="inside")return"";var s=t.get("backgroundColor"),l=t.get("borderWidth");n=convertToColorString(n);var u=mirrorPos(a),c=Math.max(Math.round(l)*1.5,6),p="",d=CSS_TRANSFORM_VENDOR+":",x;indexOf(["left","right"],u)>-1?(p+="top:50%",d+="translateY(-50%) rotate("+(x=u==="left"?-225:-45)+"deg)"):(p+="left:50%",d+="translateX(-50%) rotate("+(x=u==="top"?225:45)+"deg)");var _=x*Math.PI/180,S=c+l,T=S*Math.abs(Math.cos(_))+S*Math.abs(Math.sin(_)),A=Math.round(((T-Math.SQRT2*l)/2+Math.SQRT2*l-(T-S)/2)*100)/100;p+=";"+u+":-"+A+"px";var R=n+" solid "+l+"px;",D=["position:absolute;width:"+c+"px;height:"+c+"px;z-index:-1;",p+";"+d+";","border-bottom:"+R,"border-right:"+R,"background-color:"+s+";"];return'<div style="'+D.join("")+'"></div>'}function assembleTransition(t,n){var a="cubic-bezier(0.23,1,0.32,1)",s=" "+t/2+"s "+a,l="opacity"+s+",visibility"+s;return n||(s=" "+t+"s "+a,l+=env.transformSupported?","+CSS_TRANSFORM_VENDOR+s:",left"+s+",top"+s),CSS_TRANSITION_VENDOR+":"+l}function assembleTransform(t,n,a){var s=t.toFixed(0)+"px",l=n.toFixed(0)+"px";if(!env.transformSupported)return a?"top:"+l+";left:"+s+";":[["top",l],["left",s]];var u=env.transform3dSupported,c="translate"+(u?"3d":"")+"("+s+","+l+(u?",0":"")+")";return a?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+c+";":[["top",0],["left",0],[TRANSFORM_VENDOR,c]]}function assembleFont(t){var n=[],a=t.get("fontSize"),s=t.getTextColor();s&&n.push("color:"+s),n.push("font:"+t.getFont());var l=retrieve2(t.get("lineHeight"),Math.round(a*3/2));a&&n.push("line-height:"+l+"px");var u=t.get("textShadowColor"),c=t.get("textShadowBlur")||0,p=t.get("textShadowOffsetX")||0,d=t.get("textShadowOffsetY")||0;return u&&c&&n.push("text-shadow:"+p+"px "+d+"px "+c+"px "+u),each$f(["decoration","align"],function(x){var _=t.get(x);_&&n.push("text-"+x+":"+_)}),n.join(";")}function assembleCssText(t,n,a){var s=[],l=t.get("transitionDuration"),u=t.get("backgroundColor"),c=t.get("shadowBlur"),p=t.get("shadowColor"),d=t.get("shadowOffsetX"),x=t.get("shadowOffsetY"),_=t.getModel("textStyle"),S=getPaddingFromTooltipModel(t,"html"),T=d+"px "+x+"px "+c+"px "+p;return s.push("box-shadow:"+T),n&&l&&s.push(assembleTransition(l,a)),u&&s.push("background-color:"+u),each$f(["width","color","radius"],function(A){var R="border-"+A,D=toCamelCase(R),O=t.get(D);O!=null&&s.push(R+":"+O+(A==="color"?"":"px"))}),s.push(assembleFont(_)),S!=null&&s.push("padding:"+normalizeCssArray(S).join("px ")+"px"),s.join(";")+";"}function makeStyleCoord$1(t,n,a,s,l){var u=n&&n.painter;if(a){var c=u&&u.getViewportRoot();c&&transformLocalCoord(t,c,a,s,l)}else{t[0]=s,t[1]=l;var p=u&&u.getViewportRootOffset();p&&(t[0]+=p.offsetLeft,t[1]+=p.offsetTop)}t[2]=t[0]/n.getWidth(),t[3]=t[1]/n.getHeight()}var TooltipHTMLContent=function(){function t(n,a){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var s=document.createElement("div");s.domBelongToZr=!0,this.el=s;var l=this._zr=n.getZr(),u=a.appendTo,c=u&&(isString$1(u)?document.querySelector(u):isDom(u)?u:isFunction$1(u)&&u(n.getDom()));makeStyleCoord$1(this._styleCoord,l,c,n.getWidth()/2,n.getHeight()/2),(c||n.getDom()).appendChild(s),this._api=n,this._container=c;var p=this;s.onmouseenter=function(){p._enterable&&(clearTimeout(p._hideTimeout),p._show=!0),p._inContent=!0},s.onmousemove=function(d){if(d=d||window.event,!p._enterable){var x=l.handler,_=l.painter.getViewportRoot();normalizeEvent(_,d,!0),x.dispatch("mousemove",d)}},s.onmouseleave=function(){p._inContent=!1,p._enterable&&p._show&&p.hideLater(p._hideDelay)}}return t.prototype.update=function(n){if(!this._container){var a=this._api.getDom(),s=getComputedStyle$1(a,"position"),l=a.style;l.position!=="absolute"&&s!=="absolute"&&(l.position="relative")}var u=n.get("alwaysShowContent");u&&this._moveIfResized(),this._alwaysShowContent=u,this.el.className=n.get("className")||""},t.prototype.show=function(n,a){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var s=this.el,l=s.style,u=this._styleCoord;s.innerHTML?l.cssText=gCssText+assembleCssText(n,!this._firstShow,this._longHide)+assembleTransform(u[0],u[1],!0)+("border-color:"+convertToColorString(a)+";")+(n.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):l.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(n,a,s,l,u){var c=this.el;if(n==null){c.innerHTML="";return}var p="";if(isString$1(u)&&s.get("trigger")==="item"&&!shouldTooltipConfine(s)&&(p=assembleArrow(s,l,u)),isString$1(n))c.innerHTML=n+p;else if(n){c.innerHTML="",isArray$1(n)||(n=[n]);for(var d=0;d<n.length;d++)isDom(n[d])&&n[d].parentNode!==c&&c.appendChild(n[d]);if(p&&c.childNodes.length){var x=document.createElement("div");x.innerHTML=p,c.appendChild(x)}}},t.prototype.setEnterable=function(n){this._enterable=n},t.prototype.getSize=function(){var n=this.el;return n?[n.offsetWidth,n.offsetHeight]:[0,0]},t.prototype.moveTo=function(n,a){if(this.el){var s=this._styleCoord;if(makeStyleCoord$1(s,this._zr,this._container,n,a),s[0]!=null&&s[1]!=null){var l=this.el.style,u=assembleTransform(s[0],s[1]);each$f(u,function(c){l[c[0]]=c[1]})}}},t.prototype._moveIfResized=function(){var n=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),a*this._zr.getHeight())},t.prototype.hide=function(){var n=this,a=this.el.style;a.visibility="hidden",a.opacity="0",env.transform3dSupported&&(a.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return n._longHide=!0},500)},t.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el.parentNode;n&&n.removeChild(this.el),this.el=this._container=null},t}(),TooltipRichContent=function(){function t(n){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=n.getZr(),makeStyleCoord(this._styleCoord,this._zr,n.getWidth()/2,n.getHeight()/2)}return t.prototype.update=function(n){var a=n.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(n,a,s,l,u){var c=this;isObject$3(n)&&throwError(""),this.el&&this._zr.remove(this.el);var p=s.getModel("textStyle");this.el=new ZRText({style:{rich:a.richTextStyles,text:n,lineHeight:22,borderWidth:1,borderColor:l,textShadowColor:p.get("textShadowColor"),fill:s.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(s,"richText"),verticalAlign:"top",align:"left"},z:s.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(x){c.el.style[x]=s.get(x)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(x){c.el.style[x]=p.get(x)||0}),this._zr.add(this.el);var d=this;this.el.on("mouseover",function(){d._enterable&&(clearTimeout(d._hideTimeout),d._show=!0),d._inContent=!0}),this.el.on("mouseout",function(){d._enterable&&d._show&&d.hideLater(d._hideDelay),d._inContent=!1})},t.prototype.setEnterable=function(n){this._enterable=n},t.prototype.getSize=function(){var n=this.el,a=this.el.getBoundingRect(),s=calcShadowOuterSize(n.style);return[a.width+s.left+s.right,a.height+s.top+s.bottom]},t.prototype.moveTo=function(n,a){var s=this.el;if(s){var l=this._styleCoord;makeStyleCoord(l,this._zr,n,a),n=l[0],a=l[1];var u=s.style,c=mathMaxWith0(u.borderWidth||0),p=calcShadowOuterSize(u);s.x=n+c+p.left,s.y=a+c+p.top,s.markRedraw()}},t.prototype._moveIfResized=function(){var n=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),a*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function mathMaxWith0(t){return Math.max(0,t)}function calcShadowOuterSize(t){var n=mathMaxWith0(t.shadowBlur||0),a=mathMaxWith0(t.shadowOffsetX||0),s=mathMaxWith0(t.shadowOffsetY||0);return{left:mathMaxWith0(n-a),right:mathMaxWith0(n+a),top:mathMaxWith0(n-s),bottom:mathMaxWith0(n+s)}}function makeStyleCoord(t,n,a,s){t[0]=a,t[1]=s,t[2]=t[0]/n.getWidth(),t[3]=t[1]/n.getHeight()}var proxyRect=new Rect$2({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){if(!(env.node||!s.getDom())){var l=a.getComponent("tooltip"),u=this._renderMode=getTooltipRenderMode(l.get("renderMode"));this._tooltipContent=u==="richText"?new TooltipRichContent(s):new TooltipHTMLContent(s,{appendTo:l.get("appendToBody",!0)?"body":l.get("appendTo",!0)})}},n.prototype.render=function(a,s,l){if(!(env.node||!l.getDom())){this.group.removeAll(),this._tooltipModel=a,this._ecModel=s,this._api=l;var u=this._tooltipContent;u.update(a),u.setEnterable(a.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&a.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},n.prototype._initGlobalListener=function(){var a=this._tooltipModel,s=a.get("triggerOn");register("itemTooltip",this._api,bind$1(function(l,u,c){s!=="none"&&(s.indexOf(l)>=0?this._tryShow(u,c):l==="leave"&&this._hide(c))},this))},n.prototype._keepShow=function(){var a=this._tooltipModel,s=this._ecModel,l=this._api,u=a.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&u!=="none"&&u!=="click"){var c=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!l.isDisposed()&&c.manuallyShowTip(a,s,l,{x:c._lastX,y:c._lastY,dataByCoordSys:c._lastDataByCoordSys})})}},n.prototype.manuallyShowTip=function(a,s,l,u){if(!(u.from===this.uid||env.node||!l.getDom())){var c=makeDispatchAction(u,l);this._ticket="";var p=u.dataByCoordSys,d=findComponentReference(u,s,l);if(d){var x=d.el.getBoundingRect().clone();x.applyTransform(d.el.transform),this._tryShow({offsetX:x.x+x.width/2,offsetY:x.y+x.height/2,target:d.el,position:u.position,positionDefault:"bottom"},c)}else if(u.tooltip&&u.x!=null&&u.y!=null){var _=proxyRect;_.x=u.x,_.y=u.y,_.update(),getECData(_).tooltipConfig={name:null,option:u.tooltip},this._tryShow({offsetX:u.x,offsetY:u.y,target:_},c)}else if(p)this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,dataByCoordSys:p,tooltipOption:u.tooltipOption},c);else if(u.seriesIndex!=null){if(this._manuallyAxisShowTip(a,s,l,u))return;var S=findPointFromSeries(u,s),T=S.point[0],A=S.point[1];T!=null&&A!=null&&this._tryShow({offsetX:T,offsetY:A,target:S.el,position:u.position,positionDefault:"bottom"},c)}else u.x!=null&&u.y!=null&&(l.dispatchAction({type:"updateAxisPointer",x:u.x,y:u.y}),this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,target:l.getZr().findHover(u.x,u.y).target},c))}},n.prototype.manuallyHideTip=function(a,s,l,u){var c=this._tooltipContent;this._tooltipModel&&c.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,u.from!==this.uid&&this._hide(makeDispatchAction(u,l))},n.prototype._manuallyAxisShowTip=function(a,s,l,u){var c=u.seriesIndex,p=u.dataIndex,d=s.getComponent("axisPointer").coordSysAxesInfo;if(!(c==null||p==null||d==null)){var x=s.getSeriesByIndex(c);if(x){var _=x.getData(),S=buildTooltipModel([_.getItemModel(p),x,(x.coordinateSystem||{}).model],this._tooltipModel);if(S.get("trigger")==="axis")return l.dispatchAction({type:"updateAxisPointer",seriesIndex:c,dataIndex:p,position:u.position}),!0}}},n.prototype._tryShow=function(a,s){var l=a.target,u=this._tooltipModel;if(u){this._lastX=a.offsetX,this._lastY=a.offsetY;var c=a.dataByCoordSys;if(c&&c.length)this._showAxisTooltip(c,a);else if(l){var p=getECData(l);if(p.ssrType==="legend")return;this._lastDataByCoordSys=null;var d,x;findEventDispatcher(l,function(_){if(getECData(_).dataIndex!=null)return d=_,!0;if(getECData(_).tooltipConfig!=null)return x=_,!0},!0),d?this._showSeriesItemTooltip(a,d,s):x?this._showComponentItemTooltip(a,x,s):this._hide(s)}else this._lastDataByCoordSys=null,this._hide(s)}},n.prototype._showOrMove=function(a,s){var l=a.get("showDelay");s=bind$1(s,this),clearTimeout(this._showTimout),l>0?this._showTimout=setTimeout(s,l):s()},n.prototype._showAxisTooltip=function(a,s){var l=this._ecModel,u=this._tooltipModel,c=[s.offsetX,s.offsetY],p=buildTooltipModel([s.tooltipOption],u),d=this._renderMode,x=[],_=createTooltipMarkup("section",{blocks:[],noHeader:!0}),S=[],T=new TooltipMarkupStyleCreator;each$f(a,function(z){each$f(z.dataByAxis,function(j){var Z=l.getComponent(j.axisDim+"Axis",j.axisIndex),W=j.value;if(!(!Z||W==null)){var J=getValueLabel(W,Z.axis,l,j.seriesDataIndices,j.valueLabelOpt),en=createTooltipMarkup("section",{header:J,noHeader:!trim$1(J),sortBlocks:!0,blocks:[]});_.blocks.push(en),each$f(j.seriesDataIndices,function(tn){var Ct=l.getSeriesByIndex(tn.seriesIndex),Q=tn.dataIndexInside,on=Ct.getDataParams(Q);if(!(on.dataIndex<0)){on.axisDim=j.axisDim,on.axisIndex=j.axisIndex,on.axisType=j.axisType,on.axisId=j.axisId,on.axisValue=getAxisRawValue(Z.axis,{value:W}),on.axisValueLabel=J,on.marker=T.makeTooltipMarker("item",convertToColorString(on.color),d);var gn=normalizeTooltipFormatResult(Ct.formatTooltip(Q,!0,null)),In=gn.frag;if(In){var dn=buildTooltipModel([Ct],u).get("valueFormatter");en.blocks.push(dn?extend({valueFormatter:dn},In):In)}gn.text&&S.push(gn.text),x.push(on)}})}})}),_.blocks.reverse(),S.reverse();var A=s.position,R=p.get("order"),D=buildTooltipMarkup(_,T,d,R,l.get("useUTC"),p.get("textStyle"));D&&S.unshift(D);var O=d==="richText"?`

`:"<br/>",F=S.join(O);this._showOrMove(p,function(){this._updateContentNotChangedOnAxis(a,x)?this._updatePosition(p,A,c[0],c[1],this._tooltipContent,x):this._showTooltipContent(p,F,x,Math.random()+"",c[0],c[1],A,null,T)})},n.prototype._showSeriesItemTooltip=function(a,s,l){var u=this._ecModel,c=getECData(s),p=c.seriesIndex,d=u.getSeriesByIndex(p),x=c.dataModel||d,_=c.dataIndex,S=c.dataType,T=x.getData(S),A=this._renderMode,R=a.positionDefault,D=buildTooltipModel([T.getItemModel(_),x,d&&(d.coordinateSystem||{}).model],this._tooltipModel,R?{position:R}:null),O=D.get("trigger");if(!(O!=null&&O!=="item")){var F=x.getDataParams(_,S),z=new TooltipMarkupStyleCreator;F.marker=z.makeTooltipMarker("item",convertToColorString(F.color),A);var j=normalizeTooltipFormatResult(x.formatTooltip(_,!1,S)),Z=D.get("order"),W=D.get("valueFormatter"),J=j.frag,en=J?buildTooltipMarkup(W?extend({valueFormatter:W},J):J,z,A,Z,u.get("useUTC"),D.get("textStyle")):j.text,tn="item_"+x.name+"_"+_;this._showOrMove(D,function(){this._showTooltipContent(D,en,F,tn,a.offsetX,a.offsetY,a.position,a.target,z)}),l({type:"showTip",dataIndexInside:_,dataIndex:T.getRawIndex(_),seriesIndex:p,from:this.uid})}},n.prototype._showComponentItemTooltip=function(a,s,l){var u=this._renderMode==="html",c=getECData(s),p=c.tooltipConfig,d=p.option||{},x=d.encodeHTMLContent;if(isString$1(d)){var _=d;d={content:_,formatter:_},x=!0}x&&u&&d.content&&(d=clone$4(d),d.content=encodeHTML(d.content));var S=[d],T=this._ecModel.getComponent(c.componentMainType,c.componentIndex);T&&S.push(T),S.push({formatter:d.content});var A=a.positionDefault,R=buildTooltipModel(S,this._tooltipModel,A?{position:A}:null),D=R.get("content"),O=Math.random()+"",F=new TooltipMarkupStyleCreator;this._showOrMove(R,function(){var z=clone$4(R.get("formatterParams")||{});this._showTooltipContent(R,D,z,O,a.offsetX,a.offsetY,a.position,s,F)}),l({type:"showTip",from:this.uid})},n.prototype._showTooltipContent=function(a,s,l,u,c,p,d,x,_){if(this._ticket="",!(!a.get("showContent")||!a.get("show"))){var S=this._tooltipContent;S.setEnterable(a.get("enterable"));var T=a.get("formatter");d=d||a.get("position");var A=s,R=this._getNearestPoint([c,p],l,a.get("trigger"),a.get("borderColor")),D=R.color;if(T)if(isString$1(T)){var O=a.ecModel.get("useUTC"),F=isArray$1(l)?l[0]:l,z=F&&F.axisType&&F.axisType.indexOf("time")>=0;A=T,z&&(A=format$1(F.axisValue,A,O)),A=formatTpl(A,l,!0)}else if(isFunction$1(T)){var j=bind$1(function(Z,W){Z===this._ticket&&(S.setContent(W,_,a,D,d),this._updatePosition(a,d,c,p,S,l,x))},this);this._ticket=u,A=T(l,u,j)}else A=T;S.setContent(A,_,a,D,d),S.show(a,D),this._updatePosition(a,d,c,p,S,l,x)}},n.prototype._getNearestPoint=function(a,s,l,u){if(l==="axis"||isArray$1(s))return{color:u||(this._renderMode==="html"?"#fff":"none")};if(!isArray$1(s))return{color:u||s.color||s.borderColor}},n.prototype._updatePosition=function(a,s,l,u,c,p,d){var x=this._api.getWidth(),_=this._api.getHeight();s=s||a.get("position");var S=c.getSize(),T=a.get("align"),A=a.get("verticalAlign"),R=d&&d.getBoundingRect().clone();if(d&&R.applyTransform(d.transform),isFunction$1(s)&&(s=s([l,u],p,c.el,R,{viewSize:[x,_],contentSize:S.slice()})),isArray$1(s))l=parsePercent(s[0],x),u=parsePercent(s[1],_);else if(isObject$3(s)){var D=s;D.width=S[0],D.height=S[1];var O=getLayoutRect(D,{width:x,height:_});l=O.x,u=O.y,T=null,A=null}else if(isString$1(s)&&d){var F=calcTooltipPosition(s,R,S,a.get("borderWidth"));l=F[0],u=F[1]}else{var F=refixTooltipPosition(l,u,c,x,_,T?null:20,A?null:20);l=F[0],u=F[1]}if(T&&(l-=isCenterAlign(T)?S[0]/2:T==="right"?S[0]:0),A&&(u-=isCenterAlign(A)?S[1]/2:A==="bottom"?S[1]:0),shouldTooltipConfine(a)){var F=confineTooltipPosition(l,u,c,x,_);l=F[0],u=F[1]}c.moveTo(l,u)},n.prototype._updateContentNotChangedOnAxis=function(a,s){var l=this._lastDataByCoordSys,u=this._cbParamsList,c=!!l&&l.length===a.length;return c&&each$f(l,function(p,d){var x=p.dataByAxis||[],_=a[d]||{},S=_.dataByAxis||[];c=c&&x.length===S.length,c&&each$f(x,function(T,A){var R=S[A]||{},D=T.seriesDataIndices||[],O=R.seriesDataIndices||[];c=c&&T.value===R.value&&T.axisType===R.axisType&&T.axisId===R.axisId&&D.length===O.length,c&&each$f(D,function(F,z){var j=O[z];c=c&&F.seriesIndex===j.seriesIndex&&F.dataIndex===j.dataIndex}),u&&each$f(T.seriesDataIndices,function(F){var z=F.seriesIndex,j=s[z],Z=u[z];j&&Z&&Z.data!==j.data&&(c=!1)})})}),this._lastDataByCoordSys=a,this._cbParamsList=s,!!c},n.prototype._hide=function(a){this._lastDataByCoordSys=null,a({type:"hideTip",from:this.uid})},n.prototype.dispose=function(a,s){env.node||!s.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",s))},n.type="tooltip",n}(ComponentView);function buildTooltipModel(t,n,a){var s=n.ecModel,l;a?(l=new Model(a,s,s),l=new Model(n.option,l,s)):l=n;for(var u=t.length-1;u>=0;u--){var c=t[u];c&&(c instanceof Model&&(c=c.get("tooltip",!0)),isString$1(c)&&(c={formatter:c}),c&&(l=new Model(c,l,s)))}return l}function makeDispatchAction(t,n){return t.dispatchAction||bind$1(n.dispatchAction,n)}function refixTooltipPosition(t,n,a,s,l,u,c){var p=a.getSize(),d=p[0],x=p[1];return u!=null&&(t+d+u+2>s?t-=d+u:t+=u),c!=null&&(n+x+c>l?n-=x+c:n+=c),[t,n]}function confineTooltipPosition(t,n,a,s,l){var u=a.getSize(),c=u[0],p=u[1];return t=Math.min(t+c,s)-c,n=Math.min(n+p,l)-p,t=Math.max(t,0),n=Math.max(n,0),[t,n]}function calcTooltipPosition(t,n,a,s){var l=a[0],u=a[1],c=Math.ceil(Math.SQRT2*s)+8,p=0,d=0,x=n.width,_=n.height;switch(t){case"inside":p=n.x+x/2-l/2,d=n.y+_/2-u/2;break;case"top":p=n.x+x/2-l/2,d=n.y-u-c;break;case"bottom":p=n.x+x/2-l/2,d=n.y+_+c;break;case"left":p=n.x-l-c,d=n.y+_/2-u/2;break;case"right":p=n.x+x+c,d=n.y+_/2-u/2}return[p,d]}function isCenterAlign(t){return t==="center"||t==="middle"}function findComponentReference(t,n,a){var s=preParseFinder(t).queryOptionMap,l=s.keys()[0];if(!(!l||l==="series")){var u=queryReferringComponents(n,l,s.get(l),{useDefault:!1,enableAll:!1,enableNone:!1}),c=u.models[0];if(c){var p=a.getViewOfComponentModel(c),d;if(p.group.traverse(function(x){var _=getECData(x).tooltipConfig;if(_&&_.name===t.name)return d=x,!0}),d)return{componentMainType:l,componentIndex:c.componentIndex,el:d}}}}function install$i(t){use(install$q),t.registerComponentModel(TooltipModel),t.registerComponentView(TooltipView),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(t,n){var a=normalizeToArray(t?t.brush:[]);if(a.length){var s=[];each$f(a,function(d){var x=d.hasOwnProperty("toolbox")?d.toolbox:[];x instanceof Array&&(s=s.concat(x))});var l=t&&t.toolbox;isArray$1(l)&&(l=l[0]),l||(l={feature:{}},t.toolbox=[l]);var u=l.feature||(l.feature={}),c=u.brush||(u.brush={}),p=c.type||(c.type=[]);p.push.apply(p,s),removeDuplicate(p),n&&!p.length&&p.push.apply(p,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(t){var n={};each$f(t,function(a){n[a]=1}),t.length=0,each$f(n,function(a,s){t.push(s)})}var each$4=each$f;function hasKeys(t){if(t){for(var n in t)if(t.hasOwnProperty(n))return!0}}function createVisualMappings(t,n,a){var s={};return each$4(n,function(u){var c=s[u]=l();each$4(t[u],function(p,d){if(VisualMapping.isValidType(d)){var x={type:d,visual:p};a&&a(x,u),c[d]=new VisualMapping(x),d==="opacity"&&(x=clone$4(x),x.type="colorAlpha",c.__hidden.__alphaForOpacity=new VisualMapping(x))}})}),s;function l(){var u=function(){};u.prototype.__hidden=u.prototype;var c=new u;return c}}function replaceVisualOption(t,n,a){var s;each$f(a,function(l){n.hasOwnProperty(l)&&hasKeys(n[l])&&(s=!0)}),s&&each$f(a,function(l){n.hasOwnProperty(l)&&hasKeys(n[l])?t[l]=clone$4(n[l]):delete t[l]})}function applyVisual(t,n,a,s,l,u){var c={};each$f(t,function(S){var T=VisualMapping.prepareVisualTypes(n[S]);c[S]=T});var p;function d(S){return getItemVisualFromData(a,p,S)}function x(S,T){setItemVisualFromData(a,p,S,T)}a.each(_);function _(S,T){p=S;var A=a.getRawDataItem(p);if(!(A&&A.visualMap===!1))for(var R=s.call(l,S),D=n[R],O=c[R],F=0,z=O.length;F<z;F++){var j=O[F];D[j]&&D[j].applyVisual(S,d,x)}}}function incrementalApplyVisual(t,n,a,s){var l={};return each$f(t,function(u){var c=VisualMapping.prepareVisualTypes(n[u]);l[u]=c}),{progress:function(c,p){var d;s!=null&&(d=p.getDimensionIndex(s));function x(W){return getItemVisualFromData(p,S,W)}function _(W,J){setItemVisualFromData(p,S,W,J)}for(var S,T=p.getStore();(S=c.next())!=null;){var A=p.getRawDataItem(S);if(!(A&&A.visualMap===!1))for(var R=s!=null?T.get(d,S):S,D=a(R),O=n[D],F=l[D],z=0,j=F.length;z<j;z++){var Z=F[z];O[Z]&&O[Z].applyVisual(R,x,_)}}}}}function makeBrushCommonSelectorForSeries(t){var n=t.brushType,a={point:function(s){return selector[n].point(s,a,t)},rect:function(s){return selector[n].rect(s,a,t)}};return a}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(t,n,a){return t&&a.boundingRect.contain(t[0],t[1])},rect:function(t,n,a){return t&&a.boundingRect.intersect(t)}},polygon:{point:function(t,n,a){return t&&a.boundingRect.contain(t[0],t[1])&&contain(a.range,t[0],t[1])},rect:function(t,n,a){var s=a.range;if(!t||s.length<=1)return!1;var l=t.x,u=t.y,c=t.width,p=t.height,d=s[0];if(contain(s,l,u)||contain(s,l+c,u)||contain(s,l,u+p)||contain(s,l+c,u+p)||BoundingRect.create(t).contain(d[0],d[1])||linePolygonIntersect(l,u,l+c,u,s)||linePolygonIntersect(l,u,l,u+p,s)||linePolygonIntersect(l+c,u,l+c,u+p,s)||linePolygonIntersect(l,u+p,l+c,u+p,s))return!0}}};function getLineSelectors(t){var n=["x","y"],a=["width","height"];return{point:function(s,l,u){if(s){var c=u.range,p=s[t];return inLineRange(p,c)}},rect:function(s,l,u){if(s){var c=u.range,p=[s[n[t]],s[n[t]]+s[a[t]]];return p[1]<p[0]&&p.reverse(),inLineRange(p[0],c)||inLineRange(p[1],c)||inLineRange(c[0],p)||inLineRange(c[1],p)}}}}function inLineRange(t,n){return n[0]<=t&&t<=n[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(t){t.eachComponent({mainType:"brush"},function(n){var a=n.brushTargetManager=new BrushTargetManager(n.option,t);a.setInputRanges(n.areas,t)})}function brushVisual(t,n,a){var s=[],l,u;t.eachComponent({mainType:"brush"},function(c){a&&a.type==="takeGlobalCursor"&&c.setBrushOption(a.key==="brush"?a.brushOption:{brushType:!1})}),layoutCovers(t),t.eachComponent({mainType:"brush"},function(c,p){var d={brushId:c.id,brushIndex:p,brushName:c.name,areas:clone$4(c.areas),selected:[]};s.push(d);var x=c.option,_=x.brushLink,S=[],T=[],A=[],R=!1;p||(l=x.throttleType,u=x.throttleDelay);var D=map$1(c.areas,function(W){var J=boundingRectBuilders[W.brushType],en=defaults({boundingRect:J?J(W):void 0},W);return en.selectors=makeBrushCommonSelectorForSeries(en),en}),O=createVisualMappings(c.option,STATE_LIST,function(W){W.mappingMethod="fixed"});isArray$1(_)&&each$f(_,function(W){S[W]=1});function F(W){return _==="all"||!!S[W]}function z(W){return!!W.length}t.eachSeries(function(W,J){var en=A[J]=[];W.subType==="parallel"?j(W,J):Z(W,J,en)});function j(W,J){var en=W.coordinateSystem;R=R||en.hasAxisBrushed(),F(J)&&en.eachActiveState(W.getData(),function(tn,Ct){tn==="active"&&(T[Ct]=1)})}function Z(W,J,en){if(!(!W.brushSelector||brushModelNotControll(c,J))&&(each$f(D,function(Ct){c.brushTargetManager.controlSeries(Ct,W,t)&&en.push(Ct),R=R||z(en)}),F(J)&&z(en))){var tn=W.getData();tn.each(function(Ct){checkInRange(W,en,tn,Ct)&&(T[Ct]=1)})}}t.eachSeries(function(W,J){var en={seriesId:W.id,seriesIndex:J,seriesName:W.name,dataIndex:[]};d.selected.push(en);var tn=A[J],Ct=W.getData(),Q=F(J)?function(on){return T[on]?(en.dataIndex.push(Ct.getRawIndex(on)),"inBrush"):"outOfBrush"}:function(on){return checkInRange(W,tn,Ct,on)?(en.dataIndex.push(Ct.getRawIndex(on)),"inBrush"):"outOfBrush"};(F(J)?R:z(tn))&&applyVisual(STATE_LIST,O,Ct,Q)})}),dispatchAction$1(n,l,u,s,a)}function dispatchAction$1(t,n,a,s,l){if(l){var u=t.getZr();if(!u[DISPATCH_FLAG]){u[DISPATCH_METHOD]||(u[DISPATCH_METHOD]=doDispatch);var c=createOrUpdate(u,DISPATCH_METHOD,a,n);c(t,s)}}}function doDispatch(t,n){if(!t.isDisposed()){var a=t.getZr();a[DISPATCH_FLAG]=!0,t.dispatchAction({type:"brushSelect",batch:n}),a[DISPATCH_FLAG]=!1}}function checkInRange(t,n,a,s){for(var l=0,u=n.length;l<u;l++){var c=n[l];if(t.brushSelector(s,a,c.selectors,c))return!0}}function brushModelNotControll(t,n){var a=t.option.seriesIndex;return a!=null&&a!=="all"&&(isArray$1(a)?indexOf(a,n)<0:n!==a)}var boundingRectBuilders={rect:function(t){return getBoundingRectFromMinMax(t.range)},polygon:function(t){for(var n,a=t.range,s=0,l=a.length;s<l;s++){n=n||[[1/0,-1/0],[1/0,-1/0]];var u=a[s];u[0]<n[0][0]&&(n[0][0]=u[0]),u[0]>n[0][1]&&(n[0][1]=u[0]),u[1]<n[1][0]&&(n[1][0]=u[1]),u[1]>n[1][1]&&(n[1][1]=u[1])}return n&&getBoundingRectFromMinMax(n)}};function getBoundingRectFromMinMax(t){return new BoundingRect(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var BrushView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){this.ecModel=a,this.api=s,this.model,(this._brushController=new BrushController(s.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},n.prototype.render=function(a,s,l,u){this.model=a,this._updateController(a,s,l,u)},n.prototype.updateTransform=function(a,s,l,u){layoutCovers(s),this._updateController(a,s,l,u)},n.prototype.updateVisual=function(a,s,l,u){this.updateTransform(a,s,l,u)},n.prototype.updateView=function(a,s,l,u){this._updateController(a,s,l,u)},n.prototype._updateController=function(a,s,l,u){(!u||u.$from!==a.id)&&this._brushController.setPanels(a.brushTargetManager.makePanelOpts(l)).enableBrush(a.brushOption).updateCovers(a.areas.slice())},n.prototype.dispose=function(){this._brushController.dispose()},n.prototype._onBrush=function(a){var s=this.model.id,l=this.model.brushTargetManager.setOutputRanges(a.areas,this.ecModel);(!a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:s,areas:clone$4(l),$from:s}),a.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:s,areas:clone$4(l),$from:s})},n.type="brush",n}(ComponentView),DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.areas=[],a.brushOption={},a}return n.prototype.optionUpdated=function(a,s){var l=this.option;!s&&replaceVisualOption(l,a,["inBrush","outOfBrush"]);var u=l.inBrush=l.inBrush||{};l.outOfBrush=l.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},u.hasOwnProperty("liftZ")||(u.liftZ=5)},n.prototype.setAreas=function(a){a&&(this.areas=map$1(a,function(s){return generateBrushOption(this.option,s)},this))},n.prototype.setBrushOption=function(a){this.brushOption=generateBrushOption(this.option,a),this.brushType=this.brushOption.brushType},n.type="brush",n.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],n.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},n}(ComponentModel);function generateBrushOption(t,n){return merge({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new Model(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},n,!0)}var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.render=function(a,s,l){var u,c,p;s.eachComponent({mainType:"brush"},function(d){u=d.brushType,c=d.brushOption.brushMode||"single",p=p||!!d.areas.length}),this._brushType=u,this._brushMode=c,each$f(a.get("type",!0),function(d){a.setIconStatus(d,(d==="keep"?c==="multiple":d==="clear"?p:d===u)?"emphasis":"normal")})},n.prototype.updateView=function(a,s,l){this.render(a,s,l)},n.prototype.getIcons=function(){var a=this.model,s=a.get("icon",!0),l={};return each$f(a.get("type",!0),function(u){s[u]&&(l[u]=s[u])}),l},n.prototype.onclick=function(a,s,l){var u=this._brushType,c=this._brushMode;l==="clear"?(s.dispatchAction({type:"axisAreaSelect",intervals:[]}),s.dispatchAction({type:"brush",command:"clear",areas:[]})):s.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:l==="keep"?u:u===l?!1:l,brushMode:l==="keep"?c==="multiple"?"single":"multiple":c}})},n.getDefaultOption=function(a){var s={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:a.getLocaleModel().get(["toolbox","brush","title"])};return s},n}(ToolboxFeature);function install$h(t){t.registerComponentView(BrushView),t.registerComponentModel(BrushModel),t.registerPreprocessor(brushPreprocessor),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,brushVisual),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(n,a){a.eachComponent({mainType:"brush",query:n},function(s){s.setAreas(n.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature)}var TitleModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.layoutMode={type:"box",ignoreSize:!0},a}return n.type="title",n.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},n}(ComponentModel),TitleView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,s,l){if(this.group.removeAll(),!!a.get("show")){var u=this.group,c=a.getModel("textStyle"),p=a.getModel("subtextStyle"),d=a.get("textAlign"),x=retrieve2(a.get("textBaseline"),a.get("textVerticalAlign")),_=new ZRText({style:createTextStyle$1(c,{text:a.get("text"),fill:c.getTextColor()},{disableBox:!0}),z2:10}),S=_.getBoundingRect(),T=a.get("subtext"),A=new ZRText({style:createTextStyle$1(p,{text:T,fill:p.getTextColor(),y:S.height+a.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),R=a.get("link"),D=a.get("sublink"),O=a.get("triggerEvent",!0);_.silent=!R&&!O,A.silent=!D&&!O,R&&_.on("click",function(){windowOpen(R,"_"+a.get("target"))}),D&&A.on("click",function(){windowOpen(D,"_"+a.get("subtarget"))}),getECData(_).eventData=getECData(A).eventData=O?{componentType:"title",componentIndex:a.componentIndex}:null,u.add(_),T&&u.add(A);var F=u.getBoundingRect(),z=a.getBoxLayoutParams();z.width=F.width,z.height=F.height;var j=getLayoutRect(z,{width:l.getWidth(),height:l.getHeight()},a.get("padding"));d||(d=a.get("left")||a.get("right"),d==="middle"&&(d="center"),d==="right"?j.x+=j.width:d==="center"&&(j.x+=j.width/2)),x||(x=a.get("top")||a.get("bottom"),x==="center"&&(x="middle"),x==="bottom"?j.y+=j.height:x==="middle"&&(j.y+=j.height/2),x=x||"top"),u.x=j.x,u.y=j.y,u.markRedraw();var Z={align:d,verticalAlign:x};_.setStyle(Z),A.setStyle(Z),F=u.getBoundingRect();var W=j.margin,J=a.getItemStyle(["color","opacity"]);J.fill=a.get("backgroundColor");var en=new Rect$2({shape:{x:F.x-W[3],y:F.y-W[0],width:F.width+W[1]+W[3],height:F.height+W[0]+W[2],r:a.get("borderRadius")},style:J,subPixelOptimize:!0,silent:!0});u.add(en)}},n.type="title",n}(ComponentView);function install$g(t){t.registerComponentModel(TitleModel),t.registerComponentView(TitleView)}var TimelineModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.layoutMode="box",a}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l),this._initData()},n.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),this._initData()},n.prototype.setCurrentIndex=function(a){a==null&&(a=this.option.currentIndex);var s=this._data.count();this.option.loop?a=(a%s+s)%s:(a>=s&&(a=s-1),a<0&&(a=0)),this.option.currentIndex=a},n.prototype.getCurrentIndex=function(){return this.option.currentIndex},n.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},n.prototype.setPlayState=function(a){this.option.autoPlay=!!a},n.prototype.getPlayState=function(){return!!this.option.autoPlay},n.prototype._initData=function(){var a=this.option,s=a.data||[],l=a.axisType,u=this._names=[],c;l==="category"?(c=[],each$f(s,function(x,_){var S=convertOptionIdName(getDataItemValue(x),""),T;isObject$3(x)?(T=clone$4(x),T.value=_):T=_,c.push(T),u.push(S)})):c=s;var p={category:"ordinal",time:"time",value:"number"}[l]||"number",d=this._data=new SeriesData([{name:"value",type:p}],this);d.initData(c,u)},n.prototype.getData=function(){return this._data},n.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},n.type="timeline",n.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},n}(ComponentModel),SliderTimelineModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="timeline.slider",n.defaultOption=inheritDefaultOption(TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),n}(TimelineModel);mixin(SliderTimelineModel,DataFormatMixin.prototype);var TimelineView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="timeline",n}(ComponentView),TimelineAxis=function(t){__extends(n,t);function n(a,s,l,u){var c=t.call(this,a,s,l)||this;return c.type=u||"value",c}return n.prototype.getLabelModel=function(){return this.model.getModel("label")},n.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},n}(Axis),PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,s){this.api=s},n.prototype.render=function(a,s,l){if(this.model=a,this.api=l,this.ecModel=s,this.group.removeAll(),a.get("show",!0)){var u=this._layout(a,l),c=this._createGroup("_mainGroup"),p=this._createGroup("_labelGroup"),d=this._axis=this._createAxis(u,a);a.formatTooltip=function(x){var _=d.scale.getLabel({value:x});return createTooltipMarkup("nameValue",{noName:!0,value:_})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(x){this["_render"+x](u,c,d,a)},this),this._renderAxisLabel(u,p,d,a),this._position(u,a)}this._doPlayStop(),this._updateTicksStatus()},n.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},n.prototype.dispose=function(){this._clearTimer()},n.prototype._layout=function(a,s){var l=a.get(["label","position"]),u=a.get("orient"),c=getViewRect(a,s),p;l==null||l==="auto"?p=u==="horizontal"?c.y+c.height/2<s.getHeight()/2?"-":"+":c.x+c.width/2<s.getWidth()/2?"+":"-":isString$1(l)?p={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[u][l]:p=l;var d={horizontal:"center",vertical:p>=0||p==="+"?"left":"right"},x={horizontal:p>=0||p==="+"?"top":"bottom",vertical:"middle"},_={horizontal:0,vertical:PI/2},S=u==="vertical"?c.height:c.width,T=a.getModel("controlStyle"),A=T.get("show",!0),R=A?T.get("itemSize"):0,D=A?T.get("itemGap"):0,O=R+D,F=a.get(["label","rotate"])||0;F=F*PI/180;var z,j,Z,W=T.get("position",!0),J=A&&T.get("showPlayBtn",!0),en=A&&T.get("showPrevBtn",!0),tn=A&&T.get("showNextBtn",!0),Ct=0,Q=S;W==="left"||W==="bottom"?(J&&(z=[0,0],Ct+=O),en&&(j=[Ct,0],Ct+=O),tn&&(Z=[Q-R,0],Q-=O)):(J&&(z=[Q-R,0],Q-=O),en&&(j=[0,0],Ct+=O),tn&&(Z=[Q-R,0],Q-=O));var on=[Ct,Q];return a.get("inverse")&&on.reverse(),{viewRect:c,mainLength:S,orient:u,rotation:_[u],labelRotation:F,labelPosOpt:p,labelAlign:a.get(["label","align"])||d[u],labelBaseline:a.get(["label","verticalAlign"])||a.get(["label","baseline"])||x[u],playPosition:z,prevBtnPosition:j,nextBtnPosition:Z,axisExtent:on,controlSize:R,controlGap:D}},n.prototype._position=function(a,s){var l=this._mainGroup,u=this._labelGroup,c=a.viewRect;if(a.orient==="vertical"){var p=create$1(),d=c.x,x=c.y+c.height;translate(p,p,[-d,-x]),rotate(p,p,-PI/2),translate(p,p,[d,x]),c=c.clone(),c.applyTransform(p)}var _=z(c),S=z(l.getBoundingRect()),T=z(u.getBoundingRect()),A=[l.x,l.y],R=[u.x,u.y];R[0]=A[0]=_[0][0];var D=a.labelPosOpt;if(D==null||isString$1(D)){var O=D==="+"?0:1;j(A,S,_,1,O),j(R,T,_,1,1-O)}else{var O=D>=0?0:1;j(A,S,_,1,O),R[1]=A[1]+D}l.setPosition(A),u.setPosition(R),l.rotation=u.rotation=a.rotation,F(l),F(u);function F(Z){Z.originX=_[0][0]-Z.x,Z.originY=_[1][0]-Z.y}function z(Z){return[[Z.x,Z.x+Z.width],[Z.y,Z.y+Z.height]]}function j(Z,W,J,en,tn){Z[en]+=J[en][tn]-W[en][tn]}},n.prototype._createAxis=function(a,s){var l=s.getData(),u=s.get("axisType"),c=createScaleByModel(s,u);c.getTicks=function(){return l.mapArray(["value"],function(x){return{value:x}})};var p=l.getDataExtent("value");c.setExtent(p[0],p[1]),c.calcNiceTicks();var d=new TimelineAxis("value",c,a.axisExtent,u);return d.model=s,d},n.prototype._createGroup=function(a){var s=this[a]=new Group$3;return this.group.add(s),s},n.prototype._renderAxisLine=function(a,s,l,u){var c=l.getExtent();if(u.get(["lineStyle","show"])){var p=new Line$1({shape:{x1:c[0],y1:0,x2:c[1],y2:0},style:extend({lineCap:"round"},u.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});s.add(p);var d=this._progressLine=new Line$1({shape:{x1:c[0],x2:this._currentPointer?this._currentPointer.x:c[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:p.style.lineWidth},u.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});s.add(d)}},n.prototype._renderAxisTick=function(a,s,l,u){var c=this,p=u.getData(),d=l.scale.getTicks();this._tickSymbols=[],each$f(d,function(x){var _=l.dataToCoord(x.value),S=p.getItemModel(x.value),T=S.getModel("itemStyle"),A=S.getModel(["emphasis","itemStyle"]),R=S.getModel(["progress","itemStyle"]),D={x:_,y:0,onclick:bind$1(c._changeTimeline,c,x.value)},O=giveSymbol(S,T,s,D);O.ensureState("emphasis").style=A.getItemStyle(),O.ensureState("progress").style=R.getItemStyle(),enableHoverEmphasis(O);var F=getECData(O);S.get("tooltip")?(F.dataIndex=x.value,F.dataModel=u):F.dataIndex=F.dataModel=null,c._tickSymbols.push(O)})},n.prototype._renderAxisLabel=function(a,s,l,u){var c=this,p=l.getLabelModel();if(p.get("show")){var d=u.getData(),x=l.getViewLabels();this._tickLabels=[],each$f(x,function(_){var S=_.tickValue,T=d.getItemModel(S),A=T.getModel("label"),R=T.getModel(["emphasis","label"]),D=T.getModel(["progress","label"]),O=l.dataToCoord(_.tickValue),F=new ZRText({x:O,y:0,rotation:a.labelRotation-a.rotation,onclick:bind$1(c._changeTimeline,c,S),silent:!1,style:createTextStyle$1(A,{text:_.formattedLabel,align:a.labelAlign,verticalAlign:a.labelBaseline})});F.ensureState("emphasis").style=createTextStyle$1(R),F.ensureState("progress").style=createTextStyle$1(D),s.add(F),enableHoverEmphasis(F),labelDataIndexStore(F).dataIndex=S,c._tickLabels.push(F)})}},n.prototype._renderControl=function(a,s,l,u){var c=a.controlSize,p=a.rotation,d=u.getModel("controlStyle").getItemStyle(),x=u.getModel(["emphasis","controlStyle"]).getItemStyle(),_=u.getPlayState(),S=u.get("inverse",!0);T(a.nextBtnPosition,"next",bind$1(this._changeTimeline,this,S?"-":"+")),T(a.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,S?"+":"-")),T(a.playPosition,_?"stop":"play",bind$1(this._handlePlayClick,this,!_),!0);function T(A,R,D,O){if(A){var F=parsePercent$1(retrieve2(u.get(["controlStyle",R+"BtnSize"]),c),c),z=[0,-F/2,F,F],j=makeControlIcon(u,R+"Icon",z,{x:A[0],y:A[1],originX:c/2,originY:0,rotation:O?-p:0,rectHover:!0,style:d,onclick:D});j.ensureState("emphasis").style=x,s.add(j),enableHoverEmphasis(j)}}},n.prototype._renderCurrentPointer=function(a,s,l,u){var c=u.getData(),p=u.getCurrentIndex(),d=c.getItemModel(p).getModel("checkpointStyle"),x=this,_={onCreate:function(S){S.draggable=!0,S.drift=bind$1(x._handlePointerDrag,x),S.ondragend=bind$1(x._handlePointerDragend,x),pointerMoveTo(S,x._progressLine,p,l,u,!0)},onUpdate:function(S){pointerMoveTo(S,x._progressLine,p,l,u)}};this._currentPointer=giveSymbol(d,d,this._mainGroup,{},this._currentPointer,_)},n.prototype._handlePlayClick=function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},n.prototype._handlePointerDrag=function(a,s,l){this._clearTimer(),this._pointerChangeTimeline([l.offsetX,l.offsetY])},n.prototype._handlePointerDragend=function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},n.prototype._pointerChangeTimeline=function(a,s){var l=this._toAxisCoord(a)[0],u=this._axis,c=asc$2(u.getExtent().slice());l>c[1]&&(l=c[1]),l<c[0]&&(l=c[0]),this._currentPointer.x=l,this._currentPointer.markRedraw();var p=this._progressLine;p&&(p.shape.x2=l,p.dirty());var d=this._findNearestTick(l),x=this.model;(s||d!==x.getCurrentIndex()&&x.get("realtime"))&&this._changeTimeline(d)},n.prototype._doPlayStop=function(){var a=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var s=a.model;a._changeTimeline(s.getCurrentIndex()+(s.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},n.prototype._toAxisCoord=function(a){var s=this._mainGroup.getLocalTransform();return applyTransform(a,s,!0)},n.prototype._findNearestTick=function(a){var s=this.model.getData(),l=1/0,u,c=this._axis;return s.each(["value"],function(p,d){var x=c.dataToCoord(p),_=Math.abs(x-a);_<l&&(l=_,u=d)}),u},n.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},n.prototype._changeTimeline=function(a){var s=this.model.getCurrentIndex();a==="+"?a=s+1:a==="-"&&(a=s-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})},n.prototype._updateTicksStatus=function(){var a=this.model.getCurrentIndex(),s=this._tickSymbols,l=this._tickLabels;if(s)for(var u=0;u<s.length;u++)s&&s[u]&&s[u].toggleState("progress",u<a);if(l)for(var u=0;u<l.length;u++)l&&l[u]&&l[u].toggleState("progress",labelDataIndexStore(l[u]).dataIndex<=a)},n.type="timeline.slider",n}(TimelineView);function createScaleByModel(t,n){if(n=n||t.get("type"),n)switch(n){case"category":return new OrdinalScale({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new IntervalScale}}function getViewRect(t,n){return getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()},t.get("padding"))}function makeControlIcon(t,n,a,s){var l=s.style,u=createIcon(t.get(["controlStyle",n]),s||{},new BoundingRect(a[0],a[1],a[2],a[3]));return l&&u.setStyle(l),u}function giveSymbol(t,n,a,s,l,u){var c=n.get("color");if(l)l.setColor(c),a.add(l),u&&u.onUpdate(l);else{var p=t.get("symbol");l=createSymbol$1(p,-1,-1,2,2,c),l.setStyle("strokeNoScale",!0),a.add(l),u&&u.onCreate(l)}var d=n.getItemStyle(["color"]);l.setStyle(d),s=merge({rectHover:!0,z2:100},s,!0);var x=normalizeSymbolSize(t.get("symbolSize"));s.scaleX=x[0]/2,s.scaleY=x[1]/2;var _=normalizeSymbolOffset(t.get("symbolOffset"),x);_&&(s.x=(s.x||0)+_[0],s.y=(s.y||0)+_[1]);var S=t.get("symbolRotate");return s.rotation=(S||0)*Math.PI/180||0,l.attr(s),l.updateTransform(),l}function pointerMoveTo(t,n,a,s,l,u){if(!t.dragging){var c=l.getModel("checkpointStyle"),p=s.dataToCoord(l.getData().get("value",a));if(u||!c.get("animation",!0))t.attr({x:p,y:0}),n&&n.attr({shape:{x2:p}});else{var d={duration:c.get("animationDuration",!0),easing:c.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:p,y:0},d),n&&n.animateTo({shape:{x2:p}},d)}}}function installTimelineAction(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(n,a,s){var l=a.getComponent("timeline");return l&&n.currentIndex!=null&&(l.setCurrentIndex(n.currentIndex),!l.get("loop",!0)&&l.isIndexMax()&&l.getPlayState()&&(l.setPlayState(!1),s.dispatchAction({type:"timelinePlayChange",playState:!1,from:n.from}))),a.resetOption("timeline",{replaceMerge:l.get("replaceMerge",!0)}),defaults({currentIndex:l.option.currentIndex},n)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(n,a){var s=a.getComponent("timeline");s&&n.playState!=null&&s.setPlayState(n.playState)})}function timelinePreprocessor(t){var n=t&&t.timeline;isArray$1(n)||(n=n?[n]:[]),each$f(n,function(a){a&&compatibleEC2(a)})}function compatibleEC2(t){var n=t.type,a={number:"value",time:"time"};if(a[n]&&(t.axisType=a[n],delete t.type),transferItem(t),has$1(t,"controlPosition")){var s=t.controlStyle||(t.controlStyle={});has$1(s,"position")||(s.position=t.controlPosition),s.position==="none"&&!has$1(s,"show")&&(s.show=!1,delete s.position),delete t.controlPosition}each$f(t.data||[],function(l){isObject$3(l)&&!isArray$1(l)&&(!has$1(l,"value")&&has$1(l,"name")&&(l.value=l.name),transferItem(l))})}function transferItem(t){var n=t.itemStyle||(t.itemStyle={}),a=n.emphasis||(n.emphasis={}),s=t.label||t.label||{},l=s.normal||(s.normal={}),u={normal:1,emphasis:1};each$f(s,function(c,p){!u[p]&&!has$1(l,p)&&(l[p]=c)}),a.label&&!has$1(s,"emphasis")&&(s.emphasis=a.label,delete a.label)}function has$1(t,n){return t.hasOwnProperty(n)}function install$f(t){t.registerComponentModel(SliderTimelineModel),t.registerComponentView(SliderTimelineView),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(t),t.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(t,n){if(!t)return!1;for(var a=isArray$1(t)?t:[t],s=0;s<a.length;s++)if(a[s]&&a[s][n])return!0;return!1}function fillLabel(t){defaultEmphasis(t,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.createdBySelf=!1,a}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l),this._mergeOption(a,l,!1,!0)},n.prototype.isAnimationEnabled=function(){if(env.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},n.prototype.mergeOption=function(a,s){this._mergeOption(a,s,!1,!1)},n.prototype._mergeOption=function(a,s,l,u){var c=this.mainType;l||s.eachSeries(function(p){var d=p.get(this.mainType,!0),x=inner$5(p)[c];if(!d||!d.data){inner$5(p)[c]=null;return}x?x._mergeOption(d,s,!0):(u&&fillLabel(d),each$f(d.data,function(_){_ instanceof Array?(fillLabel(_[0]),fillLabel(_[1])):fillLabel(_)}),x=this.createMarkerModelFromSeries(d,this,s),extend(x,{mainType:this.mainType,seriesIndex:p.seriesIndex,name:p.name,createdBySelf:!0}),x.__hostSeries=p),inner$5(p)[c]=x},this)},n.prototype.formatTooltip=function(a,s,l){var u=this.getData(),c=this.getRawValue(a),p=u.getName(a);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:p,value:c,noName:!p,noValue:c==null})]})},n.prototype.getData=function(){return this._data},n.prototype.setData=function(a){this._data=a},n.prototype.getDataParams=function(a,s){var l=DataFormatMixin.prototype.getDataParams.call(this,a,s),u=this.__hostSeries;return u&&(l.seriesId=u.id,l.seriesName=u.name,l.seriesType=u.subType),l},n.getMarkerModelFromSeries=function(a,s){return inner$5(a)[s]},n.type="marker",n.dependencies=["series","grid","polar","geo"],n}(ComponentModel);mixin(MarkerModel,DataFormatMixin.prototype);var MarkPointModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.createMarkerModelFromSeries=function(a,s,l){return new n(a,s,l)},n.type="markPoint",n.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},n}(MarkerModel);function hasXOrY(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function hasXAndY(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function markerTypeCalculatorWithExtent(t,n,a,s,l,u){var c=[],p=isDimensionStacked(n,s),d=p?n.getCalculationInfo("stackResultDimension"):s,x=numCalculate(n,d,t),_=n.indicesOfNearest(d,x)[0];c[l]=n.get(a,_),c[u]=n.get(d,_);var S=n.get(s,_),T=getPrecision(n.get(s,_));return T=Math.min(T,20),T>=0&&(c[u]=+c[u].toFixed(T)),[c,S]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(t,n){if(n){var a=t.getData(),s=t.coordinateSystem,l=s&&s.dimensions;if(!hasXAndY(n)&&!isArray$1(n.coord)&&isArray$1(l)){var u=getAxisInfo(n,a,s,t);if(n=clone$4(n),n.type&&markerTypeCalculator[n.type]&&u.baseAxis&&u.valueAxis){var c=indexOf(l,u.baseAxis.dim),p=indexOf(l,u.valueAxis.dim),d=markerTypeCalculator[n.type](a,u.baseDataDim,u.valueDataDim,c,p);n.coord=d[0],n.value=d[1]}else n.coord=[n.xAxis!=null?n.xAxis:n.radiusAxis,n.yAxis!=null?n.yAxis:n.angleAxis]}if(n.coord==null||!isArray$1(l))n.coord=[];else for(var x=n.coord,_=0;_<2;_++)markerTypeCalculator[x[_]]&&(x[_]=numCalculate(a,a.mapDimension(l[_]),x[_]));return n}}function getAxisInfo(t,n,a,s){var l={};return t.valueIndex!=null||t.valueDim!=null?(l.valueDataDim=t.valueIndex!=null?n.getDimension(t.valueIndex):t.valueDim,l.valueAxis=a.getAxis(dataDimToCoordDim(s,l.valueDataDim)),l.baseAxis=a.getOtherAxis(l.valueAxis),l.baseDataDim=n.mapDimension(l.baseAxis.dim)):(l.baseAxis=s.getBaseAxis(),l.valueAxis=a.getOtherAxis(l.baseAxis),l.baseDataDim=n.mapDimension(l.baseAxis.dim),l.valueDataDim=n.mapDimension(l.valueAxis.dim)),l}function dataDimToCoordDim(t,n){var a=t.getData().getDimensionInfo(n);return a&&a.coordDim}function dataFilter(t,n){return t&&t.containData&&n.coord&&!hasXOrY(n)?t.containData(n.coord):!0}function zoneFilter(t,n,a){return t&&t.containZone&&n.coord&&a.coord&&!hasXOrY(n)&&!hasXOrY(a)?t.containZone(n.coord,a.coord):!0}function createMarkerDimValueGetter(t,n){return t?function(a,s,l,u){var c=u<2?a.coord&&a.coord[u]:a.value;return parseDataValue(c,n[u])}:function(a,s,l,u){return parseDataValue(a.value,n[u])}}function numCalculate(t,n,a){if(a==="average"){var s=0,l=0;return t.each(n,function(u,c){isNaN(u)||(s+=u,l++)}),s/l}else return a==="median"?t.getMedian(n):t.getDataExtent(n)[a==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){this.markerGroupMap=createHashMap()},n.prototype.render=function(a,s,l){var u=this,c=this.markerGroupMap;c.each(function(p){inner$4(p).keep=!1}),s.eachSeries(function(p){var d=MarkerModel.getMarkerModelFromSeries(p,u.type);d&&u.renderSeries(p,d,s,l)}),c.each(function(p){!inner$4(p).keep&&u.group.remove(p.group)})},n.prototype.markKeep=function(a){inner$4(a).keep=!0},n.prototype.toggleBlurSeries=function(a,s){var l=this;each$f(a,function(u){var c=MarkerModel.getMarkerModelFromSeries(u,l.type);if(c){var p=c.getData();p.eachItemGraphicEl(function(d){d&&(s?enterBlur(d):leaveBlur(d))})}})},n.type="marker",n}(ComponentView);function updateMarkerLayout(t,n,a){var s=n.coordinateSystem;t.each(function(l){var u=t.getItemModel(l),c,p=parsePercent(u.get("x"),a.getWidth()),d=parsePercent(u.get("y"),a.getHeight());if(!isNaN(p)&&!isNaN(d))c=[p,d];else if(n.getMarkerPosition)c=n.getMarkerPosition(t.getValues(t.dimensions,l));else if(s){var x=t.get(s.dimensions[0],l),_=t.get(s.dimensions[1],l);c=s.dataToPoint([x,_])}isNaN(p)||(c[0]=p),isNaN(d)||(c[1]=d),t.setItemLayout(l,c)})}var MarkPointView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.updateTransform=function(a,s,l){s.eachSeries(function(u){var c=MarkerModel.getMarkerModelFromSeries(u,"markPoint");c&&(updateMarkerLayout(c.getData(),u,l),this.markerGroupMap.get(u.id).updateLayout())},this)},n.prototype.renderSeries=function(a,s,l,u){var c=a.coordinateSystem,p=a.id,d=a.getData(),x=this.markerGroupMap,_=x.get(p)||x.set(p,new SymbolDraw),S=createData(c,a,s);s.setData(S),updateMarkerLayout(s.getData(),a,u),S.each(function(T){var A=S.getItemModel(T),R=A.getShallow("symbol"),D=A.getShallow("symbolSize"),O=A.getShallow("symbolRotate"),F=A.getShallow("symbolOffset"),z=A.getShallow("symbolKeepAspect");if(isFunction$1(R)||isFunction$1(D)||isFunction$1(O)||isFunction$1(F)){var j=s.getRawValue(T),Z=s.getDataParams(T);isFunction$1(R)&&(R=R(j,Z)),isFunction$1(D)&&(D=D(j,Z)),isFunction$1(O)&&(O=O(j,Z)),isFunction$1(F)&&(F=F(j,Z))}var W=A.getModel("itemStyle").getItemStyle(),J=getVisualFromData(d,"color");W.fill||(W.fill=J),S.setItemVisual(T,{symbol:R,symbolSize:D,symbolRotate:O,symbolOffset:F,symbolKeepAspect:z,style:W})}),_.updateData(S),this.group.add(_.group),S.eachItemGraphicEl(function(T){T.traverse(function(A){getECData(A).dataModel=s})}),this.markKeep(_),_.group.silent=s.get("silent")||a.get("silent")},n.type="markPoint",n}(MarkerView);function createData(t,n,a){var s;t?s=map$1(t&&t.dimensions,function(p){var d=n.getData().getDimensionInfo(n.getData().mapDimension(p))||{};return extend(extend({},d),{name:p,ordinalMeta:null})}):s=[{name:"value",type:"float"}];var l=new SeriesData(s,a),u=map$1(a.get("data"),curry$1(dataTransform,n));t&&(u=filter(u,curry$1(dataFilter,t)));var c=createMarkerDimValueGetter(!!t,s);return l.initData(u,null,c),l}function install$e(t){t.registerComponentModel(MarkPointModel),t.registerComponentView(MarkPointView),t.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markPoint")&&(n.markPoint=n.markPoint||{})})}var MarkLineModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.createMarkerModelFromSeries=function(a,s,l){return new n(a,s,l)},n.type="markLine",n.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},n}(MarkerModel),inner$3=makeInner(),markLineTransform=function(t,n,a,s){var l=t.getData(),u;if(isArray$1(s))u=s;else{var c=s.type;if(c==="min"||c==="max"||c==="average"||c==="median"||s.xAxis!=null||s.yAxis!=null){var p=void 0,d=void 0;if(s.yAxis!=null||s.xAxis!=null)p=n.getAxis(s.yAxis!=null?"y":"x"),d=retrieve(s.yAxis,s.xAxis);else{var x=getAxisInfo(s,l,n,t);p=x.valueAxis;var _=getStackedDimension(l,x.valueDataDim);d=numCalculate(l,_,c)}var S=p.dim==="x"?0:1,T=1-S,A=clone$4(s),R={coord:[]};A.type=null,A.coord=[],A.coord[T]=-1/0,R.coord[T]=1/0;var D=a.get("precision");D>=0&&isNumber(d)&&(d=+d.toFixed(Math.min(D,20))),A.coord[S]=R.coord[S]=d,u=[A,R,{type:c,valueIndex:s.valueIndex,value:d}]}else u=[]}var O=[dataTransform(t,u[0]),dataTransform(t,u[1]),extend({},u[2])];return O[2].type=O[2].type||null,merge(O[2],O[0]),merge(O[2],O[1]),O};function isInfinity$1(t){return!isNaN(t)&&!isFinite(t)}function ifMarkLineHasOnlyDim(t,n,a,s){var l=1-t,u=s.dimensions[t];return isInfinity$1(n[l])&&isInfinity$1(a[l])&&n[t]===a[t]&&s.getAxis(u).containData(n[t])}function markLineFilter(t,n){if(t.type==="cartesian2d"){var a=n[0].coord,s=n[1].coord;if(a&&s&&(ifMarkLineHasOnlyDim(1,a,s,t)||ifMarkLineHasOnlyDim(0,a,s,t)))return!0}return dataFilter(t,n[0])&&dataFilter(t,n[1])}function updateSingleMarkerEndLayout(t,n,a,s,l){var u=s.coordinateSystem,c=t.getItemModel(n),p,d=parsePercent(c.get("x"),l.getWidth()),x=parsePercent(c.get("y"),l.getHeight());if(!isNaN(d)&&!isNaN(x))p=[d,x];else{if(s.getMarkerPosition)p=s.getMarkerPosition(t.getValues(t.dimensions,n));else{var _=u.dimensions,S=t.get(_[0],n),T=t.get(_[1],n);p=u.dataToPoint([S,T])}if(isCoordinateSystemType(u,"cartesian2d")){var A=u.getAxis("x"),R=u.getAxis("y"),_=u.dimensions;isInfinity$1(t.get(_[0],n))?p[0]=A.toGlobalCoord(A.getExtent()[a?0:1]):isInfinity$1(t.get(_[1],n))&&(p[1]=R.toGlobalCoord(R.getExtent()[a?0:1]))}isNaN(d)||(p[0]=d),isNaN(x)||(p[1]=x)}t.setItemLayout(n,p)}var MarkLineView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.updateTransform=function(a,s,l){s.eachSeries(function(u){var c=MarkerModel.getMarkerModelFromSeries(u,"markLine");if(c){var p=c.getData(),d=inner$3(c).from,x=inner$3(c).to;d.each(function(_){updateSingleMarkerEndLayout(d,_,!0,u,l),updateSingleMarkerEndLayout(x,_,!1,u,l)}),p.each(function(_){p.setItemLayout(_,[d.getItemLayout(_),x.getItemLayout(_)])}),this.markerGroupMap.get(u.id).updateLayout()}},this)},n.prototype.renderSeries=function(a,s,l,u){var c=a.coordinateSystem,p=a.id,d=a.getData(),x=this.markerGroupMap,_=x.get(p)||x.set(p,new LineDraw);this.group.add(_.group);var S=createList$1(c,a,s),T=S.from,A=S.to,R=S.line;inner$3(s).from=T,inner$3(s).to=A,s.setData(R);var D=s.get("symbol"),O=s.get("symbolSize"),F=s.get("symbolRotate"),z=s.get("symbolOffset");isArray$1(D)||(D=[D,D]),isArray$1(O)||(O=[O,O]),isArray$1(F)||(F=[F,F]),isArray$1(z)||(z=[z,z]),S.from.each(function(Z){j(T,Z,!0),j(A,Z,!1)}),R.each(function(Z){var W=R.getItemModel(Z).getModel("lineStyle").getLineStyle();R.setItemLayout(Z,[T.getItemLayout(Z),A.getItemLayout(Z)]),W.stroke==null&&(W.stroke=T.getItemVisual(Z,"style").fill),R.setItemVisual(Z,{fromSymbolKeepAspect:T.getItemVisual(Z,"symbolKeepAspect"),fromSymbolOffset:T.getItemVisual(Z,"symbolOffset"),fromSymbolRotate:T.getItemVisual(Z,"symbolRotate"),fromSymbolSize:T.getItemVisual(Z,"symbolSize"),fromSymbol:T.getItemVisual(Z,"symbol"),toSymbolKeepAspect:A.getItemVisual(Z,"symbolKeepAspect"),toSymbolOffset:A.getItemVisual(Z,"symbolOffset"),toSymbolRotate:A.getItemVisual(Z,"symbolRotate"),toSymbolSize:A.getItemVisual(Z,"symbolSize"),toSymbol:A.getItemVisual(Z,"symbol"),style:W})}),_.updateData(R),S.line.eachItemGraphicEl(function(Z){getECData(Z).dataModel=s,Z.traverse(function(W){getECData(W).dataModel=s})});function j(Z,W,J){var en=Z.getItemModel(W);updateSingleMarkerEndLayout(Z,W,J,a,u);var tn=en.getModel("itemStyle").getItemStyle();tn.fill==null&&(tn.fill=getVisualFromData(d,"color")),Z.setItemVisual(W,{symbolKeepAspect:en.get("symbolKeepAspect"),symbolOffset:retrieve2(en.get("symbolOffset",!0),z[J?0:1]),symbolRotate:retrieve2(en.get("symbolRotate",!0),F[J?0:1]),symbolSize:retrieve2(en.get("symbolSize"),O[J?0:1]),symbol:retrieve2(en.get("symbol",!0),D[J?0:1]),style:tn})}this.markKeep(_),_.group.silent=s.get("silent")||a.get("silent")},n.type="markLine",n}(MarkerView);function createList$1(t,n,a){var s;t?s=map$1(t&&t.dimensions,function(x){var _=n.getData().getDimensionInfo(n.getData().mapDimension(x))||{};return extend(extend({},_),{name:x,ordinalMeta:null})}):s=[{name:"value",type:"float"}];var l=new SeriesData(s,a),u=new SeriesData(s,a),c=new SeriesData([],a),p=map$1(a.get("data"),curry$1(markLineTransform,n,t,a));t&&(p=filter(p,curry$1(markLineFilter,t)));var d=createMarkerDimValueGetter(!!t,s);return l.initData(map$1(p,function(x){return x[0]}),null,d),u.initData(map$1(p,function(x){return x[1]}),null,d),c.initData(map$1(p,function(x){return x[2]})),c.hasItemOption=!0,{from:l,to:u,line:c}}function install$d(t){t.registerComponentModel(MarkLineModel),t.registerComponentView(MarkLineView),t.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markLine")&&(n.markLine=n.markLine||{})})}var MarkAreaModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.createMarkerModelFromSeries=function(a,s,l){return new n(a,s,l)},n.type="markArea",n.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},n}(MarkerModel),inner$2=makeInner(),markAreaTransform=function(t,n,a,s){var l=s[0],u=s[1];if(!(!l||!u)){var c=dataTransform(t,l),p=dataTransform(t,u),d=c.coord,x=p.coord;d[0]=retrieve(d[0],-1/0),d[1]=retrieve(d[1],-1/0),x[0]=retrieve(x[0],1/0),x[1]=retrieve(x[1],1/0);var _=mergeAll([{},c,p]);return _.coord=[c.coord,p.coord],_.x0=c.x,_.y0=c.y,_.x1=p.x,_.y1=p.y,_}};function isInfinity(t){return!isNaN(t)&&!isFinite(t)}function ifMarkAreaHasOnlyDim(t,n,a,s){var l=1-t;return isInfinity(n[l])&&isInfinity(a[l])}function markAreaFilter(t,n){var a=n.coord[0],s=n.coord[1],l={coord:a,x:n.x0,y:n.y0},u={coord:s,x:n.x1,y:n.y1};return isCoordinateSystemType(t,"cartesian2d")?a&&s&&(ifMarkAreaHasOnlyDim(1,a,s)||ifMarkAreaHasOnlyDim(0,a,s))?!0:zoneFilter(t,l,u):dataFilter(t,l)||dataFilter(t,u)}function getSingleMarkerEndPoint(t,n,a,s,l){var u=s.coordinateSystem,c=t.getItemModel(n),p,d=parsePercent(c.get(a[0]),l.getWidth()),x=parsePercent(c.get(a[1]),l.getHeight());if(!isNaN(d)&&!isNaN(x))p=[d,x];else{if(s.getMarkerPosition){var _=t.getValues(["x0","y0"],n),S=t.getValues(["x1","y1"],n),T=u.clampData(_),A=u.clampData(S),R=[];a[0]==="x0"?R[0]=T[0]>A[0]?S[0]:_[0]:R[0]=T[0]>A[0]?_[0]:S[0],a[1]==="y0"?R[1]=T[1]>A[1]?S[1]:_[1]:R[1]=T[1]>A[1]?_[1]:S[1],p=s.getMarkerPosition(R,a,!0)}else{var D=t.get(a[0],n),O=t.get(a[1],n),F=[D,O];u.clampData&&u.clampData(F,F),p=u.dataToPoint(F,!0)}if(isCoordinateSystemType(u,"cartesian2d")){var z=u.getAxis("x"),j=u.getAxis("y"),D=t.get(a[0],n),O=t.get(a[1],n);isInfinity(D)?p[0]=z.toGlobalCoord(z.getExtent()[a[0]==="x0"?0:1]):isInfinity(O)&&(p[1]=j.toGlobalCoord(j.getExtent()[a[1]==="y0"?0:1]))}isNaN(d)||(p[0]=d),isNaN(x)||(p[1]=x)}return p}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.updateTransform=function(a,s,l){s.eachSeries(function(u){var c=MarkerModel.getMarkerModelFromSeries(u,"markArea");if(c){var p=c.getData();p.each(function(d){var x=map$1(dimPermutations,function(S){return getSingleMarkerEndPoint(p,d,S,u,l)});p.setItemLayout(d,x);var _=p.getItemGraphicEl(d);_.setShape("points",x)})}},this)},n.prototype.renderSeries=function(a,s,l,u){var c=a.coordinateSystem,p=a.id,d=a.getData(),x=this.markerGroupMap,_=x.get(p)||x.set(p,{group:new Group$3});this.group.add(_.group),this.markKeep(_);var S=createList(c,a,s);s.setData(S),S.each(function(T){var A=map$1(dimPermutations,function(tn){return getSingleMarkerEndPoint(S,T,tn,a,u)}),R=c.getAxis("x").scale,D=c.getAxis("y").scale,O=R.getExtent(),F=D.getExtent(),z=[R.parse(S.get("x0",T)),R.parse(S.get("x1",T))],j=[D.parse(S.get("y0",T)),D.parse(S.get("y1",T))];asc$2(z),asc$2(j);var Z=!(O[0]>z[1]||O[1]<z[0]||F[0]>j[1]||F[1]<j[0]),W=!Z;S.setItemLayout(T,{points:A,allClipped:W});var J=S.getItemModel(T).getModel("itemStyle").getItemStyle(),en=getVisualFromData(d,"color");J.fill||(J.fill=en,isString$1(J.fill)&&(J.fill=modifyAlpha(J.fill,.4))),J.stroke||(J.stroke=en),S.setItemVisual(T,"style",J)}),S.diff(inner$2(_).data).add(function(T){var A=S.getItemLayout(T);if(!A.allClipped){var R=new Polygon({shape:{points:A.points}});S.setItemGraphicEl(T,R),_.group.add(R)}}).update(function(T,A){var R=inner$2(_).data.getItemGraphicEl(A),D=S.getItemLayout(T);D.allClipped?R&&_.group.remove(R):(R?updateProps$1(R,{shape:{points:D.points}},s,T):R=new Polygon({shape:{points:D.points}}),S.setItemGraphicEl(T,R),_.group.add(R))}).remove(function(T){var A=inner$2(_).data.getItemGraphicEl(T);_.group.remove(A)}).execute(),S.eachItemGraphicEl(function(T,A){var R=S.getItemModel(A),D=S.getItemVisual(A,"style");T.useStyle(S.getItemVisual(A,"style")),setLabelStyle(T,getLabelStatesModels(R),{labelFetcher:s,labelDataIndex:A,defaultText:S.getName(A)||"",inheritColor:isString$1(D.fill)?modifyAlpha(D.fill,1):"#000"}),setStatesStylesFromModel(T,R),toggleHoverEmphasis(T,null,null,R.get(["emphasis","disabled"])),getECData(T).dataModel=s}),inner$2(_).data=S,_.group.silent=s.get("silent")||a.get("silent")},n.type="markArea",n}(MarkerView);function createList(t,n,a){var s,l,u=["x0","y0","x1","y1"];if(t){var c=map$1(t&&t.dimensions,function(x){var _=n.getData(),S=_.getDimensionInfo(_.mapDimension(x))||{};return extend(extend({},S),{name:x,ordinalMeta:null})});l=map$1(u,function(x,_){return{name:x,type:c[_%2].type}}),s=new SeriesData(l,a)}else l=[{name:"value",type:"float"}],s=new SeriesData(l,a);var p=map$1(a.get("data"),curry$1(markAreaTransform,n,t,a));t&&(p=filter(p,curry$1(markAreaFilter,t)));var d=t?function(x,_,S,T){var A=x.coord[Math.floor(T/2)][T%2];return parseDataValue(A,l[T])}:function(x,_,S,T){return parseDataValue(x.value,l[T])};return s.initData(p,null,d),s.hasItemOption=!0,s}function install$c(t){t.registerComponentModel(MarkAreaModel),t.registerComponentView(MarkAreaView),t.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markArea")&&(n.markArea=n.markArea||{})})}var getDefaultSelectorOptions=function(t,n){if(n==="all")return{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])};if(n==="inverse")return{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.layoutMode={type:"box",ignoreSize:!0},a}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l),a.selected=a.selected||{},this._updateSelector(a)},n.prototype.mergeOption=function(a,s){t.prototype.mergeOption.call(this,a,s),this._updateSelector(a)},n.prototype._updateSelector=function(a){var s=a.selector,l=this.ecModel;s===!0&&(s=a.selector=["all","inverse"]),isArray$1(s)&&each$f(s,function(u,c){isString$1(u)&&(u={type:u}),s[c]=merge(u,getDefaultSelectorOptions(l,u.type))})},n.prototype.optionUpdated=function(){this._updateData(this.ecModel);var a=this._data;if(a[0]&&this.get("selectedMode")==="single"){for(var s=!1,l=0;l<a.length;l++){var u=a[l].get("name");if(this.isSelected(u)){this.select(u),s=!0;break}}!s&&this.select(a[0].get("name"))}},n.prototype._updateData=function(a){var s=[],l=[];a.eachRawSeries(function(d){var x=d.name;l.push(x);var _;if(d.legendVisualProvider){var S=d.legendVisualProvider,T=S.getAllNames();a.isSeriesFiltered(d)||(l=l.concat(T)),T.length?s=s.concat(T):_=!0}else _=!0;_&&isNameSpecified(d)&&s.push(d.name)}),this._availableNames=l;var u=this.get("data")||s,c=createHashMap(),p=map$1(u,function(d){return(isString$1(d)||isNumber(d))&&(d={name:d}),c.get(d.name)?null:(c.set(d.name,!0),new Model(d,this,this.ecModel))},this);this._data=filter(p,function(d){return!!d})},n.prototype.getData=function(){return this._data},n.prototype.select=function(a){var s=this.option.selected,l=this.get("selectedMode");if(l==="single"){var u=this._data;each$f(u,function(c){s[c.get("name")]=!1})}s[a]=!0},n.prototype.unSelect=function(a){this.get("selectedMode")!=="single"&&(this.option.selected[a]=!1)},n.prototype.toggleSelected=function(a){var s=this.option.selected;s.hasOwnProperty(a)||(s[a]=!0),this[s[a]?"unSelect":"select"](a)},n.prototype.allSelect=function(){var a=this._data,s=this.option.selected;each$f(a,function(l){s[l.get("name",!0)]=!0})},n.prototype.inverseSelect=function(){var a=this._data,s=this.option.selected;each$f(a,function(l){var u=l.get("name",!0);s.hasOwnProperty(u)||(s[u]=!0),s[u]=!s[u]})},n.prototype.isSelected=function(a){var s=this.option.selected;return!(s.hasOwnProperty(a)&&!s[a])&&indexOf(this._availableNames,a)>=0},n.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},n.type="legend.plain",n.dependencies=["series"],n.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},n}(ComponentModel),curry=curry$1,each$3=each$f,Group$1=Group$3,LegendView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.newlineDisabled=!1,a}return n.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},n.prototype.getContentGroup=function(){return this._contentGroup},n.prototype.getSelectorGroup=function(){return this._selectorGroup},n.prototype.render=function(a,s,l){var u=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!a.get("show",!0)){var c=a.get("align"),p=a.get("orient");(!c||c==="auto")&&(c=a.get("left")==="right"&&p==="vertical"?"right":"left");var d=a.get("selector",!0),x=a.get("selectorPosition",!0);d&&(!x||x==="auto")&&(x=p==="horizontal"?"end":"start"),this.renderInner(c,a,s,l,d,p,x);var _=a.getBoxLayoutParams(),S={width:l.getWidth(),height:l.getHeight()},T=a.get("padding"),A=getLayoutRect(_,S,T),R=this.layoutInner(a,c,A,u,d,x),D=getLayoutRect(defaults({width:R.width,height:R.height},_),S,T);this.group.x=D.x-R.x,this.group.y=D.y-R.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(R,a))}},n.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},n.prototype.renderInner=function(a,s,l,u,c,p,d){var x=this.getContentGroup(),_=createHashMap(),S=s.get("selectedMode"),T=[];l.eachRawSeries(function(A){!A.get("legendHoverLink")&&T.push(A.id)}),each$3(s.getData(),function(A,R){var D=A.get("name");if(!this.newlineDisabled&&(D===""||D===`
`)){var O=new Group$1;O.newline=!0,x.add(O);return}var F=l.getSeriesByName(D)[0];if(!_.get(D))if(F){var z=F.getData(),j=z.getVisual("legendLineStyle")||{},Z=z.getVisual("legendIcon"),W=z.getVisual("style"),J=this._createItem(F,D,R,A,s,a,j,W,Z,S,u);J.on("click",curry(dispatchSelectAction,D,null,u,T)).on("mouseover",curry(dispatchHighlightAction,F.name,null,u,T)).on("mouseout",curry(dispatchDownplayAction,F.name,null,u,T)),l.ssr&&J.eachChild(function(en){var tn=getECData(en);tn.seriesIndex=F.seriesIndex,tn.dataIndex=R,tn.ssrType="legend"}),_.set(D,!0)}else l.eachRawSeries(function(en){if(!_.get(D)&&en.legendVisualProvider){var tn=en.legendVisualProvider;if(!tn.containName(D))return;var Ct=tn.indexOfName(D),Q=tn.getItemVisual(Ct,"style"),on=tn.getItemVisual(Ct,"legendIcon"),gn=parse(Q.fill);gn&&gn[3]===0&&(gn[3]=.2,Q=extend(extend({},Q),{fill:stringify(gn,"rgba")}));var In=this._createItem(en,D,R,A,s,a,{},Q,on,S,u);In.on("click",curry(dispatchSelectAction,null,D,u,T)).on("mouseover",curry(dispatchHighlightAction,null,D,u,T)).on("mouseout",curry(dispatchDownplayAction,null,D,u,T)),l.ssr&&In.eachChild(function(dn){var ix=getECData(dn);ix.seriesIndex=en.seriesIndex,ix.dataIndex=R,ix.ssrType="legend"}),_.set(D,!0)}},this)},this),c&&this._createSelector(c,s,u,p,d)},n.prototype._createSelector=function(a,s,l,u,c){var p=this.getSelectorGroup();each$3(a,function(x){var _=x.type,S=new ZRText({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){l.dispatchAction({type:_==="all"?"legendAllSelect":"legendInverseSelect",legendId:s.id})}});p.add(S);var T=s.getModel("selectorLabel"),A=s.getModel(["emphasis","selectorLabel"]);setLabelStyle(S,{normal:T,emphasis:A},{defaultText:x.title}),enableHoverEmphasis(S)})},n.prototype._createItem=function(a,s,l,u,c,p,d,x,_,S,T){var A=a.visualDrawType,R=c.get("itemWidth"),D=c.get("itemHeight"),O=c.isSelected(s),F=u.get("symbolRotate"),z=u.get("symbolKeepAspect"),j=u.get("icon");_=j||_||"roundRect";var Z=getLegendStyle(_,u,d,x,A,O,T),W=new Group$1,J=u.getModel("textStyle");if(isFunction$1(a.getLegendIcon)&&(!j||j==="inherit"))W.add(a.getLegendIcon({itemWidth:R,itemHeight:D,icon:_,iconRotate:F,itemStyle:Z.itemStyle,lineStyle:Z.lineStyle,symbolKeepAspect:z}));else{var en=j==="inherit"&&a.getData().getVisual("symbol")?F==="inherit"?a.getData().getVisual("symbolRotate"):F:0;W.add(getDefaultLegendIcon({itemWidth:R,itemHeight:D,icon:_,iconRotate:en,itemStyle:Z.itemStyle,symbolKeepAspect:z}))}var tn=p==="left"?R+5:-5,Ct=p,Q=c.get("formatter"),on=s;isString$1(Q)&&Q?on=Q.replace("{name}",s??""):isFunction$1(Q)&&(on=Q(s));var gn=O?J.getTextColor():u.get("inactiveColor");W.add(new ZRText({style:createTextStyle$1(J,{text:on,x:tn,y:D/2,fill:gn,align:Ct,verticalAlign:"middle"},{inheritColor:gn})}));var In=new Rect$2({shape:W.getBoundingRect(),style:{fill:"transparent"}}),dn=u.getModel("tooltip");return dn.get("show")&&setTooltipConfig({el:In,componentModel:c,itemName:s,itemTooltipOption:dn.option}),W.add(In),W.eachChild(function(ix){ix.silent=!0}),In.silent=!S,this.getContentGroup().add(W),enableHoverEmphasis(W),W.__legendDataIndex=l,W},n.prototype.layoutInner=function(a,s,l,u,c,p){var d=this.getContentGroup(),x=this.getSelectorGroup();box(a.get("orient"),d,a.get("itemGap"),l.width,l.height);var _=d.getBoundingRect(),S=[-_.x,-_.y];if(x.markRedraw(),d.markRedraw(),c){box("horizontal",x,a.get("selectorItemGap",!0));var T=x.getBoundingRect(),A=[-T.x,-T.y],R=a.get("selectorButtonGap",!0),D=a.getOrient().index,O=D===0?"width":"height",F=D===0?"height":"width",z=D===0?"y":"x";p==="end"?A[D]+=_[O]+R:S[D]+=T[O]+R,A[1-D]+=_[F]/2-T[F]/2,x.x=A[0],x.y=A[1],d.x=S[0],d.y=S[1];var j={x:0,y:0};return j[O]=_[O]+R+T[O],j[F]=Math.max(_[F],T[F]),j[z]=Math.min(0,T[z]+A[1-D]),j}else return d.x=S[0],d.y=S[1],this.group.getBoundingRect()},n.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},n.type="legend.plain",n}(ComponentView);function getLegendStyle(t,n,a,s,l,u,c){function p(O,F){O.lineWidth==="auto"&&(O.lineWidth=F.lineWidth>0?2:0),each$3(O,function(z,j){O[j]==="inherit"&&(O[j]=F[j])})}var d=n.getModel("itemStyle"),x=d.getItemStyle(),_=t.lastIndexOf("empty",0)===0?"fill":"stroke",S=d.getShallow("decal");x.decal=!S||S==="inherit"?s.decal:createOrUpdatePatternFromDecal(S,c),x.fill==="inherit"&&(x.fill=s[l]),x.stroke==="inherit"&&(x.stroke=s[_]),x.opacity==="inherit"&&(x.opacity=(l==="fill"?s:a).opacity),p(x,s);var T=n.getModel("lineStyle"),A=T.getLineStyle();if(p(A,a),x.fill==="auto"&&(x.fill=s.fill),x.stroke==="auto"&&(x.stroke=s.fill),A.stroke==="auto"&&(A.stroke=s.fill),!u){var R=n.get("inactiveBorderWidth"),D=x[_];x.lineWidth=R==="auto"?s.lineWidth>0&&D?2:0:x.lineWidth,x.fill=n.get("inactiveColor"),x.stroke=n.get("inactiveBorderColor"),A.stroke=T.get("inactiveColor"),A.lineWidth=T.get("inactiveWidth")}return{itemStyle:x,lineStyle:A}}function getDefaultLegendIcon(t){var n=t.icon||"roundRect",a=createSymbol$1(n,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return a.setStyle(t.itemStyle),a.rotation=(t.iconRotate||0)*Math.PI/180,a.setOrigin([t.itemWidth/2,t.itemHeight/2]),n.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a}function dispatchSelectAction(t,n,a,s){dispatchDownplayAction(t,n,a,s),a.dispatchAction({type:"legendToggleSelect",name:t??n}),dispatchHighlightAction(t,n,a,s)}function isUseHoverLayer(t){for(var n=t.getZr().storage.getDisplayList(),a,s=0,l=n.length;s<l&&!(a=n[s].states.emphasis);)s++;return a&&a.hoverLayer}function dispatchHighlightAction(t,n,a,s){isUseHoverLayer(a)||a.dispatchAction({type:"highlight",seriesName:t,name:n,excludeSeriesId:s})}function dispatchDownplayAction(t,n,a,s){isUseHoverLayer(a)||a.dispatchAction({type:"downplay",seriesName:t,name:n,excludeSeriesId:s})}function legendFilter(t){var n=t.findComponents({mainType:"legend"});n&&n.length&&t.filterSeries(function(a){for(var s=0;s<n.length;s++)if(!n[s].isSelected(a.name))return!1;return!0})}function legendSelectActionHandler(t,n,a){var s=t==="allSelect"||t==="inverseSelect",l={},u=[];a.eachComponent({mainType:"legend",query:n},function(p){s?p[t]():p[t](n.name),makeSelectedMap(p,l),u.push(p.componentIndex)});var c={};return a.eachComponent("legend",function(p){each$f(l,function(d,x){p[d?"select":"unSelect"](x)}),makeSelectedMap(p,c)}),s?{selected:c,legendIndex:u}:{name:n.name,selected:c}}function makeSelectedMap(t,n){var a=n||{};return each$f(t.getData(),function(s){var l=s.get("name");if(!(l===`
`||l==="")){var u=t.isSelected(l);hasOwn(a,l)?a[l]=a[l]&&u:a[l]=u}}),a}function installLegendAction(t){t.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),t.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),t.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$b(t){t.registerComponentModel(LegendModel),t.registerComponentView(LegendView),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),t.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(t)}var ScrollableLegendModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.setScrollDataIndex=function(a){this.option.scrollDataIndex=a},n.prototype.init=function(a,s,l){var u=getLayoutParams(a);t.prototype.init.call(this,a,s,l),mergeAndNormalizeLayoutParams(this,a,u)},n.prototype.mergeOption=function(a,s){t.prototype.mergeOption.call(this,a,s),mergeAndNormalizeLayoutParams(this,this.option,a)},n.type="legend.scroll",n.defaultOption=inheritDefaultOption(LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),n}(LegendModel);function mergeAndNormalizeLayoutParams(t,n,a){var s=t.getOrient(),l=[1,1];l[s.index]=0,mergeLayoutParam(n,a,{type:"box",ignoreSize:!!l})}var Group=Group$3,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.newlineDisabled=!0,a._currentIndex=0,a}return n.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},n.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},n.prototype.renderInner=function(a,s,l,u,c,p,d){var x=this;t.prototype.renderInner.call(this,a,s,l,u,c,p,d);var _=this._controllerGroup,S=s.get("pageIconSize",!0),T=isArray$1(S)?S:[S,S];R("pagePrev",0);var A=s.getModel("pageTextStyle");_.add(new ZRText({name:"pageText",style:{text:"xx/xx",fill:A.getTextColor(),font:A.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),R("pageNext",1);function R(D,O){var F=D+"DataIndex",z=createIcon(s.get("pageIcons",!0)[s.getOrient().name][O],{onclick:bind$1(x._pageGo,x,F,s,u)},{x:-T[0]/2,y:-T[1]/2,width:T[0],height:T[1]});z.name=D,_.add(z)}},n.prototype.layoutInner=function(a,s,l,u,c,p){var d=this.getSelectorGroup(),x=a.getOrient().index,_=WH[x],S=XY[x],T=WH[1-x],A=XY[1-x];c&&box("horizontal",d,a.get("selectorItemGap",!0));var R=a.get("selectorButtonGap",!0),D=d.getBoundingRect(),O=[-D.x,-D.y],F=clone$4(l);c&&(F[_]=l[_]-D[_]-R);var z=this._layoutContentAndController(a,u,F,x,_,T,A,S);if(c){if(p==="end")O[x]+=z[_]+R;else{var j=D[_]+R;O[x]-=j,z[S]-=j}z[_]+=D[_]+R,O[1-x]+=z[A]+z[T]/2-D[T]/2,z[T]=Math.max(z[T],D[T]),z[A]=Math.min(z[A],D[A]+O[1-x]),d.x=O[0],d.y=O[1],d.markRedraw()}return z},n.prototype._layoutContentAndController=function(a,s,l,u,c,p,d,x){var _=this.getContentGroup(),S=this._containerGroup,T=this._controllerGroup;box(a.get("orient"),_,a.get("itemGap"),u?l.width:null,u?null:l.height),box("horizontal",T,a.get("pageButtonItemGap",!0));var A=_.getBoundingRect(),R=T.getBoundingRect(),D=this._showController=A[c]>l[c],O=[-A.x,-A.y];s||(O[u]=_[x]);var F=[0,0],z=[-R.x,-R.y],j=retrieve2(a.get("pageButtonGap",!0),a.get("itemGap",!0));if(D){var Z=a.get("pageButtonPosition",!0);Z==="end"?z[u]+=l[c]-R[c]:F[u]+=R[c]+j}z[1-u]+=A[p]/2-R[p]/2,_.setPosition(O),S.setPosition(F),T.setPosition(z);var W={x:0,y:0};if(W[c]=D?l[c]:A[c],W[p]=Math.max(A[p],R[p]),W[d]=Math.min(0,R[d]+z[1-u]),S.__rectSize=l[c],D){var J={x:0,y:0};J[c]=Math.max(l[c]-R[c]-j,0),J[p]=W[p],S.setClipPath(new Rect$2({shape:J})),S.__rectSize=J[c]}else T.eachChild(function(tn){tn.attr({invisible:!0,silent:!0})});var en=this._getPageInfo(a);return en.pageIndex!=null&&updateProps$1(_,{x:en.contentPosition[0],y:en.contentPosition[1]},D?a:null),this._updatePageInfoView(a,en),W},n.prototype._pageGo=function(a,s,l){var u=this._getPageInfo(s)[a];u!=null&&l.dispatchAction({type:"legendScroll",scrollDataIndex:u,legendId:s.id})},n.prototype._updatePageInfoView=function(a,s){var l=this._controllerGroup;each$f(["pagePrev","pageNext"],function(_){var S=_+"DataIndex",T=s[S]!=null,A=l.childOfName(_);A&&(A.setStyle("fill",T?a.get("pageIconColor",!0):a.get("pageIconInactiveColor",!0)),A.cursor=T?"pointer":"default")});var u=l.childOfName("pageText"),c=a.get("pageFormatter"),p=s.pageIndex,d=p!=null?p+1:0,x=s.pageCount;u&&c&&u.setStyle("text",isString$1(c)?c.replace("{current}",d==null?"":d+"").replace("{total}",x==null?"":x+""):c({current:d,total:x}))},n.prototype._getPageInfo=function(a){var s=a.get("scrollDataIndex",!0),l=this.getContentGroup(),u=this._containerGroup.__rectSize,c=a.getOrient().index,p=WH[c],d=XY[c],x=this._findTargetItemIndex(s),_=l.children(),S=_[x],T=_.length,A=T?1:0,R={contentPosition:[l.x,l.y],pageCount:A,pageIndex:A-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!S)return R;var D=Z(S);R.contentPosition[c]=-D.s;for(var O=x+1,F=D,z=D,j=null;O<=T;++O)j=Z(_[O]),(!j&&z.e>F.s+u||j&&!W(j,F.s))&&(z.i>F.i?F=z:F=j,F&&(R.pageNextDataIndex==null&&(R.pageNextDataIndex=F.i),++R.pageCount)),z=j;for(var O=x-1,F=D,z=D,j=null;O>=-1;--O)j=Z(_[O]),(!j||!W(z,j.s))&&F.i<z.i&&(z=F,R.pagePrevDataIndex==null&&(R.pagePrevDataIndex=F.i),++R.pageCount,++R.pageIndex),F=j;return R;function Z(J){if(J){var en=J.getBoundingRect(),tn=en[d]+J[d];return{s:tn,e:tn+en[p],i:J.__legendDataIndex}}}function W(J,en){return J.e>=en&&J.s<=en+u}},n.prototype._findTargetItemIndex=function(a){if(!this._showController)return 0;var s,l=this.getContentGroup(),u;return l.eachChild(function(c,p){var d=c.__legendDataIndex;u==null&&d!=null&&(u=p),d===a&&(s=p)}),s??u},n.type="legend.scroll",n}(LegendView);function installScrollableLegendAction(t){t.registerAction("legendScroll","legendscroll",function(n,a){var s=n.scrollDataIndex;s!=null&&a.eachComponent({mainType:"legend",subType:"scroll",query:n},function(l){l.setScrollDataIndex(s)})})}function install$a(t){use(install$b),t.registerComponentModel(ScrollableLegendModel),t.registerComponentView(ScrollableLegendView),installScrollableLegendAction(t)}function install$9(t){use(install$b),use(install$a)}var InsideZoomModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.inside",n.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),n}(DataZoomModel),inner$1=makeInner();function setViewInfoToCoordSysRecord(t,n,a){inner$1(t).coordSysRecordMap.each(function(s){var l=s.dataZoomInfoMap.get(n.uid);l&&(l.getRange=a)})}function disposeCoordSysRecordIfNeeded(t,n){for(var a=inner$1(t).coordSysRecordMap,s=a.keys(),l=0;l<s.length;l++){var u=s[l],c=a.get(u),p=c.dataZoomInfoMap;if(p){var d=n.uid,x=p.get(d);x&&(p.removeKey(d),p.keys().length||disposeCoordSysRecord(a,c))}}}function disposeCoordSysRecord(t,n){if(n){t.removeKey(n.model.uid);var a=n.controller;a&&a.dispose()}}function createCoordSysRecord(t,n){var a={model:n,containsPoint:curry$1(containsPoint,n),dispatchAction:curry$1(dispatchAction,t),dataZoomInfoMap:null,controller:null},s=a.controller=new RoamController(t.getZr());return each$f(["pan","zoom","scrollMove"],function(l){s.on(l,function(u){var c=[];a.dataZoomInfoMap.each(function(p){if(u.isAvailableBehavior(p.model.option)){var d=(p.getRange||{})[l],x=d&&d(p.dzReferCoordSysInfo,a.model.mainType,a.controller,u);!p.model.get("disabled",!0)&&x&&c.push({dataZoomId:p.model.id,start:x[0],end:x[1]})}}),c.length&&a.dispatchAction(c)})}),a}function dispatchAction(t,n){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:n})}function containsPoint(t,n,a,s){return t.coordinateSystem.containPoint([a,s])}function mergeControllerParams(t){var n,a="type_",s={type_true:2,type_move:1,type_false:0,type_undefined:-1},l=!0;return t.each(function(u){var c=u.model,p=c.get("disabled",!0)?!1:c.get("zoomLock",!0)?"move":!0;s[a+p]>s[a+n]&&(n=p),l=l&&c.get("preventDefaultMouseMove",!0)}),{controlType:n,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!l}}}function installDataZoomRoamProcessor(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(n,a){var s=inner$1(a),l=s.coordSysRecordMap||(s.coordSysRecordMap=createHashMap());l.each(function(u){u.dataZoomInfoMap=null}),n.eachComponent({mainType:"dataZoom",subType:"inside"},function(u){var c=collectReferCoordSysModelInfo(u);each$f(c.infoList,function(p){var d=p.model.uid,x=l.get(d)||l.set(d,createCoordSysRecord(a,p.model)),_=x.dataZoomInfoMap||(x.dataZoomInfoMap=createHashMap());_.set(u.uid,{dzReferCoordSysInfo:p,model:u,getRange:null})})}),l.each(function(u){var c=u.controller,p,d=u.dataZoomInfoMap;if(d){var x=d.keys()[0];x!=null&&(p=d.get(x))}if(!p){disposeCoordSysRecord(l,u);return}var _=mergeControllerParams(d);c.enable(_.controlType,_.opt),c.setPointerChecker(u.containsPoint),createOrUpdate(u,"dispatchAction",p.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataZoom.inside",a}return n.prototype.render=function(a,s,l){if(t.prototype.render.apply(this,arguments),a.noTarget()){this._clear();return}this.range=a.getPercentRange(),setViewInfoToCoordSysRecord(l,a,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},n.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},n.type="dataZoom.inside",n}(DataZoomView),getRangeHandlers={zoom:function(t,n,a,s){var l=this.range,u=l.slice(),c=t.axisModels[0];if(c){var p=getDirectionInfo[n](null,[s.originX,s.originY],c,a,t),d=(p.signal>0?p.pixelStart+p.pixelLength-p.pixel:p.pixel-p.pixelStart)/p.pixelLength*(u[1]-u[0])+u[0],x=Math.max(1/s.scale,0);u[0]=(u[0]-d)*x+d,u[1]=(u[1]-d)*x+d;var _=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,u,[0,100],0,_.minSpan,_.maxSpan),this.range=u,l[0]!==u[0]||l[1]!==u[1])return u}},pan:makeMover(function(t,n,a,s,l,u){var c=getDirectionInfo[s]([u.oldX,u.oldY],[u.newX,u.newY],n,l,a);return c.signal*(t[1]-t[0])*c.pixel/c.pixelLength}),scrollMove:makeMover(function(t,n,a,s,l,u){var c=getDirectionInfo[s]([0,0],[u.scrollDelta,u.scrollDelta],n,l,a);return c.signal*(t[1]-t[0])*u.scrollDelta})};function makeMover(t){return function(n,a,s,l){var u=this.range,c=u.slice(),p=n.axisModels[0];if(p){var d=t(c,p,n,a,s,l);if(sliderMove(d,c,[0,100],"all"),this.range=c,u[0]!==c[0]||u[1]!==c[1])return c}}}var getDirectionInfo={grid:function(t,n,a,s,l){var u=a.axis,c={},p=l.model.coordinateSystem.getRect();return t=t||[0,0],u.dim==="x"?(c.pixel=n[0]-t[0],c.pixelLength=p.width,c.pixelStart=p.x,c.signal=u.inverse?1:-1):(c.pixel=n[1]-t[1],c.pixelLength=p.height,c.pixelStart=p.y,c.signal=u.inverse?-1:1),c},polar:function(t,n,a,s,l){var u=a.axis,c={},p=l.model.coordinateSystem,d=p.getRadiusAxis().getExtent(),x=p.getAngleAxis().getExtent();return t=t?p.pointToCoord(t):[0,0],n=p.pointToCoord(n),a.mainType==="radiusAxis"?(c.pixel=n[0]-t[0],c.pixelLength=d[1]-d[0],c.pixelStart=d[0],c.signal=u.inverse?1:-1):(c.pixel=n[1]-t[1],c.pixelLength=x[1]-x[0],c.pixelStart=x[0],c.signal=u.inverse?-1:1),c},singleAxis:function(t,n,a,s,l){var u=a.axis,c=l.model.coordinateSystem.getRect(),p={};return t=t||[0,0],u.orient==="horizontal"?(p.pixel=n[0]-t[0],p.pixelLength=c.width,p.pixelStart=c.x,p.signal=u.inverse?1:-1):(p.pixel=n[1]-t[1],p.pixelLength=c.height,p.pixelStart=c.y,p.signal=u.inverse?-1:1),p}};function install$8(t){installCommon$1(t),t.registerComponentModel(InsideZoomModel),t.registerComponentView(InsideZoomView),installDataZoomRoamProcessor(t)}var SliderZoomModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="dataZoom.slider",n.layoutMode="box",n.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),n}(DataZoomModel),Rect=Rect$2,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._displayables={},a}return n.prototype.init=function(a,s){this.api=s,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},n.prototype.render=function(a,s,l,u){if(t.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",a.get("throttle"),"fixRate"),this._orient=a.getOrient(),a.get("show")===!1){this.group.removeAll();return}if(a.noTarget()){this._clear(),this.group.removeAll();return}(!u||u.type!=="dataZoom"||u.from!==this.uid)&&this._buildView(),this._updateView()},n.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var a=this.api.getZr();a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)},n.prototype._buildView=function(){var a=this.group;a.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var s=this._displayables.sliderGroup=new Group$3;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),a.add(s),this._positionGroup()},n.prototype._resetLocation=function(){var a=this.dataZoomModel,s=this.api,l=a.get("brushSelect"),u=l?DEFAULT_MOVE_HANDLE_SIZE:0,c=this._findCoordRect(),p={width:s.getWidth(),height:s.getHeight()},d=this._orient===HORIZONTAL?{right:p.width-c.x-c.width,top:p.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-u,width:c.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:c.y,width:DEFAULT_FILLER_SIZE,height:c.height},x=getLayoutParams(a.option);each$f(["right","top","width","height"],function(S){x[S]==="ph"&&(x[S]=d[S])});var _=getLayoutRect(x,p);this._location={x:_.x,y:_.y},this._size=[_.width,_.height],this._orient===VERTICAL&&this._size.reverse()},n.prototype._positionGroup=function(){var a=this.group,s=this._location,l=this._orient,u=this.dataZoomModel.getFirstTargetAxisModel(),c=u&&u.get("inverse"),p=this._displayables.sliderGroup,d=(this._dataShadowInfo||{}).otherAxisInverse;p.attr(l===HORIZONTAL&&!c?{scaleY:d?1:-1,scaleX:1}:l===HORIZONTAL&&c?{scaleY:d?1:-1,scaleX:-1}:l===VERTICAL&&!c?{scaleY:d?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:d?-1:1,scaleX:-1,rotation:Math.PI/2});var x=a.getBoundingRect([p]);a.x=s.x-x.x,a.y=s.y-x.y,a.markRedraw()},n.prototype._getViewExtent=function(){return[0,this._size[0]]},n.prototype._renderBackground=function(){var a=this.dataZoomModel,s=this._size,l=this._displayables.sliderGroup,u=a.get("brushSelect");l.add(new Rect({silent:!0,shape:{x:0,y:0,width:s[0],height:s[1]},style:{fill:a.get("backgroundColor")},z2:-40}));var c=new Rect({shape:{x:0,y:0,width:s[0],height:s[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),p=this.api.getZr();u?(c.on("mousedown",this._onBrushStart,this),c.cursor="crosshair",p.on("mousemove",this._onBrush),p.on("mouseup",this._onBrushEnd)):(p.off("mousemove",this._onBrush),p.off("mouseup",this._onBrushEnd)),l.add(c)},n.prototype._renderDataShadow=function(){var a=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!a)return;var s=this._size,l=this._shadowSize||[],u=a.series,c=u.getRawData(),p=u.getShadowDim&&u.getShadowDim(),d=p&&c.getDimensionInfo(p)?u.getShadowDim():a.otherDim;if(d==null)return;var x=this._shadowPolygonPts,_=this._shadowPolylinePts;if(c!==this._shadowData||d!==this._shadowDim||s[0]!==l[0]||s[1]!==l[1]){var S=c.getDataExtent(d),T=(S[1]-S[0])*.3;S=[S[0]-T,S[1]+T];var A=[0,s[1]],R=[0,s[0]],D=[[s[0],0],[0,0]],O=[],F=R[1]/(c.count()-1),z=0,j=Math.round(c.count()/s[0]),Z;c.each([d],function(Ct,Q){if(j>0&&Q%j){z+=F;return}var on=Ct==null||isNaN(Ct)||Ct==="",gn=on?0:linearMap$2(Ct,S,A,!0);on&&!Z&&Q?(D.push([D[D.length-1][0],0]),O.push([O[O.length-1][0],0])):!on&&Z&&(D.push([z,0]),O.push([z,0])),D.push([z,gn]),O.push([z,gn]),z+=F,Z=on}),x=this._shadowPolygonPts=D,_=this._shadowPolylinePts=O}this._shadowData=c,this._shadowDim=d,this._shadowSize=[s[0],s[1]];var W=this.dataZoomModel;function J(Ct){var Q=W.getModel(Ct?"selectedDataBackground":"dataBackground"),on=new Group$3,gn=new Polygon({shape:{points:x},segmentIgnoreThreshold:1,style:Q.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),In=new Polyline$1({shape:{points:_},segmentIgnoreThreshold:1,style:Q.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return on.add(gn),on.add(In),on}for(var en=0;en<3;en++){var tn=J(en===1);this._displayables.sliderGroup.add(tn),this._displayables.dataShadowSegs.push(tn)}},n.prototype._prepareDataShadowInfo=function(){var a=this.dataZoomModel,s=a.get("showDataShadow");if(s!==!1){var l,u=this.ecModel;return a.eachTargetAxis(function(c,p){var d=a.getAxisProxy(c,p).getTargetSeriesModels();each$f(d,function(x){if(!l&&!(s!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,x.get("type"))<0)){var _=u.getComponent(getAxisMainType(c),p).axis,S=getOtherDim(c),T,A=x.coordinateSystem;S!=null&&A.getOtherAxis&&(T=A.getOtherAxis(_).inverse),S=x.getData().mapDimension(S),l={thisAxis:_,series:x,thisDim:c,otherDim:S,otherAxisInverse:T}}},this)},this),l}},n.prototype._renderHandle=function(){var a=this.group,s=this._displayables,l=s.handles=[null,null],u=s.handleLabels=[null,null],c=this._displayables.sliderGroup,p=this._size,d=this.dataZoomModel,x=this.api,_=d.get("borderRadius")||0,S=d.get("brushSelect"),T=s.filler=new Rect({silent:S,style:{fill:d.get("fillerColor")},textConfig:{position:"inside"}});c.add(T),c.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:p[0],height:p[1],r:_},style:{stroke:d.get("dataBackgroundColor")||d.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(j){var Z=d.get("handleIcon");!symbolBuildProxies[Z]&&Z.indexOf("path://")<0&&Z.indexOf("image://")<0&&(Z="path://"+Z);var W=createSymbol$1(Z,-1,0,2,2,null,!0);W.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,j),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var J=W.getBoundingRect(),en=d.get("handleSize");this._handleHeight=parsePercent(en,this._size[1]),this._handleWidth=J.width/J.height*this._handleHeight,W.setStyle(d.getModel("handleStyle").getItemStyle()),W.style.strokeNoScale=!0,W.rectHover=!0,W.ensureState("emphasis").style=d.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(W);var tn=d.get("handleColor");tn!=null&&(W.style.fill=tn),c.add(l[j]=W);var Ct=d.getModel("textStyle"),Q=d.get("handleLabel")||{},on=Q.show||!1;a.add(u[j]=new ZRText({silent:!0,invisible:!on,style:createTextStyle$1(Ct,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:Ct.getTextColor(),font:Ct.getFont()}),z2:10}))},this);var A=T;if(S){var R=parsePercent(d.get("moveHandleSize"),p[1]),D=s.moveHandle=new Rect$2({style:d.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:p[1]-.5,height:R}}),O=R*.8,F=s.moveHandleIcon=createSymbol$1(d.get("moveHandleIcon"),-O/2,-O/2,O,O,"#fff",!0);F.silent=!0,F.y=p[1]+R/2-.5,D.ensureState("emphasis").style=d.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var z=Math.min(p[1]/2,Math.max(R,10));A=s.moveZone=new Rect$2({invisible:!0,shape:{y:p[1]-z,height:R+z}}),A.on("mouseover",function(){x.enterEmphasis(D)}).on("mouseout",function(){x.leaveEmphasis(D)}),c.add(D),c.add(F),c.add(A)}A.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},n.prototype._resetInterval=function(){var a=this._range=this.dataZoomModel.getPercentRange(),s=this._getViewExtent();this._handleEnds=[linearMap$2(a[0],[0,100],s,!0),linearMap$2(a[1],[0,100],s,!0)]},n.prototype._updateInterval=function(a,s){var l=this.dataZoomModel,u=this._handleEnds,c=this._getViewExtent(),p=l.findRepresentativeAxisProxy().getMinMaxSpan(),d=[0,100];sliderMove(s,u,c,l.get("zoomLock")?"all":a,p.minSpan!=null?linearMap$2(p.minSpan,d,c,!0):null,p.maxSpan!=null?linearMap$2(p.maxSpan,d,c,!0):null);var x=this._range,_=this._range=asc$2([linearMap$2(u[0],c,d,!0),linearMap$2(u[1],c,d,!0)]);return!x||x[0]!==_[0]||x[1]!==_[1]},n.prototype._updateView=function(a){var s=this._displayables,l=this._handleEnds,u=asc$2(l.slice()),c=this._size;each$f([0,1],function(A){var R=s.handles[A],D=this._handleHeight;R.attr({scaleX:D/2,scaleY:D/2,x:l[A]+(A?-1:1),y:c[1]/2-D/2})},this),s.filler.setShape({x:u[0],y:0,width:u[1]-u[0],height:c[1]});var p={x:u[0],width:u[1]-u[0]};s.moveHandle&&(s.moveHandle.setShape(p),s.moveZone.setShape(p),s.moveZone.getBoundingRect(),s.moveHandleIcon&&s.moveHandleIcon.attr("x",p.x+p.width/2));for(var d=s.dataShadowSegs,x=[0,u[0],u[1],c[0]],_=0;_<d.length;_++){var S=d[_],T=S.getClipPath();T||(T=new Rect$2,S.setClipPath(T)),T.setShape({x:x[_],y:0,width:x[_+1]-x[_],height:c[1]})}this._updateDataInfo(a)},n.prototype._updateDataInfo=function(a){var s=this.dataZoomModel,l=this._displayables,u=l.handleLabels,c=this._orient,p=["",""];if(s.get("showDetail")){var d=s.findRepresentativeAxisProxy();if(d){var x=d.getAxisModel().axis,_=this._range,S=a?d.calculateDataWindow({start:_[0],end:_[1]}).valueWindow:d.getDataValueWindow();p=[this._formatLabel(S[0],x),this._formatLabel(S[1],x)]}}var T=asc$2(this._handleEnds.slice());A.call(this,0),A.call(this,1);function A(R){var D=getTransform$1(l.handles[R].parent,this.group),O=transformDirection(R===0?"right":"left",D),F=this._handleWidth/2+LABEL_GAP,z=applyTransform([T[R]+(R===0?-F:F),this._size[1]/2],D);u[R].setStyle({x:z[0],y:z[1],verticalAlign:c===HORIZONTAL?"middle":O,align:c===HORIZONTAL?O:"center",text:p[R]})}},n.prototype._formatLabel=function(a,s){var l=this.dataZoomModel,u=l.get("labelFormatter"),c=l.get("labelPrecision");(c==null||c==="auto")&&(c=s.getPixelPrecision());var p=a==null||isNaN(a)?"":s.type==="category"||s.type==="time"?s.scale.getLabel({value:Math.round(a)}):a.toFixed(Math.min(c,20));return isFunction$1(u)?u(a,p):isString$1(u)?u.replace("{value}",p):p},n.prototype._showDataInfo=function(a){var s=this.dataZoomModel.get("handleLabel")||{},l=s.show||!1,u=this.dataZoomModel.getModel(["emphasis","handleLabel"]),c=u.get("show")||!1,p=a||this._dragging?c:l,d=this._displayables,x=d.handleLabels;x[0].attr("invisible",!p),x[1].attr("invisible",!p),d.moveHandle&&this.api[p?"enterEmphasis":"leaveEmphasis"](d.moveHandle,1)},n.prototype._onDragMove=function(a,s,l,u){this._dragging=!0,stop(u.event);var c=this._displayables.sliderGroup.getLocalTransform(),p=applyTransform([s,l],c,!0),d=this._updateInterval(a,p[0]),x=this.dataZoomModel.get("realtime");this._updateView(!x),d&&x&&this._dispatchZoomAction(!0)},n.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var a=this.dataZoomModel.get("realtime");!a&&this._dispatchZoomAction(!1)},n.prototype._onClickPanel=function(a){var s=this._size,l=this._displayables.sliderGroup.transformCoordToLocal(a.offsetX,a.offsetY);if(!(l[0]<0||l[0]>s[0]||l[1]<0||l[1]>s[1])){var u=this._handleEnds,c=(u[0]+u[1])/2,p=this._updateInterval("all",l[0]-c);this._updateView(),p&&this._dispatchZoomAction(!1)}},n.prototype._onBrushStart=function(a){var s=a.offsetX,l=a.offsetY;this._brushStart=new Point(s,l),this._brushing=!0,this._brushStartTime=+new Date},n.prototype._onBrushEnd=function(a){if(this._brushing){var s=this._displayables.brushRect;if(this._brushing=!1,!!s){s.attr("ignore",!0);var l=s.shape,u=+new Date;if(!(u-this._brushStartTime<200&&Math.abs(l.width)<5)){var c=this._getViewExtent(),p=[0,100];this._range=asc$2([linearMap$2(l.x,c,p,!0),linearMap$2(l.x+l.width,c,p,!0)]),this._handleEnds=[l.x,l.x+l.width],this._updateView(),this._dispatchZoomAction(!1)}}}},n.prototype._onBrush=function(a){this._brushing&&(stop(a.event),this._updateBrushRect(a.offsetX,a.offsetY))},n.prototype._updateBrushRect=function(a,s){var l=this._displayables,u=this.dataZoomModel,c=l.brushRect;c||(c=l.brushRect=new Rect({silent:!0,style:u.getModel("brushStyle").getItemStyle()}),l.sliderGroup.add(c)),c.attr("ignore",!1);var p=this._brushStart,d=this._displayables.sliderGroup,x=d.transformCoordToLocal(a,s),_=d.transformCoordToLocal(p.x,p.y),S=this._size;x[0]=Math.max(Math.min(S[0],x[0]),0),c.setShape({x:_[0],y:0,width:x[0]-_[0],height:S[1]})},n.prototype._dispatchZoomAction=function(a){var s=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:a?REALTIME_ANIMATION_CONFIG:null,start:s[0],end:s[1]})},n.prototype._findCoordRect=function(){var a,s=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!a&&s.length){var l=s[0].model.coordinateSystem;a=l.getRect&&l.getRect()}if(!a){var u=this.api.getWidth(),c=this.api.getHeight();a={x:u*.2,y:c*.2,width:u*.6,height:c*.6}}return a},n.type="dataZoom.slider",n}(DataZoomView);function getOtherDim(t){var n={x:"y",y:"x",radius:"angle",angle:"radius"};return n[t]}function getCursor$1(t){return t==="vertical"?"ns-resize":"ew-resize"}function install$7(t){t.registerComponentModel(SliderZoomModel),t.registerComponentView(SliderZoomView),installCommon$1(t)}function install$6(t){use(install$8),use(install$7)}var visualDefault={get:function(t,n,a){var s=clone$4((defaultOption[t]||{})[n]);return a&&isArray$1(s)?s[s.length-1]:s}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.stateList=["inRange","outOfRange"],a.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],a.layoutMode={type:"box",ignoreSize:!0},a.dataBound=[-1/0,1/0],a.targetVisuals={},a.controllerVisuals={},a}return n.prototype.init=function(a,s,l){this.mergeDefaultAndTheme(a,l)},n.prototype.optionUpdated=function(a,s){var l=this.option;!s&&replaceVisualOption(l,a,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},n.prototype.resetVisual=function(a){var s=this.stateList;a=bind$1(a,this),this.controllerVisuals=createVisualMappings(this.option.controller,s,a),this.targetVisuals=createVisualMappings(this.option.target,s,a)},n.prototype.getItemSymbol=function(){return null},n.prototype.getTargetSeriesIndices=function(){var a=this.option.seriesIndex,s=[];return a==null||a==="all"?this.ecModel.eachSeries(function(l,u){s.push(u)}):s=normalizeToArray(a),s},n.prototype.eachTargetSeries=function(a,s){each$f(this.getTargetSeriesIndices(),function(l){var u=this.ecModel.getSeriesByIndex(l);u&&a.call(s,u)},this)},n.prototype.isTargetSeries=function(a){var s=!1;return this.eachTargetSeries(function(l){l===a&&(s=!0)}),s},n.prototype.formatValueText=function(a,s,l){var u=this.option,c=u.precision,p=this.dataBound,d=u.formatter,x;l=l||["<",">"],isArray$1(a)&&(a=a.slice(),x=!0);var _=s?a:x?[S(a[0]),S(a[1])]:S(a);if(isString$1(d))return d.replace("{value}",x?_[0]:_).replace("{value2}",x?_[1]:_);if(isFunction$1(d))return x?d(a[0],a[1]):d(a);if(x)return a[0]===p[0]?l[0]+" "+_[1]:a[1]===p[1]?l[1]+" "+_[0]:_[0]+" - "+_[1];return _;function S(T){return T===p[0]?"min":T===p[1]?"max":(+T).toFixed(Math.min(c,20))}},n.prototype.resetExtent=function(){var a=this.option,s=asc([a.min,a.max]);this._dataExtent=s},n.prototype.getDataDimensionIndex=function(a){var s=this.option.dimension;if(s!=null)return a.getDimensionIndex(s);for(var l=a.dimensions,u=l.length-1;u>=0;u--){var c=l[u],p=a.getDimensionInfo(c);if(!p.isCalculationCoord)return p.storeDimIndex}},n.prototype.getExtent=function(){return this._dataExtent.slice()},n.prototype.completeVisualOption=function(){var a=this.ecModel,s=this.option,l={inRange:s.inRange,outOfRange:s.outOfRange},u=s.target||(s.target={}),c=s.controller||(s.controller={});merge(u,l),merge(c,l);var p=this.isCategory();d.call(this,u),d.call(this,c),x.call(this,u,"inRange","outOfRange"),_.call(this,c);function d(S){isArray(s.color)&&!S.inRange&&(S.inRange={color:s.color.slice().reverse()}),S.inRange=S.inRange||{color:a.get("gradientColor")}}function x(S,T,A){var R=S[T],D=S[A];R&&!D&&(D=S[A]={},each$2(R,function(O,F){if(VisualMapping.isValidType(F)){var z=visualDefault.get(F,"inactive",p);z!=null&&(D[F]=z,F==="color"&&!D.hasOwnProperty("opacity")&&!D.hasOwnProperty("colorAlpha")&&(D.opacity=[0,0]))}}))}function _(S){var T=(S.inRange||{}).symbol||(S.outOfRange||{}).symbol,A=(S.inRange||{}).symbolSize||(S.outOfRange||{}).symbolSize,R=this.get("inactiveColor"),D=this.getItemSymbol(),O=D||"roundRect";each$2(this.stateList,function(F){var z=this.itemSize,j=S[F];j||(j=S[F]={color:p?R:[R]}),j.symbol==null&&(j.symbol=T&&clone$4(T)||(p?O:[O])),j.symbolSize==null&&(j.symbolSize=A&&clone$4(A)||(p?z[0]:[z[0],z[0]])),j.symbol=mapVisual(j.symbol,function(J){return J==="none"?O:J});var Z=j.symbolSize;if(Z!=null){var W=-1/0;eachVisual(Z,function(J){J>W&&(W=J)}),j.symbolSize=mapVisual(Z,function(J){return linearMap$1(J,[0,W],[0,z[0]],!0)})}},this)}},n.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},n.prototype.isCategory=function(){return!!this.option.categories},n.prototype.setSelected=function(a){},n.prototype.getSelected=function(){return null},n.prototype.getValueState=function(a){return null},n.prototype.getVisualMeta=function(a){return null},n.type="visualMap",n.dependencies=["series"],n.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},n}(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(a,s){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(l){l.mappingMethod="linear",l.dataExtent=this.getExtent()}),this._resetRange()},n.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var a=this.itemSize;(a[0]==null||isNaN(a[0]))&&(a[0]=DEFAULT_BAR_BOUND[0]),(a[1]==null||isNaN(a[1]))&&(a[1]=DEFAULT_BAR_BOUND[1])},n.prototype._resetRange=function(){var a=this.getExtent(),s=this.option.range;!s||s.auto?(a.auto=1,this.option.range=a):isArray$1(s)&&(s[0]>s[1]&&s.reverse(),s[0]=Math.max(s[0],a[0]),s[1]=Math.min(s[1],a[1]))},n.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(a){var s=this.option.controller[a].symbolSize;s&&s[0]!==s[1]&&(s[0]=s[1]/3)},this)},n.prototype.setSelected=function(a){this.option.range=a.slice(),this._resetRange()},n.prototype.getSelected=function(){var a=this.getExtent(),s=asc$2((this.get("range")||[]).slice());return s[0]>a[1]&&(s[0]=a[1]),s[1]>a[1]&&(s[1]=a[1]),s[0]<a[0]&&(s[0]=a[0]),s[1]<a[0]&&(s[1]=a[0]),s},n.prototype.getValueState=function(a){var s=this.option.range,l=this.getExtent();return(s[0]<=l[0]||s[0]<=a)&&(s[1]>=l[1]||a<=s[1])?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(a){var s=[];return this.eachTargetSeries(function(l){var u=[],c=l.getData();c.each(this.getDataDimensionIndex(c),function(p,d){a[0]<=p&&p<=a[1]&&u.push(d)},this),s.push({seriesId:l.id,dataIndex:u})},this),s},n.prototype.getVisualMeta=function(a){var s=getColorStopValues(this,"outOfRange",this.getExtent()),l=getColorStopValues(this,"inRange",this.option.range.slice()),u=[];function c(A,R){u.push({value:A,color:a(A,R)})}for(var p=0,d=0,x=l.length,_=s.length;d<_&&(!l.length||s[d]<=l[0]);d++)s[d]<l[p]&&c(s[d],"outOfRange");for(var S=1;p<x;p++,S=0)S&&u.length&&c(l[p],"outOfRange"),c(l[p],"inRange");for(var S=1;d<_;d++)(!l.length||l[l.length-1]<s[d])&&(S&&(u.length&&c(u[u.length-1].value,"outOfRange"),S=0),c(s[d],"outOfRange"));var T=u.length;return{stops:u,outerColors:[T?u[0].color:"transparent",T?u[T-1].color:"transparent"]}},n.type="visualMap.continuous",n.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),n}(VisualMapModel);function getColorStopValues(t,n,a){if(a[0]===a[1])return a.slice();for(var s=200,l=(a[1]-a[0])/s,u=a[0],c=[],p=0;p<=s&&u<a[1];p++)c.push(u),u+=l;return c.push(a[1]),c}var VisualMapView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.autoPositionValues={left:1,right:1,top:1,bottom:1},a}return n.prototype.init=function(a,s){this.ecModel=a,this.api=s},n.prototype.render=function(a,s,l,u){if(this.visualMapModel=a,a.get("show")===!1){this.group.removeAll();return}this.doRender(a,s,l,u)},n.prototype.renderBackground=function(a){var s=this.visualMapModel,l=normalizeCssArray(s.get("padding")||0),u=a.getBoundingRect();a.add(new Rect$2({z2:-1,silent:!0,shape:{x:u.x-l[3],y:u.y-l[0],width:u.width+l[3]+l[1],height:u.height+l[0]+l[2]},style:{fill:s.get("backgroundColor"),stroke:s.get("borderColor"),lineWidth:s.get("borderWidth")}}))},n.prototype.getControllerVisual=function(a,s,l){l=l||{};var u=l.forceState,c=this.visualMapModel,p={};if(s==="color"){var d=c.get("contentColor");p.color=d}function x(A){return p[A]}function _(A,R){p[A]=R}var S=c.controllerVisuals[u||c.getValueState(a)],T=VisualMapping.prepareVisualTypes(S);return each$f(T,function(A){var R=S[A];l.convertOpacityToAlpha&&A==="opacity"&&(A="colorAlpha",R=S.__alphaForOpacity),VisualMapping.dependsOn(A,s)&&R&&R.applyVisual(a,x,_)}),p[s]},n.prototype.positionGroup=function(a){var s=this.visualMapModel,l=this.api;positionElement(a,s.getBoxLayoutParams(),{width:l.getWidth(),height:l.getHeight()})},n.prototype.doRender=function(a,s,l,u){},n.type="visualMap",n}(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(t,n,a){var s=t.option,l=s.align;if(l!=null&&l!=="auto")return l;for(var u={width:n.getWidth(),height:n.getHeight()},c=s.orient==="horizontal"?1:0,p=paramsSet[c],d=[0,null,10],x={},_=0;_<3;_++)x[paramsSet[1-c][_]]=d[_],x[p[_]]=_===2?a[0]:s[p[_]];var S=[["x","width",3],["y","height",0]][c],T=getLayoutRect(x,u,s.padding);return p[(T.margin[S[2]]||0)+T[S[0]]+T[S[1]]*.5<u[S[1]]*.5?0:1]}function makeHighDownBatch(t,n){return each$f(t||[],function(a){a.dataIndex!=null&&(a.dataIndexInside=a.dataIndex,a.dataIndex=null),a.highlightKey="visualMap"+(n?n.componentIndex:"")}),t}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._shapes={},a._dataInterval=[],a._handleEnds=[],a._hoverLinkDataIndices=[],a}return n.prototype.init=function(a,s){t.prototype.init.call(this,a,s),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},n.prototype.doRender=function(a,s,l,u){(!u||u.type!=="selectDataRange"||u.from!==this.uid)&&this._buildView()},n.prototype._buildView=function(){this.group.removeAll();var a=this.visualMapModel,s=this.group;this._orient=a.get("orient"),this._useHandle=a.get("calculable"),this._resetInterval(),this._renderBar(s);var l=a.get("text");this._renderEndsText(s,l,0),this._renderEndsText(s,l,1),this._updateView(!0),this.renderBackground(s),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(s)},n.prototype._renderEndsText=function(a,s,l){if(s){var u=s[1-l];u=u!=null?u+"":"";var c=this.visualMapModel,p=c.get("textGap"),d=c.itemSize,x=this._shapes.mainGroup,_=this._applyTransform([d[0]/2,l===0?-p:d[1]+p],x),S=this._applyTransform(l===0?"bottom":"top",x),T=this._orient,A=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle$1(A,{x:_[0],y:_[1],verticalAlign:T==="horizontal"?"middle":S,align:T==="horizontal"?S:"center",text:u})}))}},n.prototype._renderBar=function(a){var s=this.visualMapModel,l=this._shapes,u=s.itemSize,c=this._orient,p=this._useHandle,d=getItemAlign(s,this.api,u),x=l.mainGroup=this._createBarGroup(d),_=new Group$3;x.add(_),_.add(l.outOfRange=createPolygon()),_.add(l.inRange=createPolygon(null,p?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),_.setClipPath(new Rect$2({shape:{x:0,y:0,width:u[0],height:u[1],r:3}}));var S=s.textStyleModel.getTextRect(""),T=mathMax(S.width,S.height);p&&(l.handleThumbs=[],l.handleLabels=[],l.handleLabelPoints=[],this._createHandle(s,x,0,u,T,c),this._createHandle(s,x,1,u,T,c)),this._createIndicator(s,x,u,T,c),a.add(x)},n.prototype._createHandle=function(a,s,l,u,c,p){var d=bind$1(this._dragHandle,this,l,!1),x=bind$1(this._dragHandle,this,l,!0),_=parsePercent$1(a.get("handleSize"),u[0]),S=createSymbol$1(a.get("handleIcon"),-_/2,-_/2,_,_,null,!0),T=getCursor(this._orient);S.attr({cursor:T,draggable:!0,drift:d,ondragend:x,onmousemove:function(F){stop(F.event)}}),S.x=u[0]/2,S.useStyle(a.getModel("handleStyle").getItemStyle()),S.setStyle({strokeNoScale:!0,strokeFirst:!0}),S.style.lineWidth*=2,S.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(S,!0),s.add(S);var A=this.visualMapModel.textStyleModel,R=new ZRText({cursor:T,draggable:!0,drift:d,onmousemove:function(F){stop(F.event)},ondragend:x,style:createTextStyle$1(A,{x:0,y:0,text:""})});R.ensureState("blur").style={opacity:.1},R.stateTransition={duration:200},this.group.add(R);var D=[_,0],O=this._shapes;O.handleThumbs[l]=S,O.handleLabelPoints[l]=D,O.handleLabels[l]=R},n.prototype._createIndicator=function(a,s,l,u,c){var p=parsePercent$1(a.get("indicatorSize"),l[0]),d=createSymbol$1(a.get("indicatorIcon"),-p/2,-p/2,p,p,null,!0);d.attr({cursor:"move",invisible:!0,silent:!0,x:l[0]/2});var x=a.getModel("indicatorStyle").getItemStyle();if(d instanceof ZRImage){var _=d.style;d.useStyle(extend({image:_.image,x:_.x,y:_.y,width:_.width,height:_.height},x))}else d.useStyle(x);s.add(d);var S=this.visualMapModel.textStyleModel,T=new ZRText({silent:!0,invisible:!0,style:createTextStyle$1(S,{x:0,y:0,text:""})});this.group.add(T);var A=[(c==="horizontal"?u/2:HOVER_LINK_OUT)+l[0]/2,0],R=this._shapes;R.indicator=d,R.indicatorLabel=T,R.indicatorLabelPoint=A,this._firstShowIndicator=!0},n.prototype._dragHandle=function(a,s,l,u){if(this._useHandle){if(this._dragging=!s,!s){var c=this._applyTransform([l,u],this._shapes.mainGroup,!0);this._updateInterval(a,c[1]),this._hideIndicator(),this._updateView()}s===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),s?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[a],!1)}},n.prototype._resetInterval=function(){var a=this.visualMapModel,s=this._dataInterval=a.getSelected(),l=a.getExtent(),u=[0,a.itemSize[1]];this._handleEnds=[linearMap(s[0],l,u,!0),linearMap(s[1],l,u,!0)]},n.prototype._updateInterval=function(a,s){s=s||0;var l=this.visualMapModel,u=this._handleEnds,c=[0,l.itemSize[1]];sliderMove(s,u,c,a,0);var p=l.getExtent();this._dataInterval=[linearMap(u[0],c,p,!0),linearMap(u[1],c,p,!0)]},n.prototype._updateView=function(a){var s=this.visualMapModel,l=s.getExtent(),u=this._shapes,c=[0,s.itemSize[1]],p=a?c:this._handleEnds,d=this._createBarVisual(this._dataInterval,l,p,"inRange"),x=this._createBarVisual(l,l,c,"outOfRange");u.inRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),u.outOfRange.setStyle({fill:x.barColor}).setShape("points",x.barPoints),this._updateHandle(p,d)},n.prototype._createBarVisual=function(a,s,l,u){var c={forceState:u,convertOpacityToAlpha:!0},p=this._makeColorGradient(a,c),d=[this.getControllerVisual(a[0],"symbolSize",c),this.getControllerVisual(a[1],"symbolSize",c)],x=this._createBarPoints(l,d);return{barColor:new LinearGradient(0,0,0,1,p),barPoints:x,handlesColor:[p[0].color,p[p.length-1].color]}},n.prototype._makeColorGradient=function(a,s){var l=100,u=[],c=(a[1]-a[0])/l;u.push({color:this.getControllerVisual(a[0],"color",s),offset:0});for(var p=1;p<l;p++){var d=a[0]+c*p;if(d>a[1])break;u.push({color:this.getControllerVisual(d,"color",s),offset:p/l})}return u.push({color:this.getControllerVisual(a[1],"color",s),offset:1}),u},n.prototype._createBarPoints=function(a,s){var l=this.visualMapModel.itemSize;return[[l[0]-s[0],a[0]],[l[0],a[0]],[l[0],a[1]],[l[0]-s[1],a[1]]]},n.prototype._createBarGroup=function(a){var s=this._orient,l=this.visualMapModel.get("inverse");return new Group$3(s==="horizontal"&&!l?{scaleX:a==="bottom"?1:-1,rotation:Math.PI/2}:s==="horizontal"&&l?{scaleX:a==="bottom"?-1:1,rotation:-Math.PI/2}:s==="vertical"&&!l?{scaleX:a==="left"?1:-1,scaleY:-1}:{scaleX:a==="left"?1:-1})},n.prototype._updateHandle=function(a,s){if(this._useHandle){var l=this._shapes,u=this.visualMapModel,c=l.handleThumbs,p=l.handleLabels,d=u.itemSize,x=u.getExtent(),_=this._applyTransform("left",l.mainGroup);each$1([0,1],function(S){var T=c[S];T.setStyle("fill",s.handlesColor[S]),T.y=a[S];var A=linearMap(a[S],[0,d[1]],x,!0),R=this.getControllerVisual(A,"symbolSize");T.scaleX=T.scaleY=R/d[0],T.x=d[0]-R/2;var D=applyTransform(l.handleLabelPoints[S],getTransform$1(T,this.group));if(this._orient==="horizontal"){var O=_==="left"||_==="top"?(d[0]-R)/2:(d[0]-R)/-2;D[1]+=O}p[S].setStyle({x:D[0],y:D[1],text:u.formatValueText(this._dataInterval[S]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",l.mainGroup):"center"})},this)}},n.prototype._showIndicator=function(a,s,l,u){var c=this.visualMapModel,p=c.getExtent(),d=c.itemSize,x=[0,d[1]],_=this._shapes,S=_.indicator;if(S){S.attr("invisible",!1);var T={convertOpacityToAlpha:!0},A=this.getControllerVisual(a,"color",T),R=this.getControllerVisual(a,"symbolSize"),D=linearMap(a,p,x,!0),O=d[0]-R/2,F={x:S.x,y:S.y};S.y=D,S.x=O;var z=applyTransform(_.indicatorLabelPoint,getTransform$1(S,this.group)),j=_.indicatorLabel;j.attr("invisible",!1);var Z=this._applyTransform("left",_.mainGroup),W=this._orient,J=W==="horizontal";j.setStyle({text:(l||"")+c.formatValueText(s),verticalAlign:J?Z:"middle",align:J?"center":Z});var en={x:O,y:D,style:{fill:A}},tn={style:{x:z[0],y:z[1]}};if(c.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var Ct={duration:100,easing:"cubicInOut",additive:!0};S.x=F.x,S.y=F.y,S.animateTo(en,Ct),j.animateTo(tn,Ct)}else S.attr(en),j.attr(tn);this._firstShowIndicator=!1;var Q=this._shapes.handleLabels;if(Q)for(var on=0;on<Q.length;on++)this.api.enterBlur(Q[on])}},n.prototype._enableHoverLinkToSeries=function(){var a=this;this._shapes.mainGroup.on("mousemove",function(s){if(a._hovering=!0,!a._dragging){var l=a.visualMapModel.itemSize,u=a._applyTransform([s.offsetX,s.offsetY],a._shapes.mainGroup,!0,!0);u[1]=mathMin(mathMax(0,u[1]),l[1]),a._doHoverLinkToSeries(u[1],0<=u[0]&&u[0]<=l[0])}}).on("mouseout",function(){a._hovering=!1,!a._dragging&&a._clearHoverLinkToSeries()})},n.prototype._enableHoverLinkFromSeries=function(){var a=this.api.getZr();this.visualMapModel.option.hoverLink?(a.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),a.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},n.prototype._doHoverLinkToSeries=function(a,s){var l=this.visualMapModel,u=l.itemSize;if(l.option.hoverLink){var c=[0,u[1]],p=l.getExtent();a=mathMin(mathMax(c[0],a),c[1]);var d=getHalfHoverLinkSize(l,p,c),x=[a-d,a+d],_=linearMap(a,c,p,!0),S=[linearMap(x[0],c,p,!0),linearMap(x[1],c,p,!0)];x[0]<c[0]&&(S[0]=-1/0),x[1]>c[1]&&(S[1]=1/0),s&&(S[0]===-1/0?this._showIndicator(_,S[1],"< ",d):S[1]===1/0?this._showIndicator(_,S[0],"> ",d):this._showIndicator(_,_," ",d));var T=this._hoverLinkDataIndices,A=[];(s||useHoverLinkOnHandle(l))&&(A=this._hoverLinkDataIndices=l.findTargetDataIndices(S));var R=compressBatches(T,A);this._dispatchHighDown("downplay",makeHighDownBatch(R[0],l)),this._dispatchHighDown("highlight",makeHighDownBatch(R[1],l))}},n.prototype._hoverLinkFromSeriesMouseOver=function(a){var s;if(findEventDispatcher(a.target,function(d){var x=getECData(d);if(x.dataIndex!=null)return s=x,!0},!0),!!s){var l=this.ecModel.getSeriesByIndex(s.seriesIndex),u=this.visualMapModel;if(u.isTargetSeries(l)){var c=l.getData(s.dataType),p=c.getStore().get(u.getDataDimensionIndex(c),s.dataIndex);isNaN(p)||this._showIndicator(p,p)}}},n.prototype._hideIndicator=function(){var a=this._shapes;a.indicator&&a.indicator.attr("invisible",!0),a.indicatorLabel&&a.indicatorLabel.attr("invisible",!0);var s=this._shapes.handleLabels;if(s)for(var l=0;l<s.length;l++)this.api.leaveBlur(s[l])},n.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var a=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(a,this.visualMapModel)),a.length=0},n.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var a=this.api.getZr();a.off("mouseover",this._hoverLinkFromSeriesMouseOver),a.off("mouseout",this._hideIndicator)},n.prototype._applyTransform=function(a,s,l,u){var c=getTransform$1(s,u?null:this.group);return isArray$1(a)?applyTransform(a,c,l):transformDirection(a,c,l)},n.prototype._dispatchHighDown=function(a,s){s&&s.length&&this.api.dispatchAction({type:a,batch:s})},n.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},n.type="visualMap.continuous",n}(VisualMapView);function createPolygon(t,n,a,s){return new Polygon({shape:{points:t},draggable:!!a,cursor:n,drift:a,onmousemove:function(l){stop(l.event)},ondragend:s})}function getHalfHoverLinkSize(t,n,a){var s=HOVER_LINK_SIZE/2,l=t.get("hoverLinkDataSize");return l&&(s=linearMap(l,n,a,!0)/2),s}function useHoverLinkOnHandle(t){var n=t.get("hoverLinkOnHandle");return!!(n??t.get("realtime"))}function getCursor(t){return t==="vertical"?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(t,n){n.eachComponent({mainType:"visualMap",query:t},function(a){a.setSelected(t.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(t,n){var a=[];return n.eachComponent("visualMap",function(s){var l=t.pipelineContext;!s.isTargetSeries(t)||l&&l.large||a.push(incrementalApplyVisual(s.stateList,s.targetVisuals,bind$1(s.getValueState,s),s.getDataDimensionIndex(t.getData())))}),a}},{createOnAllSeries:!0,reset:function(t,n){var a=t.getData(),s=[];n.eachComponent("visualMap",function(l){if(l.isTargetSeries(t)){var u=l.getVisualMeta(bind$1(getColorVisual,null,t,l))||{stops:[],outerColors:[]},c=l.getDataDimensionIndex(a);c>=0&&(u.dimension=c,s.push(u))}}),t.getData().setVisual("visualMeta",s)}}];function getColorVisual(t,n,a,s){for(var l=n.targetVisuals[s],u=VisualMapping.prepareVisualTypes(l),c={color:getVisualFromData(t.getData(),"color")},p=0,d=u.length;p<d;p++){var x=u[p],_=l[x==="opacity"?"__alphaForOpacity":x];_&&_.applyVisual(a,S,T)}return c.color;function S(A){return c[A]}function T(A,R){c[A]=R}}var each=each$f;function visualMapPreprocessor(t){var n=t&&t.visualMap;isArray$1(n)||(n=n?[n]:[]),each(n,function(a){if(a){has(a,"splitList")&&!has(a,"pieces")&&(a.pieces=a.splitList,delete a.splitList);var s=a.pieces;s&&isArray$1(s)&&each(s,function(l){isObject$3(l)&&(has(l,"start")&&!has(l,"min")&&(l.min=l.start),has(l,"end")&&!has(l,"max")&&(l.max=l.end))})}})}function has(t,n){return t&&t.hasOwnProperty&&t.hasOwnProperty(n)}var installed=!1;function installCommon(t){installed||(installed=!0,t.registerSubTypeDefaulter("visualMap",function(n){return!n.categories&&(!(n.pieces?n.pieces.length>0:n.splitNumber>0)||n.calculable)?"continuous":"piecewise"}),t.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(n){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,n)}),t.registerPreprocessor(visualMapPreprocessor))}function install$5(t){t.registerComponentModel(ContinuousModel),t.registerComponentView(ContinuousView),installCommon(t)}var PiecewiseModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._pieceList=[],a}return n.prototype.optionUpdated=function(a,s){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var l=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(a,s);var u=this.option.categories;this.resetVisual(function(c,p){l==="categories"?(c.mappingMethod="category",c.categories=clone$4(u)):(c.dataExtent=this.getExtent(),c.mappingMethod="piecewise",c.pieceList=map$1(this._pieceList,function(d){return d=clone$4(d),p!=="inRange"&&(d.visual=null),d}))})},n.prototype.completeVisualOption=function(){var a=this.option,s={},l=VisualMapping.listVisualTypes(),u=this.isCategory();each$f(a.pieces,function(p){each$f(l,function(d){p.hasOwnProperty(d)&&(s[d]=1)})}),each$f(s,function(p,d){var x=!1;each$f(this.stateList,function(_){x=x||c(a,_,d)||c(a.target,_,d)},this),!x&&each$f(this.stateList,function(_){(a[_]||(a[_]={}))[d]=visualDefault.get(d,_==="inRange"?"active":"inactive",u)})},this);function c(p,d,x){return p&&p[d]&&p[d].hasOwnProperty(x)}t.prototype.completeVisualOption.apply(this,arguments)},n.prototype._resetSelected=function(a,s){var l=this.option,u=this._pieceList,c=(s?l:a).selected||{};if(l.selected=c,each$f(u,function(d,x){var _=this.getSelectedMapKey(d);c.hasOwnProperty(_)||(c[_]=!0)},this),l.selectedMode==="single"){var p=!1;each$f(u,function(d,x){var _=this.getSelectedMapKey(d);c[_]&&(p?c[_]=!1:p=!0)},this)}},n.prototype.getItemSymbol=function(){return this.get("itemSymbol")},n.prototype.getSelectedMapKey=function(a){return this._mode==="categories"?a.value+"":a.index+""},n.prototype.getPieceList=function(){return this._pieceList},n.prototype._determineMode=function(){var a=this.option;return a.pieces&&a.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},n.prototype.setSelected=function(a){this.option.selected=clone$4(a)},n.prototype.getValueState=function(a){var s=VisualMapping.findPieceIndex(a,this._pieceList);return s!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[s])]?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(a){var s=[],l=this._pieceList;return this.eachTargetSeries(function(u){var c=[],p=u.getData();p.each(this.getDataDimensionIndex(p),function(d,x){var _=VisualMapping.findPieceIndex(d,l);_===a&&c.push(x)},this),s.push({seriesId:u.id,dataIndex:c})},this),s},n.prototype.getRepresentValue=function(a){var s;if(this.isCategory())s=a.value;else if(a.value!=null)s=a.value;else{var l=a.interval||[];s=l[0]===-1/0&&l[1]===1/0?0:(l[0]+l[1])/2}return s},n.prototype.getVisualMeta=function(a){if(this.isCategory())return;var s=[],l=["",""],u=this;function c(_,S){var T=u.getRepresentValue({interval:_});S||(S=u.getValueState(T));var A=a(T,S);_[0]===-1/0?l[0]=A:_[1]===1/0?l[1]=A:s.push({value:_[0],color:A},{value:_[1],color:A})}var p=this._pieceList.slice();if(!p.length)p.push({interval:[-1/0,1/0]});else{var d=p[0].interval[0];d!==-1/0&&p.unshift({interval:[-1/0,d]}),d=p[p.length-1].interval[1],d!==1/0&&p.push({interval:[d,1/0]})}var x=-1/0;return each$f(p,function(_){var S=_.interval;S&&(S[0]>x&&c([x,S[0]],"outOfRange"),c(S.slice()),x=S[1])},this),{stops:s,outerColors:l}},n.type="visualMap.piecewise",n.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),n}(VisualMapModel),resetMethods={splitNumber:function(t){var n=this.option,a=Math.min(n.precision,20),s=this.getExtent(),l=n.splitNumber;l=Math.max(parseInt(l,10),1),n.splitNumber=l;for(var u=(s[1]-s[0])/l;+u.toFixed(a)!==u&&a<5;)a++;n.precision=a,u=+u.toFixed(a),n.minOpen&&t.push({interval:[-1/0,s[0]],close:[0,0]});for(var c=0,p=s[0];c<l;p+=u,c++){var d=c===l-1?s[1]:p+u;t.push({interval:[p,d],close:[1,1]})}n.maxOpen&&t.push({interval:[s[1],1/0],close:[0,0]}),reformIntervals(t),each$f(t,function(x,_){x.index=_,x.text=this.formatValueText(x.interval)},this)},categories:function(t){var n=this.option;each$f(n.categories,function(a){t.push({text:this.formatValueText(a,!0),value:a})},this),normalizeReverse(n,t)},pieces:function(t){var n=this.option;each$f(n.pieces,function(a,s){isObject$3(a)||(a={value:a});var l={text:"",index:s};if(a.label!=null&&(l.text=a.label),a.hasOwnProperty("value")){var u=l.value=a.value;l.interval=[u,u],l.close=[1,1]}else{for(var c=l.interval=[],p=l.close=[0,0],d=[1,0,1],x=[-1/0,1/0],_=[],S=0;S<2;S++){for(var T=[["gte","gt","min"],["lte","lt","max"]][S],A=0;A<3&&c[S]==null;A++)c[S]=a[T[A]],p[S]=d[A],_[S]=A===2;c[S]==null&&(c[S]=x[S])}_[0]&&c[1]===1/0&&(p[0]=0),_[1]&&c[0]===-1/0&&(p[1]=0),c[0]===c[1]&&p[0]&&p[1]&&(l.value=c[0])}l.visual=VisualMapping.retrieveVisuals(a),t.push(l)},this),normalizeReverse(n,t),reformIntervals(t),each$f(t,function(a){var s=a.close,l=[["<",""][s[1]],[">",""][s[0]]];a.text=a.text||this.formatValueText(a.value!=null?a.value:a.interval,!1,l)},this)}};function normalizeReverse(t,n){var a=t.inverse;(t.orient==="vertical"?!a:a)&&n.reverse()}var PiecewiseVisualMapView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.doRender=function(){var a=this.group;a.removeAll();var s=this.visualMapModel,l=s.get("textGap"),u=s.textStyleModel,c=u.getFont(),p=u.getTextColor(),d=this._getItemAlign(),x=s.itemSize,_=this._getViewData(),S=_.endsText,T=retrieve(s.get("showLabel",!0),!S),A=!s.get("selectedMode");S&&this._renderEndsText(a,S[0],x,T,d),each$f(_.viewPieceList,function(R){var D=R.piece,O=new Group$3;O.onclick=bind$1(this._onItemClick,this,D),this._enableHoverLink(O,R.indexInModelPieceList);var F=s.getRepresentValue(D);if(this._createItemSymbol(O,F,[0,0,x[0],x[1]],A),T){var z=this.visualMapModel.getValueState(F);O.add(new ZRText({style:{x:d==="right"?-l:x[0]+l,y:x[1]/2,text:D.text,verticalAlign:"middle",align:d,font:c,fill:p,opacity:z==="outOfRange"?.5:1},silent:A}))}a.add(O)},this),S&&this._renderEndsText(a,S[1],x,T,d),box(s.get("orient"),a,s.get("itemGap")),this.renderBackground(a),this.positionGroup(a)},n.prototype._enableHoverLink=function(a,s){var l=this;a.on("mouseover",function(){return u("highlight")}).on("mouseout",function(){return u("downplay")});var u=function(c){var p=l.visualMapModel;p.option.hoverLink&&l.api.dispatchAction({type:c,batch:makeHighDownBatch(p.findTargetDataIndices(s),p)})}},n.prototype._getItemAlign=function(){var a=this.visualMapModel,s=a.option;if(s.orient==="vertical")return getItemAlign(a,this.api,a.itemSize);var l=s.align;return(!l||l==="auto")&&(l="left"),l},n.prototype._renderEndsText=function(a,s,l,u,c){if(s){var p=new Group$3,d=this.visualMapModel.textStyleModel;p.add(new ZRText({style:createTextStyle$1(d,{x:u?c==="right"?l[0]:0:l[0]/2,y:l[1]/2,verticalAlign:"middle",align:u?c:"center",text:s})})),a.add(p)}},n.prototype._getViewData=function(){var a=this.visualMapModel,s=map$1(a.getPieceList(),function(p,d){return{piece:p,indexInModelPieceList:d}}),l=a.get("text"),u=a.get("orient"),c=a.get("inverse");return(u==="horizontal"?c:!c)?s.reverse():l&&(l=l.slice().reverse()),{viewPieceList:s,endsText:l}},n.prototype._createItemSymbol=function(a,s,l,u){var c=createSymbol$1(this.getControllerVisual(s,"symbol"),l[0],l[1],l[2],l[3],this.getControllerVisual(s,"color"));c.silent=u,a.add(c)},n.prototype._onItemClick=function(a){var s=this.visualMapModel,l=s.option,u=l.selectedMode;if(u){var c=clone$4(l.selected),p=s.getSelectedMapKey(a);u==="single"||u===!0?(c[p]=!0,each$f(c,function(d,x){c[x]=x===p})):c[p]=!c[p],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:c})}},n.type="visualMap.piecewise",n}(VisualMapView);function install$4(t){t.registerComponentModel(PiecewiseModel),t.registerComponentView(PiecewiseVisualMapView),installCommon(t)}function install$3(t){use(install$5),use(install$4)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(t,n){var a=t.getModel("aria");if(!a.get("enabled"))return;var s=clone$4(DEFAULT_OPTION);merge(s.label,t.getLocaleModel().get("aria"),!1),merge(a.option,s,!1),l(),u();function l(){var x=a.getModel("decal"),_=x.get("show");if(_){var S=createHashMap();t.eachSeries(function(T){if(!T.isColorBySeries()){var A=S.get(T.type);A||(A={},S.set(T.type,A)),inner(T).scope=A}}),t.eachRawSeries(function(T){if(t.isSeriesFiltered(T))return;if(isFunction$1(T.enableAriaDecal)){T.enableAriaDecal();return}var A=T.getData();if(T.isColorBySeries()){var z=getDecalFromPalette(T.ecModel,T.name,decalPaletteScope,t.getSeriesCount()),j=A.getVisual("decal");A.setVisual("decal",Z(j,z))}else{var R=T.getRawData(),D={},O=inner(T).scope;A.each(function(W){var J=A.getRawIndex(W);D[J]=W});var F=R.count();R.each(function(W){var J=D[W],en=R.getName(W)||W+"",tn=getDecalFromPalette(T.ecModel,en,O,F),Ct=A.getItemVisual(J,"decal");A.setItemVisual(J,"decal",Z(Ct,tn))})}function Z(W,J){var en=W?extend(extend({},J),W):J;return en.dirty=!0,en}})}}function u(){var x=n.getZr().dom;if(x){var _=t.getLocaleModel().get("aria"),S=a.getModel("label");if(S.option=defaults(S.option,_),!!S.get("enabled")){if(x.setAttribute("role","img"),S.get("description")){x.setAttribute("aria-label",S.get("description"));return}var T=t.getSeriesCount(),A=S.get(["data","maxCount"])||10,R=S.get(["series","maxCount"])||10,D=Math.min(T,R),O;if(!(T<1)){var F=p();if(F){var z=S.get(["general","withTitle"]);O=c(z,{title:F})}else O=S.get(["general","withoutTitle"]);var j=[],Z=T>1?S.get(["series","multiple","prefix"]):S.get(["series","single","prefix"]);O+=c(Z,{seriesCount:T}),t.eachSeries(function(tn,Ct){if(Ct<D){var Q=void 0,on=tn.get("name"),gn=on?"withName":"withoutName";Q=T>1?S.get(["series","multiple",gn]):S.get(["series","single",gn]),Q=c(Q,{seriesId:tn.seriesIndex,seriesName:tn.get("name"),seriesType:d(tn.subType)});var In=tn.getData();if(In.count()>A){var dn=S.get(["data","partialData"]);Q+=c(dn,{displayCnt:A})}else Q+=S.get(["data","allData"]);for(var ix=S.get(["data","separator","middle"]),Cn=S.get(["data","separator","end"]),ax=S.get(["data","excludeDimensionId"]),sx=[],lx=0;lx<In.count();lx++)if(lx<A){var ox=In.getName(lx),hx=ax?filter(In.getValues(lx),function(ux,px){return indexOf(ax,px)===-1}):In.getValues(lx),_x=S.get(["data",ox?"withName":"withoutName"]);sx.push(c(_x,{name:ox,value:hx.join(ix)}))}Q+=sx.join(ix)+Cn,j.push(Q)}});var W=S.getModel(["series","multiple","separator"]),J=W.get("middle"),en=W.get("end");O+=j.join(J)+en,x.setAttribute("aria-label",O)}}}}function c(x,_){if(!isString$1(x))return x;var S=x;return each$f(_,function(T,A){S=S.replace(new RegExp("\\{\\s*"+A+"\\s*\\}","g"),T)}),S}function p(){var x=t.get("title");return x&&x.length&&(x=x[0]),x&&x.text}function d(x){var _=t.getLocaleModel().get(["series","typeNames"]);return _[x]||_.chart}}function ariaPreprocessor(t){if(!(!t||!t.aria)){var n=t.aria;n.show!=null&&(n.enabled=n.show),n.label=n.label||{},each$f(["description","general","series","data"],function(a){n[a]!=null&&(n.label[a]=n[a])})}}function install$2(t){t.registerPreprocessor(ariaPreprocessor),t.registerVisual(t.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function t(n){var a=this._condVal=isString$1(n)?new RegExp(n):isRegExp(n)?n:null;if(a==null){var s="";throwError(s)}}return t.prototype.evaluate=function(n){var a=typeof n;return isString$1(a)?this._condVal.test(n):isNumber(a)?this._condVal.test(n+""):!1},t}(),ConstConditionInternal=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),AndConditionInternal=function(){function t(){}return t.prototype.evaluate=function(){for(var n=this.children,a=0;a<n.length;a++)if(!n[a].evaluate())return!1;return!0},t}(),OrConditionInternal=function(){function t(){}return t.prototype.evaluate=function(){for(var n=this.children,a=0;a<n.length;a++)if(n[a].evaluate())return!0;return!1},t}(),NotConditionInternal=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),RelationalConditionInternal=function(){function t(){}return t.prototype.evaluate=function(){for(var n=!!this.valueParser,a=this.getValue,s=a(this.valueGetterParam),l=n?this.valueParser(s):null,u=0;u<this.subCondList.length;u++)if(!this.subCondList[u].evaluate(n?l:s))return!1;return!0},t}();function parseOption(t,n){if(t===!0||t===!1){var a=new ConstConditionInternal;return a.value=t,a}var s="";return isObjectNotArray(t)||throwError(s),t.and?parseAndOrOption("and",t,n):t.or?parseAndOrOption("or",t,n):t.not?parseNotOption(t,n):parseRelationalOption(t,n)}function parseAndOrOption(t,n,a){var s=n[t],l="";isArray$1(s)||throwError(l),s.length||throwError(l);var u=t==="and"?new AndConditionInternal:new OrConditionInternal;return u.children=map$1(s,function(c){return parseOption(c,a)}),u.children.length||throwError(l),u}function parseNotOption(t,n){var a=t.not,s="";isObjectNotArray(a)||throwError(s);var l=new NotConditionInternal;return l.child=parseOption(a,n),l.child||throwError(s),l}function parseRelationalOption(t,n){for(var a="",s=n.prepareGetValue(t),l=[],u=keys(t),c=t.parser,p=c?getRawValueParser(c):null,d=0;d<u.length;d++){var x=u[d];if(!(x==="parser"||n.valueGetterAttrMap.get(x))){var _=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,x)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[x]:x,S=t[x],T=p?p(S):S,A=createFilterComparator(_,T)||_==="reg"&&new RegExpEvaluator(T);A||throwError(a),l.push(A)}}l.length||throwError(a);var R=new RelationalConditionInternal;return R.valueGetterParam=s,R.valueParser=p,R.getValue=n.getValue,R.subCondList=l,R}function isObjectNotArray(t){return isObject$3(t)&&!isArrayLike(t)}var ConditionalExpressionParsed=function(){function t(n,a){this._cond=parseOption(n,a)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}();function parseConditionalExpression(t,n){return new ConditionalExpressionParsed(t,n)}var filterTransform={type:"echarts:filter",transform:function(t){for(var n=t.upstream,a,s=parseConditionalExpression(t.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(p){var d="",x=p.dimension;hasOwn(p,"dimension")||throwError(d);var _=n.getDimensionInfo(x);return _||throwError(d),{dimIdx:_.index}},getValue:function(p){return n.retrieveValueFromItem(a,p.dimIdx)}}),l=[],u=0,c=n.count();u<c;u++)a=n.getRawDataItem(u),s.evaluate()&&l.push(a);return{data:l}}},sortTransform={type:"echarts:sort",transform:function(t){var n=t.upstream,a=t.config,s="",l=normalizeToArray(a);l.length||throwError(s);var u=[];each$f(l,function(_){var S=_.dimension,T=_.order,A=_.parser,R=_.incomparable;if(S==null&&throwError(s),T!=="asc"&&T!=="desc"&&throwError(s),R&&R!=="min"&&R!=="max"){var D="";throwError(D)}if(T!=="asc"&&T!=="desc"){var O="";throwError(O)}var F=n.getDimensionInfo(S);F||throwError(s);var z=A?getRawValueParser(A):null;A&&!z&&throwError(s),u.push({dimIdx:F.index,parser:z,comparator:new SortOrderComparator(T,R)})});var c=n.sourceFormat;c!==SOURCE_FORMAT_ARRAY_ROWS&&c!==SOURCE_FORMAT_OBJECT_ROWS&&throwError(s);for(var p=[],d=0,x=n.count();d<x;d++)p.push(n.getRawDataItem(d));return p.sort(function(_,S){for(var T=0;T<u.length;T++){var A=u[T],R=n.retrieveValueFromItem(_,A.dimIdx),D=n.retrieveValueFromItem(S,A.dimIdx);A.parser&&(R=A.parser(R),D=A.parser(D));var O=A.comparator.evaluate(R,D);if(O!==0)return O}return 0}),{data:p}}};function install$1(t){t.registerTransform(filterTransform),t.registerTransform(sortTransform)}var DatasetModel=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataset",a}return n.prototype.init=function(a,s,l){t.prototype.init.call(this,a,s,l),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},n.prototype.mergeOption=function(a,s){t.prototype.mergeOption.call(this,a,s),disableTransformOptionMerge(this)},n.prototype.optionUpdated=function(){this._sourceManager.dirty()},n.prototype.getSourceManager=function(){return this._sourceManager},n.type="dataset",n.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},n}(ComponentModel),DatasetView=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="dataset",a}return n.type="dataset",n}(ComponentView);function install(t){t.registerComponentModel(DatasetModel),t.registerComponentView(DatasetView)}var CMD=PathProxy.CMD;function aroundEqual(t,n){return Math.abs(t-n)<1e-5}function pathToBezierCurves(t){var n=t.data,a=t.len(),s=[],l,u=0,c=0,p=0,d=0;function x(In,dn){l&&l.length>2&&s.push(l),l=[In,dn]}function _(In,dn,ix,Cn){aroundEqual(In,ix)&&aroundEqual(dn,Cn)||l.push(In,dn,ix,Cn,ix,Cn)}function S(In,dn,ix,Cn,ax,sx){var lx=Math.abs(dn-In),ox=Math.tan(lx/4)*4/3,hx=dn<In?-1:1,_x=Math.cos(In),ux=Math.sin(In),px=Math.cos(dn),dx=Math.sin(dn),mx=_x*ax+ix,gx=ux*sx+Cn,Sx=px*ax+ix,Ex=dx*sx+Cn,Cx=ax*ox*hx,Ax=sx*ox*hx;l.push(mx-Cx*ux,gx+Ax*_x,Sx+Cx*dx,Ex-Ax*px,Sx,Ex)}for(var T,A,R,D,O=0;O<a;){var F=n[O++],z=O===1;switch(z&&(u=n[O],c=n[O+1],p=u,d=c,(F===CMD.L||F===CMD.C||F===CMD.Q)&&(l=[p,d])),F){case CMD.M:u=p=n[O++],c=d=n[O++],x(p,d);break;case CMD.L:T=n[O++],A=n[O++],_(u,c,T,A),u=T,c=A;break;case CMD.C:l.push(n[O++],n[O++],n[O++],n[O++],u=n[O++],c=n[O++]);break;case CMD.Q:T=n[O++],A=n[O++],R=n[O++],D=n[O++],l.push(u+2/3*(T-u),c+2/3*(A-c),R+2/3*(T-R),D+2/3*(A-D),R,D),u=R,c=D;break;case CMD.A:var j=n[O++],Z=n[O++],W=n[O++],J=n[O++],en=n[O++],tn=n[O++]+en;O+=1;var Ct=!n[O++];T=Math.cos(en)*W+j,A=Math.sin(en)*J+Z,z?(p=T,d=A,x(p,d)):_(u,c,T,A),u=Math.cos(tn)*W+j,c=Math.sin(tn)*J+Z;for(var Q=(Ct?-1:1)*Math.PI/2,on=en;Ct?on>tn:on<tn;on+=Q){var gn=Ct?Math.max(on+Q,tn):Math.min(on+Q,tn);S(on,gn,j,Z,W,J)}break;case CMD.R:p=u=n[O++],d=c=n[O++],T=p+n[O++],A=d+n[O++],x(T,d),_(T,d,T,A),_(T,A,p,A),_(p,A,p,d),_(p,d,T,d);break;case CMD.Z:l&&_(u,c,p,d),u=p,c=d;break}}return l&&l.length>2&&s.push(l),s}function adpativeBezier(t,n,a,s,l,u,c,p,d,x){if(aroundEqual(t,a)&&aroundEqual(n,s)&&aroundEqual(l,c)&&aroundEqual(u,p)){d.push(c,p);return}var _=2/x,S=_*_,T=c-t,A=p-n,R=Math.sqrt(T*T+A*A);T/=R,A/=R;var D=a-t,O=s-n,F=l-c,z=u-p,j=D*D+O*O,Z=F*F+z*z;if(j<S&&Z<S){d.push(c,p);return}var W=T*D+A*O,J=-T*F-A*z,en=j-W*W,tn=Z-J*J;if(en<S&&W>=0&&tn<S&&J>=0){d.push(c,p);return}var Ct=[],Q=[];cubicSubdivide(t,a,l,c,.5,Ct),cubicSubdivide(n,s,u,p,.5,Q),adpativeBezier(Ct[0],Q[0],Ct[1],Q[1],Ct[2],Q[2],Ct[3],Q[3],d,x),adpativeBezier(Ct[4],Q[4],Ct[5],Q[5],Ct[6],Q[6],Ct[7],Q[7],d,x)}function pathToPolygons(t,n){var a=pathToBezierCurves(t),s=[];n=n||1;for(var l=0;l<a.length;l++){var u=a[l],c=[],p=u[0],d=u[1];c.push(p,d);for(var x=2;x<u.length;){var _=u[x++],S=u[x++],T=u[x++],A=u[x++],R=u[x++],D=u[x++];adpativeBezier(p,d,_,S,T,A,R,D,c,n),p=R,d=D}s.push(c)}return s}function getDividingGrids(t,n,a){var s=t[n],l=t[1-n],u=Math.abs(s/l),c=Math.ceil(Math.sqrt(u*a)),p=Math.floor(a/c);p===0&&(p=1,c=a);for(var d=[],x=0;x<c;x++)d.push(p);var _=c*p,S=a-_;if(S>0)for(var x=0;x<S;x++)d[x%c]+=1;return d}function divideSector(t,n,a){for(var s=t.r0,l=t.r,u=t.startAngle,c=t.endAngle,p=Math.abs(c-u),d=p*l,x=l-s,_=d>Math.abs(x),S=getDividingGrids([d,x],_?0:1,n),T=(_?p:x)/S.length,A=0;A<S.length;A++)for(var R=(_?x:p)/S[A],D=0;D<S[A];D++){var O={};_?(O.startAngle=u+T*A,O.endAngle=u+T*(A+1),O.r0=s+R*D,O.r=s+R*(D+1)):(O.startAngle=u+R*D,O.endAngle=u+R*(D+1),O.r0=s+T*A,O.r=s+T*(A+1)),O.clockwise=t.clockwise,O.cx=t.cx,O.cy=t.cy,a.push(O)}}function divideRect(t,n,a){for(var s=t.width,l=t.height,u=s>l,c=getDividingGrids([s,l],u?0:1,n),p=u?"width":"height",d=u?"height":"width",x=u?"x":"y",_=u?"y":"x",S=t[p]/c.length,T=0;T<c.length;T++)for(var A=t[d]/c[T],R=0;R<c[T];R++){var D={};D[x]=T*S,D[_]=R*A,D[p]=S,D[d]=A,D.x+=t.x,D.y+=t.y,a.push(D)}}function crossProduct2d(t,n,a,s){return t*s-a*n}function lineLineIntersect(t,n,a,s,l,u,c,p){var d=a-t,x=s-n,_=c-l,S=p-u,T=crossProduct2d(_,S,d,x);if(Math.abs(T)<1e-6)return null;var A=t-l,R=n-u,D=crossProduct2d(A,R,_,S)/T;return D<0||D>1?null:new Point(D*d+t,D*x+n)}function projPtOnLine(t,n,a){var s=new Point;Point.sub(s,a,n),s.normalize();var l=new Point;Point.sub(l,t,n);var u=l.dot(s);return u}function addToPoly(t,n){var a=t[t.length-1];a&&a[0]===n[0]&&a[1]===n[1]||t.push(n)}function splitPolygonByLine(t,n,a){for(var s=t.length,l=[],u=0;u<s;u++){var c=t[u],p=t[(u+1)%s],d=lineLineIntersect(c[0],c[1],p[0],p[1],n.x,n.y,a.x,a.y);d&&l.push({projPt:projPtOnLine(d,n,a),pt:d,idx:u})}if(l.length<2)return[{points:t},{points:t}];l.sort(function(O,F){return O.projPt-F.projPt});var x=l[0],_=l[l.length-1];if(_.idx<x.idx){var S=x;x=_,_=S}for(var T=[x.pt.x,x.pt.y],A=[_.pt.x,_.pt.y],R=[T],D=[A],u=x.idx+1;u<=_.idx;u++)addToPoly(R,t[u].slice());addToPoly(R,A),addToPoly(R,T);for(var u=_.idx+1;u<=x.idx+s;u++)addToPoly(D,t[u%s].slice());return addToPoly(D,T),addToPoly(D,A),[{points:R},{points:D}]}function binaryDividePolygon(t){var n=t.points,a=[],s=[];fromPoints(n,a,s);var l=new BoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),u=l.width,c=l.height,p=l.x,d=l.y,x=new Point,_=new Point;return u>c?(x.x=_.x=p+u/2,x.y=d,_.y=d+c):(x.y=_.y=d+c/2,x.x=p,_.x=p+u),splitPolygonByLine(n,x,_)}function binaryDivideRecursive(t,n,a,s){if(a===1)s.push(n);else{var l=Math.floor(a/2),u=t(n);binaryDivideRecursive(t,u[0],l,s),binaryDivideRecursive(t,u[1],a-l,s)}return s}function clone(t,n){for(var a=[],s=0;s<n;s++)a.push(clonePath(t));return a}function copyPathProps(t,n){n.setStyle(t.style),n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel}function polygonConvert(t){for(var n=[],a=0;a<t.length;)n.push([t[a++],t[a++]]);return n}function split(t,n){var a=[],s=t.shape,l;switch(t.type){case"rect":divideRect(s,n,a),l=Rect$2;break;case"sector":divideSector(s,n,a),l=Sector;break;case"circle":divideSector({r0:0,r:s.r,startAngle:0,endAngle:Math.PI*2,cx:s.cx,cy:s.cy},n,a),l=Sector;break;default:var u=t.getComputedTransform(),c=u?Math.sqrt(Math.max(u[0]*u[0]+u[1]*u[1],u[2]*u[2]+u[3]*u[3])):1,p=map$1(pathToPolygons(t.getUpdatedPathProxy(),c),function(F){return polygonConvert(F)}),d=p.length;if(d===0)binaryDivideRecursive(binaryDividePolygon,{points:p[0]},n,a);else if(d===n)for(var x=0;x<d;x++)a.push({points:p[x]});else{var _=0,S=map$1(p,function(F){var z=[],j=[];fromPoints(F,z,j);var Z=(j[1]-z[1])*(j[0]-z[0]);return _+=Z,{poly:F,area:Z}});S.sort(function(F,z){return z.area-F.area});for(var T=n,x=0;x<d;x++){var A=S[x];if(T<=0)break;var R=x===d-1?T:Math.ceil(A.area/_*n);R<0||(binaryDivideRecursive(binaryDividePolygon,{points:A.poly},R,a),T-=R)}}l=Polygon;break}if(!l)return clone(t,n);for(var D=[],x=0;x<a.length;x++){var O=new l;O.setShape(a[x]),copyPathProps(t,O),D.push(O)}return D}function alignSubpath(t,n){var a=t.length,s=n.length;if(a===s)return[t,n];for(var l=[],u=[],c=a<s?t:n,p=Math.min(a,s),d=Math.abs(s-a)/6,x=(p-2)/6,_=Math.ceil(d/x)+1,S=[c[0],c[1]],T=d,A=2;A<p;){var R=c[A-2],D=c[A-1],O=c[A++],F=c[A++],z=c[A++],j=c[A++],Z=c[A++],W=c[A++];if(T<=0){S.push(O,F,z,j,Z,W);continue}for(var J=Math.min(T,_-1)+1,en=1;en<=J;en++){var tn=en/J;cubicSubdivide(R,O,z,Z,tn,l),cubicSubdivide(D,F,j,W,tn,u),R=l[3],D=u[3],S.push(l[1],u[1],l[2],u[2],R,D),O=l[5],F=u[5],z=l[6],j=u[6]}T-=J-1}return c===t?[S,n]:[t,S]}function createSubpath(t,n){for(var a=t.length,s=t[a-2],l=t[a-1],u=[],c=0;c<n.length;)u[c++]=s,u[c++]=l;return u}function alignBezierCurves(t,n){for(var a,s,l,u=[],c=[],p=0;p<Math.max(t.length,n.length);p++){var d=t[p],x=n[p],_=void 0,S=void 0;d?x?(a=alignSubpath(d,x),_=a[0],S=a[1],s=_,l=S):(S=createSubpath(l||d,d),_=d):(_=createSubpath(s||x,x),S=x),u.push(_),c.push(S)}return[u,c]}function centroid(t){for(var n=0,a=0,s=0,l=t.length,u=0,c=l-2;u<l;c=u,u+=2){var p=t[c],d=t[c+1],x=t[u],_=t[u+1],S=p*_-x*d;n+=S,a+=(p+x)*S,s+=(d+_)*S}return n===0?[t[0]||0,t[1]||0]:[a/n/3,s/n/3,n]}function findBestRingOffset(t,n,a,s){for(var l=(t.length-2)/6,u=1/0,c=0,p=t.length,d=p-2,x=0;x<l;x++){for(var _=x*6,S=0,T=0;T<p;T+=2){var A=T===0?_:(_+T-2)%d+2,R=t[A]-a[0],D=t[A+1]-a[1],O=n[T]-s[0],F=n[T+1]-s[1],z=O-R,j=F-D;S+=z*z+j*j}S<u&&(u=S,c=x)}return c}function reverse(t){for(var n=[],a=t.length,s=0;s<a;s+=2)n[s]=t[a-s-2],n[s+1]=t[a-s-1];return n}function findBestMorphingRotation(t,n,a,s){for(var l=[],u,c=0;c<t.length;c++){var p=t[c],d=n[c],x=centroid(p),_=centroid(d);u==null&&(u=x[2]<0!=_[2]<0);var S=[],T=[],A=0,R=1/0,D=[],O=p.length;u&&(p=reverse(p));for(var F=findBestRingOffset(p,d,x,_)*6,z=O-2,j=0;j<z;j+=2){var Z=(F+j)%z+2;S[j+2]=p[Z]-x[0],S[j+3]=p[Z+1]-x[1]}S[0]=p[F]-x[0],S[1]=p[F+1]-x[1];for(var W=s/a,J=-s/2;J<=s/2;J+=W){for(var en=Math.sin(J),tn=Math.cos(J),Ct=0,j=0;j<p.length;j+=2){var Q=S[j],on=S[j+1],gn=d[j]-_[0],In=d[j+1]-_[1],dn=gn*tn-In*en,ix=gn*en+In*tn;D[j]=dn,D[j+1]=ix;var Cn=dn-Q,ax=ix-on;Ct+=Cn*Cn+ax*ax}if(Ct<R){R=Ct,A=J;for(var sx=0;sx<D.length;sx++)T[sx]=D[sx]}}l.push({from:S,to:T,fromCp:x,toCp:_,rotation:-A})}return l}function isCombineMorphing(t){return t.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(t,n,a){var s=SAVED_METHOD_PREFIX+n,l=t[s]||t[n];t[s]||(t[s]=t[n]);var u=a.replace,c=a.after,p=a.before;t[n]=function(){var d=arguments,x;return p&&p.apply(this,d),u?x=u.apply(this,d):x=l.apply(this,d),c&&c.apply(this,d),x}}function restoreMethod(t,n){var a=SAVED_METHOD_PREFIX+n;t[a]&&(t[n]=t[a],t[a]=null)}function applyTransformOnBeziers(t,n){for(var a=0;a<t.length;a++)for(var s=t[a],l=0;l<s.length;){var u=s[l],c=s[l+1];s[l++]=n[0]*u+n[2]*c+n[4],s[l++]=n[1]*u+n[3]*c+n[5]}}function prepareMorphPath(t,n){var a=t.getUpdatedPathProxy(),s=n.getUpdatedPathProxy(),l=alignBezierCurves(pathToBezierCurves(a),pathToBezierCurves(s)),u=l[0],c=l[1],p=t.getComputedTransform(),d=n.getComputedTransform();function x(){this.transform=null}p&&applyTransformOnBeziers(u,p),d&&applyTransformOnBeziers(c,d),saveAndModifyMethod(n,"updateTransform",{replace:x}),n.transform=null;var _=findBestMorphingRotation(u,c,10,Math.PI),S=[];saveAndModifyMethod(n,"buildPath",{replace:function(T){for(var A=n.__morphT,R=1-A,D=[],O=0;O<_.length;O++){var F=_[O],z=F.from,j=F.to,Z=F.rotation*A,W=F.fromCp,J=F.toCp,en=Math.sin(Z),tn=Math.cos(Z);lerp$1(D,W,J,A);for(var Ct=0;Ct<z.length;Ct+=2){var Q=z[Ct],on=z[Ct+1],gn=j[Ct],In=j[Ct+1],dn=Q*R+gn*A,ix=on*R+In*A;S[Ct]=dn*tn-ix*en+D[0],S[Ct+1]=dn*en+ix*tn+D[1]}var Cn=S[0],ax=S[1];T.moveTo(Cn,ax);for(var Ct=2;Ct<z.length;){var gn=S[Ct++],In=S[Ct++],sx=S[Ct++],lx=S[Ct++],ox=S[Ct++],hx=S[Ct++];Cn===gn&&ax===In&&sx===ox&&lx===hx?T.lineTo(ox,hx):T.bezierCurveTo(gn,In,sx,lx,ox,hx),Cn=ox,ax=hx}}}})}function morphPath(t,n,a){if(!t||!n)return n;var s=a.done,l=a.during;prepareMorphPath(t,n),n.__morphT=0;function u(){restoreMethod(n,"buildPath"),restoreMethod(n,"updateTransform"),n.__morphT=-1,n.createPathProxy(),n.dirtyShape()}return n.animateTo({__morphT:1},defaults({during:function(c){n.dirtyShape(),l&&l(c)},done:function(){u(),s&&s()}},a)),n}function hilbert(t,n,a,s,l,u){var c=16;t=l===a?0:Math.round(32767*(t-a)/(l-a)),n=u===s?0:Math.round(32767*(n-s)/(u-s));for(var p=0,d,x=(1<<c)/2;x>0;x/=2){var _=0,S=0;(t&x)>0&&(_=1),(n&x)>0&&(S=1),p+=x*x*(3*_^S),S===0&&(_===1&&(t=x-1-t,n=x-1-n),d=t,t=n,n=d)}return p}function sortPaths(t){var n=1/0,a=1/0,s=-1/0,l=-1/0,u=map$1(t,function(p){var d=p.getBoundingRect(),x=p.getComputedTransform(),_=d.x+d.width/2+(x?x[4]:0),S=d.y+d.height/2+(x?x[5]:0);return n=Math.min(_,n),a=Math.min(S,a),s=Math.max(_,s),l=Math.max(S,l),[_,S]}),c=map$1(u,function(p,d){return{cp:p,z:hilbert(p[0],p[1],n,a,s,l),path:t[d]}});return c.sort(function(p,d){return p.z-d.z}).map(function(p){return p.path})}function defaultDividePath(t){return split(t.path,t.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(t,n,a){var s=[];function l(W){for(var J=0;J<W.length;J++){var en=W[J];isCombineMorphing(en)?l(en.childrenRef()):en instanceof Path&&s.push(en)}}l(t);var u=s.length;if(!u)return createEmptyReturn();var c=a.dividePath||defaultDividePath,p=c({path:n,count:u});if(p.length!==u)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();s=sortPaths(s),p=sortPaths(p);for(var d=a.done,x=a.during,_=a.individualDelay,S=new Transformable,T=0;T<u;T++){var A=s[T],R=p[T];R.parent=n,R.copyTransform(S),_||prepareMorphPath(A,R)}n.__isCombineMorphing=!0,n.childrenRef=function(){return p};function D(W){for(var J=0;J<p.length;J++)p[J].addSelfToZr(W)}saveAndModifyMethod(n,"addSelfToZr",{after:function(W){D(W)}}),saveAndModifyMethod(n,"removeSelfFromZr",{after:function(W){for(var J=0;J<p.length;J++)p[J].removeSelfFromZr(W)}});function O(){n.__isCombineMorphing=!1,n.__morphT=-1,n.childrenRef=null,restoreMethod(n,"addSelfToZr"),restoreMethod(n,"removeSelfFromZr")}var F=p.length;if(_)for(var z=F,j=function(){z--,z===0&&(O(),d&&d())},T=0;T<F;T++){var Z=_?defaults({delay:(a.delay||0)+_(T,F,s[T],p[T]),done:j},a):a;morphPath(s[T],p[T],Z)}else n.__morphT=0,n.animateTo({__morphT:1},defaults({during:function(W){for(var J=0;J<F;J++){var en=p[J];en.__morphT=n.__morphT,en.dirtyShape()}x&&x(W)},done:function(){O();for(var W=0;W<t.length;W++)restoreMethod(t[W],"updateTransform");d&&d()}},a));return n.__zr&&D(n.__zr),{fromIndividuals:s,toIndividuals:p,count:F}}function separateMorph(t,n,a){var s=n.length,l=[],u=a.dividePath||defaultDividePath;function c(A){for(var R=0;R<A.length;R++){var D=A[R];isCombineMorphing(D)?c(D.childrenRef()):D instanceof Path&&l.push(D)}}if(isCombineMorphing(t)){c(t.childrenRef());var p=l.length;if(p<s)for(var d=0,x=p;x<s;x++)l.push(clonePath(l[d++%p]));l.length=s}else{l=u({path:t,count:s});for(var _=t.getComputedTransform(),x=0;x<l.length;x++)l[x].setLocalTransform(_);if(l.length!==s)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}l=sortPaths(l),n=sortPaths(n);for(var S=a.individualDelay,x=0;x<s;x++){var T=S?defaults({delay:(a.delay||0)+S(x,s,l[x],n[x])},a):a;morphPath(l[x],n[x],T)}return{fromIndividuals:l,toIndividuals:n,count:n.length}}function isMultiple(t){return isArray$1(t[0])}function prepareMorphBatches(t,n){for(var a=[],s=t.length,l=0;l<s;l++)a.push({one:t[l],many:[]});for(var l=0;l<n.length;l++){var u=n[l].length,c=void 0;for(c=0;c<u;c++)a[c%s].many.push(n[l][c])}for(var p=0,l=s-1;l>=0;l--)if(!a[l].many.length){var d=a[p].many;if(d.length<=1)if(p)p=0;else return a;var u=d.length,x=Math.ceil(u/2);a[l].many=d.slice(x,u),a[p].many=d.slice(0,x),p++}return a}var pathDividers={clone:function(t){for(var n=[],a=1-Math.pow(1-t.path.style.opacity,1/t.count),s=0;s<t.count;s++){var l=clonePath(t.path);l.setStyle("opacity",a),n.push(l)}return n},split:null};function applyMorphAnimation(t,n,a,s,l,u){if(!t.length||!n.length)return;var c=getAnimationConfig("update",s,l);if(!(c&&c.duration>0))return;var p=s.getModel("universalTransition").get("delay"),d=Object.assign({setToFinal:!0},c),x,_;isMultiple(t)&&(x=t,_=n),isMultiple(n)&&(x=n,_=t);function S(F,z,j,Z,W){var J=F.many,en=F.one;if(J.length===1&&!W){var tn=z?J[0]:en,Ct=z?en:J[0];if(isCombineMorphing(tn))S({many:[tn],one:Ct},!0,j,Z,!0);else{var Q=p?defaults({delay:p(j,Z)},d):d;morphPath(tn,Ct,Q),u(tn,Ct,tn,Ct,Q)}}else for(var on=defaults({dividePath:pathDividers[a],individualDelay:p&&function(ax,sx,lx,ox){return p(ax+j,Z)}},d),gn=z?combineMorph(J,en,on):separateMorph(en,J,on),In=gn.fromIndividuals,dn=gn.toIndividuals,ix=In.length,Cn=0;Cn<ix;Cn++){var Q=p?defaults({delay:p(Cn,ix)},d):d;u(In[Cn],dn[Cn],z?J[Cn]:F.one,z?F.one:J[Cn],Q)}}for(var T=x?x===t:t.length>n.length,A=x?prepareMorphBatches(_,x):prepareMorphBatches(T?n:t,[T?t:n]),R=0,D=0;D<A.length;D++)R+=A[D].many.length;for(var O=0,D=0;D<A.length;D++)S(A[D],T,O,R),O+=A[D].many.length}function getPathList(t){if(!t)return[];if(isArray$1(t)){for(var n=[],a=0;a<t.length;a++)n.push(getPathList(t[a]));return n}var s=[];return t.traverse(function(l){l instanceof Path&&!l.disableMorphing&&!l.invisible&&!l.ignore&&s.push(l)}),s}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=makeInner();function getDimension(t,n){for(var a=t.dimensions,s=0;s<a.length;s++){var l=t.getDimensionInfo(a[s]);if(l&&l.otherDims[n]===0)return a[s]}}function getValueByDimension(t,n,a){var s=t.getDimensionInfo(a),l=s&&s.ordinalMeta;if(s){var u=t.get(s.name,n);return l&&l.categories[u]||u+""}}function getGroupId(t,n,a,s){var l=s?"itemChildGroupId":"itemGroupId",u=getDimension(t,l);if(u){var c=getValueByDimension(t,n,u);return c}var p=t.getRawDataItem(n),d=s?"childGroupId":"groupId";if(p&&p[d])return p[d]+"";if(!s)return a||t.getId(n)}function flattenDataDiffItems(t){var n=[];return each$f(t,function(a){var s=a.data,l=a.dataGroupId;if(!(s.count()>DATA_COUNT_THRESHOLD))for(var u=s.getIndices(),c=0;c<u.length;c++)n.push({data:s,groupId:getGroupId(s,c,l,!1),childGroupId:getGroupId(s,c,l,!0),divide:a.divide,dataIndex:c})}),n}function fadeInElement(t,n,a){t.traverse(function(s){s instanceof Path&&initProps(s,{style:{opacity:0}},n,{dataIndex:a,isFrom:!0})})}function removeEl(t){if(t.parent){var n=t.getComputedTransform();t.setLocalTransform(n),t.parent.remove(t)}}function stopAnimation(t){t.stopAnimation(),t.isGroup&&t.traverse(function(n){n.stopAnimation()})}function animateElementStyles(t,n,a){var s=getAnimationConfig("update",a,n);s&&t.traverse(function(l){if(l instanceof Displayable){var u=getOldStyle(l);u&&l.animateFrom({style:u},s)}})}function isAllIdSame(t,n){var a=t.length;if(a!==n.length)return!1;for(var s=0;s<a;s++){var l=t[s],u=n[s];if(l.data.getId(l.dataIndex)!==u.data.getId(u.dataIndex))return!1}return!0}function transitionBetween(t,n,a){var s=flattenDataDiffItems(t),l=flattenDataDiffItems(n);function u(j,Z,W,J,en){(W||j)&&Z.animateFrom({style:W&&W!==j?extend(extend({},W.style),j.style):j.style},en)}var c=!1,p=TRANSITION_NONE,d=createHashMap(),x=createHashMap();s.forEach(function(j){j.groupId&&d.set(j.groupId,!0),j.childGroupId&&x.set(j.childGroupId,!0)});for(var _=0;_<l.length;_++){var S=l[_].groupId;if(x.get(S)){p=TRANSITION_P2C;break}var T=l[_].childGroupId;if(T&&d.get(T)){p=TRANSITION_C2P;break}}function A(j,Z){return function(W){var J=W.data,en=W.dataIndex;return Z?J.getId(en):j?p===TRANSITION_P2C?W.childGroupId:W.groupId:p===TRANSITION_C2P?W.childGroupId:W.groupId}}var R=isAllIdSame(s,l),D={};if(!R)for(var _=0;_<l.length;_++){var O=l[_],F=O.data.getItemGraphicEl(O.dataIndex);F&&(D[F.id]=!0)}function z(j,Z){var W=s[Z],J=l[j],en=J.data.hostModel,tn=W.data.getItemGraphicEl(W.dataIndex),Ct=J.data.getItemGraphicEl(J.dataIndex);if(tn===Ct){Ct&&animateElementStyles(Ct,J.dataIndex,en);return}tn&&D[tn.id]||Ct&&(stopAnimation(Ct),tn?(stopAnimation(tn),removeEl(tn),c=!0,applyMorphAnimation(getPathList(tn),getPathList(Ct),J.divide,en,j,u)):fadeInElement(Ct,en,j))}new DataDiffer(s,l,A(!0,R),A(!1,R),null,"multiple").update(z).updateManyToOne(function(j,Z){var W=l[j],J=W.data,en=J.hostModel,tn=J.getItemGraphicEl(W.dataIndex),Ct=filter(map$1(Z,function(Q){return s[Q].data.getItemGraphicEl(s[Q].dataIndex)}),function(Q){return Q&&Q!==tn&&!D[Q.id]});tn&&(stopAnimation(tn),Ct.length?(each$f(Ct,function(Q){stopAnimation(Q),removeEl(Q)}),c=!0,applyMorphAnimation(getPathList(Ct),getPathList(tn),W.divide,en,j,u)):fadeInElement(tn,en,W.dataIndex))}).updateOneToMany(function(j,Z){var W=s[Z],J=W.data.getItemGraphicEl(W.dataIndex);if(!(J&&D[J.id])){var en=filter(map$1(j,function(Ct){return l[Ct].data.getItemGraphicEl(l[Ct].dataIndex)}),function(Ct){return Ct&&Ct!==J}),tn=l[j[0]].data.hostModel;en.length&&(each$f(en,function(Ct){return stopAnimation(Ct)}),J?(stopAnimation(J),removeEl(J),c=!0,applyMorphAnimation(getPathList(J),getPathList(en),W.divide,tn,j[0],u)):each$f(en,function(Ct){return fadeInElement(Ct,tn,j[0])}))}}).updateManyToMany(function(j,Z){new DataDiffer(Z,j,function(W){return s[W].data.getId(s[W].dataIndex)},function(W){return l[W].data.getId(l[W].dataIndex)}).update(function(W,J){z(j[W],Z[J])}).execute()}).execute(),c&&each$f(n,function(j){var Z=j.data,W=Z.hostModel,J=W&&a.getViewOfSeriesModel(W),en=getAnimationConfig("update",W,0);J&&W.isAnimationEnabled()&&en&&en.duration>0&&J.group.traverse(function(tn){tn instanceof Path&&!tn.animators.length&&tn.animateFrom({style:{opacity:0}},en)})})}function getSeriesTransitionKey(t){var n=t.getModel("universalTransition").get("seriesKey");return n||t.id}function convertArraySeriesKeyToString(t){return isArray$1(t)?t.sort().join(","):t}function getDivideShapeFromData(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(t,n){var a=createHashMap(),s=createHashMap(),l=createHashMap();return each$f(t.oldSeries,function(u,c){var p=t.oldDataGroupIds[c],d=t.oldData[c],x=getSeriesTransitionKey(u),_=convertArraySeriesKeyToString(x);s.set(_,{dataGroupId:p,data:d}),isArray$1(x)&&each$f(x,function(S){l.set(S,{key:_,dataGroupId:p,data:d})})}),each$f(n.updatedSeries,function(u){if(u.isUniversalTransitionEnabled()&&u.isAnimationEnabled()){var c=u.get("dataGroupId"),p=u.getData(),d=getSeriesTransitionKey(u),x=convertArraySeriesKeyToString(d),_=s.get(x);if(_)a.set(x,{oldSeries:[{dataGroupId:_.dataGroupId,divide:getDivideShapeFromData(_.data),data:_.data}],newSeries:[{dataGroupId:c,divide:getDivideShapeFromData(p),data:p}]});else if(isArray$1(d)){var S=[];each$f(d,function(R){var D=s.get(R);D.data&&S.push({dataGroupId:D.dataGroupId,divide:getDivideShapeFromData(D.data),data:D.data})}),S.length&&a.set(x,{oldSeries:S,newSeries:[{dataGroupId:c,data:p,divide:getDivideShapeFromData(p)}]})}else{var T=l.get(d);if(T){var A=a.get(T.key);A||(A={oldSeries:[{dataGroupId:T.dataGroupId,data:T.data,divide:getDivideShapeFromData(T.data)}],newSeries:[]},a.set(T.key,A)),A.newSeries.push({dataGroupId:c,data:p,divide:getDivideShapeFromData(p)})}}}}),a}function querySeries(t,n){for(var a=0;a<t.length;a++){var s=n.seriesIndex!=null&&n.seriesIndex===t[a].seriesIndex||n.seriesId!=null&&n.seriesId===t[a].id;if(s)return a}}function transitionSeriesFromOpt(t,n,a,s){var l=[],u=[];each$f(normalizeToArray(t.from),function(c){var p=querySeries(n.oldSeries,c);p>=0&&l.push({dataGroupId:n.oldDataGroupIds[p],data:n.oldData[p],divide:getDivideShapeFromData(n.oldData[p]),groupIdDim:c.dimension})}),each$f(normalizeToArray(t.to),function(c){var p=querySeries(a.updatedSeries,c);if(p>=0){var d=a.updatedSeries[p].getData();u.push({dataGroupId:n.oldDataGroupIds[p],data:d,divide:getDivideShapeFromData(d),groupIdDim:c.dimension})}}),l.length>0&&u.length>0&&transitionBetween(l,u,s)}function installUniversalTransition(t){t.registerUpdateLifecycle("series:beforeupdate",function(n,a,s){each$f(normalizeToArray(s.seriesTransition),function(l){each$f(normalizeToArray(l.to),function(u){for(var c=s.updatedSeries,p=0;p<c.length;p++)(u.seriesIndex!=null&&u.seriesIndex===c[p].seriesIndex||u.seriesId!=null&&u.seriesId===c[p].id)&&(c[p][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),t.registerUpdateLifecycle("series:transition",function(n,a,s){var l=getUniversalTransitionGlobalStore(a);if(l.oldSeries&&s.updatedSeries&&s.optionChanged){var u=s.seriesTransition;if(u)each$f(normalizeToArray(u),function(A){transitionSeriesFromOpt(A,l,s,a)});else{var c=findTransitionSeriesBatches(l,s);each$f(c.keys(),function(A){var R=c.get(A);transitionBetween(R.oldSeries,R.newSeries,a)})}each$f(s.updatedSeries,function(A){A[SERIES_UNIVERSAL_TRANSITION_PROP]&&(A[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var p=n.getSeries(),d=l.oldSeries=[],x=l.oldDataGroupIds=[],_=l.oldData=[],S=0;S<p.length;S++){var T=p[S].getData();T.count()<DATA_COUNT_THRESHOLD&&(d.push(p[S]),x.push(p[S].get("dataGroupId")),_.push(T))}})}use([install$R]);use([install$S]);use([install$Q,install$P,install$O,install$M,install$K,install$I,install$H,install$G,install$F,install$E,install$D,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t,install$s,install$r]);use(install$p);use(install$o);use(install$J);use(install$n);use(install$C);use(install$m);use(install$l);use(install$j);use(install$i);use(install$q);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$c);use(install$9);use(install$6);use(install$8);use(install$7);use(install$3);use(install$5);use(install$4);use(install$2);use(install$1);use(install);use(installUniversalTransition);use(installLabelLayout);const echarts=Object.freeze(Object.defineProperty({__proto__:null,Axis,ChartView,ComponentModel,ComponentView,List:SeriesData,Model,PRIORITY,SeriesModel,color,connect,dataTool,dependencies,disConnect,disconnect,dispose,env,extendChartView,extendComponentModel,extendComponentView,extendSeriesModel,format,getCoordinateSystemDimensions,getInstanceByDom,getInstanceById,getMap,graphic,helper,init:init$1,innerDrawElementOnCanvas:brushSingle,matrix,number,parseGeoJSON,parseGeoJson:parseGeoJSON,registerAction,registerCoordinateSystem,registerLayout,registerLoading,registerLocale,registerMap:registerMap$1,registerPostInit,registerPostUpdate,registerPreprocessor,registerProcessor,registerTheme,registerTransform,registerUpdateLifecycle,registerVisual,setCanvasCreator,setPlatformAPI,throttle,time,use,util,vector,version,zrUtil:util$1,zrender},Symbol.toStringTag,{value:"Module"}));var lib={},sensorPool={},id={},hasRequiredId;function requireId(){return hasRequiredId||(hasRequiredId=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=1,a=function(){return"".concat(n++)};t.default=a}(id)),id}var sensors={},object={},debounce={},hasRequiredDebounce;function requireDebounce(){return hasRequiredDebounce||(hasRequiredDebounce=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,u=null;return function(){for(var c=this,p=arguments.length,d=new Array(p),x=0;x<p;x++)d[x]=arguments[x];clearTimeout(u),u=setTimeout(function(){s.apply(c,d)},l)}};t.default=n}(debounce)),debounce}var constant={},hasRequiredConstant;function requireConstant(){if(hasRequiredConstant)return constant;hasRequiredConstant=1,Object.defineProperty(constant,"__esModule",{value:!0}),constant.SizeSensorId=constant.SensorTabIndex=constant.SensorClassName=void 0;var t="size-sensor-id";constant.SizeSensorId=t;var n="size-sensor-object";constant.SensorClassName=n;var a="-1";return constant.SensorTabIndex=a,constant}var hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,Object.defineProperty(object,"__esModule",{value:!0}),object.createSensor=void 0;var t=a(requireDebounce()),n=requireConstant();function a(l){return l&&l.__esModule?l:{default:l}}var s=function(u,c){var p=void 0,d=[],x=function(){getComputedStyle(u).position==="static"&&(u.style.position="relative");var D=document.createElement("object");return D.onload=function(){D.contentDocument.defaultView.addEventListener("resize",_),_()},D.style.display="block",D.style.position="absolute",D.style.top="0",D.style.left="0",D.style.height="100%",D.style.width="100%",D.style.overflow="hidden",D.style.pointerEvents="none",D.style.zIndex="-1",D.style.opacity="0",D.setAttribute("class",n.SensorClassName),D.setAttribute("tabindex",n.SensorTabIndex),D.type="text/html",u.appendChild(D),D.data="about:blank",D},_=(0,t.default)(function(){d.forEach(function(R){R(u)})}),S=function(D){p||(p=x()),d.indexOf(D)===-1&&d.push(D)},T=function(){p&&p.parentNode&&(p.contentDocument&&p.contentDocument.defaultView.removeEventListener("resize",_),p.parentNode.removeChild(p),u.removeAttribute(n.SizeSensorId),p=void 0,d=[],c&&c())},A=function(D){var O=d.indexOf(D);O!==-1&&d.splice(O,1),d.length===0&&p&&T()};return{element:u,bind:S,destroy:T,unbind:A}};return object.createSensor=s,object}var resizeObserver={},hasRequiredResizeObserver;function requireResizeObserver(){if(hasRequiredResizeObserver)return resizeObserver;hasRequiredResizeObserver=1,Object.defineProperty(resizeObserver,"__esModule",{value:!0}),resizeObserver.createSensor=void 0;var t=requireConstant(),n=a(requireDebounce());function a(l){return l&&l.__esModule?l:{default:l}}var s=function(u,c){var p=void 0,d=[],x=(0,n.default)(function(){d.forEach(function(R){R(u)})}),_=function(){var D=new ResizeObserver(x);return D.observe(u),x(),D},S=function(D){p||(p=_()),d.indexOf(D)===-1&&d.push(D)},T=function(){p.disconnect(),d=[],p=void 0,u.removeAttribute(t.SizeSensorId),c&&c()},A=function(D){var O=d.indexOf(D);O!==-1&&d.splice(O,1),d.length===0&&p&&T()};return{element:u,bind:S,destroy:T,unbind:A}};return resizeObserver.createSensor=s,resizeObserver}var hasRequiredSensors;function requireSensors(){if(hasRequiredSensors)return sensors;hasRequiredSensors=1,Object.defineProperty(sensors,"__esModule",{value:!0}),sensors.createSensor=void 0;var t=requireObject(),n=requireResizeObserver(),a=typeof ResizeObserver<"u"?n.createSensor:t.createSensor;return sensors.createSensor=a,sensors}var hasRequiredSensorPool;function requireSensorPool(){if(hasRequiredSensorPool)return sensorPool;hasRequiredSensorPool=1,Object.defineProperty(sensorPool,"__esModule",{value:!0}),sensorPool.removeSensor=sensorPool.getSensor=sensorPool.Sensors=void 0;var t=s(requireId()),n=requireSensors(),a=requireConstant();function s(d){return d&&d.__esModule?d:{default:d}}var l={};sensorPool.Sensors=l;function u(d){d&&l[d]&&delete l[d]}var c=function(x){var _=x.getAttribute(a.SizeSensorId);if(_&&l[_])return l[_];var S=(0,t.default)();x.setAttribute(a.SizeSensorId,S);var T=(0,n.createSensor)(x,function(){return u(S)});return l[S]=T,T};sensorPool.getSensor=c;var p=function(x){var _=x.element.getAttribute(a.SizeSensorId);x.destroy(),u(_)};return sensorPool.removeSensor=p,sensorPool}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ver=lib.clear=lib.bind=void 0;var t=requireSensorPool(),n=function(u,c){var p=(0,t.getSensor)(u);return p.bind(c),function(){p.unbind(c)}};lib.bind=n;var a=function(u){var c=(0,t.getSensor)(u);(0,t.removeSensor)(c)};lib.clear=a;var s="1.0.2";return lib.ver=s,lib}var libExports=requireLib();function pick(t,n){var a={};return n.forEach(function(s){a[s]=t[s]}),a}function isFunction(t){return typeof t=="function"}function isString(t){return typeof t=="string"}var fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function t(n,a){if(n===a)return!0;if(n&&a&&typeof n=="object"&&typeof a=="object"){if(n.constructor!==a.constructor)return!1;var s,l,u;if(Array.isArray(n)){if(s=n.length,s!=a.length)return!1;for(l=s;l--!==0;)if(!t(n[l],a[l]))return!1;return!0}if(n.constructor===RegExp)return n.source===a.source&&n.flags===a.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===a.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===a.toString();if(u=Object.keys(n),s=u.length,s!==Object.keys(a).length)return!1;for(l=s;l--!==0;)if(!Object.prototype.hasOwnProperty.call(a,u[l]))return!1;for(l=s;l--!==0;){var c=u[l];if(!t(n[c],a[c]))return!1}return!0}return n!==n&&a!==a}),fastDeepEqual}var fastDeepEqualExports=requireFastDeepEqual();const isEqual=getDefaultExportFromCjs(fastDeepEqualExports);var EChartsReactCore=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.echarts=a.echarts,s.ele=null,s.isInitialResize=!0,s}return n.prototype.componentDidMount=function(){this.renderNewEcharts()},n.prototype.componentDidUpdate=function(a){var s=this.props.shouldSetOption;if(!(isFunction(s)&&!s(a,this.props))){if(!isEqual(a.theme,this.props.theme)||!isEqual(a.opts,this.props.opts)||!isEqual(a.onEvents,this.props.onEvents)){this.dispose(),this.renderNewEcharts();return}var l=["option","notMerge","lazyUpdate","showLoading","loadingOption"];isEqual(pick(this.props,l),pick(a,l))||this.updateEChartsOption(),(!isEqual(a.style,this.props.style)||!isEqual(a.className,this.props.className))&&this.resize()}},n.prototype.componentWillUnmount=function(){this.dispose()},n.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)||this.echarts.init(this.ele,this.props.theme,this.props.opts)},n.prototype.dispose=function(){if(this.ele){try{libExports.clear(this.ele)}catch(a){console.warn(a)}this.echarts.dispose(this.ele)}},n.prototype.renderNewEcharts=function(){var a=this,s=this.props,l=s.onEvents,u=s.onChartReady,c=this.updateEChartsOption();this.bindEvents(c,l||{}),isFunction(u)&&u(c),this.ele&&libExports.bind(this.ele,function(){a.resize()})},n.prototype.bindEvents=function(a,s){function l(c,p){isString(c)&&isFunction(p)&&a.on(c,function(d){p(d,a)})}for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&l(u,s[u])},n.prototype.updateEChartsOption=function(){var a=this.props,s=a.option,l=a.notMerge,u=l===void 0?!1:l,c=a.lazyUpdate,p=c===void 0?!1:c,d=a.showLoading,x=a.loadingOption,_=x===void 0?null:x,S=this.getEchartsInstance();return S.setOption(s,u,p),d?S.showLoading(_):S.hideLoading(),S},n.prototype.resize=function(){var a=this.getEchartsInstance();if(!this.isInitialResize)try{a.resize()}catch(s){console.warn(s)}this.isInitialResize=!1},n.prototype.render=function(){var a=this,s=this.props,l=s.style,u=s.className,c=u===void 0?"":u,p=__assign({height:300},l);return React.createElement("div",{ref:function(d){a.ele=d},style:p,className:"echarts-for-react "+c})},n}(reactExports.PureComponent),EChartsReact=function(t){__extends(n,t);function n(a){var s=t.call(this,a)||this;return s.echarts=echarts,s}return n}(EChartsReactCore);const MyEChartsPlot=({freq_new:t,mag_new:n})=>{const a={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#aaa"}},formatter:function(s){const l=s[0],u=l.value[0],c=l.value[1];let p="";return u>=1e9?p=(u/1e9).toFixed(3)+" GHz":u>=1e6?p=(u/1e6).toFixed(3)+" MHz":u>=1e3?p=(u/1e3).toFixed(3)+" kHz":p=u.toFixed(2)+" Hz",`
      <strong>Frequency:</strong> ${p}<br/>
      <strong>Amplitude:</strong> ${c.toPrecision(6)} dB
    `}},xAxis:{min:t[0],max:t[t.length-1],type:"log",name:"freq (Hz)",minorSplitLine:{show:!0},axisLabel:{formatter:function(s){return s>=1e9?(s/1e9).toFixed(2)+"G":s>=1e6?(s/1e6).toFixed(2)+"M":s>=1e3?(s/1e3).toFixed(2)+"k":s.toFixed(2)}}},yAxis:{type:"value",name:"amplitude (dB)"},series:[{data:t.map((s,l)=>[s,n[l]]),type:"line",smooth:!1,lineStyle:{width:2}}]};return jsxRuntimeExports.jsx(EChartsReact,{option:a,style:{width:"100%",height:"400px"}})},Container=createContainer({createStyledComponent:styled("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[`maxWidth${capitalize(String(a.maxWidth))}`],a.fixed&&n.fixed,a.disableGutters&&n.disableGutters]}}),useThemeProps:t=>useDefaultProps({props:t,name:"MuiContainer"})}),initialSchematic={settings:{defaultZoom:.75,gridSize:32,width:2432,height:1792,maxZoom:2},shapes:[{image:"origin.svg",x:0,y:0,fixed:!0,offset:[-32,-32]},{image:"gnd.svg",connectors:[[0,0]],x:192,y:128,offset:[-100,-180]},{image:"vin.svg",connectors:[[0,0]],x:-192,y:0,offset:[-64,0]},{image:"inductor.svg",connectors:[[-64,0],[64,0]],x:-96,y:-64,label:{text:"L0",class:"circuit_label",x:0,y:-30},offset:[-80,-64]},{image:"resistor.svg",connectors:[[-32,0],[64,0]],x:64,y:-64,label:{text:"R0",class:"circuit_label",x:16,y:-36},offset:[-48,-48]},{image:"capacitor.svg",connectors:[[0,-32],[0,64]],x:192,y:32,label:{text:"C0",class:"circuit_label",x:-28,y:0},offset:[-48,-64]},{image:"vprobe.svg",connectors:[[0,0]],x:0,y:-160,offset:[-10,-90],label:{text:"X0",class:"circuit_label",x:0,y:-30}}],wires:[{start:{connectorID:0,shapeID:1},end:{shapeID:5,connectorID:1},points:[]},{start:{connectorID:0,shapeID:5},end:{shapeID:4,connectorID:1},points:[[192,-64]]},{start:{connectorID:0,shapeID:4},end:{shapeID:3,connectorID:1},points:[]},{start:{connectorID:0,shapeID:3},end:{shapeID:2,connectorID:0},points:[[-192,-64]]},{start:{connectorID:0,shapeID:6},end:{shapeID:3,connectorID:1},points:[[0,-64]]}]},initialComponents={L0:{type:"inductor",value:1,unit:"uH"},R0:{type:"resistor",value:10,unit:"K"},C0:{type:"capacitor",value:10,unit:"fF"}},initialSettings={fmin:1,fminUnit:"MHz",fmax:100,fmaxUnit:"GHz",resolution:100};var urlContainsState=!1;function stateFromURL(){const t=new URL(window.location.href),n=t.searchParams.get("components"),a=t.searchParams.get("settings"),s=t.searchParams.get("schematic");var l=initialComponents,u=initialSettings,c=initialSchematic;if(n&&(urlContainsState=!0,l=n.split("__").reduce((p,d)=>{const[x,_,S,T]=d.split("_");return p[x]={type:_,value:parseFloat(S),unit:T},p},{})),a&&(urlContainsState=!0,u=a.split("__").reduce((p,d)=>{const[x,_]=d.split("_");return p[x]=isNaN(_)?_:parseFloat(_),p},{})),s){urlContainsState=!0;const p=Uint8Array.from(atob(decodeURIComponent(s)),x=>x.charCodeAt(0)),d=pako.inflate(p,{to:"string"});c=JSON.parse(d)}return[l,u,c]}const[modifiedComponents,modifiedSettings,modifiedSchematic]=stateFromURL();function new_calculate_tf(textResult,fRange,numSteps,components){if(textResult=="")return{freq_new:[],mag_new:[]};var complex_freq=textResult,rep;for(const t in components)rep=RegExp(t,"g"),complex_freq=complex_freq.replace(rep,components[t]);const re=/s/gi,re2=/\^/gi,re3=/abs/gi;var res=complex_freq.replace(re2,"**");res=res.replace(re3,"");var fstepdB_20=Math.log10(fRange.fmax/fRange.fmin)/numSteps,fstep=10**fstepdB_20,absNew,evalNew;const freq=[],mag=[];try{for(var f=fRange.fmin;f<fRange.fmax;f=f*fstep){freq.push(f);const mathString=res.replace(re,2*Math.PI*f);evalNew=eval(mathString),absNew=Math.abs(evalNew),mag.push(20*Math.log10(absNew))}}catch(t){console.log("oh no",t)}return{freq_new:freq,mag_new:mag}}function compToURL(t,n){return`${t}_${n.type}_${n.value}_${n.unit}`}function App(){const[t,n]=reactExports.useState([]),[a,s]=reactExports.useState({}),[l,u]=reactExports.useState({text:"",mathML:"",complexResponse:"",bilinearRaw:"",bilinearMathML:""}),[c,p]=reactExports.useState(modifiedComponents),[d,x]=reactExports.useState(modifiedSettings),[_,S]=reactExports.useState({pointer:0,state:[modifiedSchematic]}),[T,A]=reactExports.useState(!1),R=()=>{window.location.href=window.location.origin+window.location.pathname};reactExports.useEffect(()=>{const J=setTimeout(()=>{urlContainsState&&A(!0)},1e3);return()=>clearTimeout(J)},[]);function D(){return jsxRuntimeExports.jsx(Snackbar,{open:T,autoHideDuration:1e4,onClose:()=>A(!1),anchorOrigin:{vertical:"top",horizontal:"right"},message:"This Snackbar will be dismissed in 5 seconds.",children:jsxRuntimeExports.jsx(SnackbarContent,{message:"Some settings were loaded from the URL. Please click here to reset to the default state.",sx:{backgroundColor:"#2196f3",color:"#fff",cursor:"pointer",maxWidth:200},onClick:R})})}const O={fmin:d.fmin*units.frequency[d.fminUnit],fmax:d.fmax*units.frequency[d.fmaxUnit]},F={};for(const J in c)F[J]=c[J].value*units[c[J].type][c[J].unit];const{freq_new:z,mag_new:j}=new_calculate_tf(l.complexResponse,O,d.resolution,F);function Z(){const J=new URL(window.location.href);J.searchParams.set("components",Object.keys(c).map(Q=>compToURL(Q,c[Q])).join("__")),J.searchParams.set("settings",Object.keys(d).map(Q=>`${Q}_${d[Q]}`).join("__"));const en=JSON.stringify(_.state[_.pointer]),tn=pako.deflate(en,{to:"string"}),Ct=encodeURIComponent(btoa(String.fromCharCode(...tn)));return J.searchParams.set("schematic",Ct),window.history.pushState({},"",J.toString()),J.toString()}function W(){const[J,en]=calcBilinear();u({...l,bilinearRaw:J,bilinearMathML:`<math>${en}</math>`})}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(D,{}),jsxRuntimeExports.jsx(NavBar,{stateToURL:Z}),jsxRuntimeExports.jsx("div",{className:"w-100 p-2 bg-green pb-5",children:jsxRuntimeExports.jsxs(Container,{maxWidth:"xl",sx:{px:{xs:0,sm:2}},children:[jsxRuntimeExports.jsx("div",{className:"row",children:jsxRuntimeExports.jsx("div",{className:"col",children:jsxRuntimeExports.jsx("p",{className:"my-0",children:"This free online circuit solver tool can calculate the transfer function of circuits built from resistors, capacitors, inductors and op-amps. The user can quickly explore different topologies and find their Laplace transform"})})}),jsxRuntimeExports.jsxs("div",{className:"row shadow-sm rounded bg-lightgreen my-2 py-0",id:"schematic",children:[jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(VisioJSSchematic,{setResults:u,setNodes:n,history:_,setHistory:S,setComponentValues:p,setFullyConnectedComponents:s})}),jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(ComponentAdjuster,{componentValues:c,setComponentValues:p})})]}),jsxRuntimeExports.jsxs("div",{className:"row shadow-sm rounded bg-lightgreen my-2 py-3",id:"schematic",children:[jsxRuntimeExports.jsx(ChoseTF,{setResults:u,nodes:t,fullyConnectedComponents:a,componentValuesSolved:F}),l.text!=""&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DisplayMathML,{title:"Laplace",textResult:l.text,mathML:l.mathML,caclDone:l.text!=""}),jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(MyEChartsPlot,{freq_new:z,mag_new:j})}),jsxRuntimeExports.jsx(FreqAdjusters,{settings:d,setSettings:x}),jsxRuntimeExports.jsx(DisplayMathML,{title:"Bilinear",textResult:l.bilinearRaw,mathML:l.bilinearMathML,handleRequestBilin:()=>W(),caclDone:l.text!=""})]})]}),jsxRuntimeExports.jsx("div",{className:"row my-2 py-1 shadow-sm rounded bg-lightgreen",children:jsxRuntimeExports.jsx(ReleaseNotes,{})},"releaseNotes"),jsxRuntimeExports.jsx("div",{className:"row my-2 py-1 shadow-sm rounded bg-lightgreen",children:jsxRuntimeExports.jsx($,{"website-id":"12350","page-id":"7"})},"comments")]})},"wrapper"),jsxRuntimeExports.jsx(Footer,{})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
